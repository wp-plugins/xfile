//>>built
require({cache:{"url:davinci/ui/templates/newtheme.html":"\x3cdiv\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3ctable\x3e\n\t\t\x3ctr\x3e\n\t\t\x3ctd\x3e${themeToClone}:\x3c/td\x3e\x3ctd\x3e \x3cdiv dojoType\x3d\"davinci.ui.widgets.ThemeSelection\" workspaceOnly\x3d\"false\" dojoAttachPoint \x3d '_themeSelection'\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv dojoAttachPoint\x3d'_error1'\x3e\x3c/div\x3e\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\t\x3ctr\x3e\x3ctd colspan\x3d'3'\x3e\x3chr\x3e\x3c/hr\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\x3c!-- \n\t\t\x3ctr\x3e\n\t\t\x3ctd\x3eNew Name:\x3c/td\x3e\x3ctd\x3e\x3cinput style\x3d'width:100%' type\x3d'select' dojoAttachPoint\x3d\"_themeName\"\x3e\x3c/input\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv dojoAttachPoint\x3d'_error2'\x3e\x3c/div\x3e\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\t\x3ctr\x3e\n\t\t\x3ctd\x3eVersion:\x3c/td\x3e\x3ctd\x3e\x3cinput style\x3d'width:100%' type\x3d'text' dojoAttachPoint\x3d\"_version\"\x3e\x3c/input\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv dojoAttachPoint\x3d'_error3'\x3e\x3c/div\x3e\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\t --\x3e\n\t\t\x3ctr\x3e\n\t\t\x3ctd\x3e${newName}:\x3c/td\x3e\x3ctd\x3e\x3cinput class\x3d'templateInput' type\x3d'text' \n\t\t\tdojoAttachPoint\x3d\"_selector\"\n\t\t\tdojoType\x3d\"dijit.form.ValidationTextBox\"\n\t\t\trequired\x3d\"true\" \n\t\t\tinvalidMessage\x3d'${invalidThemeName}'\x3e\x3c/input\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv dojoAttachPoint\x3d'_error4'\x3e\x3c/div\x3e\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"_okButton\" dojoAttachEvent\x3d'onClick:okButton' label\x3d'${create}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\" disabled\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\t\t\n\x3c/div\x3e"}});
define("davinci/ui/NewTheme","dojo/_base/declare dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin system/resource ../model/Path ../Workbench ../workbench/Preferences dojo/i18n!./nls/ui dojo/i18n!dijit/nls/common dojo/text!./templates/newtheme.html ../Theme ./widgets/ThemeSelection dijit/form/Button dijit/form/ValidationTextBox".split(" "),function(h,k,l,m,n,p,f,q,d,r,s,t,u,v,w){return h([l,k,m],{templateString:s,_themeSelection:null,_okButton:null,_folder:null,_themeName:null,
_folder:null,_version:null,_selector:null,_themeLocation:null,_error1:null,_error2:null,_error3:null,_error4:null,_errorMsg:null,_themeValidator:/^[-]?([_a-z]|[^\0-\237]|\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?|\[^\n\r\f0-9a-f])([_a-z0-9-]|[^\0-\237]|\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?|\[^\n\r\f0-9a-f])*$/i,postMixInProperties:function(){dojo.mixin(this,d);dojo.mixin(this,r);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);dojo.connect(this._themeSelection,"onChange",this,"_baseThemeChanged");
dojo.connect(this._themeSelection,"onChange",this,"_checkValid");this._selector.validator=dojo.hitch(this,function(c,a){var b=this._themeValidator.test(c);this._okButton.set("disabled",!b);return b})},_baseThemeChanged:function(){this._theme=this._themeSelection.get("value")},_createTheme:function(){this._okButton.set("disabled",!0);var c=this._themeSelection.get("value"),a=this._selector.get("value"),b=this._getThemeLocation();if(n.findResource(b+"/"+a+".theme"))alert(d.themeAlreadyExists);else{this._loading=
dojo.create("div",null,dojo.body(),"first");this._loading.innerHTML=dojo.string.substitute("\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3cspan\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e\x26nbsp;${0}...\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",[d.creatingTheme]);dojo.addClass(this._loading,"loading");dojo.style(this._loading,"opacity","0.5");this.getBase();var g=t.CloneTheme(a,null,a,b,c,!0);g.promise.then(function(b){var e=g.themeFile;if(e)return e.isNew=!1,e.getContent().then(function(a){f.openEditor({fileName:e,
content:a})});throw Error(d.errorCreatingTheme+a);}).otherwise(function(a){var b="Uh oh! An error has occurred:\x3cbr\x3e\x3cb\x3e"+a.message+"\x3c/b\x3e";a.fileName&&(b+="\x3cbr\x3efile: "+a.fileName+"\x3cbr\x3eline: "+a.lineNumber);a.stack&&(b+="\x3cbr\x3e\x3cpre\x3e"+a.stack+"\x3c/pre\x3e");console.error(b)}).otherwise(function(){this._loading&&(this._loading.parentNode.removeChild(this._loading),delete this._loading)}.bind(this))}},getBase:function(){if(f.singleProjectMode())return f.getProject()},
_getThemeLocation:function(){var c=this._selector.get("value"),a=this.getBase(),b=q.getPreferences("davinci.ui.ProjectPrefs",a);return(new p(a)).append(b.themeFolder).append(c).toString()},_checkValid:function(){var c=!0,a=this._themeSelection.get("value"),b=this._selector.get("value");if(null==a||""==a||null==b||""==b)c=!1;this._okButton.set("disabled",!c)},okButton:function(){this._createTheme()},cancelButton:function(){this.cancel=!0;this.onClose()},onClose:function(){}})});
//# sourceMappingURL=NewTheme.js.map