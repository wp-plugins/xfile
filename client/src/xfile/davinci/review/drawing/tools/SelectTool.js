//>>built
define("davinci/review/drawing/tools/SelectTool",["dojo/_base/declare","./_ToolCommon","./scaffolds/scaffolds","../shapes/shapes"],function(f,g,d,e){return f("davinci.review.drawing.tools.SelectTool",g,{constructor:function(a,b){a.selectTool=this},hasPermission:function(a){var b=this.surface;return dojo.every(this.filterAttributes,function(c){return a[c]&&b[c]&&a[c]==b[c]})},selectShape:function(a,b,c){this.deselectShape();this.shape=a;b||(a.isInstanceOf(e.Arrow)?this.scaffold=new d.ArrowScaffold(this.surface):
a.isInstanceOf(e.Rectangle)?this.scaffold=new d.RectangleScaffold(this.surface):a.isInstanceOf(e.Ellipse)?this.scaffold=new d.EllipseScaffold(this.surface):a.isInstanceOf(e.Text)?this.scaffold=new d.TextScaffold(this.surface):Error("Invalid shape type!"));this.scaffold.wrapShape(a,b,c);dojo.publish("/davinci/review/drawing/selectshape",[a,this.surface])},deselectShape:function(){this.scaffold&&this.scaffold.destroy();var a=this.shape;this.scaffold=this.shape=null;dojo.publish("/davinci/review/drawing/deselectshape",
[a,this.surface])},removeShape:function(){this.scaffold&&this.scaffold.removeShape();this.deselectShape()},activate:function(){this._evtSubs=[dojo.subscribe("/davinci/review/drawing/shapemouseover",this,"_onShapeMouseOver"),dojo.subscribe("/davinci/review/drawing/shapemouseout",this,"_onShapeMouseOut"),dojo.subscribe("/davinci/review/drawing/shapemousedown",this,"_onShapeMouseDown")];this._evtConns=[dojo.connect(this.surface.domNode,"mousedown",this,"deselectShape")]},_onShapeMouseOver:function(a,
b,c){this.surface===c&&(!this.surface.isDrawing&&!a.editable&&this.hasPermission(a))&&a.style({cursor:"move"})},_onShapeMouseOut:function(a,b,c){this.surface===c&&(!this.surface.isDrawing&&!a.editable&&this.hasPermission(a))&&a.style({cursor:""})},_onShapeMouseDown:function(a,b,c){this.surface===c&&(!this.surface.isDrawing&&!a.editable&&this.hasPermission(a))&&(dojo.stopEvent(b),this.selectShape(a,!1,{x:b.pageX,y:b.pageY}))},deactivate:function(){this.deselectShape();this.inherited(arguments)}})});
//# sourceMappingURL=SelectTool.js.map