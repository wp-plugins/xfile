//>>built
define("davinci/commands/CommandStack",["dojo/_base/declare"],function(d){return d("davinci.commands.CommandStack",null,{constructor:function(a){this._context=a;this._undoStack=[];this._redoStack=[]},execute:function(a){if(a){var c;c=this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",a,[this._context]):a.execute();this._undoStack.push(a);this._redoStack=[];if(!c)this.onExecute(a,"execute")}},undo:function(){if(this.canUndo()){var a=
this._undoStack.pop();a._runDelegate?a._runDelegate.undoDelegate(a):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"undo",a):a.undo();this._redoStack.push(a);this.onExecute(a,"undo")}},redo:function(){if(this.canRedo()){var a=this._redoStack.pop();a._runDelegate?a._runDelegate.redoDelegate(a):this._context&&"davinci.ve.themeEditor.Context"!=this._context.declaredClass?dojo.withDoc(this._context.getDocument(),"execute",a):a.execute();
this._undoStack.push(a);this.onExecute(a,"redo")}},canUndo:function(){return 0<this._undoStack.length},canRedo:function(){return 0<this._redoStack.length},getUndoCount:function(){return this._undoStack.length},getRedoCount:function(){return this._redoStack.length},clear:function(){this._undoStack=[];this._redoStack=[]},jump:function(a,c){var b=this.getUndoCount(),d=this.getRedoCount();if(a==b)return a;if(0>a||a>b+d)return-1;b=a-b;if(c)if(0>b)for(;0>b;)this._redoStack.push(this._undoStack.pop()),b++;
else for(;0<b;)this._undoStack.push(this._redoStack.pop()),b--;else if(0>b)for(;0>b;)this.undo(),b++;else for(;0<b;)this.redo(),b--;return a},onExecute:function(a,c){},undoDelegate:function(a){},redoDelegate:function(a){}})});
//# sourceMappingURL=CommandStack.js.map