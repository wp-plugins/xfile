//>>built
define("davinci/ve/commands/StyleCommand",["dojo/_base/declare","davinci/ve/widget","davinci/ve/utils/StyleArray"],function(l,m,g){return l("davinci.ve.commands.StyleCommand",null,{name:"style",constructor:function(a,c,b){this._newValues=c;this._id=a?a.id:void 0;this._applyToStateIndex=!b||"Normal"==b||"undefined"==b?"undefined":b},add:function(a){a&&a._id==this._id&&a._newValues&&dojo.mixin(this._newValues,a._newValues)},execute:function(){if(this._id&&this._newValues){var a=require("davinci/ve/widget").byId(this._id);
if(a&&a.domNode){var c=require("davinci/ve/States"),b=a.getStyleValuesAllStates();this._oldStyleValuesAllStates=dojo.clone(b);b[this._applyToStateIndex]=b[this._applyToStateIndex]?g.mergeStyleArrays(b[this._applyToStateIndex],this._newValues):this._newValues;for(var e=b[this._applyToStateIndex],d=e.length-1;0<=d;d--){var f=e[d],k=!1,h;for(h in f)"$MAQ_DELETE_PROPERTY$"==f[h]?delete f[h]:k=!0;k||e.splice(d,1)}a.setStyleValuesAllStates(b);e=c.getStatesListCurrent(a.domNode);f=g.mergeStyleArrays([],
b.undefined);for(d=0;d<e.length;d++)b[e[d]]&&(f=g.mergeStyleArrays(f,b[e[d]]));a.setStyleValuesCanvas(f);a.setStyleValuesModel(b.undefined);a.refresh();c.resetState(a.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[a]])}}},undo:function(){if(this._id&&this._oldStyleValuesAllStates){var a=require("davinci/ve/widget").byId(this._id);if(a){require("davinci/ve/States");var c=this._oldStyleValuesAllStates,b=this._applyToStateIndex;a.setStyleValuesAllStates(c);c=g.mergeStyleArrays(c.undefined,
c[b]);a.setStyleValuesCanvas(c);a.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);a.refresh();require("davinci/ve/States").resetState(a.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[a]])}}}})});
//# sourceMappingURL=StyleCommand.js.map