//>>built
define("davinci/ve/widgets/CommonProperties",["dojo/_base/declare","davinci/workbench/ViewLite","davinci/ve/commands/ModifyCommand"],function(e,f,g){return e("davinci.ve.widgets.CommonProperties",[f],{buildRendering:function(){var b=["title"],a;a="\x3ctable width\x3d'100%' class\x3d'property_table_stretchable' border\x3d'0' cellspacing\x3d'0' cellpadding\x3d'0'\x3e\x3ccolgroup\x3e\x3ccol style\x3d'width:15px;' /\x3e";a+="\x3ccol class\x3d'gap02' /\x3e";a+="\x3ccol class\x3d'gap03' /\x3e";a+="\x3ccol style\x3d'width:15px;' /\x3e";
a+="\x3c/colgroup\x3e";var c=0;this._boxes={};for(var d=0;d<b.length;d++)this._boxes[b[d]]={value:""},this._boxes[b[d]].id="davinci_properties_event_"+c++ +"_combo",a+="\x3ctr\x3e",a+="\x3ctd/\x3e",a+="\x3ctd class\x3d'propertyDisplayName'\x3e",a+=b[d]+":",a+="\x3c/td\x3e",a+="\x3ctd\x3e",a+="\x3cinput type\x3d'text' id\x3d'"+this._boxes[b[d]].id+"'\x3e\x3c/input\x3e",a+="\x3c/td\x3e",a+="\x3ctd/\x3e",a+="\x3c/tr\x3e";a+="\x3c/table\x3e";this.domNode=dojo.doc.createElement("div");this.domNode.innerHTML=
a;dojo.subscribe("/davinci/ui/widgetValuesChanged",dojo.hitch(this,this.onWidgetSelectionChange));dojo.subscribe("/davinci/ui/widget/replaced",dojo.hitch(this,this._widgetReplaced));this.inherited(arguments)},onEditorSelected:function(b){this._editor&&this._editor.getContext?(this.context=this._editor.getContext(),this._setValues()):(this.context=this._widget=this._subwidget=null,this._clearValues())},startup:function(){function b(a){return function(){return this._onChange({target:a})}}this.inherited(arguments);
for(var a in this._boxes)this._boxes[a].domNode=dojo.byId(this._boxes[a].id),dojo.connect(this._boxes[a].domNode,"onchange",this,b(a)),dojo.connect(this._boxes[a].domNode,"onfocus",this,"_onFocus"),dojo.connect(this._boxes[a].domNode,"onblur",this,"_onBlur")},_onFocus:function(){this.context&&this.context.blockChange(!0)},_onBlur:function(){this.context&&this.context.blockChange(!1)},_onChange:function(b){b=b.target;var a=dojo.attr(this._boxes[b].domNode,"value");this.context&&this.context.blockChange(!1);
if(this._boxes[b].value!=a){this._boxes[b].value=a;var c={};c[b]=a;b=new g(this._widget,c,null);dojo.publish("/davinci/ui/widgetPropertiesChanges",[{source:this._editor.editor_id,command:b}])}},_widgetReplaced:function(b,a){this._widget===a&&(this._widget=b,this.onWidgetSelectionChange())},onWidgetSelectionChange:function(){this._widget?(this._setValues(),this.set("readOnly",!1)):(this.set("readOnly",!0),this._clearValues())},_clearValues:function(){for(name in this._boxes)this._boxes[name].domNode&&
dojo.attr(this._boxes[name].domNode,"value",""),this._boxes[name].value=null},_setValues:function(){if(this._widget)for(var b in this._boxes){var a=this._widget,c=this._boxes[b];c.domNode&&c.domNode.ownerDocument&&(a.getPropertyValue?(a=a.getPropertyValue(b),c.value!=a&&(c.value=a,dojo.attr(c.domNode,"value",c.value))):(c.value="",dojo.attr(c.domNode,"value","")))}}})});
//# sourceMappingURL=CommonProperties.js.map