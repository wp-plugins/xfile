//>>built
require({cache:{"url:davinci/ve/actions/templates/EnableApplicationStates.html":"\x3cdiv\x3e\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerWidgetDiv'\x3e\n\t\t\t${veNls.EnableApplicationStatesCurrentWidget}:\n\t\t\t\x3cspan class\x3d'EnableAsStateContainerWidgetLabel' dojoAttachPoint\x3d'widgetLabel'\x3e\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerStatesDiv' dojoAttachPoint\x3d'statesListDiv'\x3e\n\t\t\t//Filled in by JavaScript logic\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerDescriptionDiv' dojoAttachPoint\x3d'description'\x3e\n\t\t\t//Filled in by JavaScript logic\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d'EnableAsStateContainerCheckBoxDiv'\x3e\n\t\t\t\x3cinput dojoAttachPoint\x3d\"checkBoxWidget\" dojoType\x3d\"dijit.form.CheckBox\" dojoAttachEvent\x3d\"onKeyUp:_onKeyPress\" type\x3d\"text\"\x3e\x3c/input\x3e\n\t\t\t${veNls.EnableAsStateContainerWidgetLabel}\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\t\t\t\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d'okButton' label\x3d'${commonNls.buttonOk}' class\x3d\"maqPrimaryButton\"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d'cancelButton' label\x3d'${commonNls.buttonCancel}' class\x3d\"maqSecondaryButton\"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n"}});
define("davinci/ve/actions/EnableApplicationStates","dojo/_base/declare dojo/_base/connect dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/Workbench davinci/ve/metadata davinci/ve/widget davinci/ve/States davinci/actions/Action dojo/i18n!davinci/ve/nls/ve dojo/i18n!dijit/nls/common dojo/text!./templates/EnableApplicationStates.html dijit/form/TextBox".split(" "),function(e,g,u,h,k,l,b,m,n,p,d,q,c,r,s){var f=function(){if(b.currentEditor&&
b.currentEditor.currentEditor&&b.currentEditor.currentEditor.context){context=b.currentEditor.currentEditor.context;var a=context.getSelection();if(1==a.length)return"ANY"==n.getAllowedChild(a[0].type)}return!1};e("davinci.ve.actions.EnableApplicationStatesWidget",[h,k,l],{templateString:s,widgetsInTemplate:!0,veNls:c,commonNls:r,oldValue:null,widget:null,postCreate:function(){if(b.currentEditor&&b.currentEditor.currentEditor&&b.currentEditor.currentEditor.context){editor=this.editor=b.currentEditor;
context=this.context=b.currentEditor.currentEditor.context;var a=context.getSelection();if(0<a.length){var a=this.widget=a[0],t=p.getLabel(a);this.widgetLabel.innerHTML=t;this.oldValue=d.isStateContainer(a.domNode);this.checkBoxWidget.set("checked",this.oldValue);this.oldValue?(a=d.getStates(a.domNode),1<a.length?(a.splice(0,1),this.statesListDiv.innerHTML=c.EnableApplicationStatesCurrentStates+": "+a.join(", ")):this.statesListDiv.innerHTML=c.EnableApplicationStatesCurrentStates+": "+c.EnableApplicationStatesNone,
this.description.innerHTML=c.DisableAsStateContainerDescription):(this.description.innerHTML=c.EnableAsStateContainerDescription,this.statesListDiv.innerHTML="")}this.okButton.connect(this.okButton,"onClick",dojo.hitch(this,function(a){this.onOk(a)}));this.cancelButton.connect(this.cancelButton,"onClick",dojo.hitch(this,function(a){this.onCancel(a)}))}},_onKeyPress:function(a){if(a.keyCode==dojo.keys.ENTER)this.onOk()},onOk:function(){var a=this.checkBoxWidget.get("checked");if(a!=this.oldValue){var b=
this.widget.domNode;a?(b._maqAppStates={},a=d.serialize(b),this.widget._srcElement.addAttribute(d.APPSTATES_ATTRIBUTE,a.maqAppStates)):(delete b._maqAppStates,this.widget._srcElement.removeAttribute(d.APPSTATES_ATTRIBUTE),d.removeUnusedStates(this.context));this.editor._visualChanged();g.publish("/maqetta/appstates/state/containerChange",[])}this.onClose()},onCancel:function(){this.onClose()}});return e("davinci.ve.actions.EnableApplicationStates",[q],{run:function(){if(f()&&b.currentEditor&&b.currentEditor.currentEditor&&
b.currentEditor.currentEditor.context){var a=new davinci.ve.actions.EnableApplicationStatesWidget;m.showModal(a,c.EnableApplicationStates,{width:"370px"})}},isEnabled:function(){return f()}})});
//# sourceMappingURL=EnableApplicationStates.js.map