//>>built
define("davinci/workbench/OutlineView","dojo/_base/declare ./ViewPart ../Workbench ../ui/widgets/OutlineTree dijit/layout/ContentPane dojo/i18n!./nls/workbench".split(" "),function(b,c,d,e,f,g){return b(c,{constructor:function(a,b){this.subscribe("/davinci/ui/editorSelected",this.editorChanged);this.subscribe("/davinci/ui/context/pagerebuilt",this._pageRebuilt)},_getViewActions:function(){return[]},editorChanged:function(a){a=a.editor;if(this.currentEditor){if(this.currentEditor==a)return;this.outlineTree&&
(this.removeContent(),this.outlineTree.destroy());delete this.outlineProvider;delete this.outlineTree;delete this._toolbarID}if(this.currentEditor=a)a.getOutline&&(this.outlineProvider=a.getOutline()),this.toolbarDiv.innerHTML="",this.outlineProvider?(this.outlineProvider._outlineView=this,this.createTree()):this.containerNode.innerHTML=g.outlineNotAvailable},createTree:function(){this.outlineTree&&this.removeContent();this.popup&&this.popup.destroyRecursive();this.outlineProvider&&this.outlineProvider.getModel&&
(this.outlineModel=this.outlineProvider.getModel(this.currentEditor));var a={model:this.outlineModel,showRoot:this.outlineModel.showRoot,betweenThreshold:this.outlineModel.betweenThreshold,checkItemAcceptance:this.outlineModel.checkItemAcceptance,isMultiSelect:!0,persist:!1,openOnDblClick:!0,autoExpand:!0,openOnClick:!0};this.outlineProvider.getIconClass&&(a.getIconClass=this.outlineProvider.getIconClass);this.currentEditor.getContext&&(a.context=this.currentEditor.getContext());this.outlineModel.dndController&&
(a.dndController=this.outlineModel.dndController);this.outlineTree=new e(a);this.container=new f({style:"padding:0"});this.subcontainer=dojo.doc.createElement("div");this.subcontainer.id="dvOutlineSubcontainer";this.subcontainer.appendChild(this.outlineTree.domNode);this.container.domNode.appendChild(this.subcontainer);this.setContent(this.container);this.attachToolbar();this.outlineTree.startup();this.outlineProvider&&(this.outlineProvider._tree=this.outlineTree);a=this.outlineProvider.getActionsID&&
this.outlineProvider.getActionsID()||"davinci.ui.outline";this.popup=d.createPopup({partID:a,domNode:this.outlineTree.domNode,openCallback:this.outlineTree.getMenuOpenCallback?this.outlineTree.getMenuOpenCallback():null})},_getViewContext:function(){return this.outlineProvider},selectionChanged:function(a){!this.publishing["/davinci/ui/selectionChanged"]&&(a.length&&a[0].model&&this.outlineTree)&&this.outlineTree.selectNode([a[0].model])},_pageRebuilt:function(){if(this.outlineTree){var a=this.outlineTree.get("paths");
this.createTree();this.outlineTree.set("paths",a)}},modelChanged:function(a){this.outlineModel&&this.outlineModel.refresh?this.outlineModel.refresh():this.outlineProvider&&this.outlineProvider.getStore&&(this.outlineModel.store=this.outlineProvider.getStore(),this.outlineModel.onChange(this.outlineProvider._rootItem))}})});
//# sourceMappingURL=OutlineView.js.map