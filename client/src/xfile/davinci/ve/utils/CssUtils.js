//>>built
define("davinci/ve/utils/CssUtils",["dojo/_base/Color","davinci/ve/utils/URLRewrite"],function(q,r){var m=[],n;for(n in q.named)"transparent"!=n&&m.push(n);m.sort(function(a,b){return 0==b.indexOf(a)?1:0==a.indexOf(b)?-1:a<b?-1:1});var p=[];m.forEach(function(a){p.push(a);a=q.named[a];a="#"+(16777216+(a[0]<<16)+(a[1]<<8)+a[2]).toString(16).slice(1);p.push(a)});var u=/^\-?(?:\d*\.\d+|\d+)$/,m="(?:";for(n=0;n<p.length;n+=2)0!=n&&(m+="|"),m+=p[n];m="(?:"+(m+")")+"|\\#(?:[0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})|(?:rgb|hsl)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*\\)|(?:rgba|hsla)\\s*\\(\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*(?:\\d*\\.\\d+|\\d+)\\s*\\))";
n="(?:"+m+"(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?)";var v=RegExp("(?:\\s*("+m+")\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0))?\\s*,?(.*))");n="("+n+"(?:\\s*,\\s*"+n+")*)";var w=/^\s*(url)\s*\(\s*(?:\'([^\']*)\'*|\"([^\"]*)\"|([^\'\"]*))\s*\)\s*$/,x=RegExp("^\\s*((?:-moz-linear-gradient|-webkit-linear-gradient|-ms-linear-gradient|-o-linear-gradient|linear-gradient))\\s*\\(\\s*(?:(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*,\\s*)?\\s*"+
n+"\\s*\\)\\s*$"),y=RegExp("^\\s*((?:-moz-radial-gradient|-webkit-radial-gradient|-ms-radial-gradient|-o-radial-gradient|radial-gradient))\\s*\\(\\s*(?:\\s*(?:\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*|\\s*(\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?)\\s*|\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)deg))\\s*)\\s*,\\s*)?\\s*(?:\\s*(?:\\s*(circle|ellipse)\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*(circle|ellipse)\\s*|\\s*(circle|ellipse)\\s*|\\s*((?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?)))\\s*)\\s*,\\s*)?\\s*"+
n+"\\s*\\)\\s*$"),z=RegExp("(?:\\s*((?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?)))\\s+((?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?)))\\s*)");n="("+("(?:\\s*,\\s*"+("(?:"+("(?:color-stop\\s*\\(\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)%?)\\s*,\\s*"+m+"\\s*\\)\\s*)")+"|"+("(?:from\\s*\\(\\s*"+m+"\\s*\\)\\s*)")+"|"+("(?:to\\s*\\(\\s*"+m+"\\s*\\)\\s*)")+")")+"\\s*)")+"+)";var A=RegExp("(?:\\s*,\\s*"+("(?:"+("(?:(color-stop)\\s*\\(\\s*((?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*,\\s*("+
m+")\\s*\\)\\s*)")+"|"+("(?:(from)\\s*\\(\\s*("+m+")\\s*\\)\\s*)")+"|"+("(?:(to)\\s*\\(\\s*("+m+")\\s*\\)\\s*)")+")")+"\\s*)(.*)"),B=RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(linear)\\s*(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)"+
n+"\\s*\\)\\s*)"),C=RegExp("(?:\\s*(-webkit-gradient)\\s*\\(\\s*(radial)\\s*(?:(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)(?:\\s*,\\s*((?:\\s*(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s+(?:top|bottom|left|right|center|(?:\\-?(?:\\d*\\.\\d+|\\d+)%?))\\s*))\\s*)(?:\\s*,\\s*((?:\\d*\\.\\d+|\\d+))\\s*)?)"+n+"\\s*\\)\\s*)"),
s=function(a){var b=[];do{var c=a.match(v);c&&(b.push({color:c[1],pos:c[2]}),a=c[3])}while(c);return b},t=function(a){var b=[],c=[],e,f;do{var d=a.match(A);d&&(d[4]?e={color:d[5]}:d[6]?f={color:d[7]}:(a=d[2].match(u)?100*d[2]+"%":d[2],c.push({color:d[3],pos:a})),a=d[8])}while(d);e&&b.push(e);for(e=0;e<c.length;e++)b.push(c[e]);f&&b.push(f);return b};return{regstr_posn:"^\\s*\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom))(?:\\s*(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)|(?:left|center|right|top|bottom)))?\\s*$",
regstr_len_or_pct:"^\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*$",regstr_angle:"^\\s*(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*$",regstr_shape:"^\\s*circle|ellipse\\s*$",regstr_extent:"^\\s*(?:(?:closest-side|farthest-side|closest-corner|farthest-corner|contain|cover)|(?:(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)(?:\\s+(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*)?))\\s*$",regstr_stop_color:"\\s*"+
m+"\\s*",regstr_stop_pos:"\\s*(?:\\-?(?:\\d*\\.\\d+|\\d+)(?:in|cm|mm|pt|pc|px|%)|0)\\s*",parseBackgroundImage:function(a){var b={},c=a.match(/^\s*$/);if(c)b.type="emptystring";else if(c=a.match(/^\s*none\s*$/))b.type="none";else if(c=a.match(w))b.type="url",b.func=c[1],b.url=c[2]?c[2]:c[3]?c[3]:c[4];else if(c=a.match(B)){b.type="linear";b.func=c[1];b.webkitGradType=c[2];b.webKitPosn1=c[3];b.webKitPosn2=c[4];var e=b.webKitPosn1,f=b.webKitPosn2;a=0<=e.indexOf("left");var d=0<=e.indexOf("top"),k=0<=
e.indexOf("right"),e=0<=e.indexOf("bottom"),h=0<=f.indexOf("left"),g=0<=f.indexOf("top"),l=0<=f.indexOf("right"),f=0<=f.indexOf("bottom");d&&f&&(a&&h||k&&l)?b.angle="to bottom":e&&g&&(a&&h||k&&l)?b.angle="to top":a&&l&&(d&&g||e&&f)?b.angle="to right":h&&k&&(d&&g||e&&f)?b.angle="to left":a&&d&&l&&f?b.angle="to bottom right":a&&e&&l&&g?b.angle="to top right":k&&d&&h&&f?b.angle="to bottom left":k&&(e&&h&&g)&&(b.angle="to top left");b.stops=t(c[5])}else if(c=a.match(C))b.type="radial",b.func=c[1],b.webkitGradType=
c[2],b.webKitPosn1=c[3],b.webKitRadius1=c[4],b.webKitPosn2=c[5],b.webKitRadius2=c[6],b.shape=b.webKitPosn1==b.webKitPosn2?"circle":"ellipse",d=b.webKitPosn1,(a=d.match(z))?(d=a[1],d.match(/^\d+$/)&&(d+="px"),a=a[2],a.match(/^\d+$/)&&(a+="px"),a=d+" "+a):a=d,b.posn=a,b.extent=b.webKitRadius2?b.webKitRadius2+"px":b.webKitRadius1?b.webKitRadius1+"px":"farthest-corner",b.stops=t(c[7]);else if(c=a.match(x))b.type="linear",b.func=c[1],b.angle=c[2]?"to "+c[2]:c[3]?"to "+c[3]:c[4],b.stops=s(c[5]);else if(c=
a.match(y))b.type="radial",b.func=c[1],b.posn=c[2]?c[2]:c[4],b.angle=c[3]?c[3]:c[5],b.shape=c[6]?c[6]:c[9]?c[9]:c[10],b.extent=c[7]?c[7]:c[8]?c[8]:c[11],b.stops=s(c[12]);c||(b.type="unknown");return b},buildBackgroundImage:function(a){var b=[];if("emptystring"==a.type)b.push("");else if("none"==a.type)b.push("none");else if("url"==a.type){if("string"==typeof a.url&&0<a.url.length){var c=r.getUrl(a.url);c||(c=r.stripQuotes(a.url));b.push("url('"+c+"')")}}else if("linear"==a.type||"radial"==a.type){for(var c=
"",e,f,d=[],k=0;k<a.stops.length;k++){var h=a.stops[k],g="string"==typeof h.pos&&0<h.pos.length?h.pos:"";0<k&&(c+=", ");c+=h.color;if(0<k&&k<a.stops.length-1||0==k&&!(0==g.length||"0%"==g||0==g-0)||k==a.stops.length-1&&!(0==g.length||"100%"==g||1==g-0))c+=" "+g;0==k&&(0==g.length||"0%"==g||0==g-0)?e="from("+h.color+")":k==a.stops.length-1&&(0==g.length||"100%"==g||1==g-0)?f="to("+h.color+")":d.push("color-stop("+g+", "+h.color+")")}h="";g=!1;e&&(h+=e,g=!0);f&&(g&&(h+=", "),h+=f,g=!0);for(k=0;k<d.length;k++)g&&
(h+=", "),h+=d[k],g=!0;if("linear"==a.type){e="(";var l=a.angle;(f="string"==typeof l&&0<l.length?l.match(RegExp("^\\s*(?:to\\s+((?:\\s*left\\s*|\\s*right\\s*|\\s*top\\s*|\\s*bottom\\s*){1,2})|((?:\\-?(?:\\d*\\.\\d+|\\d+)deg)))\\s*$")):null)||(l="to bottom");"to bottom"!=l&&(e+=l+",");a="(linear,";d=0<=l.indexOf("left");k=0<=l.indexOf("top");g=0<=l.indexOf("right");l=0<=l.indexOf("bottom");d&&k?a+=" right bottom, left top, ":d&&l?a+=" right top, left bottom, ":g&&k?a+=" left bottom, right top, ":
g&&l?a+=" left top, right bottom, ":d?a+=" right top, left top, ":g?a+=" left top, right top, ":k?a+=" left bottom, left top, ":l?a+=" left top, left bottom, ":(d=180*(90-parseFloat(f[4]))/Math.PI,f=Math.cos(d),d=Math.sin(d),0<=f&&0<=d?(a+="0% 100%,",a=Math.abs(f)>Math.abs(d)?a+("100% "+100*(1-Math.abs(d)/Math.abs(f))+"%"):a+(100*(Math.abs(f)/Math.abs(d))+"% 100%")):0<=f&&0>d?(a+="0% 0%,",a=Math.abs(f)>Math.abs(d)?a+("100% "+100*(Math.abs(-d)/Math.abs(f))+"%"):a+(100*(Math.abs(f)/Math.abs(d))+"% 100%")):
0>f&&0<=d?(a+="100% 100%,",a=Math.abs(f)>Math.abs(d)?a+("0% "+100*(1-Math.abs(d)/Math.abs(f))+"%"):a+(100*(Math.abs(f)/Math.abs(d))+"% 100%")):(a+="100% 0%,",a=Math.abs(f)>Math.abs(d)?a+("0% "+100*(Math.abs(-d)/Math.abs(f))+"%"):a+(100*(Math.abs(f)/Math.abs(d))+"% 100%")),a+=", ");e+=c+")";b.push("-webkit-gradient"+(a+(h+")")));b.push("-o-linear-gradient"+e);b.push("-ms-linear-gradient"+e);b.push("-moz-linear-gradient"+e);b.push("-webkit-linear-gradient"+e);b.push("linear-gradient"+e)}else e="(",
"center"!=a.posn&&"center center"!=a.posn&&(e+=a.posn+", "),"circle"!=a.shape&&(e+=a.shape+", "),"farthest-corner"!=a.extent&&(e+=a.extent+", "),e+=c+")",a="(radial, center center, 10, center center, "+(h+")"),b.push("-webkit-gradient"+a),b.push("-o-radial-gradient"+e),b.push("-ms-radial-gradient"+e),b.push("-moz-radial-gradient"+e),b.push("-webkit-radial-gradient"+e),b.push("radial-gradient"+e)}return b}}});
//# sourceMappingURL=CssUtils.js.map