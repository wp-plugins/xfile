//>>built
define("davinci/review/drawing/shapes/Text",["dojo/_base/declare","./_ShapeCommon"],function(c,d){return c("davinci.review.drawing.shapes.Text",d,{render:function(){this.shapeNode||(this._createEditArea(),this._evtConns.push(dojo.connect(this.shapeNode,"mouseover",this,"onMouseOver"),dojo.connect(this.shapeNode,"mouseout",this,"onMouseOut"),dojo.connect(this.shapeNode,"mousedown",this,"onMouseDown"),dojo.connect(this.shapeNode,"dblclick",this,"_onDoubleClick"),dojo.connect(this.shapeNode,"blur",this,
"_onblur")));this._transformTextArea();this.inherited(arguments)},setText:function(a){this.shapeNode.innerHTML=a},getText:function(){return this.shapeNode.innerHTML.replace(/"/g,"'")},getEditMode:function(){this.surface.isActivated&&(this.editable=!0,dojo.attr(this.shapeNode,"contenteditable","true"),dojo.style(this.shapeNode,"cursor",""),this.shapeNode.focus())},_createEditArea:function(){this.shapeNode=dojo.create("div");this.width=Math.abs(this.x1-this.x2);this.height=Math.abs(this.y1-this.y2);
dojo.style(this.shapeNode,{position:"absolute",padding:"2px",margin:"0px",border:"1px dotted black",overflow:"hidden",color:this.color,width:this.width+"px",height:this.height+"px"})},_transformTextArea:function(){this.width=Math.abs(this.x1-this.x2);this.height=Math.abs(this.y1-this.y2);dojo.style(this.shapeNode,{left:this.x1+"px",top:this.y1+"px",width:this.width+"px",height:this.height+"px"})},_onDoubleClick:function(a){this.surface.isActivated&&this.isReadOnly()&&(this.editable=!0,dojo.attr(this.shapeNode,
"contenteditable","true"),dojo.style(this.shapeNode,"cursor",""),this.shapeNode.focus())},_onblur:function(a){this.surface.isActivated&&(this.editable=!1,dojo.attr(this.shapeNode,"contenteditable","false"),dojo.style(this.shapeNode,"cursor","auto"))},isReadOnly:function(){var a=this.surface;return dojo.every(this.filterAttributes,function(b){return this[b]&&a[b]&&this[b]==a[b]},this)}})});
//# sourceMappingURL=Text.js.map