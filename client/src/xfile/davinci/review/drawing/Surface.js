//>>built
define("davinci/review/drawing/Surface",["dojo/_base/declare"],function(f){return f("davinci.review.drawing.Surface",null,{constructor:function(a,b,c){b=b||dojo.doc;this.canvas=a;this.context=c;this.domNode=a===b.body?b:a;this._tools=[];this.shapes=[]},activate:function(){this.highlightTool&&this.highlightTool.deactivate();this.isActivated=!0},deactivate:function(){this.highlightTool&&this.highlightTool.activate();this.isActivated=!1},setValueByAttribute:function(a,b,c,d){dojo.forEach(this.shapes,
function(e){e[a]&&e[a]==b&&(e[c]=d)})},getShapesByAttribute:function(a,b){var c=[];dojo.forEach(this.shapes,function(d){(!a||!b||d[a]&&dojo.some(b,function(b){return d[a]==b}))&&c.push(d)});return c},style:function(a){var b=this.canvas.tagName;b&&"body"==b.toLowerCase()?dojo.style(this.canvas,a):dojo.style(this.domNode,a)},appendShape:function(a){this.shapes.push(a)},removeShape:function(a){this.selectTool&&this.selectTool.deselectShape();for(var b=0;b<this.shapes.length;b++)this.shapes[b]===a&&(a.destroy(),
b==this.shapes.length-1?this.shapes.pop():this.shapes[b]=this.shapes.pop())},clear:function(){this.selectTool&&this.selectTool.deselectShape();dojo.forEach(this.shapes,function(a){a.destroy()});this.shapes=[]},appendChild:function(a){return this.canvas.appendChild(a)},removeChild:function(a){return this.canvas.removeChild(a)},destroy:function(){this.selectTool&&(this.selectTool.deactivate(),this.selectTool.destroy());this.createTool&&(this.createTool.deactivate(),this.createTool.destroy());this.exchangeTool&&
this.exchangeTool.destroy();this.highlightTool&&(this.highlightTool.deactivate(),this.highlightTool.destroy());dojo.forEach(this.shapes,function(a){a.destroy()})}})});
//# sourceMappingURL=Surface.js.map