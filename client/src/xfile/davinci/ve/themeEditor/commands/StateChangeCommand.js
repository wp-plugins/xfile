//>>built
define("davinci/ve/themeEditor/commands/StateChangeCommand",["dojo/_base/declare","davinci/ve/themeEditor/commands/ThemeEditorCommand"],function(c,d){return c("davinci.ve.themeEditor.commands.StateChangeCommand",[d],{constructor:function(a){dojo.mixin(this,a)},execute:function(){this.old_selectedWidget=this._themeEditor._selectedWidget;this.old_selectedSubWidget=this._themeEditor._selectedSubWidget;this._themeEditor._currentState=this._newState;this._widgets||(this._widgets=this._themeEditor.getContext().getDocument().querySelectorAll(".dvThemeWidget"));
for(var a=this._widgets,b=0;b<a.length;b++)this._themeEditor.enableWidget(a[b]._dvWidget),(!this._oldState||this._themeEditor._theme.isStateValid(a[b]._dvWidget,this._oldState))&&this._themeEditor._theme.removeWidgetStyleValues(a[b]._dvWidget,this._oldState),this._themeEditor._theme.isStateValid(a[b]._dvWidget,this._newState)?this._themeEditor._theme.setWidgetStyleValues(a[b]._dvWidget,this._newState):this._themeEditor.disableWidget(a[b]._dvWidget);this._firstRun||(this._widget.processingUndoRedo=
!0,dojo.publish("/davinci/states/state/changed",[{editorClass:"davinci.themeEditor.ThemeEditor",widget:"$all",newState:this._newState,oldState:this._oldState,origin:this.declaredClass,context:this._themeEditor.context}]));this._firstRun=!1;this.updatePropertiesView()},undo:function(){this._themeEditor._selectedWidget=this.old_selectedWidget;this._themeEditor._selectedSubWidget=this.old_selectedSubWidget;this._themeEditor._currentState=this._oldState;for(var a=this._widgets,b=0;b<a.length;b++)this._themeEditor._theme.isStateValid(a[b]._dvWidget,
this._newState)||this._themeEditor.enableWidget(a[b]),this._themeEditor._theme.isStateValid(a[b]._dvWidget,this._oldState)?this._themeEditor.enableWidget(a[b]._dvWidget):this._themeEditor.disableWidget(a[b]._dvWidget),this._themeEditor._theme.removeWidgetStyleValues(a[b]._dvWidget,this._newState),this._themeEditor._theme.setWidgetStyleValues(a[b]._dvWidget,this._oldState);this._widget.processingUndoRedo=!0;this.updatePropertiesView();dojo.publish("/davinci/states/state/changed",[{editorClass:"davinci.themeEditor.ThemeEditor",
widget:"$all",newState:this._oldState,oldState:this._newState,origin:this.declaredClass,context:this._themeEditor.context}])}})});
//# sourceMappingURL=StateChangeCommand.js.map