//>>built
define("davinci/model/parser/Tokenizer",["dojo/_base/declare","davinci/js/JSExpression"],function(r,s){return{stringStream:function(f){function g(){for(;d==b.length;){e+=b;b="";d=0;try{b=f.next()}catch(c){if(c!=StopIteration)throw c;return!1}}return!0}var b="",d=0,a=0,e="";return{peek:function(){return!g()?null:b.charAt(d)},next:function(){if(!g()){if(0<e.length)throw"End of stringstream reached without emptying buffer ('"+e+"').";throw StopIteration;}return b.charAt(d++)},get:function(){var c=e;
e="";0<d&&(c+=b.slice(0,d),b=b.slice(d),d=0);a+=c.length;return c},getOffset:function(){return a},push:function(c){b=b.slice(0,d)+c+b.slice(d);a-=c.length},lookAhead:function(c,a,h,p){function g(c){return p?c.toLowerCase():c}c=g(c);var k=!1,l=e,q=d;for(h&&this.nextWhileMatches(/[\s\u00a0]/);;){h=d+c.length;var m=b.length-d;if(h<=b.length){k=c==g(b.slice(d,h));d=h;break}else if(c.slice(0,m)==g(b.slice(d))){e+=b;b="";try{b=f.next()}catch(n){if(n!=StopIteration)throw n;break}d=0;c=c.slice(m)}else break}if(!k||
!a)b=e.slice(l.length)+b,d=q,e=l;return k},lookAheadRegex:function(c,a){if("^"!=c.source.charAt(0))throw Error("Regexps passed to lookAheadRegex must start with ^");for(;-1==b.indexOf("\n",d);)try{b+=f.next()}catch(e){if(e!=StopIteration)throw e;}var g=b.slice(d).match(c);g&&a&&(d+=g[0].length);return g},more:function(){return null!==this.peek()},applies:function(c){var a=this.peek();return null!==a&&c(a)},nextWhile:function(c){for(var a;null!==(a=this.peek())&&c(a);)this.next()},matches:function(c){var a=
this.peek();return null!==a&&c.test(a)},nextWhileMatches:function(a){for(var b;null!==(b=this.peek())&&a.test(b);)this.next()},equals:function(a){return a===this.peek()},endOfLine:function(){var a=this.peek();return null==a||"\n"==a}}},tokenizer:function(f,g){function b(a){return"\n"!=a&&/^[\s\u00a0]*$/.test(a)}var d={state:g,take:function(a){"string"==typeof a&&(a={style:a,type:a});a.offset=f.getOffset();a.content=(a.content||"")+f.get();/\n$/.test(a.content)||f.nextWhile(b);a.value=a.content+f.get();
return a},next:function(){if(!f.more())throw StopIteration;var a;if(f.equals("\n"))return f.next(),this.take("whitespace");if(f.applies(b))a="whitespace";else for(;!a;)a=this.state(f,function(a){d.state=a});return this.take(a)}};return d}}});
//# sourceMappingURL=Tokenizer.js.map