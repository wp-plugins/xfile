//>>built
require({cache:{"url:davinci/ui/templates/ThemeSetsRenameDialog.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t${uiNLS.themeSetName} \x3cinput data-dojo-type\x3d"dijit.form.ValidationTextBox" data-dojo-props\x3d"regExp:\'[a-zA-z0-9_]+\', required:true, invalidMessage:\'Invalid Text.\'" id\x3d"theme_select_themeset_rename_textbox" style\x3d"width: 175px;"/\x3e\n\t\x3c/div\x3e\n\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton type\x3d"button" dojoType\x3d"dijit.form.Button" id\x3d"theme_set_rename_ok_button" label\x3d"${uiNLS.renameButtonLabel}" class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton type\x3d"button" dojoType\x3d"dijit.form.Button" id\x3d"theme_set_rename_cancel_button" label\x3d"${commonNLS.buttonCancel}" class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:davinci/ui/templates/ThemeSetsDialog.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3ctable style\x3d"width: 90%"\x3e\n\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd style\x3d"width:40%; vertical-align: top;"\x3e\n\t\t\t\t\t\t\t\x3ctable\x3e \n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d" vertical-align: top;" \x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3clabel\x3e${uiNLS.themeSets}\x3c/label\x3e\x3cselect  id\x3d"theme_select_themeset_theme_select" name\x3d"theme_select_themeset_theme_select" size\x3d"10" style\x3d"margin-bottom: 5px; width: 190px;" \x3e\x3c/select\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cdiv id\x3d"toolbar1" data-dojo-type\x3d"dijit.Toolbar" class\x3d"toolbaredContainer_toolbarDiv davinciToolbar"\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.form.Button" id\x3d"theme_select_themeset_add" data-dojo-props\x3d"iconClass:\'viewActionIcon addThemeSetIcon\', showLabel:false "\x3e${uiNLS.addThemeSet}\x3c/div\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cspan data-dojo-type\x3d"dijit.ToolbarSeparator"\x3e\x3c/span\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit.form.Button" id\x3d"theme_select_themeset_delete" data-dojo-props\x3d"iconClass:\'viewActionIcon removeThemeSetIcon\', showLabel:false "\x3e${uiNLS.deleteThemeSet}\x3c/div\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t \x3c/div\x3e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\x3cdiv style\x3d"border-right: 1px solid #ccc; width: 1px; height: 250px; margin-left: 10px; margin-top: 10px;"\x3e\x3c/div\x3e\x3c/td\x3e\n\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\n\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\t\t\t\x3c/table\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\t\t\x3ctable style\x3d"width: 100%; margin-left:10px; margin-right:10px;"\x3e\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd colspan\x3d"2"\x3e${uiNLS.currentlySelectedThemeSet}\x3c/td\x3e\x3ctr\x3e\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd style\x3d"width: 18%;"\x3e${uiNLS.themeSetName}\x3c/td\x3e\x3ctd style\x3d"text-align: center;"\x3e\x3cinput dojoType\x3d"dijit.form.TextBox" id\x3d"theme_select_themeset_theme_select_textbox" readonly\x3d "true" style\x3d"width: 175px;" \x3e\x3c/input\x3e\x3cinput type\x3d"button" dojoType\x3d"dijit.form.Button" id\x3d"theme_select_rename_button" label\x3d"Rename" style\x3d"margin-left: 5px;"\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\x3c/table\x3e\n\t\t\t\t\t\t\t\x3cdiv style\x3d"border-top: 1px solid; top: 231px; border-top-color: #ccc; left: 429px; width: 300px; height: 11px; margin-top: 6px; margin-left:10px;"\x3e\x3c/div\x3e\n\t\t\t\t\t\t\t\x3ctable style\x3d"margin-left: 15px; width: 100%;"\x3e\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd style\x3d"width: 139px;"\x3e${uiNLS.desktopTheme}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_desktop_theme_select"type\x3d"text"  style\x3d"width: 175px;"  \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.mobileTheme}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_mobile_theme_select"type\x3d"text"  style\x3d"width: 175px;" \x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\x3c/table\x3e\n\t\t\t\t\t\t\t\x3ctable id\x3d"theme_select_devices_table" style\x3d"margin-left:30px; border-collapse: separate; border-spacing: 0 0; width: 100%"\x3e\n\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd style\x3d"width: 129px;"\x3e${uiNLS.android}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_android_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.blackberry}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_blackberry_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.ipad}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_ipad_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.iphone}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_iphone_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\x3ctr\x3e\x3ctd\x3e${uiNLS.other}\x3c/td\x3e\x3ctd\x3e\x3cselect dojoType\x3d"dijit.form.Select" id\x3d"theme_select_other_select" type\x3d"text"  style\x3d"width: 150px;"\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\n\t\t\t\t\t\t\t\x3c/table\x3e\n\t\t\n\t\t\t\t\t \x3c/td\x3e\n\t\t\t \x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d"dijit.form.Button" id\x3d"theme_select_ok_button" label\x3d"${uiNLS.save}" class\x3d"maqPrimaryButton" type\x3d"submit"\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d"dijit.form.Button" id\x3d"theme_select_cancel_button" label\x3d"${commonNLS.buttonCancel}" class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n'}});
define("davinci/ui/ThemeSetsDialog","dojo/_base/declare davinci/ui/Dialog dijit/_Widget dijit/_Templated davinci/workbench/Preferences davinci/Workbench davinci/library dojo/text!./templates/ThemeSetsDialog.html dojo/text!./templates/ThemeSetsRenameDialog.html dojo/i18n!davinci/ui/nls/ui dojo/i18n!dijit/nls/common davinci/Theme dijit/form/ValidationTextBox dijit/form/Button dijit/Toolbar".split(" "),function(q,r,s,t,y,m,v,w,x,n,u,e){q("davinci.ui.ThemeSetsDialogWidget",[s,t],{templateString:w,widgetsInTemplate:!0,
uiNLS:n,commonNLS:u});q("davinci.ui.ThemeSetsDialogRenameWidget",[s,t],{templateString:x,widgetsInTemplate:!0,uiNLS:n,commonNLS:u});return dojo.declare("davinci.ui.ThemeSetsDialog",null,{constructor:function(){this._connections=[];this._dialog=new r({id:"manageThemeSets",title:n.themeSetsDialog,contentStyle:{width:580}});dojo.connect(this._dialog,"onCancel",this,"onClose");this._dojoThemeSets=e.getThemeSets(m.getProject());this._dojoThemeSets||(this._dojoThemeSets=e.dojoThemeSets,e.saveThemeSets(m.getProject(),
this._dojoThemeSets));this._dojoThemeSets.themeSets[0]||(this._dojoThemeSets.themeSets.push(dojo.clone(e.custom_themeset)),e.saveThemeSets(m.getProject(),this._dojoThemeSets));this._dojoThemeSets=dojo.clone(this._dojoThemeSets);this._dialog.attr("content",new davinci.ui.ThemeSetsDialogWidget({}));this._connections.push(dojo.connect(dojo.byId("theme_select_themeset_theme_select"),"onchange",this,"onChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_themeset_add"),"onClick",this,
"addThemeSet"));this._connections.push(dojo.connect(dijit.byId("theme_select_themeset_delete"),"onClick",this,"deleteThemeSet"));this._connections.push(dojo.connect(dijit.byId("theme_select_rename_button"),"onClick",this,"renameThemeSet"));this._connections.push(dojo.connect(dijit.byId("theme_select_desktop_theme_select"),"onChange",this,"onDesktopChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_mobile_theme_select"),"onChange",this,"onMobileChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_ok_button"),
"_onSubmit",this,"onOk"));this._connections.push(dojo.connect(dijit.byId("theme_select_cancel_button"),"onClick",this,"onClose"));this._connections.push(dojo.connect(dijit.byId("theme_select_android_select"),"onChange",this,"onAndroidThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_blackberry_select"),"onChange",this,"onBlackberryThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_ipad_select"),"onChange",this,"oniPadThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_iphone_select"),
"onChange",this,"oniPhoneThemeChange"));this._connections.push(dojo.connect(dijit.byId("theme_select_other_select"),"onChange",this,"onOtherThemeChange"));this.addThemeSets();this._selectedThemeSet=this._dojoThemeSets.themeSets[0];dijit.byId("theme_select_themeset_theme_select_textbox").attr("value",this._selectedThemeSet.name);this.addThemes(this._selectedThemeSet);this._dialog.show()},addThemeSets:function(){for(var a=dojo.byId("theme_select_themeset_theme_select"),b=0;b<this._dojoThemeSets.themeSets.length;b++){var c=
dojo.doc.createElement("option");c.innerHTML=this._dojoThemeSets.themeSets[b].name;c.value=this._dojoThemeSets.themeSets[b].name;0===b&&(c.selected="1");a.appendChild(c)}},addThemes:function(a){this._themeData=v.getThemes(m.getProject(),this.workspaceOnly);var b=dijit.byId("theme_select_desktop_theme_select");b.options=[];var c=dijit.byId("theme_select_android_select");c.options=[];var f=dijit.byId("theme_select_blackberry_select");f.options=[];var p=dijit.byId("theme_select_ipad_select");p.options=
[];var h=dijit.byId("theme_select_iphone_select");h.options=[];var k=dijit.byId("theme_select_other_select");k.options=[];var d=dijit.byId("theme_select_mobile_theme_select");b.options=[];d.options=[];d.addOption({value:e.default_theme,label:e.default_theme});this._themeCount=this._themeData.length;for(var g=0;g<this._themeData.length;g++){var l={value:this._themeData[g].name,label:this._themeData[g].name};"dojox.mobile"===this._themeData[g].type?(d.addOption(l),c.addOption(l),f.addOption(l),p.addOption(l),
h.addOption(l),k.addOption(l)):b.addOption(l)}b.attr("value",a.desktopTheme);for(b=0;b<a.mobileTheme.length;b++)switch(a.mobileTheme[b].device.toLowerCase()){case "android":c.attr("value",a.mobileTheme[b].theme);break;case "blackberry":f.attr("value",a.mobileTheme[b].theme);break;case "ipad":p.attr("value",a.mobileTheme[b].theme);break;case "iphone":h.attr("value",a.mobileTheme[b].theme);break;case "other":k.attr("value",a.mobileTheme[b].theme)}e.singleMobileTheme(a)?d.attr("value",a.mobileTheme[a.mobileTheme.length-
1].theme):(d.attr("value",e.default_theme),this.onMobileChange(e.default_theme))},addThemeSet:function(a){a=this._selectedThemeSet?dojo.clone(this._selectedThemeSet):dojo.clone(e.default_themeset);for(var b=a.name,c=0,f=0;f<this._dojoThemeSets.themeSets.length;f++)this._dojoThemeSets.themeSets[f].name==b&&(c++,b=a.name+"_"+c,f=-1);a.name=b;this._dojoThemeSets.themeSets.push(a);b=dojo.byId("theme_select_themeset_theme_select");c=dojo.doc.createElement("option");c.innerHTML=a.name;c.value=a.name;b.appendChild(c)},
deleteThemeSet:function(a){a=dojo.byId("theme_select_themeset_theme_select");var b=a[a.selectedIndex];if(b){for(var c=0;c<this._dojoThemeSets.themeSets.length;c++)if(this._dojoThemeSets.themeSets[c].name==b.value){this._dojoThemeSets.themeSets.splice(c,1);break}this._selectedThemeSet=null;a.removeChild(b);dijit.byId("theme_select_themeset_theme_select_textbox").attr("value","");a=dijit.byId("theme_select_rename_button");var b=dijit.byId("theme_select_desktop_theme_select"),c=dijit.byId("theme_select_mobile_theme_select"),
f=dijit.byId("theme_select_android_select"),e=dijit.byId("theme_select_blackberry_select"),h=dijit.byId("theme_select_ipad_select"),k=dijit.byId("theme_select_iphone_select"),d=dijit.byId("theme_select_other_select");a.set("disabled",!0);b.set("disabled",!0);c.set("disabled",!0);f.set("disabled",!0);e.set("disabled",!0);h.set("disabled",!0);k.set("disabled",!0);d.set("disabled",!0)}},renameThemeSet:function(a){dojo.byId("theme_select_themeset_theme_select");this._renameDialog=new r({id:"rename",title:n.renameThemeSet,
contentStyle:{width:300},content:new davinci.ui.ThemeSetsDialogRenameWidget({})});this._renameDialog._themesetConnections=[];this._renameDialog._themesetConnections.push(dojo.connect(dijit.byId("theme_set_rename_ok_button"),"onClick",this,"onOkRename"));this._renameDialog._themesetConnections.push(dojo.connect(dijit.byId("theme_set_rename_cancel_button"),"onClick",this,"onCloseRename"));this._renameDialog._themesetConnections.push(dojo.connect(this._renameDialog,"onCancel",this,"onCloseRename"));
this._renameDialog.show();a=dijit.byId("theme_select_themeset_rename_textbox");a.attr("value",this._selectedThemeSet.name);dijit.selectInputText(a)},onOkRename:function(a){var b=dijit.byId("theme_select_themeset_rename_textbox").attr("value");if(b){for(var c=0;c<this._dojoThemeSets.themeSets.length;c++)if(this._dojoThemeSets.themeSets[c].name==b){alert("Theme set name already use");return}c=dojo.byId("theme_select_themeset_theme_select");c=c[c.selectedIndex];c.innerHTML=b;c.value=b;this._selectedThemeSet.name=
b;dijit.byId("theme_select_themeset_theme_select_textbox").attr("value",this._selectedThemeSet.name)}this.onCloseRename(a)},onCloseRename:function(a){for(;connection=this._renameDialog._themesetConnections.pop();)dojo.disconnect(connection);this._renameDialog.destroyDescendants();this._renameDialog.destroy();delete this._renameDialog},onClick:function(a){a.target.setAttribute("selected",!1);dojo.byId("theme_select_themeset_theme_select").setAttribute("value",this._selectedThemeSet.name)},onChange:function(a){a=
a.target[a.target.selectedIndex].value;for(var b=0;b<this._dojoThemeSets.themeSets.length;b++)if(this._dojoThemeSets.themeSets[b].name==a){this._selectedThemeSet=this._dojoThemeSets.themeSets[b];this.addThemes(this._dojoThemeSets.themeSets[b]);dijit.byId("theme_select_themeset_theme_select_textbox").attr("value",this._selectedThemeSet.name);a=dijit.byId("theme_select_rename_button");var b=dijit.byId("theme_select_desktop_theme_select"),c=dijit.byId("theme_select_mobile_theme_select");a.set("disabled",
!1);b.set("disabled",!1);c.set("disabled",!1);break}},onDesktopChange:function(a){this._selectedThemeSet.desktopTheme=a},onMobileChange:function(a){function b(a,b,d){switch(a){case "android":c.attr("value",b);c.set("disabled",d);break;case "blackberry":f.attr("value",b);f.set("disabled",d);break;case "ipad":e.attr("value",b);e.set("disabled",d);break;case "iphone":h.attr("value",b);h.set("disabled",d);break;case "other":k.attr("value",b),k.set("disabled",d)}}var c=dijit.byId("theme_select_android_select"),
f=dijit.byId("theme_select_blackberry_select"),e=dijit.byId("theme_select_ipad_select"),h=dijit.byId("theme_select_iphone_select"),k=dijit.byId("theme_select_other_select");if("(device-specific)"===a)for(var d=0;d<this._selectedThemeSet.mobileTheme.length;d++){var g=this._selectedThemeSet.mobileTheme[d].device.toLowerCase();b(g,this._selectedThemeSet.mobileTheme[d].theme,!1)}else for(d=0;d<this._selectedThemeSet.mobileTheme.length;d++)g=this._selectedThemeSet.mobileTheme[d].device.toLowerCase(),this._selectedThemeSet.mobileTheme[d].theme=
a,b(g,this._selectedThemeSet.mobileTheme[d].theme,!0)},onDeviceThemeChange:function(a,b){for(var c=0;c<this._selectedThemeSet.mobileTheme.length;c++)if(this._selectedThemeSet.mobileTheme[c].device.toLowerCase()===a.toLowerCase()){this._selectedThemeSet.mobileTheme[c].theme=b;break}},onAndroidThemeChange:function(a){this.onDeviceThemeChange("android",a)},onBlackberryThemeChange:function(a){this.onDeviceThemeChange("blackberry",a)},oniPadThemeChange:function(a){this.onDeviceThemeChange("ipad",a)},oniPhoneThemeChange:function(a){this.onDeviceThemeChange("iphone",
a)},onOtherThemeChange:function(a){this.onDeviceThemeChange("other",a)},onOk:function(a){e.saveThemeSets(m.getProject(),this._dojoThemeSets);this.onClose(a)},onClose:function(a){for(;connection=this._connections.pop();)dojo.disconnect(connection);this._dialog.destroyDescendants();this._dialog.destroy();delete this._dialog},onDeleteThemeSet:function(a){for(a=0;a<this._dojoThemeSets.themeSets.length;a++)if(this._dojoThemeSets.themeSets[a].name===this._currentThemeSet.name){var b=this._dojoThemeSets.themeSets[a-
1].name,c=dijit.byId("theme_select");c.store.fetchItemByIdentity({identity:this._dojoThemeSets.themeSets[a].name,onItem:function(a){c.store.deleteItem(a);c.store.save()}});this._dojoThemeSets.themeSets.splice(a,1);this._currentThemeSet=null;c.attr("value",b);break}}})});
//# sourceMappingURL=ThemeSetsDialog.js.map