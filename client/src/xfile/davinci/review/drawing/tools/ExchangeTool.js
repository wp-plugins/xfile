//>>built
define("davinci/review/drawing/tools/ExchangeTool",["dojo/_base/declare","./_ToolCommon"],function(k,l){return k("davinci.review.drawing.tools.ExchangeTool",l,{constructor:function(d){d.exchangeTool=this},exportShapesByAttribute:function(d,h){var m=this.surface.getShapesByAttribute(d,h),g,e=[],c;dojo.forEach(m,function(b){if(b.isInstanceOf(davinci.review.drawing.shapes.Arrow))c="Arrow";else if(b.isInstanceOf(davinci.review.drawing.shapes.Rectangle))c="Rectangle";else if(b.isInstanceOf(davinci.review.drawing.shapes.Ellipse))c=
"Ellipse";else if(b.isInstanceOf(davinci.review.drawing.shapes.Text))c="Text";else return;var a={type:c,x1:b.x1,y1:b.y1,x2:b.x2,y2:b.y2},f;for(f in b.attributeMap)if(b.attributeMap.hasOwnProperty(f)){var d="stateList"==f||"sceneList"==f?dojo.toJson(b[f]):b[f];a[f]=d}"Text"==c&&(a.text=escape(b.getText()));g=dojo.toJson(a);e.push(g)});return"["+e.join(",")+"]"},importShapes:function(d,h,m){try{var g=eval(d),e,c;h&&this.surface.clear();dojo.forEach(g,function(a){var b=a.type;if("Arrow"==b)e=davinci.review.drawing.shapes.Arrow;
else if("Rectangle"==b)e=davinci.review.drawing.shapes.Rectangle;else if("Ellipse"==b)e=davinci.review.drawing.shapes.Ellipse;else if("Text"==b)e=davinci.review.drawing.shapes.Text;else return;var d=a.x1,g=a.x2,h=a.y1,k=a.y2,l=a.text;delete a.type;delete a.x1;delete a.x2;delete a.y1;delete a.y2;a.a2c=m;a.stateList&&(a.stateList=dojo.fromJson(a.stateList));a.sceneList&&(a.sceneList=dojo.fromJson(a.sceneList));c=new e(this.surface,d,h,g,k,a);c.filterAttributes=this.filterAttributes;c.render();"Text"==
b&&c.setText(unescape(l));this.surface.shapes.push(c)},this)}catch(b){}}})});
//# sourceMappingURL=ExchangeTool.js.map