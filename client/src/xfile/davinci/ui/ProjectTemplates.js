//>>built
define("davinci/ui/ProjectTemplates",["dojo/_base/declare","dojo/request/xhr","davinci/Runtime","davinci/Workbench"],function(l,h,e,k){return dojo.setObject("davinci.ui.ProjectTemplates",{getIncremental:function(a,b){this._getProjectTemplatesPartial(0,a,[],b)},_getProjectTemplatesPartial:function(a,b,d,f){this._getProjectTemplatesSendRequest({offset:a,limit:b},function(a,d,c){var f=!1;if(c.success)if("number"==typeof c.totalNumProjectTemplates&&"number"==typeof c.offset&&"number"==typeof c.limit&&
0<=c.offset&&1<=c.limit&&c.projectTemplatesObject&&c.projectTemplatesObject.projectTemplates){a=a.concat(c.projectTemplatesObject.projectTemplates);var e=c.offset+c.limit,g=e>=c.totalNumProjectTemplates;!d(a,c,g)&&!g&&this._getProjectTemplatesPartial(e,b,a,d)}else f=!1;else f=!1;f&&console.error("_getProjectTemplatesPartial: unexpected response from server. returnData\x3d")}.bind(this,d,f))},_getProjectTemplatesSendRequest:function(a,b){var d=JSON.stringify(a,null,"\t");h.post("cmd/getProjectTemplates",
{handleAs:"json",query:{params:d}}).then(function(a){b(a)},function(a){console.error("_getProjectTemplatesSendRequest xhr error. err\x3d")})},create:function(a){if(a&&a.projectTemplateName){var b=a.projectTemplateName;a="all"==a.sharingSimple?"all":"none";var d=(new Date).toISOString();a={projectTemplateName:b,projectToClone:k.getProject(),sharingSimple:a,timestamp:d};b=JSON.stringify(a,null,"\t");b=e.serverJSONRequest({url:"cmd/createProjectTemplate",handleAs:"json",content:{params:b},sync:!0});
(!b||!b.success)&&console.error("cmd/createProjectTemplate error:"+b.error);return b}},modify:function(a){a=JSON.stringify(a,null,"\t");a=e.serverJSONRequest({url:"cmd/modifyProjectTemplates",handleAs:"json",content:{params:a},sync:!0});(!a||!a.success)&&console.error("cmd/modifyProjectTemplate error:"+a.error);return a},deleteTemplates:function(a){a=JSON.stringify(a,null,"\t");a=e.serverJSONRequest({url:"cmd/deleteProjectTemplates",handleAs:"json",content:{params:a},sync:!0});(!a||!a.success)&&console.error("cmd/deleteProjectTemplate error:"+
a.error);return a}})});
//# sourceMappingURL=ProjectTemplates.js.map