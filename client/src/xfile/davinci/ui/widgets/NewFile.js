//>>built
require({cache:{"url:davinci/ui/widgets/templates/NewFile.html":'\x3cdiv class\x3d"fileDialog" dojoAttachPoint\x3d"_fileDialog"\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t  \x3cdiv dojoAttachPoint\x3d"additionalMessage" class\x3d"maqDialogMessage" style\x3d"display: none"\x3e\n\t  \x3c/div\x3e\n\n\t\t\x3ctable class\x3d"fileFolderTable"\x3e\n\t\t\t\x3ctr class\x3d\'fileNameRow\'\x3e\n\t\t\t\t\x3ctd class\x3d"fileDialogLabelCell"\x3e\n\t\t\t\t\t\x3clabel\x3e${fileFieldLabel}:\x3c/label\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cinput dojoType\x3d"dijit.form.TextBox" type\x3d"text" dojoAttachPoint\x3d"fileDialogFileName"\x3e\x3c/input\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\t\x3ctr class\x3d\'folderNameRow\'\x3e\n\t\t\t\t\x3ctd class\x3d"fileDialogLabelCell"\x3e\n\t\t\t\t\t\x3clabel\x3e${folderFieldLabel}\x3c/label\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3ctd dojoAttachPoint\x3d"fileDialogWhereDropDownCell"\x3e\n\t\t\t\t\t\x3c!-- DropDownButton goes here --\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cspan dojoAttachPoint\x3d"fileDialogDetailsArrow"\x3e\n\t\t\t\t\t\t\x3cspan class\x3d\'folder_details_arrow folder_details_show_arrow\'\x3e\x26nbsp;\x3c/span\x3e\n\t\t\t\t\t\t\x3cspan class\x3d\'folder_details_arrow folder_details_hide_arrow\'\x3e\x26nbsp;\x3c/span\x3e\n\t\t\t\t\t\x3c/span\x3e\n\t\t\t\t\x3c/td\x3e\n\t\t\t\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\t\n\t\t\x3cdiv class\x3d"folderContainer"\x3e\n\t\t\t\x3cdiv dojoType\x3d"dijit.layout.ContentPane"\x3e\n\t\t\t\t\x3cdiv class\x3d"fileDialogTreeWidget" dojoAttachPoint\x3d"fileTree" dojoType\x3d"dijit.Tree" showRoot\x3d"false" model\x3d"system.resource" getIconClass\x3d"davinci.ui.Resource.getResourceIcon"\n\t\t\t\t\tgetRowClass\x3d"davinci.ui.Resource.getResourceClass" labelAttr\x3d"name" childrenAttrs\x3d"children" persist\x3d"false"\x3e\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d\'folderContainerButtonRow\'\x3e\x3cbutton dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"__newFolderButton" dojoAttachEvent\x3d"onClick:_newFolder"\x3e${newFolderLabel}\x3c/button\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv dojoAttachPoint\x3d"dialogSpecificOptionsDiv"\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\t\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cspan dojoAttachPoint\x3d"dialogSpecificButtonsSpan" class\x3d"dialogSecondaryButtons"\x3e\x3c/span\x3e\n\t\t\x3cspan class\x3d"fileDialogStdButtons"\x3e\n\t\t\t\x3cbutton dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"__okButton" class\x3d"maqPrimaryButton" type\x3d"submit"\x3e${finishButtonLabel}\x3c/button\x3e\n\t\t\t\x3cbutton dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"__cancelButton" dojoAttachEvent\x3d"onClick:cancelButton" class\x3d"maqSecondaryButton"\x3e${cancelButtonLabel}\x3c/button\x3e\n\t\t\x3c/span\x3e\n\t\x3c/div\x3e\n\t\n\x3c/div\x3e\n'}});
define("davinci/ui/widgets/NewFile","dojo/_base/declare dijit/_Templated dijit/_Widget davinci/library davinci/Workbench system/resource davinci/workbench/Preferences davinci/Runtime dijit/Menu dijit/MenuItem davinci/model/Path dijit/form/DropDownButton dojo/i18n!davinci/ui/nls/ui dojo/i18n!dijit/nls/common dojo/text!./templates/NewFile.html dijit/form/Button dijit/form/TextBox dijit/form/RadioButton".split(" "),function(m,n,p,x,e,f,q,y,r,s,h,t,u,v,w){return m("davinci.ui.widgets.NewFile",[p,n],{widgetsInTemplate:!0,
templateString:w,treeCollapsed:!0,fileDialogFileName:null,fileTree:null,__okButton:null,dialogSpecificClass:null,_fileDialog:null,postMixInProperties:function(){var a=this.langObj=u;dojo.mixin(this,a);dojo.mixin(this,v);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.arrowNode=this.fileDialogDetailsArrow;this._tree_collapse_expand();var a=this;this.dialogSpecificClass&&require([this.dialogSpecificClass],function(b){a.dialogSpecificWidget=new b({dialogSpecificButtonsSpan:a.dialogSpecificButtonsSpan,
dialogSpecificClassOptions:this.dialogSpecificClassOptions},a.dialogSpecificOptionsDiv)}.bind(this));this._whereMenu=new r({style:"display: none;"});this._whereDropDownButton=new t({className:"whereDropDown",dropDown:this._whereMenu,iconClass:"fileDialogWhereIcon"});this.fileDialogWhereDropDownCell.appendChild(this._whereDropDownButton.domNode);for(var b=this.value;b;){if(b.readOnly()){this.value=null;break}b=b.parent}this.value||this._setValueAttr(this._getForcedRootAttr());this.connect(this.arrowNode,
"onclick",dojo.hitch(this,function(a){this._tree_collapse_expand(!this.treeCollapsed)}));dojo.connect(this.fileDialogFileName,"onkeyup",this,"_checkValid");this.fileTree.watch("selectedItem",dojo.hitch(this,this._updateFields));this.fileTree.watch("selectedItem",dojo.hitch(this,this._checkValid));this._updateFields();this.__okButton.onClick=dojo.hitch(this,this._okButton);this.optionalMessage&&(this.additionalMessage.innerHTML=this.optionalMessage,this.additionalMessage.style.display="block")},startup:function(){this.dialogSpecificWidget&&
this.dialogSpecificWidget.startup&&this.dialogSpecificWidget.startup()},_tree_collapse_expand:function(a){"undefined"!=typeof a&&(this.treeCollapsed=a);a=dojo.query(".fileFolderTable",this.domNode)[0];var b=dojo.query(".folderContainer",this.domNode)[0],c=dojo.query(".folder_details_show_arrow",this.domNode)[0],d=dojo.query(".folder_details_hide_arrow",this.domNode)[0];a&&(this.treeCollapsed?(dojo.addClass(a,"treeCollapsed"),dojo.removeClass(a,"treeExpanded"),dojo.addClass(b,"dijitHidden"),dojo.removeClass(c,
"dijitHidden"),dojo.addClass(d,"dijitHidden")):(dojo.addClass(a,"treeExpanded"),dojo.removeClass(a,"treeCollapsed"),dojo.removeClass(b,"dijitHidden"),dojo.addClass(c,"dijitHidden"),dojo.removeClass(d,"dijitHidden")));this.fileDialogDetailsArrow.title=this.treeCollapsed?this.langObj.newFileShowFiles:this.langObj.newFileHideFiles},_setValueAttr:function(a){if(a!=this._value){this._value=a;for(var b=[];a.parent;a=a.parent)b.unshift(a);return this.fileTree.set("path",b)}},_setNewFileNameAttr:function(a){this.fileDialogFileName.set("value",
a)},_getForcedRootAttr:function(){if(this._forcedRoot)return this._forcedRoot;var a=e.getProject(),a=q.getPreferences("davinci.ui.ProjectPrefs",a);return null!=a.webContentFolder&&""!=a.webContentFolder?(a=(new h(e.getProject())).append(a.webContentFolder),f.findResource(a.toString())):f.findResource(e.getProject())},_setForcedRootAttr:function(a){this._forcedRoot=a},_updateFields:function(){var a=this.fileTree.get("selectedItems"),b=null!=a&&0<a.length?a[0]:null,a=("./"+e.getProject()).length+1;
null==b?b=this._getForcedRootAttr():"Folder"!=b.elementType&&(this.fileDialogFileName.set("value",b.getName()),b=b.parent);if(this._whereDropDownButton&&this._whereMenu){var c=b.getPath().substring(a),d=b.getName(),g=dojo.trim(c);this._whereDropDownButton.attr("label",0==g.length?this.langObj.root:d);this._whereMenu.attr("value",c);this._whereMenu.destroyDescendants();var k=!1,l=0;do g=dojo.trim(c),0==g.length&&(k=!0,d=this.langObj.root),g=new s({label:d,value:c,onClick:dojo.hitch(this,function(a,
b,c){this._whereMenu.attr("value",b);this._whereDropDownButton.attr("label",a);a=(new h(e.getProject())).append(b);a=f.findResource(a.toString());this.fileTree.set("selectedItems",[a])},d,c)}),this._whereMenu.addChild(g),k||(b=b.parent,c=b.getPath().substring(a),d=b.getName()),l++;while(!k&&100>l)}},_checkValid:function(){var a=this.fileDialogFileName.get("value"),b=a&&0<a.length,c=this._whereMenu.attr("value");(c=f.findResource(e.getProject()+(c?"/"+c:"")))&&(b=b&&!c.readOnly());(a=c.getChildSync(a))&&
(b=b&&!a.readOnly());this.__okButton.set("disabled",!b);return b},_okButton:function(a){this.value=(new h(e.getProject())).append(this._whereMenu.attr("value")).append(this.fileDialogFileName.get("value")).toString();return this.checkFileName(this.value)?!0:!1},_newFolder:function(){var a=this.fileTree.get("selectedItems");davinci.ui.Resource.newFolder(null!=a&&0<a.length?a[0]:null,dojo.hitch(this,function(a){this.fileTree.set("selectedItems",[a])}))},_getValueAttr:function(){return this.value},cancelButton:function(){this.onClose()},
_createResource:function(){var a=this._whereMenu.attr("value"),b=this.fileDialogFileName.get("value"),c=f.findResource(a+"/"+b);return c?c:f.findResource(a).createResource(b)},onClose:function(){}})});
//# sourceMappingURL=NewFile.js.map