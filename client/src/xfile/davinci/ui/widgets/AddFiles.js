//>>built
require({cache:{"url:davinci/ui/widgets/templates/AddFiles.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3clabel for\x3d"fileDialogParentFolder"\x3e${uiNLS.parentFolder}\x3c/label\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"fileDialogParentFolder"\x3e\x3c/div\x3e\n\t\t\x3cdiv style\x3d"margin: 1em 0 1em 0"\x3e\n\t\t\t\x3cinput data-dojo-attach-point\x3d"uploader" multiple\x3d"true" type\x3d"file" data-dojo-type\x3d"dojox.form.Uploader"/\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"filelist"\x3e\x3c/div\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"zipWarning" style\x3d"display:none; margin-top: 1em; background:yellow"\x3e${uiNLS.explodeZipWarning}\x3c/div\x3e\n\t\x3c/div\x3e\n\n  \x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n  \t\x3cbutton data-dojo-attach-point\x3d"uploadBtn" data-dojo-type\x3d"dijit/form/Button" class\x3d"maqPrimaryButton"\x3e${uiNLS.upload}\x3c/button\x3e\n\t\t\x3cbutton data-dojo-type\x3d\'dijit/form/Button\' data-dojo-attach-event\x3d\'onClick:_cancelButton\' class\x3d"maqSecondaryButton"\x3e${uiNLS.cancelButtonLabel}\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n'}});
define("davinci/ui/widgets/AddFiles","dojo/_base/declare dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin ../../model/Path system/resource dojox/form/uploader/FileList dojox/form/Uploader dojo/i18n!../nls/ui dojo/text!./templates/AddFiles.html dijit/form/Button".split(" "),function(h,k,l,m,n,e,p,r,f,q){return h([l,k,m],{templateString:q,uiNLS:f,_getCommand:function(b){return"cmd/addFiles?path\x3d"+encodeURIComponent(b.getPath())},postCreate:function(){var b=e.getRoot();this.selectedResource&&
(b="Folder"==this.selectedResource.elementType?this.selectedResource:this.selectedResource.parent);this.fileDialogParentFolder.innerHTML=b.getPath();this.uploader.set("url",this._getCommand(b));new p({uploader:this.uploader},this.filelist);var c,a=this.uploadBtn;a.set("disabled",!0);var d=this.uploader;dojo.connect(this.uploader,"onChange",function(b){c&&dojo.disconnect(c);c=dojo.connect(a,"onClick",null,function(){d.set("disabled",!0);d.upload()});a.oldText&&(a.containerNode.innerText=a.oldText);
a.set("disabled",!b.length)});var g=function(){d.set("disabled",!1);dojo.disconnect(c);a.oldText=a.containerNode.innerText;a.containerNode.innerText=f.done;a.set("disabled",!0)};dojo.connect(this.uploader,"onComplete",function(a){a.forEach(function(a){var c=new n(b.getPath());b._appendFiles([{isDir:!1,isLib:!1,isNew:!1,name:a.file}]);c.append(a.file);e.resourceChanged("updated",c.toString())});g()});dojo.connect(this.uploader,"onError",function(a){alert("Upload error: "+a);console.error("Upload error: ",
a);g()})},_cancelButton:function(){this.onClose()}})});
//# sourceMappingURL=AddFiles.js.map