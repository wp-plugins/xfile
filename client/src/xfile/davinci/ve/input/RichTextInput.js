//>>built
define("davinci/ve/input/RichTextInput","dojo/_base/declare davinci/ve/input/SmartInput davinci/commands/CompoundCommand davinci/ve/commands/ModifyRichTextCommand davinci/XPathUtils davinci/html/HtmlFileXPathAdapter dijit/Editor dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/TextColor dijit/_editor/plugins/FontChoice dojox/html/entities dojo/i18n!../nls/ve dojo/i18n!dijit/nls/common".split(" "),function(g,h,k,l,n,p,q,r,s,t,e,m,f){return g("davinci.ve.input.RichTextInput",[h],{property:"richText",
displayOnCreate:"true",getHelpText:function(){return m.richTextInputHelp},show:function(a){this._widget=davinci.ve.widget.byId(a);this._loading(265,400);a=this._getTemplate();this._inline.set("content",a);a=this._inline.getChildren();for(var b=0;b<a.length;b++)if("davinciIleb"===a[b].id){this._inline.eb=a[b];break}a=this._widget._srcElement.getElementText(this._context);this._inline.eb.set("value",a);this._connection.push(dojo.connect(this._inline,"onBlur",this,"onOk"));this._connection.push(dojo.connect(this._inline.eb,
"onMouseDown",this,"stopEvent"));this._connection.push(dojo.connect(this._inline.eb,"onClick",this,"updateSimStyle"));this._connectHelpDiv();this._connectResizeHandle();this._connectSimDiv();this.updateFormats();this._loadingDiv.style.backgroundImage="none";this._inline.eb.focus();this.resize(null)},updateWidget:function(a){if(!this._widget._destroyed){this._node(this._widget);var b=this._widget.getContext(),d=this.property,c={};a&&"string"==typeof a&&(a=a.replace(/\n/g,""));c[d]=a;c.richText=e.decode(c.richText);
c.richText=e.encode(c.richText,[["\u00a0","nbsp"]]);a=new k;c=new l(this._widget,c,b);a.add(c);this._widget._edit_context.getCommandStack().execute(a);this._widget=c.newWidget;this._widget._edit_context._focuses[0]._selectedWidget=this._widget;b.select(this._widget,null,!1)}},_getTemplate:function(){return'\x3cdiv id\x3d"iedResizeDiv"  class\x3d"iedResizeDiv" style\x3d"width: 400px; height: 245px;" \x3e\x3cdiv dojoType\x3d"dijit.Editor" width\x3d"600" height\x3d"200" id\x3d"davinciIleb"  style\x3d"border-width: 0px;" plugins\x3d"[\'undo\',\'redo\',\'|\',\'cut\',\'copy\',\'paste\',\'|\',\'bold\',\'italic\',\'underline\',\'strikethrough\',\'foreColor\',\'hiliteColor\',\'insertHorizontalRule\',\'createLink\',\'unlink\',\'insertImage\',\'delete\',\'removeFormat\',\'|\', \'insertOrderedList\',\'insertUnorderedList\',\'indent\', \'outdent\', \'justifyLeft\', \'justifyCenter\', \'justifyRight\',\'fontName\', \'fontSize\', \'formatBlock\']" \x3e \x3c/div\x3e\x3cdiv id\x3d"smartInputSim" class\x3d"smartInputSim" \x3e\x3c/div\x3e\x3cdiv id\x3d"iedResizeHandle" dojoType\x3d"dojox.layout.ResizeHandle" targetId\x3d"iedResizeDiv" constrainMin\x3d"true" maxWidth\x3d"900" maxHeight\x3d"900" minWidth\x3d"400" minHeight\x3d"200"  activeResize\x3d"true" intermediateChanges\x3d"true" \x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv  id\x3d"davinci.ve.input.SmartInput_div"  class\x3d"davinciVeInputSmartInputDiv" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_div" class\x3d"smartInputRadioDiv" \x3e\x3ctable id\x3d"davinci.ve.input.SmartInput_table"\x3e \x3ctbody\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1" \x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_text" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton" disabled\x3d"false" readOnly\x3d"false" intermediateChanges\x3d"false" checked\x3d"true"\x3e \x3c/input\x3e \x3c/td\x3e \x3ctd class\x3d"smartInputTd2" \x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_text_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e\x3ctr\x3e \x3ctd class\x3d"smartInputTd1"\x3e \x3cinput id\x3d"davinci.ve.input.SmartInput_radio_html" showlabel\x3d"true" type\x3d"radio" dojoType\x3d"dijit.form.RadioButton"\x3e \x3c/input\x3e  \x3c/td\x3e \x3ctd class\x3d"smartInputTd2"\x3e\x3cdiv id\x3d"davinci.ve.input.SmartInput_radio_html_width_div" class\x3d"smartInputRadioTextDiv"\x3e\x3c/div\x3e\x3c/td\x3e \x3c/tr\x3e \x3c/tbody\x3e\x3c/table\x3e \x3cdiv class\x3d"smartInputHelpDiv" \x3e \x3cspan id\x3d"davinci.ve.input.SmartInput_img_help" title\x3d"Help" class\x3d"inlineEditHelp" \x3e \x3c/span\x3e\x3cspan class\x3d"smartInputSpacerSpan" \x3e\x3cbutton id\x3d"davinci.ve.input.SmartInput_ok"  dojoType\x3d"dijit.form.Button" type\x3d"submit" class\x3d"inlineEditHelpOk" \x3e'+
f.buttonOk+'\x3c/button\x3e \x3cbutton id\x3ddavinci.ve.input.SmartInput_cancel dojoType\x3d"dijit.form.Button" class\x3d"inlineEditHelpCancel"\x3e '+f.buttonCancel+'\x3c/button\x3e  \x3c/span\x3e   \x3c/div\x3e \x3cdiv id\x3d"davinci.ve.input.SmartInput_div_help" style\x3d"display:none;" class\x3d"smartInputHelpTextDiv" \x3e \x3cdiv dojoType\x3d"dijit.layout.ContentPane" style\x3d"text-align: left; padding:0; " \x3e'+this.getHelpText()+'\x3c/div\x3e \x3cdiv style\x3d"text-align: left; padding:0; height:2px;" \x3e\x3c/div\x3e \x3c/div\x3e \x3c/div\x3e\x3c/div\x3e '},
updateFormats:function(){this._widget.getContext().getDojo();dojo.byId("davinci.ve.input.SmartInput_radio_text_width_div");var a=dijit.byId("davinci.ve.input.SmartInput_radio_html"),b=dijit.byId("davinci.ve.input.SmartInput_radio_text"),d=dojo.byId("davinci.ve.input.SmartInput_table");dojo.style(b.domNode,"display","none");dojo.style(a.domNode,"display","none");dojo.style(d,"display","none")},resize:function(a){this.inherited("resize",arguments);var b=dojo.byId("iedResizeDiv");dijit.byId("davinciIleb").resize({h:b.clientHeight-
12,w:b.clientWidth});var b=b.clientWidth-12,d=dojo.byId("davinci.ve.input.SmartInput_radio_div");dojo.style(d,"width",b+"px")},updateSimStyle:function(a){a=dijit.byId("davinciIleb");dojo.query(".dijitEditorIFrame",a.domNode);(a=dojo.byId("smartInputSim"))&&dojo.style(a,"height","22px")}})});
//# sourceMappingURL=RichTextInput.js.map