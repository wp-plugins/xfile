//>>built
(function(userConfig,defaultConfig){var noop=function(){},isEmpty=function(it){for(var p in it)return 0;return 1},toString={}.toString,isFunction=function(it){return toString.call(it)=="[object Function]"},isString=function(it){return toString.call(it)=="[object String]"},isArray=function(it){return toString.call(it)=="[object Array]"},forEach=function(vector,callback){if(vector)for(var i=0;i<vector.length;)callback(vector[i++])},mix=function(dest,src){for(var p in src)dest[p]=src[p];return dest},
makeError=function(error,info){return mix(new Error(error),{src:"dojoLoader",info:info})},uidSeed=1,uid=function(){return"_"+uidSeed++},req=function(config,dependencies,callback){return contextRequire(config,dependencies,callback,0,req)},global=this,doc=global.document,element=doc&&doc.createElement("DiV"),has=req.has=function(name){return isFunction(hasCache[name])?hasCache[name]=hasCache[name](global,doc,element):hasCache[name]},hasCache=has.cache=defaultConfig.hasCache;has.add=function(name,test,
now,force){(hasCache[name]===undefined||force)&&(hasCache[name]=test);return now&&has(name)};0&&has.add("host-node",userConfig.has&&"host-node"in userConfig.has?userConfig.has["host-node"]:typeof process=="object"&&process.versions&&process.versions.node&&process.versions.v8);if(0){require("./_base/configNode.js").config(defaultConfig);defaultConfig.loaderPatch.nodeRequire=require}0&&has.add("host-rhino",userConfig.has&&"host-rhino"in userConfig.has?userConfig.has["host-rhino"]:typeof load=="function"&&
(typeof Packages=="function"||typeof Packages=="object"));if(0){for(var baseUrl=userConfig.baseUrl||".",arg,rhinoArgs=this.arguments,i=0;i<rhinoArgs.length;){arg=(rhinoArgs[i++]+"").split("\x3d");if(arg[0]=="baseUrl"){baseUrl=arg[1];break}}load(baseUrl+"/_base/configRhino.js");rhinoDojoConfig(defaultConfig,baseUrl,rhinoArgs)}for(var p in userConfig.has)has.add(p,userConfig.has[p],0,1);var requested=1,arrived=2,nonmodule=3,executing=4,executed=5;if(0){requested="requested";arrived="arrived";nonmodule=
"not-a-module";executing="executing";executed="executed"}var legacyMode=0,sync="sync",xd="xd",syncExecStack=[],dojoRequirePlugin=0,checkDojoRequirePlugin=noop,transformToAmd=noop,getXhr;if(0){req.isXdUrl=noop;req.initSyncLoader=function(dojoRequirePlugin_,checkDojoRequirePlugin_,transformToAmd_){if(!dojoRequirePlugin){dojoRequirePlugin=dojoRequirePlugin_;checkDojoRequirePlugin=checkDojoRequirePlugin_;transformToAmd=transformToAmd_}return{sync:sync,requested:requested,arrived:arrived,nonmodule:nonmodule,
executing:executing,executed:executed,syncExecStack:syncExecStack,modules:modules,execQ:execQ,getModule:getModule,injectModule:injectModule,setArrived:setArrived,signal:signal,finishExec:finishExec,execModule:execModule,dojoRequirePlugin:dojoRequirePlugin,getLegacyMode:function(){return legacyMode},guardCheckComplete:guardCheckComplete}};if(1){var locationProtocol=location.protocol,locationHost=location.host;req.isXdUrl=function(url){if(/^\./.test(url))return false;if(/^\/\//.test(url))return true;
var match=url.match(/^([^\/\:]+\:)\/+([^\/]+)/);return match&&(match[1]!=locationProtocol||locationHost&&match[2]!=locationHost)};0&&has.add("dojo-xhr-factory",1);has.add("dojo-force-activex-xhr",1&&!doc.addEventListener&&window.location.protocol=="file:");has.add("native-xhr",typeof XMLHttpRequest!="undefined");if(has("native-xhr")&&!has("dojo-force-activex-xhr"))getXhr=function(){return new XMLHttpRequest};else{for(var XMLHTTP_PROGIDS=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],
progid,i=0;i<3;)try{progid=XMLHTTP_PROGIDS[i++];if(new ActiveXObject(progid))break}catch(e){}getXhr=function(){return new ActiveXObject(progid)}}req.getXhr=getXhr;has.add("dojo-gettext-api",1);req.getText=function(url,async,onLoad){var xhr=getXhr();xhr.open("GET",fixupUrl(url),false);xhr.send(null);if(xhr.status==200||!location.host&&!xhr.status){if(onLoad)onLoad(xhr.responseText,async)}else throw makeError("xhrFailed",xhr.status);return xhr.responseText}}}else req.async=1;var eval_=new Function("return eval(arguments[0]);");
req.eval=function(text,hint){return eval_(text+"\r\n////@ sourceURL\x3d"+hint)};var listenerQueues={},error="error",signal=req.signal=function(type,args){var queue=listenerQueues[type];forEach(queue&&queue.slice(0),function(listener){listener.apply(null,isArray(args)?args:[args])})},on=req.on=function(type,listener){var queue=listenerQueues[type]||(listenerQueues[type]=[]);queue.push(listener);return{remove:function(){for(var i=0;i<queue.length;i++)if(queue[i]===listener){queue.splice(i,1);return}}}};
var aliases=[],paths={},pathsMapProg=[],packs={},map=req.map={},mapProgs=[],modules={},cacheBust="",cache={},urlKeyPrefix="url:",pendingCacheInsert={},dojoSniffConfig={};if(1){var consumePendingCacheInsert=function(referenceModule){var p,item,match,now,m;for(p in pendingCacheInsert){item=pendingCacheInsert[p];match=p.match(/^url\:(.+)/);if(match)cache[urlKeyPrefix+toUrl(match[1],referenceModule)]=item;else if(p=="*now")now=item;else if(p!="*noref"){m=getModuleInfo(p,referenceModule);cache[m.mid]=
cache[urlKeyPrefix+m.url]=item}}if(now)now(createRequire(referenceModule));pendingCacheInsert={}},escapeString=function(s){return s.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(c){return"\\"+c})},computeMapProg=function(map,dest){dest.splice(0,dest.length);for(var p in map)dest.push([p,map[p],new RegExp("^"+escapeString(p)+"(/|$)"),p.length]);dest.sort(function(lhs,rhs){return rhs[3]-lhs[3]});return dest},fixupPackageInfo=function(packageInfo){var name=packageInfo.name;if(!name){name=packageInfo;
packageInfo={name:name}}packageInfo=mix({main:"main"},packageInfo);packageInfo.location=packageInfo.location?packageInfo.location:name;if(packageInfo.packageMap)map[name]=packageInfo.packageMap;if(!packageInfo.main.indexOf("./"))packageInfo.main=packageInfo.main.substring(2);packs[name]=packageInfo},delayedModuleConfig=[],config=function(config,booting,referenceModule){for(var p in config){if(p=="waitSeconds")req.waitms=(config[p]||0)*1E3;if(p=="cacheBust")cacheBust=config[p]?isString(config[p])?
config[p]:(new Date).getTime()+"":"";if(p=="baseUrl"||p=="combo")req[p]=config[p];if(0&&p=="async"){var mode=config[p];req.legacyMode=legacyMode=isString(mode)&&/sync|legacyAsync/.test(mode)?mode:!mode?sync:false;req.async=!legacyMode}if(config[p]!==hasCache){req.rawConfig[p]=config[p];p!="has"&&has.add("config-"+p,config[p],0,booting)}}if(!req.baseUrl)req.baseUrl="./";if(!/\/$/.test(req.baseUrl))req.baseUrl+="/";for(p in config.has)has.add(p,config.has[p],0,booting);forEach(config.packages,fixupPackageInfo);
for(baseUrl in config.packagePaths)forEach(config.packagePaths[baseUrl],function(packageInfo){var location=baseUrl+"/"+packageInfo;if(isString(packageInfo))packageInfo={name:packageInfo};packageInfo.location=location;fixupPackageInfo(packageInfo)});computeMapProg(mix(map,config.map),mapProgs);forEach(mapProgs,function(item){item[1]=computeMapProg(item[1],[]);if(item[0]=="*")mapProgs.star=item});computeMapProg(mix(paths,config.paths),pathsMapProg);forEach(config.aliases,function(pair){if(isString(pair[0]))pair[0]=
new RegExp("^"+escapeString(pair[0])+"$");aliases.push(pair)});if(booting)delayedModuleConfig.push({config:config.config});else for(p in config.config){var module=getModule(p,referenceModule);module.config=mix(module.config||{},config.config[p])}if(config.cache){consumePendingCacheInsert();pendingCacheInsert=config.cache;if(config.cache["*noref"])consumePendingCacheInsert()}signal("config",[config,req.rawConfig])};if(has("dojo-cdn")||1){var scripts=doc.getElementsByTagName("script"),i=0,script,dojoDir,
src,match;while(i<scripts.length){script=scripts[i++];if((src=script.getAttribute("src"))&&(match=src.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))){dojoDir=match[3]||"";defaultConfig.baseUrl=defaultConfig.baseUrl||dojoDir;src=script.getAttribute("data-dojo-config")||script.getAttribute("djConfig");if(src)dojoSniffConfig=req.eval("({ "+src+" })","data-dojo-config");if(0){var dataMain=script.getAttribute("data-main");if(dataMain)dojoSniffConfig.deps=dojoSniffConfig.deps||[dataMain]}break}}}if(0)try{if(window.parent!=
window&&window.parent.require){var doh=window.parent.require("doh");doh&&mix(dojoSniffConfig,doh.testConfig)}}catch(e){}req.rawConfig={};config(defaultConfig,1);if(has("dojo-cdn")){packs.dojo.location=dojoDir;if(dojoDir)dojoDir+="/";packs.dijit.location=dojoDir+"../dijit/";packs.dojox.location=dojoDir+"../dojox/"}config(userConfig,1);config(dojoSniffConfig,1)}else{paths=defaultConfig.paths;pathsMapProg=defaultConfig.pathsMapProg;packs=defaultConfig.packs;aliases=defaultConfig.aliases;mapProgs=defaultConfig.mapProgs;
modules=defaultConfig.modules;cache=defaultConfig.cache;cacheBust=defaultConfig.cacheBust;req.rawConfig=defaultConfig}if(0){req.combo=req.combo||{add:noop};var comboPending=0,combosPending=[],comboPendingTimer=null}var injectDependencies=function(module){guardCheckComplete(function(){forEach(module.deps,injectModule);if(0&&comboPending&&!comboPendingTimer)comboPendingTimer=setTimeout(function(){comboPending=0;comboPendingTimer=null;req.combo.done(function(mids,url){var onLoadCallback=function(){runDefQ(0,
mids);checkComplete()};combosPending.push(mids);injectingModule=mids;req.injectUrl(url,onLoadCallback,mids);injectingModule=0},req)},0)})},contextRequire=function(a1,a2,a3,referenceModule,contextRequire){var module,syntheticMid;if(isString(a1)){module=getModule(a1,referenceModule,true);if(module&&module.executed)return module.result;throw makeError("undefinedModule",a1);}if(!isArray(a1)){config(a1,0,referenceModule);a1=a2;a2=a3}if(isArray(a1))if(!a1.length)a2&&a2();else{syntheticMid="require*"+uid();
for(var mid,deps=[],i=0;i<a1.length;){mid=a1[i++];deps.push(getModule(mid,referenceModule))}module=mix(makeModuleInfo("",syntheticMid,0,""),{injected:arrived,deps:deps,def:a2||noop,require:referenceModule?referenceModule.require:req,gc:1});modules[module.mid]=module;injectDependencies(module);var strict=checkCompleteGuard&&legacyMode!=sync;guardCheckComplete(function(){execModule(module,strict)});if(!module.executed)execQ.push(module);checkComplete()}return contextRequire},createRequire=function(module){if(!module)return req;
var result=module.require;if(!result){result=function(a1,a2,a3){return contextRequire(a1,a2,a3,module,result)};module.require=mix(result,req);result.module=module;result.toUrl=function(name){return toUrl(name,module)};result.toAbsMid=function(mid){return toAbsMid(mid,module)};if(1)result.undef=function(mid){req.undef(mid,module)};if(0)result.syncLoadNls=function(mid){var nlsModuleInfo=getModuleInfo(mid,module),nlsModule=modules[nlsModuleInfo.mid];if(!nlsModule||!nlsModule.executed){cached=cache[nlsModuleInfo.mid]||
cache[urlKeyPrefix+nlsModuleInfo.url];if(cached){evalModuleText(cached);nlsModule=modules[nlsModuleInfo.mid]}}return nlsModule&&nlsModule.executed&&nlsModule.result}}return result},execQ=[],defQ=[],waiting={},setRequested=function(module){module.injected=requested;waiting[module.mid]=1;if(module.url)waiting[module.url]=module.pack||1;startTimer()},setArrived=function(module){module.injected=arrived;delete waiting[module.mid];if(module.url)delete waiting[module.url];if(isEmpty(waiting)){clearTimer();
0&&legacyMode==xd&&(legacyMode=sync)}},execComplete=req.idle=function(){return!defQ.length&&isEmpty(waiting)&&!execQ.length&&!checkCompleteGuard},runMapProg=function(targetMid,map){if(map)for(var i=0;i<map.length;i++)if(map[i][2].test(targetMid))return map[i];return 0},compactPath=function(path){var result=[],segment,lastSegment;path=path.replace(/\\/g,"/").split("/");while(path.length){segment=path.shift();if(segment==".."&&result.length&&lastSegment!=".."){result.pop();lastSegment=result[result.length-
1]}else if(segment!=".")result.push(lastSegment=segment)}return result.join("/")},makeModuleInfo=function(pid,mid,pack,url){if(0){var xd=req.isXdUrl(url);return{pid:pid,mid:mid,pack:pack,url:url,executed:0,def:0,isXd:xd,isAmd:!!(xd||packs[pid]&&packs[pid].isAmd)}}else return{pid:pid,mid:mid,pack:pack,url:url,executed:0,def:0}},getModuleInfo_=function(mid,referenceModule,packs,modules,baseUrl,mapProgs,pathsMapProg,alwaysCreate){var pid,pack,midInPackage,mapProg,mapItem,url,result,isRelative,requestedMid;
requestedMid=mid;isRelative=/^\./.test(mid);if(/(^\/)|(\:)|(\.js$)/.test(mid)||isRelative&&!referenceModule)return makeModuleInfo(0,mid,0,mid);else{mid=compactPath(isRelative?referenceModule.mid+"/../"+mid:mid);if(/^\./.test(mid))throw makeError("irrationalPath",mid);if(referenceModule)mapItem=runMapProg(referenceModule.mid,mapProgs);mapItem=mapItem||mapProgs.star;mapItem=mapItem&&runMapProg(mid,mapItem[1]);if(mapItem)mid=mapItem[1]+mid.substring(mapItem[3]);match=mid.match(/^([^\/]+)(\/(.+))?$/);
pid=match?match[1]:"";if(pack=packs[pid])mid=pid+"/"+(midInPackage=match[3]||pack.main);else pid="";var candidateLength=0,candidate=0;forEach(aliases,function(pair){var match=mid.match(pair[0]);if(match&&match.length>candidateLength)candidate=isFunction(pair[1])?mid.replace(pair[0],pair[1]):pair[1]});if(candidate)return getModuleInfo_(candidate,0,packs,modules,baseUrl,mapProgs,pathsMapProg,alwaysCreate);result=modules[mid];if(result)return alwaysCreate?makeModuleInfo(result.pid,result.mid,result.pack,
result.url):modules[mid]}mapItem=runMapProg(mid,pathsMapProg);if(mapItem)url=mapItem[1]+mid.substring(mapItem[3]);else if(pid)url=pack.location+"/"+midInPackage;else if(has("config-tlmSiblingOfDojo"))url="../"+mid;else url=mid;if(!/(^\/)|(\:)/.test(url))url=baseUrl+url;url+=".js";return makeModuleInfo(pid,mid,pack,compactPath(url))},getModuleInfo=function(mid,referenceModule){return getModuleInfo_(mid,referenceModule,packs,modules,req.baseUrl,mapProgs,pathsMapProg)},resolvePluginResourceId=function(plugin,
prid,referenceModule){return plugin.normalize?plugin.normalize(prid,function(mid){return toAbsMid(mid,referenceModule)}):toAbsMid(prid,referenceModule)},dynamicPluginUidGenerator=0,getModule=function(mid,referenceModule,immediate){var match,plugin,prid,result;match=mid.match(/^(.+?)\!(.*)$/);if(match){plugin=getModule(match[1],referenceModule,immediate);if(0&&legacyMode==sync&&!plugin.executed){injectModule(plugin);if(plugin.injected===arrived&&!plugin.executed)guardCheckComplete(function(){execModule(plugin)});
if(plugin.executed)promoteModuleToPlugin(plugin);else execQ.unshift(plugin)}if(plugin.executed===executed&&!plugin.load)promoteModuleToPlugin(plugin);if(plugin.load){prid=resolvePluginResourceId(plugin,match[2],referenceModule);mid=plugin.mid+"!"+(plugin.dynamic?++dynamicPluginUidGenerator+"!":"")+prid}else{prid=match[2];mid=plugin.mid+"!"+ ++dynamicPluginUidGenerator+"!waitingForPlugin"}result={plugin:plugin,mid:mid,req:createRequire(referenceModule),prid:prid}}else result=getModuleInfo(mid,referenceModule);
return modules[result.mid]||!immediate&&(modules[result.mid]=result)},toAbsMid=req.toAbsMid=function(mid,referenceModule){return getModuleInfo(mid,referenceModule).mid},toUrl=req.toUrl=function(name,referenceModule){var moduleInfo=getModuleInfo(name+"/x",referenceModule),url=moduleInfo.url;return fixupUrl(moduleInfo.pid===0?name:url.substring(0,url.length-5))},nonModuleProps={injected:arrived,executed:executed,def:nonmodule,result:nonmodule},makeCjs=function(mid){return modules[mid]=mix({mid:mid},
nonModuleProps)},cjsRequireModule=makeCjs("require"),cjsExportsModule=makeCjs("exports"),cjsModuleModule=makeCjs("module"),runFactory=function(module,args){req.trace("loader-run-factory",[module.mid]);var factory=module.def,result;0&&syncExecStack.unshift(module);if(has("config-dojo-loader-catches"))try{result=isFunction(factory)?factory.apply(null,args):factory}catch(e){signal(error,module.result=makeError("factoryThrew",[module,e]))}else result=isFunction(factory)?factory.apply(null,args):factory;
module.result=result===undefined&&module.cjs?module.cjs.exports:result;0&&syncExecStack.shift(module)},abortExec={},defOrder=0,promoteModuleToPlugin=function(pluginModule){var plugin=pluginModule.result;pluginModule.dynamic=plugin.dynamic;pluginModule.normalize=plugin.normalize;pluginModule.load=plugin.load;return pluginModule},resolvePluginLoadQ=function(plugin){var map={};forEach(plugin.loadQ,function(pseudoPluginResource){var prid=resolvePluginResourceId(plugin,pseudoPluginResource.prid,pseudoPluginResource.req.module),
mid=plugin.dynamic?pseudoPluginResource.mid.replace(/waitingForPlugin$/,prid):plugin.mid+"!"+prid,pluginResource=mix(mix({},pseudoPluginResource),{mid:mid,prid:prid,injected:0});if(!modules[mid])injectPlugin(modules[mid]=pluginResource);map[pseudoPluginResource.mid]=modules[mid];setArrived(pseudoPluginResource);delete modules[pseudoPluginResource.mid]});plugin.loadQ=0;var substituteModules=function(module){for(var replacement,deps=module.deps||[],i=0;i<deps.length;i++){replacement=map[deps[i].mid];
if(replacement)deps[i]=replacement}};for(var p in modules)substituteModules(modules[p]);forEach(execQ,substituteModules)},finishExec=function(module){req.trace("loader-finish-exec",[module.mid]);module.executed=executed;module.defOrder=defOrder++;0&&forEach(module.provides,function(cb){cb()});if(module.loadQ){promoteModuleToPlugin(module);resolvePluginLoadQ(module)}for(i=0;i<execQ.length;)if(execQ[i]===module)execQ.splice(i,1);else i++;if(/^require\*/.test(module.mid))delete modules[module.mid]},
circleTrace=[],execModule=function(module,strict){if(module.executed===executing){req.trace("loader-circular-dependency",[circleTrace.concat(module.mid).join("-\x3e")]);return!module.def||strict?abortExec:module.cjs&&module.cjs.exports}if(!module.executed){if(!module.def)return abortExec;var mid=module.mid,deps=module.deps||[],arg,argResult,args=[],i=0;if(0){circleTrace.push(mid);req.trace("loader-exec-module",["exec",circleTrace.length,mid])}module.executed=executing;while(i<deps.length){arg=deps[i++];
argResult=arg===cjsRequireModule?createRequire(module):arg===cjsExportsModule?module.cjs.exports:arg===cjsModuleModule?module.cjs:execModule(arg,strict);if(argResult===abortExec){module.executed=0;req.trace("loader-exec-module",["abort",mid]);0&&circleTrace.pop();return abortExec}args.push(argResult)}runFactory(module,args);finishExec(module);0&&circleTrace.pop()}return module.result},checkCompleteGuard=0,guardCheckComplete=function(proc){try{checkCompleteGuard++;proc()}finally{checkCompleteGuard--}if(execComplete())signal("idle",
[])},checkComplete=function(){if(checkCompleteGuard)return;guardCheckComplete(function(){checkDojoRequirePlugin();for(var currentDefOrder,module,i=0;i<execQ.length;){currentDefOrder=defOrder;module=execQ[i];execModule(module);if(currentDefOrder!=defOrder){checkDojoRequirePlugin();i=0}else i++}})};if(1)req.undef=function(moduleId,referenceModule){var module=getModule(moduleId,referenceModule);setArrived(module);mix(module,{def:0,executed:0,injected:0,node:0})};if(1){if(has("dojo-loader-eval-hint-url")===
undefined)has.add("dojo-loader-eval-hint-url",1);var fixupUrl=function(url){url+="";return url+(cacheBust?(/\?/.test(url)?"\x26":"?")+cacheBust:"")},injectPlugin=function(module){var plugin=module.plugin;if(plugin.executed===executed&&!plugin.load)promoteModuleToPlugin(plugin);var onLoad=function(def){module.result=def;setArrived(module);finishExec(module);checkComplete()};if(plugin.load)plugin.load(module.prid,module.req,onLoad);else if(plugin.loadQ)plugin.loadQ.push(module);else{plugin.loadQ=[module];
execQ.unshift(plugin);injectModule(plugin)}},cached=0,injectingModule=0,injectingCachedModule=0,evalModuleText=function(text,module){if(has("config-stripStrict"))text=text.replace(/"use strict"/g,"");injectingCachedModule=1;if(has("config-dojo-loader-catches"))try{if(text===cached)cached.call(null);else req.eval(text,has("dojo-loader-eval-hint-url")?module.url:module.mid)}catch(e){signal(error,makeError("evalModuleThrew",module))}else if(text===cached)cached.call(null);else req.eval(text,has("dojo-loader-eval-hint-url")?
module.url:module.mid);injectingCachedModule=0},injectModule=function(module){var mid=module.mid,url=module.url;if(module.executed||module.injected||waiting[mid]||module.url&&(module.pack&&waiting[module.url]===module.pack||waiting[module.url]==1))return;setRequested(module);if(0){var viaCombo=0;if(module.plugin&&module.plugin.isCombo){req.combo.add(module.plugin.mid,module.prid,0,req);viaCombo=1}else if(!module.plugin)viaCombo=req.combo.add(0,module.mid,module.url,req);if(viaCombo){comboPending=
1;return}}if(module.plugin){injectPlugin(module);return}var onLoadCallback=function(){runDefQ(module);if(module.injected!==arrived){setArrived(module);mix(module,nonModuleProps);req.trace("loader-define-nonmodule",[module.url])}if(0&&legacyMode)!syncExecStack.length&&checkComplete();else checkComplete()};cached=cache[mid]||cache[urlKeyPrefix+module.url];if(cached){req.trace("loader-inject",["cache",module.mid,url]);evalModuleText(cached,module);onLoadCallback();return}if(0&&legacyMode)if(module.isXd)legacyMode==
sync&&(legacyMode=xd);else if(module.isAmd&&legacyMode!=sync);else{var xhrCallback=function(text){if(legacyMode==sync){syncExecStack.unshift(module);evalModuleText(text,module);syncExecStack.shift();runDefQ(module);if(!module.cjs){setArrived(module);finishExec(module)}if(module.finish){var finishMid=mid+"*finish",finish=module.finish;delete module.finish;def(finishMid,["dojo",("dojo/require!"+finish.join(",")).replace(/\./g,"/")],function(dojo){forEach(finish,function(mid){dojo.require(mid)})});execQ.unshift(getModule(finishMid))}onLoadCallback()}else{text=
transformToAmd(module,text);if(text){evalModuleText(text,module);onLoadCallback()}else{injectingModule=module;req.injectUrl(fixupUrl(url),onLoadCallback,module);injectingModule=0}}};req.trace("loader-inject",["xhr",module.mid,url,legacyMode!=sync]);if(has("config-dojo-loader-catches"))try{req.getText(url,legacyMode!=sync,xhrCallback)}catch(e){signal(error,makeError("xhrInjectFailed",[module,e]))}else req.getText(url,legacyMode!=sync,xhrCallback);return}req.trace("loader-inject",["script",module.mid,
url]);injectingModule=module;req.injectUrl(fixupUrl(url),onLoadCallback,module);injectingModule=0},defineModule=function(module,deps,def){req.trace("loader-define-module",[module.mid,deps]);if(0&&module.plugin&&module.plugin.isCombo){module.result=isFunction(def)?def():def;setArrived(module);finishExec(module);return module}var mid=module.mid;if(module.injected===arrived){signal(error,makeError("multipleDefine",module));return module}mix(module,{deps:deps,def:def,cjs:{id:module.mid,uri:module.url,
exports:module.result={},setExports:function(exports){module.cjs.exports=exports},config:function(){return module.config}}});for(var i=0;i<deps.length;i++)deps[i]=getModule(deps[i],module);if(0&&legacyMode&&!waiting[mid]){injectDependencies(module);execQ.push(module);checkComplete()}setArrived(module);if(!isFunction(def)&&!deps.length){module.result=def;finishExec(module)}return module},runDefQ=function(referenceModule,mids){var definedModules=[],module,args;while(defQ.length){args=defQ.shift();mids&&
(args[0]=mids.shift());module=args[0]&&getModule(args[0])||referenceModule;definedModules.push([module,args[1],args[2]])}consumePendingCacheInsert(referenceModule);forEach(definedModules,function(args){injectDependencies(defineModule.apply(null,args))})}}var timerId=0,clearTimer=noop,startTimer=noop;if(1)clearTimer=function(){timerId&&clearTimeout(timerId);timerId=0},startTimer=function(){clearTimer();if(req.waitms)timerId=window.setTimeout(function(){clearTimer();signal(error,makeError("timeout",
waiting))},req.waitms)};if(1)has.add("ie-event-behavior",!!doc.attachEvent&&(typeof opera==="undefined"||opera.toString()!="[object Opera]"));if(1&&(1||1)){var domOn=function(node,eventName,ieEventName,handler){if(!has("ie-event-behavior")){node.addEventListener(eventName,handler,false);return function(){node.removeEventListener(eventName,handler,false)}}else{node.attachEvent(ieEventName,handler);return function(){node.detachEvent(ieEventName,handler)}}},windowOnLoadListener=domOn(window,"load","onload",
function(){req.pageLoaded=1;doc.readyState!="complete"&&(doc.readyState="complete");windowOnLoadListener()});if(1){var sibling=doc.getElementsByTagName("script")[0],insertPoint=sibling.parentNode;req.injectUrl=function(url,callback,owner){if(url.indexOf("callbacks.js")!==-1);var node=owner.node=doc.createElement("script"),onLoad=function(e){e=e||window.event;var node=e.target||e.srcElement;if(e.type==="load"||/complete|loaded/.test(node.readyState)){loadDisconnector();errorDisconnector();callback&&
callback()}},loadDisconnector=domOn(node,"load","onreadystatechange",onLoad),errorDisconnector=domOn(node,"error","onerror",function(e){loadDisconnector();errorDisconnector();signal(error,makeError("scriptError",[url,e]))});node.type="text/javascript";node.charset="utf-8";node.src=url;insertPoint.insertBefore(node,sibling);return node}}}if(0)req.log=function(){try{for(var i=0;i<arguments.length;i++)0&&console.log(arguments[i])}catch(e){}};else req.log=noop;if(0){var trace=req.trace=function(group,
args){if(trace.on&&trace.group[group]){signal("trace",[group,args]);for(var arg,dump=[],text="trace:"+group+(args.length?":"+args[0]:""),i=1;i<args.length;){arg=args[i++];if(isString(arg))text+=", "+arg;else dump.push(arg)}req.log(text);dump.length&&dump.push(".");req.log.apply(req,dump)}};mix(trace,{on:1,group:{},set:function(group,value){if(isString(group))trace.group[group]=value;else mix(trace.group,group)}});trace.set(mix(mix(mix({},defaultConfig.trace),userConfig.trace),dojoSniffConfig.trace));
on("config",function(config){config.trace&&trace.set(config.trace)})}else req.trace=noop;var def=function(mid,dependencies,factory){var arity=arguments.length,defaultDeps=["require","exports","module"],args=[0,mid,dependencies];if(arity==1)args=[0,isFunction(mid)?defaultDeps:[],mid];else if(arity==2&&isString(mid))args=[mid,isFunction(dependencies)?defaultDeps:[],dependencies];else if(arity==3)args=[mid,dependencies,factory];if(0&&args[1]===defaultDeps)args[2].toString().replace(/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,
"").replace(/require\(["']([\w\!\-_\.\/]+)["']\)/g,function(match,dep){args[1].push(dep)});req.trace("loader-define",args.slice(0,2));var targetModule=args[0]&&getModule(args[0]),module;if(targetModule&&!waiting[targetModule.mid])injectDependencies(defineModule(targetModule,args[1],args[2]));else if(!has("ie-event-behavior")||!1||injectingCachedModule)defQ.push(args);else{targetModule=targetModule||injectingModule;if(!targetModule){for(mid in waiting){module=modules[mid];if(module&&module.node&&module.node.readyState===
"interactive"){targetModule=module;break}}if(0&&!targetModule)for(var i=0;i<combosPending.length;i++){targetModule=combosPending[i];if(targetModule.node&&targetModule.node.readyState==="interactive")break;targetModule=0}}if(0&&isArray(targetModule)){injectDependencies(defineModule(getModule(targetModule.shift()),args[1],args[2]));if(!targetModule.length)combosPending.splice(i,1)}else if(targetModule){consumePendingCacheInsert(targetModule);injectDependencies(defineModule(targetModule,args[1],args[2]))}else signal(error,
makeError("ieDefineFailed",args[0]));checkComplete()}};def.amd={vendor:"dojotoolkit.org"};if(0)req.def=def;mix(mix(req,defaultConfig.loaderPatch),userConfig.loaderPatch);on(error,function(arg){try{console.error(arg);if(arg instanceof Error){for(var p in arg)0&&console.log(p+":",arg[p]);0&&console.log(".")}}catch(e){}});mix(req,{uid:uid,cache:cache,packs:packs});if(0)mix(req,{paths:paths,aliases:aliases,modules:modules,legacyMode:legacyMode,execQ:execQ,defQ:defQ,waiting:waiting,packs:packs,mapProgs:mapProgs,
pathsMapProg:pathsMapProg,listenerQueues:listenerQueues,computeMapProg:computeMapProg,runMapProg:runMapProg,compactPath:compactPath,getModuleInfo:getModuleInfo_});if(global.define){if(0)signal(error,makeError("defineAlreadyDefined",0));return}else{global.define=def;global.require=req;if(0)require=req}if(0&&req.combo&&req.combo.plugins){var plugins=req.combo.plugins,pluginName;for(pluginName in plugins)mix(mix(getModule(pluginName),plugins[pluginName]),{isCombo:1,executed:"executed",load:1})}if(1){forEach(delayedModuleConfig,
function(c){config(c)});var bootDeps=dojoSniffConfig.deps||userConfig.deps||defaultConfig.deps,bootCallback=dojoSniffConfig.callback||userConfig.callback||defaultConfig.callback;req.boot=bootDeps||bootCallback?[bootDeps||[],bootCallback]:0}if(!1){!req.async&&req(["dojo"]);req.boot&&req.apply(null,req.boot)}})(this.dojoConfig||this.djConfig||this.require||{},{async:0,hasCache:{"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../xapp",
name:"xapp"},{location:"../cbtree",name:"cbtree"},{location:"../xwordpress",name:"xwordpress"},{location:"../xstyle",name:"xstyle"},{location:"../put-selector",main:"put",name:"put-selector"},{location:"../xfile",name:"xfile"},{location:"../xappconnect",name:"xappconnect"},{location:"../xblox",name:"xblox"},{location:"../dcl",main:"dcl.js",name:"dcl"},{location:"../dojox",name:"dojox"},{location:"../dijit",name:"dijit"},{location:".",name:"dojo"},{location:"../xas",name:"xas"},{location:"../dgrid",
main:"OnDemandGrid",name:"dgrid"},{location:"../xide",name:"xide"},{location:"../xlog",name:"xlog"}]});
require({cache:{"xfile/manager/BlockManager":function(){define("xfile/manager/BlockManager",["dojo/_base/declare","dojo/_base/lang","xide/types","xide/utils","xide/factory","xide/manager/ManagerBase","xide/mixins/ReloadMixin","xblox/manager/BlockManager","xblox/model/variables/Variable"],function(declare,lang,types,utils,factory,ManagerBase,ReloadMixin,BlockManager,Variable){return declare("xfile.manager.BlockManager",[ManagerBase,BlockManager,ReloadMixin],{currentItem:null,onScopeCreated:function(scope){if(scope["processed"]!=
null){0&&console.log("scope already processed");return}else scope["processed"]=true;var _varCWD=scope.getVariable("CurrentDirectory");if(!_varCWD)var newItem=new Variable({title:"CurrentDirectory",type:13,value:"",enumType:"VariableType",initialize:"",group:"Variables",id:utils.createUUID(),serializeMe:false,scope:scope,readOnly:true,canDelete:false});var _varCPATH=scope.getVariable("CurrentFilePath");if(!_varCPATH)var newItem=new Variable({title:"CurrentFilePath",type:13,value:"",enumType:"VariableType",
initialize:"",group:"Variables",id:utils.createUUID(),serializeMe:false,scope:scope,readOnly:true,canDelete:false})},updateScope:function(scope,item){var thiz=this;var _update=function(variable){thiz.publish(types.EVENTS.ON_VARIABLE_CHANGED,{item:variable,scope:scope,owner:thiz,save:false})};var currentDirectoryItem=item;currentDirectoryItem=item._S.getParents(currentDirectoryItem)[0];if(!currentDirectoryItem)currentDirectoryItem={mount:item.mount,path:""};var currentDirectory=item.path;if(currentDirectoryItem)currentDirectory=
utils.buildPath(currentDirectoryItem.mount,currentDirectoryItem.path,false);if(currentDirectory){var _varCWD=scope.getVariable("CurrentDirectory");if(_varCWD){_varCWD.value=currentDirectory;_update(_varCWD)}}var currentFilePath=utils.buildPath(item.mount,item.path);if(item.directory===true)currentFilePath="";var _varCFPath=scope.getVariable("CurrentFilePath");if(_varCFPath){_varCFPath.value=currentFilePath;_update(_varCFPath)}},updateScopes:function(item){for(var scope in this.scopes)this.updateScope(this.scopes[scope],
item)},onItemSelected:function(eventData){if(!eventData||!eventData.item||!eventData.item._S)return;var item=eventData.item;this.updateScopes(item)},init:function(){this.inherited(arguments);this.subscribe(types.EVENTS.ON_SCOPE_CREATED,this.onScopeCreated);this.subscribe(types.EVENTS.ITEM_SELECTED,this.onItemSelected)},addDriverFunctions:function(target,source){for(var i in source){var o=source[i];if(i==="constructor"||i==="inherited")continue;if(lang.isFunction(source[i]))target[i]=source[i]}},setScriptFunctions:function(obj,
scope,owner){this.inherited(arguments)},onReloaded:function(){this.init()}})})},"dojo/request/default":function(){define("dojo/request/default",["exports","require","../has"],function(exports,require,has){var defId=has("config-requestProvider"),platformId;if(1)platformId="./xhr";else if(0)platformId="./node";if(!defId)defId=platformId;exports.getPlatformDefaultId=function(){return platformId};exports.load=function(id,parentRequire,loaded,config){require([id=="platform"?platformId:defId],function(provider){loaded(provider)})}})},
"dojox/mdnd/dropMode/OverDropMode":function(){define("dojox/mdnd/dropMode/OverDropMode",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","dojo/dom-geometry","dojox/mdnd/AreaManager"],function(dojo,declare,connect,array,geom,AreaManager){var odm=declare("dojox.mdnd.dropMode.OverDropMode",null,{_oldXPoint:null,_oldYPoint:null,_oldBehaviour:"up",constructor:function(){this._dragHandler=[connect.connect(AreaManager.areaManager(),"onDragEnter",function(coords,size){var m=
AreaManager.areaManager();if(m._oldIndexArea==-1)m._oldIndexArea=m._lastValidIndexArea})]},addArea:function(areas,object){var length=areas.length,position=geom.position(object.node,true);object.coords={"x":position.x,"y":position.y};if(length==0)areas.push(object);else{var x=object.coords.x;for(var i=0;i<length;i++)if(x<areas[i].coords.x){for(var j=length-1;j>=i;j--)areas[j+1]=areas[j];areas[i]=object;break}if(i==length)areas.push(object)}return areas},updateAreas:function(areaList){var length=areaList.length;
for(var i=0;i<length;i++)this._updateArea(areaList[i])},_updateArea:function(area){var position=geom.position(area.node,true);area.coords.x=position.x;area.coords.x2=position.x+position.w;area.coords.y=position.y},initItems:function(area){array.forEach(area.items,function(obj){var node=obj.item.node;var position=geom.position(node,true);var y=position.y+position.h/2;obj.y=y});area.initItems=true},refreshItems:function(area,indexItem,size,added){if(indexItem==-1)return;else if(area&&size&&size.h){var height=
size.h;if(area.margin)height+=area.margin.t;var length=area.items.length;for(var i=indexItem;i<length;i++){var item=area.items[i];if(added)item.y+=height;else item.y-=height}}},getDragPoint:function(coords,size,mousePosition){return{"x":mousePosition.x,"y":mousePosition.y}},getTargetArea:function(areaList,coords,currentIndexArea){var index=0;var x=coords.x;var y=coords.y;var end=areaList.length;var start=0,direction="right",compute=false;if(currentIndexArea==-1||arguments.length<3)compute=true;else if(this._checkInterval(areaList,
currentIndexArea,x,y))index=currentIndexArea;else{if(this._oldXPoint<x)start=currentIndexArea+1;else{start=currentIndexArea-1;end=0;direction="left"}compute=true}if(compute)if(direction==="right"){for(var i=start;i<end;i++)if(this._checkInterval(areaList,i,x,y)){index=i;break}if(i==end)index=-1}else{for(var i=start;i>=end;i--)if(this._checkInterval(areaList,i,x,y)){index=i;break}if(i==end-1)index=-1}this._oldXPoint=x;return index},_checkInterval:function(areaList,index,x,y){var area=areaList[index];
var node=area.node;var coords=area.coords;var startX=coords.x;var endX=coords.x2;var startY=coords.y;var endY=startY+node.offsetHeight;if(startX<=x&&x<=endX&&startY<=y&&y<=endY)return true;return false},getDropIndex:function(targetArea,coords){var length=targetArea.items.length;var coordinates=targetArea.coords;var y=coords.y;if(length>0)for(var i=0;i<length;i++)if(y<targetArea.items[i].y)return i;else if(i==length-1)return-1;return-1},destroy:function(){array.forEach(this._dragHandler,connect.disconnect)}});
AreaManager.areaManager()._dropMode=new odm;return odm})},"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(dojo,has,lang){var cache={},u;function buildFn(fn){return cache[fn]=new Function("item","index","array",fn)}function everyOrSome(some){var every=!some;return function(a,fn,o){var i=0,l=a&&a.length||0,result;if(l&&typeof a=="string")a=a.split("");if(typeof fn=="string")fn=cache[fn]||buildFn(fn);if(o)for(;i<l;++i){result=!fn.call(o,a[i],i,a);if(some^result)return!result}else for(;i<l;++i){result=!fn(a[i],i,a);if(some^result)return!result}return every}}
function index(up){var delta=1,lOver=0,uOver=0;if(!up)delta=lOver=uOver=-1;return function(a,x,from,last){if(last&&delta>0)return array.lastIndexOf(a,x,from);var l=a&&a.length||0,end=up?l+uOver:lOver,i;if(from===u)i=up?lOver:l+uOver;else if(from<0){i=l+from;if(i<0)i=lOver}else i=from>=l?l+uOver:from;if(l&&typeof a=="string")a=a.split("");for(;i!=end;i+=delta)if(a[i]==x)return i;return-1}}var array={every:everyOrSome(false),some:everyOrSome(true),indexOf:index(true),lastIndexOf:index(false),forEach:function(arr,
callback,thisObject){var i=0,l=arr&&arr.length||0;if(l&&typeof arr=="string")arr=arr.split("");if(typeof callback=="string")callback=cache[callback]||buildFn(callback);if(thisObject)for(;i<l;++i)callback.call(thisObject,arr[i],i,arr);else for(;i<l;++i)callback(arr[i],i,arr)},map:function(arr,callback,thisObject,Ctr){var i=0,l=arr&&arr.length||0,out=new (Ctr||Array)(l);if(l&&typeof arr=="string")arr=arr.split("");if(typeof callback=="string")callback=cache[callback]||buildFn(callback);if(thisObject)for(;i<
l;++i)out[i]=callback.call(thisObject,arr[i],i,arr);else for(;i<l;++i)out[i]=callback(arr[i],i,arr);return out},filter:function(arr,callback,thisObject){var i=0,l=arr&&arr.length||0,out=[],value;if(l&&typeof arr=="string")arr=arr.split("");if(typeof callback=="string")callback=cache[callback]||buildFn(callback);if(thisObject)for(;i<l;++i){value=arr[i];if(callback.call(thisObject,value,i,arr))out.push(value)}else for(;i<l;++i){value=arr[i];if(callback(value,i,arr))out.push(value)}return out},clearCache:function(){cache=
{}}};1&&lang.mixin(dojo,array);return array})},"xblox/views/BlockEditView":function(){define("xblox/views/BlockEditView",["dojo/_base/array","dojo/_base/declare","dojo/_base/html","dojo/dom-class","dojo/on","dojo/_base/lang","dojo/dom-construct","xide/utils","xide/factory","xide/types","xide/views/CIView"],function(array,declare,html,domClass,on,lang,domConstruct,utils,factory,types,CIView){return declare("xblox.views.BlockEditView",[CIView],{onSave:function(ci,value){if(this.delegate&&this.delegate.onSave)this.delegate.onSave(ci,
value)},startup:function(){this.inherited(arguments)}})})},"dojox/encoding/digests/MD5":function(){define("dojox/encoding/digests/MD5",["./_base"],function(base){var chrsz=8;function R(n,c){return n<<c|n>>>32-c}function C(q,a,b,x,s,t){return base.addWords(R(base.addWords(base.addWords(a,q),base.addWords(x,t)),s),b)}function FF(a,b,c,d,x,s,t){return C(b&c|~b&d,a,b,x,s,t)}function GG(a,b,c,d,x,s,t){return C(b&d|c&~d,a,b,x,s,t)}function HH(a,b,c,d,x,s,t){return C(b^c^d,a,b,x,s,t)}function II(a,b,c,d,
x,s,t){return C(c^(b|~d),a,b,x,s,t)}function core(x,len){x[len>>5]|=128<<len%32;x[(len+64>>>9<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=FF(a,b,c,d,x[i+0],7,-680876936);d=FF(d,a,b,c,x[i+1],12,-389564586);c=FF(c,d,a,b,x[i+2],17,606105819);b=FF(b,c,d,a,x[i+3],22,-1044525330);a=FF(a,b,c,d,x[i+4],7,-176418897);d=FF(d,a,b,c,x[i+5],12,1200080426);c=FF(c,d,a,b,x[i+6],17,-1473231341);b=FF(b,c,
d,a,x[i+7],22,-45705983);a=FF(a,b,c,d,x[i+8],7,1770035416);d=FF(d,a,b,c,x[i+9],12,-1958414417);c=FF(c,d,a,b,x[i+10],17,-42063);b=FF(b,c,d,a,x[i+11],22,-1990404162);a=FF(a,b,c,d,x[i+12],7,1804603682);d=FF(d,a,b,c,x[i+13],12,-40341101);c=FF(c,d,a,b,x[i+14],17,-1502002290);b=FF(b,c,d,a,x[i+15],22,1236535329);a=GG(a,b,c,d,x[i+1],5,-165796510);d=GG(d,a,b,c,x[i+6],9,-1069501632);c=GG(c,d,a,b,x[i+11],14,643717713);b=GG(b,c,d,a,x[i+0],20,-373897302);a=GG(a,b,c,d,x[i+5],5,-701558691);d=GG(d,a,b,c,x[i+10],
9,38016083);c=GG(c,d,a,b,x[i+15],14,-660478335);b=GG(b,c,d,a,x[i+4],20,-405537848);a=GG(a,b,c,d,x[i+9],5,568446438);d=GG(d,a,b,c,x[i+14],9,-1019803690);c=GG(c,d,a,b,x[i+3],14,-187363961);b=GG(b,c,d,a,x[i+8],20,1163531501);a=GG(a,b,c,d,x[i+13],5,-1444681467);d=GG(d,a,b,c,x[i+2],9,-51403784);c=GG(c,d,a,b,x[i+7],14,1735328473);b=GG(b,c,d,a,x[i+12],20,-1926607734);a=HH(a,b,c,d,x[i+5],4,-378558);d=HH(d,a,b,c,x[i+8],11,-2022574463);c=HH(c,d,a,b,x[i+11],16,1839030562);b=HH(b,c,d,a,x[i+14],23,-35309556);
a=HH(a,b,c,d,x[i+1],4,-1530992060);d=HH(d,a,b,c,x[i+4],11,1272893353);c=HH(c,d,a,b,x[i+7],16,-155497632);b=HH(b,c,d,a,x[i+10],23,-1094730640);a=HH(a,b,c,d,x[i+13],4,681279174);d=HH(d,a,b,c,x[i+0],11,-358537222);c=HH(c,d,a,b,x[i+3],16,-722521979);b=HH(b,c,d,a,x[i+6],23,76029189);a=HH(a,b,c,d,x[i+9],4,-640364487);d=HH(d,a,b,c,x[i+12],11,-421815835);c=HH(c,d,a,b,x[i+15],16,530742520);b=HH(b,c,d,a,x[i+2],23,-995338651);a=II(a,b,c,d,x[i+0],6,-198630844);d=II(d,a,b,c,x[i+7],10,1126891415);c=II(c,d,a,b,
x[i+14],15,-1416354905);b=II(b,c,d,a,x[i+5],21,-57434055);a=II(a,b,c,d,x[i+12],6,1700485571);d=II(d,a,b,c,x[i+3],10,-1894986606);c=II(c,d,a,b,x[i+10],15,-1051523);b=II(b,c,d,a,x[i+1],21,-2054922799);a=II(a,b,c,d,x[i+8],6,1873313359);d=II(d,a,b,c,x[i+15],10,-30611744);c=II(c,d,a,b,x[i+6],15,-1560198380);b=II(b,c,d,a,x[i+13],21,1309151649);a=II(a,b,c,d,x[i+4],6,-145523070);d=II(d,a,b,c,x[i+11],10,-1120210379);c=II(c,d,a,b,x[i+2],15,718787259);b=II(b,c,d,a,x[i+9],21,-343485551);a=base.addWords(a,olda);
b=base.addWords(b,oldb);c=base.addWords(c,oldc);d=base.addWords(d,oldd)}return[a,b,c,d]}function hmac(data,key){var wa=base.stringToWord(key);if(wa.length>16)wa=core(wa,key.length*chrsz);var l=[],r=[];for(var i=0;i<16;i++){l[i]=wa[i]^909522486;r[i]=wa[i]^1549556828}var h=core(l.concat(base.stringToWord(data)),512+data.length*chrsz);return core(r.concat(h),640)}base.MD5=function(data,outputType){var out=outputType||base.outputTypes.Base64;var wa=core(base.stringToWord(data),data.length*chrsz);switch(out){case base.outputTypes.Raw:return wa;
case base.outputTypes.Hex:return base.wordToHex(wa);case base.outputTypes.String:return base.wordToString(wa);default:return base.wordToBase64(wa)}};base.MD5._hmac=function(data,key,outputType){var out=outputType||base.outputTypes.Base64;var wa=hmac(data,key);switch(out){case base.outputTypes.Raw:return wa;case base.outputTypes.Hex:return base.wordToHex(wa);case base.outputTypes.String:return base.wordToString(wa);default:return base.wordToBase64(wa)}};return base.MD5})},"xblox/views/VariablesGridView":function(){define("xblox/views/VariablesGridView",
["dojo/_base/declare","xide/views/BeanView","xide/types","dgrid/OnDemandGrid","dgrid/Selection","dgrid/editor","xide/views/GridView","dijit/form/TextBox","dijit/form/ValidationTextBox","xide/bean/Grouped"],function(declare,BeanView,types,OnDemandGrid,Selection,editor,GridView,TextBox,ValidationTextBox,Grouped){return declare("xblox.views.VariablesGridView",[BeanView,GridView,Grouped],{cssClass:"variablesGridView",onShow:function(){this.inherited(arguments);this.publish(types.EVENTS.RESIZE);this.setCurrentGroup(this.delegate.blockGroup)},
variableNameValidator:function(value,constraints){var thiz=this;var result=false;var reg=new RegExp(/^[0-9a-zA-Z ...\-_ ]+$/);if(value&&reg.test(value))if(thiz.delegate&&thiz.delegate.variableNameExists&&thiz.delegate.variableNameExists(value,this.object)){result=false;thiz.promptMessage="Item already exists";thiz.message="Item already exists"}else{result=true;thiz.message="Enter new variable name"}else{thiz.promptMessage="This is not a valid variable name, try without special characters!";thiz.message=
"This is not a valid variable name, try without special characters!";result=false}return result},createWidgets:function(store){var thiz=this;var grid=new (declare([OnDemandGrid,Selection]))({cellNavigation:false,store:store,deselectOnRefresh:false,columns:[editor({label:"Name",field:"title",sortable:true,canEdit:function(item){return item.readOnly===false},editorArgs:{required:true,promptMessage:"Enter a unique variable name",validator:thiz.variableNameValidator,delegate:thiz.delegate,intermediateChanges:false}},
ValidationTextBox),editor({label:"Value",field:"value",sortable:false,canEdit:function(item){return item.readOnly===false}},TextBox)]},this.containerNode);grid.sort("name");grid.refresh();this.grid=grid;this.onGridCreated(grid)},startup:function(){this.inherited(arguments);if(this.store)this.createWidgets(this.store)}})})},"xide/widgets/TemplatedWidgetBase":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","xide/mixins/EventedMixin","xide/mixins/ReloadMixin",
"dojo/i18n","dojo/i18n!./nls/TemplatedWidgetBase"],function(declare,_Widget,_TemplatedMixin,_WidgetsInTemplateMixin,EventedMixin,ReloadMixin){return declare("xide.widgets.TemplatedWidgetBase",[_Widget,_TemplatedMixin,_WidgetsInTemplateMixin,EventedMixin,ReloadMixin],{data:null,delegate:null,didLoad:false,templateString:null,translate:function(value){if(this._messages==null||this._messages.length==0)this._setupTranslations();if(value){var _titleKey=value.toLocaleLowerCase();_titleKey=_titleKey.replace(/\s+/g,
"_");if(_titleKey&&this._messages!=null){var _titleValue=this._messages[_titleKey];if(_titleValue&&_titleValue.length>0)return _titleValue}}return value||""},_setupTranslations:function(){var dstCtx=this.ctx;if(dstCtx&&dstCtx.getLocals){var l=dstCtx.getValidLanguage();this._messages=dstCtx.getLocals("xide.widgets","TemplatedWidgetBase")}else this._messages=[]},postMixInProperties:function(){this.inherited(arguments);this._setupTranslations()},startup:function(){try{this.inherited(arguments)}catch(e){debugger}this.initReload()},
updateTitleNode:function(value){if(value&&this.titleNode){var _titleKey=value.toLocaleLowerCase();_titleKey=_titleKey.replace(/\s+/g,"_");if(_titleKey){var _titleValue=this._messages[_titleKey];if(_titleValue)this.titleNode.innerHTML=_titleValue}}}})})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(lang,dom,ioq,json){function setValue(obj,name,value){if(value===null)return;var val=obj[name];if(typeof val=="string")obj[name]=[val,value];else if(lang.isArray(val))val.push(value);
else obj[name]=value}var exclude="file|submit|image|reset|button";var form={fieldToObject:function fieldToObject(inputNode){var ret=null;inputNode=dom.byId(inputNode);if(inputNode){var _in=inputNode.name,type=(inputNode.type||"").toLowerCase();if(_in&&type&&!inputNode.disabled)if(type=="radio"||type=="checkbox"){if(inputNode.checked)ret=inputNode.value}else if(inputNode.multiple){ret=[];var nodes=[inputNode.firstChild];while(nodes.length)for(var node=nodes.pop();node;node=node.nextSibling)if(node.nodeType==
1&&node.tagName.toLowerCase()=="option"){if(node.selected)ret.push(node.value)}else{if(node.nextSibling)nodes.push(node.nextSibling);if(node.firstChild)nodes.push(node.firstChild);break}}else ret=inputNode.value}return ret},toObject:function formToObject(formNode){var ret={},elems=dom.byId(formNode).elements;for(var i=0,l=elems.length;i<l;++i){var item=elems[i],_in=item.name,type=(item.type||"").toLowerCase();if(_in&&type&&exclude.indexOf(type)<0&&!item.disabled){setValue(ret,_in,form.fieldToObject(item));
if(type=="image")ret[_in+".x"]=ret[_in+".y"]=ret[_in].x=ret[_in].y=0}}return ret},toQuery:function formToQuery(formNode){return ioq.objectToQuery(form.toObject(formNode))},toJson:function formToJson(formNode,prettyPrint){return json.stringify(form.toObject(formNode),null,prettyPrint?4:0)}};return form})},"dijit/MenuBar":function(){require({cache:{"url:dijit/templates/MenuBar.html":'\x3cdiv class\x3d"dijitMenuBar dijitMenuPassive" data-dojo-attach-point\x3d"containerNode" role\x3d"menubar" tabIndex\x3d"${tabIndex}"\n\t \x3e\x3c/div\x3e\n'}});
define("dijit/MenuBar",["dojo/_base/declare","dojo/keys","./_MenuBase","dojo/text!./templates/MenuBar.html"],function(declare,keys,_MenuBase,template){return declare("dijit.MenuBar",_MenuBase,{templateString:template,baseClass:"dijitMenuBar",popupDelay:0,_isMenuBar:true,_orient:["below"],_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,evt)},focusChild:function(item){this.inherited(arguments);if(this.activated&&
item.popup&&!item.disabled)this._openItemPopup(item,true)},_onChildDeselect:function(item){if(this.currentPopupItem==item){this.currentPopupItem=null;item._closePopup()}this.inherited(arguments)},_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()},_onDownArrow:function(evt){this._moveToPopup(evt)},_onUpArrow:function(){},onItemClick:function(item,evt){if(item.popup&&item.popup.isShowingNow&&(!/^key/.test(evt.type)||evt.keyCode!==keys.DOWN_ARROW)){item.focusNode.focus();
this._cleanUp(true)}else this.inherited(arguments)}})})},"xide/widgets/ExpressionsGridView":function(){define(["dojo/_base/declare","dojo/_base/lang","xide/views/BeanView","xide/types","dgrid/OnDemandGrid","dgrid/Selection","xide/views/GridView","dgrid/extensions/DnD"],function(declare,lang,BeanView,types,OnDemandGrid,Selection,GridView,Dnd){return declare("xide.views.ExpressionsGridView",[BeanView,GridView],{cssClass:"conditionalResponseGridView",onReloaded:function(){this.inherited(arguments);if(this.delegate)this.delegate.onReloaded()},
onShow:function(){this.inherited(arguments);this.publish(types.EVENTS.RESIZE)},onGridDataChanged:function(evt){},createWidgets:function(store){var thiz=this;var SharedDndGridSource=declare(Dnd.GridSource,{copyState:function(){return false},onDropExternal:function(source,nodes,copy,targetItem){},onDropInternal:function(source,nodes,copy,targetItem){0&&console.log("on drop internal")}});var baseClasses=[OnDemandGrid,Selection,Dnd];baseClasses=this.addGridBases(baseClasses);var _ctorArgs={sort:"order",
dndConstructor:SharedDndGridSource,cellNavigation:false,store:store,showHeader:false,columns:[{label:"Name",field:"name",sortable:true}]};if(this.gridParams)_ctorArgs=lang.mixin(_ctorArgs,this.gridParams);var grid=new (declare(baseClasses))(_ctorArgs,this.containerNode);grid.refresh();this.grid=grid;this.onGridCreated(grid)},startup:function(){if(this.didLoad)return;this.inherited(arguments);if(this.store)this.createWidgets(this.store);this.didLoad=true}})})},"xide/widgets/ArgumentsWidget":function(){define(["dojo/_base/declare",
"dojo/_base/lang","xide/widgets/WidgetBase","xide/factory","xide/utils","xide/views/CIActionDialog"],function(declare,lang,WidgetBase,factory,utils,CIActionDialog){return declare("xide.widgets.ArgumentsWidget",[WidgetBase],{wContentSelectorButton:null,lastUploadedFileName:null,oriPath:null,minHeight:"400px;",value:"",options:null,templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e"+"\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e"+"\x3ctbody\x3e"+
"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+"\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'previewNode'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button2'\x3e\x3c/td\x3e"+
"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"+"\x3cdiv data-dojo-attach-point\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'last'\x3e\x3c/div\x3e"+"\x3c/div\x3e",filePathValidator:function(value,constraints){return true},onSelect:function(){var thiz=this;var _defaultOptions={};if(this.options)lang.mixin(_defaultOptions,this.options);var value=utils.toString(this.userData["value"]);var actionDialog=new CIActionDialog({title:"Arguments",style:"width:400px;height:400px;",
resizeable:true,delegate:{onOk:function(dlg,data){var expression=utils.getCIInputValueByName(data,"Arguments");thiz.userData.changed=true;thiz.userData.active=true;utils.setCIValueByField(thiz.userData,"value",expression);thiz.editBox.set("value",expression)}},cis:[utils.createCI("Arguments",28,value,{group:"Arguments"})]});actionDialog.show()},fillTemplate:function(){var thiz=this;var value=utils.toString(this.userData["value"]);this.editBox=factory.createValidationTextBox(this.previewNode,"","",
value,this.filePathValidator,this.delegate,"Not a path!","I need some input");this.connectEditBox(this.editBox);this.selectButton=factory.createButton(this.button0,"el-icon-magic","elusiveButton","","",this.onSelect,this)},startup:function(){this.inherited(arguments);this.fillTemplate();this.onReady()}})})},"xfile/widgets/ActionToolbarEmbedded":function(){define("xfile/widgets/ActionToolbarEmbedded",["dojo/_base/declare","dojo/dom-class","xide/types","xfile/widgets/ActionToolbarButtonEmbedded","xfile/widgets/NewItemSelector",
"dijit/Toolbar","xfile/widgets/ActionToolbarMixin","xfile/views/EditorPluginMixin"],function(declare,domClass,types,ActionToolbarButtonEmbedded,NewItemSelector,Toolbar,ActionToolbarMixin,EditorPluginMixin){return declare("xfile.widgets.ActionToolbarEmbedded",[Toolbar,ActionToolbarMixin,EditorPluginMixin],{_createDefaultItems:function(){var allowedActions=this.inherited(arguments);var opsInt=types.OPERATION_INT;try{if(allowedActions[opsInt.NEW_FILE]||allowedActions[opsInt.NEW_DIRECTORY]){var button=
new NewItemSelector({title:"New",delegate:this,allowedActions:allowedActions},dojo.doc.createElement("div"));this.containerNode.appendChild(button.domNode);dojo.place(button.domNode,this.containerNode,"last");button.startup()}}catch(e){debugger}},_createButton:function(operation,item,clickcb,disabled,add,className){var iconClass=this.toIconClass(operation);var title=this.toTitle(operation);if(iconClass&&title){try{var button=new ActionToolbarButtonEmbedded({title:title,iconClass:iconClass,operation:operation,
item:item,disabled:disabled},dojo.doc.createElement("div"));this.containerNode.appendChild(button.domNode);domClass.add(button.domNode,className||"actionToolbarButton");button.startup();if(add===false);else this.buttons.push(button);var thiz=this;button.domNode.onclick=function(){if(clickcb)clickcb(button);else thiz.onButtonClicked(button)}}catch(e){debugger}if(this.useElusive){domClass.remove(button.iconNode,"dijitReset");domClass.add(button.iconNode,"actionToolbarButtonElusive")}return button}},
startup:function(){this.inherited(arguments);if(this.config){if(this.config.MEDIA_PICKER&&this.config.MEDIA_PICKER.showPreview)var previewButton=this._createButton(types.OPERATION.PREVIEW,{empty:true},null,false,false,"actionToolbarButtonLeft");if(this.config.MEDIA_PICKER&&this.config.MEDIA_PICKER.showPreview)this._createButton(types.OPERATION.INSERT_IMAGE,{empty:true},null,false,true,"actionToolbarButtonLeft")}}})})},"xblox/model/html/SetStyle":function(){define("xblox/model/html/SetStyle",["dojo/_base/declare",
"dojo/_base/array","dojo/_base/lang","xblox/model/Block","xide/types","xide/mixins/EventedMixin","xblox/model/Targeted","dijit/registry","dojo/dom-attr","dojo/dom-style","dojo/_base/Color"],function(declare,ArrayUtil,lang,Block,types,EventedMixin,Targeted,registry,domAttr,domStyle,Color){return declare("xblox.model.html.SetStyle",[Block,EventedMixin,Targeted],{name:"Set Style",reference:"",references:null,description:"Sets HTML Node Style Attribute",value:"",mode:1,solve:function(scope,settings){this.updateObjects(null,
this.value,this.mode);this.onSuccess(this,settings)},toText:function(){var _ref=this.deserialize(this.reference);var result=this.getBlockIcon()+" "+this.name+" :: on "+_ref.reference+" to"||" "+" to ";if(this.value)result+=" "+this.value;return result},getFields:function(){var fields=this.inherited(arguments)||this.getDefaultFields();var thiz=this;fields.push(this.utils.createCI("Value",types.ECIType.DOM_PROPERTIES,this.value,{group:"General",dst:"value",value:this.value,intermediateChanges:false}));
fields.push(this.utils.createCI("Mode",types.ECIType.ENUMERATION,this.mode,{group:"General",options:[this.utils.createOption("Set",1),this.utils.createOption("Add",2),this.utils.createOption("Remove",3),this.utils.createOption("Increase",4),this.utils.createOption("Decrease",5)],dst:"mode"}));fields.push(this.utils.createCI("Target",types.ECIType.WIDGET_REFERENCE,this.reference,{group:"General",dst:"reference",value:this.reference}));return fields},getBlockIcon:function(){return'\x3cspan class\x3d"fa-paint-brush"\x3e\x3c/span\x3e'},
destroy:function(){this.inherited(arguments)},updateEventSelector:function(objects,cis){var options=[];if(!objects||!objects.length)options=this.scope.getEventsAsOptions(this.event);else{options=[{label:"onclick",value:"onclick"},{label:"ondblclick",value:"ondblclick"},{label:"onmousedown",value:"onmousedown"},{label:"onmouseup",value:"onmouseup"},{label:"onmouseover",value:"onmouseover"},{label:"onmousemove",value:"onmousemove"},{label:"onmouseout",value:"onmouseout"},{label:"onkeypress",value:"onkeypress"},
{label:"onkeydown",value:"onkeydown"},{label:"onkeyup",value:"onkeyup"},{label:"onfocus",value:"onfocus"},{label:"onblur",value:"onblur"},{label:"onchange",value:"onchange"}];for(var i=0;i<options.length;i++){var obj=options[i];if(obj.value===this.event){obj.selected=true;break}}}for(var i=0;i<cis.length;i++){var ci=cis[i];if(ci["widget"]&&ci["widget"].title==="Event"){var widget=ci["_widget"];widget.nativeWidget.set("options",options);widget.nativeWidget.reset();widget.nativeWidget.set("value",this.event);
this.publish(types.EVENTS.RESIZE,{});break}}},onReferenceChanged:function(newValue,cis){this.reference=newValue;this.references=this.resolveReference(this.deserialize(newValue));this.updateObjects(this.references,this.value)},getPropValue:function(stylesObject,prop){for(var _prop in stylesObject)if(_prop===prop)return stylesObject[_prop];return null},_getStyle:function(name,obj,jObj){switch(name){case "height":return jObj.outerHeight();case "width":return jObj.outerWidth();case "color":return jObj.css("color");
case "border-color":return jObj.css("border-color")||"rgba(0,0,0,0)"}return null},updateObject:function(obj,style,mode){if(!obj)return false;mode=mode||1;if(obj.domNode!=null)obj=obj.domNode;var currentStyle=domAttr.get(obj,"style");var styleAttribute=""+currentStyle;if(currentStyle===";")currentStyle="";if(currentStyle==="")if(obj["lastStyle"]!=null)currentStyle=obj["lastStyle"];else currentStyle=style;if(currentStyle===";")currentStyle=style;switch(mode){case 1:domAttr.set(obj,"style",style);break;
case 2:domAttr.set(obj,"style",currentStyle+";"+style);break;case 3:domAttr.set(obj,"style",this.utils.replaceAll(style,"",currentStyle));break;case 4:case 5:var numbersOnlyRegExp=new RegExp(/(\D*)(-?)(\d+)(\D*)/);var stylesRequested=this._toObject(style);var stylesComputed={};var jInstance=$(obj);if(stylesRequested)for(var prop in stylesRequested){var currentStyle=this._getStyle(prop,obj,jInstance);stylesComputed[prop]=currentStyle}var _newStyleObject={};for(var prop in stylesRequested){var _prop=
""+prop.trim();var multiplicator=1;if(stylesComputed[_prop]!=null){var _valueRequested=stylesRequested[prop];var _valueComputed=stylesComputed[prop];var _isHex=_valueRequested.indexOf("#")!=-1;var _isRGB=_valueRequested.indexOf("rgb")!=-1;var _isRGBA=_valueRequested.indexOf("rgba")!=-1;if(_isHex||_isRGB||_isRGBA){var dColorMultiplicator=dojo.colorFromString(_valueRequested);var dColorNow=dojo.colorFromString(_valueRequested);var dColorComputed=dojo.colorFromString(_valueComputed);var dColorNew=new Color;
ArrayUtil.forEach(["r","g","b","a"],function(x){dColorNew[x]=Math.min(dColorComputed[x]+dColorMultiplicator[x],x=="a"?1:255)});0&&console.log("color computed "+dColorComputed.toRgba()+" color requested: "+dColorNow.toRgba()+" | multiplicator color \x3d "+dColorMultiplicator.toRgba()+" is then \x3d "+dColorNew.toRgba());var _valueOut="";if(_isHex)_valueOut=dColorNew.toHex();else if(_isRGB)_valueOut=dColorNew.toCss(false);else if(_isRGBA)_valueOut=dColorNew.toCss(true);_newStyleObject[prop]=_valueOut;
domStyle.set(obj,prop,_valueOut)}else{var numberOnly=numbersOnlyRegExp.exec(stylesComputed[_prop]);if(numberOnly&&numberOnly.length>=3){var _int=parseInt(numberOnly[3]);if(_int&&_int>0)multiplicator=_int}}}}var delta=mode==4?1:-1;var styles=this._toObject(currentStyle);var inStyles=this._toObject(style);if(!styles)return false;var _skipped=[];for(var prop in styles)var _prop=""+prop.trim();var newStyleString=this._toStyleString(_newStyleObject);break}},onDomStyleChanged:function(objects,newStyle,
mode){if(mode==4||mode==5);objects=objects||this.resolveReference(this.deserialize(this.reference));if(!objects){0&&console.log("have no objects");return}0&&console.log("change dom style to "+newStyle+" on "+objects.length+" objects");for(var i=0;i<objects.length;i++){var obj=objects[i];if(obj&&obj.id&&obj.id.indexOf("davinci")!=-1)continue;this.updateObject(obj,newStyle,mode);if(i>1);}},updateObjects:function(objects,domStyleString,mode){objects=objects||this.resolveReference(this.deserialize(this.reference));
this.onDomStyleChanged(objects,domStyleString,mode)},onChangeField:function(field,newValue,cis){this._destroy();if(field=="mode"&&newValue!==this.mode)this.mode=newValue;if(field=="value"&&newValue!==this.value){this.onDomStyleChanged(null,newValue,this.mode);this.value=newValue}if(field=="reference")this.onReferenceChanged(newValue,cis);this.inherited(arguments)},activate:function(){this._destroy()},deactivate:function(){this._destroy()},_destroy:function(){},_changeValue:function(value,delta){if(!value)return"";
var split=value.split(" ");var result="";for(var i=0;i<split.length;i++){if(i>0)result+=" ";var bits=split[i].match(/([-\d\.]+)([a-zA-Z%]*)/);if(!bits)result+=split[i];else if(bits.length==1)result+=bits[0];else for(var z=1;z<bits.length;z++)if(!isNaN(bits[z])&&bits[z]!="")result+=parseFloat(bits[z])+delta;else result+=bits[z]}return result},_toObject:function(styleString){if(!styleString)return{};var _result={};var _values=styleString.split(";");for(var i=0;i<_values.length;i++){var obj=_values[i];
if(!obj||obj.length==0||!obj.split)continue;var keyVal=obj.split(":");if(!keyVal||!keyVal.length)continue;_result[keyVal[0]]=keyVal[1]}return _result},_toStyleString:function(values){var _values=[];for(var prop in values)_values.push(prop+":"+values[prop]);return _values.join(";")+";"}})})},"dijit/Viewport":function(){define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(Evented,on,domReady,has,winUtils){var Viewport=new Evented;var focusedNode;domReady(function(){var oldBox=
winUtils.getBox();Viewport._rlh=on(window,"resize",function(){var newBox=winUtils.getBox();if(oldBox.h==newBox.h&&oldBox.w==newBox.w)return;oldBox=newBox;Viewport.emit("resize")});if(has("ie")==8){var deviceXDPI=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=deviceXDPI){deviceXDPI=screen.deviceXDPI;Viewport.emit("resize")}},500)}if(true||has("ios")){on(document,"focusin",function(evt){focusedNode=evt.target});on(document,"focusout",function(evt){focusedNode=null})}});Viewport.getEffectiveBox=
function(doc){var box=winUtils.getBox(doc);var tag=focusedNode&&focusedNode.tagName&&focusedNode.tagName.toLowerCase();if(has("ios")&&(tag=="textarea"||tag=="input"&&/^(color|email|number|password|search|tel|text|url)$/.test(focusedNode.type)))box.h*=box.h>box.w?0.66:0.4;return box};return Viewport})},"xfile/views/FileDeleteDialog":function(){define("xfile/views/FileDeleteDialog",["dojo/_base/declare","./ActionDialog"],function(declare,ActionDialog){return declare("xfile.views.FileDeleteDialog",[ActionDialog],
{initWithSelection:function(src,dst,operation){this.addActionButtons();this.fixHeight();this.resize()},startup:function(){this.inherited(arguments)}})})},"dijit/_editor/range":function(){define("dijit/_editor/range",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang"],function(array,declare,lang){var rangeapi={getIndex:function(node,parent){var ret=[],retR=[];var onode=node;var pnode,n;while(node!=parent){var i=0;pnode=node.parentNode;while(n=pnode.childNodes[i++])if(n===node){--i;break}ret.unshift(i);
retR.unshift(i-pnode.childNodes.length);node=pnode}if(ret.length>0&&onode.nodeType==3){n=onode.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling}n=onode.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling}}return{o:ret,r:retR}},getNode:function(index,parent){if(!lang.isArray(index)||index.length==0)return parent;var node=parent;array.every(index,function(i){if(i>=0&&i<node.childNodes.length)node=node.childNodes[i];else{node=null;return false}return true});
return node},getCommonAncestor:function(n1,n2,root){root=root||n1.ownerDocument.body;var getAncestors=function(n){var as=[];while(n){as.unshift(n);if(n!==root)n=n.parentNode;else break}return as};var n1as=getAncestors(n1);var n2as=getAncestors(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++)if(n1as[i]===n2as[i])com=n1as[i];else break;return com},getAncestor:function(node,regex,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();
if(regex.test(name))return node;node=node.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(node,regex,root){root=root||node.ownerDocument.body;regex=regex||rangeapi.BlockTagNames;var block=null,blockContainer;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!block&&regex.test(name))block=node;if(!blockContainer&&/^(?:BODY|TD|TH|CAPTION)$/.test(name))blockContainer=node;node=node.parentNode}return{blockNode:block,
blockContainer:blockContainer||node.ownerDocument.body}},atBeginningOfContainer:function(container,node,offset){var atBeginning=false;var offsetAtBeginning=offset==0;if(!offsetAtBeginning&&node.nodeType==3)if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,offset)))offsetAtBeginning=true;if(offsetAtBeginning){var cnode=node;atBeginning=true;while(cnode&&cnode!==container){if(cnode.previousSibling){atBeginning=false;break}cnode=cnode.parentNode}}return atBeginning},atEndOfContainer:function(container,node,
offset){var atEnd=false;var offsetAtEnd=offset==(node.length||node.childNodes.length);if(!offsetAtEnd&&node.nodeType==3)if(/^[\s\xA0]+$/.test(node.nodeValue.substr(offset)))offsetAtEnd=true;if(offsetAtEnd){var cnode=node;atEnd=true;while(cnode&&cnode!==container){if(cnode.nextSibling){atEnd=false;break}cnode=cnode.parentNode}}return atEnd},adjacentNoneTextNode:function(startnode,next){var node=startnode;var len=0-startnode.length||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=
3)break;len+=node.length;node=node[prop]}return[node,len]},create:function(win){win=win||window;if(win.getSelection)return win.document.createRange();else return new W3CRange},getSelection:function(window,ignoreUpdate){if(window.getSelection)return window.getSelection();else{var s=new ie.selection(window);if(!ignoreUpdate)s._getCurrentSelection();return s}}};if(!window.getSelection){var ie=rangeapi.ie={cachedSelection:{},selection:function(window){this._ranges=[];this.addRange=function(r,internal){this._ranges.push(r);
if(!internal)r._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};var _initCurrentRange=function(){var r=window.document.selection.createRange();var type=window.document.selection.type.toUpperCase();if(type=="CONTROL")return new W3CRange(ie.decomposeControlRange(r));else return new W3CRange(ie.decomposeTextRange(r))};this.getRangeAt=function(i){return this._ranges[i]};this._getCurrentSelection=function(){this.removeAllRanges();var r=_initCurrentRange();
if(r){this.addRange(r,true);this.isCollapsed=r.collapsed}else this.isCollapsed=true}},decomposeControlRange:function(range){var firstnode=range.item(0),lastnode=range.item(range.length-1);var startContainer=firstnode.parentNode,endContainer=lastnode.parentNode;var startOffset=rangeapi.getIndex(firstnode,startContainer).o[0];var endOffset=rangeapi.getIndex(lastnode,endContainer).o[0]+1;return[startContainer,startOffset,endContainer,endOffset]},getEndPoint:function(range,end){var atmrange=range.duplicate();
atmrange.collapse(!end);var cmpstr="EndTo"+(end?"End":"Start");var parentNode=atmrange.parentElement();var startnode,startOffset,lastNode;if(parentNode.childNodes.length>0)array.every(parentNode.childNodes,function(node,i){var calOffset;if(node.nodeType!=3){atmrange.moveToElementText(node);if(atmrange.compareEndPoints(cmpstr,range)>0)if(lastNode&&lastNode.nodeType==3){startnode=lastNode;calOffset=true}else{startnode=parentNode;startOffset=i;return false}else if(i==parentNode.childNodes.length-1){startnode=
parentNode;startOffset=parentNode.childNodes.length;return false}}else if(i==parentNode.childNodes.length-1){startnode=node;calOffset=true}if(calOffset&&startnode){var prevnode=rangeapi.adjacentNoneTextNode(startnode)[0];if(prevnode)startnode=prevnode.nextSibling;else startnode=parentNode.firstChild;var prevnodeobj=rangeapi.adjacentNoneTextNode(startnode);prevnode=prevnodeobj[0];var lenoffset=prevnodeobj[1];if(prevnode){atmrange.moveToElementText(prevnode);atmrange.collapse(false)}else atmrange.moveToElementText(parentNode);
atmrange.setEndPoint(cmpstr,range);startOffset=atmrange.text.length-lenoffset;return false}lastNode=node;return true});else{startnode=parentNode;startOffset=0}if(!end&&startnode.nodeType==1&&startOffset==startnode.childNodes.length){var nextnode=startnode.nextSibling;if(nextnode&&nextnode.nodeType==3){startnode=nextnode;startOffset=0}}return[startnode,startOffset]},setEndPoint:function(range,container,offset){var atmrange=range.duplicate(),node,len;if(container.nodeType!=3)if(offset>0){node=container.childNodes[offset-
1];if(node)if(node.nodeType==3){container=node;offset=node.length}else if(node.nextSibling&&node.nextSibling.nodeType==3){container=node.nextSibling;offset=0}else{atmrange.moveToElementText(node.nextSibling?node:container);var parent=node.parentNode;var tempNode=parent.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);atmrange.collapse(false);parent.removeChild(tempNode)}}else{atmrange.moveToElementText(container);atmrange.collapse(true)}if(container.nodeType==3){var prevnodeobj=
rangeapi.adjacentNoneTextNode(container);var prevnode=prevnodeobj[0];len=prevnodeobj[1];if(prevnode){atmrange.moveToElementText(prevnode);atmrange.collapse(false);if(prevnode.contentEditable!="inherit")len++}else{atmrange.moveToElementText(container.parentNode);atmrange.collapse(true);atmrange.move("character",1);atmrange.move("character",-1)}offset+=len;if(offset>0)if(atmrange.move("character",offset)!=offset)console.error("Error when moving!")}return atmrange},decomposeTextRange:function(range){var tmpary=
ie.getEndPoint(range);var startContainer=tmpary[0],startOffset=tmpary[1];var endContainer=tmpary[0],endOffset=tmpary[1];if(range.htmlText.length)if(range.htmlText==range.text)endOffset=startOffset+range.text.length;else{tmpary=ie.getEndPoint(range,true);endContainer=tmpary[0],endOffset=tmpary[1]}return[startContainer,startOffset,endContainer,endOffset]},setRange:function(range,startContainer,startOffset,endContainer,endOffset,collapsed){var start=ie.setEndPoint(range,startContainer,startOffset);range.setEndPoint("StartToStart",
start);if(!collapsed)var end=ie.setEndPoint(range,endContainer,endOffset);range.setEndPoint("EndToEnd",end||start);return range}};var W3CRange=rangeapi.W3CRange=declare(null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3])}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true}},_updateInternal:function(){if(this.startContainer!==
this.endContainer)this.commonAncestorContainer=rangeapi.getCommonAncestor(this.startContainer,this.endContainer);else this.commonAncestorContainer=this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(node,offset){offset=parseInt(offset);if(this.startContainer===node&&this.startOffset==offset)return;delete this._cachedBookmark;this.startContainer=node;this.startOffset=offset;if(!this.endContainer)this.setEnd(node,offset);else this._updateInternal()},
setEnd:function(node,offset){offset=parseInt(offset);if(this.endContainer===node&&this.endOffset==offset)return;delete this._cachedBookmark;this.endContainer=node;this.endOffset=offset;if(!this.startContainer)this.setStart(node,offset);else this._updateInternal()},setStartAfter:function(node,offset){this._setPoint("setStart",node,offset,1)},setStartBefore:function(node,offset){this._setPoint("setStart",node,offset,0)},setEndAfter:function(node,offset){this._setPoint("setEnd",node,offset,1)},setEndBefore:function(node,
offset){this._setPoint("setEnd",node,offset,0)},_setPoint:function(what,node,offset,ext){var index=rangeapi.getIndex(node,node.parentNode).o;this[what](node.parentNode,index.pop()+ext)},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){var r=this._getIERange();
r.select()},deleteContents:function(){var s=this.startContainer,r=this._getIERange();if(s.nodeType===3&&!this.startOffset)this.setStartBefore(s);r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true},cloneRange:function(){var r=new W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=
0;this.endContainer=null;this.endOffset=0;this.collapsed=true}})}lang.setObject("dijit.range",rangeapi);return rangeapi})},"xide/utils":function(){define(["dojo/_base/declare"],function(declare){return declare("xide.utils",null,{})})},"dijit/Dialog":function(){require({cache:{"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabIndex\x3d"-1"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\n\x3c/div\x3e\n'}});
define("dijit/Dialog",["require","dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/window","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","./focus","./_base/manager","./_Widget","./_TemplatedMixin","./_CssStateMixin","./form/_FormMixin","./_DialogMixin","./DialogUnderlay","./layout/ContentPane","dojo/text!./templates/Dialog.html",
"dojo/i18n!./nls/common"],function(require,array,aspect,declare,Deferred,dom,domClass,domGeometry,domStyle,fx,i18n,keys,lang,on,ready,has,winUtils,Moveable,TimedMoveable,focus,manager,_Widget,_TemplatedMixin,_CssStateMixin,_FormMixin,_DialogMixin,DialogUnderlay,ContentPane,template){var _DialogBase=declare("dijit._DialogBase"+(0?"_NoBidi":""),[_TemplatedMixin,_FormMixin,_DialogMixin,_CssStateMixin],{templateString:template,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},
_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:false,duration:manager.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,_setDraggableAttr:function(val){this._set("draggable",val)},maxRatio:0.9,closable:true,_setClosableAttr:function(val){this.closeButtonNode.style.display=val?"":"none";this._set("closable",val)},postMixInProperties:function(){var _nlsResources=i18n.getLocalization("dijit","common");lang.mixin(this,_nlsResources);
this.inherited(arguments)},postCreate:function(){domStyle.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);aspect.after(this,"onExecute",lang.hitch(this,"hide"),true);aspect.after(this,"onCancel",lang.hitch(this,"hide"),true);this._modalconnects=[]},onLoad:function(){this._position();if(this.autofocus&&DialogLevelManager.isTop(this)){this._getFocusItems(this.domNode);focus.focus(this._firstFocusItem)}this.inherited(arguments)},
focus:function(){this._getFocusItems(this.domNode);focus.focus(this._firstFocusItem)},_endDrag:function(){var nodePosition=domGeometry.position(this.domNode),viewport=winUtils.getBox(this.ownerDocument);nodePosition.y=Math.min(Math.max(nodePosition.y,0),viewport.h-nodePosition.h);nodePosition.x=Math.min(Math.max(nodePosition.x,0),viewport.w-nodePosition.w);this._relativePosition=nodePosition;this._position()},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=
new (has("ie")==6?TimedMoveable:Moveable)(node,{handle:this.titleBar});aspect.after(this._moveable,"onMoveStop",lang.hitch(this,"_endDrag"),true)}else domClass.add(node,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":array.map(this["class"].split(/\s/),function(s){return s+"_underlay"}).join(" "),_onKeyDown:lang.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(typeof this._singleChildOriginalStyle!="undefined"){this._singleChild.domNode.style.cssText=
this._singleChildOriginalStyle;delete this._singleChildOriginalStyle}}else domStyle.set(this.containerNode,{width:"auto",height:"auto"});var bb=domGeometry.position(this.domNode);var viewport=winUtils.getBox(this.ownerDocument);viewport.w*=this.maxRatio;viewport.h*=this.maxRatio;if(bb.w>=viewport.w||bb.h>=viewport.h){var containerSize=domGeometry.position(this.containerNode),w=Math.min(bb.w,viewport.w)-(bb.w-containerSize.w),h=Math.min(bb.h,viewport.h)-(bb.h-containerSize.h);if(this._singleChild&&
this._singleChild.resize){if(typeof this._singleChildOriginalStyle=="undefined")this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:w,h:h})}else domStyle.set(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"})}else if(this._singleChild&&this._singleChild.resize)this._singleChild.resize()},_position:function(){if(!domClass.contains(this.ownerDocumentBody,"dojoMove")){var node=this.domNode,viewport=winUtils.getBox(this.ownerDocument),
p=this._relativePosition,bb=p?null:domGeometry.position(node),l=Math.floor(viewport.l+(p?p.x:(viewport.w-bb.w)/2)),t=Math.floor(viewport.t+(p?p.y:(viewport.h-bb.h)/2));domStyle.set(node,{left:l+"px",top:t+"px"})}},_onKey:function(evt){if(evt.keyCode==keys.TAB){this._getFocusItems(this.domNode);var node=evt.target;if(this._firstFocusItem==this._lastFocusItem){evt.stopPropagation();evt.preventDefault()}else if(node==this._firstFocusItem&&evt.shiftKey){focus.focus(this._lastFocusItem);evt.stopPropagation();
evt.preventDefault()}else if(node==this._lastFocusItem&&!evt.shiftKey){focus.focus(this._firstFocusItem);evt.stopPropagation();evt.preventDefault()}}else if(this.closable&&evt.keyCode==keys.ESCAPE){this.onCancel();evt.stopPropagation();evt.preventDefault()}},show:function(){if(this.open)return;if(!this._started)this.startup();if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();DialogLevelManager.hide(this)}var win=winUtils.get(this.ownerDocument);
this._modalconnects.push(on(win,"scroll",lang.hitch(this,"resize")));this._modalconnects.push(on(this.domNode,"keydown",lang.hitch(this,"_onKey")));domStyle.set(this.domNode,{opacity:0,display:""});this._set("open",true);this._onShow();this._size();this._position();var fadeIn;this._fadeInDeferred=new Deferred(lang.hitch(this,function(){fadeIn.stop();delete this._fadeInDeferred}));var promise=this._fadeInDeferred.promise;fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:lang.hitch(this,
function(){DialogLevelManager.show(this,this.underlayAttrs)}),onEnd:lang.hitch(this,function(){if(this.autofocus&&DialogLevelManager.isTop(this)){this._getFocusItems(this.domNode);focus.focus(this._firstFocusItem)}this._fadeInDeferred.resolve(true);delete this._fadeInDeferred})}).play();return promise},hide:function(){if(!this._alreadyInitialized||!this.open)return;if(this._fadeInDeferred)this._fadeInDeferred.cancel();var fadeOut;this._fadeOutDeferred=new Deferred(lang.hitch(this,function(){fadeOut.stop();
delete this._fadeOutDeferred}));this._fadeOutDeferred.then(lang.hitch(this,"onHide"));var promise=this._fadeOutDeferred.promise;fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,function(){this.domNode.style.display="none";DialogLevelManager.hide(this);this._fadeOutDeferred.resolve(true);delete this._fadeOutDeferred})}).play();if(this._scrollConnected)this._scrollConnected=false;var h;while(h=this._modalconnects.pop())h.remove();if(this._relativePosition)delete this._relativePosition;
this._set("open",false);return promise},resize:function(){if(this.domNode.style.display!="none"){this._size();if(!has("touch"))this._position()}},destroy:function(){if(this._fadeInDeferred)this._fadeInDeferred.cancel();if(this._fadeOutDeferred)this._fadeOutDeferred.cancel();if(this._moveable)this._moveable.destroy();var h;while(h=this._modalconnects.pop())h.remove();DialogLevelManager.hide(this);this.inherited(arguments)}});if(0)_DialogBase=declare("dijit._DialogBase",_DialogBase,{_setTitleAttr:function(title){this._set("title",
title);this.titleNode.innerHTML=title;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(textDir){if(this._created&&this.textDir!=textDir){this._set("textDir",textDir);this.set("title",this.title)}}});var Dialog=declare("dijit.Dialog",[ContentPane,_DialogBase],{});Dialog._DialogBase=_DialogBase;var DialogLevelManager=Dialog._DialogLevelManager={_beginZIndex:950,show:function(dialog,underlayAttrs){ds[ds.length-1].focus=focus.curNode;var zIndex=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+
2:Dialog._DialogLevelManager._beginZIndex;domStyle.set(dialog.domNode,"zIndex",zIndex);DialogUnderlay.show(underlayAttrs,zIndex-1);ds.push({dialog:dialog,underlayAttrs:underlayAttrs,zIndex:zIndex})},hide:function(dialog){if(ds[ds.length-1].dialog==dialog){ds.pop();var pd=ds[ds.length-1];if(ds.length==1)DialogUnderlay.hide();else DialogUnderlay.show(pd.underlayAttrs,pd.zIndex-1);if(dialog.refocus){var focus=pd.focus;if(pd.dialog&&(!focus||!dom.isDescendant(focus,pd.dialog.domNode))){pd.dialog._getFocusItems(pd.dialog.domNode);
focus=pd.dialog._firstFocusItem}if(focus)try{focus.focus()}catch(e){}}}else{var idx=array.indexOf(array.map(ds,function(elem){return elem.dialog}),dialog);if(idx!=-1)ds.splice(idx,1)}},isTop:function(dialog){return ds[ds.length-1].dialog==dialog}};var ds=Dialog._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];focus.watch("curNode",function(attr,oldNode,node){var topDialog=ds[ds.length-1].dialog;if(node&&topDialog){do if(node==topDialog.domNode||domClass.contains(node,"dijitPopup"))return;
while(node=node.parentNode);topDialog.focus()}});if(has("dijit-legacy-requires"))ready(0,function(){var requires=["dijit/TooltipDialog"];require(requires)});return Dialog})},"url:dojox/image/resources/Lightbox.html":'\x3cdiv class\x3d"dojoxLightbox" dojoAttachPoint\x3d"containerNode"\x3e\n\t\x3cdiv style\x3d"position:relative"\x3e\n\t\t\x3cdiv dojoAttachPoint\x3d"imageContainer" class\x3d"dojoxLightboxContainer" dojoAttachEvent\x3d"onclick: _onImageClick"\x3e\n\t\t\t\x3cimg dojoAttachPoint\x3d"imgNode" src\x3d"${imgUrl}" class\x3d"${imageClass}" alt\x3d"${title}"\x3e\n\t\t\t\x3cdiv class\x3d"dojoxLightboxFooter" dojoAttachPoint\x3d"titleNode"\x3e\n\t\t\t\t\x3cdiv class\x3d"dijitInline LightboxClose" dojoAttachPoint\x3d"closeButtonNode"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"dijitInline LightboxNext" dojoAttachPoint\x3d"nextButtonNode"\x3e\x3c/div\x3e\t\n\t\t\t\t\x3cdiv class\x3d"dijitInline LightboxPrev" dojoAttachPoint\x3d"prevButtonNode"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"dojoxLightboxText" dojoAttachPoint\x3d"titleTextNode"\x3e\x3cspan dojoAttachPoint\x3d"textNode"\x3e${title}\x3c/span\x3e\x3cspan dojoAttachPoint\x3d"groupCount" class\x3d"dojoxLightboxGroupText"\x3e\x3c/span\x3e\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',
"xide/widgets/RichTextWidget":function(){define(["dojo/_base/declare","dojo/on","xide/widgets/WidgetBase","xide/views/TextEditor","dojo/keys","xide/utils"],function(declare,on,WidgetBase,TextEditor,keys,utils){return declare("xide.widgets.RichTextWidget",[WidgetBase],{didLoad:false,minHeight:"300px",editorHeight:"470px",jsonEditorHeight:"270px",aceEditorHeight:"200px",aceEditorOptions:null,aceEditor:null,aceNode:null,useACE:true,templateString:"\x3cdiv class\x3d'jsonEditorWidgetContainer' style\x3d'width: 100%;height:300px'\x3e"+
"\x3cdiv valign\x3d'middle' class\x3d'aceEditorWidget' data-dojo-attach-point\x3d'aceNode' style\x3d'height:100%;padding: 0px;'\x3e\x3c/div\x3e"+"\x3c/div\x3e",editor:null,getValue:function(){if(this.aceEditor)return this.aceEditor.get("value");return this.inherited(arguments)},resize:function(){this.inherited(arguments);if(this.aceEditor)this.aceEditor.resize()},ctlrKeyDown:false,onKeyUp:function(evt){switch(evt.keyCode){case keys.ALT:case keys.CTRL:this.ctlrKeyDown=false;break}},onKey:function(evt){switch(evt.keyCode){case keys.META:case keys.ALT:case keys.SHIFT:case keys.CTRL:this.ctlrKeyDown=
true;setTimeout(function(){thiz.ctlrKeyDown=false},2E3);break}var thiz=this;if(evt.type&&evt.type=="keyup")return this.onKeyUp(evt);var charOrCode=evt.charCode||evt.keyCode;if(this.ctlrKeyDown&&charOrCode===83){evt.preventDefault();if(this.delegate&&this.delegate.onSave)this.delegate.onSave(this.userData,this.getValue())}},setupEventHandlers:function(){var thiz=this;on(this.aceNode,"keydown",function(event){thiz.onKey(event)})},_lastContent:null,_onACEUpdate:function(){var _newValue=this.getValue();
this.setValue(_newValue);this.changed=true;if(this.userData)this.userData.changed=true},_createACEEditor:function(parentNode){var _options={region:"center",value:this.getValue(),style:"margin: 0; padding: 0; position:relative;overflow: auto;height:inherit;width:inherit;",mode:"text",readOnly:false,tabSize:2,softTabs:true,wordWrap:true,showPrintMargin:false,highlightActiveLine:false,fontSize:"13px",showGutter:false,className:"editor-ace ace_editor ace-codebox-dark ace_dark",autoFocus:false};if(_options.value==
-1)_options.value="";var editorPane=new TextEditor(_options,dojo.doc.createElement("div"));this.aceNode.appendChild(editorPane.domNode);editorPane.startup();this.aceEditor=editorPane;this.aceEditor.setOptions();var editor=this.aceEditor.getEditor();var thiz=this;editor.on("change",function(){var _newValue=thiz.getValue();thiz.userData=utils.setCIValueByField(thiz.userData,"value",_newValue);thiz.changed=true;if(thiz.userData)thiz.userData.changed=true});editor.on("blur",function(){thiz.setActive(false);
var cVal=thiz.getValue();if(thiz._lastContent!=cVal)thiz.setValue(cVal)});editor.on("focus",function(){thiz.setActive(true)})},startup:function(){this.inherited(arguments);var value=this.userData?this.userData["value"]:"";try{if(this.useACE&&!this.aceEditor)this._createACEEditor(this.aceNode);else if(value)this.aceNode.innerHTML=value}catch(e){console.error("constructing json editor widget failed : "+e.message)}this.setupEventHandlers()}})})},"xwordpress/main":function(){define("xwordpress/main",
["../dojo/has","require"],function(has,require){has.add("debug",function(global,document,anElement){if(typeof rtConfig!="undefined"&&rtConfig==="debug")return true;return false});if(1)try{require(["xwordpress/Imports/DojoRPCImports","xwordpress/Imports/DojoxImports","xwordpress/Imports/DijitImports","xwordpress/Widgets","xwordpress/Managers","xfile/config","xfile/boot","xfile/factory/model","xwordpress/Views","xwordpress/Widgets","xwordpress/XWordpressCommons","xwordpress/manager/Context","xwordpress/GUIALL",
"dojo/_base/lang","dojo/dom-class","dojo/_base/window","xide/utils","cbtree/Tree","cbtree/extensions/TreeStyling","cbtree/models/FileStoreModel","cbtree/data/FileStore","xfile/widgets/BreadCrumb","xfile/widgets/Toaster","dojo/domReady!"],function(DojoRPCImports,DojoxImports,DjitImports,Widgets,Managers,XFileConfig,XFileBoot,XFFactory,XJViews,XJWidgets,XWordpressCommons,XWordpressContext,GUIALL,lang,domClass,win,utils,Tree,TreeStyling,FileStoreModel,FileStore,BreadCrumb,Toaster){dojo.parser.parse();
var root=dojo.byId("main");var xFileConfiguration=typeof xFileConfig!=="undefined"?xFileConfig:null;if(xFileConfiguration){if(typeof xFileConfigMixin!="undefined")lang.mixin(xFileConfiguration,xFileConfigMixin);var xFileboot=new xfile.boot;xFileboot.initWithConfig(xFileConfiguration)}domClass.add(win.body(),"claro");var footer=dojo.byId("wpfooter");if(footer)utils.destroyWidget(footer);var xasContext=new XWordpressContext(xFileConfiguration);if(xFileConfiguration.mixins)xasContext.doMixins(xFileConfiguration.mixins);
var language=null;if(navigator.appName=="Netscape")language=navigator.language;else language=navigator.browserLanguage;var mainFn=function(){try{xasContext.constructManagers();xasContext.initManagers();xasContext.getLocals("dijit","common");setTimeout(function(){xasContext.getApplication().extraBottomHeight=28;xasContext.getApplication().start(xFileConfiguration)},0)}catch(e){debugger}};mainFn()})}catch(e){debugger}else 0&&console.log("Hello from the server !")})},"xblox/manager/BlockManager":function(){define("xblox/manager/BlockManager",
["dojo/_base/declare","dojo/_base/lang","dojo/has","xide/types","xide/factory","xblox/model/ModelBase","xblox/model/Scope","xide/mixins/ReloadMixin","xide/manager/ManagerBase","xide/mixins/EventedMixin","dojo/store/Memory","dojo/store/Observable","./ClipboardManager","xblox/manager/BlockManagerUI"],function(declare,lang,has,types,factory,ModelBase,Scope,ReloadMixin,ManagerBase,EventedMixin,Memory,Observable,ClipboardManager,BlockManagerUI){var blockManager=declare("xblox.manager.BlockManager",[ManagerBase,
ReloadMixin],{clipboardManager:null,serviceObject:null,getClipboardManager:function(){if(!this.clipboardManager){this.clipboardManager=new ClipboardManager({});this.clipboardManager.init()}return this.clipboardManager},onBlocksReady:function(scope){var blocks=scope.allBlocks();for(var i=0;i<blocks.length;i++){var obj=blocks[i];this.setScriptFunctions(obj,scope,this)}var loadBlocks=scope.getBlocks({group:"On Load"});if(loadBlocks&&loadBlocks.length>0)for(var i=0;i<loadBlocks.length;i++){var loadBlock=
loadBlocks[i];if(loadBlock.onLoad)loadBlock.onLoad()}},setScriptFunctions:function(obj,scope,owner){var thiz=owner;obj.setVariable=function(title,value,save,publish,source){var _variable=this.scope.getVariable(title);if(_variable){_variable.value=value;0&&console.log("setting variable "+title+" to "+value)}else{0&&console.log("no such variable : "+title);return}if(publish!==false)thiz.publish(types.EVENTS.ON_VARIABLE_CHANGED,{item:_variable,scope:scope,driver:obj,owner:thiz,save:save===true,source:source||
types.MESSAGE_SOURCE.BLOX})};obj.getVariable=function(title){var _variable=this.scope.getVariable(title);if(_variable)return _variable.value;return""}},scope:null,scopes:null,_createBlock:null,getScope:function(id,userData,publish){if(!this.scopes)this.scopes={};if(!this.scopes[id]){this.scopes[id]=this.createScope(id);this.scopes[id].userData=userData;if(publish!==false)try{factory.publish(types.EVENTS.ON_SCOPE_CREATED,this.scopes[id])}catch(e){}}return this.scopes[id]},removeScope:function(id){if(!this.scopes)this.scopes=
{};if(this.scopes[id]){this.scopes[id]._destroy();delete this.scopes[id]}return null},createScope:function(id){var varData={identifier:"id",label:"title",items:[]};var blockData={identifier:"id",label:"title",items:[]};var blockStore=Observable(new Memory({data:blockData,getChildren:function(parent,options){if(parent.getChildren)return parent.getChildren(parent);var op=lang.mixin({},options&&options.originalQuery||null,{parentId:parent.id});var res=this.query(op,options);return res},mayHaveChildren:function(parent){if(parent.mayHaveChildren)return parent.mayHaveChildren(parent);
return parent.items!=null&&parent.items.length>0},query:function(query,options){query=query||{};options=options||{};if(!query.parentId&&!options.deep)query.parentId=undefined;return this.queryEngine(query,options)(this.data)}}));var scope=new Scope({variables:[],blocks:[],id:id,owner:this,variableStore:Observable(Memory({data:varData})),blockStore:blockStore,serviceObject:this.serviceObject,config:this.config});ReloadMixin.prototype.mergeFunctions(scope,EventedMixin.prototype);ReloadMixin.prototype.mergeFunctions(scope,
ReloadMixin.prototype);scope.initReload();return scope},init:function(){this.scope={variables:[],blocks:[]};ModelBase.prototype.types=types;ModelBase.prototype.factory=factory;this.getClipboardManager();if(this.onReady)this.onReady()}});if(1)blockManager=blockManager.extend(BlockManagerUI.prototype);return blockManager})},"dojo/dom-construct":function(){define(["exports","./_base/kernel","./sniff","./_base/window","./dom","./dom-attr","./on"],function(exports,dojo,has,win,dom,attr,on){var tagWrap=
{option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},reTag=/<\s*([\w\:]+)/,masterNode={},masterNum=0,masterName="__"+dojo._scopeName+"ToDomId";for(var param in tagWrap)if(tagWrap.hasOwnProperty(param)){var tw=tagWrap[param];tw.pre=param=="option"?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+tw.join("\x3e\x3c")+"\x3e";
tw.post="\x3c/"+tw.reverse().join("\x3e\x3c/")+"\x3e"}function _insertBefore(node,ref){var parent=ref.parentNode;if(parent)parent.insertBefore(node,ref)}function _insertAfter(node,ref){var parent=ref.parentNode;if(parent)if(parent.lastChild==ref)parent.appendChild(node);else parent.insertBefore(node,ref.nextSibling)}exports.toDom=function toDom(frag,doc){doc=doc||win.doc;var masterId=doc[masterName];var _masterNode=masterNode;if(!masterId){doc[masterName]=masterId=++masterNum+"";masterNode[masterId]=
doc.createElement("div")}frag+="";var match=frag.match(reTag),tag=match?match[1].toLowerCase():"",master=masterNode[masterId],wrap,i,fc,df;if(match&&tagWrap[tag]){wrap=tagWrap[tag];master.innerHTML=wrap.pre+frag+wrap.post;for(i=wrap.length;i;--i)master=master.firstChild}else master.innerHTML=frag;if(master.childNodes.length==1)return master.removeChild(master.firstChild);df=doc.createDocumentFragment();while(fc=master.firstChild)df.appendChild(fc);return df};exports.place=function place(node,refNode,
position){refNode=dom.byId(refNode);if(typeof node=="string")node=/^\s*</.test(node)?exports.toDom(node,refNode.ownerDocument):dom.byId(node);if(typeof position=="number"){var cn=refNode.childNodes;if(!cn.length||cn.length<=position)refNode.appendChild(node);else _insertBefore(node,cn[position<0?0:position])}else switch(position){case "before":_insertBefore(node,refNode);break;case "after":_insertAfter(node,refNode);break;case "replace":refNode.parentNode.replaceChild(node,refNode);break;case "only":exports.empty(refNode);
refNode.appendChild(node);break;case "first":if(refNode.firstChild){_insertBefore(node,refNode.firstChild);break}default:refNode.appendChild(node)}return node};exports.create=function create(tag,attrs,refNode,pos){var doc=win.doc;if(refNode){refNode=dom.byId(refNode);doc=refNode.ownerDocument}if(typeof tag=="string")tag=doc.createElement(tag);if(attrs)attr.set(tag,attrs);if(refNode)exports.place(tag,refNode,pos);return tag};var _empty=has("ie")?function(node){try{node.innerHTML=""}catch(e){for(var c;c=
node.lastChild;)_destroy(c,node)}}:function(node){node.innerHTML=""};exports.empty=function empty(node){_empty(dom.byId(node))};function _destroy(node,parent){if(node.firstChild)_empty(node);if(parent)parent.removeChild(node)}exports.destroy=function destroy(node){node=dom.byId(node);if(!node)return;_destroy(node,node.parentNode)}})},"xide/views/BeanView":function(){define(["dojo/_base/declare","xide/layout/ContentPane","xide/mixins/ItemActionMixin"],function(declare,ContentPane,ItemActionMixin){return declare([ContentPane,
ItemActionMixin],{delegate:null,cssClass:"layoutContainer",singleton:false,owner:null,getItemActions:function(){if(this.delegate)return this.delegate.getItemActions?this.delegate.getItemActions():null;return null},onResize:function(){},startup:function(){this.inherited(arguments);var thiz=this;this.on("click",function(){if(thiz.onItemClear)thiz.onItemClear();if(thiz.onItemClick)thiz.onItemClick(null)})}})})},"xblox/model/html/SetCSS":function(){define("xblox/model/html/SetCSS",["dojo/_base/declare",
"dojo/_base/lang","xblox/model/Block","xide/types","xide/mixins/EventedMixin","xblox/model/Targeted","dijit/registry"],function(declare,lang,Block,types,EventedMixin,Targeted,registry){return declare("xblox.model.html.SetCSS",[Block,EventedMixin,Targeted],{name:"Set CSS",file:"",reference:"",references:null,description:"Sets HTML Node CSS",solve:function(scope,settings){this.onSuccess(this,settings)},toText:function(){var result=this.getBlockIcon()+" "+this.name+" :: ";if(this.event)result+=this.event;
return result},getFields:function(){var fields=this.inherited(arguments)||this.getDefaultFields();fields.push(this.utils.createCI("File",types.ECIType.FILE,this.file,{group:"General",dst:"file",value:this.file,intermediateChanges:false,acceptFolders:false,acceptFiles:true,encodeFilePath:false,buildFullPath:true,filePickerOptions:{dialogTitle:"Select CSS File",filePickerMixin:{beanContextName:"CSSFilePicker",persistent:false,globalPanelMixin:{allowLayoutCookies:false}},configMixin:{beanContextName:"CSSFilePicker",
LAYOUT_PRESET:types.LAYOUT_PRESET.BROWSER},defaultStoreOptions:{"fields":1663,"includedFileExtensions":"css","excludedFileExtensions":"*"},startPath:this.file}}));fields.push(this.utils.createCI("Target",types.ECIType.WIDGET_REFERENCE,this.reference,{group:"General",dst:"reference",value:this.reference}));return fields},getBlockIcon:function(){return'\x3cspan class\x3d"fa-paint-brush"\x3e\x3c/span\x3e'},onReferenceChanged:function(newValue,cis){this._destroy();this.reference=newValue;var objects=
this.resolveReference(this.deserialize(newValue))},onChangeField:function(field,newValue,cis){if(field=="file");if(field=="reference")this.onReferenceChanged(newValue,cis);this.inherited(arguments)},activate:function(){this._destroy()},deactivate:function(){this._destroy()},_destroy:function(){}})})},"cbtree/CheckBox":function(){define("cbtree/CheckBox",["dijit/form/CheckBox","dojo/_base/declare","dojo/_base/event","dojo/dom-attr"],function(CheckBox,declare,event,domAttr){return declare([CheckBox],
{baseClass:"cbtreeCheckBox",toggleState:{"mixed":true,"true":false,"false":true},multiState:true,_getCheckedAttr:function(){return this.checked},_onClick:function(evt){if(!this.readOnly&&!this.disabled){this.toggle();return this.onClick(evt)}return event.stop(evt)},_setCheckedAttr:function(checked,priorityChange){var newState=checked,txtState;if(newState!=="mixed"||!this.multiState)newState=newState?true:false;txtState=newState=="mixed"?newState:newState?"true":"false";this._set("checked",newState);
domAttr.set(this.focusNode||this.domNode,"checked",newState);(this.focusNode||this.domNode).setAttribute("aria-checked",txtState);this._handleOnChange(newState,priorityChange);return newState},_setValueAttr:function(newValue){if(typeof newValue=="string"){this.value=newValue;domAttr.set(this.focusNode,"value",newValue)}},toggle:function(){var curState=this.get("checked");var nxtState;if(!this.readOnly&&!this.disabled){nxtState=this.toggleState[curState.toString()];curState=this._setCheckedAttr(nxtState!==
undefined?nxtState:true)}return curState}})})},"xide/manager/PluginManager":function(){define(["dojo/_base/declare","./ManagerBase"],function(declare,ManagerBase){return declare("xide.manager.PluginManager",[ManagerBase],{ctx:null,pluginResources:null,loadPlugins:function(pluginResources){this.pluginResources=pluginResources;0&&console.log("loading plugins",pluginResources);if(this.pluginResources)for(var i=0;i<this.pluginResources.length;i++){var plug=this.pluginResources[i];if(plug.type&&plug.type==
"JS-PLUGIN"&&plug.path)require([plug.path],function(_moduleIn){plug["loaded"]=true});else 0&&console.warn("something wrong with plugin data")}}})})},"xblox/embedded":function(){define("xblox/embedded",["dojo/_base/declare","xblox/types/Types","xide/factory","xide/utils","xide/mixins/ReloadMixin","xide/mixins/EventedMixin","xblox/model/logic/CaseBlock","xblox/model/Block","xblox/model/functions/CallBlock","xblox/model/code/CallMethod","xblox/model/code/RunScript","xblox/model/loops/ForBlock","xblox/model/loops/WhileBlock",
"xblox/model/variables/VariableAssignmentBlock","xblox/model/logic/IfBlock","xblox/model/logic/ElseIfBlock","xblox/model/logic/SwitchBlock","xblox/model/variables/VariableSwitch","xblox/model/events/OnEvent","xblox/manager/BlockManager"],function(){if(!Array.prototype.remove)Array.prototype.remove=function(){var what,a=arguments,L=a.length,ax;while(L&&this.length){what=a[--L];if(this.indexOf==null)break;while((ax=this.indexOf(what))!=-1)this.splice(ax,1)}return this};if(!Array.prototype.swap)Array.prototype.swap=
function(x,y){var b=this[x];this[x]=this[y];this[y]=b;return this};if(typeof String.prototype.startsWith!="function")String.prototype.startsWith=function(str){return this.substring(0,str.length)===str};if(typeof String.prototype.endsWith!="function")String.prototype.endsWith=function(str){return this.substring(this.length-str.length,this.length)===str};if(!Function.prototype.bind)Function.prototype.bind=Function.prototype.bind||function(that){return dojo.hitch(that,this)};if(typeof JSON.decycle!==
"function")JSON.decycle=function decycle(object){var objects=[],paths=[];return function derez(value,path){var i,name,nu;if(typeof value==="object"&&value!==null&&!(value instanceof Boolean)&&!(value instanceof Date)&&!(value instanceof Number)&&!(value instanceof RegExp)&&!(value instanceof String)){for(i=0;i<objects.length;i+=1)if(objects[i]===value)return{$ref:paths[i]};objects.push(value);paths.push(path);if(Object.prototype.toString.apply(value)==="[object Array]"){nu=[];for(i=0;i<value.length;i+=
1)nu[i]=derez(value[i],path+"["+i+"]")}else{nu={};for(name in value)if(Object.prototype.hasOwnProperty.call(value,name))nu[name]=derez(value[name],path+"["+JSON.stringify(name)+"]")}return nu}return value}(object,"$")};if(typeof JSON.retrocycle!=="function")JSON.retrocycle=function retrocycle($){var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;(function rez(value){var i,item,name,path;if(value&&typeof value==="object")if(Object.prototype.toString.apply(value)===
"[object Array]")for(i=0;i<value.length;i+=1){item=value[i];if(item&&typeof item==="object"){path=item.$ref;if(typeof path==="string"&&px.test(path))value[i]=eval(path);else rez(item)}}else for(name in value)if(typeof value[name]==="object"){item=value[name];if(item){path=item.$ref;if(typeof path==="string"&&px.test(path))value[name]=eval(path);else rez(item)}}})($);return $}})},"xfile/boot":function(){define("xfile/boot",["dojo/_base/declare","xide/types","dojo/_base/lang","cbtree/extensions/TreeStyling",
"cbtree/models/FileStoreModel","cbtree/data/FileStore","xfile/widgets/BreadCrumb"],function(declare,types,lang){return declare("xfile.boot",null,{loadDependencies:function(readyCB){require(["cbtree/models/FileStoreModel","cbtree/data/FileStore","cbtree/data/BreadCrumb"],function(FileStoreModel,FileStore,BreadCrumb){types.config.FILES_MODEL_PROTO=FileStoreModel;types.config.FILES_STORE_PROTO=FileStore})},initWithConfig:function(config){if(config){lang.mixin(types.config,config);this.loadDependencies(null);
Array.prototype.remove=function(){var what,a=arguments,L=a.length,ax;while(L&&this.length){what=a[--L];while((ax=this.indexOf(what))!=-1)this.splice(ax,1)}return this}}}})})},"dijit/ToolbarSeparator":function(){define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(declare,dom,_Widget,_TemplatedMixin){return declare("dijit.ToolbarSeparator",[_Widget,_TemplatedMixin],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',
buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false)},isFocusable:function(){return false}})})},"dijit/form/RadioButton":function(){define("dijit/form/RadioButton",["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(declare,CheckBox,_RadioButtonMixin){return declare("dijit.form.RadioButton",[CheckBox,_RadioButtonMixin],{baseClass:"dijitRadio"})})},"dijit/MenuSeparator":function(){require({cache:{"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n'}});
define("dijit/MenuSeparator",["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(declare,dom,_WidgetBase,_TemplatedMixin,_Contained,template){return declare("dijit.MenuSeparator",[_WidgetBase,_TemplatedMixin,_Contained],{templateString:template,buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false)},isFocusable:function(){return false}})})},"dijit/form/ToggleButton":function(){define("dijit/form/ToggleButton",
["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(declare,kernel,Button,_ToggleButtonMixin){return declare("dijit.form.ToggleButton",[Button,_ToggleButtonMixin],{baseClass:"dijitToggleButton",setChecked:function(checked){kernel.deprecated("setChecked("+checked+") is deprecated. Use set('checked',"+checked+") instead.","","2.0");this.set("checked",checked)}})})},"dojo/dom-prop":function(){define(["exports","./_base/kernel","./sniff","./_base/lang","./dom","./dom-style",
"./dom-construct","./_base/connect"],function(exports,dojo,has,lang,dom,style,ctr,conn){var _evtHdlrMap={},_ctr=0,_attrId=dojo._scopeName+"attrid";exports.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};exports.get=function getProp(node,name){node=dom.byId(node);var lc=name.toLowerCase(),propName=exports.names[lc]||name;return node[propName]};exports.set=function setProp(node,name,
value){node=dom.byId(node);var l=arguments.length;if(l==2&&typeof name!="string"){for(var x in name)exports.set(node,x,name[x]);return node}var lc=name.toLowerCase(),propName=exports.names[lc]||name;if(propName=="style"&&typeof value!="string"){style.set(node,value);return node}if(propName=="innerHTML"){if(has("ie")&&node.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}){ctr.empty(node);node.appendChild(ctr.toDom(value,node.ownerDocument))}else node[propName]=
value;return node}if(lang.isFunction(value)){var attrId=node[_attrId];if(!attrId){attrId=_ctr++;node[_attrId]=attrId}if(!_evtHdlrMap[attrId])_evtHdlrMap[attrId]={};var h=_evtHdlrMap[attrId][propName];if(h)conn.disconnect(h);else try{delete node[propName]}catch(e){}if(value)_evtHdlrMap[attrId][propName]=conn.connect(node,propName,value);else node[propName]=null;return node}node[propName]=value;return node}})},"dojox/image/Lightbox":function(){require({cache:{"url:dojox/image/resources/Lightbox.html":'\x3cdiv class\x3d"dojoxLightbox" dojoAttachPoint\x3d"containerNode"\x3e\n\t\x3cdiv style\x3d"position:relative"\x3e\n\t\t\x3cdiv dojoAttachPoint\x3d"imageContainer" class\x3d"dojoxLightboxContainer" dojoAttachEvent\x3d"onclick: _onImageClick"\x3e\n\t\t\t\x3cimg dojoAttachPoint\x3d"imgNode" src\x3d"${imgUrl}" class\x3d"${imageClass}" alt\x3d"${title}"\x3e\n\t\t\t\x3cdiv class\x3d"dojoxLightboxFooter" dojoAttachPoint\x3d"titleNode"\x3e\n\t\t\t\t\x3cdiv class\x3d"dijitInline LightboxClose" dojoAttachPoint\x3d"closeButtonNode"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"dijitInline LightboxNext" dojoAttachPoint\x3d"nextButtonNode"\x3e\x3c/div\x3e\t\n\t\t\t\t\x3cdiv class\x3d"dijitInline LightboxPrev" dojoAttachPoint\x3d"prevButtonNode"\x3e\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"dojoxLightboxText" dojoAttachPoint\x3d"titleTextNode"\x3e\x3cspan dojoAttachPoint\x3d"textNode"\x3e${title}\x3c/span\x3e\x3cspan dojoAttachPoint\x3d"groupCount" class\x3d"dojoxLightboxGroupText"\x3e\x3c/span\x3e\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e'}});
define("dojox/image/Lightbox",["dojo","dijit","dojox","dojo/text!./resources/Lightbox.html","dijit/Dialog","dojox/fx/_base"],function(dojo,dijit,dojox,template){dojo.experimental("dojox.image.Lightbox");dojo.getObject("image",true,dojox);var Lightbox=dojo.declare("dojox.image.Lightbox",dijit._Widget,{group:"",title:"",href:"",duration:500,modal:false,_allowPassthru:false,_attachedDialog:null,startup:function(){this.inherited(arguments);var tmp=dijit.byId("dojoxLightboxDialog");if(tmp)this._attachedDialog=
tmp;else{this._attachedDialog=new dojox.image.LightboxDialog({id:"dojoxLightboxDialog"});this._attachedDialog.startup()}if(!this.store){this._addSelf();this.connect(this.domNode,"onclick","_handleClick")}},_addSelf:function(){this._attachedDialog.addImage({href:this.href,title:this.title},this.group||null)},_handleClick:function(e){if(!this._allowPassthru)e.preventDefault();else return;this.show()},show:function(){this._attachedDialog.show(this)},hide:function(){this._attachedDialog.hide()},disable:function(){this._allowPassthru=
true},enable:function(){this._allowPassthru=false},onClick:function(){},destroy:function(){this._attachedDialog.removeImage(this);this.inherited(arguments)}});Lightbox.LightboxDialog=dojo.declare("dojox.image.LightboxDialog",dijit.Dialog,{title:"",inGroup:null,imgUrl:dijit._Widget.prototype._blankGif,errorMessage:"Image not found.",adjust:true,modal:false,imageClass:"dojoxLightboxImage",errorImg:dojo.moduleUrl("dojox.image","resources/images/warning.png"),templateString:template,constructor:function(args){this._groups=
this._groups||args&&args._groups||{XnoGroupX:[]}},startup:function(){this.inherited(arguments);this._animConnects=[];this.connect(this.nextButtonNode,"onclick","_nextImage");this.connect(this.prevButtonNode,"onclick","_prevImage");this.connect(this.closeButtonNode,"onclick","hide");this._makeAnims();this._vp=dojo.window.getBox();return this},show:function(groupData){var _t=this;this._lastGroup=groupData;if(!_t.open){_t.inherited(arguments);_t._modalconnects.push(dojo.connect(dojo.global,"onscroll",
this,"_position"),dojo.connect(dojo.global,"onresize",this,"_position"),dojo.connect(dojo.body(),"onkeypress",this,"_handleKey"));if(!groupData.modal)_t._modalconnects.push(dojo.connect(dijit._underlay.domNode,"onclick",this,"onCancel"))}if(this._wasStyled){var tmpImg=dojo.create("img",{className:_t.imageClass},_t.imgNode,"after");dojo.destroy(_t.imgNode);_t.imgNode=tmpImg;_t._makeAnims();_t._wasStyled=false}dojo.style(_t.imgNode,"opacity","0");dojo.style(_t.titleNode,"opacity","0");var src=groupData.href;
if(groupData.group&&groupData!=="XnoGroupX"||_t.inGroup){if(!_t.inGroup){_t.inGroup=_t._groups[groupData.group];dojo.forEach(_t.inGroup,function(g,i){if(g.href==groupData.href)_t._index=i})}if(!_t._index){_t._index=0;var sr=_t.inGroup[_t._index];src=sr&&sr.href||_t.errorImg}_t.groupCount.innerHTML=" ("+(_t._index+1)+" of "+Math.max(1,_t.inGroup.length)+")";_t.prevButtonNode.style.visibility="visible";_t.nextButtonNode.style.visibility="visible"}else{_t.groupCount.innerHTML="";_t.prevButtonNode.style.visibility=
"hidden";_t.nextButtonNode.style.visibility="hidden"}if(!groupData.leaveTitle)_t.textNode.innerHTML=groupData.title;_t._ready(src)},_ready:function(src){var _t=this;_t._imgError=dojo.connect(_t.imgNode,"error",_t,function(){dojo.disconnect(_t._imgError);_t.imgNode.src=_t.errorImg;_t.textNode.innerHTML=_t.errorMessage});_t._imgConnect=dojo.connect(_t.imgNode,"load",_t,function(e){_t.resizeTo({w:_t.imgNode.width,h:_t.imgNode.height,duration:_t.duration});dojo.disconnect(_t._imgConnect);if(_t._imgError)dojo.disconnect(_t._imgError)});
_t.imgNode.src=src},_nextImage:function(){if(!this.inGroup)return;if(this._index+1<this.inGroup.length)this._index++;else this._index=0;this._loadImage()},_prevImage:function(){if(this.inGroup){if(this._index==0)this._index=this.inGroup.length-1;else this._index--;this._loadImage()}},_loadImage:function(){this._loadingAnim.play(1)},_prepNodes:function(){this._imageReady=false;if(this.inGroup&&this.inGroup[this._index])this.show({href:this.inGroup[this._index].href,title:this.inGroup[this._index].title});
else this.show({title:this.errorMessage,href:this.errorImg})},_calcTitleSize:function(){var sizes=dojo.map(dojo.query("\x3e *",this.titleNode).position(),function(s){return s.h});return{h:Math.max.apply(Math,sizes)}},resizeTo:function(size,forceTitle){var adjustSize=dojo.boxModel=="border-box"?dojo._getBorderExtents(this.domNode).w:0,titleSize=forceTitle||this._calcTitleSize();this._lastTitleSize=titleSize;if(this.adjust&&(size.h+titleSize.h+adjustSize+80>this._vp.h||size.w+adjustSize+60>this._vp.w)){this._lastSize=
size;size=this._scaleToFit(size)}this._currentSize=size;var _sizeAnim=dojox.fx.sizeTo({node:this.containerNode,duration:size.duration||this.duration,width:size.w+adjustSize,height:size.h+titleSize.h+adjustSize});this.connect(_sizeAnim,"onEnd","_showImage");_sizeAnim.play(15)},_scaleToFit:function(size){var ns={},nvp={w:this._vp.w-80,h:this._vp.h-60-this._lastTitleSize.h};var viewportAspect=nvp.w/nvp.h,imageAspect=size.w/size.h;if(imageAspect>=viewportAspect){ns.h=nvp.w/imageAspect;ns.w=nvp.w}else{ns.w=
imageAspect*nvp.h;ns.h=nvp.h}this._wasStyled=true;this._setImageSize(ns);ns.duration=size.duration;return ns},_setImageSize:function(size){var s=this.imgNode;s.height=size.h;s.width=size.w},_size:function(){},_position:function(e){this._vp=dojo.window.getBox();this.inherited(arguments);if(e&&e.type=="resize")if(this._wasStyled){this._setImageSize(this._lastSize);this.resizeTo(this._lastSize)}else if(this.imgNode.height+80>this._vp.h||this.imgNode.width+60>this._vp.h)this.resizeTo({w:this.imgNode.width,
h:this.imgNode.height})},_showImage:function(){this._showImageAnim.play(1)},_showNav:function(){var titleSizeNow=dojo.marginBox(this.titleNode);if(titleSizeNow.h>this._lastTitleSize.h)this.resizeTo(this._wasStyled?this._lastSize:this._currentSize,titleSizeNow);else this._showNavAnim.play(1)},hide:function(){dojo.fadeOut({node:this.titleNode,duration:200,onEnd:dojo.hitch(this,function(){this.imgNode.src=this._blankGif})}).play(5);this.inherited(arguments);this.inGroup=null;this._index=null},addImage:function(child,
group){var g=group;if(!child.href)return;if(g){if(!this._groups[g])this._groups[g]=[];this._groups[g].push(child)}else this._groups["XnoGroupX"].push(child)},removeImage:function(child){var g=child.group||"XnoGroupX";dojo.every(this._groups[g],function(item,i,ar){if(item.href==child.href){ar.splice(i,1);return false}return true})},removeGroup:function(group){if(this._groups[group])this._groups[group]=[]},_handleKey:function(e){if(!this.open)return;var dk=dojo.keys;switch(e.charOrCode){case dk.ESCAPE:this.hide();
break;case dk.DOWN_ARROW:case dk.RIGHT_ARROW:case 78:this._nextImage();break;case dk.UP_ARROW:case dk.LEFT_ARROW:case 80:this._prevImage();break}},_makeAnims:function(){dojo.forEach(this._animConnects,dojo.disconnect);this._animConnects=[];this._showImageAnim=dojo.fadeIn({node:this.imgNode,duration:this.duration});this._animConnects.push(dojo.connect(this._showImageAnim,"onEnd",this,"_showNav"));this._loadingAnim=dojo.fx.combine([dojo.fadeOut({node:this.imgNode,duration:175}),dojo.fadeOut({node:this.titleNode,
duration:175})]);this._animConnects.push(dojo.connect(this._loadingAnim,"onEnd",this,"_prepNodes"));this._showNavAnim=dojo.fadeIn({node:this.titleNode,duration:225})},onClick:function(groupData){},_onImageClick:function(e){if(e&&e.target==this.imgNode){this.onClick(this._lastGroup);if(this._lastGroup.declaredClass)this._lastGroup.onClick(this._lastGroup)}}});return Lightbox})},"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\x3e\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\ttabIndex\x3d"-1" role\x3d"presentation" data-dojo-attach-point\x3d"valueNode"\n/\x3e\x3c/span\x3e\n',
"xwordpress/XWordpressCommons":function(){define("xwordpress/XWordpressCommons",["dojo/_base/declare","xide/utils","xide/types","xide/types/Types","xide/utils/StringUtils","xide/utils/HTMLUtils","xide/utils/CIUtils","xide/utils/StoreUtils","xide/utils/WidgetUtils","xide/factory/Objects","xide/factory/Events","dojo/data/ObjectStore","xfile/types/Types","xfile/config","xstyle/core/load-css","put-selector/put","cbtree/data/FileStore","cbtree/data/BreadCrumb"],function(declare){return declare("xwordpress.XWordpressCommons",
null,{})})},"dgrid/extensions/ColumnReorder":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/on","dojo/query","dojo/dnd/Source","put-selector/put","dojo/has!debug?xstyle/css!../css/extensions/ColumnReorder.css"],function(lang,declare,arrayUtil,on,query,DndSource,put){var dndTypeRx=/(\d+)(?:-(\d+))?$/;function getMatchingSubRow(grid,match){var hasColumnSets=match[2],rowOrSet=grid[hasColumnSets?"columnSets":"subRows"][match[1]];return hasColumnSets?rowOrSet[match[2]]:
rowOrSet}function setMatchingSubRow(grid,match,subRow){if(match[2])grid.columnSets[match[1]][match[2]]=subRow;else grid.subRows[match[1]]=subRow}function makeDndTypePrefix(gridId){return"dgrid-"+gridId+"-"}function stripIdPrefix(gridId,dndtype){return dndtype.slice(makeDndTypePrefix(gridId).length)}var ColumnDndSource=declare(DndSource,{copyState:function(){return false},checkAcceptance:function(source,nodes){return source==this},_legalMouseDown:function(evt){return evt.target.className.indexOf("dgrid-resize-handle")>
-1?false:this.inherited(arguments)},onDropInternal:function(nodes){var grid=this.grid,match=dndTypeRx.exec(stripIdPrefix(grid.id,nodes[0].getAttribute("dndType"))),structureProperty=match[2]?"columnSets":"subRows",oldSubRow=getMatchingSubRow(grid,match),columns=grid.columns;this.inherited(arguments);if(!match)return;setTimeout(function(){var newSubRow=arrayUtil.map(nodes[0].parentNode.childNodes,function(col){return columns[col.columnId]}),eventObject;setMatchingSubRow(grid,match,newSubRow);eventObject=
{grid:grid,subRow:newSubRow,column:columns[nodes[0].columnId],bubbles:true,cancelable:true,parentType:"dnd"};eventObject[structureProperty]=grid[structureProperty];if(on.emit(grid.domNode,"dgrid-columnreorder",eventObject))grid.set(structureProperty,grid[structureProperty]);else{setMatchingSubRow(grid,match,oldSubRow);grid.renderHeader();if(this._sort&&this._sort.length)this.updateSortArrow(this._sort)}},0)}});var ColumnReorder=declare(null,{columnDndConstructor:ColumnDndSource,_initSubRowDnd:function(subRow,
dndType){var dndParent,c,len,col,th;for(c=0,len=subRow.length;c<len;c++){col=subRow[c];if(col.reorderable===false)continue;th=col.headerNode;if(th.tagName!="TH")th=th.parentNode;put(th,".dojoDndItem[dndType\x3d"+dndType+"]");if(!dndParent)dndParent=th.parentNode}if(dndParent)this._columnDndSources.push(new this.columnDndConstructor(dndParent,{horizontal:true,grid:this}))},renderHeader:function(){var dndTypePrefix=makeDndTypePrefix(this.id),csLength,cs;this.inherited(arguments);this._columnDndSources=
[];if(this.columnSets)for(cs=0,csLength=this.columnSets.length;cs<csLength;cs++)arrayUtil.forEach(this.columnSets[cs],function(subRow,sr){this._initSubRowDnd(subRow,dndTypePrefix+cs+"-"+sr)},this);else arrayUtil.forEach(this.subRows,function(subRow,sr){this._initSubRowDnd(subRow,dndTypePrefix+sr)},this)},_destroyColumns:function(){if(this._columnDndSources)arrayUtil.forEach(this._columnDndSources,function(source){source.destroy()});this.inherited(arguments)}});ColumnReorder.ColumnDndSource=ColumnDndSource;
return ColumnReorder})},"dgrid/_StoreMixin":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/on","dojo/aspect","put-selector/put"],function(kernel,declare,lang,Deferred,listen,aspect,put){function noop(value){return value}function emitError(err){if(typeof err!=="object")err=new Error(err);else if(err.dojoType==="cancel")return;err.grid=this;if(listen.emit(this.domNode,"dgrid-error",{grid:this,error:err,cancelable:true,bubbles:true}))console.error(err)}
return declare(null,{store:null,query:null,queryOptions:null,getBeforePut:true,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};aspect.before(this,"configStructure",lang.hitch(this,function(){this._columnsWithSet={}}))},postCreate:function(){this.inherited(arguments);if(this.store)this._updateNotifyHandle(this.store)},destroy:function(){this.inherited(arguments);if(this._notifyHandle)this._notifyHandle.remove()},
_configColumn:function(column){if(column.set)this._columnsWithSet[column.field]=column;this.inherited(arguments)},_updateNotifyHandle:function(store){if(this._notifyHandle){this._notifyHandle.remove();delete this._notifyHandle}if(store&&typeof store.notify==="function"){this._notifyHandle=aspect.after(store,"notify",lang.hitch(this,"_onNotify"),true);var sort=this.get("sort");if(!sort||!sort.length)0&&console.warn("Observable store detected, but no sort order specified. "+"You may experience quirks when adding/updating items.  "+
"These can be resolved by setting a sort order on the list or grid.")}},_setStore:function(store,query,queryOptions){this._updateNotifyHandle(store);this.store=store;this.dirty={};this.set("query",query,queryOptions)},_setQuery:function(query,queryOptions){var sort=queryOptions&&queryOptions.sort;this.query=query!==undefined?query:this.query;this.queryOptions=queryOptions||this.queryOptions;sort?this.set("sort",sort):this.refresh()},setStore:function(store,query,queryOptions){kernel.deprecated("setStore(...)",
'use set("store", ...) instead',"dgrid 0.4");this.set("store",store,query,queryOptions)},setQuery:function(query,queryOptions){kernel.deprecated("setQuery(...)",'use set("query", ...) instead',"dgrid 0.4");this.set("query",query,queryOptions)},_getQueryOptions:function(){var options=lang.delegate(this.queryOptions,{});if(typeof this._sort==="function"||this._sort.length)options.sort=this._sort;return options},_getQuery:function(){var q=this.query;return typeof q=="object"&&q!=null?lang.delegate(q,
{}):q},_setSort:function(property,descending){if(this.store)this._lastCollection=null;this.inherited(arguments)},_onNotify:function(object,existingId){this.inherited(arguments);if(object&&this._numObservers<1)this.refresh({keepScrollPosition:true})},insertRow:function(object,parent,beforeNode,i,options){var store=this.store,dirty=this.dirty,id=store&&store.getIdentity(object),dirtyObj;if(id in dirty&&!(id in this._updating))dirtyObj=dirty[id];if(dirtyObj)object=lang.delegate(object,dirtyObj);return this.inherited(arguments)},
updateDirty:function(id,field,value){var dirty=this.dirty,dirtyObj=dirty[id];if(!dirtyObj)dirtyObj=dirty[id]={};dirtyObj[field]=value},setDirty:function(id,field,value){kernel.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4");this.updateDirty(id,field,value)},save:function(){var self=this,store=this.store,dirty=this.dirty,dfd=new Deferred,promise=dfd.promise,getFunc=function(id){var data;return self.getBeforePut||!(data=self.row(id).data)?function(){return store.get(id)}:function(){return data}};
function putter(id,dirtyObj){return function(object){var colsWithSet=self._columnsWithSet,updating=self._updating,key,data;if(typeof object.set==="function")object.set(dirtyObj);else for(key in dirtyObj)object[key]=dirtyObj[key];for(key in colsWithSet){data=colsWithSet[key].set(object);if(data!==undefined)object[key]=data}updating[id]=true;return Deferred.when(store.put(object),function(){delete dirty[id];delete updating[id]})}}for(var id in dirty){var put=putter(id,dirty[id]);promise=promise.then(getFunc(id)).then(put)}dfd.resolve();
return promise},revert:function(){this.dirty={};this.refresh()},_trackError:function(func){var result;if(typeof func=="string")func=lang.hitch(this,func);try{result=func()}catch(err){emitError.call(this,err)}return Deferred.when(result,noop,lang.hitch(this,emitError))},newRow:function(){var row=this.inherited(arguments);if(this.noDataNode){put(this.noDataNode,"!");delete this.noDataNode}return row},removeRow:function(rowElement,justCleanup){var row={element:rowElement};if(!justCleanup&&this.noDataMessage&&
this.up(row).element===rowElement&&this.down(row).element===rowElement){this.noDataNode=put(this.contentNode,"div.dgrid-no-data");this.noDataNode.innerHTML=this.noDataMessage}return this.inherited(arguments)}})})},"cbtree/errors/createError":function(){define("cbtree/errors/createError",["dojo/_base/lang","dojo/request","../util/shim/Array"],function(lang,request){var C_UNKNOWN={text:"Undefined error",code:0};var cacheURL={};var errorNames={};function addMessage(messages){function validMsg(msgObj){var key,
value;for(key in msgObj)if(/\W/.test(key)||!(value=msgObj[key])||!value.text)return false;return true}switch(Object.prototype.toString.call(messages)){case "[object Array]":messages.forEach(addMessage);break;case "[object Object]":if(validMsg(messages))errorNames=lang.mixin(errorNames,messages);break}}function getMessage(type,text){var abbr=(type||"").replace(/Error$/,"");var base=abbr+"Error";var msg={type:base,text:"",code:0};if(abbr)msg=lang.mixin(msg,errorNames[base]||errorNames[abbr]||C_UNKNOWN);
msg.text=text||msg.text;return msg}function createError(module,errors){function cbtError(type,method,message){var path=module+(method?prefix+method+"()":"");var msgObj;if(type instanceof Error){for(var prop in type)if(type.hasOwnProperty(prop))this[prop]=type[prop];msgObj={type:type.name,code:type.code||0,text:message||type.message}}else msgObj=getMessage(type,message);if(arguments.length>2){var args=Array.prototype.slice.call(arguments,3);msgObj.text=msgObj.text.replace(/\%\{(\d+)\}/g,function(token,
argIdx){return args[argIdx]!=undefined?args[argIdx]:token})}this.message=(path.length?path+": ":"")+msgObj.text;this.code=msgObj.code;this.name=msgObj.type}var prefix=module?"::":"";var module=module||"";addMessage(errors||{});cbtError.prototype=new Error;cbtError.prototype.constructor=cbtError;return cbtError}createError.normalize=function(resource,toAbsMid){var paths=resource.split("!"),paths=paths.map(function(path){return/^\./.test(path)?toAbsMid(path):path});return paths.join("!")};createError.load=
function(resource,require,loaded){function resourceDone(){if(--rscCount==0)loaded(createError)}var resources=resource.split("!"),rscCount=resources.length;resources.forEach(function(url){url=require.toUrl(url);if(!(url in cacheURL)){request(url,{handleAs:"json"}).then(function(response){addMessage(response);resourceDone()},function(err){0&&console.log(err);resourceDone()});cacheURL[url]=true}else resourceDone()})};return createError})},"xide/views/_ProgressIndicatorMixin":function(){define(["dojo/_base/declare",
"dojo/dom-class","dojo/_base/window"],function(declare,domClass,win){return declare("xide.views._ProgressIndicatorMixin",null,{hasProgress:true,_progressNode:null,_progressTemplate:"",showStandBy:function(dstNode,show,timeout){if(show){if(dstNode&&!dstNode.standby){var standbyWidget=new dojox.widget.Standby({target:dstNode,color:"white",opacity:0.5},dojo.doc.createElement("div"));dojo.place(standbyWidget.domNode,win.body(),"last");standbyWidget.startup();dstNode.standby=standbyWidget}else standbyWidget=
dstNode.standby;if(timeout>=0)setTimeout(function(){standbyWidget.hide()},timeout);standbyWidget.show();return standbyWidget}else if(dstNode&&dstNode.standby)dstNode.standby.hide();return null},showProgress:function(show,dstNode){if(show===true)domClass.add(dstNode,"loading");else domClass.remove(dstNode,"loading")},startup:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define("dijit/_DialogMixin",["dojo/_base/declare","./a11y"],function(declare,a11y){return declare("dijit._DialogMixin",
null,{execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var elems=a11y._getTabNavigable(this.containerNode);this._firstFocusItem=elems.lowest||elems.first||this.closeButtonNode||this.domNode;this._lastFocusItem=elems.last||elems.highest||this._firstFocusItem}})})},"xfile/manager/NotificationManager":function(){define("xfile/manager/NotificationManager",["dojo/_base/declare","dojo/_base/lang",
"xide/factory","xide/types","xide/manager/ManagerBase","dojox/widget/Toaster"],function(declare,lang,factory,types,ManagerBase,Toaster){return declare("xfile.manager.NotificationManager",[ManagerBase],{onError:function(err){var mess="";if(err&&err&&err.error&&err.error.message)mess=err.error.message;else if(err&&lang.isString(err))mess=err;else if(err&&lang.isString(err.message))mess=err.message;dojo.publish("errorMessageTopic",[{message:mess,type:"error",duration:5500}])},onStatus:function(err){var mess=
"";if(err.did!=null)return;err.did=true;if(err&&err&&err.message)mess=err.message;else if(err&&lang.isString(err))mess=err;dojo.publish("errorMessageTopic",[{message:mess,type:"message",duration:2550}])},init:function(){factory.subscribe(types.EVENTS.ERROR,this.onError,this);factory.subscribe(types.EVENTS.STATUS,this.onStatus,this)}})})},"dojox/json/schema":function(){define("dojox/json/schema",["dojo/_base/kernel","dojox","dojo/_base/array"],function(dojo,dojox){dojo.getObject("json.schema",true,
dojox);dojox.json.schema.validate=function(instance,schema){return this._validate(instance,schema,false)};dojox.json.schema.checkPropertyChange=function(value,schema,property){return this._validate(value,schema,property||"property")};dojox.json.schema.mustBeValid=function(result){if(!result.valid)throw new TypeError(dojo.map(result.errors,function(error){return"for property "+error.property+": "+error.message}).join(", "));};dojox.json.schema._validate=function(instance,schema,_changing){var errors=
[];function checkProp(value,schema,path,i){var l;path+=path?typeof i=="number"?"["+i+"]":typeof i=="undefined"?"":"."+i:i;function addError(message){errors.push({property:path,message:message})}if((typeof schema!="object"||schema instanceof Array)&&(path||typeof schema!="function")){if(typeof schema=="function"){if(!(Object(value)instanceof schema))addError("is not an instance of the class/constructor "+schema.name)}else if(schema)addError("Invalid schema/property definition "+schema);return null}if(_changing&&
schema.readonly)addError("is a readonly field, it can not be changed");if(schema["extends"])checkProp(value,schema["extends"],path,i);function checkType(type,value){if(type){if(typeof type=="string"&&type!="any"&&(type=="null"?value!==null:typeof value!=type)&&!(value instanceof Array&&type=="array")&&!(type=="integer"&&value%1===0))return[{property:path,message:typeof value+" value found, but a "+type+" is required"}];if(type instanceof Array){var unionErrors=[];for(var j=0;j<type.length;j++)if(!(unionErrors=
checkType(type[j],value)).length)break;if(unionErrors.length)return unionErrors}else if(typeof type=="object"){var priorErrors=errors;errors=[];checkProp(value,type,path);var theseErrors=errors;errors=priorErrors;return theseErrors}}return[]}if(value===undefined){if(!schema.optional)addError("is missing and it is not optional")}else{errors=errors.concat(checkType(schema.type,value));if(schema.disallow&&!checkType(schema.disallow,value).length)addError(" disallowed value was matched");if(value!==null){if(value instanceof
Array){if(schema.items)if(schema.items instanceof Array)for(i=0,l=value.length;i<l;i++)errors.concat(checkProp(value[i],schema.items[i],path,i));else for(i=0,l=value.length;i<l;i++)errors.concat(checkProp(value[i],schema.items,path,i));if(schema.minItems&&value.length<schema.minItems)addError("There must be a minimum of "+schema.minItems+" in the array");if(schema.maxItems&&value.length>schema.maxItems)addError("There must be a maximum of "+schema.maxItems+" in the array")}else if(schema.properties)errors.concat(checkObj(value,
schema.properties,path,schema.additionalProperties));if(schema.pattern&&typeof value=="string"&&!value.match(schema.pattern))addError("does not match the regex pattern "+schema.pattern);if(schema.maxLength&&typeof value=="string"&&value.length>schema.maxLength)addError("may only be "+schema.maxLength+" characters long");if(schema.minLength&&typeof value=="string"&&value.length<schema.minLength)addError("must be at least "+schema.minLength+" characters long");if(typeof schema.minimum!==undefined&&
typeof value==typeof schema.minimum&&schema.minimum>value)addError("must have a minimum value of "+schema.minimum);if(typeof schema.maximum!==undefined&&typeof value==typeof schema.maximum&&schema.maximum<value)addError("must have a maximum value of "+schema.maximum);if(schema["enum"]){var enumer=schema["enum"];l=enumer.length;var found;for(var j=0;j<l;j++)if(enumer[j]===value){found=1;break}if(!found)addError("does not have a value in the enumeration "+enumer.join(", "))}if(typeof schema.maxDecimal==
"number"&&value.toString().match(new RegExp("\\.[0-9]{"+(schema.maxDecimal+1)+",}")))addError("may only have "+schema.maxDecimal+" digits of decimal places")}}return null}function checkObj(instance,objTypeDef,path,additionalProp){if(typeof objTypeDef=="object"){if(typeof instance!="object"||instance instanceof Array)errors.push({property:path,message:"an object is required"});for(var i in objTypeDef)if(objTypeDef.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")){var value=instance[i];var propDef=
objTypeDef[i];checkProp(value,propDef,path,i)}}for(i in instance){if(instance.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&objTypeDef&&!objTypeDef[i]&&additionalProp===false)errors.push({property:path,message:typeof value+"The property "+i+" is not defined in the schema and the schema does not allow additional properties"});var requires=objTypeDef&&objTypeDef[i]&&objTypeDef[i].requires;if(requires&&!(requires in instance))errors.push({property:path,message:"the presence of the property "+
i+" requires that "+requires+" also be present"});value=instance[i];if(objTypeDef&&typeof objTypeDef=="object"&&!(i in objTypeDef))checkProp(value,additionalProp,path,i);if(!_changing&&value&&value.$schema)errors=errors.concat(checkProp(value,value.$schema,path,i))}return errors}if(schema)checkProp(instance,schema,"",_changing||"");if(!_changing&&instance&&instance.$schema)checkProp(instance,instance.$schema,"","");return{valid:!errors.length,errors:errors}};return dojox.json.schema})},"dijit/_Widget":function(){define("dijit/_Widget",
["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(aspect,config,connect,declare,has,kernel,lang,query,ready,registry,_WidgetBase,_OnDijitClickMixin,_FocusMixin){function connectToDomNode(){}function aroundAdvice(originalConnect){return function(obj,event,scope,method){if(obj&&typeof event=="string"&&
obj[event]==connectToDomNode)return obj.on(event.substring(2).toLowerCase(),lang.hitch(scope,method));return originalConnect.apply(connect,arguments)}}aspect.around(connect,"connect",aroundAdvice);if(kernel.connect)aspect.around(kernel,"connect",aroundAdvice);var _Widget=declare("dijit._Widget",[_WidgetBase,_OnDijitClickMixin,_FocusMixin],{onClick:connectToDomNode,onDblClick:connectToDomNode,onKeyDown:connectToDomNode,onKeyPress:connectToDomNode,onKeyUp:connectToDomNode,onMouseDown:connectToDomNode,
onMouseMove:connectToDomNode,onMouseOut:connectToDomNode,onMouseOver:connectToDomNode,onMouseLeave:connectToDomNode,onMouseEnter:connectToDomNode,onMouseUp:connectToDomNode,constructor:function(params){this._toConnect={};for(var name in params)if(this[name]===connectToDomNode){this._toConnect[name.replace(/^on/,"").toLowerCase()]=params[name];delete params[name]}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect)this.on(name,this._toConnect[name]);delete this._toConnect},
on:function(type,func){if(this[this._onMap(type)]===connectToDomNode)return connect.connect(this.domNode,type.toLowerCase(),this,func);return this.inherited(arguments)},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val)},setAttribute:function(attr,value){kernel.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,value)},attr:function(name,value){if(config.isDebug){var alreadyCalledHash=arguments.callee._ach||(arguments.callee._ach=
{}),caller=(arguments.callee.caller||"unknown caller").toString();if(!alreadyCalledHash[caller]){kernel.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+caller,"","2.0");alreadyCalledHash[caller]=true}}var args=arguments.length;if(args>=2||typeof name==="object")return this.set.apply(this,arguments);else return this.get(name)},getDescendants:function(){kernel.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.",
"","2.0");return this.containerNode?query("[widgetId]",this.containerNode).map(registry.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return true}});if(has("dijit-legacy-requires"))ready(0,function(){var requires=["dijit/_base"];require(requires)});return _Widget})},"dojox/fx":function(){define("dojox/fx",["./fx/_base"],function(DojoxFx){return DojoxFx})},"dijit/form/_SearchMixin":function(){define("dijit/form/_SearchMixin",["dojo/_base/declare",
"dojo/keys","dojo/_base/lang","dojo/query","dojo/string","dojo/when","../registry"],function(declare,keys,lang,query,string,when,registry){return declare("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_patternToRegExp:function(pattern){return new RegExp("^"+pattern.replace(/(\\.)|(\*)|(\?)|\W/g,function(str,literal,star,question){return star?".*":question?".":literal?literal:"\\"+str})+"$",
this.ignoreCase?"mi":"m")},_abortQuery:function(){if(this.searchTimer)this.searchTimer=this.searchTimer.remove();if(this._queryDeferHandle)this._queryDeferHandle=this._queryDeferHandle.remove();if(this._fetchHandle){if(this._fetchHandle.abort){this._cancelingQuery=true;this._fetchHandle.abort();this._cancelingQuery=false}if(this._fetchHandle.cancel){this._cancelingQuery=true;this._fetchHandle.cancel();this._cancelingQuery=false}this._fetchHandle=null}},_processInput:function(evt){if(this.disabled||
this.readOnly)return;var key=evt.charOrCode;if("type"in evt&&evt.type.substring(0,3)=="key"&&(evt.altKey||(evt.ctrlKey||evt.metaKey)&&key!="x"&&key!="v"||key==keys.SHIFT))return;var doSearch=false;this._prev_key_backspace=false;switch(key){case keys.DELETE:case keys.BACKSPACE:this._prev_key_backspace=true;this._maskValidSubsetError=true;doSearch=true;break;default:doSearch=typeof key=="string"||key==229}if(doSearch)if(!this.store)this.onSearch();else this.searchTimer=this.defer("_startSearchFromInput",
1)},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_startSearch:function(text){this._abortQuery();var _this=this,query=lang.clone(this.query),options={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=string.substitute(this.queryExpr,[text]),q,startQuery=function(){var resPromise=_this._fetchHandle=_this.store.query(query,options);if(_this.disabled||_this.readOnly||q!==_this._lastQuery)return;
when(resPromise,function(res){_this._fetchHandle=null;if(!_this.disabled&&!_this.readOnly&&q===_this._lastQuery)when(resPromise.total,function(total){res.total=total;var pageSize=_this.pageSize;if(isNaN(pageSize)||pageSize>res.total)pageSize=res.total;res.nextPage=function(direction){options.direction=direction=direction!==false;options.count=pageSize;if(direction){options.start+=res.length;if(options.start>=res.total)options.count=0}else{options.start-=pageSize;if(options.start<0){options.count=
Math.max(pageSize+options.start,0);options.start=0}}if(options.count<=0){res.length=0;_this.onSearch(res,query,options)}else startQuery()};_this.onSearch(res,query,options)})},function(err){_this._fetchHandle=null;if(!_this._cancelingQuery)console.error(_this.declaredClass+" "+err.toString())})};lang.mixin(options,this.fetchProperties);if(this.store._oldAPI)q=qs;else{q=this._patternToRegExp(qs);q.toString=function(){return qs}}this._lastQuery=query[this.searchAttr]=q;this._queryDeferHandle=this.defer(startQuery,
this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var list=this.list;if(list)this.store=registry.byId(list)}this.inherited(arguments)}})})},"dijit/layout/AccordionContainer":function(){require({cache:{"url:dijit/layout/templates/AccordionButton.html":"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onTitleClick' class\x3d'dijitAccordionTitle ui-state-default' role\x3d\"presentation\"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d'titleNode,focusNode' data-dojo-attach-event\x3d'onkeydown:_onTitleKeyDown'\n\t\t\tclass\x3d'dijitAccordionTitleFocus' role\x3d\"tab\" aria-expanded\x3d\"false\"\n\t\t\x3e\x3cspan class\x3d'dijitInline dijitAccordionArrow' role\x3d\"presentation\"\x3e\x3c/span\n\t\t\x3e\x3cspan class\x3d'arrowTextUp' role\x3d\"presentation\"\x3e+\x3c/span\n\t\t\x3e\x3cspan class\x3d'arrowTextDown' role\x3d\"presentation\"\x3e-\x3c/span\n\t\t\x3e\x3cspan role\x3d\"presentation\" class\x3d\"dijitInline dijitIcon\" data-dojo-attach-point\x3d\"iconNode\"\x3e\x3c/span\x3e\n\t\t\x3cspan role\x3d\"presentation\" data-dojo-attach-point\x3d'titleTextNode, textDirNode' class\x3d'dijitAccordionText'\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n"}});
define("dijit/layout/AccordionContainer",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/topic","../focus","../_base/manager","dojo/ready","../_Widget","../_Container","../_TemplatedMixin","../_CssStateMixin","./StackContainer","./ContentPane","dojo/text!./templates/AccordionButton.html","dijit/a11yclick"],function(require,array,declare,fx,dom,domAttr,
domClass,domConstruct,domGeometry,keys,lang,has,topic,focus,manager,ready,_Widget,_Container,_TemplatedMixin,_CssStateMixin,StackContainer,ContentPane,template){var AccordionButton=declare("dijit.layout._AccordionButton",[_Widget,_TemplatedMixin,_CssStateMixin],{templateString:template,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",
getParent:function(){return this.parent},buildRendering:function(){this.inherited(arguments);var titleTextNodeId=this.id.replace(" ","_");domAttr.set(this.titleTextNode,"id",titleTextNodeId+"_title");this.focusNode.setAttribute("aria-labelledby",domAttr.get(this.titleTextNode,"id"));dom.setSelectable(this.domNode,false)},getTitleHeight:function(){return domGeometry.getMarginSize(this.domNode).h},_onTitleClick:function(){var parent=this.getParent();parent.selectChild(this.contentWidget,true);focus.focus(this.focusNode)},
_onTitleKeyDown:function(evt){return this.getParent()._onKeyDown(evt,this.contentWidget)},_setSelectedAttr:function(isSelected){this._set("selected",isSelected);this.focusNode.setAttribute("aria-expanded",isSelected?"true":"false");this.focusNode.setAttribute("aria-selected",isSelected?"true":"false");this.focusNode.setAttribute("tabIndex",isSelected?"0":"-1")}});if(0)AccordionButton.extend({_setLabelAttr:function(label){this._set("label",label);domAttr.set(this.titleTextNode,"innerHTML",label);this.applyTextDir(this.titleTextNode)},
_setTitleAttr:function(title){this._set("title",title);domAttr.set(this.titleTextNode,"title",title);this.applyTextDir(this.titleTextNode)}});var AccordionInnerContainer=declare("dijit.layout._AccordionInnerContainer"+(0?"_NoBidi":""),[_Widget,_CssStateMixin],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:true,buildRendering:function(){this.domNode=domConstruct.place("\x3cdiv class\x3d'"+this.baseClass+"' role\x3d'presentation'\x3e",this.contentWidget.domNode,"after");var child=this.contentWidget,
cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;this.button=child._buttonWidget=(new cls({contentWidget:child,label:child.title,title:child.tooltip,dir:child.dir,lang:child.lang,textDir:child.textDir||this.textDir,iconClass:child.iconClass,id:child.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=domConstruct.place("\x3cdiv class\x3d'dijitAccordionChildWrapper' role\x3d'tabpanel' style\x3d'display:none'\x3e",this.domNode);this.containerNode.setAttribute("aria-labelledby",
this.button.id);domConstruct.place(this.contentWidget.domNode,this.containerNode)},postCreate:function(){this.inherited(arguments);var button=this.button,cw=this.contentWidget;this._contentWidgetWatches=[cw.watch("title",lang.hitch(this,function(name,oldValue,newValue){button.set("label",newValue)})),cw.watch("tooltip",lang.hitch(this,function(name,oldValue,newValue){button.set("title",newValue)})),cw.watch("iconClass",lang.hitch(this,function(name,oldValue,newValue){button.set("iconClass",newValue)}))]},
_setSelectedAttr:function(isSelected){this._set("selected",isSelected);this.button.set("selected",isSelected);if(isSelected){var cw=this.contentWidget;if(cw.onSelected)cw.onSelected()}},startup:function(){this.contentWidget.startup()},destroy:function(){this.button.destroyRecursive();array.forEach(this._contentWidgetWatches||[],function(w){w.unwatch()});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments)},destroyDescendants:function(preserveDom){this.contentWidget.destroyRecursive(preserveDom)}});
if(0)AccordionInnerContainer=declare("dijit.layout._AccordionInnerContainer",AccordionInnerContainer,{postCreate:function(){this.inherited(arguments);var button=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(name,oldValue,newValue){button.set("textDir",newValue)}))}});var AccordionContainer=declare("dijit.layout.AccordionContainer",StackContainer,{duration:manager.defaultDuration,buttonWidget:AccordionButton,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);
this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist")},startup:function(){if(this._started)return;this.inherited(arguments);if(this.selectedChildWidget)this.selectedChildWidget._wrapperWidget.set("selected",true)},layout:function(){var openPane=this.selectedChildWidget;if(!openPane)return;var wrapperDomNode=openPane._wrapperWidget.domNode,wrapperDomNodeMargin=domGeometry.getMarginExtents(wrapperDomNode),wrapperDomNodePadBorder=domGeometry.getPadBorderExtents(wrapperDomNode),
wrapperContainerNode=openPane._wrapperWidget.containerNode,wrapperContainerNodeMargin=domGeometry.getMarginExtents(wrapperContainerNode),wrapperContainerNodePadBorder=domGeometry.getPadBorderExtents(wrapperContainerNode),mySize=this._contentBox;var totalCollapsedHeight=0;array.forEach(this.getChildren(),function(child){if(child!=openPane)totalCollapsedHeight+=domGeometry.getMarginSize(child._wrapperWidget.domNode).h});this._verticalSpace=mySize.h-totalCollapsedHeight-wrapperDomNodeMargin.h-wrapperDomNodePadBorder.h-
wrapperContainerNodeMargin.h-wrapperContainerNodePadBorder.h-openPane._buttonWidget.getTitleHeight();this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-wrapperDomNodeMargin.w-wrapperDomNodePadBorder.w-wrapperContainerNodeMargin.w-wrapperContainerNodePadBorder.w};if(openPane)openPane.resize(this._containerContentBox)},_setupChild:function(child){child._wrapperWidget=AccordionInnerContainer({contentWidget:child,buttonWidget:this.buttonWidget,id:child.id+"_wrapper",dir:child.dir,lang:child.lang,
textDir:child.textDir||this.textDir,parent:this});this.inherited(arguments);domConstruct.place(child.domNode,child._wrapper,"replace")},removeChild:function(child){if(child._wrapperWidget){domConstruct.place(child.domNode,child._wrapperWidget.domNode,"after");child._wrapperWidget.destroy();delete child._wrapperWidget}domClass.remove(child.domNode,"dijitHidden");this.inherited(arguments)},getChildren:function(){return array.map(this.inherited(arguments),function(child){return child.declaredClass==
"dijit.layout._AccordionInnerContainer"?child.contentWidget:child},this)},destroy:function(){if(this._animation)this._animation.stop();array.forEach(this.getChildren(),function(child){if(child._wrapperWidget)child._wrapperWidget.destroy();else child.destroyRecursive()});this.inherited(arguments)},_showChild:function(child){child._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments)},_hideChild:function(child){child._wrapperWidget.containerNode.style.display="none";this.inherited(arguments)},
_transition:function(newWidget,oldWidget,animate){if(has("ie")<8)animate=false;if(this._animation){this._animation.stop(true);delete this._animation}var self=this;if(newWidget){newWidget._wrapperWidget.set("selected",true);var d=this._showChild(newWidget);if(this.doLayout&&newWidget.resize)newWidget.resize(this._containerContentBox)}if(oldWidget){oldWidget._wrapperWidget.set("selected",false);if(!animate)this._hideChild(oldWidget)}if(animate){var newContents=newWidget._wrapperWidget.containerNode,
oldContents=oldWidget._wrapperWidget.containerNode;var wrapperContainerNode=newWidget._wrapperWidget.containerNode,wrapperContainerNodeMargin=domGeometry.getMarginExtents(wrapperContainerNode),wrapperContainerNodePadBorder=domGeometry.getPadBorderExtents(wrapperContainerNode),animationHeightOverhead=wrapperContainerNodeMargin.h+wrapperContainerNodePadBorder.h;oldContents.style.height=self._verticalSpace-animationHeightOverhead+"px";this._animation=new fx.Animation({node:newContents,duration:this.duration,
curve:[1,this._verticalSpace-animationHeightOverhead-1],onAnimate:function(value){value=Math.floor(value);newContents.style.height=value+"px";oldContents.style.height=self._verticalSpace-animationHeightOverhead-value+"px"},onEnd:function(){delete self._animation;newContents.style.height="auto";oldWidget._wrapperWidget.containerNode.style.display="none";oldContents.style.height="auto";self._hideChild(oldWidget)}});this._animation.onStop=this._animation.onEnd;this._animation.play()}return d},_onKeyDown:function(e,
fromTitle){if(this.disabled||e.altKey||!(fromTitle||e.ctrlKey))return;var c=e.keyCode;if(fromTitle&&(c==keys.LEFT_ARROW||c==keys.UP_ARROW)||e.ctrlKey&&c==keys.PAGE_UP){this._adjacent(false)._buttonWidget._onTitleClick();e.stopPropagation();e.preventDefault()}else if(fromTitle&&(c==keys.RIGHT_ARROW||c==keys.DOWN_ARROW)||e.ctrlKey&&(c==keys.PAGE_DOWN||c==keys.TAB)){this._adjacent(true)._buttonWidget._onTitleClick();e.stopPropagation();e.preventDefault()}}});if(has("dijit-legacy-requires"))ready(0,function(){var requires=
["dijit/layout/AccordionPane"];require(requires)});AccordionContainer._InnerContainer=AccordionInnerContainer;AccordionContainer._Button=AccordionButton;return AccordionContainer})},"dojox/fx/easing":function(){define("dojox/fx/easing",["dojo/_base/lang","dojo/_base/kernel","dojo/fx/easing"],function(lang,kernel,easing){kernel.deprecated("dojox.fx.easing","Upgraded to Core, use dojo.fx.easing instead","2.0");var fxExt=lang.getObject("dojox.fx",true);fxExt.easing=easing;return easing})},"dgrid/Keyboard":function(){define(["dojo/_base/declare",
"dojo/aspect","dojo/on","dojo/_base/lang","dojo/has","put-selector/put","dojo/_base/Deferred","dojo/_base/sniff"],function(declare,aspect,on,lang,has,put,Deferred){var delegatingInputTypes={checkbox:1,radio:1,button:1},hasGridCellClass=/\bdgrid-cell\b/,hasGridRowClass=/\bdgrid-row\b/;has.add("dom-contains",function(global,doc,element){return!!element.contains});function contains(parent,node){if(has("dom-contains"))return parent.contains(node);else return parent.compareDocumentPosition(node)&8}var Keyboard=
declare(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);if(!this.keyMap)this.keyMap=lang.mixin({},Keyboard.defaultKeyMap);if(!this.headerKeyMap)this.headerKeyMap=lang.mixin({},Keyboard.defaultHeaderKeyMap)},postCreate:function(){this.inherited(arguments);var grid=this;function handledEvent(event){var target=event.target;return target.type&&(!delegatingInputTypes[target.type]||event.keyCode==32)}function enableNavigation(areaNode){var cellNavigation=
grid.cellNavigation,isFocusableClass=cellNavigation?hasGridCellClass:hasGridRowClass,isHeader=areaNode===grid.headerNode,initialNode=areaNode;function initHeader(){if(grid._focusedHeaderNode)grid._focusedHeaderNode.tabIndex=-1;if(grid.showHeader){grid._focusedHeaderNode=initialNode=cellNavigation?grid.headerNode.getElementsByTagName("th")[0]:grid.headerNode;if(initialNode)initialNode.tabIndex=grid.tabIndex}}if(isHeader){initHeader();aspect.after(grid,"renderHeader",initHeader,true)}else aspect.after(grid,
"renderArray",function(ret){return Deferred.when(ret,function(ret){var focusedNode=grid._focusedNode||initialNode;if(isFocusableClass.test(focusedNode.className)&&contains(areaNode,focusedNode))return ret;for(var i=0,elements=areaNode.getElementsByTagName("*"),element;element=elements[i];++i)if(isFocusableClass.test(element.className)){focusedNode=grid._focusedNode=element;break}focusedNode.tabIndex=grid.tabIndex;return ret})});grid._listeners.push(on(areaNode,"mousedown",function(event){if(!handledEvent(event))grid._focusOnNode(event.target,
isHeader,event)}));grid._listeners.push(on(areaNode,"keydown",function(event){if(event.metaKey||event.altKey)return;var handler=grid[isHeader?"headerKeyMap":"keyMap"][event.keyCode];if(handler&&!handledEvent(event))handler.call(grid,event)}))}if(this.tabableHeader){enableNavigation(this.headerNode);on(this.headerNode,"dgrid-cellfocusin",function(){grid.scrollTo({x:this.scrollLeft})})}enableNavigation(this.contentNode)},removeRow:function(rowElement){if(!this._focusedNode)return this.inherited(arguments);
var self=this,isActive=document.activeElement===this._focusedNode,focusedTarget=this[this.cellNavigation?"cell":"row"](this._focusedNode),focusedRow=focusedTarget.row||focusedTarget,sibling;rowElement=rowElement.element||rowElement;if(rowElement===focusedRow.element){sibling=this.down(focusedRow,true);if(!sibling||sibling.element===rowElement)sibling=this.up(focusedRow,true);this._removedFocus={active:isActive,rowId:focusedRow.id,columnId:focusedTarget.column&&focusedTarget.column.id,siblingId:!sibling||
sibling.element===rowElement?undefined:sibling.id};setTimeout(function(){if(self._removedFocus)self._restoreFocus(focusedRow.id)},0);this._focusedNode=null}this.inherited(arguments)},insertRow:function(object){var rowElement=this.inherited(arguments);if(this._removedFocus&&!this._removedFocus.wait)this._restoreFocus(rowElement);return rowElement},_restoreFocus:function(row){var focusInfo=this._removedFocus,newTarget,cell;row=row&&this.row(row);newTarget=row&&row.element&&row.id===focusInfo.rowId?
row:typeof focusInfo.siblingId!=="undefined"&&this.row(focusInfo.siblingId);if(newTarget&&newTarget.element){if(!newTarget.element.parentNode.parentNode){focusInfo.wait=true;return}if(typeof focusInfo.columnId!=="undefined"){cell=this.cell(newTarget,focusInfo.columnId);if(cell&&cell.element)newTarget=cell}if(focusInfo.active&&newTarget.element.offsetHeight!==0)this.focus(newTarget);else{put(newTarget.element,".dgrid-focus");newTarget.element.tabIndex=this.tabIndex}}delete this._removedFocus},addKeyHandler:function(key,
callback,isHeader){return aspect.after(this[isHeader?"headerKeyMap":"keyMap"],key,callback,true)},_focusOnNode:function(element,isHeader,event){var focusedNodeProperty="_focused"+(isHeader?"Header":"")+"Node",focusedNode=this[focusedNodeProperty],cellOrRowType=this.cellNavigation?"cell":"row",cell=this[cellOrRowType](element),inputs,input,numInputs,inputFocused,i;element=cell&&cell.element;if(!element)return;if(this.cellNavigation){inputs=element.getElementsByTagName("input");for(i=0,numInputs=inputs.length;i<
numInputs;i++){input=inputs[i];if((input.tabIndex!=-1||"lastValue"in input)&&!input.disabled){if(has("ie")<8)input.style.position="relative";input.focus();if(has("ie")<8)input.style.position="";inputFocused=true;break}}}event=lang.mixin({grid:this},event);if(event.type)event.parentType=event.type;if(!event.bubbles)event.bubbles=true;if(focusedNode){put(focusedNode,"!dgrid-focus[!tabIndex]");if(has("ie")<8)focusedNode.style.position="";event[cellOrRowType]=this[cellOrRowType](focusedNode);on.emit(element,
"dgrid-cellfocusout",event)}focusedNode=this[focusedNodeProperty]=element;event[cellOrRowType]=cell;if(!inputFocused){if(has("ie")<8)element.style.position="relative";element.tabIndex=this.tabIndex;element.focus()}put(element,".dgrid-focus");on.emit(focusedNode,"dgrid-cellfocusin",event)},focusHeader:function(element){this._focusOnNode(element||this._focusedHeaderNode,true)},focus:function(element){this._focusOnNode(element||this._focusedNode,false)}});var moveFocusVertical=Keyboard.moveFocusVertical=
function(event,steps){var cellNavigation=this.cellNavigation,target=this[cellNavigation?"cell":"row"](event),columnId=cellNavigation&&target.column.id,next=this.down(this._focusedNode,steps,true);if(cellNavigation)next=this.cell(next,columnId);this._focusOnNode(next,false,event);event.preventDefault()};var moveFocusUp=Keyboard.moveFocusUp=function(event){moveFocusVertical.call(this,event,-1)};var moveFocusDown=Keyboard.moveFocusDown=function(event){moveFocusVertical.call(this,event,1)};var moveFocusPageUp=
Keyboard.moveFocusPageUp=function(event){moveFocusVertical.call(this,event,-this.pageSkip)};var moveFocusPageDown=Keyboard.moveFocusPageDown=function(event){moveFocusVertical.call(this,event,this.pageSkip)};var moveFocusHorizontal=Keyboard.moveFocusHorizontal=function(event,steps){if(!this.cellNavigation)return;var isHeader=!this.row(event),currentNode=this["_focused"+(isHeader?"Header":"")+"Node"];this._focusOnNode(this.right(currentNode,steps),isHeader,event);event.preventDefault()};var moveFocusLeft=
Keyboard.moveFocusLeft=function(event){moveFocusHorizontal.call(this,event,-1)};var moveFocusRight=Keyboard.moveFocusRight=function(event){moveFocusHorizontal.call(this,event,1)};var moveHeaderFocusEnd=Keyboard.moveHeaderFocusEnd=function(event,scrollToBeginning){var nodes;if(this.cellNavigation){nodes=this.headerNode.getElementsByTagName("th");this._focusOnNode(nodes[scrollToBeginning?0:nodes.length-1],true,event)}event.preventDefault()};var moveHeaderFocusHome=Keyboard.moveHeaderFocusHome=function(event){moveHeaderFocusEnd.call(this,
event,true)};var moveFocusEnd=Keyboard.moveFocusEnd=function(event,scrollToTop){var self=this,cellNavigation=this.cellNavigation,contentNode=this.contentNode,contentPos=scrollToTop?0:contentNode.scrollHeight,scrollPos=contentNode.scrollTop+contentPos,endChild=contentNode[scrollToTop?"firstChild":"lastChild"],hasPreload=endChild.className.indexOf("dgrid-preload")>-1,endTarget=hasPreload?endChild[(scrollToTop?"next":"previous")+"Sibling"]:endChild,endPos=endTarget.offsetTop+(scrollToTop?0:endTarget.offsetHeight),
handle;if(hasPreload){while(endTarget&&endTarget.className.indexOf("dgrid-row")<0)endTarget=endTarget[(scrollToTop?"next":"previous")+"Sibling"];if(!endTarget)return}if(!hasPreload||endChild.offsetHeight<1){if(cellNavigation)endTarget=this.cell(endTarget,this.cell(event).column.id);this._focusOnNode(endTarget,false,event)}else{if(!has("dom-addeventlistener"))event=lang.mixin({},event);handle=aspect.after(this,"renderArray",function(rows){handle.remove();return Deferred.when(rows,function(rows){var target=
rows[scrollToTop?0:rows.length-1];if(cellNavigation)target=self.cell(target,self.cell(event).column.id);self._focusOnNode(target,false,event)})})}if(scrollPos===endPos)event.preventDefault()};var moveFocusHome=Keyboard.moveFocusHome=function(event){moveFocusEnd.call(this,event,true)};function preventDefault(event){event.preventDefault()}Keyboard.defaultKeyMap={32:preventDefault,33:moveFocusPageUp,34:moveFocusPageDown,35:moveFocusEnd,36:moveFocusHome,37:moveFocusLeft,38:moveFocusUp,39:moveFocusRight,
40:moveFocusDown};Keyboard.defaultHeaderKeyMap={32:preventDefault,35:moveHeaderFocusEnd,36:moveHeaderFocusHome,37:moveFocusLeft,39:moveFocusRight};return Keyboard})},"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cinput\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point\x3d"focusNode"\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\n/\x3e\x3c/div\x3e\n',
"dojo/_base/browser":function(){if(require.has)require.has.add("config-selectorEngine","acme");define(["../ready","./kernel","./connect","./unload","./window","./event","./html","./NodeList","../query","./xhr","./fx"],function(dojo){return dojo})},"xwordpress/views/MainView":function(){define("xwordpress/views/MainView",["dojo/_base/declare","xfile/views/MainView"],function(declare,MainView){return declare("xwordpress.views.MainView",[MainView],{cssClass:"mainView mainViewWordpress xasMain dTuned"})})},
"xstyle/core/load-css":function(){define("xstyle/core/load-css",[],function(){var onreadystatechange="onreadystatechange",onload="onload",createElement="createElement",failed=false,doc=document,cache=typeof _css_cache=="undefined"?{}:_css_cache,undef,features={"event-link-onload":document.createElement("link").onload===null&&!navigator.userAgent.match(/AppleWebKit/),"dom-create-style-element":!document.createStyleSheet},head=doc.head||(doc.head=doc.getElementsByTagName("head")[0]);function has(feature){return features[feature]}
function createLink(doc,optHref){var link=doc[createElement]("link");link.rel="stylesheet";link.type="text/css";if(optHref)link.href=optHref;return link}function nameWithExt(name,defaultExt){return name.lastIndexOf(".")<=name.lastIndexOf("/")?name+"."+defaultExt:name}function parseSuffixes(name){var parts=name.split("!"),suf,i=1,pair;while(suf=parts[i++]){pair=suf.split("\x3d",2);parts[pair[0]]=pair.length==2?pair[1]:true}return parts}if(!has("bundled-css"))var loadDetector=function(params,cb){if(require.onError)require.onError=
function(orig){return function(){failed=true;orig.apply(this,arguments)}}(require.onError);function loadHandler(params,cb){var link=params.link;link[onreadystatechange]=link[onload]=function(){if(!link.readyState||link.readyState=="complete"){features["event-link-onload"]=true;cleanup(params);cb()}}}function isLinkReady(link){var sheet=link.sheet||link.styleSheet;if(sheet){var styleSheets=document.styleSheets;for(var i=styleSheets.length;i>0;i--)if(styleSheets[i-1]==sheet)return true}}function ssWatcher(params,
cb){if(isLinkReady(params.link)){cleanup(params);cb()}else if(!failed)setTimeout(function(){ssWatcher(params,cb)},params.wait)}function cleanup(params){var link=params.link;link[onreadystatechange]=link[onload]=null}var loaded;function cbOnce(){if(!loaded){loaded=true;cb()}}loadHandler(params,cbOnce);if(!has("event-link-onload"))ssWatcher(params,cbOnce)};function insertCss(css){if(has("dom-create-style-element")){styleSheet=document.createElement("style");styleSheet.setAttribute("type","text/css");
styleSheet.appendChild(document.createTextNode(css));head.insertBefore(styleSheet,head.firstChild);return styleSheet}else{var styleSheet=document.createStyleSheet();styleSheet.cssText=css;return styleSheet.owningElement}}return function(resourceDef,callback,config){var resources=resourceDef.split(","),loadingCount=resources.length,loaded=function(){if(--loadingCount==0)callback(link.sheet||link.styleSheet)};for(var i=0,after;i<resources.length;i++,after=url){resourceDef=resources[i];var cached=cache[resourceDef];
if(cached){link=insertCss(cached);return loaded()}var opts=parseSuffixes(resourceDef),name=opts.shift(),url=nameWithExt(name,"css"),link=createLink(doc),nowait="nowait"in opts?opts.nowait!="false":!!(config&&config.cssDeferLoad),params={link:link,url:url,wait:config&&config.cssWatchPeriod||25};loadDetector(params,loaded);if(nowait)callback(link);link.href=url;head.appendChild(link)}}})},"dojo/rpc/RpcService":function(){define(["../_base/array","../_base/declare","../_base/Deferred","../_base/kernel",
"../_base/lang","../_base/url","../_base/xhr"],function(array,declare,Deferred,kernel,lang,_Url,xhr){return declare("dojo.rpc.RpcService",null,{constructor:function(args){if(args)if(lang.isString(args)||args instanceof _Url){if(args instanceof _Url)var url=args+"";else url=args;var def=xhr.get({url:url,handleAs:"json-comment-optional",sync:true});def.addCallback(this,"processSmd");def.addErrback(function(){throw new Error("Unable to load SMD from "+args);})}else if(args.smdStr)this.processSmd(kernel.eval("("+
args.smdStr+")"));else{if(args.serviceUrl)this.serviceUrl=args.serviceUrl;this.timeout=args.timeout||3E3;if("strictArgChecks"in args)this.strictArgChecks=args.strictArgChecks;this.processSmd(args)}},strictArgChecks:true,serviceUrl:"",parseResults:function(obj){return obj},errorCallback:function(deferredRequestHandler){return function(data){deferredRequestHandler.errback(data.message)}},resultCallback:function(deferredRequestHandler){return lang.hitch(this,function(obj){if(obj.error!=null){var err;
if(typeof obj.error=="object"){err=new Error(obj.error.message);err.code=obj.error.code;err.error=obj.error.error}else err=new Error(obj.error);err.id=obj.id;err.errorObject=obj;deferredRequestHandler.errback(err)}else deferredRequestHandler.callback(this.parseResults(obj))})},generateMethod:function(method,parameters,url){return lang.hitch(this,function(){var deferredRequestHandler=new Deferred;if(this.strictArgChecks&&parameters!=null&&arguments.length!=parameters.length)throw new Error("Invalid number of parameters for remote method.");
else this.bind(method,lang._toArray(arguments),deferredRequestHandler,url);return deferredRequestHandler})},processSmd:function(object){if(object.methods)array.forEach(object.methods,function(m){if(m&&m.name){this[m.name]=this.generateMethod(m.name,m.parameters,m.url||m.serviceUrl||m.serviceURL);if(!lang.isFunction(this[m.name]))throw new Error("RpcService: Failed to create"+m.name+"()");}},this);this.serviceUrl=object.serviceUrl||object.serviceURL;this.required=object.required;this.smd=object}})})},
"xfile/views/FileRenameDialog":function(){define("xfile/views/FileRenameDialog",["dojo/_base/declare","xide/factory","xfile/views/ActionDialog"],function(declare,factory,ActionDialog){return declare("xfile.views.FileRenameDialog",[ActionDialog],{value:null,fileNameValid:true,onValidated:function(valid){if(this.okButton)this.okButton.set("disabled",!valid)},onNormalKey:function(){if(this.editBox)this.editBox._refreshState(true)},fileNameValidator:function(value,constraints){var thiz=this;var result=
false;var reg=new RegExp(/^[-\w^&'@{}[\],$=!#().%+~ ]+$/);if(value&&reg.test(value))if(thiz.delegate&&thiz.delegate.hasItem(value)){result=false;thiz.promptMessage="Item already exists";thiz.message="Item already exists"}else{result=true;thiz.message="Enter new file name"}else{thiz.promptMessage="This is not a valid filename, try without special characters!";thiz.message="This is not a valid filename, try without special characters!";result=false}this.fileNameValid=result;if(this.owner&&this.owner.onValidated)this.owner.onValidated(result);
return result},getValue:function(){return this.editBox.getValue()},initWithFileOoperation:function(src){this.value=src.name;this.editBox=factory.createValidationTextBox(this.containerNode,"float:left;","New Name",src.name,this.fileNameValidator,this.delegate.delegate,"Not a filename!","I need some input");this.editBox.owner=this;this.addActionButtons();this.fixHeight();this.resize()}})})},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],
function(array,aspect,declare){return declare("dijit.Destroyable",null,{destroy:function(preserveDom){this._destroyed=true},own:function(){array.forEach(arguments,function(handle){var destroyMethodName="destroyRecursive"in handle?"destroyRecursive":"destroy"in handle?"destroy":"remove";var odh=aspect.before(this,"destroy",function(preserveDom){handle[destroyMethodName](preserveDom)});var hdh=aspect.after(handle,destroyMethodName,function(){odh.remove();hdh.remove()},true)},this);return arguments}})})},
"dojo/request":function(){define(["./request/default!"],function(request){return request})},"dojo/_base/Deferred":function(){define(["./kernel","../Deferred","../promise/Promise","../errors/CancelError","../has","./lang","../when"],function(dojo,NewDeferred,Promise,CancelError,has,lang,when){var mutator=function(){};var freeze=Object.freeze||function(){};var Deferred=dojo.Deferred=function(canceller){var result,finished,isError,head,nextListener;var promise=this.promise=new Promise;function complete(value){if(finished)throw new Error("This deferred has already been resolved");
result=value;finished=true;notify()}function notify(){var mutated;while(!mutated&&nextListener){var listener=nextListener;nextListener=nextListener.next;if(mutated=listener.progress==mutator)finished=false;var func=isError?listener.error:listener.resolved;if(has("config-useDeferredInstrumentation"))if(isError&&NewDeferred.instrumentRejected)NewDeferred.instrumentRejected(result,!!func);if(func)try{var newResult=func(result);if(newResult&&typeof newResult.then==="function"){newResult.then(lang.hitch(listener.deferred,
"resolve"),lang.hitch(listener.deferred,"reject"),lang.hitch(listener.deferred,"progress"));continue}var unchanged=mutated&&newResult===undefined;if(mutated&&!unchanged)isError=newResult instanceof Error;listener.deferred[unchanged&&isError?"reject":"resolve"](unchanged?result:newResult)}catch(e){listener.deferred.reject(e)}else if(isError)listener.deferred.reject(result);else listener.deferred.resolve(result)}}this.resolve=this.callback=function(value){this.fired=0;this.results=[value,null];complete(value)};
this.reject=this.errback=function(error){isError=true;this.fired=1;if(has("config-useDeferredInstrumentation"))if(NewDeferred.instrumentRejected)NewDeferred.instrumentRejected(error,!!nextListener);complete(error);this.results=[null,error]};this.progress=function(update){var listener=nextListener;while(listener){var progress=listener.progress;progress&&progress(update);listener=listener.next}};this.addCallbacks=function(callback,errback){this.then(callback,errback,mutator);return this};promise.then=
this.then=function(resolvedCallback,errorCallback,progressCallback){var returnDeferred=progressCallback==mutator?this:new Deferred(promise.cancel);var listener={resolved:resolvedCallback,error:errorCallback,progress:progressCallback,deferred:returnDeferred};if(nextListener)head=head.next=listener;else nextListener=head=listener;if(finished)notify();return returnDeferred.promise};var deferred=this;promise.cancel=this.cancel=function(){if(!finished){var error=canceller&&canceller(deferred);if(!finished){if(!(error instanceof
Error))error=new CancelError(error);error.log=false;deferred.reject(error)}}};freeze(promise)};lang.extend(Deferred,{addCallback:function(callback){return this.addCallbacks(lang.hitch.apply(dojo,arguments))},addErrback:function(errback){return this.addCallbacks(null,lang.hitch.apply(dojo,arguments))},addBoth:function(callback){var enclosed=lang.hitch.apply(dojo,arguments);return this.addCallbacks(enclosed,enclosed)},fired:-1});Deferred.when=dojo.when=when;return Deferred})},"dojo/keys":function(){define("dojo/keys",
["./_base/kernel","./sniff"],function(dojo,has){return dojo.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:has("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,
NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:has("mac")&&!has("air")?has("safari")?91:224:17}})},"xide/views/_EditorBase":function(){define(["dojo/_base/declare","dojo/_base/connect","xide/types","xide/factory"],function(declare,connect,types,factory){return declare("xide.views._EditorBase",
null,{storeDelegate:null,content:null,item:null,ctrlDown:false,getEditor:function(){return this},focus:function(){this.getEditor().focus()},getContent:function(onSuccess,onError){if(!this.storeDelegate){if(onError)onError("Editor::getContent : Have no store delegate!")}else{var _cb=function(content){onSuccess(content)};this.storeDelegate.getContent(_cb)}},saveContent:function(onSuccess,onError){var thiz=this;this.set("iconClass","fa-spinner fa-spin");var _value=this.getValue();if(!_value)0&&console.log("Editor::saveContent : Have nothing to save, editor seems empty");
if(!this.storeDelegate){if(onError)onError("Editor::saveContent : Have no store delegate!")}else{var _s=function(){thiz.set("iconClass",thiz.iconClassNormal);thiz.lastSavedContent=_value;thiz.onContentChange(false);if(onSuccess)onSuccess(arguments);var struct={path:thiz.filePath,item:thiz.dataItem,content:_value};factory.publish(types.EVENTS.ON_FILE_CONTENT_CHANGED,struct,thiz)};this.storeDelegate.saveContent(_value,_s)}},setupKeyboard:function(){var thiz=this;connect.connect(this.containerNode,"onclick",
function(evt){thiz.focus()});connect.connect(this.domNode,"onkeyup",function(evt){if(evt.keyCode==17)thiz.ctrlDown=false});connect.connect(this.domNode,"onkeydown",function(evt){if(evt.keyCode==17)thiz.ctrlDown=true;if(thiz.ctrlDown&&evt.keyCode==83){evt.preventDefault();thiz.saveContent()}})},startup:function(){this.inherited(arguments);this.setupKeyboard()}})})},"xblox/model/events/OnEvent":function(){define("xblox/model/events/OnEvent",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array",
"dojo/Deferred","xblox/model/Block","xide/utils","xide/types","xide/mixins/EventedMixin","xblox/model/Referenced","dijit/registry","dojo/on"],function(declare,lang,array,Deferred,Block,utils,types,EventedMixin,Referenced,registry,on){return declare("xblox.model.events.OnEvent",[Block,EventedMixin,Referenced],{name:"On Event",event:"",reference:"",references:null,_nativeEvents:["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onkeypress","onkeydown","onkeyup",
"onfocus","onblur","onchange"],solve:function(scope,settings,run,error){if(!this._lastRunSettings&&settings)this._lastRunSettings=settings;settings=this._lastRunSettings||settings;this._currentIndex=0;this._return=[];var ret=[],items=this[this._getContainer()];if(items.length){var res=this.runFrom(items,0,settings);this.onSuccess(this,settings);return res}else this.onSuccess(this,settings);return ret},toText:function(){var result=this.getBlockIcon()+" "+this.name+" :: ";if(this.event)result+=this.event;
return result},canAdd:function(){return[]},getFields:function(){var fields=this.inherited(arguments)||this.getDefaultFields();var thiz=this;var _ref=this.deserialize(this.reference);var isNative=utils.contains(this._nativeEvents,this.event)>-1;var options=null;if(!isNative)options=this.scope.getEventsAsOptions(this.event);else{options=[{label:"onclick",value:"onclick"},{label:"ondblclick",value:"ondblclick"},{label:"onmousedown",value:"onmousedown"},{label:"onmouseup",value:"onmouseup"},{label:"onmouseover",
value:"onmouseover"},{label:"onmousemove",value:"onmousemove"},{label:"onmouseout",value:"onmouseout"},{label:"onkeypress",value:"onkeypress"},{label:"onkeydown",value:"onkeydown"},{label:"onkeyup",value:"onkeyup"},{label:"onfocus",value:"onfocus"},{label:"onblur",value:"onblur"},{label:"onchange",value:"onchange"}];for(var i=0;i<options.length;i++){var obj=options[i];if(obj.value===this.event){obj.selected=true;break}}}fields.push(this.utils.createCI("Event",types.ECIType.ENUMERATION,this.event,
{group:"General",options:options,dst:"event"}));fields.push(this.utils.createCI("Object/Widget",types.ECIType.WIDGET_REFERENCE,this.reference,{group:"General",dst:"reference",value:this.reference}));return fields},getBlockIcon:function(){return'\x3cspan class\x3d"fa-bell"\x3e\x3c/span\x3e'},mayHaveChildren:function(parent){return this.items!=null&&this.items.length>0},getChildren:function(parent){return this.items},onEvent:function(evt){this._lastResult=evt;this.solve(this.scope,this._lastRunSettings)},
_subscribe:function(evt,handler,obj){if(!evt)return;var isNative=utils.contains(this._nativeEvents,evt);if(isNative==-1)this.subscribe(evt,this.onEvent,obj);else if(obj){var _event=evt.replace("on",""),thiz=this;var handle=on(obj,_event,function(e){thiz.onEvent(e)});0&&console.log("wire native event : "+_event);this._events.push(handle)}},_registerEvent:function(evt){if(!evt||!evt.length)return;0&&console.log("register event : "+evt+" for "+this.reference);var objects=this.resolveReference(this.deserialize(this.reference));
var thiz=this;if(objects&&objects.length){for(var i=0;i<objects.length;i++){var obj=objects[i];if(obj&&obj.id){var _widget=registry.byId(obj.id);if(_widget&&_widget.on){var _event=this.event.replace("on","");0&&console.log("found widget : "+obj.id+" will register event "+_event);var _handle=_widget.on(_event,lang.hitch(this,function(e){0&&console.log("event triggered : "+thiz.event);thiz.onEvent(e)}));this._events.push(_handle)}else this._subscribe(evt,this.onEvent,obj)}else this._subscribe(evt,this.onEvent,
obj)}0&&console.log("objects found : ",objects)}else this._subscribe(evt,this.onEvent)},onLoad:function(){this._onLoaded=true;if(this.event&&this.event.length&&this.enabled)this._registerEvent(this.event)},destroy:function(){this.inherited(arguments)},updateEventSelector:function(objects,cis){var options=[];if(!objects||!objects.length)options=this.scope.getEventsAsOptions(this.event);else{options=[{label:"onclick",value:"onclick"},{label:"ondblclick",value:"ondblclick"},{label:"onmousedown",value:"onmousedown"},
{label:"onmouseup",value:"onmouseup"},{label:"onmouseover",value:"onmouseover"},{label:"onmousemove",value:"onmousemove"},{label:"onmouseout",value:"onmouseout"},{label:"onkeypress",value:"onkeypress"},{label:"onkeydown",value:"onkeydown"},{label:"onkeyup",value:"onkeyup"},{label:"onfocus",value:"onfocus"},{label:"onblur",value:"onblur"},{label:"onchange",value:"onchange"}];for(var i=0;i<options.length;i++){var obj=options[i];if(obj.value===this.event){obj.selected=true;break}}}for(var i=0;i<cis.length;i++){var ci=
cis[i];if(ci["widget"]&&ci["widget"].title==="Event"){var widget=ci["_widget"];widget.nativeWidget.set("options",options);widget.nativeWidget.reset();widget.nativeWidget.set("value",this.event);this.publish(types.EVENTS.RESIZE,{});break}}},onReferenceChanged:function(newValue,cis){this._destroy();this.reference=newValue;var objects=this.resolveReference(this.deserialize(newValue));this.updateEventSelector(objects,cis);this._registerEvent(this.event)},onChangeField:function(field,newValue,cis){if(field==
"event"){this._destroy();if(this._onLoaded){this.event=newValue;this._registerEvent(newValue)}}if(field=="reference")this.onReferenceChanged(newValue,cis);this.inherited(arguments)},activate:function(){this._destroy();this._registerEvent(this.event)},deactivate:function(){this._destroy()},_destroy:function(){if(!this._events)this._events=[];array.forEach(this._events,dojo.unsubscribe);this._lastResult=null;this._events=[]}})})},"xide/mixins/ReloadMixin":function(){define(["dojo/_base/declare","dojo/_base/lang",
"xide/types","xide/utils"],function(declare,lang,types,utils){return declare("xide.mixins.ReloadMixin",null,{_mergeFunctions:true,_mergeMissingVariables:true,_isInstanceOf:function(cls){try{if(this.isInstanceOf&&this.isInstanceOf(cls))return true}catch(e){}if(this.constructor&&this.constructor._meta&&this.constructor._meta.bases){var bases=this.constructor._meta.bases;for(var i=0,l=bases.length;i<l;++i){if(bases[i]===cls)return true;if(bases[i]["superclass"]!=null&&bases[i]["superclass"].declaredClass===
cls.prototype.declaredClass)return true;if(bases[i]["prototype"]!=null&&bases[i]["prototype"].declaredClass===cls.prototype.declaredClass)return true}}return!!(this instanceof cls)},mergeFunctions:function(target,source){for(var i in source){var o=source[i];if(i==="constructor"||i==="inherited")continue;if(lang.isFunction(source[i]))target[i]=source[i];if(lang.isArray(source[i]))if(target[i]==null)target[i]=source[i]}},onModuleReloaded:function(evt){var newModule=evt.newModule;if(!newModule||!newModule.prototype)return;
var moduleClass=newModule.prototype.declaredClass;var matchedByClass=false;if(moduleClass&&this.declaredClass)matchedByClass=utils.replaceAll("/",".",this.declaredClass)===utils.replaceAll("/",".",moduleClass);if(matchedByClass||this._isInstanceOf(newModule)){this.mergeFunctions(this,newModule.prototype);if(this.onReloaded)this.onReloaded(newModule)}else if(evt.module&&utils.replaceAll("//","/",evt.module)===this.declaredClass)this.mergeFunctions(this,newModule.prototype)},initReload:function(){var thiz=
this;this.subscribe(types.EVENTS.ON_MODULE_RELOADED,function(evt){thiz.onModuleReloaded(evt,thiz)},this)}})})},"xfile/config":function(){define("xfile/config",["dojo/_base/declare","xide/types"],function(declare,types){types.config={ROOT_NODE:"xFileRoot",FILES_STORE_URL:"",FILE_SERVICE:"",FILE_SERVICE_FULL:"",DOWNLOAD_URL:null,UPLOAD_URL:null,CODDE_MIRROR:"",THEME_ROOT:"",WEB_ROOT:"",REPO_URL:"",START_PATH:"./",FILES_STORE_PROTO:null,FILES_STORE_SERVICE_CLASS:null,FILES_MODEL_PROTO:null,IS_MEDIA_PICKER:null,
EDITOR_NODE:null,EDITOR_AFTER_NODE:null,ACTION_TOOLBAR:null,ALLOWED_DISPLAY_MODES:{TREE:1,LIST:1,THUMB:1},LAYOUT_PRESET:null,beanContextName:null};return types})},"cbtree/data/util/sorter":function(){define("cbtree/data/util/sorter",["dojo/_base/declare","dojo/_base/lang"],function(declare,lang){var sortDecl=declare(null,{constructor:function(sortFields){var i;this.sortArgm=[];if(lang.isArray(sortFields))for(i=0;i<sortFields.length;i++){var field=sortFields[i];if(field.attribute){var sortSpec={attribute:field.attribute,
descending:field.descending?-1:1,ignoreCase:field.ignoreCase||false};this.sortArgm.push(sortSpec)}}},_compare:function(a,b){var attr,desc,igc,valA,valB,i;for(i=0;i<this.sortArgm.length;i++){attr=this.sortArgm[i].attribute;desc=this.sortArgm[i].descending;igc=this.sortArgm[i].ignoreCase;valA=a[attr]===null?undefined:a[attr];valB=b[attr]===null?undefined:b[attr];if(igc&&lang.isString(valA)&&lang.isString(valB)){valA=valA.toLowerCase();valB=valB.toLowerCase()}if(valA==valB)continue;if(valB==null||valA>
valB)return desc*1;if(valA==null||valA<valB)return desc*-1}return 0},sortFunction:function(){return lang.hitch(this,this._compare)}});return sortDecl})},"cbtree/models/FileStoreModel":function(){define("cbtree/models/FileStoreModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/aspect","./TreeStoreModel","../data/util/sorter"],function(array,declare,lang,win,aspect,TreeStoreModel,sorter){return declare([TreeStoreModel],{deferItemLoadingUntilExpand:true,queryOptions:null,
sort:null,rootLabel:"ROOT",rootId:"$rootDir$",moduleName:"cbTree/models/FileStoreModel",forceChildren:false,constructor:function(params){var store=this.store;this.root={store:this,root:true,id:this.rootId,label:this.rootLabel,children:params.rootChildren};this.root[this.checkedAttr]=this.checkedState;this.hasFakeRoot=true;this._validateStore=false;if(params.queryOptions)this._setQueryOptions(params.queryOptions);if(params.sort)this._setSortFields(params.sort);if(store.getFeatures()["dojo.data.api.Notification"])this.connects=
this.connects.concat([aspect.after(store,"onClose",lang.hitch(this,"onStoreClose"),true)]);0&&console.warn("cbTree/models/FileStoreModel has been deprecated and will be removed with dojo 2.0 !!")},_setQueryOptions:function(queryOptions){if(lang.isObject(queryOptions))this.queryOptions=queryOptions},_setSortFields:function(sort){if(lang.isArray(sort)){var isArrayOfObjects=true;array.forEach(sort,function(field){if(!lang.isObject(field))isArrayOfObjects=false});if(isArrayOfObjects)this.sort=sort}},
_sort:function(items){var options={ignoreCase:true,sort:[{attribute:"directory",descending:true,ignoreCase:true},{attribute:"name",descending:false,ignoreCase:true}]};var _sort=options.sort;if(items.length&&_sort){var sortList=new sorter(_sort);items.sort(sortList.sortFunction())}},getChildrenInner:function(parentItem,onComplete,onError){var store=this.store;var scope=this;var root=this.root;var isLoaded=this.store.isItemLoaded(root);var doRootQuery=true;if(this.forceChildren)doRootQuery=false;if(this.forceChildren&&
this.store.isItemLoaded(parentItem)&&parentItem.children){if(parentItem.path==this.actualRoot.path&&!this.root.children)this.root.children=parentItem.children;this._sort(parentItem.children);onComplete(parentItem.children);return}if(parentItem===this.root)if(this.root.children)onComplete(this.root.children);else this.store.fetch({query:this.query,queryOptions:this.queryOptions,sort:this.sort,onComplete:lang.hitch(this,function(items){if(this.forceChildren){this.root.children=items[0].children;onComplete(items[0].children)}else{this.root.children=
items;onComplete(items)}}),onError:onError});else{if(!store.isItemLoaded(parentItem)){var getChildren=lang.hitch(this,arguments.callee);store.loadItem(scope._mixinFetch({item:parentItem,onItem:function(parentItem){getChildren(parentItem,onComplete,onError)},onError:onError}));return}store.fetchChildren({item:parentItem,query:this.query,queryOptions:this.queryOptions,sort:this.sort,onError:onError,scope:scope,onComplete:function(items){if(items&&items.length==1&&items.children)onComplete(items[0].children);
else onComplete(items)}})}return},getChildren:function(parentItem,onComplete,onError){try{var store=this.store;var scope=this;var root=this.root;var isLoaded=this.store.isItemLoaded(root);var doRootQuery=true;if(this.forceChildren)doRootQuery=false;if(this.forceChildren&&this.store.isItemLoaded(parentItem)&&parentItem.children){onComplete(parentItem.children);return}if(parentItem==this.root&&parentItem.path==null)parentItem.path=this.root.id;if(this.forceChildren&&parentItem.path==this.actualRoot.path&&
this.store.isItemLoaded(this.actualRoot)){this.root.children=this.actualRoot.children;onComplete(this.actualRoot.children);return}var thiz=this;if(parentItem===this.root){if(this.forceChildren&&this.actualRoot&&!this.store.isItemLoaded(this.actualRoot)){this.store.loadItem(scope._mixinFetch({item:this.actualRoot,onItem:function(parentItem){thiz.getChildrenInner(parentItem,onComplete,onError)},onError:onError}));return}if(this.root.children)onComplete(this.root.children);else{this.store.fetchEx({query:this.query,
queryOptions:this.queryOptions,sort:this.sort,onComplete:lang.hitch(this,function(items){thiz.root.children=items;onComplete(items)})});this.store.fetch({query:this.query,queryOptions:this.queryOptions,sort:this.sort,onComplete:lang.hitch(this,function(items){if(this.forceChildren&&items.length>0){this.root.children=items[0].children;onComplete(items[0].children)}else{this.root.children=items;onComplete(items)}}),onError:onError})}}else{if(this.forceChildren)if(!store.isItemLoaded(parentItem)){this.store.loadItem(scope._mixinFetch({item:parentItem,
onItem:function(parentItem){thiz.getChildrenInner(parentItem,onComplete,onError)},onError:onError}));return}store.fetchChildren({item:parentItem,query:this.query,queryOptions:this.queryOptions,sort:this.sort,onError:onError,scope:scope,onComplete:function(items){if(items&&items.length==1&&items.children)onComplete(items[0].children);else onComplete(items)}})}}catch(e){debugger}},getParents:function(storeItem){var parents=[];if(storeItem){if(storeItem!==this.root){parents=this.store.getParents(storeItem);
if(!parents.length)return[this.root]}return parents}},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments)},fetchItemByIdentity:function(keywordArgs){if(keywordArgs.identity==this.root.id){var scope=keywordArgs.scope?keywordArgs.scope:win.global;if(keywordArgs.onItem)keywordArgs.onItem.call(scope,this.root)}else this.inherited(arguments)},getIcon:function(item){if(this.iconAttr){if(item!==this.root)return this.store.getValue(item,this.iconAttr);return this.root[this.iconAttr]}},
getIdentity:function(item){return item===this.root?this.root.id:this.inherited(arguments)},getLabel:function(item){return item===this.root?this.root.label:this.inherited(arguments)},isItem:function(something){return something===this.root?true:this.inherited(arguments)},isChildOf:function(parent,item){if(parent===this.root){if(array.indexOf(this.root.children,item)!==-1)return true}else return this.inherited(arguments)},deleteItem:function(item,onBegin,onComplete,onError,scope){var scope=scope||window.global;
if(item===this.root){var children=this.root.children||[];var i;if(children.length>0){if(onBegin)if(!onBegin.call(scope,item))return;for(i=0;i<children.length;i++)this.store.deleteItem(children[i],null,onComplete,onError,scope)}}else return this.store.deleteItem(item,onBegin,onComplete,onError,scope)},newItem:function(args,parent,insertIndex,childrenAttr){throw new Error(this.moduleName+"::newItem(): Operation not allowed on a File Store.");},pasteItem:function(childItem,oldParentItem,newParentItem,
bCopy,insertIndex,childrenAttr){var newParentDir="",childItemDir="";if(this.store.isItem(childItem)){childItemDir=this.store.getDirectory(childItem);if(newParentItem!==this.root)if(newParentItem.directory)newParentDir=this.store.getPath(newParentItem);else newParentDir=this.store.getDirectory(newParentItem);if(childItemDir!==newParentDir){var newPath=newParentDir+"/"+this.store.getLabel(childItem);this.store.renameItem(childItem,newPath)}}},onDeleteItem:function(item){if(array.indexOf(this.root.children,
item)!=-1)this._requeryTop();this.inherited(arguments)},onNewItem:function(item,parentInfo){if(parentInfo){this.getChildren(parentInfo.item,lang.hitch(this,function(children){this.onChildrenChange(parentInfo.item,children)}));this._updateCheckedParent(item,true)}else this._requeryTop()},onSetItem:function(storeItem,attribute,oldValue,newValue,owner){if(this._queryAttrs.length&&array.indexOf(this._queryAttrs,attribute)!=-1)this._requeryTop();this.inherited(arguments)},onStoreClose:function(reset){},
_requeryTop:function(){var oldChildren=this.root.children||[];this.store.fetch({query:this.query,queryOptions:this.queryOptions,sort:this.sort,onComplete:lang.hitch(this,function(newChildren){this.root.children=newChildren;if(oldChildren.length!=newChildren.length||array.some(oldChildren,function(item,idx){return newChildren[idx]!=item})){this.onChildrenChange(this.root,newChildren);this._updateCheckedParent(newChildren[0],true)}})})}})})},"xstyle/has-class":function(){define("xstyle/has-class",["dojo/has"],
function(has){var tested={};return function(){var test,args=arguments;for(var i=0;i<args.length;i++){var test=args[i];if(!tested[test]){tested[test]=true;var parts=test.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),hasResult=has(parts[2]),lower=-parts[4];if((lower>0?lower<=hasResult&&(-parts[5]||lower)>=hasResult:!!hasResult)==!parts[1])document.documentElement.className+=" has-"+test}}}})},"xfile/views/SplitView":function(){define("xfile/views/SplitView",["dojo/_base/declare","xide/views/SplitView",
"xide/types","xide/utils","xfile/factory","xfile/factory/config"],function(declare,SplitView,types,utils,factory){return declare("xfile.views.SplitView",[SplitView],{panelMixin:null,onChildAdded:function(who,what){this.resize()},getCurrentParent:function(){return null},openItem:function(){},getCookiePrefix:function(forSuffix){if(this.owner&&this.owner.beanContextName)return(this.owner.beanContextName||"")+"_"+forSuffix;return""},createPanel:function(panelOptions,dstContainer,cookiePrefix,region){if(!this.defaultStore)this.defaultStore=
this.config.defaultStoreName;var panel=this.delegate.openUrl(this.config.START_PATH,dstContainer,this.config,this.getCookiePrefix(cookiePrefix),region,this.defaultStore,this.defaultStoreOptions,this.panelMixin);panel.owner=this.owner;return panel},startup:function(){this.inherited(arguments);var config=this.config=factory.cloneConfig(this.config);var cPrefixL="splitLeft";this.leftPanel=this.createPanel(this.config.FILE_PANEL_OPTIONS_LEFT,this.layoutLeft,cPrefixL,this.region);this.leftPanel.parentView=
this;var cPrefixR="splitRight";this.centerPanel=this.createPanel(this.config.FILE_PANEL_OPTIONS_RIGHT,this.layoutCenter,cPrefixR,this.region);this.centerPanel.owner=this.leftPanel;this.centerPanel.parentView=this},destroy:function(){this.inherited(arguments);utils.destroyWidget(this.leftPanel);utils.destroyWidget(this.centerPanel)}})})},"dojo/main":function(){define(["./_base/kernel","./has","require","./sniff","./_base/lang","./_base/array","./_base/config","./ready","./_base/declare","./_base/connect",
"./_base/Deferred","./_base/json","./_base/Color","./has!dojo-firebug?./_firebug/firebug","./_base/browser","require"],function(kernel,has,require,sniff,lang,array,config,ready){if(config.isDebug)require(["./_firebug/firebug"]);1||has.add("dojo-config-require",1);if(1){var deps=config.require;if(deps){deps=array.map(lang.isArray(deps)?deps:[deps],function(item){return item.replace(/\./g,"/")});if(kernel.isAsync)require(deps);else ready(1,function(){require(deps)})}}return kernel})},"xfile/views/FileSelectDialog":function(){define("xfile/views/FileSelectDialog",
["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","dojo/dom-geometry","xfile/views/FilePanel","./ActionDialog","xfile/factory","xide/types","xide/utils","xfile/views/FilePicker"],function(declare,lang,domClass,domGeometry,FilePanel,ActionDialog,factory,types,utils,FilePicker){return declare("xfile.views.FileSelectDialog",[ActionDialog],{filePanel:null,filePanelOptions:null,lastMount:null,filePicker:null,defaultStoreOptions:null,defaultOptions:null,filePickerMixin:null,lastSelectedItem:null,
destroy:function(){if(this.filePicker)this.filePicker.destroy();this.inherited(arguments)},onCancel:function(){this.destroy();this.inherited(arguments)},onOk:function(){this.destroy();this.inherited(arguments)},onBrowserFilesDropped:function(srcView,files){return this.ctx.getPanelManager().onBrowserFilesDropped(this.filePanel,files)},onChangeRoot:function(view,url){this.lastMount=url;return this.ctx.getPanelManager().onChangeRoot(this.filePanel,url)},openItem:function(){},getSources:function(){return this.ctx.getPanelManager().getSources()},
_createFilePanel:function(title,url){var _defaultOptions={title:title||url||"./",url:url,closable:false,config:this.config||this.owner.config,className:"xfileContainerEmbedded filePanel",ctx:this.ctx,parentContainer:null,delegate:this.ctx.getPanelManager(),allowFiles:true,cookiePrefix:"middle",lazy:false,store:this.store||this.owner.store};if(this.filePanelOptions){lang.mixin(_defaultOptions,this.filePanelOptions);this.filePanelOptions.isDialog=true;this.filePanelOptions.isPicker=true}this.filePanel=
new FilePanel(_defaultOptions,dojo.doc.createElement("div"));this.containerNode.appendChild(this.filePanel.domNode);this.filePanel.startup()},initWithWithDestination:function(){this._createFilePanel(this.dst?this.dst.name:"",this.dst?this.dst.path:"");this.addActionButtons();this.fixHeight();this.resize()},resizeToNode:function(parent,what){if(parent&&what){var size=domGeometry.getMarginBox(parent);var dstHeight=size.h;dstHeight-=60;what.containerNode.style.height=dstHeight+"px";what.resize();setTimeout(function(){what.resize()},
300)}},_resizeFilePicker:function(){this.resizeToNode(this.domNode,this.filePicker.layoutMain);this.filePicker.layoutMain.resize()},resize:function(){this.inherited(arguments);if(this.filePicker)this._resizeFilePicker()},getDefaultStoreOptions:function(){return this.defaultOptions.defaultStoreOptions||this.defaultStoreOptions||{"fields":1663,"includedFileExtensions":"*","excludedFileExtensions":"*"}},getBeanContextName:function(){if(this.configMixin&&this.configMixin.beanContextName)return this.configMixin.beanContextName;
return null},onItemSelected:function(evt){var callee=evt.callee;var _beanContextName=this.getBeanContextName();if(callee&&callee.delegate&&callee.delegate.owner&&callee.delegate.owner.owner&&callee.delegate.owner.owner==this.filePicker)this.lastSelectedItem=evt.item;else if(evt.beanContextName&&_beanContextName&&evt.beanContextName===_beanContextName)this.lastSelectedItem=evt.item},initWithConfig:function(config){var ctx=this.ctx||window["xFileContext"];var thiz=this;var defaultStoreName="root";if(ctx.defaultOptions&&
ctx.defaultOptions.defaultStoreName)defaultStoreName=ctx.defaultOptions.defaultStoreName;config=config||this.config||this.owner.config;config=factory.cloneConfig(config);domClass.add(this.domNode,"filePickerDialogLarge");config.PANEL_OPTIONS.ALLOW_LOG_VIEW=false;config.PANEL_OPTIONS.ALLOW_NEW_TABS=false;config.PANEL_OPTIONS.ALLOW_BREADCRUMBS=false;config.FILE_PANEL_OPTIONS_LEFT={"LAYOUT":1,"AUTO_OPEN":"true"};config.FILE_PANEL_OPTIONS_MAIN={"LAYOUT":3,"AUTO_OPEN":"true"};config.FILE_PANEL_OPTIONS_RIGHT=
{"LAYOUT":2,"AUTO_OPEN":"false"};if(!config.columns){var columns={};columns[types.FILE_GRID_COLUMNS.NAME]=true;columns[types.FILE_GRID_COLUMNS.SIZE]=true;columns[types.FILE_GRID_COLUMNS.MODIFIED]=false;config.columns=columns}if(this.configMixin)config=lang.mixin(config,this.configMixin);var _pickerArgs={ctx:this.ctx,config:config,panelManager:this.ctx.getPanelManager(),persistent:false,defaultStore:defaultStoreName,defaultStoreOptions:this.getDefaultStoreOptions(),owner:this};if(this.filePickerMixin)lang.mixin(_pickerArgs,
this.filePickerMixin);this.filePicker=utils.addWidget(FilePicker,_pickerArgs,this,this.containerNode,true);this.filePicker.initWithConfig(config);this.addActionButtons();this.fixHeight();this.resize();this.subscribe(types.EVENTS.ITEM_SELECTED,this.onItemSelected);setTimeout(function(){thiz._position()},10)},constructor:function(defaultOptions){this.defaultOptions=defaultOptions||{};this.filePickerMixin=this.defaultOptions.filePickerMixin}})})},"xwordpress/Imports/DojoxImports":function(){define("xwordpress/Imports/DojoxImports",
["dojo/_base/declare","dojox/math/BigInteger-ext","dojox/fx","dojox/fx/flip","dojo/cldr/nls/en/number","dojo/cldr/nls/en-gb/number","dojo/fx/easing","dojox/layout/ToggleSplitter","dojox/image/Lightbox"],function(declare){return declare("xwordpress.Imports.DojoxImports",null,{constructor:function(){}})})},"dgrid/tree":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","dojo/query","dojo/on","dojo/aspect","./util/has-css3","./Grid","dojo/has!touch?./util/touch","put-selector/put"],
function(declare,arrayUtil,Deferred,querySelector,on,aspect,has,Grid,touchUtil,put){function defaultRenderExpando(level,hasChildren,expanded,object){var dir=this.grid.isRTL?"right":"left",cls=".dgrid-expando-icon",node;if(hasChildren)cls+=".ui-icon.ui-icon-triangle-1-"+(expanded?"se":"e");node=put("div"+cls+"[style\x3dmargin-"+dir+": "+level*(this.indentWidth||9)+"px; float: "+dir+"]");node.innerHTML="\x26nbsp;";return node}function ontransitionend(event){var container=this,height=this.style.height;
if(height)this.style.display=height=="0px"?"none":"block";if(event){put(this,".dgrid-tree-resetting");setTimeout(function(){put(container,"!dgrid-tree-resetting")})}this.style.height=""}function tree(column){var originalRenderCell=column.renderCell||Grid.defaultRenderCell;var currentLevel,clicked;if(!column)column={};column.shouldExpand=column.shouldExpand||function(row,level,previouslyExpanded){return previouslyExpanded};aspect.after(column,"init",function(){var grid=column.grid,colSelector=".dgrid-content .dgrid-column-"+
column.id,listeners=[];grid.cleanEmptyObservers=false;if(!grid.store)throw new Error("dgrid tree column plugin requires a store to operate.");if(!column.renderExpando)column.renderExpando=defaultRenderExpando;listeners.push(grid.on(column.expandOn||".dgrid-expando-icon:click,"+colSelector+":dblclick,"+colSelector+":keydown",function(event){var row=grid.row(event);if((!grid.store.mayHaveChildren||grid.store.mayHaveChildren(row.data))&&(event.type!="keydown"||event.keyCode==32)&&!(event.type=="dblclick"&&
clicked&&clicked.count>1&&row.id==clicked.id&&event.target.className.indexOf("dgrid-expando-icon")>-1))grid.expand(row);if(event.target.className.indexOf("dgrid-expando-icon")>-1)if(clicked&&clicked.id==grid.row(event).id)clicked.count++;else clicked={id:grid.row(event).id,count:1}}));if(has("touch"))listeners.push(grid.on(touchUtil.selector(colSelector,touchUtil.dbltap),function(){grid.expand(this)}));if(!grid._expanded)grid._expanded={};listeners.push(aspect.after(grid,"insertRow",function(rowElement){var row=
this.row(rowElement),expanded=column.shouldExpand(row,currentLevel,this._expanded[row.id]);if(expanded)this.expand(rowElement,true,true);return rowElement}));listeners.push(aspect.before(grid,"removeRow",function(rowElement,justCleanup){var connected=rowElement.connected;if(connected){querySelector("\x3e.dgrid-row",connected).forEach(function(element){grid.removeRow(element,true)});if(!justCleanup)put(connected,"!")}}));if(column.collapseOnRefresh)listeners.push(aspect.after(grid,"cleanup",function(){this._expanded=
{}}));grid._calcRowHeight=function(rowElement){var connected=rowElement.connected;return rowElement.offsetHeight+(connected?connected.offsetHeight:0)};grid.expand=function(target,expand,noTransition){var row=target.element?target:grid.row(target),hasTransitionend=has("transitionend"),dfd=new Deferred,promise=dfd.promise;dfd.resolve();target=row.element;target=target.className.indexOf("dgrid-expando-icon")>-1?target:querySelector(".dgrid-expando-icon",target)[0];if(target&&target.mayHaveChildren&&
(noTransition||expand!==!!this._expanded[row.id])){var expanded=expand===undefined?!this._expanded[row.id]:expand;put(target,".ui-icon-triangle-1-"+(expanded?"se":"e")+"!ui-icon-triangle-1-"+(expanded?"e":"se"));var preloadNode=target.preloadNode,rowElement=row.element,container,containerStyle,scrollHeight,options={originalQuery:this.query};if(!preloadNode){container=rowElement.connected=put("div.dgrid-tree-container");preloadNode=target.preloadNode=put(rowElement,"+",container,"div.dgrid-preload");
var query=function(options){return grid.store.getChildren(row.data,options)};if(column.allowDuplicates)options.parentId=row.id;if("level"in target)query.level=target.level;promise=promise.then(function(){return grid.renderQuery?grid.renderQuery(query,preloadNode,options):grid.renderArray(query(options),preloadNode,"level"in query?{queryLevel:query.level}:{})}).then(function(){if(grid._expanded[row.id]&&hasTransitionend){var scrollHeight=container.scrollHeight;container.style.height=scrollHeight?scrollHeight+
"px":"auto"}});if(hasTransitionend)on(container,hasTransitionend,ontransitionend);else ontransitionend.call(container)}container=rowElement.connected;container.hidden=!expanded;containerStyle=container.style;if(!hasTransitionend||noTransition){containerStyle.display=expanded?"block":"none";containerStyle.height=""}else{if(expanded){containerStyle.display="block";scrollHeight=container.scrollHeight;containerStyle.height="0px"}else{put(container,".dgrid-tree-resetting");containerStyle.height=container.scrollHeight+
"px"}setTimeout(function(){put(container,"!dgrid-tree-resetting");containerStyle.height=expanded?scrollHeight?scrollHeight+"px":"auto":"0px"})}if(expanded)this._expanded[row.id]=true;else delete this._expanded[row.id]}return promise};aspect.after(column,"destroy",function(){arrayUtil.forEach(listeners,function(l){l.remove()});delete grid.expand;delete grid._calcRowHeight})});column.renderCell=function(object,value,td,options){var grid=column.grid,level=Number(options&&options.queryLevel)+1,mayHaveChildren=
!grid.store.mayHaveChildren||grid.store.mayHaveChildren(object),parentId=options.parentId,expando,node;level=currentLevel=isNaN(level)?0:level;expando=column.renderExpando(level,mayHaveChildren,grid._expanded[(parentId?parentId+"-":"")+grid.store.getIdentity(object)],object);expando.level=level;expando.mayHaveChildren=mayHaveChildren;node=originalRenderCell.call(column,object,value,td,options);if(node&&node.nodeType){put(td,expando);put(td,node)}else td.insertBefore(expando,td.firstChild)};return column}
tree.defaultRenderExpando=defaultRenderExpando;return tree})},"xide/layout/TabContainer":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/topic","dojo/dom-construct","xide/utils","dijit/layout/TabContainer","xide/factory","xide/types","dojox/layout/GridContainer","./ContentPane","dojo/dnd/Source","dojo/dnd/Target","dojo/dom-class","xide/layout/LayoutContainer","dojo/dom-geometry"],function(declare,array,topic,domConstruct,utils,TabContainer,factory,types,GridContainer,ContentPane,
Source,Target,domClass,LayoutContainer,domGeometry){return declare("xide.layout.TabContainer",[TabContainer,LayoutContainer],{allowSplit:true,didSplit:false,selectedChildWidget:null,dndType:"TabContainer",splitColumns:2,gridContainer:null,activeTabContainer:null,destroyOnEmpty:true,otherTabContainer:null,sizeTarget:null,isSplitted:function(){return this.gridContainer!=null},isEmpty:function(){return this.getChildren().length==0},_restoreSingle:function(){var fullContainer=this.isEmpty()===true?this.otherTabContainer:
this;if(!fullContainer)return;var tmpPos=dojo.doc.createElement("div");dojo.place(fullContainer.domNode,tmpPos);utils.destroyWidget(this.gridContainer.containerNode);this.otherTabContainer=null;fullContainer.otherTabContainer=null;fullContainer.gridContainer=null;fullContainer.addSplitMenu();this.parentContainer.containerNode.appendChild(fullContainer.domNode);var thiz=this;setTimeout(function(){factory.publish(types.EVENTS.RESIZE,{},this);fullContainer.selectedChildWidget.onResize();fullContainer.resize()},
800);fullContainer.resize();utils.destroyWidget(this)},_checkEmpty:function(){var child=this.getChildren()},removeChild:function(page,checkEmpty,destroy){this.inherited(arguments);if(destroy!==false&&page.destroy)page.destroy();var child=this.getChildren();if(this.onOneTabLeft&&child.length===1)this.onOneTabLeft(this)},_createGridContainer:function(){var gc=new GridContainer({acceptTypes:[],hasResizableColumns:true,nbZones:2,style:{height:"100%"},splitter:true});this.gridContainer=gc;return gc},updateSize:function(tabContainer,
target){var children=tabContainer.getChildren();for(var i=0;i<children.length;i++){var pane=children[i];this.resizeToNode(this.sizeTarget,pane)}},resizeToNode:function(parent,what,offset){if(parent&&what&&what.containerNode){var size=domGeometry.getMarginBox(parent);var dstHeight=size.h;if(offset!=null)dstHeight-=offset;else dstHeight-=100;what.containerNode.style.height=dstHeight+"px"}},resizeToNodeEx:function(parent,what,offset){if(parent&&what){var size=domGeometry.getMarginBox(parent);var dstHeight=
size.h;if(offset!=null)dstHeight-=offset;else dstHeight-=100;what.style.height=dstHeight+"px"}},onResize:function(){return;if(!this.sizeTarget||!this.gridContainer)return;if(this.gridContainer.paneLeft)this.resizeToNode(this.gridContainer.paneLeft,this.sizeTarget);if(!this.isEmpty())this.updateSize(this,this.sizeTarget);if(this.gridContainer.paneRight)this.resizeToNode(this.gridContainer.paneRight,this.sizeTarget);if(this.otherTabContainer)this.updateSize(this.otherTabContainer,this.sizeTarget)},
splitVertical:function(w){try{var tmpPos=dojo.doc.createElement("div");dojo.place(this.domNode,tmpPos);var gridContainer=this._createGridContainer();utils.addChild(this.parentContainer,gridContainer);var paneLeft=new ContentPane({cssClass:"gridZoneWrapper"});var paneRight=new ContentPane({cssClass:"gridZoneWrapper"});gridContainer.addChild(paneLeft,0);gridContainer.addChild(paneRight,1);gridContainer.paneLeft=paneLeft;gridContainer.paneRight=paneRight;paneLeft.containerNode.appendChild(this.domNode);
gridContainer.disableDnd()}catch(e){debugger}factory.publish(types.EVENTS.RESIZE,{},this);var thiz=this;this.removeSplitMenu();var newTabContainer=new xide.layout.TabContainer({delegate:thiz.delegate,tabStrip:true,tabPosition:"top",splitter:true,region:"center",style:"width:inherit;height:inherit;",parentContainer:thiz.parentContainer,allowSplit:true,selfAccept:true,gridContainer:gridContainer,otherTabContainer:thiz},dojo.doc.createElement("div"));thiz.otherTabContainer=newTabContainer;factory.publish(types.EVENTS.RESIZE,
{},this);thiz.selectedChildWidget.onResize();var ori=thiz.selectedChildWidget;thiz.removeChild(thiz.selectedChildWidget,false);paneRight.containerNode.appendChild(newTabContainer.domNode);newTabContainer.startup();newTabContainer.addChild(ori);newTabContainer.selectedChildWidget=ori;thiz.makeDNDTarget(newTabContainer);thiz.makeDNDTarget(thiz);domClass.add(newTabContainer.domNode,"dojoDndItem");domClass.add(thiz.domNode,"dojoDndItem");this.publish(types.EVENTS.RESIZE,{});this.onContainerSplitted(this,
newTabContainer)},makeDNDTarget:function(tabContainer){var thiz=this;dojo.dnd.Source(tabContainer.domNode,{className:"container",copyOnly:false,selfAccept:false,allowNested:false,occupied:false,sourceContainer:tabContainer,checkAcceptance:function(sources,nodes){return true},onDropExternal:function(source,nodes,copy){thiz.onDrop(source.sourceContainer,this.sourceContainer);return}})},patchTabButton:function(child){var _id=this.id+"_tablist_"+child.id;var btn=dijit.registry.byId(_id);if(btn){btn.targetContainer=
child;var dndTarget=Source(btn.domNode,{className:"container",copyOnly:false,selfAccept:false,allowNested:true,occupied:false,sourceContainer:this,checkAcceptance:function(sources,nodes){return true}})}},removeSplitMenu:function(){var menu=dijit.registry.byId(this.id+"_tablist_Menu");if(menu)if(menu["splitVerticalMenuItem"]){menu.removeChild(menu["splitVerticalMenuItem"]);menu["splitVerticalMenuItem"]=null}},addSplitMenu:function(child){var menu=dijit.registry.byId(this.id+"_tablist_Menu");if(menu){var thiz=
this;if(!menu["splitVerticalMenuItem"]){menu["splitVerticalMenuItem"]=new dijit.MenuItem({label:"Split Vertical",onClick:function(evt){thiz.splitVertical(dijit.registry.byNode(this.getParent().currentTarget))}});menu.addChild(menu["splitVerticalMenuItem"])}}},addChild:function(child,index,select){child.parentContainer=this;this.inherited(arguments);if(this.delegate&&this.delegate.onChildAdded)this.delegate.onChildAdded(this,child);if(select===true){this.selectChild(child);this.onShowChild(child)}if(this.allowSplit){if(this.otherTabContainer==
null)this.addSplitMenu();this.patchTabButton(child)}factory.publish(types.EVENTS.RESIZE,{},this)},onDrop:function(sourceTabContainer,dstTabContainer){var child=sourceTabContainer.selectedChildWidget;if(!child)return;try{sourceTabContainer.removeChild(child)}catch(e){console.error("error with removing child")}dstTabContainer.addChild(child);dstTabContainer.selectChild(child);factory.publish(types.EVENTS.RESIZE,{},this)},startup:function(){this.inherited(arguments);var thiz=this;if(this.allowSplit){var dst=
dojo.byId(this.id+"_tablist");if(dst)var dndTarget=dojo.dnd.Source(dst,{className:"container",copyOnly:false,selfAccept:false,allowNested:false,occupied:false,sourceContainer:this,checkAcceptance:function(sources,nodes){return true},onDropExternal:function(source,nodes,copy){thiz.onDrop(source.sourceContainer,this.sourceContainer);return}})}domClass.add(this.containerNode,"ui-widget-content");dojo.connect(this,"removeChild",this,function(view){factory.publish(types.EVENTS.ON_VIEW_REMOVED,{container:this,
view:view,owner:this.delegate})});dojo.connect(this.containerNode,"onclick",this,function(view){this.activeTabContainer=this});dojo.connect(this,"addChild",this,function(view){factory.publish(types.EVENTS.ON_VIEW_ADDED,{container:this,view:view,owner:this.delegate})});dojo.connect(null,dojo.global.onorientationchange!==undefined?"onorientationchange":"onresize",this,function(){if(thiz.gridContainer)thiz.gridContainer.resize()});factory.subscribe(types.EVENTS.RESIZE,this.onResize,this)}})})},"dojox/rpc/JsonRPC":function(){define("dojox/rpc/JsonRPC",
["dojo","dojox","dojox/rpc/Service","dojo/errors/RequestError"],function(dojo,dojox,Service,RequestError){function jsonRpcEnvelope(version){return{serialize:function(smd,method,data,options){var d={id:this._requestId++,method:method.name,params:data};if(version)d.jsonrpc=version;return{data:dojo.toJson(d),handleAs:"json",contentType:"application/json",transport:"POST"}},deserialize:function(obj){if("Error"==obj.name||obj instanceof RequestError)obj=dojo.fromJson(obj.responseText);if(obj.error){var e=
new Error(obj.error.message||obj.error);e._rpcErrorObject=obj.error;return e}return obj.result}}}dojox.rpc.envelopeRegistry.register("JSON-RPC-1.0",function(str){return str=="JSON-RPC-1.0"},dojo.mixin({namedParams:false},jsonRpcEnvelope()));dojox.rpc.envelopeRegistry.register("JSON-RPC-2.0",function(str){return str=="JSON-RPC-2.0"},dojo.mixin({namedParams:true},jsonRpcEnvelope("2.0")))})},"xfile/widgets/LayoutSelector":function(){define("xfile/widgets/LayoutSelector",["dojo/_base/declare","dojo/dom-class",
"xide/widgets/TemplatedWidgetBase","xide/types"],function(declare,domClass,TemplatedWidgetBase,types){return declare("xfile.widgets.LayoutSelector",[TemplatedWidgetBase],{wButton:null,wThumb:null,wList:null,wTree:null,wPreview:null,wCover:null,wSplitV:null,wSplitH:null,currentModeClass:"fileLayoutTreeIcon",layout:null,config:null,addJQueryClasses:true,templateString:"\x3cdiv\x3e\x3cdiv class\x3d'fileLayoutSelector' data-dojo-type\x3d'dijit.form.DropDownButton' data-dojo-props\x3d\"iconClass:'el-icon-th-list'\" data-dojo-attach-point\x3d'wButton'\x3e"+
"\x3cspan\x3e\x3c/span\x3e"+"\x3cdiv data-dojo-attach-point\x3d'menu' data-dojo-type\x3d'dijit.Menu' style\x3d'display: none;'\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'el-icon-th-large'\" data-dojo-attach-point\x3d'wThumb'\x3eThumbs\x3c/div\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'el-icon-lines'\" data-dojo-attach-point\x3d'wList'\x3eList\x3c/div\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'el-icon-eye-open'\" data-dojo-attach-point\x3d'wPreview'\x3ePreview\x3c/div\x3e"+
"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'el-icon-picture'\" data-dojo-attach-point\x3d'wCover'\x3eCover\x3c/div\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'fa-columns'\" data-dojo-attach-point\x3d'wSplitV'\x3eSplit-V\x3c/div\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'fa-columnsFlat'\" data-dojo-attach-point\x3d'wSplitH'\x3eSplit-H\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e",
open:function(){this.wButton.domNode.focus();this.wButton.openDropDown();var thiz=this;setTimeout(function(){thiz.wTree.focus()},0)},onModeChanged:function(mode,updateDelegate,widget){if(this.wButton&&widget)this.wButton.set("iconClass",""+widget.iconClass);var nextMode="";if(updateDelegate===true)this.delegate.onLayoutModeChanged(mode);if(widget)this.currentModeClass=widget.iconClass},createMenuItem:function(iconClass,label,mode){var item=new dijit.MenuItem({iconClass:iconClass,label:label,mode:mode});
this.menu.addChild(item);var thiz=this;item.domNode.onclick=function(){thiz.onModeChanged(mode,true)};this.fixButton(item,mode);return item},fixButton:function(button,layoutMode){var thiz=this;if(button&&button.iconNode){domClass.remove(button.iconNode,"dijitReset");domClass.add(button.iconNode,"actionToolbarButtonElusive");domClass.add(button.domNode,"ui-menu-item");if(layoutMode)button.on("click",function(){thiz.onModeChanged(layoutMode,true,button)})}},startup:function(){this.inherited(arguments);
if(this.layout!=null)this.onModeChanged(this.layout,false);if(typeof ImageFlowApp=="undefined"){this.wButton.removeChild(this.wCover);this.wCover=null}var thiz=this;var hasTree=true;if(hasTree)this.wTree=this.createMenuItem("el-icon-delicious","Tree",types.FILE_PANEL_LAYOUT.TREE);if(this.addJQueryClasses)domClass.add(this.menu.containerNode,"ui-menu ui-widget ui-widget-content ui-corner-all");this.fixButton(this.wButton);this.fixButton(this.wList,types.FILE_PANEL_LAYOUT.LIST);this.fixButton(this.wTree,
types.FILE_PANEL_LAYOUT.TREE);this.fixButton(this.wThumb,types.FILE_PANEL_LAYOUT.THUMB);this.fixButton(this.wPreview,types.FILE_PANEL_LAYOUT.PREVIEW);this.fixButton(this.wCover,types.FILE_PANEL_LAYOUT.COVER);this.fixButton(this.wSplitV,types.FILE_PANEL_LAYOUT.SPLIT_VERTICAL);this.fixButton(this.wSplitH,types.FILE_PANEL_LAYOUT.SPLIT_HORIZONTAL)}})})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(lang){var filter={};lang.setObject("dojo.data.util.filter",filter);filter.patternToRegExp=
function(pattern,ignoreCase){var rxp="^";var c=null;for(var i=0;i<pattern.length;i++){c=pattern.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=pattern.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c}}rxp+="$";if(ignoreCase)return new RegExp(rxp,"mi");else return new RegExp(rxp,"m")};return filter})},"dojo/dnd/common":function(){define("dojo/dnd/common",
["../_base/connect","../_base/kernel","../_base/lang","../dom"],function(connect,kernel,lang,dom){var exports=lang.getObject("dojo.dnd",true);exports.getCopyKeyState=connect.isCopyKey;exports._uniqueId=0;exports.getUniqueId=function(){var id;do id=kernel._scopeName+"Unique"+ ++exports._uniqueId;while(dom.byId(id));return id};exports._empty={};exports.isFormElement=function(e){var t=e.target;if(t.nodeType==3)t=t.parentNode;return" button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+
" ")>=0};return exports})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(Deferred,Promise){return function when(valueOrPromise,callback,errback,progback){var receivedPromise=valueOrPromise&&typeof valueOrPromise.then==="function";var nativePromise=receivedPromise&&valueOrPromise instanceof Promise;if(!receivedPromise)if(callback)return callback(valueOrPromise);else return(new Deferred).resolve(valueOrPromise);else if(!nativePromise){var deferred=new Deferred(valueOrPromise.cancel);
valueOrPromise.then(deferred.resolve,deferred.reject,deferred.progress);valueOrPromise=deferred.promise}if(callback||errback||progback)return valueOrPromise.then(callback,errback,progback);return valueOrPromise}})},"dijit/tree/ObjectStoreModel":function(){define("dijit/tree/ObjectStoreModel",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/when"],function(array,aspect,declare,lang,when){return declare("dijit.tree.ObjectStoreModel",null,{store:null,labelAttr:"name",labelType:"text",
root:null,query:null,constructor:function(args){lang.mixin(this,args);this.childrenCache={}},destroy:function(){for(var id in this.childrenCache)this.childrenCache[id].close&&this.childrenCache[id].close()},getRoot:function(onItem,onError){if(this.root)onItem(this.root);else{var res;when(res=this.store.query(this.query),lang.hitch(this,function(items){if(items.length!=1)throw new Error("dijit.tree.ObjectStoreModel: root query returned "+items.length+" items, but must return exactly one");this.root=
items[0];onItem(this.root);if(res.observe)res.observe(lang.hitch(this,function(obj){this.onChange(obj)}),true)}),onError)}},mayHaveChildren:function(){return true},getChildren:function(parentItem,onComplete,onError){var id=this.store.getIdentity(parentItem);if(this.childrenCache[id]){when(this.childrenCache[id],onComplete,onError);return}var res=this.childrenCache[id]=this.store.getChildren(parentItem);when(res,onComplete,onError);if(res.observe)res.observe(lang.hitch(this,function(obj,removedFrom,
insertedInto){this.onChange(obj);if(removedFrom!=insertedInto)when(res,lang.hitch(this,"onChildrenChange",parentItem))}),true)},isItem:function(){return true},getIdentity:function(item){return this.store.getIdentity(item)},getLabel:function(item){return item[this.labelAttr]},newItem:function(args,parent,insertIndex,before){return this.store.put(args,{parent:parent,before:before})},pasteItem:function(childItem,oldParentItem,newParentItem,bCopy,insertIndex,before){if(!bCopy){var oldParentChildren=[].concat(this.childrenCache[this.getIdentity(oldParentItem)]),
index=array.indexOf(oldParentChildren,childItem);oldParentChildren.splice(index,1);this.onChildrenChange(oldParentItem,oldParentChildren)}return this.store.put(childItem,{overwrite:true,parent:newParentItem,before:before})},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"dojox/rpc/Service":function(){define("dojox/rpc/Service",["dojo","dojox","dojo/AdapterRegistry","dojo/_base/url"],function(dojo,dojox){dojo.declare("dojox.rpc.Service",null,{constructor:function(smd,
options){var url;var self=this;function processSmd(smd){smd._baseUrl=new dojo._Url(dojo.isBrowser?location.href:dojo.config.baseUrl,url||".")+"";self._smd=smd;for(var serviceName in self._smd.services){var pieces=serviceName.split(".");var current=self;for(var i=0;i<pieces.length-1;i++)current=current[pieces[i]]||(current[pieces[i]]={});current[pieces[pieces.length-1]]=self._generateService(serviceName,self._smd.services[serviceName])}}if(smd)if(dojo.isString(smd)||smd instanceof dojo._Url){if(smd instanceof
dojo._Url)url=smd+"";else url=smd;var text=dojo._getText(url);if(!text)throw new Error("Unable to load SMD from "+smd);else processSmd(dojo.fromJson(text))}else processSmd(smd);this._options=options?options:{};this._requestId=0},_generateService:function(serviceName,method){if(this[method])throw new Error("WARNING: "+serviceName+" already exists for service. Unable to generate function");method.name=serviceName;var func=dojo.hitch(this,"_executeMethod",method);var transport=dojox.rpc.transportRegistry.match(method.transport||
this._smd.transport);if(transport.getExecutor)func=transport.getExecutor(func,method,this);var schema=method.returns||(method._schema={});var servicePath="/"+serviceName+"/";schema._service=func;func.servicePath=servicePath;func._schema=schema;func.id=dojox.rpc.Service._nextId++;return func},_getRequest:function(method,args){var smd=this._smd;var envDef=dojox.rpc.envelopeRegistry.match(method.envelope||smd.envelope||"NONE");var parameters=(method.parameters||[]).concat(smd.parameters||[]);if(envDef.namedParams){if(args.length==
1&&dojo.isObject(args[0]))args=args[0];else{var data={};for(var i=0;i<method.parameters.length;i++)if(typeof args[i]!="undefined"||!method.parameters[i].optional)data[method.parameters[i].name]=args[i];args=data}if(method.strictParameters||smd.strictParameters)for(i in args){var found=false;for(var j=0;j<parameters.length;j++)if(parameters[j].name==i)found=true;if(!found)delete args[i]}for(i=0;i<parameters.length;i++){var param=parameters[i];if(!param.optional&&param.name&&!args[param.name])if(param["default"])args[param.name]=
param["default"];else if(!(param.name in args))throw new Error("Required parameter "+param.name+" was omitted");}}else if(parameters&&parameters[0]&&parameters[0].name&&args.length==1&&dojo.isObject(args[0]))if(envDef.namedParams===false)args=dojox.rpc.toOrdered(parameters,args);else args=args[0];if(dojo.isObject(this._options))args=dojo.mixin(args,this._options);var schema=method._schema||method.returns;var request=envDef.serialize.apply(this,[smd,method,args]);request._envDef=envDef;var contentType=
method.contentType||smd.contentType||request.contentType;return dojo.mixin(request,{sync:dojox.rpc._sync,contentType:contentType,headers:method.headers||smd.headers||request.headers||{},target:request.target||dojox.rpc.getTarget(smd,method),transport:method.transport||smd.transport||request.transport,envelope:method.envelope||smd.envelope||request.envelope,timeout:method.timeout||smd.timeout,callbackParamName:method.callbackParamName||smd.callbackParamName,rpcObjectParamName:method.rpcObjectParamName||
smd.rpcObjectParamName,schema:schema,handleAs:request.handleAs||"auto",preventCache:method.preventCache||smd.preventCache,frameDoc:this._options.frameDoc||undefined})},_executeMethod:function(method){var args=[];var i;for(i=1;i<arguments.length;i++)args.push(arguments[i]);var request=this._getRequest(method,args);var deferred=dojox.rpc.transportRegistry.match(request.transport).fire(request);deferred.addBoth(function(results){return request._envDef.deserialize.call(this,results)});return deferred}});
dojox.rpc.getTarget=function(smd,method){var dest=smd._baseUrl;if(smd.target)dest=new dojo._Url(dest,smd.target)+"";if(method.target)dest=new dojo._Url(dest,method.target)+"";return dest};dojox.rpc.toOrdered=function(parameters,args){if(dojo.isArray(args))return args;var data=[];for(var i=0;i<parameters.length;i++)data.push(args[parameters[i].name]);return data};dojox.rpc.transportRegistry=new dojo.AdapterRegistry(true);dojox.rpc.envelopeRegistry=new dojo.AdapterRegistry(true);dojox.rpc.envelopeRegistry.register("URL",
function(str){return str=="URL"},{serialize:function(smd,method,data){var d=dojo.objectToQuery(data);return{data:d,transport:"POST"}},deserialize:function(results){return results},namedParams:true});dojox.rpc.envelopeRegistry.register("JSON",function(str){return str=="JSON"},{serialize:function(smd,method,data){var d=dojo.toJson(data);return{data:d,handleAs:"json",contentType:"application/json"}},deserialize:function(results){return results}});dojox.rpc.envelopeRegistry.register("PATH",function(str){return str==
"PATH"},{serialize:function(smd,method,data){var i;var target=dojox.rpc.getTarget(smd,method);if(dojo.isArray(data))for(i=0;i<data.length;i++)target+="/"+data[i];else for(i in data)target+="/"+i+"/"+data[i];return{data:"",target:target}},deserialize:function(results){return results}});dojox.rpc.transportRegistry.register("POST",function(str){return str=="POST"},{fire:function(r){r.url=r.target;r.postData=r.data;return dojo.rawXhrPost(r)}});dojox.rpc.transportRegistry.register("GET",function(str){return str==
"GET"},{fire:function(r){r.url=r.target+(r.data?"?"+(r.rpcObjectParamName?r.rpcObjectParamName+"\x3d":"")+r.data:"");return dojo.xhrGet(r)}});dojox.rpc.transportRegistry.register("JSONP",function(str){return str=="JSONP"},{fire:function(r){r.url=r.target+(r.target.indexOf("?")==-1?"?":"\x26")+(r.rpcObjectParamName?r.rpcObjectParamName+"\x3d":"")+r.data;r.callbackParamName=r.callbackParamName||"callback";return dojo.io.script.get(r)}});dojox.rpc.Service._nextId=1;dojo._contentHandlers.auto=function(xhr){var handlers=
dojo._contentHandlers;var retContentType=xhr.getResponseHeader("Content-Type");var results=!retContentType?handlers.text(xhr):retContentType.match(/\/.*json/)?handlers.json(xhr):retContentType.match(/\/javascript/)?handlers.javascript(xhr):retContentType.match(/\/xml/)?handlers.xml(xhr):handlers.text(xhr);return results};return dojox.rpc.Service})},"dijit/tree/ForestStoreModel":function(){define("dijit/tree/ForestStoreModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang",
"./TreeStoreModel"],function(array,declare,kernel,lang,TreeStoreModel){return declare("dijit.tree.ForestStoreModel",TreeStoreModel,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(params){this.root={store:this,root:true,id:params.rootId,label:params.rootLabel,children:params.rootChildren}},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments)},getChildren:function(parentItem,callback,onError){if(parentItem===this.root)if(this.root.children)callback(this.root.children);
else this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(items){this.root.children=items;callback(items)}),onError:onError});else this.inherited(arguments)},isItem:function(something){return something===this.root?true:this.inherited(arguments)},fetchItemByIdentity:function(keywordArgs){if(keywordArgs.identity==this.root.id){var scope=keywordArgs.scope||kernel.global;if(keywordArgs.onItem)keywordArgs.onItem.call(scope,this.root)}else this.inherited(arguments)},getIdentity:function(item){return item===
this.root?this.root.id:this.inherited(arguments)},getLabel:function(item){return item===this.root?this.root.label:this.inherited(arguments)},newItem:function(args,parent,insertIndex){if(parent===this.root){this.onNewRootItem(args);return this.store.newItem(args)}else return this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(childItem,oldParentItem,newParentItem,bCopy,insertIndex){if(oldParentItem===this.root)if(!bCopy)this.onLeaveRoot(childItem);this.inherited(arguments,[childItem,
oldParentItem===this.root?null:oldParentItem,newParentItem===this.root?null:newParentItem,bCopy,insertIndex]);if(newParentItem===this.root)this.onAddToRoot(childItem)},onAddToRoot:function(item){0&&console.log(this,": item ",item," added to root")},onLeaveRoot:function(item){0&&console.log(this,": item ",item," removed from root")},_requeryTop:function(){var oldChildren=this.root.children||[];this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(newChildren){this.root.children=newChildren;
if(oldChildren.length!=newChildren.length||array.some(oldChildren,function(item,idx){return newChildren[idx]!=item}))this.onChildrenChange(this.root,newChildren)})})},onNewItem:function(item,parentInfo){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(item){if(array.indexOf(this.root.children,item)!=-1)this._requeryTop();this.inherited(arguments)},onSetItem:function(item,attribute,oldValue,newValue){this._requeryTop();this.inherited(arguments)}})})},"dgrid/editor":function(){define(["dojo/_base/kernel",
"dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/on","dojo/aspect","dojo/has","dojo/query","./Grid","put-selector/put","dojo/_base/sniff"],function(kernel,lang,arrayUtil,Deferred,on,aspect,has,query,Grid,put){var activeCell,activeValue,activeOptions,focusedCell;function updateInputValue(input,value){input.value=value;if(input.type=="radio"||input.type=="checkbox")input.checked=input.defaultChecked=!!value}function dataFromValue(value,oldValue){if(typeof oldValue=="number")value=isNaN(value)?
value:parseFloat(value);else if(typeof oldValue=="boolean")value=value=="true"?true:value=="false"?false:value;else if(oldValue instanceof Date){var asDate=new Date(value);value=isNaN(asDate.getTime())?value:asDate}return value}function dataFromEditor(column,cmp){if(typeof cmp.get=="function")return dataFromValue(cmp.get("value"));else return dataFromValue(cmp[cmp.type=="checkbox"||cmp.type=="radio"?"checked":"value"])}function setProperty(grid,cell,oldValue,value,triggerEvent){var cellElement,row,
column,eventObject;if((oldValue&&oldValue.valueOf())!=(value&&value.valueOf())){cellElement=cell.element;row=cell.row;column=cell.column;if(column.field&&row){eventObject={grid:grid,cell:cell,rowId:row.id,oldValue:oldValue,value:value,bubbles:true,cancelable:true};if(triggerEvent&&triggerEvent.type)eventObject.parentType=triggerEvent.type;if(on.emit(cellElement,"dgrid-datachange",eventObject))if(grid.updateDirty){grid.updateDirty(row.id,column.field,value);column.autoSave&&setTimeout(function(){grid._trackError("save")},
0)}else row.data[column.field]=value;else{var cmp;if(cmp=cellElement.widget){cmp._dgridIgnoreChange=true;cmp.set("value",oldValue);setTimeout(function(){cmp._dgridIgnoreChange=false},0)}else if(cmp=cellElement.input)updateInputValue(cmp,oldValue);return oldValue}}}return value}function setPropertyFromEditor(grid,cmp,triggerEvent){var cell=grid.cell(cmp.domNode||cmp),column=cell.column,value,id,editedRow;if(!cmp.isValid||cmp.isValid()){value=setProperty(grid,cell,activeCell?activeValue:cmp._dgridLastValue,
dataFromEditor(column,cmp),triggerEvent);if(activeCell)activeValue=value;else cmp._dgridLastValue=value;if(cmp.type==="radio"&&cmp.name&&!column.editOn&&column.field){editedRow=grid.row(cmp);query("input[type\x3dradio][name\x3d"+cmp.name+"]",grid.contentNode).forEach(function(radioBtn){var row=grid.row(radioBtn);if(radioBtn!==cmp&&radioBtn._dgridLastValue){radioBtn._dgridLastValue=false;if(grid.updateDirty)grid.updateDirty(row.id,column.field,false);else row.data[column.field]=false}});for(id in grid.dirty)if(editedRow.id!==
id&&grid.dirty[id][column.field])grid.updateDirty(id,column.field,false)}}}function createEditor(column){var editor=column.editor,editOn=column.editOn,grid=column.grid,isWidget=typeof editor!="string",args,cmp,node,putstr,handleChange;args=column.editorArgs||{};if(typeof args=="function")args=args.call(grid,column);if(isWidget){cmp=new editor(args);node=cmp.focusNode||cmp.domNode;node.className+=" dgrid-input";cmp.connect(cmp,editOn?"onBlur":"onChange",function(){if(!cmp._dgridIgnoreChange)setPropertyFromEditor(grid,
this,{type:"widget"})})}else{handleChange=function(evt){var target=evt.target;if("_dgridLastValue"in target&&target.className.indexOf("dgrid-input")>-1)setPropertyFromEditor(grid,target,evt)};if(!column.grid._hasInputListener){grid._hasInputListener=true;grid.on("change",function(evt){handleChange(evt)})}putstr=editor=="textarea"?"textarea":"input[type\x3d"+editor+"]";cmp=node=put(putstr+".dgrid-input",lang.mixin({name:column.field,tabIndex:isNaN(column.tabIndex)?-1:column.tabIndex},args));if(has("ie")<
9||has("ie")&&has("quirks"))if(editor=="radio"||editor=="checkbox")on(cmp,"click",function(evt){handleChange(evt)});else on(cmp,"change",function(evt){handleChange(evt)})}return cmp}function createSharedEditor(column,originalRenderCell){var cmp=createEditor(column),grid=column.grid,isWidget=cmp.domNode,node=cmp.domNode||cmp,focusNode=cmp.focusNode||node,reset=isWidget?function(){cmp.set("value",cmp._dgridLastValue)}:function(){updateInputValue(cmp,cmp._dgridLastValue);setPropertyFromEditor(column.grid,
cmp)},keyHandle;function blur(){var element=activeCell;focusNode.blur();if(typeof grid.focus==="function")setTimeout(function(){grid.focus(element)},isWidget&&has("ie")<9?15:0)}function onblur(){var parentNode=node.parentNode,i=parentNode.children.length-1,options={alreadyHooked:true},cell=grid.cell(node);on.emit(cell.element,"dgrid-editor-hide",{grid:grid,cell:cell,column:column,editor:cmp,bubbles:true,cancelable:false});column._editorBlurHandle.pause();parentNode.removeChild(node);put(cell.element,
"!dgrid-cell-editing");while(i--)put(parentNode.firstChild,"!");Grid.appendIfNode(parentNode,column.renderCell(column.grid.row(parentNode).data,activeValue,parentNode,activeOptions?lang.delegate(options,activeOptions):options));activeCell=activeValue=activeOptions=focusedCell=null}function dismissOnKey(evt){var key=evt.keyCode||evt.which;if(key==27){reset();activeValue=cmp._dgridLastValue;blur()}else if(key==13&&column.dismissOnEnter!==false)blur()}keyHandle=on(focusNode,"keydown",dismissOnKey);(column._editorBlurHandle=
on.pausable(cmp,"blur",onblur)).pause();return cmp}function showEditor(cmp,column,cellElement,value){var isWidget=cmp.domNode,grid=column.grid;if(!isWidget)updateInputValue(cmp,value);cellElement.innerHTML="";put(cellElement,".dgrid-cell-editing");put(cellElement,cmp.domNode||cmp);if(isWidget){if(!cmp._started)cmp.startup();cmp._dgridIgnoreChange=true;cmp.set("value",value);setTimeout(function(){cmp._dgridIgnoreChange=false},0)}cmp._dgridLastValue=value;if(activeCell){activeValue=value;on.emit(cellElement,
"dgrid-editor-show",{grid:grid,cell:grid.cell(cellElement),column:column,editor:cmp,bubbles:true,cancelable:false})}}function edit(cell){var row,column,cellElement,dirty,field,value,cmp,dfd;if(!cell.column)cell=this.cell(cell);if(!cell||!cell.element)return null;column=cell.column;field=column.field;cellElement=cell.element.contents||cell.element;if(cmp=column.editorInstance){if(activeCell!=cellElement){row=cell.row;dirty=this.dirty&&this.dirty[row.id];value=dirty&&field in dirty?dirty[field]:column.get?
column.get(row.data):row.data[field];if(!column.canEdit||column.canEdit(cell.row.data,value)){activeCell=cellElement;showEditor(column.editorInstance,column,cellElement,value);dfd=new Deferred;setTimeout(function(){if(cmp.focus)cmp.focus();if(column._editorBlurHandle)column._editorBlurHandle.resume();dfd.resolve(cmp)},0);return dfd.promise}}}else if(column.editor){cmp=cellElement.widget||cellElement.input;if(cmp){dfd=new Deferred;if(cmp.focus)cmp.focus();dfd.resolve(cmp);return dfd.promise}}return null}
return function(column,editor,editOn){var originalRenderCell=column.renderCell||Grid.defaultRenderCell,listeners=[],isWidget;function commonInit(column){var grid=column.grid,focusoutHandle;if(!grid.edit){grid.edit=edit;listeners.push(on(grid.domNode,".dgrid-input:focusin",function(){focusedCell=grid.cell(this)}));focusoutHandle=grid._editorFocusoutHandle=on.pausable(grid.domNode,".dgrid-input:focusout",function(){focusedCell=null});listeners.push(focusoutHandle);listeners.push(aspect.before(grid,
"removeRow",function(row){row=grid.row(row);if(focusedCell&&focusedCell.row.id===row.id){focusoutHandle.pause();setTimeout(function(){focusoutHandle.resume()},0)}}));listeners.push(aspect.after(grid,"insertRow",function(rowElement){var row=grid.row(rowElement);if(focusedCell&&focusedCell.row.id===row.id)grid.edit(grid.cell(row,focusedCell.column.id));return rowElement}))}}if(!column)column={};column.editor=editor=editor||column.editor||"text";column.editOn=editOn=editOn||column.editOn;isWidget=typeof editor!=
"string";if(column.widgetArgs){kernel.deprecated("column.widgetArgs","use column.editorArgs instead","dgrid 0.4");column.editorArgs=column.widgetArgs}aspect.after(column,"init",editOn?function(){commonInit(column);column.editorInstance=createSharedEditor(column,originalRenderCell)}:function(){var grid=column.grid;commonInit(column);if(isWidget)listeners.push(aspect.before(grid,"removeRow",function(rowElement){var cellElement=grid.cell(rowElement,column.id).element,widget=cellElement&&(cellElement.contents||
cellElement).widget;if(widget){grid._editorFocusoutHandle.pause();widget.destroyRecursive()}}))});aspect.after(column,"destroy",function(){arrayUtil.forEach(listeners,function(l){l.remove()});if(column._editorBlurHandle)column._editorBlurHandle.remove();if(editOn&&isWidget)column.editorInstance.destroyRecursive();column.grid.edit=null});column.renderCell=editOn?function(object,value,cell,options){if(!options||!options.alreadyHooked)on(cell.tagName=="TD"?cell:cell.parentNode,editOn,function(){activeOptions=
options;column.grid.edit(this)});return originalRenderCell.call(column,object,value,cell,options)}:function(object,value,cell,options){if(!column.canEdit||column.canEdit(object,value)){var cmp=createEditor(column);cmp.object=object;showEditor(cmp,column,cell,value);cell[isWidget?"widget":"input"]=cmp}else return originalRenderCell.call(column,object,value,cell,options)};return column}})},"xfile/widgets/EditorSelector":function(){define("xfile/widgets/EditorSelector",["dojo/_base/declare","dojo/dom-class",
"xide/widgets/TemplatedWidgetBase","xide/types"],function(declare,domClass,TemplatedWidgetBase,types){return declare("xfile.widgets.EditorSelector",[TemplatedWidgetBase],{wButton:null,wThumb:null,wList:null,wTree:null,currentModeClass:"fileLayoutTreeIcon",layout:null,config:null,allowedActions:null,addJQueryClasses:true,editors:null,templateString:"\x3cspan\x3e\x3cdiv class\x3d'fileLayoutSelector editorSelector' data-dojo-type\x3d'dijit.form.DropDownButton' data-dojo-props\x3d\"iconClass:'el-icon-file-edit'\" data-dojo-attach-point\x3d'wButton'\x3e"+
"\x3cspan\x3e\x3c/span\x3e"+"\x3cdiv data-dojo-attach-point\x3d'menu' data-dojo-type\x3d'dijit.Menu' style\x3d'display: none;'\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/span\x3e",open:function(){this.wButton.domNode.focus();this.wButton.openDropDown();var thiz=this;setTimeout(function(){thiz.wTree.focus()},0)},postMixInProperties:function(){this.inherited(arguments)},createMenuItem:function(iconClass,label,operation,clickcb){var item=new dijit.MenuItem({iconClass:iconClass,label:label,operation:operation,
item:null});this.menu.addChild(item);var thiz=this;this.fixButton(item);item.domNode.onclick=function(){if(clickcb)clickcb(item);else thiz.delegate.onButtonClicked(item)};if(this.delegate&&this.delegate.buttons)this.delegate.buttons.push(item);return item},fixButton:function(button){if(button&&button.iconNode){domClass.remove(button.iconNode,"dijitReset");domClass.add(button.iconNode,"actionToolbarButtonElusive")}},startup:function(){this.inherited(arguments);var thiz=this;domClass.add(this.menu.containerNode,
"ui-menu ui-widget ui-widget-content ui-corner-all");this.fixButton(this.wButton);if(this.editors)for(var i=0;i<this.editors.length;i++){var editor=this.editors[i];var _cb=editor.onEdit;var button=this.createMenuItem(editor.iconClass,editor.name,types.OPERATION.CUSTOM,_cb)}}})})},"xide/layout/LayoutContainer":function(){define(["dojo/_base/declare","xide/types","xide/widgets/_CSSMixin","xide/mixins/EventedMixin"],function(declare,types,_CSSMixin,EventedMixin){return declare("xide.layout.LayoutContainer",
[_CSSMixin,EventedMixin],{delegate:null,parentContainer:null,selectedChildWidget:null,onContainerSplitted:function(srcContainer,newContainer){var thiz=this;setTimeout(function(){thiz.publish(types.EVENTS.ON_CONTAINER_SPLIT,{srcContainer:srcContainer,newContainer:newContainer},thiz);srcContainer.resize();newContainer.resize();thiz.publish(types.EVENTS.RESIZE,{});if(srcContainer.selectedChildWidget&&srcContainer.selectedChildWidget.onResize)srcContainer.selectedChildWidget.onResize();if(newContainer.selectedChildWidget&&
newContainer.selectedChildWidget.onResize)newContainer.selectedChildWidget.onResize()},100)},removeChild:function(page,checkEmpty){this.inherited(arguments);this.publish([types.EVENTS.ON_CONTAINER_REMOVED,types.EVENTS.RESIZE],{view:page})},addChild2:function(child,index,select){this.publish([types.EVENTS.ON_CONTAINER_ADDED,types.EVENTS.RESIZE],{view:child});return},onShowChild:function(child){this.publish([types.EVENTS.ON_VIEW_SHOW,types.EVENTS.RESIZE],{container:this,view:child,owner:this.delegate});
if(child.onResize)child.onResize()},showChild:function(child){var res=this.inherited(arguments);this.onShowChild(child);if(child.onResize)child.onResize();return res}})})},"dijit/Menu":function(){define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(require,array,declare,dom,domAttr,
domGeometry,domStyle,keys,lang,on,has,win,winUtils,pm,DropDownMenu,ready){if(has("dijit-legacy-requires"))ready(0,function(){var requires=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];require(requires)});return declare("dijit.Menu",DropDownMenu,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow)this.bindDomNode(this.ownerDocumentBody);
else array.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(iframe_el){return winUtils.get(this._iframeContentDocument(iframe_el))||this._iframeContentDocument(iframe_el)["__parent__"]||iframe_el.name&&document.frames[iframe_el.name]||null},_iframeContentDocument:function(iframe_el){return iframe_el.contentDocument||iframe_el.contentWindow&&iframe_el.contentWindow.document||iframe_el.name&&document.frames[iframe_el.name]&&document.frames[iframe_el.name].document||
null},bindDomNode:function(node){node=dom.byId(node,this.ownerDocument);var cn;if(node.tagName.toLowerCase()=="iframe"){var iframe=node,window=this._iframeContentWindow(iframe);cn=win.body(window.document)}else cn=node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node;var binding={node:node,iframe:iframe};domAttr.set(node,"_dijitMenu"+this.id,this._bindings.push(binding));var doConnects=lang.hitch(this,function(cn){var selector=this.selector,delegatedEvent=selector?function(eventType){return on.selector(selector,
eventType)}:function(eventType){return eventType},self=this;return[on(cn,delegatedEvent(this.leftClickToOpen?"click":"contextmenu"),function(evt){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,iframe,{x:evt.pageX,y:evt.pageY})}),on(cn,delegatedEvent("keydown"),function(evt){if(evt.shiftKey&&evt.keyCode==keys.F10){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,iframe)}})]});binding.connects=cn?doConnects(cn):[];if(iframe){binding.onloadHandler=lang.hitch(this,
function(){var window=this._iframeContentWindow(iframe),cn=win.body(window.document);binding.connects=doConnects(cn)});if(iframe.addEventListener)iframe.addEventListener("load",binding.onloadHandler,false);else iframe.attachEvent("onload",binding.onloadHandler)}},unBindDomNode:function(nodeName){var node;try{node=dom.byId(nodeName,this.ownerDocument)}catch(e){return}var attrName="_dijitMenu"+this.id;if(node&&domAttr.has(node,attrName)){var bid=domAttr.get(node,attrName)-1,b=this._bindings[bid],h;
while(h=b.connects.pop())h.remove();var iframe=b.iframe;if(iframe)if(iframe.removeEventListener)iframe.removeEventListener("load",b.onloadHandler,false);else iframe.detachEvent("onload",b.onloadHandler);domAttr.remove(node,attrName);delete this._bindings[bid]}},_scheduleOpen:function(target,iframe,coords){if(!this._openTimer)this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:target,iframe:iframe,coords:coords})},1)},_openMyself:function(args){var target=args.target,
iframe=args.iframe,coords=args.coords,byKeyboard=!coords;this.currentTarget=target;if(coords){if(iframe){var ifc=domGeometry.position(iframe,true),window=this._iframeContentWindow(iframe),scroll=domGeometry.docScroll(window.document);var cs=domStyle.getComputedStyle(iframe),tp=domStyle.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(iframe,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(iframe,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(iframe,cs.paddingTop))+(has("ie")&&has("quirks")?
tp(iframe,cs.borderTopWidth):0);coords.x+=ifc.x+left-scroll.x;coords.y+=ifc.y+top-scroll.y}}else{coords=domGeometry.position(target,true);coords.x+=10;coords.y+=10}var self=this;var prevFocusNode=this._focusManager.get("prevNode");var curFocusNode=this._focusManager.get("curNode");var savedFocusNode=!curFocusNode||dom.isDescendant(curFocusNode,this.domNode)?prevFocusNode:curFocusNode;function closeAndRestoreFocus(){if(self.refocus&&savedFocusNode)savedFocusNode.focus();pm.close(self)}pm.open({popup:this,
x:coords.x,y:coords.y,onExecute:closeAndRestoreFocus,onCancel:closeAndRestoreFocus,orient:this.isLeftToRight()?"L":"R"});this.focus();if(!byKeyboard)this._cleanUp(true);this._onBlur=function(){this.inherited("_onBlur",arguments);pm.close(this)}},destroy:function(){array.forEach(this._bindings,function(b){if(b)this.unBindDomNode(b.node)},this);this.inherited(arguments)}})})},"dojo/dom-attr":function(){define(["exports","./sniff","./_base/lang","./dom","./dom-style","./dom-prop"],function(exports,has,
lang,dom,style,prop){var forcePropNames={innerHTML:1,className:1,htmlFor:has("ie"),value:1},attrNames={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};function _hasAttr(node,name){var attr=node.getAttributeNode&&node.getAttributeNode(name);return attr&&attr.specified}exports.has=function hasAttr(node,name){var lc=name.toLowerCase();return forcePropNames[prop.names[lc]||name]||_hasAttr(dom.byId(node),attrNames[lc]||name)};exports.get=function getAttr(node,name){node=dom.byId(node);
var lc=name.toLowerCase(),propName=prop.names[lc]||name,forceProp=forcePropNames[propName],value=node[propName];if(forceProp&&typeof value!="undefined")return value;if(propName!="href"&&(typeof value=="boolean"||lang.isFunction(value)))return value;var attrName=attrNames[lc]||name;return _hasAttr(node,attrName)?node.getAttribute(attrName):null};exports.set=function setAttr(node,name,value){node=dom.byId(node);if(arguments.length==2){for(var x in name)exports.set(node,x,name[x]);return node}var lc=
name.toLowerCase(),propName=prop.names[lc]||name,forceProp=forcePropNames[propName];if(propName=="style"&&typeof value!="string"){style.set(node,value);return node}if(forceProp||typeof value=="boolean"||lang.isFunction(value))return prop.set(node,name,value);node.setAttribute(attrNames[lc]||name,value);return node};exports.remove=function removeAttr(node,name){dom.byId(node).removeAttribute(attrNames[name.toLowerCase()]||name)};exports.getNodeProp=function getNodeProp(node,name){node=dom.byId(node);
var lc=name.toLowerCase(),propName=prop.names[lc]||name;if(propName in node&&propName!="href")return node[propName];var attrName=attrNames[lc]||name;return _hasAttr(node,attrName)?node.getAttribute(attrName):null}})},"dojo/data/ObjectStore":function(){define("dojo/data/ObjectStore",["../_base/lang","../Evented","../_base/declare","../_base/Deferred","../_base/array","../_base/connect","../regexp"],function(lang,Evented,declare,Deferred,array,connect,regexp){function convertRegex(character){return character==
"*"?".*":character=="?"?".":character}return declare("dojo.data.ObjectStore",[Evented],{objectStore:null,constructor:function(options){this._dirtyObjects=[];if(options.labelAttribute)options.labelProperty=options.labelAttribute;lang.mixin(this,options)},labelProperty:"label",getValue:function(item,property,defaultValue){return typeof item.get==="function"?item.get(property):property in item?item[property]:defaultValue},getValues:function(item,property){var val=this.getValue(item,property);return val instanceof
Array?val:val===undefined?[]:[val]},getAttributes:function(item){var res=[];for(var i in item)if(item.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_"))res.push(i);return res},hasAttribute:function(item,attribute){return attribute in item},containsValue:function(item,attribute,value){return array.indexOf(this.getValues(item,attribute),value)>-1},isItem:function(item){return typeof item=="object"&&item&&!(item instanceof Date)},isItemLoaded:function(item){return item&&typeof item.load!=="function"},
loadItem:function(args){var item;if(typeof args.item.load==="function")Deferred.when(args.item.load(),function(result){item=result;var func=result instanceof Error?args.onError:args.onItem;if(func)func.call(args.scope,result)});else if(args.onItem)args.onItem.call(args.scope,args.item);return item},close:function(request){return request&&request.abort&&request.abort()},fetch:function(args){args=lang.delegate(args,args&&args.queryOptions);var self=this;var scope=args.scope||self;var query=args.query;
if(typeof query=="object"){query=lang.delegate(query);for(var i in query){var required=query[i];if(typeof required=="string"){query[i]=RegExp("^"+regexp.escapeString(required,"*?\\").replace(/\\.|\*|\?/g,convertRegex)+"$",args.ignoreCase?"mi":"m");query[i].toString=function(original){return function(){return original}}(required)}}}var results=this.objectStore.query(query,args);Deferred.when(results.total,function(totalCount){Deferred.when(results,function(results){if(args.onBegin)args.onBegin.call(scope,
totalCount||results.length,args);if(args.onItem)for(var i=0;i<results.length;i++)args.onItem.call(scope,results[i],args);if(args.onComplete)args.onComplete.call(scope,args.onItem?null:results,args);return results},errorHandler)},errorHandler);function errorHandler(error){if(args.onError)args.onError.call(scope,error,args)}args.abort=function(){if(results.cancel)results.cancel()};if(results.observe){if(this.observing)this.observing.cancel();this.observing=results.observe(function(object,removedFrom,
insertedInto){if(array.indexOf(self._dirtyObjects,object)==-1)if(removedFrom==-1)self.onNew(object);else if(insertedInto==-1)self.onDelete(object);else for(var i in object)if(i!=self.objectStore.idProperty)self.onSet(object,i,null,object[i])},true)}this.onFetch(results);args.store=this;return args},getFeatures:function(){return{"dojo.data.api.Read":!!this.objectStore.get,"dojo.data.api.Identity":true,"dojo.data.api.Write":!!this.objectStore.put,"dojo.data.api.Notification":true}},getLabel:function(item){if(this.isItem(item))return this.getValue(item,
this.labelProperty);return undefined},getLabelAttributes:function(item){return[this.labelProperty]},getIdentity:function(item){return this.objectStore.getIdentity?this.objectStore.getIdentity(item):item[this.objectStore.idProperty||"id"]},getIdentityAttributes:function(item){return[this.objectStore.idProperty]},fetchItemByIdentity:function(args){var item;Deferred.when(this.objectStore.get(args.identity),function(result){item=result;args.onItem.call(args.scope,result)},function(error){args.onError.call(args.scope,
error)});return item},newItem:function(data,parentInfo){if(parentInfo){var values=this.getValue(parentInfo.parent,parentInfo.attribute,[]);values=values.concat([data]);data.__parent=values;this.setValue(parentInfo.parent,parentInfo.attribute,values)}this._dirtyObjects.push({object:data,save:true});this.onNew(data);return data},deleteItem:function(item){this.changing(item,true);this.onDelete(item)},setValue:function(item,attribute,value){var old=item[attribute];this.changing(item);item[attribute]=
value;this.onSet(item,attribute,old,value)},setValues:function(item,attribute,values){if(!lang.isArray(values))throw new Error("setValues expects to be passed an Array object as its value");this.setValue(item,attribute,values)},unsetAttribute:function(item,attribute){this.changing(item);var old=item[attribute];delete item[attribute];this.onSet(item,attribute,old,undefined)},changing:function(object,_deleting){object.__isDirty=true;for(var i=0;i<this._dirtyObjects.length;i++){var dirty=this._dirtyObjects[i];
if(object==dirty.object){if(_deleting){dirty.object=false;if(!this._saveNotNeeded)dirty.save=true}return}}var old=object instanceof Array?[]:{};for(i in object)if(object.hasOwnProperty(i))old[i]=object[i];this._dirtyObjects.push({object:!_deleting&&object,old:old,save:!this._saveNotNeeded})},save:function(kwArgs){kwArgs=kwArgs||{};var result,actions=[];var savingObjects=[];var self=this;var dirtyObjects=this._dirtyObjects;var left=dirtyObjects.length;try{connect.connect(kwArgs,"onError",function(){if(kwArgs.revertOnError!==
false){var postCommitDirtyObjects=dirtyObjects;dirtyObjects=savingObjects;self.revert();self._dirtyObjects=postCommitDirtyObjects}else self._dirtyObjects=dirtyObjects.concat(savingObjects)});if(this.objectStore.transaction)var transaction=this.objectStore.transaction();for(var i=0;i<dirtyObjects.length;i++){var dirty=dirtyObjects[i];var object=dirty.object;var old=dirty.old;delete object.__isDirty;if(object)result=this.objectStore.put(object,{overwrite:!!old});else if(typeof old!="undefined")result=
this.objectStore.remove(this.getIdentity(old));savingObjects.push(dirty);dirtyObjects.splice(i--,1);Deferred.when(result,function(value){if(!--left)if(kwArgs.onComplete)kwArgs.onComplete.call(kwArgs.scope,actions)},function(value){left=-1;kwArgs.onError.call(kwArgs.scope,value)})}if(transaction)transaction.commit()}catch(e){kwArgs.onError.call(kwArgs.scope,value)}},revert:function(){var dirtyObjects=this._dirtyObjects;for(var i=dirtyObjects.length;i>0;){i--;var dirty=dirtyObjects[i];var object=dirty.object;
var old=dirty.old;if(object&&old){for(var j in old)if(old.hasOwnProperty(j)&&object[j]!==old[j]){this.onSet(object,j,object[j],old[j]);object[j]=old[j]}for(j in object)if(!old.hasOwnProperty(j)){this.onSet(object,j,object[j]);delete object[j]}}else if(!old)this.onDelete(object);else this.onNew(old);delete (object||old).__isDirty;dirtyObjects.splice(i,1)}},isDirty:function(item){if(!item)return!!this._dirtyObjects.length;return item.__isDirty},onSet:function(){},onNew:function(){},onDelete:function(){},
onFetch:function(results){}})})},"xfile/widgets/NewItemSelector":function(){define("xfile/widgets/NewItemSelector",["dojo/_base/declare","dojo/dom-class","xide/widgets/TemplatedWidgetBase","xide/types"],function(declare,domClass,TemplatedWidgetBase,types){return declare("xfile.widgets.NewItemSelector",[TemplatedWidgetBase],{wButton:null,wThumb:null,wList:null,wTree:null,currentModeClass:"fileLayoutTreeIcon",layout:null,config:null,allowedActions:null,addJQueryClasses:true,templateString:"\x3cspan\x3e"+
"\x3cdiv class\x3d'newItemSelector' data-dojo-type\x3d'dijit.form.DropDownButton' data-dojo-props\x3d\"iconClass:'el-icon-plus'\" data-dojo-attach-point\x3d'wButton'\x3e"+"\x3cspan\x3e\x3c/span\x3e"+"\x3cdiv data-dojo-attach-point\x3d'menu' data-dojo-type\x3d'dijit.Menu' style\x3d'display: none;'\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/span\x3e",open:function(){this.wButton.domNode.focus();this.wButton.openDropDown();var thiz=this;setTimeout(function(){thiz.wTree.focus()},0)},postMixInProperties:function(){this.inherited(arguments)},
createMenuItem:function(iconClass,label,operation,clickcb){var item=new dijit.MenuItem({iconClass:iconClass,label:label,operation:operation,item:null});this.menu.addChild(item);var thiz=this;this.fixButton(item);item.domNode.onclick=function(){if(clickcb)clickcb(item);else thiz.delegate.onButtonClicked(item)};if(this.delegate&&this.delegate.buttons)this.delegate.buttons.push(item);return item},fixButton:function(button){if(button&&button.iconNode){domClass.remove(button.iconNode,"dijitReset");domClass.add(button.iconNode,
"actionToolbarButtonElusive")}},startup:function(){this.inherited(arguments);var thiz=this;if(this.addJQueryClasses){domClass.add(this.menu.containerNode,"ui-menu ui-widget ui-widget-content ui-corner-all");this.fixButton(this.wButton)}var opsInt=types.OPERATION_INT;if(this.allowedActions[opsInt.NEW_FILE])var button=this.createMenuItem("el-icon-file",this.translate("file"),types.OPERATION.NEW_FILE);if(this.allowedActions[opsInt.NEW_DIRECTORY])var button=this.createMenuItem("el-icon-folder",this.translate("folder"),
types.OPERATION.NEW_DIRECTORY)}})})},"dojo/request/script":function(){define("dojo/request/script",["module","./watch","./util","../_base/array","../_base/lang","../on","../dom","../dom-construct","../has","../_base/window"],function(module,watch,util,array,lang,on,dom,domConstruct,has,win){has.add("script-readystatechange",function(global,document){var script=document.createElement("script");return typeof script["onreadystatechange"]!=="undefined"&&(typeof global["opera"]==="undefined"||global["opera"].toString()!==
"[object Opera]")});var mid=module.id.replace(/[\/\.\-]/g,"_"),counter=0,loadEvent=has("script-readystatechange")?"readystatechange":"load",readyRegExp=/complete|loaded/,callbacks=this[mid+"_callbacks"]={},deadScripts=[];function attach(id,url,frameDoc){var doc=frameDoc||win.doc,element=doc.createElement("script");element.type="text/javascript";element.src=url;element.id=id;element.async=true;element.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(element)}function remove(id,
frameDoc,cleanup){domConstruct.destroy(dom.byId(id,frameDoc));if(callbacks[id])if(cleanup)callbacks[id]=function(){delete callbacks[id]};else delete callbacks[id]}function _addDeadScript(dfd){var options=dfd.response.options,frameDoc=options.ioArgs?options.ioArgs.frameDoc:options.frameDoc;deadScripts.push({id:dfd.id,frameDoc:frameDoc});if(options.ioArgs)options.ioArgs.frameDoc=null;options.frameDoc=null}function canceler(dfd,response){if(dfd.canDelete)script._remove(dfd.id,response.options.frameDoc,
true)}function isValid(response){if(deadScripts&&deadScripts.length){array.forEach(deadScripts,function(_script){script._remove(_script.id,_script.frameDoc);_script.frameDoc=null});deadScripts=[]}return response.options.jsonp?!response.data:true}function isReadyScript(response){return!!this.scriptLoaded}function isReadyCheckString(response){var checkString=response.options.checkString;return checkString&&eval("typeof("+checkString+') !\x3d\x3d "undefined"')}function handleResponse(response,error){if(this.canDelete)_addDeadScript(this);
if(error)this.reject(error);else this.resolve(response)}function script(url,options,returnDeferred){var response=util.parseArgs(url,util.deepCopy({},options));url=response.url;options=response.options;var dfd=util.deferred(response,canceler,isValid,options.jsonp?null:options.checkString?isReadyCheckString:isReadyScript,handleResponse);lang.mixin(dfd,{id:mid+counter++,canDelete:false});if(options.jsonp){var queryParameter=new RegExp("[?\x26]"+options.jsonp+"\x3d");if(!queryParameter.test(url))url+=
queryParameter+(options.frameDoc?"parent.":"")+mid+"_callbacks."+dfd.id;dfd.canDelete=true;callbacks[dfd.id]=function(json){response.data=json;dfd.handleResponse(response)}}if(util.notify)util.notify.emit("send",response,dfd.promise.cancel);if(!options.canAttach||options.canAttach(dfd)){var node=script._attach(dfd.id,url,options.frameDoc);if(!options.jsonp&&!options.checkString)var handle=on(node,loadEvent,function(evt){if(evt.type==="load"||readyRegExp.test(node.readyState)){handle.remove();dfd.scriptLoaded=
evt}})}watch(dfd);return returnDeferred?dfd:dfd.promise}script.get=script;script._attach=attach;script._remove=remove;script._callbacksProperty=mid+"_callbacks";return script})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../_base/Deferred","../_base/array"],function(kernel,lang,Deferred,array){var Observable=function(store){var undef,queryUpdaters=[],revision=0;store=lang.delegate(store);store.notify=function(object,existingId){revision++;var updaters=queryUpdaters.slice();
for(var i=0,l=updaters.length;i<l;i++)updaters[i](object,existingId)};var originalQuery=store.query;store.query=function(query,options){options=options||{};var results=originalQuery.apply(this,arguments);if(results&&results.forEach){var nonPagedOptions=lang.mixin({},options);delete nonPagedOptions.start;delete nonPagedOptions.count;var queryExecutor=store.queryEngine&&store.queryEngine(query,nonPagedOptions);var queryRevision=revision;var listeners=[],queryUpdater;results.observe=function(listener,
includeObjectUpdates){if(listeners.push(listener)==1)queryUpdaters.push(queryUpdater=function(changed,existingId){Deferred.when(results,function(resultsArray){var atEnd=resultsArray.length!=options.count;var i,l,listener;if(++queryRevision!=revision)throw new Error("Query is out of date, you must observe() the query prior to any data modifications");var removedObject,removedFrom=-1,insertedInto=-1;if(existingId!==undef)for(i=0,l=resultsArray.length;i<l;i++){var object=resultsArray[i];if(store.getIdentity(object)==
existingId){removedObject=object;removedFrom=i;if(queryExecutor||!changed)resultsArray.splice(i,1);break}}if(queryExecutor){if(changed&&(queryExecutor.matches?queryExecutor.matches(changed):queryExecutor([changed]).length)){var firstInsertedInto=removedFrom>-1?removedFrom:resultsArray.length;resultsArray.splice(firstInsertedInto,0,changed);insertedInto=array.indexOf(queryExecutor(resultsArray),changed);resultsArray.splice(firstInsertedInto,1);if(options.start&&insertedInto==0||!atEnd&&insertedInto==
resultsArray.length)insertedInto=-1;else resultsArray.splice(insertedInto,0,changed)}}else if(changed)if(existingId!==undef)insertedInto=removedFrom;else if(!options.start){insertedInto=store.defaultIndex||0;resultsArray.splice(insertedInto,0,changed)}if((removedFrom>-1||insertedInto>-1)&&(includeObjectUpdates||!queryExecutor||removedFrom!=insertedInto)){var copyListeners=listeners.slice();for(i=0;listener=copyListeners[i];i++)listener(changed||removedObject,removedFrom,insertedInto)}})});var handle=
{};handle.remove=handle.cancel=function(){var index=array.indexOf(listeners,listener);if(index>-1){listeners.splice(index,1);if(!listeners.length)queryUpdaters.splice(array.indexOf(queryUpdaters,queryUpdater),1)}};return handle}}return results};var inMethod;function whenFinished(method,action){var original=store[method];if(original)store[method]=function(value){if(inMethod)return original.apply(this,arguments);inMethod=true;try{var results=original.apply(this,arguments);Deferred.when(results,function(results){action(typeof results==
"object"&&results||value)});return results}finally{inMethod=false}}}whenFinished("put",function(object){store.notify(object,store.getIdentity(object))});whenFinished("add",function(object){store.notify(object)});whenFinished("remove",function(id){store.notify(undefined,id)});return store};lang.setObject("dojo.store.Observable",Observable);return Observable})},"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip"\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"xide/client/ClientBase":function(){define(["dojo/_base/declare","dojo/Stateful","dojo/_base/lang","xide/mixins/ReloadMixin","xide/mixins/EventedMixin"],function(declare,Stateful,lang,ReloadMixin,EventedMixin){return declare("xide.client.ClientBase",[Stateful,ReloadMixin,EventedMixin],{options:null,_socket:null,onConnectionReady:function(){},onClosed:function(){},destroy:function(){if(this._socket&&this._socket.close){0&&console.log("closing connection");this._socket.close();this.onClosed()}},_defaultOptions:function(){return{}},
init:function(arguments){this.options=lang.mixin(this._defaultOptions(),arguments.options);this.initReload()}})})},"dijit/form/MappedTextBox":function(){define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(declare,has,domConstruct,ValidationTextBox){return declare("dijit.form.MappedTextBox",ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:"valueNode",serialize:function(val){return val.toString?
val.toString():""},toString:function(){var val=this.filter(this.get("value"));return val!=null?typeof val=="string"?val:this.serialize(val,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=domConstruct.place("\x3cinput type\x3d'hidden'"+(this.name&&!has("msapp")?' name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"")+"/\x3e",this.textbox,"after")},reset:function(){this.valueNode.value=
"";this.inherited(arguments)}})})},"dojox/layout/GridContainerLite":function(){require({cache:{"url:dojox/layout/resources/GridContainer.html":'\x3cdiv id\x3d"${id}" class\x3d"gridContainer" dojoAttachPoint\x3d"containerNode" tabIndex\x3d"0" dojoAttachEvent\x3d"onkeypress:_selectFocus"\x3e\n\t\x3cdiv dojoAttachPoint\x3d"gridContainerDiv"\x3e\n\t\t\x3ctable class\x3d"gridContainerTable" dojoAttachPoint\x3d"gridContainerTable" cellspacing\x3d"0" cellpadding\x3d"0"\x3e\n\t\t\t\x3ctbody\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d"gridNode" \x3e\n\t\t\t\t\t\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/tbody\x3e\n\t\t\x3c/table\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e'}});
define("dojox/layout/GridContainerLite",["dojo/_base/kernel","dojo/text!./resources/GridContainer.html","dojo/_base/declare","dojo/query","dojo/_base/sniff","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/dom-construct","dojo/dom-attr","dojo/_base/array","dojo/_base/lang","dojo/_base/event","dojo/keys","dojo/topic","dijit/registry","dijit/focus","dijit/_base/focus","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/layout/_LayoutWidget","dojo/_base/NodeList","dojox/mdnd/AreaManager","dojox/mdnd/DropIndicator",
"dojox/mdnd/dropMode/OverDropMode","dojox/mdnd/AutoScroll"],function(dojo,template,declare,query,has,domClass,domStyle,geom,domConstruct,domAttr,array,lang,events,keys,topic,registry,focus,baseFocus,_WidgetBase,_TemplatedMixin,_LayoutWidget,NodeList,AreaManager){var gcl=declare("dojox.layout.GridContainerLite",[_LayoutWidget,_TemplatedMixin],{autoRefresh:true,templateString:template,dragHandleClass:"dojoxDragHandle",nbZones:1,doLayout:true,isAutoOrganized:true,acceptTypes:[],colWidths:"",constructor:function(props,
node){this.acceptTypes=(props||{}).acceptTypes||["text"];this._disabled=true},postCreate:function(){this.inherited(arguments);this._grid=[];this._createCells();this.subscribe("/dojox/mdnd/drop","resizeChildAfterDrop");this.subscribe("/dojox/mdnd/drag/start","resizeChildAfterDragStart");this._dragManager=AreaManager.areaManager();this._dragManager.autoRefresh=this.autoRefresh;this._dragManager.dragHandleClass=this.dragHandleClass;if(this.doLayout)this._border={h:has("ie")?geom.getBorderExtents(this.gridContainerTable).h:
0,w:has("ie")==6?1:0};else{domStyle.set(this.domNode,"overflowY","hidden");domStyle.set(this.gridContainerTable,"height","auto")}},startup:function(){if(this._started)return;if(this.isAutoOrganized)this._organizeChildren();else this._organizeChildrenManually();array.forEach(this.getChildren(),function(child){child.startup()});if(this._isShown())this.enableDnd();this.inherited(arguments)},resizeChildAfterDrop:function(node,targetArea,indexChild){if(this._disabled)return false;if(registry.getEnclosingWidget(targetArea.node)==
this){var widget=registry.byNode(node);if(widget.resize&&lang.isFunction(widget.resize))widget.resize();widget.set("column",node.parentNode.cellIndex);if(this.doLayout){var domNodeHeight=this._contentBox.h,divHeight=geom.getContentBox(this.gridContainerDiv).h;if(divHeight>=domNodeHeight)domStyle.set(this.gridContainerTable,"height",domNodeHeight-this._border.h+"px")}return true}return false},resizeChildAfterDragStart:function(node,sourceArea,indexChild){if(this._disabled)return false;if(registry.getEnclosingWidget(sourceArea.node)==
this){this._draggedNode=node;if(this.doLayout)geom.setMarginBox(this.gridContainerTable,{h:geom.getContentBox(this.gridContainerDiv).h-this._border.h});return true}return false},getChildren:function(){var children=new NodeList;array.forEach(this._grid,function(dropZone){query("\x3e [widgetId]",dropZone.node).map(registry.byNode).forEach(function(item){children.push(item)})});return children},_isShown:function(){if("open"in this)return this.open;else{var node=this.domNode;return node.style.display!=
"none"&&node.style.visibility!="hidden"&&!domClass.contains(node,"dijitHidden")}},layout:function(){if(this.doLayout){var contentBox=this._contentBox;geom.setMarginBox(this.gridContainerTable,{h:contentBox.h-this._border.h});geom.setContentSize(this.domNode,{w:contentBox.w-this._border.w})}array.forEach(this.getChildren(),function(widget){if(widget.resize&&lang.isFunction(widget.resize))widget.resize()})},onShow:function(){if(this._disabled)this.enableDnd()},onHide:function(){if(!this._disabled)this.disableDnd()},
_createCells:function(){if(this.nbZones===0)this.nbZones=1;var accept=this.acceptTypes.join(","),i=0;var widths=this._computeColWidth();while(i<this.nbZones){this._grid.push({node:domConstruct.create("td",{"class":"gridContainerZone",accept:accept,id:this.id+"_dz"+i,style:{"width":widths[i]+"%"}},this.gridNode)});i++}},_getZonesAttr:function(){return query(".gridContainerZone",this.containerNode)},enableDnd:function(){var m=this._dragManager;array.forEach(this._grid,function(dropZone){m.registerByNode(dropZone.node)});
m._dropMode.updateAreas(m._areaList);this._disabled=false},disableDnd:function(){var m=this._dragManager;array.forEach(this._grid,function(dropZone){m.unregister(dropZone.node)});m._dropMode.updateAreas(m._areaList);this._disabled=true},_organizeChildren:function(){var children=this.constructor.superclass.getChildren.call(this);var numZones=this.nbZones,numPerZone=Math.floor(children.length/numZones),mod=children.length%numZones,i=0;for(var z=0;z<numZones;z++){for(var r=0;r<numPerZone;r++){this._insertChild(children[i],
z);i++}if(mod>0){try{this._insertChild(children[i],z);i++}catch(e){console.error("Unable to insert child in GridContainer",e)}mod--}else if(numPerZone===0)break}},_organizeChildrenManually:function(){var children=this.constructor.superclass.getChildren.call(this),length=children.length,child;for(var i=0;i<length;i++){child=children[i];try{this._insertChild(child,child.column-1)}catch(e){console.error("Unable to insert child in GridContainer",e)}}},_insertChild:function(child,column,p){var zone=this._grid[column].node,
length=zone.childNodes.length;if(typeof p==="undefined"||p>length)p=length;if(this._disabled){domConstruct.place(child.domNode,zone,p);domAttr.set(child.domNode,"tabIndex","0")}else if(!child.dragRestriction)this._dragManager.addDragItem(zone,child.domNode,p,true);else{domConstruct.place(child.domNode,zone,p);domAttr.set(child.domNode,"tabIndex","0")}child.set("column",column);return child},removeChild:function(widget){if(this._disabled)this.inherited(arguments);else this._dragManager.removeDragItem(widget.domNode.parentNode,
widget.domNode)},addService:function(child,column,p){kernel.deprecated("addService is deprecated.","Please use  instead.","Future");this.addChild(child,column,p)},addChild:function(child,column,p){child.domNode.id=child.id;this.constructor.superclass.addChild.call(this,child,0);if(column<0||column===undefined)column=0;if(p<=0)p=0;try{return this._insertChild(child,column,p)}catch(e){console.error("Unable to insert child in GridContainer",e)}return null},_setColWidthsAttr:function(value){this.colWidths=
lang.isString(value)?value.split(","):lang.isArray(value)?value:[value];if(this._started)this._updateColumnsWidth()},_updateColumnsWidth:function(manager){var length=this._grid.length;var widths=this._computeColWidth();for(var i=0;i<length;i++)this._grid[i].node.style.width=widths[i]+"%"},_computeColWidth:function(){var origWidths=this.colWidths||[];var widths=[];var colWidth;var widthSum=0;var i;for(i=0;i<this.nbZones;i++)if(widths.length<origWidths.length){widthSum+=origWidths[i]*1;widths.push(origWidths[i])}else{if(!colWidth){colWidth=
(100-widthSum)/(this.nbZones-i);if(colWidth<0)colWidth=100/this.nbZones}widths.push(colWidth);widthSum+=colWidth*1}if(widthSum>100){var divisor=100/widthSum;for(i=0;i<widths.length;i++)widths[i]*=divisor}return widths},_selectFocus:function(event){if(this._disabled)return;var key=event.keyCode,k=keys,zone=null,cFocus=baseFocus.getFocus(),focusNode=cFocus.node,m=this._dragManager,found,i,j,r,children,area,widget;if(focusNode==this.containerNode){area=this.gridNode.childNodes;switch(key){case k.DOWN_ARROW:case k.RIGHT_ARROW:found=
false;for(i=0;i<area.length;i++){children=area[i].childNodes;for(j=0;j<children.length;j++){zone=children[j];if(zone!==null&&zone.style.display!="none"){focus.focus(zone);events.stop(event);found=true;break}}if(found)break}break;case k.UP_ARROW:case k.LEFT_ARROW:area=this.gridNode.childNodes;found=false;for(i=area.length-1;i>=0;i--){children=area[i].childNodes;for(j=children.length;j>=0;j--){zone=children[j];if(zone!==null&&zone.style.display!="none"){focus.focus(zone);events.stop(event);found=true;
break}}if(found)break}break}}else if(focusNode.parentNode.parentNode==this.gridNode){var child=key==k.UP_ARROW||key==k.LEFT_ARROW?"lastChild":"firstChild";var pos=key==k.UP_ARROW||key==k.LEFT_ARROW?"previousSibling":"nextSibling";switch(key){case k.UP_ARROW:case k.DOWN_ARROW:events.stop(event);found=false;var focusTemp=focusNode;while(!found){children=focusTemp.parentNode.childNodes;var num=0;for(i=0;i<children.length;i++){if(children[i].style.display!="none")num++;if(num>1)break}if(num==1)return;
if(focusTemp[pos]===null)zone=focusTemp.parentNode[child];else zone=focusTemp[pos];if(zone.style.display==="none")focusTemp=zone;else found=true}if(event.shiftKey){var parent=focusNode.parentNode;for(i=0;i<this.gridNode.childNodes.length;i++)if(parent==this.gridNode.childNodes[i])break;children=this.gridNode.childNodes[i].childNodes;for(j=0;j<children.length;j++)if(zone==children[j])break;if(has("mozilla")||has("webkit"))i--;widget=registry.byNode(focusNode);if(!widget.dragRestriction){r=m.removeDragItem(parent,
focusNode);this.addChild(widget,i,j);domAttr.set(focusNode,"tabIndex","0");focus.focus(focusNode)}else topic.publish("/dojox/layout/gridContainer/moveRestriction",this)}else focus.focus(zone);break;case k.RIGHT_ARROW:case k.LEFT_ARROW:events.stop(event);if(event.shiftKey){var z=0;if(focusNode.parentNode[pos]===null){if(has("ie")&&key==k.LEFT_ARROW)z=this.gridNode.childNodes.length-1}else if(focusNode.parentNode[pos].nodeType==3)z=this.gridNode.childNodes.length-2;else{for(i=0;i<this.gridNode.childNodes.length;i++){if(focusNode.parentNode[pos]==
this.gridNode.childNodes[i])break;z++}if(has("mozilla")||has("webkit"))z--}widget=registry.byNode(focusNode);var _dndType=focusNode.getAttribute("dndtype");if(_dndType===null)if(widget&&widget.dndType)_dndType=widget.dndType.split(/\s*,\s*/);else _dndType=["text"];else _dndType=_dndType.split(/\s*,\s*/);var accept=false;for(i=0;i<this.acceptTypes.length;i++)for(j=0;j<_dndType.length;j++)if(_dndType[j]==this.acceptTypes[i]){accept=true;break}if(accept&&!widget.dragRestriction){var parentSource=focusNode.parentNode,
place=0;if(k.LEFT_ARROW==key){var t=z;if(has("mozilla")||has("webkit"))t=z+1;place=this.gridNode.childNodes[t].childNodes.length}r=m.removeDragItem(parentSource,focusNode);this.addChild(widget,z,place);domAttr.set(r,"tabIndex","0");focus.focus(r)}else topic.publish("/dojox/layout/gridContainer/moveRestriction",this)}else{var node=focusNode.parentNode;while(zone===null){if(node[pos]!==null&&node[pos].nodeType!==3)node=node[pos];else if(pos==="previousSibling")node=node.parentNode.childNodes[node.parentNode.childNodes.length-
1];else node=node.parentNode.childNodes[has("ie")?0:1];zone=node[child];if(zone&&zone.style.display=="none"){children=zone.parentNode.childNodes;var childToSelect=null;if(pos=="previousSibling")for(i=children.length-1;i>=0;i--){if(children[i].style.display!="none"){childToSelect=children[i];break}}else for(i=0;i<children.length;i++)if(children[i].style.display!="none"){childToSelect=children[i];break}if(!childToSelect){focusNode=zone;node=focusNode.parentNode;zone=null}else zone=childToSelect}}focus.focus(zone)}break}}},
destroy:function(){var m=this._dragManager;array.forEach(this._grid,function(dropZone){m.unregister(dropZone.node)});this.inherited(arguments)}});gcl.ChildWidgetProperties={column:"1",dragRestriction:false};lang.extend(_WidgetBase,gcl.ChildWidgetProperties);return gcl})},"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\n\trole\x3d"listbox" aria-haspopup\x3d"true"\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t/\x3e\x3c/div\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\n\t\t/\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/\x3e\x3c/td\n\t\x3e\x3c/tr\x3e\x3c/tbody\n\x3e\x3c/table\x3e\n',
"cbtree/util/shim/Array":function(){define("cbtree/util/shim/Array",[],function(){if(!Array.prototype.every)Array.prototype.every=function(fun){if(this==null)throw new TypeError;var t=Object(this);var len=t.length>>>0;if(typeof fun!="function")throw new TypeError;var thisp=arguments[1];for(var i=0;i<len;i++)if(i in t&&!fun.call(thisp,t[i],i,t))return false;return true};if(!Array.prototype.filter)Array.prototype.filter=function(fun){if(this==null)throw new TypeError;var t=Object(this);var len=t.length>>>
0;if(typeof fun!="function")throw new TypeError;var res=[];var thisp=arguments[1];for(var i=0;i<len;i++)if(i in t){var val=t[i];if(fun.call(thisp,val,i,t))res.push(val)}return res};if(!Array.prototype.forEach)Array.prototype.forEach=function forEach(callback,thisArg){var T,k;if(this==null)throw new TypeError("this is null or not defined");var O=Object(this);var len=O.length>>>0;if({}.toString.call(callback)!=="[object Function]")throw new TypeError(callback+" is not a function");if(thisArg)T=thisArg;
k=0;while(k<len){var kValue;if(Object.prototype.hasOwnProperty.call(O,k)){kValue=O[k];callback.call(T,kValue,k,O)}k++}};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(searchElement){if(this==null)throw new TypeError;var t=Object(this);var len=t.length>>>0;if(len===0)return-1;var n=0;if(arguments.length>1){n=Number(arguments[1]);if(n!=n)n=0;else if(n!=0&&n!=Infinity&&n!=-Infinity)n=(n>0||-1)*Math.floor(Math.abs(n))}if(n>=len)return-1;var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++)if(k in
t&&t[k]===searchElement)return k;return-1};if(!Array.prototype.lastIndexOf)Array.prototype.lastIndexOf=function(searchElement){if(this==null)throw new TypeError;var t=Object(this);var len=t.length>>>0;if(len===0)return-1;var n=len;if(arguments.length>1){n=Number(arguments[1]);if(n!=n)n=0;else if(n!=0&&n!=1/0&&n!=-(1/0))n=(n>0||-1)*Math.floor(Math.abs(n))}var k=n>=0?Math.min(n,len-1):len-Math.abs(n);for(;k>=0;k--)if(k in t&&t[k]===searchElement)return k;return-1};if(!Array.prototype.map)Array.prototype.map=
function(callback,thisArg){if(this==null)throw new TypeError(" this is null or not defined");var T,A,k;var O=Object(this);var len=O.length>>>0;if({}.toString.call(callback)!="[object Function]")throw new TypeError(callback+" is not a function");if(thisArg)T=thisArg;A=new Array(len);k=0;while(k<len){var kValue,mappedValue;if(k in O){kValue=O[k];mappedValue=callback.call(T,kValue,k,O);A[k]=mappedValue}k++}return A};if(!Array.prototype.some)Array.prototype.some=function(fun){if(this==null)throw new TypeError;
var t=Object(this);var len=t.length>>>0;if(typeof fun!="function")throw new TypeError;var thisp=arguments[1];for(var i=0;i<len;i++)if(i in t&&fun.call(thisp,t[i],i,t))return true;return false}})},"xide/manager/CIStoreDelegate":function(){define(["dojo/_base/declare","xide/utils"],function(declare,utils){return declare("xide.manager.CIStoreDelegate",null,{uuid:null,appIdentifier:null,appStore:null,ciOverrideStore:null,appService:null,deleteDataItem:function(normalizedItem){var dstStore=this.appStore;
var test=""+normalizedItem["id"];var thiz=this;var theItem=null;dstStore.fetch({query:{id:test},queryOptions:{"deep":true},onComplete:function(items,req){for(i=0;i<items.length;i++){var item=items[i];if(thiz.appService){if(item.qxappTabIdentifier!=null)delete item["qxappTabIdentifier"];thiz.appService.itemDeleted(thiz.ctx.getSession().getAppId(),thiz.ctx.getSession().getUUID(),xas.utils.CIPageToJSON(item));dstStore.deleteItem(item);dstStore.save()}break}}});return theItem},initWithStoreAndAppService:function(store,
service,ciOverrideStore){this.appStore=store;this.appService=service;this.ciOverrideStore=ciOverrideStore},onCIOverrideChanged:function(item){if(this.appService)this.appService.updateCIOverride(this.ctx.getSession().getAppId(),this.ctx.getSession().getUUID(),xas.utils.ciPlatformOverrideToJSON(item));else console.error("have no app service")},deleteCIPlatformOverride:function(item){if(this.appService)this.appService.deleteCIOverride(this.ctx.getSession().getAppId(),this.ctx.getSession().getUUID(),
xas.utils.ciPlatformOverrideToJSON(item));else console.error("have no app service");try{xapp.utils.deleteStoreItemById(this.ciOverrideStore,xapp.utils.toString(item.id))}catch(e){}},onCIPlatformOverrideChanged:function(item){if(this.appService)this.appService.updateCIOverride(this.ctx.getSession().getAppId(),this.ctx.getSession().getUUID(),xas.utils.ciPlatformOverrideToJSON(item));else console.error("have no app service")},onStyleOverrideChanged:function(item){if(this.appService)this.appService.updateCIOverride(this.ctx.getSession().getAppId(),
this.ctx.getSession().getUUID(),xas.utils.ciOverrideToJSON(item));else console.error("have no app service")},onItemChanged:function(id,item){if(this.appService)this.appService.replace(".","$.items[?(@['id']\x3d\x3d"+id+")]","replace",item);else console.error("have no app service")},saveStoreItem:function(item,userData,widget){if(!widget.ciField)item.value=widget.value;else item[""+widget.ciField]=widget.value;this.appStore.save(item);this.onItemChanged(xas.utils.CIDataToJSON(item))},widgetChanged:function(widget){var userData=
widget.userData;var dstStore=this.appStore;var test=""+userData["id"];var testUID=userData["uid"];var parendId=""+userData["parentId"][0];var thiz=this;var theItem=null;var foundItem=false;var storeDestination=null;if(userData.storeDestination){storeDestination=xapp.utils.toString(userData.storeDestination);if(xapp.utils.isValidString(storeDestination)&&storeDestination=="metaDataStore")dstStore=this.ctx.getMetaDataStore()}dstStore.fetch({query:{id:parendId},queryOptions:{"deep":true,testObject:userData},
onComplete:function(items,req){for(i=0;i<items.length;i++){var item=items[i];if(req.queryOptions.testObject!=null)if(item.inputs!=null&&item.inputs.length>0)theItem=xapp.utils.getCIByUid(item.inputs,req.queryOptions.testObject.uid)}}});if(theItem){this.saveStoreItem(theItem,userData,widget);return theItem}dstStore.fetch({query:{uid:testUID[0]},queryOptions:{"deep":true,testObject:userData},onComplete:function(items,req){for(i=0;i<items.length;i++)var item=items[i]}});dstStore.fetch({query:{uid:"*"},
queryOptions:{"deep":true,testObject:userData},onComplete:function(items,req){for(i=0;i<items.length;i++){var item=items[i];if(item==req.queryOptions.testObject);}}});dstStore.fetch({query:{id:test},queryOptions:{"deep":true},onComplete:function(items,req){for(var i=0;i<items.length;i++){var item=items[i];if(!widget.ciField)item.value=widget.value;else item[""+widget.ciField]=widget.value;theItem=item;dstStore.save(item);thiz.onItemChanged(item.id,xas.utils.CIDataToJSON(item))}}});if(theItem)return;
dstStore.fetch({query:{id:"*"},queryOptions:{"deep":true},onComplete:function(items,req){for(i=0;i<items.length;i++){var item=items[i];if(item.id[0]==test){if(!widget.ciField);theItem=item;dstStore.save(item);thiz.onItemChanged(item.id,xas.utils.CIDataToJSON(item))}}}});if(theItem==null)console.error("null widhet item");return theItem},updateDataItem:function(normalizedItem){if(normalizedItem==null){console.error("no item");return}if(normalizedItem["isUpdating"]!=null)normalizedItem["isUpdating"]=
false;var dstStore=this.appStore;var test=""+normalizedItem["id"];var thiz=this;var theItem=null;var storeDestination=null;if(normalizedItem.storeDestination){storeDestination=utils.toString(normalizedItem.storeDestination);if(utils.isValidString(storeDestination)&&storeDestination=="metaDataStore")dstStore=this.ctx.getMetaDataStore()}dstStore.fetch({query:{id:test},queryOptions:{"deep":true},onComplete:function(items,req){for(var i=0;i<items.length;i++){var item=items[i];item.value=normalizedItem.value;
item.dataSource=normalizedItem.dataSource;theItem=item;dstStore.save(item);thiz.onItemChanged(item.id,xas.utils.CIDataToJSON(item));break}}});if(theItem)return theItem;var testUID=""+normalizedItem.uid;var parendId=""+normalizedItem.parentId;dstStore.fetch({query:{id:parendId},queryOptions:{"deep":true},onComplete:function(items,req){for(i=0;i<items.length;i++){var item=items[i];if(item.inputs!=null&&item.inputs.length>0)theItem=xapp.utils.getCIByUid(item.inputs,testUID)}}});if(theItem){theItem.value=
normalizedItem.value;dstStore.save(theItem);thiz.onItemChanged(xas.utils.CIDataToJSON(theItem));return theItem}}})})},"xide/views/ToggleSplitter":function(){define("xide/views/ToggleSplitter",["dojo","dijit","xide/factory","xide/types"],function(dojo,dijit,factory,types){var ToggleSplitter=dojo.declare("xide.views.ToggleSplitter",dijit.layout._Splitter,{container:null,child:null,region:null,state:"full",_closedSize:"0",delegate:null,baseClass:"dojoxToggleSplitter",templateString:'\x3cdiv class\x3d"dijitSplitter dojoxToggleSplitter" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse"\x3e'+
'\x3cdiv dojoAttachPoint\x3d"toggleNode" class\x3d"dijitSplitterThumb dojoxToggleSplitterIcon" tabIndex\x3d"0" role\x3d"separator" '+'dojoAttachEvent\x3d"onmousedown:_onToggleNodeMouseDown,onclick:_toggle,onmouseenter:_onToggleNodeMouseMove,onmouseleave:_onToggleNodeMouseMove,onfocus:_onToggleNodeMouseMove,onblur:_onToggleNodeMouseMove"\x3e'+'\x3cspan class\x3d"dojoxToggleSplitterA11y" dojoAttachPoint\x3d"a11yText"\x3e\x3c/span\x3e\x3c/div\x3e'+"\x3c/div\x3e",postMixInProperties:function(){this.inherited(arguments);
if(this.container&&this.container.cookieName)this._cookieName=this.container.cookieName+"_"+this.region},postCreate:function(){this.inherited(arguments);var region=this.region;dojo.addClass(this.domNode,this.baseClass+region.charAt(0).toUpperCase()+region.substring(1))},startup:function(){this.inherited(arguments);var parentPane=this.child,paneNode=this.child.domNode,intPaneSize=dojo.style(paneNode,this.horizontal?"height":"width");this.domNode.setAttribute("aria-controls",paneNode.id);dojo.forEach(["toggleSplitterState",
"toggleSplitterFullSize","toggleSplitterCollapsedSize"],function(name){var pname=name.substring("toggleSplitter".length);pname=pname.charAt(0).toLowerCase()+pname.substring(1);if(name in this.child)this[pname]=this.child[name]},this);if(!this.fullSize)this.fullSize=this.state=="full"?intPaneSize+"px":"75px";this._openStyleProps=this._getStyleProps(paneNode,"full");this._started=true;this.set("state",this.state);return this},_onKeyPress:function(evt){if(this.state=="full")this.inherited(arguments);
if(evt.charCode==dojo.keys.SPACE||evt.keyCode==dojo.keys.ENTER)this._toggle(evt)},_onToggleNodeMouseDown:function(evt){dojo.stopEvent(evt);this.toggleNode.focus()},_startDrag:function(e){if(this.state=="full")this.inherited(arguments)},_stopDrag:function(e){this.inherited(arguments);this.toggleNode.blur();if(this.container&&this.container.publishResizeOnToggleMove!==false)factory.publish(types.EVENTS.RESIZE,{},this);if(this.delegate&&this.delegate.onToggleSplitterSplitterMove)this.delegate.onToggleSplitterSplitterMove(this)},
_toggleEx:function(evt,state){var state;switch(this.state){case "full":state=this.collapsedSize?"collapsed":"closed";break;case "collapsed":state="closed";break;default:state="full"}this.set("state",state);var thiz=this;setTimeout(function(){if(thiz.delegate&&thiz.delegate.onChangeToggleSplitterState)thiz.delegate.onChangeToggleSplitterState(thiz,state)},100)},_toggle:function(evt){try{this._toggleEx(evt)}catch(e){}var thiz=this;setTimeout(function(){factory.publish(types.EVENTS.RESIZE,{},thiz)},
500)},_onToggleNodeMouseMove:function(evt){var baseClass=this.baseClass,toggleNode=this.toggleNode,on=this.state=="full"||this.state=="collapsed",leave=evt.type=="mouseout"||evt.type=="blur";dojo.toggleClass(toggleNode,baseClass+"IconOpen",leave&&on);dojo.toggleClass(toggleNode,baseClass+"IconOpenHover",!leave&&on);dojo.toggleClass(toggleNode,baseClass+"IconClosed",leave&&!on);dojo.toggleClass(toggleNode,baseClass+"IconClosedHover",!leave&&!on)},_handleOnChange:function(preState){var paneNode=this.child.domNode,
openProps,paneStyle,dim=this.horizontal?"height":"width";if(this.state=="full"){var styleProps=dojo.mixin({display:"block",overflow:"auto",visibility:"visible"},this._openStyleProps);styleProps[dim]=this._openStyleProps&&this._openStyleProps[dim]?this._openStyleProps[dim]:this.fullSize;dojo.style(this.domNode,"cursor","");dojo.style(paneNode,styleProps)}else if(this.state=="collapsed"){paneStyle=dojo.getComputedStyle(paneNode);openProps=this._getStyleProps(paneNode,"full",paneStyle);this._openStyleProps=
openProps;dojo.style(this.domNode,"cursor","auto");dojo.style(paneNode,dim,this.collapsedSize)}else{if(!this.collapsedSize){paneStyle=dojo.getComputedStyle(paneNode);openProps=this._getStyleProps(paneNode,"full",paneStyle);this._openStyleProps=openProps}var closedProps=this._getStyleProps(paneNode,"closed",paneStyle);dojo.style(this.domNode,"cursor","auto");dojo.style(paneNode,closedProps)}this._setStateClass();if(this.container._started)this.container._layoutChildren(this.region)},_getStyleProps:function(paneNode,
state,paneStyle){if(!paneStyle)paneStyle=dojo.getComputedStyle(paneNode);var styleProps={},dim=this.horizontal?"height":"width";styleProps["overflow"]=state!="closed"?paneStyle["overflow"]:"hidden";styleProps["visibility"]=state!="closed"?paneStyle["visibility"]:"hidden";styleProps[dim]=state!="closed"?paneNode.style[dim]||paneStyle[dim]:this._closedSize;var edgeNames=["Top","Right","Bottom","Left"];dojo.forEach(["padding","margin","border"],function(pname){for(var i=0;i<edgeNames.length;i++){var fullName=
pname+edgeNames[i];if(pname=="border")fullName+="Width";if(undefined!==paneStyle[fullName])styleProps[fullName]=state!="closed"?paneStyle[fullName]:0}});return styleProps},_setStateClass:function(){var arrow="\x26#9652",region=this.region.toLowerCase(),baseClass=this.baseClass,toggleNode=this.toggleNode,on=this.state=="full"||this.state=="collapsed",focused=this.focused;dojo.toggleClass(toggleNode,baseClass+"IconOpen",on&&!focused);dojo.toggleClass(toggleNode,baseClass+"IconClosed",!on&&!focused);
dojo.toggleClass(toggleNode,baseClass+"IconOpenHover",on&&focused);dojo.toggleClass(toggleNode,baseClass+"IconClosedHover",!on&&focused);if(region=="top"&&on||region=="bottom"&&!on)arrow="\x26#9650";else if(region=="top"&&!on||region=="bottom"&&on)arrow="\x26#9660";else if(region=="right"&&on||region=="left"&&!on)arrow="\x26#9654";else if(region=="right"&&!on||region=="left"&&on)arrow="\x26#9664";this.a11yText.innerHTML=arrow},_setStateAttr:function(state){if(!this._started)return;var preState=this.state;
this.state=state;this._handleOnChange(preState);var evtName;switch(state){case "full":this.domNode.setAttribute("aria-expanded",true);evtName="onOpen";break;case "collapsed":this.domNode.setAttribute("aria-expanded",true);evtName="onCollapsed";break;default:this.domNode.setAttribute("aria-expanded",false);evtName="onClosed"}this[evtName](this.child)},onOpen:function(pane){},onCollapsed:function(pane){},onClosed:function(pane){}});dojo.extend(dijit._Widget,{toggleSplitterState:"full",toggleSplitterFullSize:"",
toggleSplitterCollapsedSize:""});return ToggleSplitter})},"xide/widgets/ActionToolbar":function(){define(["dojo/_base/declare","dojo/dom-class","xide/widgets/ActionToolbarButton","dijit/Toolbar","xide/widgets/ActionToolbarMixin"],function(declare,domClass,ActionToolbarButton,Toolbar,ActionToolbarMixin){return declare("xide/widgets/ActionToolbar",[Toolbar,ActionToolbarMixin],{_createButton:function(operation,item,clickcb,disabled,add,className){var iconClass=this.toIconClass(operation);var title=this.toTitle(operation);
if(iconClass&&title){try{var button=new ActionToolbarButton({title:title,iconClass:iconClass,operation:operation,item:item,disabled:disabled},dojo.doc.createElement("div"));this.containerNode.appendChild(button.domNode);domClass.add(button.domNode,className||"actionToolbarButton");button.startup();if(add===false);else this.buttons.push(button);var thiz=this;button.domNode.onclick=function(){if(clickcb)clickcb(button);else thiz.onButtonClicked(button)}}catch(e){debugger}if(this.useElusive){domClass.remove(button.iconNode,
"dijitReset");domClass.add(button.iconNode,"actionToolbarButtonElusive")}return button}},startup:function(){this.inherited(arguments)}})})},"dojo/dnd/Moveable":function(){define("dojo/dnd/Moveable",["../_base/array","../_base/declare","../_base/event","../_base/lang","../dom","../dom-class","../Evented","../on","../topic","../touch","./common","./Mover","../_base/window"],function(array,declare,event,lang,dom,domClass,Evented,on,topic,touch,dnd,Mover,win){var Moveable=declare("dojo.dnd.Moveable",
[Evented],{handle:"",delay:0,skip:false,constructor:function(node,params){this.node=dom.byId(node);if(!params)params={};this.handle=params.handle?dom.byId(params.handle):null;if(!this.handle)this.handle=this.node;this.delay=params.delay>0?params.delay:0;this.skip=params.skip;this.mover=params.mover?params.mover:Mover;this.events=[on(this.handle,touch.press,lang.hitch(this,"onMouseDown")),on(this.handle,"dragstart",lang.hitch(this,"onSelectStart")),on(this.handle,"selectstart",lang.hitch(this,"onSelectStart"))]},
markupFactory:function(params,node,Ctor){return new Ctor(node,params)},destroy:function(){array.forEach(this.events,function(handle){handle.remove()});this.events=this.node=this.handle=null},onMouseDown:function(e){if(this.skip&&dnd.isFormElement(e))return;if(this.delay){this.events.push(on(this.handle,touch.move,lang.hitch(this,"onMouseMove")),on(this.handle,touch.release,lang.hitch(this,"onMouseUp")));this._lastX=e.pageX;this._lastY=e.pageY}else this.onDragDetected(e);event.stop(e)},onMouseMove:function(e){if(Math.abs(e.pageX-
this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e)}event.stop(e)},onMouseUp:function(e){for(var i=0;i<2;++i)this.events.pop().remove();event.stop(e)},onSelectStart:function(e){if(!this.skip||!dnd.isFormElement(e))event.stop(e)},onDragDetected:function(e){new this.mover(this.node,e,this)},onMoveStart:function(mover){topic.publish("/dnd/move/start",mover);domClass.add(win.body(),"dojoMove");domClass.add(this.node,"dojoMoveItem")},onMoveStop:function(mover){topic.publish("/dnd/move/stop",
mover);domClass.remove(win.body(),"dojoMove");domClass.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(mover,leftTop){this.onMoving(mover,leftTop);var s=mover.node.style;s.left=leftTop.l+"px";s.top=leftTop.t+"px";this.onMoved(mover,leftTop)},onMoving:function(){},onMoved:function(){}});return Moveable})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(array,lang,Deferred){var QueryResults=function(results){if(!results)return results;
if(results.then)results=lang.delegate(results);function addIterativeMethod(method){if(!results[method])results[method]=function(){var args=arguments;return Deferred.when(results,function(results){Array.prototype.unshift.call(args,results);return QueryResults(array[method].apply(array,args))})}}addIterativeMethod("forEach");addIterativeMethod("filter");addIterativeMethod("map");if(!results.total)results.total=Deferred.when(results,function(results){return results.length});return results};lang.setObject("dojo.store.util.QueryResults",
QueryResults);return QueryResults})},"dojox/mdnd/AutoScroll":function(){define("dojox/mdnd/AutoScroll",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/sniff","dojo/ready","dojo/_base/window"],function(dojo,declare,lang,connect,sniff,ready){var as=declare("dojox.mdnd.AutoScroll",null,{interval:3,recursiveTimer:10,marginMouse:50,constructor:function(){this.resizeHandler=connect.connect(dojo.global,"onresize",this,function(){this.getViewport()});ready(lang.hitch(this,
"init"))},init:function(){this._html=sniff("webkit")?dojo.body():dojo.body().parentNode;this.getViewport()},getViewport:function(){var d=dojo.doc,dd=d.documentElement,w=window,b=dojo.body();if(dojo.isMozilla)this._v={"w":dd.clientWidth,"h":w.innerHeight};else if(!dojo.isOpera&&w.innerWidth)this._v={"w":w.innerWidth,"h":w.innerHeight};else if(!dojo.isOpera&&dd&&dd.clientWidth)this._v={"w":dd.clientWidth,"h":dd.clientHeight};else if(b.clientWidth)this._v={"w":b.clientWidth,"h":b.clientHeight}},setAutoScrollNode:function(node){this._node=
node},setAutoScrollMaxPage:function(){this._yMax=this._html.scrollHeight;this._xMax=this._html.scrollWidth},checkAutoScroll:function(e){if(this._autoScrollActive)this.stopAutoScroll();this._y=e.pageY;this._x=e.pageX;if(e.clientX<this.marginMouse){this._autoScrollActive=true;this._autoScrollLeft(e)}else if(e.clientX>this._v.w-this.marginMouse){this._autoScrollActive=true;this._autoScrollRight(e)}if(e.clientY<this.marginMouse){this._autoScrollActive=true;this._autoScrollUp(e)}else if(e.clientY>this._v.h-
this.marginMouse){this._autoScrollActive=true;this._autoScrollDown()}},_autoScrollDown:function(){if(this._timer)clearTimeout(this._timer);if(this._autoScrollActive&&this._y+this.marginMouse<this._yMax){this._html.scrollTop+=this.interval;this._node.style.top=parseInt(this._node.style.top)+this.interval+"px";this._y+=this.interval;this._timer=setTimeout(lang.hitch(this,"_autoScrollDown"),this.recursiveTimer)}},_autoScrollUp:function(){if(this._timer)clearTimeout(this._timer);if(this._autoScrollActive&&
this._y-this.marginMouse>0){this._html.scrollTop-=this.interval;this._node.style.top=parseInt(this._node.style.top)-this.interval+"px";this._y-=this.interval;this._timer=setTimeout(lang.hitch(this,"_autoScrollUp"),this.recursiveTimer)}},_autoScrollRight:function(){if(this._timer)clearTimeout(this._timer);if(this._autoScrollActive&&this._x+this.marginMouse<this._xMax){this._html.scrollLeft+=this.interval;this._node.style.left=parseInt(this._node.style.left)+this.interval+"px";this._x+=this.interval;
this._timer=setTimeout(lang.hitch(this,"_autoScrollRight"),this.recursiveTimer)}},_autoScrollLeft:function(e){if(this._timer)clearTimeout(this._timer);if(this._autoScrollActive&&this._x-this.marginMouse>0){this._html.scrollLeft-=this.interval;this._node.style.left=parseInt(this._node.style.left)-this.interval+"px";this._x-=this.interval;this._timer=setTimeout(lang.hitch(this,"_autoScrollLeft"),this.recursiveTimer)}},stopAutoScroll:function(){if(this._timer)clearTimeout(this._timer);this._autoScrollActive=
false},destroy:function(){connect.disconnect(this.resizeHandler)}});as.autoScroll=null;as.autoScroll=new as;return as})},"dojo/AdapterRegistry":function(){define("dojo/AdapterRegistry",["./_base/kernel","./_base/lang"],function(dojo,lang){var AdapterRegistry=dojo.AdapterRegistry=function(returnWrappers){this.pairs=[];this.returnWrappers=returnWrappers||false};lang.extend(AdapterRegistry,{register:function(name,check,wrap,directReturn,override){this.pairs[override?"unshift":"push"]([name,check,wrap,
directReturn])},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments))if(pair[3]||this.returnWrappers)return pair[2];else return pair[2].apply(this,arguments)}throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true}}return false}});return AdapterRegistry})},"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onClick" class\x3d"dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point\x3d"focusNode" role\x3d"button"\x3e\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitTabStripIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,titleNode" class\x3d"dijitButtonText"\x3e\x3c/span\x3e\n\x3c/div\x3e',
"dijit/form/CheckBox":function(){require({cache:{"url:dijit/form/templates/CheckBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cinput\n\t \t${!nameAttrSetting} type\x3d"${type}" role\x3d"${type}" aria-checked\x3d"false" ${checkedAttrSetting}\n\t\tclass\x3d"dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point\x3d"focusNode"\n\t \tdata-dojo-attach-event\x3d"ondijitclick:_onClick"\n/\x3e\x3c/div\x3e\n'}});define("dijit/form/CheckBox",["require","dojo/_base/declare",
"dojo/dom-attr","dojo/has","dojo/query","dojo/ready","./ToggleButton","./_CheckBoxMixin","dojo/text!./templates/CheckBox.html","dojo/NodeList-dom","dijit/a11yclick"],function(require,declare,domAttr,has,query,ready,ToggleButton,_CheckBoxMixin,template){if(has("dijit-legacy-requires"))ready(0,function(){var requires=["dijit/form/RadioButton"];require(requires)});return declare("dijit.form.CheckBox",[ToggleButton,_CheckBoxMixin],{templateString:template,baseClass:"dijitCheckBox",_setValueAttr:function(newValue,
priorityChange){if(typeof newValue=="string"){this.inherited(arguments);newValue=true}if(this._created)this.set("checked",newValue,priorityChange)},_getValueAttr:function(){return this.checked&&this._get("value")},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){if(this.id)query("label[for\x3d'"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){if(this.id)query("label[for\x3d'"+
this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"xide/widgets/ExpressionEditor":function(){define(["dojo/_base/declare","dojo/on","dojo/dom-geometry","xide/types","xide/utils","xide/widgets/ActionToolbar","xide/widgets/WidgetBase","xide/views/TextEditor","dojo/keys","dojo/store/Memory","dojo/store/Observable","./ExpressionsGridView"],function(declare,on,domGeometry,types,utils,ActionToolbar,WidgetBase,TextEditor,keys,Memory,Observable,ExpressionsGridView){return declare("xide.widgets.ExpressionEditor",
[WidgetBase],{cssClass:"expressionEditor",aceNode:null,aceEditor:null,minHeight:"500px",minWidth:"600px",helpContainer:null,autoCompleterWords:null,apiStore:null,ctlrKeyDown:false,templateString:"\x3cdiv style\x3d'height: inherit;'\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutMain' data-dojo-type\x3d'xide.layout.BorderContainer' data-dojo-props\x3d\"design:'headline'\" class\x3d'layoutMain' style\x3d'height:${!minHeight}'\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutTop' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'top',splitter:'true',toggleSplitterState:'full',toggleSplitterClosedSize:'0px',toggleSplitterFullSize:'150px'\" class\x3d'layoutTop ui-state-default' style\x3d'height:100px;min-height: 125px;'\x3e\x3c/div\x3e"+
"\x3cdiv data-dojo-attach-point\x3d'layoutLeft' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'leading',splitter:'true'\" class\x3d'layoutLeft' style\x3d'width: 170px;padding:0px;'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutCenter' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'center',splitter:'false'\" class\x3d'layoutCenter' style\x3d'padding: 0px'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutBottom' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'bottom',splitter:'true',toggleSplitterState:'full',toggleSplitterClosedSize:'0px',toggleSplitterFullSize:'150px'\" class\x3d'layoutBottom ui-state-default'\x3e\x3cdiv data-dojo-attach-point\x3d'helpContainer' style\x3d'height: 80px;'\x3e\x3c/div\x3e\x3c/div\x3e"+
"\x3c/div\x3e"+"\x3c/div\x3e",getValue:function(){if(this.aceEditor)return this.aceEditor.get("value");return this.inherited(arguments)},addAutoCompleterWord:function(text,help){if(!this.autoCompleterWords)this.autoCompleterWords=[];this.autoCompleterWords.push({word:text,value:text,meta:help||""})},insertSymbol:function(val,isFunction){if(this.aceEditor){this.aceEditor.get("value");var editor=this.aceEditor.getEditor();var selection=editor.getSelectedText();if(selection&&selection.length>0)if(isFunction&&
val.indexOf("(")==-1)val=val+"("+selection+")";else val=" "+val+" ";editor.insert(val)}},showDocumentation:function(text){dojo.empty(this.helpContainer);var help=dojo.create("div",{innerHTML:"",className:"ui-widget"});this.helpContainer.appendChild(help);var textText=dojo.create("span",{innerHTML:text,className:"ui-content"});help.appendChild(textText)},_createSymbol:function(label,value){var thiz=this;return{name:"Call Command",owner:this,icon:"-",title:"Equals",style:"float:left;font-size:12px",
label:label,extraClass:"blockExpressionSymbolButton",handler:function(){thiz.insertSymbol(value||label,false)}}},runExpression:function(){if(this.userData.delegate&&this.userData.delegate.runExpression){var thiz=this;var _showText=function(text){dojo.empty(thiz.helpContainer);text=text.replace("return","");var help=dojo.create("div",{innerHTML:"",className:"ui-widget"});thiz.helpContainer.appendChild(help);var textText=dojo.create("span",{innerHTML:text,className:"ui-content"});help.appendChild(textText)};
var _error=function(text,e){_showText(text)};var _run=function(text,e){_showText(text)};var expression=this.getValue();var result=this.userData.delegate.runExpression(expression,_run,_error)}},initToolbar:function(){this.toolbar=utils.addWidget(ActionToolbar,{delegate:this,useElusive:false,style:"display:block;height:23px;left:43px;position:absolute;bottom:3px;"},this,this.layoutTop.containerNode,true);var thiz=this;var actions=[];actions=actions.concat([{title:"Play",icon:"el-icon-play",place:"first",
emit:false,extraClass:"blockExpressionSymbolButton",elusive:true,style:"float:left;font-size:12px",handler:function(){thiz.runExpression()}},this._createSymbol("+"),this._createSymbol("-"),this._createSymbol("*"),this._createSymbol("/"),this._createSymbol("\x3d","\x3d\x3d"),this._createSymbol("\x3c"),this._createSymbol("\x3c\x3d"),this._createSymbol("\x3e"),this._createSymbol("\x3e\x3d"),this._createSymbol(" "),this._createSymbol("%"),this._createSymbol("AND","\x26\x26"),this._createSymbol("OR","||"),
this._createSymbol("XOR","^"),this._createSymbol("NOT","~")]);this.toolbar.clear();if(actions&&actions.length>0)this.toolbar.addActions(actions,this,[])},createBranch:function(name,where){var branch={name:name,group:"top",children:[],value:null};where.push(branch);return branch},createAPIStore:function(){var sdata={identifier:"_id",label:"level",items:this.api};var store=Observable(Memory({data:sdata}))},createLeaf:function(label,value,parent,help,isFunction,where){var leaf={name:label,group:"leaf",
value:value,parent:parent,help:help,isFunction:isFunction!=null?isFunction:true};this.addAutoCompleterWord(value,help);if(where)where.children.push({_reference:label});return leaf},apiItemToLeaf:function(item){var result={}},getAPIField:function(item,title){for(var i=0;i<item.sectionHTMLs.length;i++){var obj=item.sectionHTMLs[i];if(obj.indexOf('id \x3d "'+title+'"')!=-1)return obj}return""},insertApiItems:function(startString,dst,where){var result=[];for(var i=0;i<this.api.length;i++){var item=this.api[i];
if(item.title.indexOf(startString)!=-1){var leafData=this.apiItemToLeaf(item);var title=item.title.replace(startString,"");var description=this.getAPIField(item,"Description");var parameters=this.getAPIField(item,"Parameters");var examples=this.getAPIField(item,"Examples");var syntax=this.getAPIField(item,"Syntax");description=description+"\x3c/br\x3e"+parameters+"\x3cbr/\x3e"+examples;syntax=utils.strip_tags(syntax);syntax=syntax.replace("Syntax","");syntax=utils.replaceAll("\n","",syntax);syntax=
utils.replaceAll("\r","",syntax);where.push(this.createLeaf(title,syntax,startString.replace(".",""),description,true,dst))}}return result},_createExpressionData:function(){var data={items:[],identifier:"name",label:"name"};var _Array=this.createBranch("Array",data.items);this.insertApiItems("Array.",_Array,data.items);var _Date=this.createBranch("Date",data.items);this.insertApiItems("Date.",_Date,data.items);var _Function=this.createBranch("Function",data.items);this.insertApiItems("Function.",
_Function,data.items);var _Math=this.createBranch("Math",data.items);this.insertApiItems("Math.",_Math,data.items);var _Number=this.createBranch("Number",data.items);this.insertApiItems("Number.",_Number,data.items);var _Object=this.createBranch("Object",data.items);this.insertApiItems("Object.",_Object,data.items);var _String=this.createBranch("String",data.items);this.insertApiItems("String.",_String,data.items);var _RegExp=this.createBranch("RegExp",data.items);this.insertApiItems("RegExp.",_RegExp,
data.items);this.publish(types.EVENTS.ON_EXPRESSION_EDITOR_ADD_FUNCTIONS,{root:data,widget:this,user:this.userData});return data},_createExpressionStore:function(){return Observable(new Memory({data:this._createExpressionData(),getChildren:function(parent,options){return this.query({parent:this.getIdentity(parent)})},mayHaveChildren:function(parent){return false}}))},updateGrid:function(item){if(this.gridView){this.gridView.grid.set("store",this.store,{parent:item.name});this.gridView.grid.clearSelection()}},
onTreeClicked:function(item,nodeWidget){this.lastSelectedTreeNode=nodeWidget;this.currentItem=item;this.updateGrid(item)},_createTreeView:function(){this.leftStore=this._createExpressionStore();var thiz=this;var grid=new ExpressionsGridView({keyboardNavigation:false,mouseNavigation:false,openTreeOnEnter:false,dnd:false,store:this.leftStore,style:"overflow-x:hidden;padding:0px",delegate:{onItemSelected:function(item){if(!item)return;if(thiz.gridView){thiz.gridView.grid.set("store",thiz.leftStore,{parent:item.name});
thiz.gridView.onResize();thiz.gridView.grid.clearSelection()}}}});this.leftGrid=grid;this.layoutLeft.containerNode.appendChild(grid.domNode);grid.startup();this.leftGrid.grid.set("store",this.leftStore,{group:"top"})},_createGridView:function(){var thiz=this;var grid=new ExpressionsGridView({keyboardNavigation:true,mouseNavigation:true,openTreeOnEnter:false,dnd:false,store:this.leftStore,style:"overflow-x:hidden;padding:0px",delegate:{currentItem:null,onItemSelected:function(item){if(!item)return;
this.currentItem=item;if(item&&item.help)thiz.showDocumentation(item.help||"")},onGridMouseDoubleClick:function(){if(this.currentItem)thiz.insertSymbol(this.currentItem.value,this.currentItem.isFunction)}}});this.gridView=grid;this.layoutCenter.containerNode.appendChild(grid.domNode);grid.startup();this.gridView.grid.set("store",this.leftStore,{group:"nada"})},createWidgets:function(){this._createACEEditor(this.layoutTop.containerNode);this._createTreeView();try{this._createGridView()}catch(e){debugger}this.aceEditor.addAutoCompleter(this.autoCompleterWords);
this.initToolbar()},onReady:function(){var thiz=this;setTimeout(function(){thiz.layoutMain.resize()},100)},onKeyUp:function(evt){switch(evt.keyCode){case keys.ALT:case keys.CTRL:this.ctlrKeyDown=false;break}},onKey:function(evt){switch(evt.keyCode){case keys.META:case keys.ALT:case keys.SHIFT:case keys.CTRL:this.ctlrKeyDown=true;setTimeout(function(){thiz.ctlrKeyDown=false},2E3);break}var thiz=this;if(evt.type&&evt.type=="keyup")return this.onKeyUp(evt);var charOrCode=evt.charCode||evt.keyCode;if(this.ctlrKeyDown&&
charOrCode===83){evt.preventDefault();if(this.delegate&&this.delegate.onSave)this.delegate.onSave(this.userData,this.getValue())}},setValue:function(value){this.userData=utils.setCIValueByField(this.userData,"value",value)},_onACEUpdate:function(){var _newValue=this.getValue();this.setValue(_newValue);this.changed=true;if(this.userData)this.userData.changed=true},setupEventHandlers:function(){var thiz=this;on(this.aceEditor,"keydown",function(event){thiz.onKey(event)})},_createACEEditor:function(parentNode){var _options=
{region:"center",value:this.getValue(),style:"margin: 0; padding: 0; position:relative;overflow: auto;min-height:125px;height:inherit;width:inherit;",mode:"javascript",readOnly:false,tabSize:2,softTabs:false,wordWrap:false,showPrintMargin:false,highlightActiveLine:false,fontSize:"12px",showGutter:true,defaultTheme:"chrome",className:"editor-ace ace_editor"};var editorPane=new TextEditor(_options,dojo.doc.createElement("div"));parentNode.appendChild(editorPane.domNode);editorPane.startup();this.aceEditor=
editorPane;this.aceEditor.setOptions();var editor=this.aceEditor.getEditor();var thiz=this;editor.on("change",function(){thiz._onACEUpdate()});editor.on("blur",function(){thiz.setActive(false)});editor.on("focus",function(){thiz.setActive(true)});this.setupEventHandlers();editorPane.set("theme","chrome");editorPane.set("mode","javascript")},onViewShow:function(evt){},updateItemActions:function(items,owner,actions,where){if(this.toolbar&&this.toolbar.getCurrentItem()!=items)this.toolbar.clear()},onItemSelected:function(evt){},
onViewRemoved:function(){},resizeToNode:function(parent,what){if(parent&&what){var size=domGeometry.getMarginBox(parent);var dstHeight=size.h;what.containerNode.style.height=dstHeight+"px";what.resize();setTimeout(function(){what.resize()},300)}},resize:function(){this.inherited(arguments);if(!this.layoutMain)return;this.resizeToNode(this.domNode,this.layoutMain);this.layoutMain.resize();if(this.gridView)this.gridView.onResize();if(this.leftGrid)this.leftGrid.onResize();if(this.aceEditor){var size=
domGeometry.getMarginBox(this.aceEditor.domNode);this.aceEditor.resize()}},onChangeToggleSplitterState:function(splitter,state){this.resize()},onToggleSplitterSplitterMove:function(splitter,state){},setupToggleSplitterListeners:function(){this.layoutMain.publishResizeOnToggleMove=false;if(this.layoutLeft&&this.layoutLeft._splitterWidget)this.layoutLeft._splitterWidget.delegate=this;if(this.layoutRight&&this.layoutRight._splitterWidget)this.layoutRight._splitterWidget.delegate=this;if(this.layoutBottom&&
this.layoutBottom._splitterWidget)this.layoutBottom._splitterWidget.delegate=this;if(this.layoutTop&&this.layoutTop._splitterWidget)this.layoutTop._splitterWidget.delegate=this},startup:function(){var thiz=this;this.inherited(arguments);var _re=require;var js=_re("xide/widgets/ExpressionJavaScript");_re(["xide/widgets/ExpressionJavaScript"],function(ExpressionJavaScript){thiz.api=ExpressionJavaScript.prototype.api;thiz.setupToggleSplitterListeners();thiz.createWidgets();thiz.onReady();thiz.layoutMain.resize();
thiz.subscribe(types.EVENTS.ON_VIEW_SHOW,thiz.onViewShow);thiz.subscribe(types.EVENTS.RESIZE,thiz.resize)})}})})},"xfile/views/NewItemDialog":function(){define("xfile/views/NewItemDialog",["dojo/_base/declare","xfile/views/ActionDialog","xide/types","xide/factory"],function(declare,ActionDialog,types,factory){return declare("xfile.views.NewItemDialog",[ActionDialog],{value:null,fileNameValid:true,itemLabel:"folder",onValidated:function(valid){if(this.okButton)this.okButton.set("disabled",!valid)},
onNormalKey:function(){if(this.editBox)this.editBox._refreshState(true)},fileNameValidator:function(value,constraints){var thiz=this;var result=false;var reg=new RegExp(/^[0-9a-zA-Z ...\-_ ]+$/);reg=new RegExp(/^[-\w^&'@{}[\],$=!#().%+~ ]+$/);if(value&&reg.test(value))if(thiz.delegate&&thiz.delegate.hasItem&&thiz.delegate.hasItem(value)){result=false;thiz.promptMessage="Item already exists";thiz.message="Item already exists"}else{result=true;thiz.message="Enter new "+thiz.itemLabel+" name"}else{thiz.promptMessage=
"This is not a valid "+thiz.itemLabel+" name, try without special characters!";thiz.message="This is not a valid "+thiz.itemLabel+" name, try without special characters!";result=false}this.fileNameValid=result;if(this.owner&&this.owner.onValidated)this.owner.onValidated(result);return result},getValue:function(){return this.editBox.getValue()},initWithFileOoperation:function(src){this.value=src.name;if(src.name=="..")this.value="";this.itemLabel=this.operation==types.OPERATION.NEW_DIRECTORY?"folder":
"file";this.editBox=factory.createValidationTextBox(this.containerNode,"float:left;","Name",src.name,this.fileNameValidator,this.delegate.delegate,"Not a filename!","I need some input");this.editBox.owner=this;this.addActionButtons();this.fixHeight();this.resize()},startup:function(){this.inherited(arguments);if(this.didLoad)return;this.didLoad=true}})})},"dijit/form/DropDownButton":function(){require({cache:{"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\n\t\t\t\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\tdata-dojo-attach-point\x3d"valueNode" role\x3d"presentation"\n/\x3e\x3c/span\x3e\n'}});
define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(declare,lang,query,registry,popup,Button,_Container,_HasDropDown,template){return declare("dijit.form.DropDownButton",[Button,_Container,_HasDropDown],{baseClass:"dijitDropDownButton",templateString:template,_fillContent:function(){if(this.srcNodeRef){var nodes=query("*",this.srcNodeRef);
this.inherited(arguments,[nodes[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(this._started)return;if(!this.dropDown&&this.dropDownContainer){var dropDownNode=query("[widgetId]",this.dropDownContainer)[0];if(dropDownNode)this.dropDown=registry.byNode(dropDownNode);delete this.dropDownContainer}if(this.dropDown)popup.hide(this.dropDown);this.inherited(arguments)},isLoaded:function(){var dropDown=this.dropDown;return!!dropDown&&(!dropDown.href||dropDown.isLoaded)},loadDropDown:function(callback){var dropDown=
this.dropDown;var handler=dropDown.on("load",lang.hitch(this,function(){handler.remove();callback()}));dropDown.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(dojo,lang){var regexp={};lang.setObject("dojo.regexp",regexp);regexp.escapeString=function(str,except){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(except&&except.indexOf(ch)!=-1)return ch;return"\\"+ch})};
regexp.buildGroupRE=function(arr,re,nonCapture){if(!(arr instanceof Array))return re(arr);var b=[];for(var i=0;i<arr.length;i++)b.push(re(arr[i]));return regexp.group(b.join("|"),nonCapture)};regexp.group=function(expression,nonCapture){return"("+(nonCapture?"?:":"")+expression+")"};return regexp})},"dojo/_base/config":function(){define(["../has","require"],function(has,require){var result={};if(1){var src=require.rawConfig,p;for(p in src)result[p]=src[p]}else{var adviseHas=function(featureSet,prefix,
booting){for(p in featureSet)p!="has"&&has.add(prefix+p,featureSet[p],0,booting)};result=1?require.rawConfig:this.dojoConfig||this.djConfig||{};adviseHas(result,"config",1);adviseHas(result.has,"",1)}return result})},"xide/widgets/WidgetReference":function(){define(["dojo/_base/declare","xide/widgets/Reference","xide/widgets/_WidgetPickerMixin","xide/utils","xide/types","dijit/registry"],function(declare,Reference,_WidgetPickerMixin,utils,types,registry){return declare("xide.widgets.WidgetReference",
[Reference,_WidgetPickerMixin],{allowHTMLNodes:false,allowWidgets:true,lastPickedNode:null,lastPickedWidget:null,getValue:function(){return"asdfasdf"},skipWidgetClasses:["dijit.layout._TabButton","xfile.views.ToggleSplitter"],skipWidgetCSSClasses:["dijitButtonHover","dijitHover","dijit","dijitInline","dijitReset","dijitCheckBoxChecked","dijitChecked","dijitLeft"],toReference:function(node){},widgetToReference:function(widget){0&&console.log("determine reference widget by widget, use mode "+this.mode,
widget);switch(this.mode){case types.WIDGET_REFERENCE_MODE.BY_ID:return widget.id;case types.WIDGET_REFERENCE_MODE.BY_CLASS:return widget.declaredClass||"";case types.WIDGET_REFERENCE_MODE.BY_CSS:var _node=widget.domNode?widget.domNode:widget;var _classes=_node.className;var els=_classes.split(" ");var result="";for(var i=0;i<els.length;i++){if(utils.contains(this.skipWidgetCSSClasses,els[i])>-1||els[i].toLowerCase().indexOf("hover")>-1)continue;result+=" "+els[i]}return result.trim();default:}return null},
onModeChanged:function(mode){0&&console.log("on widget reference mode changed :  "+mode);this.mode=mode;if(this.lastPickedNode)this.updateReferenceNode(this.lastPickedNode)},updateReferenceNode:function(node){var widget=registry.getEnclosingWidget(node);var reference=null;if(widget){this.lastPickedWidget=widget;if(this.allowWidgets)reference=this.widgetToReference(widget);else if(this.allowHTMLNodes)reference=this.widgetToReference(node)}0&&console.log("widget reference \x3d "+reference);if(reference)this.editBox.set("value",
reference)},isPickable:function(node){if(this.allowWidgets){var widget=registry.getEnclosingWidget(node);if(widget){if(this.skipWidgetClasses.indexOf(widget.declaredClass)>-1)return false;if(node.id&&node.id==widget.id)return true;else;}else return false}else if(this.allowHTMLNodes)return true;return false},onNodePicked:function(node){this.lastPickedNode=node;this.updateReferenceNode(node)},onPick:function(){this._pick()}})})},"dojo/io/script":function(){define(["../_base/connect","../_base/kernel",
"../_base/lang","../sniff","../_base/window","../_base/xhr","../dom","../dom-construct","../request/script"],function(connect,kernel,lang,has,win,xhr,dom,domConstruct,_script){kernel.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var script={get:function(args){var rDfd;var dfd=this._makeScriptDeferred(args,function(dfd){rDfd&&rDfd.cancel()});var ioArgs=dfd.ioArgs;xhr._ioAddQueryToUrl(ioArgs);xhr._ioNotifyStart(dfd);rDfd=_script.get(ioArgs.url,{timeout:args.timeout,jsonp:ioArgs.jsonp,
checkString:args.checkString,ioArgs:ioArgs,frameDoc:args.frameDoc,canAttach:function(rDfd){ioArgs.requestId=rDfd.id;ioArgs.scriptId=rDfd.scriptId;ioArgs.canDelete=rDfd.canDelete;return script._canAttach(ioArgs)}},true);rDfd.then(function(){dfd.resolve(dfd)}).otherwise(function(error){dfd.ioArgs.error=error;dfd.reject(error)});return dfd},attach:_script._attach,remove:_script._remove,_makeScriptDeferred:function(args,cancel){var dfd=xhr._ioSetArgs(args,cancel||this._deferredCancel,this._deferredOk,
this._deferredError);var ioArgs=dfd.ioArgs;ioArgs.id=kernel._scopeName+"IoScript"+this._counter++;ioArgs.canDelete=false;ioArgs.jsonp=args.callbackParamName||args.jsonp;if(ioArgs.jsonp){ioArgs.query=ioArgs.query||"";if(ioArgs.query.length>0)ioArgs.query+="\x26";ioArgs.query+=ioArgs.jsonp+"\x3d"+(args.frameDoc?"parent.":"")+kernel._scopeName+".io.script.jsonp_"+ioArgs.id+"._jsonpCallback";ioArgs.frameDoc=args.frameDoc;ioArgs.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+ioArgs.id]=
dfd}return dfd},_deferredCancel:function(dfd){dfd.canceled=true},_deferredOk:function(dfd){var ioArgs=dfd.ioArgs;return ioArgs.json||ioArgs.scriptLoaded||ioArgs},_deferredError:function(error,dfd){0&&console.log("dojo.io.script error",error);return error},_deadScripts:[],_counter:1,_addDeadScript:function(ioArgs){script._deadScripts.push({id:ioArgs.id,frameDoc:ioArgs.frameDoc});ioArgs.frameDoc=null},_validCheck:function(dfd){var deadScripts=script._deadScripts;if(deadScripts&&deadScripts.length>0){for(var i=
0;i<deadScripts.length;i++){script.remove(deadScripts[i].id,deadScripts[i].frameDoc);deadScripts[i].frameDoc=null}script._deadScripts=[]}return true},_ioCheck:function(dfd){var ioArgs=dfd.ioArgs;if(ioArgs.json||ioArgs.scriptLoaded&&!ioArgs.args.checkString)return true;var checkString=ioArgs.args.checkString;return checkString&&eval("typeof("+checkString+") !\x3d 'undefined'")},_resHandle:function(dfd){if(script._ioCheck(dfd))dfd.callback(dfd);else dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"))},
_canAttach:function(){return true},_jsonpCallback:function(json){this.ioArgs.json=json;kernel.global[_script._callbacksProperty][this.ioArgs.requestId](json)}};lang.setObject("dojo.io.script",script);return script})},"dojo/Evented":function(){define("dojo/Evented",["./aspect","./on"],function(aspect,on){var after=aspect.after;function Evented(){}Evented.prototype={on:function(type,listener){return on.parse(this,type,listener,function(target,type){return after(target,"on"+type,listener,true)})},emit:function(type,
event){var args=[this];args.push.apply(args,arguments);return on.emit.apply(on,args)}};return Evented})},"dojox/widget/Standby":function(){define("dojox/widget/Standby",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/window","dojo/_base/window","dojo/_base/fx","dojo/fx","dijit/_Widget","dijit/_TemplatedMixin","dijit/registry"],function(kernel,declare,array,
event,has,dom,attr,construct,geometry,domStyle,window,baseWindow,baseFx,fx,_Widget,_TemplatedMixin,registry){kernel.experimental("dojox.widget.Standby");return declare("dojox.widget.Standby",[_Widget,_TemplatedMixin],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:0.75,templateString:"\x3cdiv\x3e"+'\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; '+
'position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e'+'\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; '+'position: absolute; top: 0px; left: 0px; cursor:wait;" '+'dojoAttachPoint\x3d"_imageNode"\x3e'+'\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; '+'top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e'+"\x3c/div\x3e",_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:false,
_resizeCheck:null,_started:false,_parent:null,startup:function(args){if(!this._started){if(typeof this.target==="string"){var w=registry.byId(this.target);this.target=w?w.domNode:dom.byId(this.target)}if(this.text)this._textNode.innerHTML=this.text;if(this.centerIndicator==="image"){this._centerNode=this._imageNode;attr.set(this._imageNode,"src",this.image);attr.set(this._imageNode,"alt",this.imageText)}else this._centerNode=this._textNode;domStyle.set(this._underlayNode,{display:"none",backgroundColor:this.color});
domStyle.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");if(this.domNode.parentNode&&this.domNode.parentNode!=baseWindow.body())baseWindow.body().appendChild(this.domNode);if(has("ie")==7){this._ieFixNode=construct.create("div");domStyle.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"});baseWindow.body().appendChild(this._ieFixNode)}this.inherited(arguments)}},show:function(){if(!this._displayed){if(this._anim){this._anim.stop();
delete this._anim}this._displayed=true;this._size();this._disableOverflow();this._fadeIn()}},hide:function(){if(this._displayed){if(this._anim){this._anim.stop();delete this._anim}this._size();this._fadeOut();this._displayed=false;if(this._resizeCheck!==null){clearInterval(this._resizeCheck);this._resizeCheck=null}}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=false;if(this._resizeCheck)clearInterval(this._resizeCheck);
domStyle.set(this._centerNode,"display","none");domStyle.set(this._underlayNode,"display","none");if(has("ie")==7&&this._ieFixNode){baseWindow.body().removeChild(this._ieFixNode);delete this._ieFixNode}if(this._anim){this._anim.stop();delete this._anim}this.target=null;this._imageNode=null;this._textNode=null;this._centerNode=null;this.inherited(arguments)},_size:function(){if(this._displayed){var dir=attr.get(baseWindow.body(),"dir");if(dir)dir=dir.toLowerCase();var _ie7zoom;var scrollers=this._scrollerWidths();
var target=this.target;var curStyle=domStyle.get(this._centerNode,"display");domStyle.set(this._centerNode,"display","block");var box=geometry.position(target,true);if(target===baseWindow.body()||target===baseWindow.doc){box=window.getBox();box.x=box.l;box.y=box.t}var cntrIndicator=geometry.getMarginBox(this._centerNode);domStyle.set(this._centerNode,"display",curStyle);if(this._ieFixNode){_ie7zoom=-this._ieFixNode.offsetTop/1E3;box.x=Math.floor((box.x+0.9)/_ie7zoom);box.y=Math.floor((box.y+0.9)/
_ie7zoom);box.w=Math.floor((box.w+0.9)/_ie7zoom);box.h=Math.floor((box.h+0.9)/_ie7zoom)}var zi=domStyle.get(target,"zIndex");var ziUl=zi;var ziIn=zi;if(this.zIndex==="auto")if(zi!="auto"){ziUl=parseInt(ziUl,10)+1;ziIn=parseInt(ziIn,10)+2}else{var cNode=target;if(cNode&&cNode!==baseWindow.body()&&cNode!==baseWindow.doc){cNode=target.parentNode;var oldZi=-1E5;while(cNode&&cNode!==baseWindow.body()){zi=domStyle.get(cNode,"zIndex");if(!zi||zi==="auto")cNode=cNode.parentNode;else{var newZi=parseInt(zi,
10);if(oldZi<newZi){oldZi=newZi;ziUl=newZi+1;ziIn=newZi+2}cNode=cNode.parentNode}}}}else{ziUl=parseInt(this.zIndex,10)+1;ziIn=parseInt(this.zIndex,10)+2}domStyle.set(this._centerNode,"zIndex",ziIn);domStyle.set(this._underlayNode,"zIndex",ziUl);var pn=target.parentNode;if(pn&&pn!==baseWindow.body()&&target!==baseWindow.body()&&target!==baseWindow.doc){var obh=box.h;var obw=box.w;var pnBox=geometry.position(pn,true);if(this._ieFixNode){_ie7zoom=-this._ieFixNode.offsetTop/1E3;pnBox.x=Math.floor((pnBox.x+
0.9)/_ie7zoom);pnBox.y=Math.floor((pnBox.y+0.9)/_ie7zoom);pnBox.w=Math.floor((pnBox.w+0.9)/_ie7zoom);pnBox.h=Math.floor((pnBox.h+0.9)/_ie7zoom)}pnBox.w-=pn.scrollHeight>pn.clientHeight&&pn.clientHeight>0?scrollers.v:0;pnBox.h-=pn.scrollWidth>pn.clientWidth&&pn.clientWidth>0?scrollers.h:0;if(dir==="rtl")if(has("opera")){box.x+=pn.scrollHeight>pn.clientHeight&&pn.clientHeight>0?scrollers.v:0;pnBox.x+=pn.scrollHeight>pn.clientHeight&&pn.clientHeight>0?scrollers.v:0}else if(has("ie"))pnBox.x+=pn.scrollHeight>
pn.clientHeight&&pn.clientHeight>0?scrollers.v:0;else if(has("webkit"));if(pnBox.w<box.w)box.w=box.w-pnBox.w;if(pnBox.h<box.h)box.h=box.h-pnBox.h;var vpTop=pnBox.y;var vpBottom=pnBox.y+pnBox.h;var bTop=box.y;var bBottom=box.y+obh;var vpLeft=pnBox.x;var vpRight=pnBox.x+pnBox.w;var bLeft=box.x;var bRight=box.x+obw;var delta;if(bBottom>vpTop&&bTop<vpTop){box.y=pnBox.y;delta=vpTop-bTop;var visHeight=obh-delta;if(visHeight<pnBox.h)box.h=visHeight;else box.h-=2*(pn.scrollWidth>pn.clientWidth&&pn.clientWidth>
0?scrollers.h:0)}else if(bTop<vpBottom&&bBottom>vpBottom)box.h=vpBottom-bTop;else if(bBottom<=vpTop||bTop>=vpBottom)box.h=0;if(bRight>vpLeft&&bLeft<vpLeft){box.x=pnBox.x;delta=vpLeft-bLeft;var visWidth=obw-delta;if(visWidth<pnBox.w)box.w=visWidth;else box.w-=2*(pn.scrollHeight>pn.clientHeight&&pn.clientHeight>0?scrollers.w:0)}else if(bLeft<vpRight&&bRight>vpRight)box.w=vpRight-bLeft;else if(bRight<=vpLeft||bLeft>=vpRight)box.w=0}if(box.h>0&&box.w>0){domStyle.set(this._underlayNode,{display:"block",
width:box.w+"px",height:box.h+"px",top:box.y+"px",left:box.x+"px"});var styles=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"];this._cloneStyles(styles);if(!has("ie")){styles=["MozBorderRadius","MozBorderRadiusTopleft","MozBorderRadiusTopright","MozBorderRadiusBottomleft","MozBorderRadiusBottomright","WebkitBorderRadius","WebkitBorderTopLeftRadius","WebkitBorderTopRightRadius","WebkitBorderBottomLeftRadius","WebkitBorderBottomRightRadius"];
this._cloneStyles(styles,this)}var cntrIndicatorTop=box.h/2-cntrIndicator.h/2;var cntrIndicatorLeft=box.w/2-cntrIndicator.w/2;if(box.h>=cntrIndicator.h&&box.w>=cntrIndicator.w)domStyle.set(this._centerNode,{top:cntrIndicatorTop+box.y+"px",left:cntrIndicatorLeft+box.x+"px",display:"block"});else domStyle.set(this._centerNode,"display","none")}else{domStyle.set(this._underlayNode,"display","none");domStyle.set(this._centerNode,"display","none")}if(this._resizeCheck===null){var self=this;this._resizeCheck=
setInterval(function(){self._size()},100)}}},_cloneStyles:function(list){array.forEach(list,function(s){domStyle.set(this._underlayNode,s,domStyle.get(this.target,s))},this)},_fadeIn:function(){var self=this;var underlayNodeAnim=baseFx.animateProperty({duration:self.duration,node:self._underlayNode,properties:{opacity:{start:0,end:self.opacity}}});var imageAnim=baseFx.animateProperty({duration:self.duration,node:self._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){self.onShow();
delete self._anim}});this._anim=fx.combine([underlayNodeAnim,imageAnim]);this._anim.play()},_fadeOut:function(){var self=this;var underlayNodeAnim=baseFx.animateProperty({duration:self.duration,node:self._underlayNode,properties:{opacity:{start:self.opacity,end:0}},onEnd:function(){domStyle.set(this.node,{"display":"none","zIndex":"-1000"})}});var imageAnim=baseFx.animateProperty({duration:self.duration,node:self._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){domStyle.set(this.node,
{"display":"none","zIndex":"-1000"});self.onHide();self._enableOverflow();delete self._anim}});this._anim=fx.combine([underlayNodeAnim,imageAnim]);this._anim.play()},_ignore:function(e){if(e)event.stop(e)},_scrollerWidths:function(){var div=construct.create("div");domStyle.set(div,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var iDiv=construct.create("div");domStyle.set(iDiv,{width:"200px",height:"10px"});div.appendChild(iDiv);
baseWindow.body().appendChild(div);var b=geometry.getContentBox(div);domStyle.set(div,"overflow","scroll");var a=geometry.getContentBox(div);baseWindow.body().removeChild(div);return{v:b.w-a.w,h:b.h-a.h}},_setTextAttr:function(text){this._textNode.innerHTML=text;this.text=text},_setColorAttr:function(c){domStyle.set(this._underlayNode,"backgroundColor",c);this.color=c},_setImageTextAttr:function(text){attr.set(this._imageNode,"alt",text);this.imageText=text},_setImageAttr:function(url){attr.set(this._imageNode,
"src",url);this.image=url},_setCenterIndicatorAttr:function(indicator){this.centerIndicator=indicator;if(indicator==="image"){this._centerNode=this._imageNode;domStyle.set(this._textNode,"display","none")}else{this._centerNode=this._textNode;domStyle.set(this._imageNode,"display","none")}},_disableOverflow:function(){if(this.target===baseWindow.body()||this.target===baseWindow.doc){this._overflowDisabled=true;var body=baseWindow.body();if(body.style&&body.style.overflow)this._oldOverflow=domStyle.get(body,
"overflow");else this._oldOverflow="";if(has("ie")&&!has("quirks")){if(body.parentNode&&body.parentNode.style&&body.parentNode.style.overflow)this._oldBodyParentOverflow=body.parentNode.style.overflow;else try{this._oldBodyParentOverflow=domStyle.get(body.parentNode,"overflow")}catch(e){this._oldBodyParentOverflow="scroll"}domStyle.set(body.parentNode,"overflow","hidden")}domStyle.set(body,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var body=
baseWindow.body();if(has("ie")&&!has("quirks")){body.parentNode.style.overflow=this._oldBodyParentOverflow;delete this._oldBodyParentOverflow}domStyle.set(body,"overflow",this._oldOverflow);if(has("webkit")){var div=construct.create("div",{style:{height:"2px"}});body.appendChild(div);setTimeout(function(){body.removeChild(div)},0)}delete this._oldOverflow}}})})},"dgrid/extensions/Pagination":function(){define(["../_StoreMixin","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred",
"dojo/on","dojo/query","dojo/string","dojo/has","put-selector/put","dojo/i18n!./nls/pagination","dojo/_base/sniff","xstyle/css!../css/extensions/Pagination.css"],function(_StoreMixin,declare,arrayUtil,lang,Deferred,on,query,string,has,put,i18n){function cleanupContent(grid){if(grid.noDataNode){put(grid.noDataNode,"!");delete grid.noDataNode}else grid.cleanup();grid.contentNode.innerHTML=""}function cleanupLoading(grid){if(grid.loadingNode){put(grid.loadingNode,"!");delete grid.loadingNode}else if(grid._oldPageNodes){for(var id in grid._oldPageNodes)grid.removeRow(grid._oldPageNodes[id]);
delete grid._oldPageNodes;if(grid._oldPageObserver){grid._oldPageObserver.cancel();grid._numObservers--;delete grid._oldPageObserver}}delete grid._isLoading}return declare(_StoreMixin,{rowsPerPage:10,pagingTextBox:false,previousNextArrows:true,firstLastArrows:false,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:true,i18nPagination:i18n,showFooter:true,_currentPage:1,_total:0,buildRendering:function(){this.inherited(arguments);var grid=this,paginationNode=this.paginationNode=put(this.footerNode,
"div.dgrid-pagination"),statusNode=this.paginationStatusNode=put(paginationNode,"div.dgrid-status"),i18n=this.i18nPagination,navigationNode,node,i;statusNode.tabIndex=0;this._updatePaginationSizeSelect();this._updateRowsPerPageOption();statusNode.innerHTML=string.substitute(i18n.status,{start:1,end:1,total:0});navigationNode=this.paginationNavigationNode=put(paginationNode,"div.dgrid-navigation");if(this.firstLastArrows){node=this.paginationFirstNode=put(navigationNode,"span.dgrid-first.dgrid-page-link",
"\u00ab");node.setAttribute("aria-label",i18n.gotoFirst);node.tabIndex=0}if(this.previousNextArrows){node=this.paginationPreviousNode=put(navigationNode,"span.dgrid-previous.dgrid-page-link","\u2039");node.setAttribute("aria-label",i18n.gotoPrev);node.tabIndex=0}this.paginationLinksNode=put(navigationNode,"span.dgrid-pagination-links");if(this.previousNextArrows){node=this.paginationNextNode=put(navigationNode,"span.dgrid-next.dgrid-page-link","\u203a");node.setAttribute("aria-label",i18n.gotoNext);
node.tabIndex=0}if(this.firstLastArrows){node=this.paginationLastNode=put(navigationNode,"span.dgrid-last.dgrid-page-link","\u00bb");node.setAttribute("aria-label",i18n.gotoLast);node.tabIndex=0}this._listeners.push(on(navigationNode,".dgrid-page-link:click,.dgrid-page-link:keydown",function(event){if(event.type==="keydown"&&event.keyCode!==13)return;var cls=this.className,curr,max;if(grid._isLoading||cls.indexOf("dgrid-page-disabled")>-1)return;curr=grid._currentPage;max=Math.ceil(grid._total/grid.rowsPerPage);
if(this===grid.paginationPreviousNode)grid.gotoPage(curr-1);else if(this===grid.paginationNextNode)grid.gotoPage(curr+1);else if(this===grid.paginationFirstNode)grid.gotoPage(1);else if(this===grid.paginationLastNode)grid.gotoPage(max);else if(cls==="dgrid-page-link")grid.gotoPage(+this.innerHTML,true)}))},destroy:function(){this.inherited(arguments);if(this._pagingTextBoxHandle)this._pagingTextBoxHandle.remove()},_updatePaginationSizeSelect:function(){var pageSizeOptions=this.pageSizeOptions,paginationSizeSelect=
this.paginationSizeSelect,handle;if(pageSizeOptions&&pageSizeOptions.length){if(!paginationSizeSelect){paginationSizeSelect=this.paginationSizeSelect=put(this.paginationNode,"select.dgrid-page-size");handle=this._paginationSizeChangeHandle=on(paginationSizeSelect,"change",lang.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)}));this._listeners.push(handle)}paginationSizeSelect.options.length=0;for(i=0;i<pageSizeOptions.length;i++)put(paginationSizeSelect,"option",pageSizeOptions[i],
{value:pageSizeOptions[i],selected:this.rowsPerPage===pageSizeOptions[i]});this._updateRowsPerPageOption()}else if(!(pageSizeOptions&&pageSizeOptions.length)&&paginationSizeSelect){put(paginationSizeSelect,"!");this.paginationSizeSelect=null;this._paginationSizeChangeHandle.remove()}},_setPageSizeOptions:function(pageSizeOptions){this.pageSizeOptions=pageSizeOptions&&pageSizeOptions.sort(function(a,b){return a-b});this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var rowsPerPage=
this.rowsPerPage,pageSizeOptions=this.pageSizeOptions,paginationSizeSelect=this.paginationSizeSelect;if(paginationSizeSelect)if(arrayUtil.indexOf(pageSizeOptions,rowsPerPage)<0)this._setPageSizeOptions(pageSizeOptions.concat([rowsPerPage]));else paginationSizeSelect.value=""+rowsPerPage},_setRowsPerPage:function(rowsPerPage){this.rowsPerPage=rowsPerPage;this._updateRowsPerPageOption();this.gotoPage(1)},_updateNavigation:function(focusLink){var grid=this,i18n=this.i18nPagination,linksNode=this.paginationLinksNode,
currentPage=this._currentPage,pagingLinks=this.pagingLinks,paginationNavigationNode=this.paginationNavigationNode,end=Math.ceil(this._total/this.rowsPerPage),pagingTextBoxHandle=this._pagingTextBoxHandle;function pageLink(page,addSpace){var link;if(grid.pagingTextBox&&page==currentPage&&end>1){link=put(linksNode,"input.dgrid-page-input[type\x3dtext][value\x3d$]",currentPage);link.setAttribute("aria-label",i18n.jumpPage);grid._pagingTextBoxHandle=on(link,"change",function(){var value=+this.value;if(!isNaN(value)&&
value>0&&value<=end)grid.gotoPage(+this.value,true)})}else{link=put(linksNode,"span"+(page==currentPage?".dgrid-page-disabled":"")+".dgrid-page-link",page+(addSpace?" ":""));link.setAttribute("aria-label",i18n.gotoPage);link.tabIndex=0}if(page==currentPage&&focusLink)link.focus()}if(pagingTextBoxHandle)pagingTextBoxHandle.remove();linksNode.innerHTML="";query(".dgrid-first, .dgrid-previous",paginationNavigationNode).forEach(function(link){put(link,(currentPage==1?".":"!")+"dgrid-page-disabled")});
query(".dgrid-last, .dgrid-next",paginationNavigationNode).forEach(function(link){put(link,(currentPage>=end?".":"!")+"dgrid-page-disabled")});if(pagingLinks&&end>0){pageLink(1,true);var start=currentPage-pagingLinks;if(start>2)put(linksNode,"span.dgrid-page-skip","...");else start=2;for(var i=start;i<Math.min(currentPage+pagingLinks+1,end);i++)pageLink(i,true);if(currentPage+pagingLinks+1<end)put(linksNode,"span.dgrid-page-skip","...");if(end>1)pageLink(end)}else if(grid.pagingTextBox)pageLink(currentPage)},
refresh:function(){var self=this;this.inherited(arguments);if(!this.store){0&&console.warn("Pagination requires a store to operate.");return}return this.gotoPage(1).then(function(results){setTimeout(function(){on.emit(self.domNode,"dgrid-refresh-complete",{bubbles:true,cancelable:false,grid:self,results:results})},0);return results})},_onNotification:function(rows){if(rows.length!==this._rowsOnPage)this.gotoPage(this._currentPage)},renderArray:function(results,beforeNode){var grid=this,rows=this.inherited(arguments);
this._lastCollection=null;if(!beforeNode){if(this._topLevelRequest&&this._topLevelRequest!==results){this._topLevelRequest.cancel();delete this._topLevelRequest}if(typeof results.cancel==="function")this._topLevelRequest=results;Deferred.when(results,function(){if(grid._topLevelRequest)delete grid._topLevelRequest})}return rows},insertRow:function(){var oldNodes=this._oldPageNodes,row=this.inherited(arguments);if(oldNodes&&row===oldNodes[row.id])delete oldNodes[row.id];return row},gotoPage:function(page,
focusLink){var grid=this,dfd=new Deferred;var result=this._trackError(function(){var count=grid.rowsPerPage,start=(page-1)*count,options=lang.mixin(grid.get("queryOptions"),{start:start,count:count}),results,contentNode=grid.contentNode,loadingNode,oldNodes,children,i,len;if(grid.showLoadingMessage){cleanupContent(grid);loadingNode=grid.loadingNode=put(contentNode,"div.dgrid-loading");loadingNode.innerHTML=grid.loadingMessage}else{grid._oldPageNodes=oldNodes={};children=contentNode.children;for(i=
0,len=children.length;i<len;i++)oldNodes[children[i].id]=children[i];grid._oldPageObserver=grid.observers.pop()}grid._isLoading=true;results=grid.store.query(grid.query,options);Deferred.when(grid.renderArray(results,null,options),function(rows){cleanupLoading(grid);grid.scrollTo({y:0});Deferred.when(results.total,function(total){if(!total){if(grid.noDataNode){put(grid.noDataNode,"!");delete grid.noDataNode}grid.noDataNode=put(grid.contentNode,"div.dgrid-no-data");grid.noDataNode.innerHTML=grid.noDataMessage}grid.paginationStatusNode.innerHTML=
string.substitute(grid.i18nPagination.status,{start:Math.min(start+1,total),end:Math.min(total,start+count),total:total});grid._total=total;grid._currentPage=page;grid._rowsOnPage=rows.length;grid._updateNavigation(focusLink)});if(has("ie")<7||has("ie")&&has("quirks"))grid.resize();dfd.resolve(results)},function(error){cleanupLoading(grid);dfd.reject(error)});return dfd.promise});if(!result)dfd.reject();return dfd.promise}})})},"xblox/model/functions/CallBlock":function(){define("xblox/model/functions/CallBlock",
["dojo/_base/declare","xblox/model/Block"],function(declare,Block){return declare("xblox.model.functions.CallBlock",[Block],{command:"PowerStandby",solve:function(scope,settings){if(this.command){this.onRun(this,settings);return scope.solveBlock(this.command)}},toText:function(){return this.getBlockIcon("D")+"Call Command : "+this.command},getFields:function(){var fields=this.inherited(arguments);fields.push(this.utils.createCI("value",3,this.command,{group:"General",title:"Command",dst:"command",
options:this.scope.getCommandsAsOptions()}));return fields}})})},"url:xfile/widgets/templates/TrailBarItem.html":'\x3cdiv class\x3d"dijitInline dijitMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3cspan src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitIcon dijitMenuItemIcon  el-icon-chevron-right" data-dojo-attach-point\x3d"iconNode"/\x3e\n\t\x3cspan data-dojo-attach-point\x3d"containerNode"\x3e\x3c/span\x3e\n\x3c/div\x3e\n',"dojo/dnd/Avatar":function(){define("dojo/dnd/Avatar",
["../_base/declare","../_base/window","../dom","../dom-attr","../dom-class","../dom-construct","../hccss","../query"],function(declare,win,dom,domAttr,domClass,domConstruct,has,query){return declare("dojo.dnd.Avatar",null,{constructor:function(manager){this.manager=manager;this.construct()},construct:function(){var a=domConstruct.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),source=this.manager.source,node,b=domConstruct.create("tbody",null,a),tr=
domConstruct.create("tr",null,b),td=domConstruct.create("td",null,tr),k=Math.min(5,this.manager.nodes.length),i=0;if(has("highcontrast"))domConstruct.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"\x3c"},td);domConstruct.create("span",{innerHTML:source.generateText?this._generateText():""},td);domAttr.set(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(source.creator)node=source._normalizedCreator(source.getItem(this.manager.nodes[i].id).data,"avatar").node;
else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var table=domConstruct.create("table"),tbody=domConstruct.create("tbody",null,table);tbody.appendChild(node);node=table}}node.id="";tr=domConstruct.create("tr",null,b);td=domConstruct.create("td",null,tr);td.appendChild(node);domAttr.set(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}})}this.node=a},destroy:function(){domConstruct.destroy(this.node);this.node=false},update:function(){domClass.toggle(this.node,
"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(has("highcontrast")){var icon=dom.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy)text="\x3c ";else if(!this.manager.canDropFlag&&!this.manager.copy)text="o";else if(!this.manager.canDropFlag)text="x";icon.innerHTML=text}query("tr.dojoDndAvatarHeader td span"+(has("highcontrast")?" span":""),this.node).forEach(function(node){node.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(kernel,lang){var string={};lang.setObject("dojo.string",string);string.rep=function(str,num){if(num<=0||!str)return"";var buf=[];for(;;){if(num&1)buf.push(str);if(!(num>>=1))break;str+=str}return buf.join("")};string.pad=function(text,size,ch,end){if(!ch)ch="0";var out=String(text),pad=string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out};string.substitute=function(template,map,transform,thisObject){thisObject=
thisObject||kernel.global;transform=transform?lang.hitch(thisObject,transform):function(v){return v};return template.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(match,key,format){var value=lang.getObject(key,false,map);if(format)value=lang.getObject(format,false,thisObject).call(thisObject,value,key);return transform(value,key).toString()})};string.trim=String.prototype.trim?lang.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--)if(/\S/.test(str.charAt(i))){str=
str.substring(0,i+1);break}return str};return string})},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(declare,registry){return declare("dijit._Contained",null,{_getSibling:function(which){var node=this.domNode;do node=node[which+"Sibling"];while(node&&node.nodeType!=1);return node&&registry.byNode(node)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var p=
this.getParent();if(!p||!p.getIndexOfChild)return-1;return p.getIndexOfChild(this)}})})},"cbtree/models/TreeStoreModel":function(){define("cbtree/models/TreeStoreModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/has","dojo/json","dojo/Stateful","./ItemWriteStoreEX"],function(array,declare,lang,aspect,has,json,Stateful,ItemWriteStoreEX){return declare([Stateful],{checkedAll:true,checkedState:false,checkedRoot:false,checkedStrict:true,checkedAttr:"checked",childrenAttrs:["children"],
deferItemLoadingUntilExpand:false,enabledAttr:"",excludeChildrenAttrs:null,iconAttr:"",labelAttr:"",multiState:true,newItemIdAttr:"id",normalize:true,query:null,store:null,moduleName:"cbTree/models/TreeStoreModel",hasFakeRoot:false,root:null,_checkedChildrenAttrs:null,_queryAttrs:[],_validateStore:true,_validating:0,constructor:function(args){declare.safeMixin(this,args);this.connects=[];var store=this.store;if(!store.getFeatures()["dojo.data.api.Identity"])throw new Error(this.moduleName+"constructor(): store must support dojo.data.Identity");
has.add("tree-model-getChecked",1);if(!store.getFeatures()["dojo.data.api.Write"]){0&&console.warn(this.moduleName+"::constructor(): store is not write enabled.");this._writeEnabled=false}else{has.add("tree-model-setChecked",1);this._writeEnabled=true}if(store.getFeatures()["dojo.data.api.Notification"])this.connects=this.connects.concat([aspect.after(store,"onLoad",lang.hitch(this,"onStoreLoaded"),true),aspect.after(store,"onNew",lang.hitch(this,"onNewItem"),true),aspect.after(store,"onDelete",lang.hitch(this,
"onDeleteItem"),true),aspect.after(store,"onSet",lang.hitch(this,"onSetItem"),true),aspect.after(store,"onRoot",lang.hitch(this,"onRootChange"),true)]);this._checkedChildrenAttrs=this._diffArrays(this.childrenAttrs,this.excludeChildrenAttrs);if(this.query){var attr;for(attr in this.query)this._queryAttrs.push(attr)}dojo.deprecated("{cbtree/models/TreeStoreModel}","Migrate to the new models in cbtree/model/","2.0")},destroy:function(){var h;while(h=this.connects.pop())h.remove();this.store=null},_checkedStrictSetter:function(value){value=
value?true:false;if(this.checkedStrict!==value){this.checkedStrict=value;if(this.checkedStrict)this.getRoot(lang.hitch(this,function(rootItem){this.getChildren(rootItem,lang.hitch(this,function(children){this._validateChildren(rootItem,children)}))}))}return this.checkedStrict},_enabledAttrSetter:function(value){if(lang.isString(value)){if(this.enabledAttr!==value)throw new Error(this.moduleName+"::set(): enabledAttr property is read-only.");}else throw new Error(this.moduleName+"::set(): enabledAttr value must be a string");
return this.enabledAttr},_labelAttrGetter:function(){return this.getLabelAttr()},_labelAttrSetter:function(value){return this.setLabelAttr(value)},_querySetter:function(value){if(lang.isObject(value)){if(this.query!==value){this.query=value;this._requeryTop()}return this.query}else throw new Error(this.moduleName+"::set(): query argument must be of type object");},getChildren:function(parentItem,onComplete,onError,childrenLists){var store=this.store;var scope=this;if(!store.isItemLoaded(parentItem)){var getChildren=
lang.hitch(this,arguments.callee);store.loadItem(scope._mixinFetch({item:parentItem,onItem:function(parentItem){getChildren(parentItem,onComplete,onError)},onError:onError}));return}var childItems=[],vals,i;if(!childrenLists)for(i=0;i<this.childrenAttrs.length;i++){vals=store.getValues(parentItem,this.childrenAttrs[i]);childItems=childItems.concat(vals)}else{var lists=lang.isArray(childrenLists)?childrenLists:[childrenLists];for(i=0;i<lists.length;i++){vals=store.getValues(parentItem,lists[i]);childItems=
childItems.concat(vals)}}var _waitCount=0;if(!this.deferItemLoadingUntilExpand)array.forEach(childItems,function(item){if(!store.isItemLoaded(item))_waitCount++});if(_waitCount==0)onComplete(childItems);else array.forEach(childItems,function(item,idx){if(!store.isItemLoaded(item))store.loadItem(scope._mixinFetch({item:item,onItem:function(item){childItems[idx]=item;if(--_waitCount==0)onComplete(childItems)},onError:onError}))})},getParents:function(storeItem){if(storeItem)return this.store.getParents(storeItem)},
getRoot:function(onItem,onError){if(this.root)onItem(this.root);else this.store.fetch(this._mixinFetch({query:this.query,onComplete:lang.hitch(this,function(items){if(items.length!=1)throw new Error(this.moduleName+": query "+json.stringify(this.query)+" returned "+items.length+" items, but must return exactly one item");this.root=items[0];onItem(this.root)}),onError:onError}))},mayHaveChildren:function(item){return array.some(this.childrenAttrs,function(attr){return this.store.hasAttribute(item,
attr)},this)},_getCompositeState:function(children){var hasChecked=false,hasUnchecked=false,isMixed=false,newState,state;array.some(children,function(child){state=this.getChecked(child);isMixed|=state=="mixed";switch(state){case true:hasChecked=true;break;case false:hasUnchecked=true;break}return isMixed},this);if(isMixed||hasChecked||hasUnchecked){isMixed|=!(hasChecked^hasUnchecked);newState=isMixed?"mixed":hasChecked?true:false}return newState},_normalizeState:function(storeItem,state){if(typeof state==
"boolean")return state;if(this.multiState&&state=="mixed"){if(this.normalize&&!this.mayHaveChildren(storeItem))return true;return state}return state?true:false},_setChecked:function(storeItem,newState,owner){var forceUpdate=false,normState;normState=this._normalizeState(storeItem,newState);forceUpdate=normState!=newState;if(this.store.isItem(storeItem)){var currState=this.store.getValue(storeItem,this.checkedAttr);if((currState!==undefined||this.checkedAll)&&(currState!=normState||forceUpdate)){this.store.setValue(storeItem,
this.checkedAttr,normState,owner);return true}}else if(storeItem===this.root&&this.hasFakeRoot){if(this.checkedRoot&&(this.root[this.checkedAttr]!=normState||forceUpdate)){this.root[this.checkedAttr]=normState;this.onChange(storeItem,this.checkedAttr,normState,owner);return true}}else throw new TypeError(this.moduleName+"::_setChecked(): invalid item specified.");return false},_updateCheckedChild:function(storeItem,newState,owner){this._setChecked(storeItem,newState,owner);if(this.mayHaveChildren(storeItem))this.getChildren(storeItem,
lang.hitch(this,function(children){array.forEach(children,function(child){this._updateCheckedChild(child,newState,owner)},this)}),this.onError,this._checkedChildrenAttrs)},_updateCheckedParent:function(storeItem,forceUpdate){if(!this.checkedStrict||!storeItem)return;var parents=this.getParents(storeItem),childState=this.getChecked(storeItem),newState;array.forEach(parents,function(parentItem){if(this.isChildOf(parentItem,storeItem))if(childState!==this.getChecked(parentItem)||forceUpdate)this.getChildren(parentItem,
lang.hitch(this,function(children){newState=this._getCompositeState(children);if(newState!==undefined)this._setChecked(parentItem,newState)}),this.onError,this._checkedChildrenAttrs)},this)},_validateChildren:function(parent,children,childrenLists){var children,currState,newState;this._validating+=1;children=lang.isArray(children)?children:[children];array.forEach(children,function(child){if(this.mayHaveChildren(child))this.getChildren(child,lang.hitch(this,function(children){this._validateChildren(child,
children,childrenLists)}),this.onError,childrenLists);else{currState=this.getChecked(child);if(currState&&typeof currState!=="boolean")child[this.checkedAttr]=[this._normalizeState(child,currState)]}},this);newState=this._getCompositeState(children);currState=this.getChecked(parent);if(currState!==undefined&&newState!==undefined)this._setChecked(parent,newState);this._validating-=1;if(!this._validating){this.store.setValidated(true);this.onDataValidated()}},getChecked:function(storeItem){var checked;
if(this.excludeChildrenAttrs)if(this.isMemberOf(storeItem,this.excludeChildrenAttrs))return;if(this.store.isItem(storeItem)){checked=this.store.getValue(storeItem,this.checkedAttr);if(checked===undefined)if(this.checkedAll){this._setChecked(storeItem,this.checkedState);return this.checkedState}}else if(storeItem===this.root&&this.hasFakeRoot){if(this.checkedRoot)return this.root[this.checkedAttr]}else throw new TypeError(this.moduleName+"::getChecked(): invalid item specified.");return checked},getEnabled:function(item){var enabled=
true;if(this.enabledAttr)if(this.store.isItem(item))enabled=this.store.getValue(item,this.enabledAttr);else if(item===this.root)enabled=item[this.enabledAttr];else throw new TypeError(this.moduleName+"::getEnabled(): invalid item specified.");return enabled===undefined||Boolean(enabled)},getItemState:function(item){return{checked:this.getChecked(item),enabled:this.getEnabled(item)}},setChecked:function(storeItem,newState,owner){if(owner!=null&&owner!=this.owner)return;if(!this.checkedStrict)this._setChecked(storeItem,
newState,owner);else this._updateCheckedChild(storeItem,newState,owner)},setEnabled:function(item,value){if(this.enabledAttr)if(this.store.isItem(item))return this.store.setValue(item,this.enabledAttr,Boolean(value));else if(item===this.root)return this.root[this.enabledAttr]=Boolean(value);else throw new TypeError(this.moduleName+"::setEnabled(): invalid item specified.");},validateData:function(){if(this.checkedStrict)if(!this.store.isValidated())this.store.loadStore({onComplete:function(count){if(has("tree-model-setChecked")){if(this._validateStore)this.getRoot(lang.hitch(this,
function(rootItem){this.getChildren(rootItem,lang.hitch(this,function(children){this._validateChildren(rootItem,children,this._checkedChildrenAttrs)}),this.onError)}),this.onError)}else 0&&console.warn(this.moduleName+"::validateData(): store is not write enabled.")},onError:function(err){},scope:this});else{if(this.hasFakeRoot)this.getChildren(this.root,lang.hitch(this,function(children){this._updateCheckedParent(children[0],true)}),this.onError,this._checkedChildrenAttrs);this.onDataValidated()}else this.store.setValidated(false)},
fetchItemByIdentity:function(keywordArgs){this.store.fetchItemByIdentity(keywordArgs)},getIcon:function(item){if(this.iconAttr)return this.store.getValue(item,this.iconAttr)},getIdentity:function(item){return this.store.getIdentity(item)},getLabel:function(item){if(this.labelAttr)return this.store.getValue(item,this.labelAttr);else{this.setLabelAttr(this.getLabelAttr());return this.store.getLabel(item)}},isItem:function(something){return this.store.isItem(something)},isTreeRootChild:function(item){if(this.root)return this.isChildOf(this.root,
item)},isChildOf:function(parent,item){var i;for(i=0;i<this.childrenAttrs.length;i++)if(array.indexOf(parent[this.childrenAttrs[i]],item)!==-1)return true;return false},isMemberOf:function(item,childrenLists){if(this.isItem(item)){var parents=this.getParents(item);var lists=childrenLists?lang.isArray(childrenLists)?childrenLists:[childrenLists]:[];var isMember=false;var i;array.some(parents,function(parent){for(i=0;i<lists.length;i++)if(array.indexOf(parent[lists[i]],item)!=-1)return isMember=true},
this)}return isMember},deleteItem:function(storeItem){return this.store.deleteItem(storeItem)},newItem:function(args,parent,insertIndex,childrenAttr){var pInfo={parent:parent,attribute:childrenAttr?childrenAttr:this.childrenAttrs[0]},newItem;this._mapIdentifierAttr(args,false);try{newItem=this.store.itemExist(args);if(newItem)this.pasteItem(newItem,null,parent,true,insertIndex);else{newItem=this.store.newItem(args,pInfo);if(newItem&&insertIndex!=undefined)this.pasteItem(newItem,parent,parent,false,
insertIndex)}}catch(err){throw new Error(this.moduleName+"::newItem(): "+err);}return newItem},pasteItem:function(childItem,oldParentItem,newParentItem,bCopy,insertIndex,childrenAttr){var parentAttr=childrenAttr?childrenAttr:this.childrenAttrs[0],store=this.store,firstChild;if(oldParentItem)array.forEach(this.childrenAttrs,function(attr){if(store.containsValue(oldParentItem,attr,childItem)){if(!bCopy)store.removeReference(childItem,oldParentItem,attr);parentAttr=attr}},this);if(newParentItem)store.addReference(childItem,
newParentItem,parentAttr,insertIndex)},getLabelAttr:function(){if(!this.labelAttr){var labels=this.store.getLabelAttributes();if(labels)this.setLabelAttr(labels[0])}return this.labelAttr},setLabelAttr:function(newValue){if(lang.isString(newValue)&&newValue.length){if(this.labelAttr!==newValue){var oldValue=this.labelAttr;this.labelAttr=newValue;this.onLabelChange(oldValue,newValue)}return this.labelAttr}},onChange:function(){},onChildrenChange:function(){},onDataValidated:function(){},onDelete:function(){},
onLabelChange:function(){},onNewItem:function(item,parentInfo){if(parentInfo)this.getChildren(parentInfo.item,lang.hitch(this,function(children){this.onChildrenChange(parentInfo.item,children)}));this._updateCheckedParent(item,true)},onDeleteItem:function(storeItem){this.onDelete(storeItem)},onError:function(err){console.error(this,err)},onSetItem:function(storeItem,attribute,oldValue,newValue,owner){if(owner!=null&&this.owner!=owner)return;if(array.indexOf(this.childrenAttrs,attribute)!=-1)this.getChildren(storeItem,
lang.hitch(this,function(children){if(children[0])this._updateCheckedParent(children[0],true);else this._setChecked(storeItem,this.checkedState);this.onChildrenChange(storeItem,children)}));else{if(attribute==this.checkedAttr)this._updateCheckedParent(storeItem,false);this.onChange(storeItem,attribute,newValue)}},onStoreLoaded:function(count){this.getLabelAttr()},onRootChange:function(storeItem,action){},_mapIdentifierAttr:function(args,delMappedAttr){var identifierAttr=this.store.getIdentifierAttr();
if(identifierAttr)if(!args[identifierAttr]&&this.newItemIdAttr&&args[this.newItemIdAttr]){args[identifierAttr]=args[this.newItemIdAttr];if(delMappedAttr)delete args[this.newItemIdAttr];return true}if(this.checkedAll&&args[this.checkedAttr]===undefined)args[this.checkedAttr]=this.checkedState;return false},_diffArrays:function(orgArray,elements){var elemList=elements?lang.isArray(elements)?elements:[elements]:[];var newArray=orgArray.slice(0);var index,i;if(newArray.length&&elemList.length)for(i=0;i<
elemList.length;i++){index=array.indexOf(newArray,elemList[i]);if(index!=-1)newArray.splice(index,1)}return newArray},_mixinFetch:function(fetchArgs){return fetchArgs}})})},"xfile/views/FileFindDialog":function(){define("xfile/views/FileFindDialog",["dojo/_base/declare","xfile/views/ActionDialog","xfile/views/FileFindView"],function(declare,ActionDialog,FileFindView){return declare("xfile.views.FileFindDialog",[ActionDialog],{value:null,view:null,_createFileFindView:function(src){this.view=new FileFindView({className:"fileOperationView",
delegate:this,src:src,owner:this.owner,ctx:this.ctx},dojo.doc.createElement("div"));this.containerNode.appendChild(this.view.domNode);this.view.startup()},getValue:function(){return this.view.getValue()},initWithFilePath:function(src){this.value=src;this._createFileFindView(src);this.addActionButtons();this.fixHeight();this.resize()},startup:function(){this.inherited(arguments);if(this.didLoad)return;this.didLoad=true}})})},"xfile/factory/views":function(){define("xfile/factory/views",["dojo/dom-class",
"xide/types","xide/utils","xfile/factory","dojo/_base/lang","dijit/layout/TabContainer","xfile/views/FileTreeView","xfile/views/FileGridView","xfile/views/FileOperationDialog","xfile/views/FileDeleteDialog","xfile/views/PreviewEditor","xfile/views/NewItemDialog","xfile/views/FileFindDialog","xfile/views/FilePanel","xfile/views/FileSelectDialog"],function(domClass,types,utils,factory,lang,TabContainer,FileTreeView,FileGridView,FileOperationDialog,FileDeleteDialog,PreviewEditor,NewItemDialog,FileFindDialog,
FilePanel,FileSelectDialog){factory.createFileSelectDialog=function(options,onSelected){var _delegate={onShowPanel:function(){},onOk:function(dlg){if(dlg&&dlg.filePanel){var activeItem=dlg.filePanel.getActiveItem();if(activeItem){var path=activeItem.path;if(path&&onSelected)onSelected(path)}}}};var _options={title:"Select",delegate:_delegate};lang.mixin(_options,options);var dlg=new FileSelectDialog(_options);domClass.add(dlg.domNode,"fileSelectDialog");dlg.show();dlg.initWithWithDestination();dlg.resize();
return dlg};factory.createFileSelectDialogLarge=function(options,onSelected){var _delegate={onShowPanel:function(){},onOk:function(dlg){if(dlg&&dlg.lastSelectedItem)if(onSelected)onSelected(dlg,dlg.lastSelectedItem)}};var _options={title:"Select",delegate:_delegate};lang.mixin(_options,options);var dlg=new FileSelectDialog(_options);domClass.add(dlg.domNode,"fileSelectDialog");dlg.show();dlg.initWithConfig();dlg.resize();return dlg};factory.createFilePanel=function(mount,owner,url,where,options,store,
config){if(url==null)url=".";var _options={title:url||"./",cookiePrefix:"left",url:url,region:"left",closable:true,config:config,className:"xfileContainerEmbedded filePanel ui-state-default",ctx:null,clipboardManager:null,panelManager:null,lazy:false,owner:owner,store:store};if(options)if(options.config){var newConfig=this.cloneConfig(_options.config);_options.config=newConfig;lang.mixin(_options.config,options.config)}var tabView=utils.addWidget(FilePanel,_options,this,where,true);return tabView};
factory.createEditorWithTypeAndContent=function(delegate,sourceType,editorContent){return new PreviewEditor({dataRef:null,sourceType:sourceType,delegate:delegate,title:"Title",titleEdit:false,content:editorContent},dojo.doc.createElement("div"))};factory.createTreeView=function(title,config,where,delegate,ctx,store,model,selectable,url,rootLabel){var fileTreeView=FileTreeView({title:title||"Files",rootLabel:rootLabel,selectable:selectable||false,className:"fileTreeView resourceBrowser contentPanel",
closable:true,selected:false,fileStoreUrl:config.FILES_STORE_URL,themeRoot:config.THEME_ROOT,rootPrefix:config.WEB_ROOT,delegate:delegate,tabIndex:0,region:"bottom",style:"overflow-y:auto;left:0;padding:0px !important;overflow-x:hidden;",splitter:true,editorDelegate:ctx.getScriptManager(),store:store,model:model,config:config,url:url,beanContextName:config.beanContextName},dojo.doc.createElement("div"));where.appendChild(fileTreeView.domNode);fileTreeView.startup();fileTreeView.initWidgets();fileTreeView.domNode.focus();
return fileTreeView};factory.createFileOperationDialog=function(title,selection,dst,owner,delegate,ctx,config){var dialog=new FileOperationDialog({title:title||"",owner:owner,dst:dst,selection:selection,config:config,delegate:delegate,ctx:ctx,store:owner.store,model:owner.model});domClass.add(dialog.domNode,"fileOperationDialog");return dialog};factory.createFileFindDialog=function(title,dst,owner,delegate,ctx,config){var dialog=new FileFindDialog({title:title||"",owner:owner,path:dst,config:config,
delegate:delegate,ctx:ctx,store:owner.store,model:owner.model});domClass.add(dialog.domNode,"fileOperationDialog");return dialog};factory.createNewItemDialog=function(title,dst,owner,delegate,ctx,config,operation){var dialog=new NewItemDialog({title:title||"",owner:owner,dst:dst,config:config,delegate:delegate,ctx:ctx,store:owner.store,model:owner.model,operation:operation});domClass.add(dialog.domNode,"fileOperationDialog");return dialog};factory.createFileDeleteDialog=function(title,selection,owner,
delegate,ctx,config){var dialog=new FileDeleteDialog({title:title||"",owner:owner,selection:selection,config:config,delegate:delegate,ctx:ctx,store:owner.store,model:owner.model,titleBarClass:"ui-state-error",inserts:[{query:".dijitDialogPaneContent",insert:'\x3cdiv\x3e\x3cspan class\x3d"fileManagerDialogText"\x3eDo you really want to remove  this items'+"?\x3c/span\x3e\x3c/div\x3e",place:"first"}]});domClass.add(dialog.domNode,"fileOperationDialog");return dialog};factory.createGidView=function(title,
config,where,delegate,ctx,store,model,className){var view=FileGridView({title:title||"Files",closable:true,selected:false,fileStoreUrl:config.FILES_STORE_URL,themeRoot:config.THEME_ROOT,rootPrefix:config.WEB_ROOT,delegate:delegate,region:"bottom",style:"overflow-y:auto;left:0;padding:0px !important;overflow-x:hidden;",splitter:true,editorDelegate:ctx?ctx.getScriptManager():null,tree:this.tree,tabIndex:1,className:className||"fileGridView",model:model,store:store,config:config},dojo.doc.createElement("div"));
where.appendChild(view.domNode);view.startup();view.initWidgets();view.domNode.focus();return view};factory.createMultiTabView=function(parent,title,start){var tabContainer=new dijit.layout.TabContainer({title:title||"Files",tabStrip:true,tabPosition:"bottom",splitter:true,attachParent:true,style:"width:100%","className":"widgetBase"});if(parent.addChild)parent.addChild(tabContainer);return tabContainer};return factory})},"xfile/views/EditorPluginMixin":function(){define("xfile/views/EditorPluginMixin",
["dojo/_base/declare","xide/factory","xide/types"],function(declare,factory,types){var editorMixin=declare("xfile.views.EditorPluginMixin",null,{delegate:null,editors:null,_started:false,startup:function(){this.inherited(arguments);factory.subscribe(types.EVENTS.REGISTER_EDITOR,function(data){xfile.views.EditorPluginMixin.onRegisterEditor(data)},this)}});editorMixin.editors=[];editorMixin.getExtension=function(fname){if(fname!=null)return fname.substr((~-fname.lastIndexOf(".")>>>0)+2);return""};editorMixin._hasEditor=
function(name,extensions){for(var i=0;i<editorMixin.editors.length;i++)if(editorMixin.editors[i].name===name&&editorMixin.editors[i].extensions===extensions)return true;return false};editorMixin.onRegisterEditor=function(eventData){if(!editorMixin._hasEditor(eventData.name,eventData.extensions))editorMixin.editors.push(eventData)};editorMixin.getDefaultEditor=function(item){var editors=editorMixin.getEditors(item);if(!editors)return null;for(var i=0;i<editors.length;i++){var obj=editors[i];if(obj.isDefault===
true)return obj}return null};editorMixin.getEditors=function(item){var extension=editorMixin.getExtension(item.path);if(extension!=null&&extension.length==0)return null;extension=extension.toLowerCase();var result=[];if(!editorMixin.editors)return null;for(var i=0;i<editorMixin.editors.length;i++){var editor=editorMixin.editors[i];if(editor)if(editor.extensions.indexOf("|")!=-1){var supportedPluginExtensions=editor.extensions.split("|");for(var j=0;j<supportedPluginExtensions.length;j++){var supportedPluginExtension=
supportedPluginExtensions[j];if(supportedPluginExtension===extension)result.push(editor)}}else if(editor.extensions===extension)result.push(editor)}if(result.length>0)return result;return null};return editorMixin})},"dijit/InlineEditBox":function(){require({cache:{"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\n\t\x3e\x3c/span\n\x3e\x3c/span\x3e\n'}});
define("dijit/InlineEditBox",["require","dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/i18n","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/when","./a11yclick","./focus","./_Widget","./_TemplatedMixin","./_WidgetsInTemplateMixin","./_Container","./form/Button","./form/_TextBoxMixin","./form/TextBox","dojo/text!./templates/InlineEditBox.html","dojo/i18n!./nls/common"],function(require,
array,aspect,declare,domAttr,domClass,domConstruct,domStyle,i18n,kernel,keys,lang,on,has,when,a11yclick,fm,_Widget,_TemplatedMixin,_WidgetsInTemplateMixin,_Container,Button,_TextBoxMixin,TextBox,template){var InlineEditor=declare("dijit._InlineEditor",[_Widget,_TemplatedMixin,_WidgetsInTemplateMixin],{templateString:template,contextRequire:require,postMixInProperties:function(){this.inherited(arguments);this.messages=i18n.getLocalization("dijit","common",this.lang);array.forEach(["buttonSave","buttonCancel"],
function(prop){if(!this[prop])this[prop]=this.messages[prop]},this)},buildRendering:function(){this.inherited(arguments);var Cls=typeof this.editor=="string"?lang.getObject(this.editor)||require(this.editor):this.editor;var srcStyle=this.sourceStyle,editStyle="line-height:"+srcStyle.lineHeight+";",destStyle=domStyle.getComputedStyle(this.domNode);array.forEach(["Weight","Family","Size","Style"],function(prop){var textStyle=srcStyle["font"+prop],wrapperStyle=destStyle["font"+prop];if(wrapperStyle!=
textStyle)editStyle+="font-"+prop+":"+srcStyle["font"+prop]+";"},this);array.forEach(["marginTop","marginBottom","marginLeft","marginRight","position","left","top","right","bottom","float","clear","display"],function(prop){this.domNode.style[prop]=srcStyle[prop]},this);var width=this.inlineEditBox.width;if(width=="100%"){editStyle+="width:100%;";this.domNode.style.display="block"}else editStyle+="width:"+(width+(Number(width)==width?"px":""))+";";var editorParams=lang.delegate(this.inlineEditBox.editorParams,
{style:editStyle,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new Cls(editorParams,this.editorPlaceholder);if(this.inlineEditBox.autoSave)domConstruct.destroy(this.buttonContainer)},postCreate:function(){this.inherited(arguments);var ew=this.editWidget;if(this.inlineEditBox.autoSave)this.own(aspect.after(ew,"onChange",lang.hitch(this,"_onChange"),true),on(ew,"keydown",lang.hitch(this,"_onKeyDown")));else if("intermediateChanges"in ew){ew.set("intermediateChanges",true);this.own(aspect.after(ew,
"onChange",lang.hitch(this,"_onIntermediateChange"),true));this.saveButton.set("disabled",true)}},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(true);this.inherited(arguments)},getValue:function(){var ew=this.editWidget;return String(ew.get("displayedValue"in ew||"_getDisplayedValueAttr"in ew?"displayedValue":"value"))},
_onKeyDown:function(e){if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing){if(e.altKey||e.ctrlKey)return;if(e.keyCode==keys.ESCAPE){e.stopPropagation();e.preventDefault();this.cancel(true)}else if(e.keyCode==keys.ENTER&&e.target.tagName=="INPUT"){e.stopPropagation();e.preventDefault();this._onChange()}}},_onBlur:function(){this.inherited(arguments);if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing)if(this.getValue()==this._resetValue)this.cancel(false);else if(this.enableSave())this.save(false)},
_onChange:function(){if(this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&this.enableSave())fm.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():true},focus:function(){this.editWidget.focus();if(this.editWidget.focusNode){fm._onFocusNode(this.editWidget.focusNode);if(this.editWidget.focusNode.tagName=="INPUT")this.defer(function(){_TextBoxMixin.selectInputText(this.editWidget.focusNode)})}}});var InlineEditBox=declare("dijit.InlineEditBox"+
(0?"_NoBidi":""),_Widget,{editing:false,autoSave:true,buttonSave:"",buttonCancel:"",renderAsHtml:false,editor:TextBox,editorWrapper:InlineEditor,editorParams:{},disabled:false,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:has("ie")<=6?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",
constructor:function(){this.editorParams={}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(on(this.displayNode,a11yclick,lang.hitch(this,"_onClick")),on(this.displayNode,"mouseover, focus",lang.hitch(this,"_onMouseOver")),on(this.displayNode,"mouseout, blur",lang.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");if(!this.displayNode.getAttribute("tabIndex"))this.displayNode.setAttribute("tabIndex",0);if(!this.value&&!("value"in
this.params))this.value=lang.trim(this.renderAsHtml?this.displayNode.innerHTML:this.displayNode.innerText||this.displayNode.textContent||"");if(!this.value)this.displayNode.innerHTML=this.noValueIndicator;domClass.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(disabled){kernel.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",disabled)},_setDisabledAttr:function(disabled){this.domNode.setAttribute("aria-disabled",
disabled?"true":"false");if(disabled)this.displayNode.removeAttribute("tabIndex");else this.displayNode.setAttribute("tabIndex",0);domClass.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",disabled);this._set("disabled",disabled)},_onMouseOver:function(){if(!this.disabled)domClass.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){domClass.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(e){if(this.disabled)return;if(e){e.stopPropagation();
e.preventDefault()}this._onMouseOut();this.defer("edit")},edit:function(){if(this.disabled||this.editing)return;this._set("editing",true);this._savedTabIndex=domAttr.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var placeholder=domConstruct.create("span",null,this.domNode,"before");var Ewc=typeof this.editorWrapper=="string"?lang.getObject(this.editorWrapper):this.editorWrapper;this.wrapperWidget=new Ewc({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,
lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:domStyle.getComputedStyle(this.displayNode),save:lang.hitch(this,"save"),cancel:lang.hitch(this,"cancel"),textDir:this.textDir},placeholder);if(!this.wrapperWidget._started)this.wrapperWidget.startup();if(!this._started)this.startup()}var ww=this.wrapperWidget;domClass.add(this.displayNode,"dijitOffScreen");domClass.remove(ww.domNode,"dijitOffScreen");domStyle.set(ww.domNode,{visibility:"visible"});domAttr.set(this.displayNode,
"tabIndex","-1");var ew=ww.editWidget;var self=this;when(ew.onLoadDeferred,lang.hitch(ww,function(){ew.set("displayedValue"in ew||"_setDisplayedValueAttr"in ew?"displayedValue":"value",self.value);this.defer(function(){ww.saveButton.set("disabled","intermediateChanges"in ew);this.focus();this._resetValue=this.getValue()})}))},_onBlur:function(){this.inherited(arguments);if(!this.editing);},destroy:function(){if(this.wrapperWidget&&!this.wrapperWidget._destroyed){this.wrapperWidget.destroy();delete this.wrapperWidget}this.inherited(arguments)},
_showText:function(focus){var ww=this.wrapperWidget;domStyle.set(ww.domNode,{visibility:"hidden"});domClass.add(ww.domNode,"dijitOffScreen");domClass.remove(this.displayNode,"dijitOffScreen");domAttr.set(this.displayNode,"tabIndex",this._savedTabIndex);if(focus)fm.focus(this.displayNode)},save:function(focus){if(this.disabled||!this.editing)return;this._set("editing",false);var ww=this.wrapperWidget;var value=ww.getValue();this.set("value",value);this._showText(focus)},setValue:function(val){kernel.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.",
"","2.0");return this.set("value",val)},_setValueAttr:function(val){val=lang.trim(val);var renderVal=this.renderAsHtml?val:val.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,"\x3cbr\x3e");this.displayNode.innerHTML=renderVal||this.noValueIndicator;this._set("value",val);if(this._started)this.defer(function(){this.onChange(val)})},getValue:function(){kernel.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.",
"","2.0");return this.get("value")},cancel:function(focus){if(this.disabled||!this.editing)return;this._set("editing",false);this.defer("onCancel");this._showText(focus)}});if(0)InlineEditBox=declare("dijit.InlineEditBox",InlineEditBox,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.displayNode)}});InlineEditBox._InlineEditor=InlineEditor;return InlineEditBox})},"dojox/fx/_base":function(){define("dojox/fx/_base",["dojo/_base/array","dojo/_base/lang","dojo/_base/fx","dojo/fx",
"dojo/dom","dojo/dom-style","dojo/dom-geometry","dojo/_base/connect","dojo/_base/html"],function(arrayUtil,lang,baseFx,coreFx,dom,domStyle,domGeom,connectUtil,htmlUtil){var dojoxFx=lang.getObject("dojox.fx",true);lang.mixin(dojoxFx,{anim:baseFx.anim,animateProperty:baseFx.animateProperty,fadeTo:baseFx._fade,fadeIn:baseFx.fadeIn,fadeOut:baseFx.fadeOut,combine:coreFx.combine,chain:coreFx.chain,slideTo:coreFx.slideTo,wipeIn:coreFx.wipeIn,wipeOut:coreFx.wipeOut});dojoxFx.sizeTo=function(args){var node=
args.node=dom.byId(args.node),abs="absolute";var method=args.method||"chain";if(!args.duration)args.duration=500;if(method=="chain")args.duration=Math.floor(args.duration/2);var top,newTop,left,newLeft,width,height=null;var init=function(n){return function(){var cs=domStyle.getComputedStyle(n),pos=cs.position,w=cs.width,h=cs.height;top=pos==abs?n.offsetTop:parseInt(cs.top)||0;left=pos==abs?n.offsetLeft:parseInt(cs.left)||0;width=w=="auto"?0:parseInt(w);height=h=="auto"?0:parseInt(h);newLeft=left-
Math.floor((args.width-width)/2);newTop=top-Math.floor((args.height-height)/2);if(pos!=abs&&pos!="relative"){var ret=domStyle.coords(n,true);top=ret.y;left=ret.x;n.style.position=abs;n.style.top=top+"px";n.style.left=left+"px"}}}(node);var anim1=baseFx.animateProperty(lang.mixin({properties:{height:function(){init();return{end:args.height||0,start:height}},top:function(){return{start:top,end:newTop}}}},args));var anim2=baseFx.animateProperty(lang.mixin({properties:{width:function(){return{start:width,
end:args.width||0}},left:function(){return{start:left,end:newLeft}}}},args));var anim=coreFx[args.method=="combine"?"combine":"chain"]([anim1,anim2]);return anim};dojoxFx.slideBy=function(args){var node=args.node=dom.byId(args.node),top,left;var init=function(n){return function(){var cs=domStyle.getComputedStyle(n);var pos=cs.position;top=pos=="absolute"?n.offsetTop:parseInt(cs.top)||0;left=pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0;if(pos!="absolute"&&pos!="relative"){var ret=domGeom.coords(n,
true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px"}}}(node);init();var _anim=baseFx.animateProperty(lang.mixin({properties:{top:top+(args.top||0),left:left+(args.left||0)}},args));connectUtil.connect(_anim,"beforeBegin",_anim,init);return _anim};dojoxFx.crossFade=function(args){var node1=args.nodes[0]=dom.byId(args.nodes[0]),op1=htmlUtil.style(node1,"opacity"),node2=args.nodes[1]=dom.byId(args.nodes[1]),op2=htmlUtil.style(node2,"opacity");var _anim=
coreFx.combine([baseFx[op1==0?"fadeIn":"fadeOut"](lang.mixin({node:node1},args)),baseFx[op1==0?"fadeOut":"fadeIn"](lang.mixin({node:node2},args))]);return _anim};dojoxFx.highlight=function(args){var node=args.node=dom.byId(args.node);args.duration=args.duration||400;var startColor=args.color||"#ffff99",endColor=htmlUtil.style(node,"backgroundColor");if(endColor=="rgba(0, 0, 0, 0)")endColor="transparent";var anim=baseFx.animateProperty(lang.mixin({properties:{backgroundColor:{start:startColor,end:endColor}}},
args));if(endColor=="transparent")connectUtil.connect(anim,"onEnd",anim,function(){node.style.backgroundColor=endColor});return anim};dojoxFx.wipeTo=function(args){args.node=dom.byId(args.node);var node=args.node,s=node.style;var dir=args.width?"width":"height",endVal=args[dir],props={};props[dir]={start:function(){s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s[dir]="1px";s.display="";s.visibility="";return 1}else{var now=htmlUtil.style(node,dir);return Math.max(now,1)}},end:endVal};
var anim=baseFx.animateProperty(lang.mixin({properties:props},args));return anim};return dojoxFx})},"xide/utils/CIUtils":function(){define(["dojo/_base/declare","dojo/_base/lang","xide/utils","xide/types","dojo/has"],function(declare,lang,utils,types,has){utils.toOptions=function(cis){cis=utils.flattenCIS(cis);var result=[];for(var i=0;i<cis.length;i++){var ci=cis[i];result.push({name:utils.toString(ci["name"]),value:utils.getCIValue(ci),type:utils.toInt(ci["type"]),enumType:utils.toString(ci["enumType"]),
visible:utils.toBoolean(ci["visible"]),active:utils.toBoolean(ci["active"]),changed:utils.toBoolean(ci["changed"]),group:utils.toString(ci["group"]),user:utils.toObject(ci["user"]),dst:utils.toString(ci["dst"]),params:utils.toString(ci["params"])})}return result};utils.flattenCIS=function(cis){var addedCIS=[];var removedCIs=[];for(var i=0;i<cis.length;i++){var ci=cis[i];var ciType=utils.toInt(ci.type);if(ciType>types.ECIType.END){var resolved=types.resolveType(ciType);if(resolved){lang.mixin(addedCIS,
resolved);removedCIs.push(ci)}}}if(addedCIS.length>0)cis=cis.concat(addedCIS);if(removedCIs)for(var i in removedCIs)cis.remove(removedCIs[i]);return cis};utils.arrayContains=function(array,element){for(var i=0;i<array.length;i++){var _e=array[i];if(_e===element)return true}return false};utils.setStoreCIValueByField=function(d,field,value){if(d[field]==null)d[field]=[];d[field][0]=utils.getStringValue(value);return d};utils.createOption=function(label,value,exta){var result={label:label,value:value!=
null?value:label};if(exta)lang.mixin(result,exta);return result};utils.createCI=function(name,type,value,args){var res={dataRef:null,dataSource:null,name:name,group:-1,id:name,title:name,type:type,uid:-1,value:value!=null?value:-1,visible:true,enumType:-1,"class":"cmx.types.ConfigurableInformation"};if(args)lang.mixin(res,args);return res};utils.createCIAsArray=function(name,type,chain,value){return{chainType:[chain?chain:0],dataRef:[null],dataSource:[null],params:[],name:[name],group:[-1],id:[name],
title:[name],type:[type],uid:[-1],value:[value?value:-1],visible:[true],enumType:[-1],parentId:[-1],"class":["cmx.types.ConfigurableInformation"]}};utils.hasValue=function(data){return data.value&&data.value[0]!=null&&data.value[0].length>0&&data.value[0]!="0"&&data.value[0]!="undefined"&&data.value[0]!="Unset"};utils.hasValueAndDataRef=function(data){return data.value&&data.value[0]!=null&&data.value[0].length>0&&data.value[0]!="0"&&data.value[0]!="undefined"&&data.value[0]!="Unset"&&data.dataRef&&
data.dataRef[0]!=null&&data.dataRef[0].length>0&&data.dataRef[0]!="0"&&data.dataRef[0]!="undefined"};utils.getInputCIByName=function(data,name){if(!data){console.error("utils.getCIByChainAndName : have no data");return null}var chain=0;var dstChain=chain==0?data.inputs:chain==1?data.outputs:null;if(!dstChain)dstChain=data;if(dstChain!=null)for(var i=0;i<dstChain.length;i++){var ci=dstChain[i];var _n=utils.getStringValue(ci.name);if(_n!=null&&_n.toLowerCase()===name.toLowerCase())return ci}return null};
utils.getCIByChainAndName=function(data,chain,name){if(!data){console.error("utils.getCIByChainAndName : have no data");return null}var dstChain=chain==0?data.inputs:chain==1?data.outputs:null;if(!dstChain)dstChain=data;if(dstChain!=null)for(var i=0;i<dstChain.length;i++){var ci=dstChain[i];var _n=utils.getStringValue(ci.name);if(_n!=null&&_n.toLowerCase()===name.toLowerCase())return ci}return null};utils.getCIByUid=function(dstChain,uid){if(dstChain!=null)for(var i=0;i<dstChain.length;i++){var ci=
dstChain[i];var _n=utils.getStringValue(ci.uid);if(_n!=null&&_n===uid)return ci}return null};utils.getCIById=function(data,chain,id){var dstChain=chain==0?data.inputs:chain==1?data.outputs:null;if(dstChain!=null)for(var i=0;i<dstChain.length;i++){var ci=dstChain[i];if(ci.id[0]==id[0])return ci}return null};utils.getCIInputValueByName=function(data,name){var ci=utils.getCIByChainAndName(data,0,name);if(ci)return ci.value;return null};utils.getCIValue=function(data){return utils.getCIValueByField(data,
"value")};utils.getStringValue=function(d){return utils.toString(d)};utils.toString=function(d){if(d!=null){if(!dojo.isArray(d))return""+d;if(d&&d.length==1&&d[0]==null)return null;return""+(d[0]!=null?d[0]:d)}return null};utils.setIntegerValue=function(data,value){if(data!=null)if(dojo.isArray(data))data[0]=value;else data=value};utils.getCIValueByField=function(data,field){if(data[field]!=null)if(lang.isArray(data[field]))return data[field][0]?data[field][0]:data[field];else return data[field];
return null};utils.setCIValueByField=function(data,field,value){if(!data)return data;if(data[field]==null)data[field]=[];if(lang.isString)data[field]=value;else if(lang.isArray(data[field]))data[field][0]=value;return data};utils.getCIInputValueByNameAndField=function(data,name,field){var ci=utils.getCIByChainAndName(data,0,name);if(ci)return ci[""+field];return null};utils.getCIInputValueByNameAndFieldStr=function(data,name,field){var rawValue=utils.getCIInputValueByNameAndField(data,name,field);
if(rawValue)return utils.getStringValue(rawValue);return null};utils.getCIInputValueByNameAndFieldBool=function(data,name,field){var rawValue=utils.getCIInputValueByNameAndField(data,name,field);if(rawValue)return utils.toBoolean(rawValue);return null};utils.getCIWidgetByName=function(cis,name){for(var i=0;i<cis.length;i++){var ci=cis[i];if(ci["_widget"]&&ci.name===name)return ci["_widget"]}return null};return utils})},"xfile/views/MouseHandler":function(){define("xfile/views/MouseHandler",["dojo/_base/declare"],
function(declare){return declare("xfiles.views.MouseHandler",null,{mylatesttap:0,doubletap:function(){var isMobile=/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase());if(!isMobile)return;var now=(new Date).getTime();var timesince=now-this.mylatesttap;if(timesince<1500&&timesince>0)this.onMouseEventDouble(null);else;this.mylatesttap=(new Date).getTime()},onMouseEvent:function(evt){this.doubletap()},onMouseEventDouble:function(evt){this.openItem(null)}})})},
"xblox/widgets/DojoDndMixin":function(){define("xblox/widgets/DojoDndMixin",["dojo/_base/declare","dojo/_base/array","dijit/registry","dojo/topic"],function(declare,array,registry,topic){return declare("xblox.widgets.DojoDndMixin",null,{dropEvent:"/dnd/drop",dragEvent:"/dnd/start",overEvent:"/dnd/source/over",_eDrop:false,isDragging:false,didInit:false,_calcNewItemList:function(items){var res=[];if(items)for(var i=0;i<items.length;i++){var widget=registry.getEnclosingWidget(items[i].item.node);if(widget){widget.item.dndCurrentIndex=
i;res.push(widget)}}return res},_onOver:function(node,source){if(this.isDragging){var widget=null;if(source)widget=registry.getEnclosingWidget(source[0]);0&&console.log("on over : ")}},_onDrag:function(node,source){this.isDragging=true},checkAcceptance:function(sources,nodes){return false;if(!sources||!nodes)return;this.setupDND();var node=nodes[0];var row=this.grid.row(node);if(!row||!row.data)return;var item=row.data;0&&console.log("acce : "+item.name);return true},onDrop:function(source,nodes,
copy,target){if(!source||!nodes)return;this.isDragging=false;var node=nodes[0];var item=null;var dstItem=null;var isTree=false;var didNonTree=false;var didTree=false;if(source.tree&&source.anchor&&source.anchor.item&&target){item=source.anchor.item;isTree=true;var dstNode=target.current;if(!dstNode){0&&console.warn("have dstNode in target.current");if(this.delegate&&this.delegate.onDrop){0&&console.log("drop on nothing");this.delegate.onDrop(item,{parentId:null},false,this.grid,source.targetState,
false)}return}var dstRow=this.grid.row(dstNode);if(!dstRow){0&&console.warn("have now row");return}dstItem=dstRow.data;if(!dstItem){0&&console.warn("have no dstItem");return}try{if(this.delegate&&this.delegate.onDrop){this.delegate.onDrop(item,dstItem,target.before,this.grid,source.targetState,target.hover);didTree=true}}catch(e){debugger}}else{var row=this.grid.row(node);if(!row||!row.data)return;item=row.data;var dstNode=source.current;if(!dstNode){0&&console.warn("have dstNode in source.current");
return}var dstRow=this.grid.row(dstNode);if(!dstRow){0&&console.warn("have now row");return}dstItem=dstRow.data;if(!dstItem){0&&console.warn("have no dstItem");return}try{if(this.delegate&&this.delegate.onDrop){this.delegate.onDrop(item,dstItem,source.before,this.grid,source.sourceState,source.hover);didNonTree=true}}catch(e){debugger}}if(didNonTree==false&&didTree==false){0&&console.dir(arguments);0&&console.log("something wrong")}else{0&&console.dir(arguments);0&&console.log("droping : "+item.name+
" into "+dstItem.name+" before \x3d "+source.before);0&&console.log("didNonTree "+didNonTree+" didTree "+didTree)}},_onDrop:function(source,nodes,copy,target){},setupDND:function(){var thiz=this;if(this.didInit)return;this.didInit=true;topic.subscribe(this.dragEvent,function(node,targetArea,indexChild){thiz._onDrag(node,targetArea,indexChild)});if(this.overEvent)topic.subscribe(this.overEvent,function(node,targetArea,indexChild){thiz._onOver(node,targetArea,indexChild)});topic.subscribe(this.dropEvent,
function(source,nodes,copy,target){thiz._onDrop(source,nodes,copy,target)})}})})},"xfile/views/_PreviewMixin":function(){define("xfile/views/_PreviewMixin",["dojo/_base/declare","dojo/dom-class","dojo/_base/lang","xide/layout/ContentPane","xfile/views/FileTreeView","xfile/widgets/LayoutSelector","xfile/widgets/SourceSelector","xide/types","./KeyboardHandler","./MouseHandler","dojo/cookie","dojo/json","xfile/views/History","dijit/form/FilteringSelect","dojo/has","xide/factory","xide/utils","xide/views/ACEEditor"],
function(declare,domClass,lang,ContentPane,FileTreeView,LayoutSelector,SourceSelector,types,KeyboardHandler,MouseHandler,cookie,json,History,FilteringSelect,has,factory,utils,ACEEditor){return declare("xfile.views._PreviewMixin",null,{_codePreview:null,_imgPreview:null,_videoPreview:null,_audioPreview:null,_adjustImage:function(preview,img){var prop=(img.width()/img.height()).toFixed(2);var pw=parseInt(preview.width()),ph=parseInt(preview.height()),w,h;if(pw<200){pw=448;ph=300}if(prop<(pw/ph).toFixed(2)){h=
ph;w=Math.floor(h*prop)}else{w=pw;h=Math.floor(w/prop)}img.width(w).height(h).css("margin-top",h<ph?Math.floor((ph-h)/2):0);img.fadeIn(10)},_onResize:function(){var preview=$(this.previewNode);if(this._imgPreview)this._adjustImage(preview,this._imgPreview);if(this._codePreview)this._codePreview.resize()},renderImagePreview:function(item){var file=this.delegate.getImageUrl(item);var thiz=this;var preview=$(this.previewNode);var img=$("\x3cimg/\x3e").hide().appendTo(preview).load(function(){thiz.showStandBy(thiz.previewNode,
false);thiz.publish(types.EVENTS.RESIZE,{});setTimeout(function(){img.fadeIn(0);preview.bind("changesize",function(){thiz._adjustImage(preview,img)}).trigger("changesize")},10);setTimeout(function(){thiz._adjustImage(preview,img)},100)}).attr("src",file);this._imgPreview=img},renderCodePreview:function(item){var thiz=this;var editor=utils.addWidget(ACEEditor,{dataItem:item,filePath:item.path,config:this.config||this.delegate.config,delegate:this.delegate.ctx.getScriptManager(),ctx:this.delegate.ctx,
autoSelect:false,style:"padding:0px;height:inherit !important",iconClass:"",storeDelegate:{getContent:function(onSuccess){var _c=function(data){thiz.showStandBy(thiz.previewNode,false,5E3);onSuccess(data)};thiz.delegate.ctx.getFileManager().getContent(item.mount,item.path,_c,false)},saveContent:function(value,onSuccess,onError){thiz.delegate.ctx.getFileManager().setContent(item.mount,item.path,value,onSuccess)}},title:"No Title",closable:true,fileName:item.path,editorOptions:{readOnly:false,showGutter:true,
autoFocus:false},onClose:function(){}},this,this.previewNode,true);setTimeout(function(){editor.resize()},100);this._codePreview=editor},_addListeners:function(vid){var logEvent=function(e,col){console.error(e);0&&console.dir(e)};vid.addEventListener("loadstart",function(evt){logEvent(evt,"#000099")},false);vid.addEventListener("canplaythrough",function(evt){logEvent(evt,"#66CC33")},false);vid.addEventListener("canplay",function(evt){logEvent(evt,"#66CC33")},false);vid.addEventListener("loadeddata",
function(evt){logEvent(evt,"#00CCCC")},false);vid.addEventListener("loadedmetadata",function(evt){logEvent(evt,"#00CCCC")},false);vid.addEventListener("abort",function(evt){logEvent(evt,"red")},false);vid.addEventListener("emptied",function(evt){logEvent(evt,"red")},false);vid.addEventListener("error",function(evt){logEvent(evt,"red")},false);vid.addEventListener("stalled",function(evt){logEvent(evt,"red")},false);vid.addEventListener("suspend",function(evt){logEvent(evt,"red")},false);vid.addEventListener("waiting",
function(evt){logEvent(evt,"red")},false);vid.addEventListener("pause",function(evt){logEvent(evt,"orange")},false);vid.addEventListener("play",function(evt){logEvent(evt,"orange")},false);vid.addEventListener("volumechange",function(evt){logEvent(evt,"orange")},false);vid.addEventListener("playing",function(evt){logEvent(evt,"purple")},false);vid.addEventListener("seeked",function(evt){logEvent(evt,"teal")},false);vid.addEventListener("seeking",function(evt){logEvent(evt,"teal")},false);vid.addEventListener("durationchange",
function(evt){logEvent(evt,"#cc0066")},false);vid.addEventListener("progress",function(evt){logEvent(evt,"#cc0066")},false);vid.addEventListener("ratechange",function(evt){logEvent(evt,"#cc0066")},false);vid.addEventListener("timeupdate",function(evt){logEvent(evt,"gray")},false);vid.addEventListener("ended",function(evt){logEvent(evt,"#000099")},false);vid.addEventListener("webkitbeginfullscreen",function(evt){logEvent(evt,"#FF6666")},false);vid.addEventListener("webkitendfullscreen",function(evt){logEvent(evt,
"#FF6666")},false)},renderAudioNode:function(item){var preview=$(this.previewNode);var file=this.delegate.getImageUrl(item);var node=$('\x3caudio class\x3d"elfinder-quicklook-preview-audio" controls preload\x3d"auto" autobuffer\x3e\x3csource src\x3d"'+file+'" /\x3e\x3c/audio\x3e').appendTo(preview);node[0].addEventListener("load",function(){0&&console.log("loaded!");factory.publish(types.EVENTS.RESIZE,{},this)},false);node[0].play();this._audioPreview=node},renderVideoNode:function(item){this.showStandBy(this.previewNode,
false,5E3);var preview=$(this.previewNode);var file=this.delegate.getImageUrl(item);var node=$('\x3cvideo class\x3d"elfinder-quicklook-preview-video" controls preload\x3d"auto" autobuffer\x3e\x3csource src\x3d"'+file+'" /\x3e\x3c/video\x3e').appendTo(preview);this._videoPreview=node;return node[0].play()},_reset:function(){this._imgPreview=null;this._codePreview=null;if(this._videoPreview){this._videoPreview[0].pause();this._videoPreview.remove()}this._videoPreview=null;if(this._audioPreview){this._audioPreview[0].pause();
this._audioPreview.remove()}this._audioPreview=null},renderPreview:function(item){this._reset();dojo.empty(this.previewNode);utils.destroyWidget(this._codePreview);utils.destroyWidget(this._imgPreview);utils.destroyWidget(this._videoPreview);utils.destroyWidget(this._audioPreview);var thiz=this;var preview=$(this.previewNode);var file=this.delegate.getImageUrl(item);var mimes=["image/jpeg","image/png","image/gif"];$.each(navigator.mimeTypes,function(i,o){var mime=o.type;if(mime.indexOf("image/")===
0&&$.inArray(mime,mimes))mimes.push(mime)});if($.inArray(item.mime,mimes)!==-1)return this.renderImagePreview(item);mimes=["text/html"];if($.inArray(item.mime,mimes)!==-1){var _c=function(data){thiz.showStandBy(thiz.previewNode,false,5E3);doc=$('\x3ciframe class\x3d"elfinder-quicklook-preview-html"/\x3e').appendTo(preview)[0].contentWindow.document;doc.open();doc.write(data);doc.close()};this.delegate.ctx.getFileManager().getContent(item.mount,item.path,_c,false);return}mimes=["application/x-empty",
"application/javascript","application/xhtml+xml","audio/x-mp3-playlist","application/x-web-config","application/docbook+xml","application/x-php","application/x-perl","application/x-awk","application/x-config","application/x-csh","application/xml","application/x-empty","text/html","text/css","text/x-c","text/x-php","text/plain","text/x-c++","text/x-lisp"];if($.inArray(item.mime,mimes)!==-1)try{return this.renderCodePreview(item)}catch(e){debugger}mimes=["video/mp4","video/x-m4v","video/ogg","application/ogg",
"application/octet-stream","video/webm"];if($.inArray(item.mime,mimes)!==-1)try{return this.renderVideoNode(item)}catch(e){debugger}mimes=["audio/mpeg","audio/mpeg3","audio/mp3","audio/x-mpeg3","audio/x-mp3","audio/x-wav","audio/wav","audio/x-m4a","audio/aac","audio/mp4","audio/x-mp4","audio/ogg"];if($.inArray(item.mime,mimes)!==-1)return this.renderAudioNode(item);mimes=["application/pdf"];if($.inArray(item.mime,mimes)!==-1){var node=$('\x3ciframe class\x3d"elfinder-quicklook-preview-pdf"/\x3e').hide().appendTo(preview).load(function(){thiz.showStandBy(thiz.previewNode,
false,5E3);node.show()}).attr("src",file);return}mimes=[];$.each(navigator.plugins,function(i,plugins){$.each(plugins,function(i,plugin){(plugin.type.indexOf("audio/")===0||plugin.type.indexOf("video/")===0)&&mimes.push(plugin.type)})});if($.inArray(item.mime,mimes)!==-1){0&&console.log("render item via browser plugin");thiz.showStandBy(thiz.previewNode,false,5E3);var video;video=item.mime.indexOf("video/")===0;node=$('\x3cembed src\x3d"'+file+'" type\x3d"'+item.mime+'" class\x3d"elfinder-quicklook-preview-'+
(video?"video":"audio")+'"/\x3e').appendTo(preview);0&&console.log("video "+video);return}return this.renderCodePreview(item)}})})},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(array,declare,domConstruct,kernel,registry){return declare("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},addChild:function(widget,insertIndex){var refNode=
this.containerNode;if(insertIndex>0){refNode=refNode.firstChild;while(insertIndex>0){if(refNode.nodeType==1)insertIndex--;refNode=refNode.nextSibling}if(refNode)insertIndex="before";else{refNode=this.containerNode;insertIndex="last"}}domConstruct.place(widget.domNode,refNode,insertIndex);if(this._started&&!widget._started)widget.startup()},removeChild:function(widget){if(typeof widget=="number")widget=this.getChildren()[widget];if(widget){var node=widget.domNode;if(node&&node.parentNode)node.parentNode.removeChild(node)}},
hasChildren:function(){return this.getChildren().length>0},_getSiblingOfChild:function(child,dir){kernel.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var children=this.getChildren(),idx=array.indexOf(children,child);return children[idx+dir]},getIndexOfChild:function(child){return array.indexOf(this.getChildren(),child)}})})},"xfile/manager/ClipboardManager":function(){define("xfile/manager/ClipboardManager",["dojo/_base/declare",
"dojo/_base/lang","xide/factory","xide/types","xide/widgets/TemplatedWidgetBase"],function(declare,lang,factory,types,TemplatedWidgetBase){return declare("xfile.manager.ClipboardManager",[TemplatedWidgetBase],{templateString:"\x3cdiv\x3e\x3c/div\x3e",currentCopySelection:null,currentCutSelection:null,onPaste:function(data){var selection=this.currentCopySelection||this.currentCutSelection;var owner=data?data?data.owner?data.owner:null:null:null;var isCopy=this.currentCopySelection!=null;if(selection&&
owner){if(!selection[0]._S)return;var dst=null;var panelDelegate=owner.panelDelegate||owner;if(panelDelegate&&panelDelegate.getCurrentPathItem)dst=panelDelegate.getCurrentPathItem();var path=panelDelegate.getCurrentPath();if(path&&owner&&owner.store)dst=owner.store.getItemByPath(null,path);if(dst){var delegate=owner.panelManager?owner.panelManager:null;if(delegate)if(isCopy)delegate.copyItems(null,selection,dst,null,true);else{delegate.moveItems(null,selection,dst,null,true);this.currentCutSelection=
null;this.currentCopySelection=null}}}},onCopy:function(data){var selection=data?data.items?data.items:null:null;if(selection){if(!selection&&selection[0]._S)return;this.currentCopySelection=selection}this.currentCutSelection=null},onCut:function(data){var selection=data?data.items?data.items:null:null;if(selection){if(!selection&&selection[0]._S)return;this.currentCutSelection=selection}this.currentCopySelection=null},init:function(){factory.subscribe(types.EVENTS.ON_CLIPBOARD_COPY,this.onCopy,this);
factory.subscribe(types.EVENTS.ON_CLIPBOARD_PASTE,this.onPaste,this);factory.subscribe(types.EVENTS.ON_CLIPBOARD_CUT,this.onCut,this);this._setupTranslations()}})})},"dijit/layout/BorderContainer":function(){define("dijit/layout/BorderContainer",["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","../_WidgetBase","../_Widget","../_TemplatedMixin","./LayoutContainer","./utils"],
function(array,cookie,declare,domClass,domConstruct,domGeometry,domStyle,keys,lang,on,touch,_WidgetBase,_Widget,_TemplatedMixin,LayoutContainer,layoutUtils){var _Splitter=declare("dijit.layout._Splitter",[_Widget,_TemplatedMixin],{live:true,templateString:'\x3cdiv class\x3d"dijitSplitter" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex\x3d"0" role\x3d"separator"\x3e\x3cdiv class\x3d"dijitSplitterThumb"\x3e\x3c/div\x3e\x3c/div\x3e',
constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);domClass.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var persistSize=cookie(this._cookieName);if(persistSize)this.child.domNode.style[this.horizontal?"height":"width"]=
persistSize}},_computeMaxSize:function(){var dim=this.horizontal?"h":"w",childSize=domGeometry.getMarginBox(this.child.domNode)[dim],center=array.filter(this.container.getChildren(),function(child){return child.region=="center"})[0];var spaceAvailable=domGeometry.getContentBox(center.domNode)[dim]-10;return Math.min(this.child.maxSize,childSize+spaceAvailable)},_startDrag:function(e){if(!this.cover)this.cover=domConstruct.place("\x3cdiv class\x3ddijitSplitterCover\x3e\x3c/div\x3e",this.child.domNode,
"after");domClass.add(this.cover,"dijitSplitterCoverActive");if(this.fake)domConstruct.destroy(this.fake);if(!(this._resize=this.live)){(this.fake=this.domNode.cloneNode(true)).removeAttribute("id");domClass.add(this.domNode,"dijitSplitterShadow");domConstruct.place(this.fake,this.domNode,"after")}domClass.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");if(this.fake)domClass.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");
var factor=this._factor,isHorizontal=this.horizontal,axis=isHorizontal?"pageY":"pageX",pageStart=e[axis],splitterStyle=this.domNode.style,dim=isHorizontal?"h":"w",childCS=domStyle.getComputedStyle(this.child.domNode),childStart=domGeometry.getMarginBox(this.child.domNode,childCS)[dim],max=this._computeMaxSize(),min=Math.max(this.child.minSize,domGeometry.getPadBorderExtents(this.child.domNode,childCS)[dim]+10),region=this.region,splitterAttr=region=="top"||region=="bottom"?"top":"left",splitterStart=
parseInt(splitterStyle[splitterAttr],10),resize=this._resize,layoutFunc=lang.hitch(this.container,"_layoutChildren",this.child.id),de=this.ownerDocument;this._handlers=this._handlers.concat([on(de,touch.move,this._drag=function(e,forceResize){var delta=e[axis]-pageStart,childSize=factor*delta+childStart,boundChildSize=Math.max(Math.min(childSize,max),min);if(resize||forceResize)layoutFunc(boundChildSize);splitterStyle[splitterAttr]=delta+splitterStart+factor*(boundChildSize-childSize)+"px"}),on(de,
"dragstart",function(e){e.stopPropagation();e.preventDefault()}),on(this.ownerDocumentBody,"selectstart",function(e){e.stopPropagation();e.preventDefault()}),on(de,touch.release,lang.hitch(this,"_stopDrag"))]);e.stopPropagation();e.preventDefault()},_onMouse:function(e){var o=e.type=="mouseover"||e.type=="mouseenter";domClass.toggle(this.domNode,"dijitSplitterHover",o);domClass.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",o)},_stopDrag:function(e){try{if(this.cover)domClass.remove(this.cover,
"dijitSplitterCoverActive");if(this.fake)domConstruct.destroy(this.fake);domClass.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow");this._drag(e);this._drag(e,true)}finally{this._cleanupHandlers();delete this._drag}if(this.container.persist)cookie(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){var h;while(h=this._handlers.pop())h.remove()},_onKeyDown:function(e){this._resize=
true;var horizontal=this.horizontal;var tick=1;switch(e.keyCode){case horizontal?keys.UP_ARROW:keys.LEFT_ARROW:tick*=-1;case horizontal?keys.DOWN_ARROW:keys.RIGHT_ARROW:break;default:return}var childSize=domGeometry.getMarginSize(this.child.domNode)[horizontal?"h":"w"]+this._factor*tick;this.container._layoutChildren(this.child.id,Math.max(Math.min(childSize,this._computeMaxSize()),this.child.minSize));e.stopPropagation();e.preventDefault()},destroy:function(){this._cleanupHandlers();delete this.child;
delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}});var _Gutter=declare("dijit.layout._Gutter",[_Widget,_TemplatedMixin],{templateString:'\x3cdiv class\x3d"dijitGutter" role\x3d"presentation"\x3e\x3c/div\x3e',postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);domClass.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}});var BorderContainer=declare("dijit.layout.BorderContainer",
LayoutContainer,{gutters:true,liveSplitters:true,persist:false,baseClass:"dijitBorderContainer",_splitterClass:_Splitter,postMixInProperties:function(){if(!this.gutters)this.baseClass+="NoGutter";this.inherited(arguments)},_setupChild:function(child){this.inherited(arguments);var region=child.region;if(region)if(region!="center"&&(child.splitter||this.gutters)&&!child._splitterWidget){var _Splitter=child.splitter?this._splitterClass:_Gutter;if(lang.isString(_Splitter))_Splitter=lang.getObject(_Splitter);
var splitter=new _Splitter({id:child.id+"_splitter",container:this,child:child,region:region,live:this.liveSplitters});splitter.isSplitter=true;child._splitterWidget=splitter;var before=region=="bottom"||region==(this.isLeftToRight()?"right":"left");domConstruct.place(splitter.domNode,child.domNode,before?"before":"after");splitter.startup()}},layout:function(){this._layoutChildren()},removeChild:function(child){if(!child)return;var splitter=child._splitterWidget;if(splitter){splitter.destroy();delete child._splitterWidget}this.inherited(arguments)},
getChildren:function(){return array.filter(this.inherited(arguments),function(widget){return!widget.isSplitter})},getSplitter:function(region){return array.filter(this.getChildren(),function(child){return child.region==region})[0]._splitterWidget},resize:function(newSize,currentSize){if(!this.cs||!this.editor){var node=this.domNode;this.cs=domStyle.getComputedStyle(node);this.editor=domGeometry.getPadExtents(node,this.cs);this.editor.r=domStyle.toPixelValue(node,this.cs.paddingRight);this.editor.b=
domStyle.toPixelValue(node,this.cs.paddingBottom);domStyle.set(node,"padding","0px")}this.inherited(arguments)},_layoutChildren:function(changedChildId,changedChildSize){if(!this._borderBox||!this._borderBox.h)return;var childrenAndSplitters=[];array.forEach(this._getOrderedChildren(),function(pane){childrenAndSplitters.push(pane);if(pane._splitterWidget)childrenAndSplitters.push(pane._splitterWidget)});var dim={l:this.editor.l,t:this.editor.t,w:this._borderBox.w-this.editor.w,h:this._borderBox.h-
this.editor.h};layoutUtils.layoutChildren(this.domNode,dim,childrenAndSplitters,changedChildId,changedChildSize)},destroyRecursive:function(){array.forEach(this.getChildren(),function(child){var splitter=child._splitterWidget;if(splitter)splitter.destroy();delete child._splitterWidget});this.inherited(arguments)}});BorderContainer.ChildWidgetProperties={splitter:false,minSize:0,maxSize:Infinity};lang.mixin(BorderContainer.ChildWidgetProperties,LayoutContainer.ChildWidgetProperties);lang.extend(_WidgetBase,
BorderContainer.ChildWidgetProperties);BorderContainer._Splitter=_Splitter;BorderContainer._Gutter=_Gutter;return BorderContainer})},"dojo/dnd/Mover":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(array,declare,event,lang,has,win,dom,domGeom,domStyle,Evented,on,touch,dnd,autoscroll){return declare("dojo.dnd.Mover",[Evented],
{constructor:function(node,e,host){this.node=dom.byId(node);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=this.host=host,d=node.ownerDocument;this.events=[on(d,touch.move,lang.hitch(this,"onFirstMove")),on(d,touch.move,lang.hitch(this,"onMouseMove")),on(d,touch.release,lang.hitch(this,"onMouseUp")),on(d,"dragstart",event.stop),on(d.body,"selectstart",event.stop)];autoscroll.autoScrollStart(d);if(h&&h.onMoveStart)h.onMoveStart(this)},onMouseMove:function(e){autoscroll.autoScroll(e);
var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY},e);event.stop(e)},onMouseUp:function(e){if(has("webkit")&&has("mac")&&this.mouseButton==2?e.button==0:this.mouseButton==e.button)this.destroy();event.stop(e)},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=domGeom.getMarginBox(this.node);var b=win.doc.body;
var bs=domStyle.getComputedStyle(b);var bm=domGeom.getMarginBox(b,bs);var bc=domGeom.getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove)h.onFirstMove(this,e);this.events.shift().remove()},destroy:function(){array.forEach(this.events,function(handle){handle.remove()});var h=this.host;if(h&&h.onMoveStop)h.onMoveStop(this);this.events=this.node=this.host=null}})})},"xfile/views/FileFindView":function(){define("xfile/views/FileFindView",
["dojo/_base/declare","dojo/dom-class","xide/widgets/TemplatedWidgetBase","xide/utils/HTMLUtils","./FileSelectDialog","xide/widgets/FlagsWidget","xide/factory"],function(declare,domClass,TemplatedWidgetBase,HTMLUtils,FileSelectDialog,FlagsWidget,factory){return declare("xfile.views.FileFindView",[TemplatedWidgetBase],{root:null,dst:null,src:null,delegate:null,selectButton:null,value:null,fileNameValid:false,searchInNode:null,tableNode:null,tableBodyNode:null,wDirectory:null,wFile:null,wContent:null,
wFlags:null,flagsNode:null,flags:null,templateString:"\x3cdiv\x3e"+"\x3cdiv data-dojo-attach-point\x3d'root' data-dojo-type\x3d'dijit.layout.ContentPane'\x3e"+"\x3cdiv data-dojo-attach-point\x3d'searchInNode'\x3e\x3c/div\x3e"+"\x3ctable data-dojo-attach-point\x3d'tableNode' class\x3d'myboxtbl'\x3e"+"\x3ctbody data-dojo-attach-point\x3d'tableBodyNode'\x3e"+"\x3ctbody\x3e"+"\x3c/table\x3e"+"\x3cdiv data-dojo-attach-point\x3d'flagsNode'\x3e\x3c/div\x3e"+"\x3c/div\x3e\x3c/div\x3e",filePathValidator:function(value,
constraints){var thiz=this;var result=false;var reg=new RegExp(/^[0-9a-zA-Z ...\-_/ ]+$/);if(value&&reg.test(value)){var doExistCheck=false;if(doExistCheck){result=false;thiz.promptMessage="Item already exists";thiz.message="Item already exists"}else{result=true;thiz.message="Enter new file name"}}else{thiz.promptMessage="This is not a valid path, try without special characters!";thiz.message="This is not a path filename, try without special characters!";result=false}this.fileNameValid=result;if(this.owner&&
this.owner.onValidated)this.owner.onValidated(result);return result},getValue:function(){var directory={name:this.wDirectory?this.wDirectory.wValue.get("value")||"":"",regex:this.wDirectory?this.wDirectory.wRegex.get("checked"):false,caseSensitive:this.wDirectory?this.wDirectory.wCase.get("checked"):false};var file={name:this.wFile.wValue.get("value")||"",regex:this.wFile.wRegex.get("checked"),caseSensitive:this.wFile.wCase.get("checked")};var content={name:this.wContent.wValue.get("value"),regex:this.wContent.wRegex.get("checked"),
caseSensitive:this.wContent.wCase.get("checked")};return{directory:directory,file:file,content:content,type:directory.name.length>0?"dir":"file",searchIn:this.editBox.get("value"),permissions:this.flags||0}},addSearchContainsRow:function(label,placeHolderValue){var template="\x3ctr\x3e"+"\x3ctd\x3e\x3cspan\x3e"+label+"\x3c/span\x3e\x3c/td\x3e"+"\x3ctd\x3e"+"\x3cinput data-dojo-type\x3d'dijit.form.TextBox' data-dojo-attach-point\x3d'wValue' type\x3d'text' /\x3e"+"\x3c/td\x3e"+"\x3ctd\x3e"+"\x3cinput type\x3d'checkbox' value\x3d'0' data-dojo-attach-point\x3d'wRegex' data-dojo-type\x3d'dijit.form.CheckBox'\x3e"+
"\x3c/td\x3e"+"\x3ctd\x3e\x3cspan\x3eRegex\x3c/span\x3e\x3c/td\x3e"+"\x3ctd\x3e"+"\x3cinput type\x3d'checkbox' value\x3d'0' data-dojo-attach-point\x3d'wCase' data-dojo-type\x3d'dijit.form.CheckBox'\x3e"+"\x3c/td\x3e"+"\x3ctd\x3e\x3cspan\x3eCase sensitive\x3c/span\x3e\x3c/td\x3e"+"\x3c/tr\x3e";var widget=HTMLUtils.templatify(null,template,this.tableBodyNode,{},null);if(widget&&widget.startup)widget.startup();return widget},addFlags:function(){var thiz=this;var initialValue=0;var flags=[{value:2,label:"Writeable"},
{value:4,label:"Readable"},{value:8,label:"Executable"}];this.wFlags=new FlagsWidget({value:initialValue,data:flags,lineBreak:false,title:"",flagClass:"flagItem",setValue:function(value){thiz.flags=value},getValue:function(){return thiz.flags}},this.flagsNode);this.wFlags.startup()},createWidgets:function(){var text=this.src?this.src:"/";var thiz=this;this.selectButton=factory.createButton(this.searchInNode,"fileSelectButton","fileOperationSelectButton","","",function(){thiz.onSelect(thiz)},this);
this.editBox=factory.createValidationTextBox(this.searchInNode,"","In:",text,this.filePathValidator,this.delegate,"Not a path!","I need some input");this.editBox.owner=this;this.wFile=this.addSearchContainsRow("Filename contains");this.wContent=this.addSearchContainsRow("Content contains");this.addFlags()},onSelect:function(dst){var thiz=dst;var delegate={onShowPanel:function(){},onOk:function(dlg){if(dlg&&dlg.filePanel){var activeItem=dlg.filePanel.getActiveItem();if(activeItem){var path=activeItem.path;
if(path){thiz.editBox.set("value",path);thiz.value=path}}}}};try{var dlg=new FileSelectDialog({title:"Select Destination",delegate:delegate,owner:thiz.owner,dst:thiz.dst,src:thiz.src,ctx:thiz.ctx});domClass.add(dlg.domNode,"fileSelectDialog");dlg.show();dlg.initWithWithDestination(dst);dlg.resize()}catch(e){}setTimeout(function(){dlg.resize()},1E3)},startup:function(){if(this.didStartup)return;this.inherited(arguments);this.createWidgets();this.didStartup=true;this.editBox.focus()}})})},"xfile/views/FilePicker":function(){define("xfile/views/FilePicker",
["dojo/_base/array","dojo/_base/declare","xide/widgets/TemplatedWidgetBase","xide/widgets/_CSSMixin","xide/widgets/_StyleMixin","xide/widgets/_InsertionMixin","xide/widgets/_HTMLTemplateMixin","xide/types","xide/utils","xfile/widgets/BreadCrumb","xide/widgets/_PermaMixin","dijit/registry","xide/layout/TabContainer","xide/mixins/EventedMixin","xide/mixins/ReloadMixin","xfile/views/FilePropertyView","xfile/views/_MainViewMixin"],function(array,declare,TemplatedWidgetBase,CSSMixin,_StyleMixin,_InsertionMixin,
HTMLTemplateMixin,types,utils,BreadCrumb,PermaMixin,registry,TabContainer,EventedMixin,ReloadMixin,FilePropertyView,_MainViewMixin){return declare("xfile.views.FilePicker",[TemplatedWidgetBase,CSSMixin,_StyleMixin,HTMLTemplateMixin,_InsertionMixin,PermaMixin,EventedMixin,ReloadMixin,_MainViewMixin],{config:null,ctx:null,cssClass:"mainView xasMain dTuned filePickerLarge",layoutMain:null,layoutTop:null,layoutLeft:null,layoutCenter:null,layoutRight:null,layoutBottom:null,toolbar:null,preventCaching:true,
panelManager:null,leftPanel:null,centerPanel:null,centerTabContainer:null,breadCrumb:null,bottomTabContainer:null,logPanel:null,layoutBottomPlaceHolder:null,initialReload:false,persistent:true,_restoredPermaItems:0,defaultStore:"root",defaultStoreOptions:{"fields":1663,"includedFileExtensions":"*","excludedFileExtensions":"*"},clear:function(){this.inherited(arguments);utils.destroyWidget(this.propertyView,true,this);utils.destroyWidget(this.propertyViewPanel,true,this);dojo.empty(this.layoutRight.containerNode)},
onPerspectiveChanged:function(mode){this.clear();this.config.LAYOUT_PRESET=mode;this.initWithConfig(this.config,true)},setPerspective:function(mode){this.clear();this.config.LAYOUT_PRESET=mode;this.initWithConfig(this.config,true);this._contextChanged=true},templateString:"\x3cdiv\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutMain' data-dojo-type\x3d'xfile.layout.BorderContainer' data-dojo-props\x3d\"design:'headline'\" class\x3d'layoutMain '\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutTop' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'top',splitter:'true'\" class\x3d'layoutTop ui-state-default'\x3e\x3c/div\x3e"+
"\x3cdiv data-dojo-attach-point\x3d'layoutLeft' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'leading',splitter:'true'\" class\x3d'layoutLeft filePanelLayoutcontainer'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutCenter' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'center',splitter:'false'\" class\x3d'layoutCenter filePanelLayoutcontainer'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutRight' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'right',splitter:'true',minSize:'200',toggleSplitterState:'full',toggleSplitterFullSize:'200px' \" class\x3d'layoutRight filePropertyPanel ui-state-default'\x3e\x3c/div\x3e"+
"\x3cdiv data-dojo-attach-point\x3d'layoutBottom' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'bottom',splitter:'true',toggleSplitterState:'closed',toggleSplitterClosedSize:'0px',toggleSplitterFullSize:'150px'\" class\x3d'layoutBottom ui-state-default'\x3e\x3cdiv data-dojo-attach-point\x3d'layoutBottomPlaceHolder' style\x3d'height: 80px;'\x3e\x3c/div\x3e\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e",_permaItemReady:function(item){if(item)if(item.directory!=null&&item.directory===
true){if(this.centerPanel)if(this._restoredPermaItems==0)this.centerPanel.openItem(item);else this.centerPanel.openItemAlternate(item);this._restoredPermaItems+=1}else this.panelManager.openFile(item)},openProperties:function(item,container){if(!this.propertyView)this.propertyView=this._createPropertyView(item,container);this.propertyView.initWithItem(item)},_createPropertyView:function(item,container){var main=this.layoutMain;if(container===null){container=new dijit.layout.ContentPane({title:"Properties",
region:"right",splitter:true,className:"filePropertyPanel"});this.propertyViewPanel=container;if(main)main.addChild(container)}this.propertyView=utils.addWidget(FilePropertyView,{region:"right",title:this.translate("properties"),minSize:180,className:"filePropertyView ui-state-default",style:"width:100%;",themeRoot:this.config.THEME_ROOT,webRoot:this.config.REPO_URL,beanContextName:this.beanContextName},this.getPanelManager(),container.containerNode,true);this.propertyView.startup();main.resize();
this.publish(types.EVENTS.RESIZE,{},this);return this.propertyView},getPermaLink:function(){var items=[];if(this.centerTabContainer)array.forEach(registry.findWidgets(this.centerTabContainer.containerNode),function(child){if(child.getPermaLink){var childPerma=child.getPermaLink();if(childPerma&&childPerma!=".")items.push(encodeURIComponent(childPerma))}});else if(this.centerPanel&&this.centerPanel.getPermaLink){var childPerma=this.centerPanel.getPermaLink();if(childPerma&&childPerma!=".")items.push(encodeURIComponent(childPerma))}if(items&&
items.length>0)return"mainView\x3d"+encodeURIComponent(items.join("|"));return""},_getItem:function(url){var thiz=this;var store=this.panelManager.store;var _readyCB=function(item){thiz._permaItemReady(item)};setTimeout(function(){store.getItem(url,true,_readyCB)},10)},restorePermaLink:function(link){try{var urls=[];link=link||window.location.href;if(link){var params=utils.urlDecode(link);if(params&&params.mainView){params.mainView=decodeURIComponent(params.mainView);var items=params.mainView.indexOf("|")!=
-1?params.mainView.split("|"):[params.mainView];if(items&&items.length>0)for(var i=0;i<items.length;i++)urls.push(decodeURIComponent(items[i]))}}if(urls.length>0)for(var i=0;i<urls.length;i++)this._getItem(urls[i])}catch(e){debugger}},onChangeToggleSplitterState:function(splitter,state){if(!this.persistent)return;var splitterData=[];if(this.layoutLeft&&this.layoutLeft._splitterWidget)splitterData.push({region:"left",state:this.layoutLeft._splitterWidget.state});if(this.layoutRight&&this.layoutRight._splitterWidget)splitterData.push({region:"right",
state:this.layoutRight._splitterWidget.state});if(this.layoutBottom&&this.layoutBottom._splitterWidget)splitterData.push({region:"bottom",state:this.layoutBottom._splitterWidget.state});this.ctx.getSettingsManager().write(null,".",null,{id:"splitter",data:JSON.stringify(splitterData),name:"Splitter States"},true,null)},setupToggleSplitterListeners:function(){if(this.layoutLeft&&this.layoutLeft._splitterWidget)this.layoutLeft._splitterWidget.delegate=this;if(this.layoutRight&&this.layoutRight._splitterWidget)this.layoutRight._splitterWidget.delegate=
this;if(this.layoutBottom&&this.layoutBottom._splitterWidget)this.layoutBottom._splitterWidget.delegate=this},_getState:function(region,data){for(var i=0;i<data.length;i++)if(data[i].region==region)return data[i].state;return null},_restoreSplitter:function(){},_restoreToggleSplitters:function(){var store=this.ctx.getSettingsManager().getStore();if(store){var data=storeUtils.queryStoreEx(store,{id:"splitter"},true,true);if(data){data=data.data;if(data){if(this.layoutLeft&&this.layoutLeft._splitterWidget){var state=
this._getState("left",data);if(state)this.layoutLeft._splitterWidget.set("state",state)}if(this.layoutRight&&this.layoutRight._splitterWidget){var state=this._getState("right",data);if(state)this.layoutRight._splitterWidget.set("state",state)}if(this.layoutBottom&&this.layoutBottom._splitterWidget){var state=this._getState("bottom",data);if(state)this.layoutBottom._splitterWidget.set("state",state)}}}}},getNewAlternateTarget:function(item,panel){if(!this.centerTabContainer){if(this.centerPanel){var tmpPos=
dojo.doc.createElement("div");dojo.place(this.centerPanel.domNode,tmpPos)}var tabContainer=new TabContainer({tabStrip:true,tabPosition:"top",splitter:true,region:"center",attachParent:true,style:"width:100%;height:100%",parentContainer:this.layoutCenter},dojo.doc.createElement("div"));this.layoutCenter.containerNode.appendChild(tabContainer.domNode);tabContainer.startup();this.centerPanel.ignoreShow=true;tabContainer.addChild(this.centerPanel);this.centerTabContainer=tabContainer}return this.centerTabContainer},
onLastPanelRemoved:function(){if(this.centerPanel&&this.centerTabContainer){var tmpPos=dojo.doc.createElement("div");dojo.place(this.centerPanel.domNode,tmpPos);utils.destroyWidget(this.centerTabContainer);this.centerTabContainer=null;this.layoutCenter.containerNode.appendChild(this.centerPanel.domNode);this.resize()}},onPanelClosed:function(){if(this.centerTabContainer){var children=this.centerTabContainer.getChildren();var reRoot=false;if(children.length==1)reRoot=true;if(reRoot)this.onLastPanelRemoved()}},
prepareLayout:function(config){return this._prepareLayout(config)},_createPanel:function(panelOptions,dstContainer,cookiePrefix,region){if(panelOptions.AUTO_OPEN||panelOptions.AUTO_OPEN==null){var panel=this.getPanelManager().openUrl(this.config.START_PATH,dstContainer,this.config,cookiePrefix,region,this.defaultStore,this.defaultStoreOptions);panel.owner=this;if(this.initialReload){var thiz=this;setTimeout(function(){panel.onReload(panel);panel.onLayoutModeChanged(panelOptions.LAYOUT)},800)}return panel}},
onPanelsCreated:function(config){if(config.PANEL_OPTIONS.ALLOW_INFO_VIEW&&config.FILE_PANEL_OPTIONS_RIGHT&&config.FILE_PANEL_OPTIONS_RIGHT.AUTO_OPEN)this.openProperties(null,this.layoutRight)},createPanels:function(config){this._createPanels(config,false);this.onPanelsCreated(config)},onShowPanel:function(data){var panel=data?data?data.panel?data.panel:null:null:null;var showBreadcrumb=this.config.PANEL_OPTIONS!=null&&(this.config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===true||this.config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===
1);if(showBreadcrumb&&!this.breadCrumb&&panel&&panel.store){var trail=new BreadCrumb({store:panel.store,cssBaseClass:"fileIcon",className:"breadCrumb ui-state-default"},dojo.doc.createElement("div"));this.breadCrumb=trail;this.layoutTop.containerNode.appendChild(trail.domNode);dojo.place(trail.domNode,this.layoutTop.containerNode,"last");trail.startup();this.layoutTop.resize();var thiz=this;trail.onClick=function(item,widget){if(item&&trail.owner&&trail.owner.openItem)trail.owner.openItem(item)};
return trail}if(panel&&panel.getCurrentPathItem){var cPathItem=panel.getCurrentPathItem();if(cPathItem&&this.breadCrumb);}},onDidOpenItem:function(data){var item=data?data?data.item?data.item:null:null:null;if(item&&item.path&&item.directory===true){if(!this.breadCrumb)this.breadCrumb=this.createBreadCrumb(this.config,item._S);if(this.breadCrumb){if(this.breadCrumb.store!=item._S){this.breadCrumb.store=item._S;this.breadCrumb._clearTrail()}this.breadCrumb.setTrail(item.path);this.breadCrumb.owner=
data.panel}}},createBreadCrumb:function(config,store){if(this.breadCrumb)return;var breadCrumb=null;try{breadCrumb=new BreadCrumb({store:store,cssBaseClass:"fileIcon",className:"breadCrumb"},dojo.doc.createElement("div"))}catch(e){console.error("creating breadcrumb failed : "+e.message);return}this.layoutTop.containerNode.appendChild(breadCrumb.domNode);dojo.place(breadCrumb.domNode,this.layoutTop.containerNode,"last");breadCrumb.startup();this.layoutTop.resize();this.layoutMain.resize();var thiz=
this;breadCrumb.onClick=function(item,widget){if(item&&breadCrumb.owner&&breadCrumb.owner.openItem)breadCrumb.owner.openItem(item)};return breadCrumb},initWithConfig:function(config){var thiz=this;try{setTimeout(function(){thiz.prepareLayout(config)},5);setTimeout(function(){if(config&&config.ACTION_TOOLBAR_MODE!=null)try{thiz._createToolbar(config.ACTION_TOOLBAR_MODE,config,thiz.layoutTop)}catch(e){}thiz.createPanels(config);thiz.restorePermaLink(null)},10);setTimeout(function(){if(config.PANEL_OPTIONS!=
null&&(config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===true||config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===1));},50)}catch(e){debugger}},onItemSelected:function(evt,clear){if(!this.isMyBeanContext(evt))return;var item=evt.item;if(this.breadCrumb&&evt.item&&evt.callee&&evt.callee.delegate)if(item&&item.path&&item.directory===true){if(this.breadCrumb.store!=item._S){this.breadCrumb.store=item._S;this.breadCrumb._clearTrail()}if(item._S.isItemLoaded(item))this.breadCrumb.setTrail(item.path);this.breadCrumb.owner=
evt.callee.delegate}var owner=evt["owner"]||evt["view"];if(owner&&owner["hasItemActions"]!=null&&owner.hasItemActions()===true){var actions=owner.getItemActions();this.updateItemActions(owner.getItem(),owner,actions)}},onItemSelected2:function(evt){if(this.breadCrumb&&evt.item&&evt.callee&&evt.callee.delegate){var item=evt.item;if(item&&item.path&&item.directory===true){if(this.breadCrumb.store!=item._S){this.breadCrumb.store=item._S;this.breadCrumb._clearTrail()}if(item._S.isItemLoaded(item))this.breadCrumb.setTrail(item.path);
this.breadCrumb.owner=evt.callee.delegate}}},removeEmptyContainers:function(){utils.destroyIfEmpty(this.layoutRight);utils.destroyIfEmpty(this.layoutCenter);utils.destroyIfEmpty(this.layoutLeft);utils.destroyIfEmpty(this.layoutTop);utils.destroyIfEmpty(this.layoutBottom)},postMixInProperties:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.buttons=[];if(this.toolbar)this.toolbar.delegate=this;this.subscribe(types.EVENTS.ON_DID_OPEN_ITEM,this.onDidOpenItem,this);
this.subscribe(types.EVENTS.ON_SHOW_PANEL,this.onShowPanel,this);this.registerFileOperationEvents();this.registerBeanEvents();this._setupTranslations()},resize:function(){this.inherited(arguments);if(this.layoutMain)this._resizeContainer(this.layoutMain,"main");if(this.layoutLeft)this._resizeContainer(this.layoutLeft,"left");if(this.layoutTop)this._resizeContainer(this.layoutTop,"top");if(this.layoutCenter)this._resizeContainer(this.layoutCenter,"center");if(this.layoutRight)this._resizeContainer(this.layoutRight,
"right");if(this.layoutLeft)this._resizeContainer(this.layoutLeft,"left");if(this.layoutBottom)this._resizeContainer(this.layoutBottom,"bottom")},_createBottomTabContainer:function(){if(this.layoutBottomPlaceHolder){utils.destroyWidget(this.layoutBottomPlaceHolder);this.layoutBottomPlaceHolder=null}var tabContainer=utils.addWidget(dijit.layout.TabContainer,{tabStrip:true,tabPosition:"bottom",region:"bottom",attachParent:true,style:"width:100%"},null,this.layoutBottom.containerNode,true);tabContainer.startup();
return tabContainer},showLogPanel:function(){if(this.config.PANEL_OPTIONS!=null&&this.config.PANEL_OPTIONS.ALLOW_LOG_VIEW===false)return false;if(!this.bottomTabContainer){this.bottomTabContainer=this._createBottomTabContainer();this.logPanel=new dijit.layout.ContentPane({className:"bottomTabLog",title:"Log",style:"padding:0;background-color: transparent;"},dojo.doc.createElement("div"));this.bottomTabContainer.addChild(this.logPanel)}if(this.bottomTabContainer&&this.logPanel)this.bottomTabContainer.selectChild(this.logPanel);
var splitter=this.layoutBottom._splitterWidget;if(splitter)switch(splitter.state){case "full":break;case "collapsed":case "closed":splitter.set("state","full");break}return true}})})},"cbtree/extensions/TreeStyling":function(){define("cbtree/extensions/TreeStyling",["module","dojo/_base/lang","dojo/aspect","dojo/dom-class","dojo/dom-prop","dojo/dom-style","dijit/Tree","../errors/createError!../errors/CBTErrors.json"],function(module,lang,aspect,domClass,domProp,domStyle,Tree,createError){var CBTError=
createError(module.id);var C_WILDCARD="*";var _DSID="__DEFAULT";function isEmpty(o){for(var prop in o)if(o.hasOwnProperty(prop))return false;return true}function isObject(any){return any&&Object.prototype.toString.call(any)=="[object Object]"}Tree._TreeNode.extend({_applyClassAndStyle:function(item,attribute){var currClass,newClass,newStyle,className,styleName,nodeName;className=attribute+"Class";styleName=attribute+"Style";nodeName=attribute+"Node";currClass=domProp.get(this[nodeName],"className");
newClass=this.tree.get(className,this.item,this.isExpanded,this)||currClass;if(currClass!==newClass){domClass.replace(this[nodeName],newClass,currClass||"");this[className]=newClass}if(isEmpty(this[styleName]))newStyle=this.tree.get(styleName,this.item,this.isExpanded)||{};else newStyle=this[styleName];domStyle.set(this[nodeName],newStyle);this[styleName]=newStyle},_set_icon_Attr:function(icon){if(icon.iconClass){this._set_iconClass_Attr(icon.iconClass);this.icon=icon}},_set_iconClass_Attr:function(cssClass){if(cssClass&&
cssClass!==this.iconClass){domClass.replace(this.iconNode,cssClass,this.iconClass||"");this._applyClassAndStyle(this.item,"icon")}},_set_styling_Attr:function(newValue){this._updateItemClasses(this.item)},_setIconStyleAttr:function(style){this.iconStyle=style;this._applyClassAndStyle(this.item,"icon")},_setLabelStyleAttr:function(style){this.labelStyle=style;this._applyClassAndStyle(this.item,"label")},_setRowStyleAttr:function(style){this.rowStyle=style;this._applyClassAndStyle(this.item,"row")}});
Tree.extend({_hasStyling:true,_icon:null,_iconAttr:null,_itemStyleMap:{},_itemAttr:["icon","label","row"],_typeAttr:["Class","Style"],_dijitIconClasses:["dijitFolderOpened","dijitFolderClosed","dijitLeaf"],iconClass:"",_getBaseClass:function(nodeWidget){var classNames=nodeWidget?domProp.get(nodeWidget["iconNode"],"className"):"";var classes,index,i;var baseClass="";classes=lang.trim(classNames).split(/\s+/);if(classes[0]){for(i=0;i<this._dijitIconClasses.length;i++){index=classes.indexOf(this._dijitIconClasses[i]);
if(index!=-1)classes.splice(index,1)}baseClass=classes.toString()}return baseClass.replace(/,/g," ")},_getClassOrStyle:function(item,attr,type){var name=attr+type;if(this._itemAttr.indexOf(attr)!=-1&&this._typeAttr.indexOf(type)!=-1){var styling=this._getItemStyling(item);return styling[attr][attr+type]}throw new CBTError("InvalidProperty","getClassOrStyle");},_getHasTreeSytlingAttr:function(){return this._hasStyling},_getItemStyling:function(item){if(!this._connected)this._connectModel();if(lang.isObject(item)){var identity=
item?this.model.getIdentity(item):_DSID;var styling=this._itemStyleMap[identity];if(!styling){styling=this._getTreeStyling();if(this._icon)styling.icon=this._icon;this._itemStyleMap[identity]=styling}return styling}throw new CBTError("InvalidType","getItemStyling");},_getTreeStyling:function(){var treeStyle=this._itemStyleMap[_DSID]||{};if(isEmpty(treeStyle)){this._itemAttr.forEach(function(attr){treeStyle[attr]=this._initStyleElement(attr)},this);treeStyle.defStyle=true}return lang.clone(treeStyle)},
_initStyleElement:function(attr){var element={},type;this._typeAttr.forEach(function(type){element[attr+type]=null},this);return element},_setAllItems:function(args,onItem,onComplete,scope){var onItemArgs=args?args instanceof Array?args:this._object2Array(args):[];var identity;onItemArgs.unshift(null);for(identity in this._itemStyleMap){onItemArgs[0]=this._itemStyleMap[identity];onItem.apply(scope||this,Array.prototype.slice.call(onItemArgs,0))}if(onComplete)onComplete.apply(scope||this,Array.prototype.slice.call(onItemArgs,
1))},_setAttrClass:function(item,attr,cssClass,onComplete){if(typeof cssClass==="string"){if(this._itemAttr.indexOf(attr)!=-1){var classes=lang.trim(cssClass).split(/\s+/);if(classes[0])if(item){var styling=this._getItemStyling(item);styling[attr][attr+"Class"]=cssClass;styling[attr]["baseClass"]=classes[0];delete styling.defStyle;if(onComplete)onComplete.call(this,item,attr,cssClass,classes[0]);return styling[attr]}else this._setAllItems([attr,cssClass,classes[0]],function(styling,attr,cssClass,
baseClass){styling[attr][attr+"Class"]=cssClass;styling[attr]["baseClass"]=baseClass;delete styling.defStyle},onComplete,this);return null}throw new CBTError("InvalidProperty","setItemClass");}throw new CBTError("InavlidType","setItemClass");},_setAttrClassSet:function(item,attr,cssClass){if(item)this._setAttrClass(item,attr,cssClass,function(item,attr,cssClass,baseClass){this._setStyling(item,"_styling_",cssClass)});else this._setAttrClass(null,attr,cssClass,function(attr,cssClass,baseClass){this._setTreeNodes(this.rootNode,
{_styling_:cssClass})})},_setAttrStyle:function(item,attr,style,onComplete){if(lang.isObject(style)){if(this._itemAttr.indexOf(attr)!=-1){if(item){var styling=this._getItemStyling(item);styling[attr][attr+"Style"]=style;if(onComplete)onComplete.call(this,item,attr,style);return styling[attr]}else this._setAllItems([attr,style],function(styling,attr,style){styling[attr][attr+"Style"]=style},onComplete,this);return null}throw new CBTError("InvalidProperty","setItemStyle");}throw new CBTError("InvalidType",
"setItemStyle");},_setAttrStyleSet:function(item,attr,style){var request={};if(!this._connected)this._connectModel();if(item)this._setAttrStyle(item,attr,style,function(item,attr,style){this._setStyling(item,attr+"Style",style)});else this._setAttrStyle(null,attr,style,function(attr,style){request[attr+"Style"]=style;this._setTreeNodes(this.rootNode,request)})},_setStyling:function(item,attr,value){var identity=this.model.getIdentity(item),nodes=this._itemNodesMap[identity],request={};if(nodes){request[attr]=
value;nodes.forEach(function(node){node.set(request)},this)}},_getIconAttr:function(item){var styling=this._getItemStyling(item);if(styling.defStyle&&this._iconAttr){var icon=this.model.getIcon(item);if(icon){icon=this._setIconAttr(icon,item);return icon}}else return styling.icon},_getIconClassAttr:function(item,opened,nodeWidget){return this.getIconClass(item,opened,nodeWidget)},_getIconStyleAttr:function(item,opened){return this.getIconStyle(item,opened)},_getLabelClassAttr:function(item,opened,
nodeWidget){return this.getLabelClass(item,opened,nodeWidget)},_getLabelStyleAttr:function(item,opened){return this.getLabelStyle(item,opened)},_getRowClassAttr:function(item,opened,nodeWidget){return this.getRowClass(item,opened,nodeWidget)},_getRowStyleAttr:function(item,opened){return this.getRowStyle(item,opened)},_setIconAttr:function(icon,item){var newIcon=this._icon2Object(icon);if(newIcon)if(item){var styling=this._getItemStyling(item);styling.icon=newIcon;delete styling.defStyle;this._setStyling(item,
"_icon_",newIcon)}else{this._setAllItems([newIcon],function(styling,newIcon){styling.icon=newIcon;delete styling.defStyle},function(newIcon){this._setTreeNodes(this.rootNode,{_icon_:newIcon})},this);this._icon=newIcon}return newIcon},_setIconClassAttr:function(cssClass,item){return this._setAttrClassSet(item,"icon",cssClass)},_setIconStyleAttr:function(style,item){return this._setAttrStyleSet(item,"icon",style)},_setLabelClassAttr:function(cssClass,item){return this._setAttrClassSet(item,"label",
cssClass)},_setLabelStyleAttr:function(style,item){return this._setAttrStyleSet(item,"label",style)},_setRowClassAttr:function(cssClass,item){return this._setAttrClassSet(item,"row",cssClass)},_setRowStyleAttr:function(style,item){return this._setAttrStyleSet(item,"row",style)},_setValueToIconMapAttr:function(map){if(isObject(map)){var prop,value,table={};for(prop in map)if(isObject(map[prop])){table=map[prop];if(!isEmpty(table))for(value in table){if(table[value]==C_WILDCARD)table[value]=null}else{table[C_WILDCARD]=
null;map[prop]=table}}else if(map[prop]instanceof Array)if(map[prop].length){map[prop].forEach(function(value){table[value]=value},this);map[prop]=table}else{table[C_WILDCARD]=null;map[prop]=table}else if(map[prop]!="*")throw new CBTError("InvalidType","_setValueToIconMap","invalid property value type");}else map=null;this._valueToIconMap=map;return map},_modelIconUpdate:function(item,attr,icon){var styling=this._getItemStyling(item);var newIcon=this._icon2Object(icon);if(newIcon){styling.icon=newIcon;
delete styling.defStyle}return newIcon},_valueToIcon:function(item){if(item&&this._valueToIconMap){var prop,table,val,icon;for(prop in this._valueToIconMap){table=this._valueToIconMap[prop];if(val=lang.getObject(prop,false,item)){if(val in table)icon=table[val]||val;else if(C_WILDCARD in table)icon=table[C_WILDCARD]||val;if(icon){switch(typeof icon){case "string":case "object":break;case "function":icon=icon.call(this,item,prop,val);if(icon&&!isObject(icon)&&typeof icon!="string")throw new CBTError("InvalidResponse",
"_valueToIcon");break;default:icon=null}if(icon){icon=this._icon2Object(icon);icon=this._wcToValue(icon,val);return icon}}}}}},_wcToValue:function(obj,wcValue){if(!isObject(obj)){if(obj&&typeof obj.replace=="function")return obj.replace(/\*/g,wcValue);return obj}var key,newObj=obj.constructor();for(key in obj)newObj[key]=this._wcToValue(obj[key],wcValue);return newObj},getIconClass:function(item,opened,nodeWidget){var isExpandable,itemIcon,nodeItem=item;var iconClass,baseClass,newClass,indent;if(!nodeItem)if(this.rootNode){nodeItem=
this.rootNode.item;nodeWidget=this.rootNode;opened=this.rootNode.isExpanded}isExpandable=nodeItem?this.model.mayHaveChildren(nodeItem):false;if(this._valueToIconMap)itemIcon=this._valueToIcon(nodeItem);if(!itemIcon||!itemIcon.iconClass)itemIcon=this._getItemStyling(nodeItem)["icon"];if(!itemIcon||!itemIcon.iconClass){newClass=!nodeItem||isExpandable?opened?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf";baseClass=this._getBaseClass(nodeWidget);iconClass=baseClass?baseClass+" "+newClass:newClass;
return iconClass}iconClass=itemIcon.iconClass;baseClass=itemIcon.baseClass;indent=itemIcon.indent;if(!itemIcon.fixed){if(nodeWidget){newClass=baseClass+(isExpandable?opened?"Expanded":"Collapsed":"Terminal");if(indent!==undefined&&indent!==false)if(indent===true||indent>=nodeWidget.indent)newClass+=" "+newClass+"_"+nodeWidget.indent;iconClass+=" "+newClass}}else iconClass+=" "+itemIcon.fixed;return iconClass},getIconStyle:function(item,opened){var style=this._getClassOrStyle(item,"icon","Style");
var icon=this._valueToIconMap?this._valueToIcon(item):null;style=icon&&icon.iconStyle||style;return style},getLabelClass:function(item,opened){return this._getClassOrStyle(item,"label","Class")},getLabelStyle:function(item,opened){return this._getClassOrStyle(item,"label","Style")},getRowClass:function(item,opened){return this._getClassOrStyle(item,"row","Class")},getRowStyle:function(item,opened){return this._getClassOrStyle(item,"row","Style")},get:function(name){var names=this._getAttrNames(name),
getter=this[names.g];if(typeof getter==="function"){var result=getter.apply(this,Array.prototype.slice.call(arguments,1));return result}return this[name]},_connectModel:function(){var model=this.model;this._connected=true;this._itemStyleMap={};this._getItemStyling(null);if(model){if(model.iconAttr)if(!model.getIcon||typeof model.getIcon!="function"){0&&console.warn(new CBTError("MethodMissing","_connectModel","model property 'iconAttr' set but method getIcon() is missing."));this._iconAttr=null}else this._iconAttr=
this.model.iconAttr;if(this.mapEventToAttr&&typeof this.mapEventToAttr==="function")this.mapEventToAttr(null,this._iconAttr,"_icon_",this._modelIconUpdate);aspect.after(this.model,"onDelete",lang.hitch(this,"_onStyleDelete"),true)}},_icon2Object:function(icon){var attr,classes,newIcon;if(icon)if(!isObject(icon))if(typeof icon==="string"&&icon.length){classes=lang.trim(icon).split(/\s+/);if(classes[0]){newIcon=this._initStyleElement("icon");newIcon.baseClass=classes[0];newIcon.iconClass=icon;newIcon.indent=
true;return newIcon}}else throw new CBTError("InvalidType","_icon2Object","icon must be an object or string");else{if(icon.iconClass){classes=lang.trim(icon.iconClass).split(/\s+/);if(classes[0]){newIcon=this._initStyleElement("icon");newIcon.baseClass=classes[0];newIcon.indent=true;for(attr in icon)newIcon[attr]=icon[attr];return newIcon}}throw new CBTError("ParameterMissing","_icon2Object","required property 'iconClass' is missing or empty");}return null},_object2Array:function(args){var newArray=
[],attr;if(!(args instanceof Array)){if(lang.isObject(args))for(attr in args)newArray.push(args[attr]);else newArray.push(args);return newArray}return args},_onStyleDelete:function(item){var identity=this.model.getIdentity(item);delete this._itemStyleMap[identity]},_setTreeNodes:function(node,request){if(node)if(lang.isObject(request)){node.set(request);node.getChildren().forEach(function(child){this._setTreeNodes(child,request)},this)}}})})},"xfile/manager/FileManager":function(){define("xfile/manager/FileManager",
["dojo/_base/declare","dojo/_base/lang","xide/manager/ServerActionBase","dojox/rpc/Service","xide/types","xide/utils","dojox/encoding/digests/SHA1","./RPCService"],function(declare,lang,ServerActionBase,Service,types,utils,SHA1,RPCService){return declare("xfile.manager.FileManager",[ServerActionBase],{_uploadXHR:null,store:null,config:null,filesToUpload:null,serviceUrl:"index.php",serviceClass:"XCOM_Directory_Service",settingsStore:null,init:function(){this.inherited(arguments);this.subscribe(types.EVENTS.ON_FILE_CONTENT_CHANGED)},
buildPath:function(mount,path){},getImageUrl:function(src,preventCache,extraParams){var thiz=this;preventCache=location.href.indexOf("noImageCache")!=-1||preventCache===true||src.dirty===true;var downloadUrl=this.config.FILE_SERVICE;var path=utils.buildPath(src.mount,src.path);var serviceClass=this.ctx.getFileManager().serviceClass||"XCOM_Directory_Service";if(downloadUrl.indexOf("?")!=-1)downloadUrl+="\x26";else downloadUrl+="?";downloadUrl+="service\x3d"+serviceClass+".get\x26path\x3d"+path+"\x26callback\x3dasdf";
if(this.config.DOWNLOAD_URL!=null){downloadUrl=""+this.config.DOWNLOAD_URL;downloadUrl+="\x26path\x3d"+path+"\x26callback\x3dasdf"}downloadUrl+="\x26raw\x3dhtml";downloadUrl+="\x26attachment\x3d0";downloadUrl+="\x26send\x3d1";var aParams={"service":serviceClass+".get","path":path,"callback":"asdf","raw":"html","attachment":"0","send":"1"};if(extraParams)aParams=lang.mixin(aParams,extraParams);var pStr=dojo.toJson(aParams);var signature=SHA1._hmac(pStr,this.config.RPC_PARAMS.rpcSignatureToken,1);downloadUrl+=
"\x26"+this.config.RPC_PARAMS.rpcUserField+"\x3d"+this.config.RPC_PARAMS.rpcUserValue;downloadUrl+="\x26"+this.config.RPC_PARAMS.rpcSignatureField+"\x3d"+signature;if(preventCache)downloadUrl+="\x26time\x3d"+(new Date).getTime();if(extraParams)for(var p in extraParams)downloadUrl+="\x26"+p+"\x3d"+extraParams[p];return downloadUrl},onFileUploadFailed:function(item){var thiz=this;var struct={store:thiz.store,dst:{path:item.dstDir},operation:types.OPERATION.COMPRESS};this.publish(types.EVENTS.BEFORE_STORE_CHANGE,
struct,item.callee);setTimeout(function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,item.callee)},500);thiz.publish(types.EVENTS.UPLOAD_FAILED,{item:item},thiz)},onFileUploaded:function(item){var thiz=this;var struct={store:thiz.store,dst:{path:item.dstDir},operation:types.OPERATION.COMPRESS};this.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,item.callee);setTimeout(function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,item.callee);var struct1={message:""+item.name+" uploaded to "+item.dstDir};
thiz.publish(types.EVENTS.STATUS,struct1,thiz);var struct2={item:item};thiz.publish(types.EVENTS.UPLOAD_FINISH,struct2,thiz)},500)},getUploadUrl:function(){var url=""+this.serviceUrl;url=url.replace("view\x3drpc","view\x3dupload");url=url.replace("../../../../","./");url+="\x26service\x3d";url+=this.serviceClass;url+=".put\x26callback\x3dnada";return url},initXHRUpload:function(item,autoRename,dstDir,mount){var xhr=new XMLHttpRequest;var uploadUrl=this.getUploadUrl();var uri=""+uploadUrl;uri+="\x26mount\x3d"+
encodeURIComponent(mount);uri+="\x26dstDir\x3d"+encodeURIComponent(dstDir);var thiz=this;var upload=xhr.upload;upload.addEventListener("progress",function(e){if(!e.lengthComputable)thiz.onFileUploaded(item);else{var struct={item:item,progress:e};item.isLoading=true;thiz.publish(types.EVENTS.UPLOAD_PROGRESS,struct,this)}}.bind(this),false);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.responseText&&xhr.responseText!="OK"){var error=utils.getJson(xhr.responseText);if(error&&error.result&&
lang.isArray(error.result)&&error.result.length>0){for(var i=0;i<error.result.length;i++)thiz.publish(types.EVENTS.ERROR,"Error uploading : "+item.name+" "+error.result[i],thiz);thiz.onFileUploadFailed(item);thiz.submitNext();return}if(error&&error.error){thiz.publish(types.EVENTS.ERROR,"Error uploading : "+item.name+" "+error.error.message,thiz);thiz.onFileUploadFailed(item)}}else;thiz.onFileUploaded(item);thiz.submitNext()}}.bind(this);upload.onerror=function(){thiz.publish(types.EVENTS.ERROR,"Error uploading : "+
item.name,thiz)};xhr.open("POST",uri,true);return xhr},hasLoadingItem:function(){for(var i=0;i<this.filesToUpload.length;i++)if(this.filesToUpload[i].status=="loading")return this.filesToUpload[i];return false},upload:function(files,mount,path,callee){for(var i=0;i<files.length;i++){this.filesToUpload.push(files[i]);files[i]["dstDir"]=""+path;files[i]["mount"]=""+mount;files[i]["callee"]=callee}this.submit()},submit:function(){this.submitNext()},sendFileUsingFormData:function(xhr,file){var formData=
new FormData;formData.append("userfile_0",file);xhr.send(formData)},sendFileMultipart:function(item){var auto_rename=false;item.status="loading";var xhr=this.initXHRUpload(item,auto_rename?"auto_rename\x3dtrue":"",item["dstDir"],item["mount"]);var file=item.file;var struct={item:item,name:item.name};this.publish(types.EVENTS.UPLOAD_BEGIN,struct,this);if(window.FormData)this.sendFileUsingFormData(xhr,item);else if(window.FileReader){var fileReader=new FileReader;fileReader.onload=function(e){this.xhrSendAsBinary(xhr,
file.name,e.target.result,item)}.bind(this);fileReader.readAsBinaryString(file)}else if(file.getAsBinary){window.testFile=file;var data=file.getAsBinary();this.xhrSendAsBinary(xhr,file.name,data,item)}},submitNext:function(){var item=this.getNextUploadItem();if(item)this.sendFileMultipart(item);else if(this.hasLoadingItem());},getNextUploadItem:function(){for(var i=0;i<this.filesToUpload.length;i++)if(this.filesToUpload[i].status==null)return this.filesToUpload[i];return false},onError:function(err){if(err)if(err.code===
1){if(err.message&&lang.isArray(err.message)){this.publish(types.EVENTS.ERROR,err.message.join("\x3cbr/\x3e"),this);return}}else if(err.code===0)this.publish(types.EVENTS.STATUS,"Ok",this);var struct={error:err};this.publish(types.EVENTS.ERROR,struct,this)},addError:function(def){var thiz=this;var _cb=function(){thiz.onError()};def.addCallback(_cb)},downloadItem:function(src,readyCB){return this.callMethod(types.OPERATION.DOWNLOAD,[src],readyCB,true)},mkdir:function(mount,path,readyCB){return this.callMethod(types.OPERATION.NEW_DIRECTORY,
[mount,path],readyCB,true)},mkfile:function(mount,path,content,readyCB){return this.callMethod(types.OPERATION.NEW_FILE,[mount,path],readyCB,true)},downloadTo:function(url,mount,dst,readyCB,dstItem){0&&console.log("download "+url+" with mount "+mount+" to "+dst);if(dstItem){var thiz=this;var _cb=function(result){var _failed=false;if(result&&result.error&&result.error.code==1)_failed=true;thiz.publish(types.EVENTS.ON_DOWNLOAD_TO_END,{terminatorItem:dstItem,failed:_failed},this);readyCB(arguments)};
thiz.publish(types.EVENTS.ON_DOWNLOAD_TO_BEGIN,{dst:dstItem,url:url,items:[dstItem]},this)}else 0&&console.log("download from remote url have no dest item");return this.callMethod(types.OPERATION.DOWNLOAD_TO,[url,mount,dst],_cb,true)},find:function(mount,conf,readyCB){try{return this.callMethod(types.OPERATION.FIND,[mount,conf],readyCB,true)}catch(e){debugger}},copyItem:function(src,dst,options,readyCB){var thiz=this;var _cb=function(result){var _failed=false;if(result&&result.error&&result.error.code==
1)_failed=true;thiz.publish(types.EVENTS.ON_COPY_END,{terminatorItem:src,failed:_failed,items:src},this);readyCB(arguments)};thiz.publish(types.EVENTS.ON_COPY_BEGIN,{src:src,dst:dst},this);var res=this.callMethod(types.OPERATION.COPY,[src,dst,options,false],_cb,true);if(!res)thiz.publish(types.EVENTS.ON_COPY_END,{terminatorItem:src},this);return res},rename:function(mount,src,dst,readyCB){return this.callMethod(types.OPERATION.RENAME,[mount,src,dst],readyCB,true)},moveItem:function(src,dst,include,
exclude,mode,readyCB){var thiz=this;var _cb=function(result){var _failed=false;if(result&&result.error&&result.error.code==1)_failed=true;thiz.publish(types.EVENTS.ON_MOVE_END,{terminatorItem:src,failed:_failed});readyCB(arguments)};this.publish(types.EVENTS.ON_MOVE_BEGIN,{src:src,dst:dst},this);return this.callMethod(types.OPERATION.MOVE,[src,dst,include,exclude,mode],_cb,true)},onErrors:function(res){},deleteItems:function(selection,options,readyCB){var thiz=this;var _cb=function(result){var _failed=
false;if(result&&result.error&&result.error.code==1)_failed=true;thiz.publish(types.EVENTS.ON_DELETE_END,{terminatorItem:selection,failed:_failed},this);readyCB(arguments)};this.publish(types.EVENTS.ON_DELETE_BEGIN,{items:selection},this);return this.callMethod(types.OPERATION.DELETE,[selection,options,true],_cb,true)},compressItem:function(mount,src,type,readyCB){var thiz=this;var _cb=function(result){var _failed=false;if(result&&result.error&&result.error.code==1)_failed=true;thiz.publish(types.EVENTS.ON_COMPRESS_END,
{terminatorItem:src,failed:_failed});readyCB(arguments)};this.publish(types.EVENTS.ON_COMPRESS_BEGIN,{src:src},this);return this.callMethod(types.OPERATION.COMPRESS,[mount,src,type],_cb,true)},getContent:function(mount,path,readyCB,emit){var _path=utils.buildPath(mount,path);0&&console.log("getcontent "+_path);return this.callMethod(types.OPERATION.GET_CONTENT,[_path,false,false],readyCB,emit!==false)},setContent:function(mount,path,content,readyCB){this.publish(types.EVENTS.ON_CHANGED_CONTENT,{"mount":mount,
"path":path,"content":content});return this.callMethod(types.OPERATION.SET_CONTENT,[mount,path,content],readyCB,true)},onMessages:function(res){var events=utils.getJson(res.events);if(events&&lang.isArray(events))for(var i=0;i<events.length;i++){var struct={path:events[i].relPath};lang.mixin(struct,events[i]);this.publish(events[i].clientEvent,struct,this)}},callMethodEx:function(serverClassIn,method,args,readyCB,omitError){var serviceClass=serverClassIn||this.serviceClass;var thiz=this;if(this.serviceObject[serviceClass][method]==
null){if(omitError===true)this.onError({code:1,message:["Sorry, server doesnt know "+method]});return null}var params={};params=lang.mixin(params,this.config.RPC_PARAMS.rpcFixedParams);params[this.config.RPC_PARAMS.rpcUserField]=this.config.RPC_PARAMS.rpcUserValue;this.serviceObject.extraArgs=params;this.serviceObject.signatureField=this.config.RPC_PARAMS.rpcSignatureField;this.serviceObject.signatureToken=this.config.RPC_PARAMS.rpcSignatureToken;this.serviceObject[serviceClass][method](args).then(function(res){try{if(readyCB)readyCB(res)}catch(e){console.error("bad news : callback for method "+
method+" caused a crash in service class "+serviceClass)}if(res&&res.error&&res.error.code==3)setTimeout(function(){thiz.onMessages(res.error)},50);if(res&&res.error&&res.error&&res.error.code!=0){thiz.onError(res.error);return}var struct={message:"Ok!"};thiz.publish(types.EVENTS.STATUS,struct,this)},function(err){thiz.onError(err)})},callMethod:function(method,args,readyCB,omitError){var serviceClass=this.serviceClass;try{var thiz=this;if(this.serviceObject[serviceClass][method]==null){if(omitError===
true)this.onError({code:1,message:["Sorry, server doesnt know "+method]});return null}var params={};params=lang.mixin(params,this.config.RPC_PARAMS.rpcFixedParams);params[this.config.RPC_PARAMS.rpcUserField]=this.config.RPC_PARAMS.rpcUserValue;this.serviceObject.extraArgs=params;this.serviceObject.signatureField=this.config.RPC_PARAMS.rpcSignatureField;this.serviceObject.signatureToken=this.config.RPC_PARAMS.rpcSignatureToken;this.serviceObject[this.serviceClass][method](args).then(function(res){try{if(readyCB)readyCB(res)}catch(e){console.error("crashed in "+
method);0&&console.dir(e)}if(res&&res.error&&res.error.code==3)setTimeout(function(){thiz.onMessages(res.error)},50);if(res&&res.error&&res.error&&res.error.code==1){thiz.onError(res.error);return}if(omitError!==false){var struct={message:"Ok!"};thiz.publish(types.EVENTS.STATUS,struct,this)}},function(err){thiz.onError(err)})}catch(e){console.error("crash! "+e);thiz.onError(e)}},_initService:function(){this.filesToUpload=[];if(!this.serviceObject){this.serviceObject=new RPCService(this.serviceUrl);
this.serviceObject.config=this.config}},constructor:function(){if(typeof xFileConfig!="undefined")if(xFileConfig.FILE_SERVICE);}})})},"dojo/request/watch":function(){define(["./util","../errors/RequestTimeoutError","../errors/CancelError","../_base/array","../_base/window","../has!host-browser?dom-addeventlistener?:../on:"],function(util,RequestTimeoutError,CancelError,array,win,on){var _inFlightIntvl=null,_inFlight=[];function watchInFlight(){var now=+new Date;for(var i=0,dfd;i<_inFlight.length&&
(dfd=_inFlight[i]);i++){var response=dfd.response,options=response.options;if(dfd.isCanceled&&dfd.isCanceled()||dfd.isValid&&!dfd.isValid(response)){_inFlight.splice(i--,1);watch._onAction&&watch._onAction()}else if(dfd.isReady&&dfd.isReady(response)){_inFlight.splice(i--,1);dfd.handleResponse(response);watch._onAction&&watch._onAction()}else if(dfd.startTime)if(dfd.startTime+(options.timeout||0)<now){_inFlight.splice(i--,1);dfd.cancel(new RequestTimeoutError("Timeout exceeded",response));watch._onAction&&
watch._onAction()}}watch._onInFlight&&watch._onInFlight(dfd);if(!_inFlight.length){clearInterval(_inFlightIntvl);_inFlightIntvl=null}}function watch(dfd){if(dfd.response.options.timeout)dfd.startTime=+new Date;if(dfd.isFulfilled())return;_inFlight.push(dfd);if(!_inFlightIntvl)_inFlightIntvl=setInterval(watchInFlight,50);if(dfd.response.options.sync)watchInFlight()}watch.cancelAll=function cancelAll(){try{array.forEach(_inFlight,function(dfd){try{dfd.cancel(new CancelError("All requests canceled."))}catch(e){}})}catch(e){}};
if(win&&on&&win.doc.attachEvent)on(win.global,"unload",function(){watch.cancelAll()});return watch})},"xide/manager/Context":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","xide/manager/ContextBase","xide/manager/Application","xide/manager/SettingsManager","xfile/manager/PanelManager","xide/manager/ClipboardManager","xide/manager/PluginManager","xfile/manager/ScriptManager","xfile/manager/FileManager","xfile/manager/MountManager","xlog/manager/LogManager","xide/factory",
"xide/types","xide/utils","xide/mixins/EventedMixin","xide/mixins/ReloadMixin","xide/client/WebSocket","require","xide/views/BeanActionHandler"],function(declare,lang,array,ContextBase,Application,SettingsManager,PanelManager,ClipboardManager,PluginManager,ScriptManager,FileManager,MountManager,LogManager,factory,types,utils,EventedMixin,ReloadMixin,WebSocket,require,BeanActionHandler){return declare("xide.manager.Context",[ContextBase,EventedMixin,ReloadMixin,BeanActionHandler],{application:null,
workflowManager:null,contentManager:null,templateManager:null,tooltipManager:null,dataSourceManager:null,scriptManager:null,fileManager:null,resourceManager:null,settingsManager:null,notificationManager:null,panelManager:null,serviceObject:null,clipboardManager:null,pluginManager:null,logManager:null,config:null,managers:null,namespace:"xide.manager.",defaultNamespace:"xide.manager.",vfsMounts:null,xideServiceClient:null,widgetManager:null,beanContextName:"xideMainContext",onApplicationReady:function(){},
onXIDEMessage:function(data){this.publish(data.event,data);var thiz=this;if(data.event===types.EVENTS.ON_FILE_CHANGED){var path=utils.replaceAll("\\","/",data.data.path);path=utils.replaceAll("//","/",data.data.path);0&&console.log("on file changed : "+path);if(path==null||path.indexOf==null){console.error("on file changed : have no path, aborting");return}if(path.indexOf(".css")!=-1){var newEvt={path:path};this.onCSSChanged(newEvt)}var modulePath=data.data.modulePath;if(modulePath){modulePath=modulePath.replace(".js",
"");var _re=require;var module=null;try{module=_re(modulePath)}catch(e){}if(module){modulePath=utils.replaceAll(".","/",modulePath);setTimeout(function(){thiz._reloadModule(modulePath,true)},500);return}}var _start="client/lib/";if(path.indexOf("maqetta/app")!=-1)_start="maqetta/app/";if(path.indexOf(_start)!=-1){var libPath=path.substr(path.indexOf(_start)+_start.length,path.length);if(libPath.indexOf("xide")!=-1){path=libPath;0&&console.log("       # : "+path);var newEvt={mount:"xidejs",path:path};
this.onDidChangeFileContent(newEvt)}if(libPath.indexOf("xblox/")!=-1){path=libPath;var newEvt={mount:"xblox",path:path};this.onDidChangeFileContent(newEvt)}if(libPath.indexOf("xfile/")!=-1){path=libPath;var newEvt={mount:"xfile",path:path};this.onDidChangeFileContent(newEvt)}if(libPath.indexOf("xcf/")!=-1){path=libPath;var newEvt={mount:"cfjs",path:path};this.onDidChangeFileContent(newEvt)}if(libPath.indexOf("xcfux/")!=-1){path=libPath;var newEvt={mount:"xcfux",path:path};this.onDidChangeFileContent(newEvt)}if(libPath.indexOf("xwire/")!=
-1){path=libPath;var newEvt={mount:"xwire",path:path};this.onDidChangeFileContent(newEvt)}if(libPath.indexOf("xlog/")!=-1){path=libPath;var newEvt={mount:"xlog",path:path};this.onDidChangeFileContent(newEvt)}}_start="node_modules";if(path.indexOf(_start)!=-1){var libPath=path.substr(path.indexOf(_start)+_start.length,path.length);if(path.indexOf("xcfnode")!=-1){path=libPath;var newEvt={mount:"xcfnode",path:path.replace("/xcfnode","xcfnode")};this.onDidChangeFileContent(newEvt)}}}},onNodeServiceStoreReady:function(evt){if(this.xideServiceClient)this.xideServiceClient.destroy();
this.xideServiceClient=null;var thiz=this;var store=evt.store;this.deviceServerClient=factory.createClientWithStore(store,"XIDE Server",{delegate:{onServerResponse:function(e){thiz.onXIDEMessage(dojo.fromJson(e.data))}}})},mergeFunctions:function(target,source){for(var i in source){var o=source[i];if(lang.isFunction(source[i]))target[i]=source[i]}},onModuleReloaded:function(evt){this.inherited(arguments);var modulePath=evt.module;var newModule=evt.newModule;for(var i=0;i<this.managers.length;i++){var manager=
this.managers[i];if(newModule.prototype&&newModule.prototype.declaredClass&&newModule.prototype.declaredClass===manager.declaredClass){0&&console.log("   did merge new functions to "+manager.declaredClass);this.mergeFunctions(manager,newModule.prototype);if(manager.onReloaded)manager.onReloaded(newModule);break}}},_reloadModule:function(module,reload){require.undef(module);var thiz=this;if(reload)setTimeout(function(){require([module],function(moduleLoaded){if(lang.isString(moduleLoaded)){console.error("module reloaded failed : "+
moduleLoaded+" for module : "+module);return}0&&console.log("did - re-require module : "+module);moduleLoaded.modulePath=module;var obj=lang.getObject(utils.replaceAll("/",".",module));if(obj)thiz.mergeFunctions(obj.prototype,moduleLoaded.prototype);thiz.publish(types.EVENTS.ON_MODULE_RELOADED,{module:module,newModule:moduleLoaded})})},500)},onCSSChanged:function(evt){if(evt["didProcess"])return;evt["didProcess"]=true;var path=evt.path;path=utils.replaceAll("//","/",path);path=path.replace("/PMaster/",
"");var reloadFn=window["xappOnStyleSheetChanged"];if(reloadFn)reloadFn(path);else;},onDidChangeFileContent:function(evt){if(evt["didProcess"])return;evt["didProcess"]=true;if(!this.vfsMounts)return;if(!evt.path)return;var path=evt.path;if(path.indexOf(".css")!=-1){this.onCSSChanged(evt);return}if(path.indexOf("resources")!=-1||path.indexOf("meta")!=-1||path.indexOf(".js")==-1)return;var mount=evt.mount.replace("/","");var module=null;if(!this.vfsMounts[mount])return;module=""+evt.path;module=module.replace("./",
"");module=module.replace("/",".");module=module.replace(".js","");module=utils.replaceAll(".","/",module);var thiz=this;setTimeout(function(){thiz._reloadModule(module,true)},500);console.error("reload module : "+module)},getPluginManager:function(){return this.pluginManager},getClipboardManager:function(){return this.clipboardManager},getService:function(){return this.serviceObject},getNotificationManager:function(){return this.notificationManager},getSettingsManager:function(){return this.settingsManager},
getFileManager:function(){return this.fileManager},getResourceManager:function(){return this.resourceManager},getScriptManager:function(){return this.scriptManager},getDataSourceManager:function(){return this.dataSourceManager},getTooltipManager:function(){return this.tooltipManager},getTemplateManager:function(){return this.templateManager},getMetaDataStore:function(){return this.getApplication().getMetaDataStore()},getStyleManager:function(){return this.styleManager},getDNDManager:function(){return this.dndManager},
getSimulator:function(){return this.simulator},setSimulator:function(sim){this.simulator=sim},getWidgetCacheManager:function(){return this.widgetCacheManager},getWidgetManager:function(){return this.widgetManager},getContentManager:function(){return this.contentManager},getLogManager:function(){return this.logManager},getStoreDelegate:function(){return this.storeDelegate},getWorkflowManager:function(){return this.workflowManager},getApplication:function(){return this.application},getSession:function(){return this.session},
initManagers:function(){this.initBeanActionHandler();if(this.settingsManager)this.settingsManager.init();if(this.storeDelegate)this.storeDelegate.appService=this.settingsManager;if(this.scriptManager)this.scriptManager.init();if(this.settingsManager){this.settingsManager.serviceObject=this.serviceObject;this.settingsManager.ctx=this;this.settingsManager.config=this.config;this.settingsManager.init()}if(this.storeDelegate)this.storeDelegate.serviceObject=this.serviceObject;if(this.clipboardManager)this.clipboardManager.init()},
constructManagers:function(){this.inherited(arguments);this.scriptManager=this.createManager("ScriptManager");this.clipboardManager=this.createManager(ClipboardManager)},constructor:function(config){this.config=config;if(navigator.appName=="Netscape")var language=navigator.language;else var language=navigator.browserLanguage;this.language="en";this.managers=[];this.subscribe(types.EVENTS.ON_CHANGED_CONTENT,this.onDidChangeFileContent);this.subscribe(types.EVENTS.ON_MODULE_RELOADED,this.onModuleReloaded);
this.subscribe(types.EVENTS.ON_NODE_SERVICE_STORE_READY,this.onNodeServiceStoreReady);this.initReload();this.vfsMounts={cfjs:{modulePath:"xcf"},xidejs:{modulePath:"xide"},xcfnode:{modulePath:"xcfnode"},xblox:{modulePath:"xblox"},xfile:{modulePath:"xfile"},xcfux:{modulePath:"xcfux"},xwire:{modulePath:"xwire"},xlog:{modulePath:"xlog"}}}})})},"xfile/factory":function(){define("xfile/factory",["dojo/_base/declare"],function(declare){return declare("xfile.factory",null,{})})},"dojox/math/BigInteger":function(){define("dojox/math/BigInteger",
["dojo","dojox"],function(dojo,dojox){dojo.getObject("math.BigInteger",true,dojox);dojo.experimental("dojox.math.BigInteger");var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&16777215)==15715070;function BigInteger(a,b,c){if(a!=null)if("number"==typeof a)this._fromNumber(a,b,c);else if(!b&&"string"!=typeof a)this._fromString(a,256);else this._fromString(a,b)}function nbi(){return new BigInteger(null)}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864);w[j++]=
v&67108863}return c}function am2(i,x,w,j,c,n){var xl=x&32767,xh=x>>15;while(--n>=0){var l=this[i]&32767;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&32767)<<15)+w[j]+(c&1073741823);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&1073741823}return c}function am3(i,x,w,j,c,n){var xl=x&16383,xh=x>>14;while(--n>=0){var l=this[i]&16383;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&16383)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&268435455}return c}if(j_lm&&navigator.appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=
am2;dbits=30}else if(j_lm&&navigator.appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}var BI_FP=52;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=[];var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return c==null?-1:
c}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t;r.s=this.s}function bnpFromInt(x){this.t=1;this.s=x<0?-1:0;if(x>0)this[0]=x;else if(x<-1)this[0]=x+_DV;else this.t=0}function nbv(i){var r=nbi();r._fromInt(i);return r}function bnpFromString(s,b){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else{this._fromRadix(s,b);return}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=k==8?s[i]&255:intAt(s,
i);if(x<0){if(s.charAt(i)=="-")mi=true;continue}mi=false;if(sh==0)this[this.t++]=x;else if(sh+k>this._DB){this[this.t-1]|=(x&(1<<this._DB-sh)-1)<<sh;this[this.t++]=x>>this._DB-sh}else this[this.t-1]|=x<<sh;sh+=k;if(sh>=this._DB)sh-=this._DB}if(k==8&&(s[0]&128)!=0){this.s=-1;if(sh>0)this[this.t-1]|=(1<<this._DB-sh)-1<<sh}this._clamp();if(mi)BigInteger.ZERO._subTo(this,this)}function bnpClamp(){var c=this.s&this._DM;while(this.t>0&&this[this.t-1]==c)--this.t}function bnToString(b){if(this.s<0)return"-"+
this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this._toRadix(b);var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this._DB-i*this._DB%k;if(i-- >0){if(p<this._DB&&(d=this[i]>>p)>0){m=true;r=int2char(d)}while(i>=0){if(p<k){d=(this[i]&(1<<p)-1)<<k-p;d|=this[--i]>>(p+=this._DB-k)}else{d=this[i]>>(p-=k)&km;if(p<=0){p+=this._DB;--i}}if(d>0)m=true;if(m)r+=int2char(d)}}return m?r:"0"}function bnNegate(){var r=nbi();BigInteger.ZERO._subTo(this,
r);return r}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(r)return r;var i=this.t;r=i-a.t;if(r)return r;while(--i>=0)if(r=this[i]-a[i])return r;return 0}function nbits(x){var r=1,t;if(t=x>>>16){x=t;r+=16}if(t=x>>8){x=t;r+=8}if(t=x>>4){x=t;r+=4}if(t=x>>2){x=t;r+=2}if(t=x>>1){x=t;r+=1}return r}function bnBitLength(){if(this.t<=0)return 0;return this._DB*(this.t-1)+nbits(this[this.t-1]^this.s&this._DM)}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=
0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n;r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0);r.s=this.s}function bnpLShiftTo(n,r){var bs=n%this._DB;var cbs=this._DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this._DB),c=this.s<<bs&this._DM,i;for(i=this.t-1;i>=0;--i){r[i+ds+1]=this[i]>>cbs|c;c=(this[i]&bm)<<bs}for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r._clamp()}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/
this._DB);if(ds>=this.t){r.t=0;return}var bs=n%this._DB;var cbs=this._DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs}if(bs>0)r[this.t-ds-1]|=(this.s&bm)<<cbs;r.t=this.t-ds;r._clamp()}function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this._DM;c>>=this._DB}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this._DM;c>>=this._DB}c+=this.s}else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=
c&this._DM;c>>=this._DB}c-=a.s}r.s=c<0?-1:0;if(c<-1)r[i++]=this._DV+c;else if(c>0)r[i++]=c;r.t=i;r._clamp()}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0;r._clamp();if(this.s!=a.s)BigInteger.ZERO._subTo(r,r)}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x._DV){r[i+
x.t]-=x._DV;r[i+x.t+1]=1}}if(r.t>0)r[r.t-1]+=x.am(i,x[i],r,2*i,0,1);r.s=0;r._clamp()}function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0)return;var pt=this.abs();if(pt.t<pm.t){if(q!=null)q._fromInt(0);if(r!=null)this._copyTo(r);return}if(r==null)r=nbi();var y=nbi(),ts=this.s,ms=m.s;var nsh=this._DB-nbits(pm[pm.t-1]);if(nsh>0){pm._lShiftTo(nsh,y);pt._lShiftTo(nsh,r)}else{pm._copyTo(y);pt._copyTo(r)}var ys=y.t;var y0=y[ys-1];if(y0==0)return;var yt=y0*(1<<this._F1)+(ys>1?y[ys-2]>>this._F2:0);var d1=
this._FV/yt,d2=(1<<this._F1)/yt,e=1<<this._F2;var i=r.t,j=i-ys,t=q==null?nbi():q;y._dlShiftTo(j,t);if(r.compareTo(t)>=0){r[r.t++]=1;r._subTo(t,r)}BigInteger.ONE._dlShiftTo(ys,t);t._subTo(y,y);while(y.t<ys)y[y.t++]=0;while(--j>=0){var qd=r[--i]==y0?this._DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y._dlShiftTo(j,t);r._subTo(t,r);while(r[i]<--qd)r._subTo(t,r)}}if(q!=null){r._drShiftTo(ys,q);if(ts!=ms)BigInteger.ZERO._subTo(q,q)}r.t=ys;r._clamp();if(nsh>0)r._rShiftTo(nsh,
r);if(ts<0)BigInteger.ZERO._subTo(r,r)}function bnMod(a){var r=nbi();this.abs()._divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a._subTo(r,r);return r}function Classic(m){this.m=m}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);else return x}function cRevert(x){return x}function cReduce(x){x._divRemTo(this.m,null,x)}function cMulTo(x,y,r){x._multiplyTo(y,r);this.reduce(r)}function cSqrTo(x,r){x._squareTo(r);this.reduce(r)}dojo.extend(Classic,{convert:cConvert,
revert:cRevert,reduce:cReduce,mulTo:cMulTo,sqrTo:cSqrTo});function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if((x&1)==0)return 0;var y=x&3;y=y*(2-(x&15)*y)&15;y=y*(2-(x&255)*y)&255;y=y*(2-((x&65535)*y&65535))&65535;y=y*(2-x*y%this._DV)%this._DV;return y>0?this._DV-y:-y}function Montgomery(m){this.m=m;this.mp=m._invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<m._DB-15)-1;this.mt2=2*m.t}function montConvert(x){var r=nbi();x.abs()._dlShiftTo(this.m.t,r);r._divRemTo(this.m,
null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m._subTo(r,r);return r}function montRevert(x){var r=nbi();x._copyTo(r);this.reduce(r);return r}function montReduce(x){while(x.t<=this.mt2)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x[i]&32767;var u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x._DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x._DV){x[j]-=x._DV;x[++j]++}}x._clamp();x._drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0)x._subTo(this.m,x)}function montSqrTo(x,
r){x._squareTo(r);this.reduce(r)}function montMulTo(x,y,r){x._multiplyTo(y,r);this.reduce(r)}dojo.extend(Montgomery,{convert:montConvert,revert:montRevert,reduce:montReduce,mulTo:montMulTo,sqrTo:montSqrTo});function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(e,z){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g._copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&1<<i)>0)z.mulTo(r2,g,r);else{var t=r;r=r2;r2=t}}return z.revert(r)}function bnModPowInt(e,
m){var z;if(e<256||m._isEven())z=new Classic(m);else z=new Montgomery(m);return this._exp(e,z)}dojo.extend(BigInteger,{_DB:dbits,_DM:(1<<dbits)-1,_DV:1<<dbits,_FV:Math.pow(2,BI_FP),_F1:BI_FP-dbits,_F2:2*dbits-BI_FP,_copyTo:bnpCopyTo,_fromInt:bnpFromInt,_fromString:bnpFromString,_clamp:bnpClamp,_dlShiftTo:bnpDLShiftTo,_drShiftTo:bnpDRShiftTo,_lShiftTo:bnpLShiftTo,_rShiftTo:bnpRShiftTo,_subTo:bnpSubTo,_multiplyTo:bnpMultiplyTo,_squareTo:bnpSquareTo,_divRemTo:bnpDivRemTo,_invDigit:bnpInvDigit,_isEven:bnpIsEven,
_exp:bnpExp,toString:bnToString,negate:bnNegate,abs:bnAbs,compareTo:bnCompareTo,bitLength:bnBitLength,mod:bnMod,modPowInt:bnModPowInt});dojo._mixin(BigInteger,{ZERO:nbv(0),ONE:nbv(1),_nbi:nbi,_nbv:nbv,_nbits:nbits,_Montgomery:Montgomery});dojox.math.BigInteger=BigInteger;return dojox.math.BigInteger})},"dijit/form/ComboBoxMixin":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}"\n\trole\x3d"combobox"\n\taria-haspopup\x3d"true"\n\tdata-dojo-attach-point\x3d"_popupStateNode"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\n\t\t\t${_buttonInputDisabled}\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"text" autocomplete\x3d"off"\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n'}});
define("dijit/form/ComboBoxMixin",["dojo/_base/declare","dojo/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(declare,Deferred,kernel,lang,QueryResults,_AutoCompleterMixin,_ComboBoxMenu,_HasDropDown,template){return declare("dijit.form.ComboBoxMixin",[_HasDropDown,_AutoCompleterMixin],{dropDownClass:_ComboBoxMenu,hasDownArrow:true,templateString:template,baseClass:"dijitTextBox dijitComboBox",
cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(val){this._set("hasDownArrow",val);this._buttonNode.style.display=val?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(store){if(!store.get)lang.mixin(store,{_oldAPI:true,get:function(id){var deferred=new Deferred;this.fetchItemByIdentity({identity:id,onItem:function(object){deferred.resolve(object)},onError:function(error){deferred.reject(error)}});return deferred.promise},
query:function(query,options){var deferred=new Deferred(function(){fetchHandle.abort&&fetchHandle.abort()});deferred.total=new Deferred;var fetchHandle=this.fetch(lang.mixin({query:query,onBegin:function(count){deferred.total.resolve(count)},onComplete:function(results){deferred.resolve(results)},onError:function(error){deferred.reject(error)}},options));return QueryResults(deferred)}});this._set("store",store)},postMixInProperties:function(){var store=this.params.store||this.store;if(store)this._setStoreAttr(store);
this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var clazz=this.declaredClass;lang.mixin(this.store,{getValue:function(item,attr){kernel.deprecated(clazz+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return item[attr]},getLabel:function(item){kernel.deprecated(clazz+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return item.name},fetch:function(args){kernel.deprecated(clazz+".store.fetch() is deprecated for builtin store.",
"Use store.query()","2.0");var shim=["dojo/data/ObjectStore"];require(shim,lang.hitch(this,function(ObjectStore){(new ObjectStore({objectStore:this})).fetch(args)}))}})}}})})},"dijit/form/Select":function(){require({cache:{"url:dijit/form/templates/Select.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point\x3d"_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing\x3d\'0\' cellpadding\x3d\'0\'\n\trole\x3d"listbox" aria-haspopup\x3d"true"\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonContents" role\x3d"presentation"\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point\x3d"containerNode,textDirNode" role\x3d"presentation"\x3e\x3c/div\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitValidationContainer"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t/\x3e\x3c/div\n\t\t\t\x3e\x3cinput type\x3d"hidden" ${!nameAttrSetting} data-dojo-attach-point\x3d"valueNode" value\x3d"${value}" aria-hidden\x3d"true"\n\t\t/\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point\x3d"titleNode" role\x3d"presentation"\n\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/\x3e\x3c/td\n\t\x3e\x3c/tr\x3e\x3c/tbody\n\x3e\x3c/table\x3e\n'}});
define("dijit/form/Select",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/i18n","dojo/_base/lang","dojo/on","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../DropDownMenu","../MenuItem","../MenuSeparator","../Tooltip","../_KeyNavMixin","../registry","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(array,declare,domAttr,domClass,domGeometry,i18n,lang,on,has,_FormSelectWidget,_HasDropDown,DropDownMenu,MenuItem,MenuSeparator,
Tooltip,_KeyNavMixin,registry,template){var _SelectMenu=declare("dijit.form._SelectMenu",DropDownMenu,{autoFocus:true,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox")},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation()}))},focus:function(){var found=false,val=this.parentWidget.value;if(lang.isArray(val))val=val[val.length-1];if(val)array.forEach(this.parentWidget._getChildren(),
function(child){if(child.option&&val===child.option.value){found=true;this.focusChild(child,false)}},this);if(!found)this.inherited(arguments)}});var Select=declare("dijit.form.Select"+(0?"_NoBidi":""),[_KeyNavMixin,_FormSelectWidget,_HasDropDown],{baseClass:"dijitSelect dijitValidationTextBox",templateString:template,_buttonInputDisabled:has("ie")?"disabled":"",required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"\x26#160;",_isLoaded:false,_childrenLoaded:false,_fillContent:function(){this.inherited(arguments);
if(this.options.length&&!this.value&&this.srcNodeRef){var si=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[si>=0?si:0].value)}this.dropDown=new _SelectMenu({id:this.id+"_menu",parentWidget:this});domClass.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "))},_getMenuItemForOption:function(option){if(!option.value&&!option.label)return new MenuSeparator({ownerDocument:this.ownerDocument});else{var click=lang.hitch(this,"_setValueAttr",option);var item=new MenuItem({option:option,
label:option.label||this.emptyLabel,onClick:click,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:option.disabled||false});item.focusNode.setAttribute("role","option");return item}},_addOptionItem:function(option){if(this.dropDown)this.dropDown.addChild(this._getMenuItemForOption(option))},_getChildren:function(){if(!this.dropDown)return[];return this.dropDown.getChildren()},focusChild:function(widget){if(widget)this.set("value",widget.option)},_getFirst:function(){var children=
this._getChildren();return children.length?children[0]:null},_getLast:function(){var children=this._getChildren();return children.length?children[children.length-1]:null},childSelector:function(node){var node=registry.byNode(node);return node&&node.getParent()==this.dropDown},onKeyboardSearch:function(item,evt,searchString,numMatches){if(item)this.focusChild(item)},_loadChildren:function(loadMenuItems){if(loadMenuItems===true){if(this.dropDown){delete this.dropDown.focusedChild;this.focusedChild=
null}if(this.options.length)this.inherited(arguments);else{array.forEach(this._getChildren(),function(child){child.destroyRecursive()});var item=new MenuItem({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(item)}}else this._updateSelection();this._isLoaded=false;this._childrenLoaded=true;if(!this._loadingStore)this._setValueAttr(this.value,false)},_refreshState:function(){if(this._started)this.validate(this.focused)},startup:function(){this.inherited(arguments);this._refreshState()},
_setValueAttr:function(value){this.inherited(arguments);domAttr.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setNameAttr:"valueNode",_setDisabledAttr:function(value){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(value){this._set("required",value);this.focusNode.setAttribute("aria-required",value);this._refreshState()},_setOptionsAttr:function(options){this._isLoaded=false;this._set("options",options)},_setDisplay:function(newDisplay){var lbl=newDisplay||
this.emptyLabel;this.containerNode.innerHTML='\x3cspan role\x3d"option" class\x3d"dijitReset dijitInline '+this.baseClass.replace(/\s+|$/g,"Label ")+'"\x3e'+lbl+"\x3c/span\x3e"},validate:function(isFocused){var isValid=this.disabled||this.isValid(isFocused);this._set("state",isValid?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",isValid?"false":"true");var message=isValid?"":this._missingMsg;if(message&&this.focused&&this._hasBeenBlurred)Tooltip.show(message,
this.domNode,this.tooltipPosition,!this.isLeftToRight());else Tooltip.hide(this.domNode);this._set("message",message);return isValid},isValid:function(){return!this.required||this.value===0||!/^\s*$/.test(this.value||"")},reset:function(){this.inherited(arguments);Tooltip.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=i18n.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);
this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation()}));this.domNode.setAttribute("aria-expanded","false");if(has("ie")<9)this.defer(function(){try{var s=domStyle.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var inputs=this.domNode.getElementsByTagName("INPUT");if(inputs)for(var i=0;i<inputs.length;i++)inputs[i].style.fontFamily=ff}}}catch(e){}})},_setStyleAttr:function(value){this.inherited(arguments);domClass.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,
"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(loadCallback){this._loadChildren(true);this._isLoaded=true;loadCallback()},destroy:function(preserveDom){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(preserveDom);delete this.dropDown}this.inherited(arguments)},_onFocus:function(){this.validate(true);this.inherited(arguments)},_onBlur:function(){Tooltip.hide(this.domNode);this.inherited(arguments);this.validate(false)}});
if(0)Select=declare("dijit.form.Select",Select,{_setDisplay:function(newDisplay){this.inherited(arguments);this.applyTextDir(this.containerNode)}});Select._Menu=_SelectMenu;function _onEventAfterLoad(method){return function(evt){if(!this._isLoaded)this.loadDropDown(lang.hitch(this,method,evt));else this.inherited(method,arguments)}}Select.prototype._onContainerKeydown=_onEventAfterLoad("_onContainerKeydown");Select.prototype._onContainerKeypress=_onEventAfterLoad("_onContainerKeypress");return Select})},
"xfile/manager/RPCService":function(){define("xfile/manager/RPCService",["dojo/_base/declare","dojo/_base/lang","dojox/rpc/Service","dojox/encoding/digests/SHA1"],function(declare,lang,Service,SHA1){return declare("xfile.manager.RPCService",[Service],{extraArgs:null,signatureField:"sig",signatureToken:"",callMethodEx:function(serviceClass,method,args,readyCB,errorCB,omitError){var thiz=this;if(!this[serviceClass]||this[serviceClass][method]==null){if(omitError===true&&errorCB)errorCB({code:1,message:["Sorry, server doesnt know "+
method+" in class"+serviceClass]});return null}var params={};if(this.config&&this.config.RPC_PARAMS){params=lang.mixin(params,this.config.RPC_PARAMS.rpcFixedParams);params[this.config.RPC_PARAMS.rpcUserField]=this.config.RPC_PARAMS.rpcUserValue;this.extraArgs=params;this.signatureField=this.config.RPC_PARAMS.rpcSignatureField;this.signatureToken=this.config.RPC_PARAMS.rpcSignatureToken}this[serviceClass][method](args).then(function(res){try{if(readyCB)readyCB(res)}catch(e){console.error("bad news : callback for method "+
method+" caused a crash in service class "+serviceClass)}if(res&&res.error&&res.error&&res.error.code!=0&&errorCB){errorCB(res.error);return}if(omitError==true);},function(err){errorCB(err)})},callMethod:function(serviceClass,method,args,readyCB,errorCB,omitError){try{var thiz=this;if(this[serviceClass][method]==null){if(omitError===true&&errorCB)errorCB({code:1,message:["Sorry, server doesnt know "+method]});return null}var params={};params=lang.mixin(params,this.config.RPC_PARAMS.rpcFixedParams);
this[serviceClass][method](args).then(function(res){try{if(readyCB)readyCB(res)}catch(e){console.error("crashed in "+method);0&&console.dir(e)}if(res&&res.error&&res.error&&res.error.code==1&&errorCB){errorCB(res.error);return}if(omitError!==false)var struct={message:"Ok!"}},function(err){thiz.onError(err)})}catch(e){console.error("crash! "+e)}},getParameterMap:function(serviceClass,serviceClassMethod){var services=this._smd.services;var smd=services[serviceClass+"."+serviceClassMethod];if(smd&&smd.parameters)return smd.parameters;
return null},_executeMethod:function(method){var args=[];var i;if(arguments.length==2&&lang.isArray(arguments[1]))args=arguments[1];else for(i=1;i<arguments.length;i++)args.push(arguments[i]);var request=this._getRequest(method,args);if(this.extraArgs){var index=0;for(var key in this.extraArgs){request.target+=request.target.indexOf("?")!=-1?"\x26":"?";request.target+=key+"\x3d"+this.extraArgs[key]}}request.target+=request.target.indexOf("?")!=-1?"\x26":"?";var signature=SHA1._hmac(request.data,this.signatureToken,
1);request.target+=this.signatureField+"\x3d"+signature;var deferred=dojox.rpc.transportRegistry.match(request.transport).fire(request);deferred.addBoth(function(results){return request._envDef.deserialize.call(this,results)});return deferred},base64_encode:function(data){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=[];if(!data)return data;do{o1=data.charCodeAt(i++);o2=data.charCodeAt(i++);o3=data.charCodeAt(i++);
bits=o1<<16|o2<<8|o3;h1=bits>>18&63;h2=bits>>12&63;h3=bits>>6&63;h4=bits&63;tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4)}while(i<data.length);enc=tmp_arr.join("");var r=data.length%3;return(r?enc.slice(0,r-3):enc)+"\x3d\x3d\x3d".slice(r||3)}})})},"dgrid/extensions/DnD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/on","dojo/topic","dojo/has","dojo/dnd/Source","dojo/dnd/Manager","dojo/_base/NodeList",
"put-selector/put","../Selection","dojo/has!touch?../util/touch","dojo/has!touch?./_DnD-touch-autoscroll","xstyle/css!dojo/resources/dnd.css"],function(declare,lang,arrayUtil,Deferred,aspect,on,topic,has,DnDSource,DnDManager,NodeList,put,Selection,touchUtil){var GridDnDSource=declare(DnDSource,{grid:null,getObject:function(node){var grid=this.grid;return grid.store.get(node.id.slice(grid.id.length+5))},_legalMouseDown:function(evt){var legal=this.inherited(arguments);return legal&&evt.target!=this.grid.bodyNode},
onDrop:function(sourceSource,nodes,copy){var targetSource=this,targetRow=this._targetAnchor=this.targetAnchor,grid=this.grid,store=grid.store;if(!this.before&&targetRow)targetRow=targetRow.nextSibling;targetRow=targetRow&&grid.row(targetRow);Deferred.when(targetRow&&store.get(targetRow.id),function(target){if(targetSource!=sourceSource)targetSource.onDropExternal(sourceSource,nodes,copy,target);else targetSource.onDropInternal(nodes,copy,target)})},onDropInternal:function(nodes,copy,targetItem){var store=
this.grid.store,targetSource=this,grid=this.grid,anchor=targetSource._targetAnchor,targetRow;if(anchor)targetRow=this.before?anchor.previousSibling:anchor.nextSibling;if(!copy&&(targetRow===nodes[0]||!targetItem&&grid.down(grid.row(nodes[0])).element==nodes[0]))return;nodes.forEach(function(node){Deferred.when(targetSource.getObject(node),function(object){store[copy&&store.copy?"copy":"put"](object,{before:targetItem})})})},onDropExternal:function(sourceSource,nodes,copy,targetItem){var store=this.grid.store,
sourceGrid=sourceSource.grid;nodes.forEach(function(node,i){Deferred.when(sourceSource.getObject(node),function(object){if(!copy)if(sourceGrid)Deferred.when(sourceGrid.store.getIdentity(object),function(id){!i&&sourceSource.selectNone();sourceSource.delItem(node.id);sourceGrid.store.remove(id)});else sourceSource.deleteSelectedNodes();store[store.copy?"copy":"put"](object,{before:targetItem})})})},onDndStart:function(source,nodes,copy){this.inherited(arguments);if(source==this){if(this.grid.cancelTouchScroll)this.grid.cancelTouchScroll();
DnDManager.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px"}},onMouseDown:function(evt){if(has("touch")&&this.isDragging&&touchUtil.countCurrentTouches(evt,this.grid.touchNode)>1){topic.publish("/dnd/cancel");DnDManager.manager().stopDrag()}else this.inherited(arguments)},onMouseMove:function(evt){if(!has("touch")||touchUtil.countCurrentTouches(evt,this.grid.touchNode)<=1)this.inherited(arguments)},checkAcceptance:function(source,nodes){return source.getObject&&DnDSource.prototype.checkAcceptance.apply(this,
arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var t=new NodeList,id;for(id in this.grid.selection)t.push(this._selectedNodes[id]);return t}});var DnD=declare(Selection,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:GridDnDSource,postMixInProperties:function(){this.inherited(arguments);this.dndParams=lang.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){this.inherited(arguments);this.dndSource=new (this.dndConstructor||
GridDnDSource)(this.bodyNode,lang.mixin(this.dndParams,{grid:this,dropParent:this.contentNode}));var selectedNodes=this.dndSource._selectedNodes={};function selectRow(row){selectedNodes[row.id]=row.element}function deselectRow(row){delete selectedNodes[row.id]}this.on("dgrid-select",function(event){arrayUtil.forEach(event.rows,selectRow)});this.on("dgrid-deselect",function(event){arrayUtil.forEach(event.rows,deselectRow)});aspect.after(this,"destroy",function(){delete this.dndSource._selectedNodes;
selectedNodes=null;this.dndSource.destroy()},true)},insertRow:function(object){var row=this.inherited(arguments),type=typeof this.getObjectDndType=="function"?this.getObjectDndType(object):[this.dndSourceType];put(row,".dojoDndItem");this.dndSource.setItem(row.id,{data:object,type:type instanceof Array?type:[type]});return row},removeRow:function(rowElement){this.dndSource.delItem(this.row(rowElement));this.inherited(arguments)}});DnD.GridSource=GridDnDSource;return DnD})},"xide/views/CIViewMixin":function(){define(["dojo/_base/declare",
"dojo/Stateful","xide/utils","xide/factory","dojo/store/Memory"],function(declare,Stateful,utils,factory,Memory){return declare("xide.views.CIViewMixin",Stateful,{data:null,widgets:null,delegate:null,helpNodes:null,store:null,groups:null,groupContainer:null,cssClass:"CIView",options:null,tabContainer:null,viewStyle:"",tabs:null,autoSelectLast:true,createGroupContainer:function(){if(this.tabContainer)return this.tabContainer;var tabContainer=new dijit.layout.TabContainer({tabPosition:"top",style:"min-width:500px;min-height:300px;"});
this.containerNode.appendChild(tabContainer.domNode);tabContainer.startup();return tabContainer},getGroupContainer:function(){if(this.groupContainer)return this.groupContainer;this.groupContainer=this.createGroupContainer();return this.groupContainer},createGroupView:function(groupContainer,group){return utils.addWidget(dijit.layout.ContentPane,{delegate:this,title:group,closable:false,style:this.viewStyle},this,groupContainer,true)},attachWidgets:function(data,dstNode){this.helpNodes=[];dstNode=
dstNode||this.domNode;if(!dstNode){console.error("have no parent dstNode!");return}for(var i=0;i<data.length;i++){var widget=data[i];widget.delegate=this.owner||this;dstNode.appendChild(widget.domNode);widget.startup()}},empty:function(){if(this.helpNodes)for(var i=0;i<this.helpNodes.length;i++){var widget=this.helpNodes[i];dojo.destroy(widget)}if(this.widgets)for(var i=0;i<this.widgets.length;i++){var widget=this.widgets[i];widget.destroyRecursive();dojo.destroy(widget)}},sortGroups:function(groups,
groupMap){groups=groups.sort(function(a,b){if(a.name&&b.name&&groupMap[a.name]!=null&&groupMap[b.name]!=null){var orderA=groupMap[a.name];var orderB=groupMap[b.name];return orderB-orderA}return 100});return groups},toArray:function(obj){var result=[];for(var c in obj)result.push({name:c,value:obj[c]});return result},renderGroups:function(groups){var groupContainer=this.getGroupContainer();var lastChild=null;var _array=this.toArray(groups);if(this.options&&this.options.groupOrder)_array=this.sortGroups(_array,
this.options.groupOrder);if(!this.tabs)this.tabs=[];for(var i=0;i<_array.length;i++)try{var view=this.createGroupView(groupContainer,_array[i].name);this.tabs.push(view);var groupWidgets=factory.createWidgetsFromArray(_array[i].value,this,null,false);this.attachWidgets(groupWidgets,view.containerNode);lastChild=view}catch(e){}groupContainer.resize();if(this.autoSelectLast)groupContainer.selectChild(lastChild)},getCIS:function(){return this.data},initWithCIS:function(data){this.empty();data=utils.flattenCIS(data);
var store=new Memory({data:data});this.data=data;var grouped=null;var thiz=this;var groups=store.query({group:/\S+/,visible:true});if(groups.length>0){grouped={};for(var i in groups)if(grouped[groups[i].group]==null){var elements=store.query({group:groups[i].group});if(elements.length>0)grouped[groups[i].group]=elements}}var nbElements=Object.keys(grouped).length;if(grouped!=null&&nbElements>1)this.renderGroups(grouped);else{this.widgets=factory.createWidgetsFromArray(data,thiz,null,false);if(this.widgets)this.attachWidgets(this.widgets)}}})})},
"dojo/topic":function(){define("dojo/topic",["./Evented"],function(Evented){var hub=new Evented;return{publish:function(topic,event){return hub.emit.apply(hub,arguments)},subscribe:function(topic,listener){return hub.on.apply(hub,arguments)}}})},"xblox/views/BlocksGridViewDefault":function(){define("xblox/views/BlocksGridViewDefault",["dojo/_base/declare","dojo/_base/lang","xide/views/BeanView","xide/types","dgrid/OnDemandGrid","dgrid/Selection","dgrid/editor","dgrid/tree","dgrid/extensions/DnD",
"xblox/widgets/DojoDndMixin","xblox/views/BlocksGridDndSource","xblox/views/BlocksGridView","xblox/widgets/BlockGridRowEditor","xide/bean/Grouped"],function(declare,lang,BeanView,types,OnDemandGrid,Selection,editor,tree,Dnd,DojoDndMixin,BlocksGridDndSource,BlocksGridView,BlockGridRowEditor,Grouped){return declare("xblox.views.BlocksGridViewDefault",[BeanView,BlocksGridView,Grouped],{cssClass:"basicCommandsGridView",beanType:"BLOCK",hasItemActions:function(){return true},getItemActions:function(){return this.inherited(arguments)},
onPreview:function(){if(this.delegate.onPreview)this.delegate.onPreview(this.activeItem)},onReloaded:function(){if(this.delegate)this.delegate.onReloaded()},onShow:function(){this.setCurrentGroup(this.delegate.blockGroup);this.inherited(arguments);this.publish(types.EVENTS.RESIZE)},onGridDataChanged:function(evt){0&&console.log("on grid data changed ",evt)},createWidgets:function(store){var thiz=this;var SharedDndGridSource=declare([BlocksGridDndSource,DojoDndMixin],{blockScope:this.blockScope,delegate:this.delegate,
onDndDrop:function(source,nodes,copy,target){if(this.targetAnchor)this._removeItemClass(this.targetAnchor,"Hover");if(this==target)this.onDrop(source,nodes,copy,target);this.onDndCancel()}});var baseClasses=[OnDemandGrid,Selection,Dnd];baseClasses=this.addGridBases(baseClasses);var _ctorArgs={sort:"id",cellNavigation:false,store:store,dndConstructor:SharedDndGridSource,columns:[tree(editor({label:" Name",field:"name",sortable:true},BlockGridRowEditor))],dndParams:{allowNested:true,checkAcceptance:function(source,
nodes){return true},isSource:true}};if(this.gridParams)_ctorArgs=lang.mixin(_ctorArgs,this.gridParams);_ctorArgs.deselectOnRefresh=false;var grid=new (declare(baseClasses))(_ctorArgs,this.containerNode);grid.sort("name");grid.refresh();this.grid=grid;this.onGridCreated(grid)},startup:function(){if(this.didLoad)return;this.inherited(arguments);if(this.store)this.createWidgets(this.store);this.didLoad=true}})})},"dijit/_base/manager":function(){define("dijit/_base/manager",["dojo/_base/array","dojo/_base/config",
"dojo/_base/lang","../registry","../main"],function(array,config,lang,registry,dijit){var exports={};array.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(name){exports[name]=registry[name]});lang.mixin(exports,{defaultDuration:config["defaultDuration"]||200});lang.mixin(dijit,exports);return dijit})},"xide/manager/ResourceManager":function(){define(["dojo/_base/declare","xide/manager/ServerActionBase"],function(declare,ServerActionBase){return declare("xide.manager.ResourceManager",
[ServerActionBase],{serviceClass:"XApp_Resource_Service",resourceData:null,resourceVariables:null,getVariable:function(variableName){return this.resourceVariables[variableName]},init:function(){if(!this.resourceVariables)this.resourceVariables={}},pathToResourceUrl:function(path){var hash={};hash[sctx.getSession().getAppId()]="%XAPP%";var res=xapp.utils.pathToResourceUrl(path,hash);if(res)return res.replace(/^\/|\/$/g,"");return null},updateResource:function(platform,path,resOld,resNew,readyCB){var thiz=
this;var defered=this.serviceObject.updateResource(sctx.getSession().getUUID(),sctx.getSession().getAppId(),platform||"",path||"",JSON.stringify(resOld),JSON.stringify(resNew));var cb=function(res){if(readyCB)readyCB(res)};defered.addCallback(cb)},removeResourceByPath:function(platform,path,resource,readyCB){var thiz=this;var defered=this.serviceObject.removeResource(sctx.getSession().getUUID(),sctx.getSession().getAppId(),platform||"",path||"",JSON.stringify(resource));var cb=function(res){if(readyCB)readyCB(res)};
defered.addCallback(cb)},addResourceByPath:function(platform,path,resource,readyCB){var thiz=this;var defered=this.serviceObject.addResource(sctx.getSession().getUUID(),sctx.getSession().getAppId(),platform||"",path||"",JSON.stringify(resource));var cb=function(res){if(readyCB)readyCB(res)};defered.addCallback(cb)},getResourceByPath:function(platform,path,readyCB){var thiz=this;var defered=this.serviceObject.getResource(sctx.getSession().getUUID(),sctx.getSession().getAppId(),platform||"",path||"");
var cb=function(res){if(readyCB)readyCB(res)};defered.addCallback(cb)},getResourceTree:function(platform,appName,readyCB){var thiz=this;var defered=this.serviceObject.getResourceTree(sctx.getSession().getUUID(),sctx.getSession().getAppId(),platform||"",appName||"");var cb=function(res){if(readyCB)readyCB(res)};defered.addCallback(cb)}})})},"dojo/data/ItemFileReadStore":function(){define("dojo/data/ItemFileReadStore",["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr",
"../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(kernel,lang,declare,array,xhr,Evented,filterUtil,simpleFetch,dateStamp){var ItemFileReadStore=declare("dojo.data.ItemFileReadStore",[Evented],{constructor:function(keywordParameters){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=keywordParameters.url;this._ccUrl=keywordParameters.url;this.url=keywordParameters.url;this._jsonData=keywordParameters.data;this.data=null;this._datatypeMap=
keywordParameters.typeMap||{};if(!this._datatypeMap["Date"])this._datatypeMap["Date"]={type:Date,deserialize:function(value){return dateStamp.fromISOString(value)}};this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(keywordParameters.urlPreventCache!==undefined)this.urlPreventCache=keywordParameters.urlPreventCache?
true:false;if(keywordParameters.hierarchical!==undefined)this.hierarchical=keywordParameters.hierarchical?true:false;if(keywordParameters.clearOnClose)this.clearOnClose=true;if("failOk"in keywordParameters)this.failOk=keywordParameters.failOk?true:false},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item))throw new Error(this.declaredClass+": Invalid item argument.");},_assertIsAttribute:function(attribute){if(typeof attribute!==
"string")throw new Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(item,attribute,defaultValue){var values=this.getValues(item,attribute);return values.length>0?values[0]:defaultValue},getValues:function(item,attribute){this._assertIsItem(item);this._assertIsAttribute(attribute);return(item[attribute]||[]).slice(0)},getAttributes:function(item){this._assertIsItem(item);var attributes=[];for(var key in item)if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&
key!==this._rootItemPropName&&key!==this._reverseRefMap)attributes.push(key);return attributes},hasAttribute:function(item,attribute){this._assertIsItem(item);this._assertIsAttribute(attribute);return attribute in item},containsValue:function(item,attribute,value){var regexp=undefined;if(typeof value==="string")regexp=filterUtil.patternToRegExp(value,false);return this._containsValue(item,attribute,value,regexp)},_containsValue:function(item,attribute,value,regexp){return array.some(this.getValues(item,
attribute),function(possibleValue){if(possibleValue!==null&&!lang.isObject(possibleValue)&&regexp){if(possibleValue.toString().match(regexp))return true}else if(value===possibleValue)return true})},isItem:function(something){if(something&&something[this._storeRefPropName]===this)if(this._arrayOfAllItems[something[this._itemNumPropName]]===something)return true;return false},isItemLoaded:function(something){return this.isItem(something)},loadItem:function(keywordArgs){this._assertIsItem(keywordArgs.item)},
getFeatures:function(){return this._features},getLabel:function(item){if(this._labelAttr&&this.isItem(item))return this.getValue(item,this._labelAttr);return undefined},getLabelAttributes:function(item){if(this._labelAttr)return[this._labelAttr];return null},filter:function(requestArgs,arrayOfItems,findCallback){var items=[],i,key;if(requestArgs.query){var value,ignoreCase=requestArgs.queryOptions?requestArgs.queryOptions.ignoreCase:false;var regexpList={};for(key in requestArgs.query){value=requestArgs.query[key];
if(typeof value==="string")regexpList[key]=filterUtil.patternToRegExp(value,ignoreCase);else if(value instanceof RegExp)regexpList[key]=value}for(i=0;i<arrayOfItems.length;++i){var match=true;var candidateItem=arrayOfItems[i];if(candidateItem===null)match=false;else for(key in requestArgs.query){value=requestArgs.query[key];if(!this._containsValue(candidateItem,key,value,regexpList[key]))match=false}if(match)items.push(candidateItem)}findCallback(items,requestArgs)}else{for(i=0;i<arrayOfItems.length;++i){var item=
arrayOfItems[i];if(item!==null)items.push(item)}findCallback(items,requestArgs)}},_fetchItems:function(keywordArgs,findCallback,errorCallback){var self=this;if(this._loadFinished)this.filter(keywordArgs,this._getItemsArray(keywordArgs.queryOptions),findCallback);else{if(this._jsonFileUrl!==this._ccUrl){kernel.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=
this._jsonFileUrl}else if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url}if(this.data!=null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:keywordArgs,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,findCallback)});else{this._loadInProgress=true;var getArgs={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var getHandler=xhr.get(getArgs);
getHandler.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(keywordArgs,self._getItemsArray(keywordArgs.queryOptions),findCallback);self._handleQueuedFetches()}catch(e){self._loadFinished=true;self._loadInProgress=false;errorCallback(e,keywordArgs)}});getHandler.addErrback(function(error){self._loadInProgress=false;errorCallback(error,keywordArgs)});var oldAbort=null;if(keywordArgs.abort)oldAbort=keywordArgs.abort;keywordArgs.abort=
function(){var df=getHandler;if(df&&df.fired===-1){df.cancel();df=null}if(oldAbort)oldAbort.call(keywordArgs)}}else if(this._jsonData)try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(keywordArgs,this._getItemsArray(keywordArgs.queryOptions),findCallback)}catch(e){errorCallback(e,keywordArgs)}else errorCallback(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),keywordArgs)}},_handleQueuedFetches:function(){if(this._queuedFetches.length>
0){for(var i=0;i<this._queuedFetches.length;i++){var fData=this._queuedFetches[i],delayedQuery=fData.args,delayedFilter=fData.filter,delayedFindCallback=fData.findCallback;if(delayedFilter)delayedFilter(delayedQuery,this._getItemsArray(delayedQuery.queryOptions),delayedFindCallback);else this.fetchItemByIdentity(delayedQuery)}this._queuedFetches=[]}},_getItemsArray:function(queryOptions){if(queryOptions&&queryOptions.deep)return this._arrayOfAllItems;return this._arrayOfTopLevelItems},close:function(request){if(this.clearOnClose&&
this._loadFinished&&!this._loadInProgress){if((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null)&&this.data==null)0&&console.debug(this.declaredClass+": WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[]}},_getItemsFromLoadedData:function(dataObject){var addingArrays=
false,self=this;function valueIsAnItem(aValue){return aValue!==null&&typeof aValue==="object"&&(!lang.isArray(aValue)||addingArrays)&&!lang.isFunction(aValue)&&(aValue.constructor==Object||lang.isArray(aValue))&&typeof aValue._reference==="undefined"&&typeof aValue._type==="undefined"&&typeof aValue._value==="undefined"&&self.hierarchical}function addItemAndSubItemsToArrayOfAllItems(anItem){self._arrayOfAllItems.push(anItem);for(var attribute in anItem){var valueForAttribute=anItem[attribute];if(valueForAttribute)if(lang.isArray(valueForAttribute)){var valueArray=
valueForAttribute;for(var k=0;k<valueArray.length;++k){var singleValue=valueArray[k];if(valueIsAnItem(singleValue))addItemAndSubItemsToArrayOfAllItems(singleValue)}}else if(valueIsAnItem(valueForAttribute))addItemAndSubItemsToArrayOfAllItems(valueForAttribute)}}this._labelAttr=dataObject.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=dataObject.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item))addingArrays=true;addItemAndSubItemsToArrayOfAllItems(item);
item[this._rootItemPropName]=true}var allAttributeNames={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var value=item[key];if(value!==null){if(!lang.isArray(value))item[key]=[value]}else item[key]=[null]}allAttributeNames[key]=key}}while(allAttributeNames[this._storeRefPropName])this._storeRefPropName+="_";while(allAttributeNames[this._itemNumPropName])this._itemNumPropName+="_";while(allAttributeNames[this._reverseRefMap])this._reverseRefMap+=
"_";var arrayOfValues;var identifier=dataObject.identifier;if(identifier){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=identifier;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];arrayOfValues=item[identifier];var identity=arrayOfValues[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,identity))this._itemsByIdentity[identity]=item;else if(this._jsonFileUrl)throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+
"] is malformed.  Items within the list have identifier: ["+identifier+"].  Value collided: ["+identity+"]");else if(this._jsonData)throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+identifier+"].  Value collided: ["+identity+"]");}}else this._features["dojo.data.api.Identity"]=Number;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=
i}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){arrayOfValues=item[key];for(var j=0;j<arrayOfValues.length;++j){value=arrayOfValues[j];if(value!==null&&typeof value=="object"){if("_type"in value&&"_value"in value){var type=value._type;var mappingObj=this._datatypeMap[type];if(!mappingObj)throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");else if(lang.isFunction(mappingObj))arrayOfValues[j]=
new mappingObj(value._value);else if(lang.isFunction(mappingObj.deserialize))arrayOfValues[j]=mappingObj.deserialize(value._value);else throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}if(value._reference){var referenceDescription=value._reference;if(!lang.isObject(referenceDescription))arrayOfValues[j]=this._getItemByIdentity(referenceDescription);else for(var k=0;k<this._arrayOfAllItems.length;++k){var candidateItem=
this._arrayOfAllItems[k],found=true;for(var refKey in referenceDescription)if(candidateItem[refKey]!=referenceDescription[refKey])found=false;if(found)arrayOfValues[j]=candidateItem}if(this.referenceIntegrity){var refItem=arrayOfValues[j];if(this.isItem(refItem))this._addReferenceToMap(refItem,item,key)}}else if(this.isItem(value))if(this.referenceIntegrity)this._addReferenceToMap(value,item,key)}}}}},_addReferenceToMap:function(refItem,parentItem,attribute){},getIdentity:function(item){var identifier=
this._features["dojo.data.api.Identity"];if(identifier===Number)return item[this._itemNumPropName];else{var arrayOfValues=item[identifier];if(arrayOfValues)return arrayOfValues[0]}return null},fetchItemByIdentity:function(keywordArgs){var item,scope;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){kernel.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=
this._jsonFileUrl;this.url=this._jsonFileUrl}else if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:keywordArgs});else{this._loadInProgress=true;var getArgs={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var getHandler=xhr.get(getArgs);getHandler.addCallback(function(data){var scope=
keywordArgs.scope?keywordArgs.scope:kernel.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(keywordArgs.identity);if(keywordArgs.onItem)keywordArgs.onItem.call(scope,item);self._handleQueuedFetches()}catch(error){self._loadInProgress=false;if(keywordArgs.onError)keywordArgs.onError.call(scope,error)}});getHandler.addErrback(function(error){self._loadInProgress=false;if(keywordArgs.onError){var scope=keywordArgs.scope?keywordArgs.scope:
kernel.global;keywordArgs.onError.call(scope,error)}})}else if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(keywordArgs.identity);if(keywordArgs.onItem){scope=keywordArgs.scope?keywordArgs.scope:kernel.global;keywordArgs.onItem.call(scope,item)}}}else{item=this._getItemByIdentity(keywordArgs.identity);if(keywordArgs.onItem){scope=keywordArgs.scope?keywordArgs.scope:kernel.global;keywordArgs.onItem.call(scope,
item)}}},_getItemByIdentity:function(identity){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,identity))item=this._itemsByIdentity[identity]}else if(Object.hasOwnProperty.call(this._arrayOfAllItems,identity))item=this._arrayOfAllItems[identity];if(item===undefined)item=null;return item},getIdentityAttributes:function(item){var identifier=this._features["dojo.data.api.Identity"];if(identifier===Number)return null;else return[identifier]},_forceLoad:function(){var self=
this;if(this._jsonFileUrl!==this._ccUrl){kernel.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl}else if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url}if(this.data!=null){this._jsonData=this.data;this.data=null}if(this._jsonFileUrl){var getArgs={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,
failOk:this.failOk,sync:true};var getHandler=xhr.get(getArgs);getHandler.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true}else if(self._loadInProgress)throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(e){0&&console.log(e);throw e;}});getHandler.addErrback(function(error){throw error;})}else if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);
self._jsonData=null;self._loadFinished=true}}});lang.extend(ItemFileReadStore,simpleFetch);return ItemFileReadStore})},"dojox/widget/Toaster":function(){define("dojox/widget/Toaster",["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/fx","dojo/dom-style","dojo/dom-class","dojo/dom-geometry","dijit/registry","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/BackgroundIframe","dojo/fx","dojo/has","dojo/_base/window","dojo/window"],function(declare,lang,connect,baseFx,domStyle,
domClass,domGeometry,registry,WidgetBase,Templated,BackgroundIframe,coreFx,has,baseWindow,window){lang.getObject("dojox.widget",true);var capitalize=function(w){return w.substring(0,1).toUpperCase()+w.substring(1)};return declare("dojox.widget.Toaster",[WidgetBase,Templated],{templateString:'\x3cdiv class\x3d"dijitToasterClip" dojoAttachPoint\x3d"clipNode"\x3e\x3cdiv class\x3d"dijitToasterContainer" dojoAttachPoint\x3d"containerNode" dojoAttachEvent\x3d"onclick:onSelect"\x3e\x3cdiv class\x3d"dijitToasterContent" dojoAttachPoint\x3d"contentNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
messageTopic:"",messageTypes:{MESSAGE:"message",WARNING:"warning",ERROR:"error",FATAL:"fatal"},defaultType:"message",positionDirection:"br-up",positionDirectionTypes:["br-up","br-left","bl-up","bl-right","tr-down","tr-left","tl-down","tl-right"],duration:2E3,slideDuration:500,separator:"\x3chr\x3e\x3c/hr\x3e",postCreate:function(){this.inherited(arguments);this.hide();baseWindow.body().appendChild(this.domNode);if(this.messageTopic)connect.subscribe(this.messageTopic,this,"_handleMessage")},_handleMessage:function(message){if(lang.isString(message))this.setContent(message);
else this.setContent(message.message,message.type,message.duration)},setContent:function(message,messageType,duration){duration=duration||this.duration;if(this.slideAnim){if(this.slideAnim.status()!="playing")this.slideAnim.stop();if(this.slideAnim.status()=="playing"||this.fadeAnim&&this.fadeAnim.status()=="playing"){setTimeout(lang.hitch(this,function(){this.setContent(message,messageType,duration)}),50);return}}for(var type in this.messageTypes)domClass.remove(this.containerNode,"dijitToaster"+
capitalize(this.messageTypes[type]));domStyle.set(this.containerNode,"opacity",1);this._setContent(message);domClass.add(this.containerNode,"dijitToaster"+capitalize(messageType||this.defaultType));this.show();var nodeSize=domGeometry.getMarginBox(this.containerNode);this._cancelHideTimer();if(this.isVisible){this._placeClip();if(!this._stickyMessage)this._setHideTimer(duration)}else{var style=this.containerNode.style;var pd=this.positionDirection;if(pd.indexOf("-up")>=0){style.left=0+"px";style.top=
nodeSize.h+10+"px"}else if(pd.indexOf("-left")>=0){style.left=nodeSize.w+10+"px";style.top=0+"px"}else if(pd.indexOf("-right")>=0){style.left=0-nodeSize.w-10+"px";style.top=0+"px"}else if(pd.indexOf("-down")>=0){style.left=0+"px";style.top=0-nodeSize.h-10+"px"}else throw new Error(this.id+".positionDirection is invalid: "+pd);this.slideAnim=coreFx.slideTo({node:this.containerNode,top:0,left:0,duration:this.slideDuration});this.connect(this.slideAnim,"onEnd",function(nodes,anim){this.fadeAnim=baseFx.fadeOut({node:this.containerNode,
duration:1E3});this.connect(this.fadeAnim,"onEnd",function(evt){this.isVisible=false;this.hide()});this._setHideTimer(duration);this.connect(this,"onSelect",function(evt){this._cancelHideTimer();this._stickyMessage=false;this.fadeAnim.play()});this.isVisible=true});this.slideAnim.play()}},_setContent:function(message){if(lang.isFunction(message)){message(this);return}if(message&&this.isVisible)message=this.contentNode.innerHTML+this.separator+message;this.contentNode.innerHTML=message},_cancelHideTimer:function(){if(this._hideTimer){clearTimeout(this._hideTimer);
this._hideTimer=null}},_setHideTimer:function(duration){this._cancelHideTimer();if(duration>0){this._cancelHideTimer();this._hideTimer=setTimeout(lang.hitch(this,function(evt){if(this.bgIframe&&this.bgIframe.iframe)this.bgIframe.iframe.style.display="none";this._hideTimer=null;this._stickyMessage=false;this.fadeAnim.play()}),duration)}else this._stickyMessage=true},_placeClip:function(){var view=window.getBox();var nodeSize=domGeometry.getMarginBox(this.containerNode);var style=this.clipNode.style;
style.height=nodeSize.h+"px";style.width=nodeSize.w+"px";var pd=this.positionDirection;if(pd.match(/^t/))style.top=view.t+"px";else if(pd.match(/^b/))style.top=view.h-nodeSize.h-2+view.t+"px";if(pd.match(/^[tb]r-/))style.left=view.w-nodeSize.w-1-view.l+"px";else if(pd.match(/^[tb]l-/))style.left=0+"px";else if(pd.match(/^[tb]c-/))style.left=Math.round((view.w-nodeSize.w-1-view.l)/2)+"px";style.clip="rect(0px, "+nodeSize.w+"px, "+nodeSize.h+"px, 0px)";if(has("ie")){if(!this.bgIframe){if(!this.clipNode.id)this.clipNode.id=
registry.getUniqueId("dojox_widget_Toaster_clipNode");this.bgIframe=new BackgroundIframe(this.clipNode)}var iframe=this.bgIframe.iframe;if(iframe)iframe.style.display="block"}},onSelect:function(e){},show:function(){domStyle.set(this.domNode,"display","block");this._placeClip();if(!this._scrollConnected)this._scrollConnected=connect.connect(window,"onscroll",this,this._placeClip)},hide:function(){domStyle.set(this.domNode,"display","none");if(this._scrollConnected){connect.disconnect(this._scrollConnected);
this._scrollConnected=false}domStyle.set(this.containerNode,"opacity",1)}})})},"dijit/form/ComboButton":function(){require({cache:{"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\n\t\t\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\n\t\t\ttitle\x3d"${optionsTitle}"\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode" role\x3d"presentation"\n\t\t\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\n\x3e\x3c/table\x3e\n'}});
define("dijit/form/ComboButton",["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html"],function(declare,keys,focus,DropDownButton,template){return declare("dijit.form.ComboButton",DropDownButton,{templateString:template,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},
_focusedNode:null,_onButtonKeyDown:function(evt){if(evt.keyCode==keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){focus.focus(this._popupStateNode);evt.stopPropagation();evt.preventDefault()}},_onArrowKeyDown:function(evt){if(evt.keyCode==keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){focus.focus(this.titleNode);evt.stopPropagation();evt.preventDefault()}},focus:function(position){if(!this.disabled)focus.focus(position=="start"?this.titleNode:this._popupStateNode)}})})},"xfile/views/FileGridViewUtils":function(){define("xfile/views/FileGridViewUtils",
["dojo/_base/declare","dgrid/editor","xide/utils"],function(declare,editor,utils){return declare("xfiles.views.FileGridViewUtils",null,{getNumberOfColumns:function(){},getCurrentItemNodes:function(startnode){var rows=utils.find(".dgrid-row",startnode||this.domNode,false);if(rows)return rows;return null},getNumberOfItems:function(startnode){var nbItems=0;var rows=utils.find(".dgrid-row",startnode||this.domNode,false);if(rows)return rows.length;return nbItems},validateEX:function(){var grid=this.grid;
var dirty=grid.dirty;var store=grid.store;var colsMap={};var cols=this.columns;for(colId in cols){var col=cols[colId];if(col.field)colsMap[col.field]={col:col,colId:colId}}var datas=grid.store.query(grid.get("query"),grid.get("queryOptions"));var isValid=true;for(var i=0;i<datas.length;i++){var data=datas[i];var id=store.getIdentity(data);for(field in colsMap){var colDef=colsMap[field];var cell=grid.cell(id,colDef.colId);var value=grid.dirty&&grid.dirty[id]&&grid.dirty[id][field]||data[field];var column=
cell.column;if(column.canEdit&&column.canEdit(data,value)){var editor=column.editorInstance;if(editor&&editor.get){var oldValue=editor.get("value");editor.set("value",value);var isCellValid=editor.validate();if(!isCellValid){grid._inValidCell(cell.element);isValid=false}editor.set("value",oldValue)}}}}return isValid},findRestoreFocusItem:function(){var currentItem=this.selectedItem;if(this.focusedChildNode){var prev=null;try{prev=this._getPrev(this.focusedChildNode);var isBack=false;if(prev&&prev.data[this.id]&&
prev.data[this.id]["isBack"]==true)isBack=true}catch(e){}if(prev&&prev.data&&prev.data.name!==".."&&prev.data!=currentItem&&!isBack)return prev;else{var next=this._getNext(this.focusedChildNode);if(next&&next.data&&next.data!=currentItem)return next}}else;},getRestoreItem:function(){var currentItem=this.activeItem;if(currentItem)if(currentItem.directory!=null&&currentItem.directory===true)if(currentItem[this.id]&&currentItem[this.id]["isBack"]===true);else{var parent=this.store.getParents(currentItem,
true)[0];if(parent)return parent}else{var parent=this.store.getParents(currentItem,true)[0];if(parent)return parent}return currentItem},pathToRegex:function(path){return path;var segm=path.split("/");var regex="(^\\.";var i;for(i=0;i<segm.length;i++)if(segm[i]!==".")regex=regex+"\\/"+segm[i];regex=regex+"\\/[^\\/]*$)";return regex},focusItem:function(item,storeOnly){if(storeOnly){this.nextFocusItem=item;return}var row=this.grid.row(item);if(row){var focusNode=this.toFocusNode(item);if(!focusNode&&
this.focusedChildNode)focusNode=this.focusedChildNode;if(focusNode){this.grid._focusNode=focusNode;this.grid.focus(focusNode);focusNode.focus()}else console.error("have no focus node")}else console.error("have no focus row")},_restoreItem:function(item){if(item){if(item.name==".."&&item.prevName!="..")item.name=item.prevName;item.isBack=false;item[this.id]={isBack:false};if(item[this.id].name==".."&&item[this.id].prevName!="..")item[this.id].name=item[this.id].prevName;item[this.id]["prevName"]=item.name}},
toFocusNode:function(item){var row=this.grid.row(item),innerNode;if(row&&row.element){innerNode=utils.find(".dgrid-cell",row.element,true);if(innerNode)return innerNode;else return row.element}else{innerNode=utils.find(".dgrid-row",this.grid.domNode,true);if(innerNode)return innerNode}return null}})})},"dijit/form/RangeBoundTextBox":function(){define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(declare,i18n,MappedTextBox){var RangeBoundTextBox=declare("dijit.form.RangeBoundTextBox",
MappedTextBox,{rangeMessage:"",rangeCheck:function(primitive,constraints){return("min"in constraints?this.compare(primitive,constraints.min)>=0:true)&&("max"in constraints?this.compare(primitive,constraints.max)<=0:true)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var val=this.get("value");if(val==null)return false;var outOfRange=false;if("min"in this.constraints){var min=this.constraints.min;outOfRange=this.compare(val,typeof min==
"number"&&min>=0&&val!=0?0:min)<0}if(!outOfRange&&"max"in this.constraints){var max=this.constraints.max;outOfRange=this.compare(val,typeof max!="number"||max>0?max:0)>0}return outOfRange},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(isFocused){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(isFocused))},getErrorMessage:function(isFocused){var v=this.get("value");if(v!=null&&v!==""&&
(typeof v!="number"||!isNaN(v))&&!this.isInRange(isFocused))return this.rangeMessage;return this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage}}});return RangeBoundTextBox})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(lang,array,dom){var className="className";var cls,spaces=/\s+/,a1=[""];
function str2array(s){if(typeof s=="string"||s instanceof String){if(s&&!spaces.test(s)){a1[0]=s;return a1}var a=s.split(spaces);if(a.length&&!a[0])a.shift();if(a.length&&!a[a.length-1])a.pop();return a}if(!s)return[];return array.filter(s,function(x){return x})}var fakeNode={};cls={contains:function containsClass(node,classStr){return(" "+dom.byId(node)[className]+" ").indexOf(" "+classStr+" ")>=0},add:function addClass(node,classStr){node=dom.byId(node);classStr=str2array(classStr);var cls=node[className],
oldLen;cls=cls?" "+cls+" ":" ";oldLen=cls.length;for(var i=0,len=classStr.length,c;i<len;++i){c=classStr[i];if(c&&cls.indexOf(" "+c+" ")<0)cls+=c+" "}if(oldLen<cls.length)node[className]=cls.substr(1,cls.length-2)},remove:function removeClass(node,classStr){node=dom.byId(node);var cls;if(classStr!==undefined){classStr=str2array(classStr);if(!node){console.error("domClass remove failed, have no node! Class to remove "+classStr);return}cls=" "+node[className]+" ";for(var i=0,len=classStr.length;i<len;++i)cls=
cls.replace(" "+classStr[i]+" "," ");cls=lang.trim(cls)}else cls="";if(node[className]!=cls)node[className]=cls},replace:function replaceClass(node,addClassStr,removeClassStr){node=dom.byId(node);if(!fakeNode||!node){console.error("error setting dom class! "+className);return}fakeNode[className]=node[className];cls.remove(fakeNode,removeClassStr);cls.add(fakeNode,addClassStr);if(node[className]!==fakeNode[className])node[className]=fakeNode[className]},toggle:function toggleClass(node,classStr,condition){node=
dom.byId(node);if(condition===undefined){classStr=str2array(classStr);for(var i=0,len=classStr.length,c;i<len;++i){c=classStr[i];cls[cls.contains(node,c)?"remove":"add"](node,c)}}else cls[condition?"add":"remove"](node,classStr);return condition}};return cls})},"xide/form/Select":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/aspect","dijit/form/Select"],function(declare,domClass,aspect,Select){return declare("xide.form.Select",[Select],{_patchMenu:function(widget){aspect.after(widget,
"onOpen",function(){var dst=this._popupWrapper;if(dst)domClass.add(dst,"ui-menu ui-widget ui-widget-content")})},_fillContent:function(){this.inherited(arguments);if(this.dropDown)this._patchMenu(this.dropDown)}})})},"dojo/touch":function(){define("dojo/touch",["./_base/kernel","./aspect","./dom","./on","./has","./mouse","./ready","./_base/window"],function(dojo,aspect,dom,on,has,mouse,ready,win){var hasTouch=has("touch");var ios4=false;if(has("ios")){var ua=navigator.userAgent;var v=ua.match(/OS ([\d_]+)/)?
RegExp.$1:"1";var os=parseFloat(v.replace(/_/,".").replace(/_/g,""));ios4=os<5}var touchmove,hoveredNode;if(hasTouch){ready(function(){hoveredNode=win.body();win.doc.addEventListener("touchstart",function(evt){var oldNode=hoveredNode;hoveredNode=evt.target;on.emit(oldNode,"dojotouchout",{target:oldNode,relatedTarget:hoveredNode,bubbles:true});on.emit(hoveredNode,"dojotouchover",{target:hoveredNode,relatedTarget:oldNode,bubbles:true})},true);on(win.doc,"touchmove",function(evt){var newNode=win.doc.elementFromPoint(evt.pageX-
(ios4?0:win.global.pageXOffset),evt.pageY-(ios4?0:win.global.pageYOffset));if(newNode&&hoveredNode!==newNode){on.emit(hoveredNode,"dojotouchout",{target:hoveredNode,relatedTarget:newNode,bubbles:true});on.emit(newNode,"dojotouchover",{target:newNode,relatedTarget:hoveredNode,bubbles:true});hoveredNode=newNode}})});touchmove=function(node,listener){return on(win.doc,"touchmove",function(evt){if(node===win.doc||dom.isDescendant(hoveredNode,node)){evt.target=hoveredNode;listener.call(this,evt)}})}}function _handle(type){return function(node,
listener){return on(node,type,listener)}}var touch={press:_handle(hasTouch?"touchstart":"mousedown"),move:hasTouch?touchmove:_handle("mousemove"),release:_handle(hasTouch?"touchend":"mouseup"),cancel:hasTouch?_handle("touchcancel"):mouse.leave,over:_handle(hasTouch?"dojotouchover":"mouseover"),out:_handle(hasTouch?"dojotouchout":"mouseout"),enter:mouse._eventHandler(hasTouch?"dojotouchover":"mouseover"),leave:mouse._eventHandler(hasTouch?"dojotouchout":"mouseout")};1&&(dojo.touch=touch);return touch})},
"xblox/views/BlocksGridView":function(){define("xblox/views/BlocksGridView",["dojo/_base/declare","xide/types","xide/views/GridView"],function(declare,types,GridView){return declare("xblox.views.BlocksGridView",[GridView],{onShow:function(){this.inherited(arguments);this.publish(types.EVENTS.RESIZE)},deleteItem:function(){if(this.delegate&&this.delegate.removeItem)this.delegate.removeItem()},onGridCreated:function(grid){this.inherited(arguments)},onClipBoardCopy:function(){var selection=this.getCurrentSelection();
if(selection){var struct={items:selection,type:types.ITEM_TYPE.BLOCK,owner:this};this.publish(types.EVENTS.ON_CLIPBOARD_COPY,struct,this.delegate)}},onClipBoardPaste:function(){this.publish(types.EVENTS.ON_CLIPBOARD_PASTE,{owner:this,type:types.ITEM_TYPE.BLOCK},this.delegate)},onClipBoardCut:function(){var selection=this.getCurrentSelection();if(selection){var struct={items:selection,owner:this,type:types.ITEM_TYPE.BLOCK};this.publish(types.EVENTS.ON_CLIPBOARD_CUT,struct,this.delegate)}}})})},"dojo/cache":function(){define(["./_base/kernel",
"./text"],function(dojo){return dojo.cache})},"xfile/manager/OpenDelegate":function(){define("xfile/manager/OpenDelegate",["dojo/_base/declare"],function(declare){return declare("xfile.manager.OpenDelegate",null,{shouldOpen:function(item){return true},openIn:function(item){return null}})})},"xfile/widgets/ActionToolbar":function(){define("xfile/widgets/ActionToolbar",["dojo/_base/declare","xide/widgets/TemplatedWidgetBase","xide/types","xide/factory","xide/mixins/EventedMixin"],function(declare,TemplatedWidgetBase,
types,factory,EventedMixin){return declare("xfile/widgets/ActionToolbar",[TemplatedWidgetBase,EventedMixin],{toolbarPlaceTarget:"toolbar",currentItem:null,buttons:null,templateString:"\x3cdiv\x3e\x3cdiv class\x3d'fileView actionToolbar' data-dojo-type\x3d'dijit.form.DropDownButton' data-dojo-props\x3d\"iconClass:'dijitEditorIcon fileLayoutTreeIcon'\" data-dojo-attach-point\x3d'wButton'\x3e"+"\x3cspan\x3e\x3c/span\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.Menu' style\x3d'display: none;'\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'dijitEditorIcon fileLayoutTreeIcon'\" data-dojo-attach-point\x3d'wTree'\x3eTree\x3c/div\x3e"+
"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'dijitEditorIcon fileLayoutGridIcon'\" data-dojo-attach-point\x3d'wThumb'\x3eThumbs\x3c/div\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'dijitEditorIcon fileLayoutListIcon'\" data-dojo-attach-point\x3d'wList'\x3eList\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e",toTitle:function(operation){switch(operation){case types.OPERATION.DELETE:return this.translate("Delete");case types.OPERATION.EDIT:return this.translate("Edit");
case types.OPERATION.RENAME:return this.translate("Rename");case types.OPERATION.COPY:return this.translate("Copy");case types.OPERATION.MOVE:return this.translate("Move");case types.OPERATION.DOWNLOAD:return this.translate("Download");case types.OPERATION.INFO:return this.translate("Info");case types.OPERATION.COMPRESS:return this.translate("Compress");case types.OPERATION.RELOAD:return this.translate("Reload")}return"No Title"},postMixInProperties:function(){this.inherited(arguments)},_initEvents:function(){},
_createButton:function(){},onButtonClicked:function(button){if(this.delegate&&this.delegate.onActionButton)this.delegate.onActionButton(button,button.item,button.operation,button.owner)},onFileSelected:function(data){var btnEdit=this.getButton(types.OPERATION.EDIT);if(btnEdit)btnEdit.setDisabled(false)},onCommonsSelected:function(data){var btnRename=this.getButton(types.OPERATION.RENAME);if(btnRename)btnRename.setDisabled(false);var btnDownload=this.getButton(types.OPERATION.DOWNLOAD);if(btnDownload)btnDownload.setDisabled(false);
var btnCopy=this.getButton(types.OPERATION.COPY);if(btnCopy)btnCopy.setDisabled(false);var btnMove=this.getButton(types.OPERATION.MOVE);if(btnMove)btnMove.setDisabled(false);var btnProp=this.getButton(types.OPERATION.INFO);if(btnProp)btnProp.setDisabled(false);var btnDelete=this.getButton(types.OPERATION.DELETE);if(btnDelete)btnDelete.setDisabled(false);var btncompress=this.getButton(types.OPERATION.COMPRESS);if(btncompress)btncompress.setDisabled(false);var btnReload=this.getButton(types.OPERATION.RELOAD);
if(btnReload)btnReload.setDisabled(false)},clearStates:function(item,owner){for(var i=0;i<this.buttons.length;i++){this.buttons[i].item=item;this.buttons[i].owner=owner;this.buttons[i].setDisabled(true)}},onDirectorySelected:function(data){},onItemSelected:function(data){try{if(data&&data.item){var item=data.item;this.clearStates(item,data.caller);if(item.name=="."||item.name=="..")return;this.onCommonsSelected(item);if(item.directory!=null&&item.directory===true)this.onDirectorySelected(item);else this.onFileSelected(item)}}catch(e){}},
getButton:function(operation){for(var i=0;i<this.buttons.length;i++)if(this.buttons[i].operation==operation)return this.buttons[i];return null},_createDefaultItems:function(){var reloadButton=this._createButton(types.OPERATION.RELOAD,null,null,true);var deleteButton=this._createButton(types.OPERATION.DELETE,null,null,true);var compressButton=this._createButton(types.OPERATION.COMPRESS,null,null,true);var downloadButton=this._createButton(types.OPERATION.DOWNLOAD,null,null,true);var infoButton=this._createButton(types.OPERATION.INFO,
null,null,true);var renameButton=this._createButton(types.OPERATION.RENAME,null,null,true);var moveButton=this._createButton(types.OPERATION.MOVE,null,null,true);var copyButton=this._createButton(types.OPERATION.COPY,null,null,true);var editButton=this._createButton(types.OPERATION.EDIT,null,null,true)},startup:function(){this.inherited(arguments);var thiz=this;this.buttons=[];this._createDefaultItems();this.subscribe(types.EVENTS.ITEM_SELECTED,function(data){thiz.onItemSelected(data)},this)}})})},
"xfile/views/FileOperationDialog":function(){define("xfile/views/FileOperationDialog",["dojo/_base/declare","dojo/dom-style","./FileOperationView","./ActionDialog","xide/views/TitlePane","xide/utils","xide/widgets/FlagsWidget","xfile/factory"],function(declare,domStyle,FileOperationView,ActionDialog,TitlePane,xUtils,FlagsWidget,factory){return declare("xfile.views.FileOperationDialog",[ActionDialog],{value:null,fileOperationView:null,item:null,src:null,maskPane:null,optionPane:null,flags:4,getValue:function(){return this.fileOperationView.getValue()},
getOptions:function(){var result={includes:[],excludes:[],mode:1501,lastMount:this.fileOperationView.lastMount};if(this.maskPane&&this.maskPane.treeView){result.includes=this.maskPane.treeView.getSelected();result.excludes=this.maskPane.treeView.getUnselected()}var a=1<<16;var b=1<<4;switch(this.flags){case 1<<2:result.mode=1502;break;case 1<<4:result.mode=1501;break;case 1<<8:result.mode=1504;break;case 1<<16:result.mode=1503;break}return result},_createTreeView:function(parent){var url=".";var name=
".";if(this.src&&this.src[0]&&this.src[0].path){url=this.src[0].path;name=this.src[0].name}var treeView=factory.createTreeView("Files",this.config,parent.containerNode,this,this.ctx,this.owner.store,this.owner.model,true,url,name);return treeView},onShowTitlePane:function(panel){if(!panel.treeView)panel.treeView=this._createTreeView(panel)},onHideTitlePane:function(panel){this.onResized()},onResized:function(){this._resizeToContent();this.resize()},_createMaskPanel:function(title,where){var thiz=
this;var maskPane=xUtils.addWidget(TitlePane,{title:title,open:false,onShow:function(){thiz.onShowTitlePane(this)},onHide:function(){thiz.onHideTitlePane(this)}},this,where,true);this.maskPane=maskPane},_createOptionPanel:function(title,where){var thiz=this;var optionPanel=xUtils.addWidget(TitlePane,{title:title,open:false},this,where,true);var flags=[{value:2,label:"All"},{value:4,label:"None"},{value:8,label:"If newer"},{value:16,label:"If size differs"}];this.wFlags=xUtils.addWidget(FlagsWidget,
{value:4,data:flags,lineBreak:false,title:"",single:true,flagClass:"flagItem",isChecked:function(val,itemVal){return val==itemVal},setValue:function(value){thiz.flags=value},getValue:function(){return thiz.flags}},this,optionPanel,true,"ui-state-default")},_createFileOperationView:function(src,dst,operation){this.fileOperationView=new FileOperationView({className:"fileOperationView",delegate:this,src:src,dst:dst,operation:operation,owner:this.owner,ctx:this.ctx},dojo.doc.createElement("div"));this.containerNode.appendChild(this.fileOperationView.domNode);
this.fileOperationView.startup()},initWithFileOoperation:function(src,dst,operation){this.src=src;this._createFileOperationView(src,dst,operation);if(this.src&&this.src.length==1&&this.src[0].directory===true){this._createMaskPanel("Mask",this.containerNode);this._createOptionPanel("Overwrite",this.containerNode)}this.addActionButtons();domStyle.set(this.containerNode,{height:"inherit"});this.fixHeight();this.resize()},startup:function(){this.inherited(arguments)}})})},"xfile/views/FileTreeView":function(){define("xfile/views/FileTreeView",
["dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dijit/Tree","dijit/layout/ContentPane","cbtree/Tree","./FileView","xide/types","xide/utils","./FileTreeViewSelectionMixin"],function(declare,domClass,lang,Tree,ContentPane,CBTree,FileView,types,utils,FileTreeViewSelectionMixin){return declare("xfile.views.FileTreeView",[ContentPane,FileView,FileTreeViewSelectionMixin],{model:null,store:null,gridStore:null,tree:null,currentItem:null,currentTreeNode:null,pMenu:null,pMenuContextItem:null,didLoad:false,
fileStoreUrl:null,sortFields:null,queryOptions:null,layoutFiles:null,gridView:null,rootPrefix:null,selectable:false,url:null,rootLabel:"",reCreateStore:true,follow:true,markVisisted:true,_previous:null,_current:null,pathToRegex:function(path){return path},initVariables:function(){this.sortFields=[{attribute:"directory",descending:true},{attribute:"name",ignoreCase:false}];this.queryOptions={deep:true,storeOnly:true};this.layoutFiles=[[{field:"name",name:"Filename",width:20},{field:"size",name:"File Size (bytes)",
width:10},{field:"directory",name:"Is Directory",width:10},{field:"path",name:"Path",width:"auto"}]]},onFileClicked:function(item){if(this.delegate&&this.delegate.setActiveItem)this.delegate.setActiveItem(item);if(item&&item.directory==null)this.getEditorDelegate().onFileClicked(item);else if(item.directory!=null&&item.directory===true)this.updateGrid(item)},onTreeClicked:function(item,nodeWidget){var isDirectory=item&&item.directory!=null&&item.directory===true;if(item&&item.root!=null&&item.root===
true)isDirectory=true;this.currentTreeDataItem=item;this.currentTreeNode=nodeWidget;if(this.contextMenuHandler)this.contextMenuHandler.pMenuContextItem=nodeWidget;if(this.delegate&&this.delegate.onTreeClicked)this.delegate.onTreeClicked(item)},initWidgets:function(data){var thiz=this;var setSelected=function(selected){this.labelNode.setAttribute("aria-selected",selected?"true":"false");domClass.toggle(this.rowNode," ui-state-active",selected)};var _TreeNode=dijit._TreeNode;if(_TreeNode)_TreeNode.prototype.setSelected=
setSelected;this.store=this.store||window["xappFileStore"];this.model=this.model||window["xappFileModel"];if(this.selectable===true){var rootItem=this.store.getItemByPath(null,this.url);if(!rootItem)console.error("have no root item!");this.model=new types.config.FILES_MODEL_PROTO({store:this.store,forceChildren:true,actualRoot:rootItem,rootLabel:this.rootLabel,iconAttr:"icon",rootId:this.url,checkedRoot:true,checkedAll:true,checkedState:true,query:{path:this.url},checkedStrict:true,queryOptions:{ignoreCase:false,
sort:[{attribute:"directory",descending:true,ignoreCase:false},{attribute:"name",descending:false,ignoreCase:false}]},labelAttr:"name"})}var treeClzProto=this.selectable===true?CBTree:Tree;this.tree=new treeClzProto({model:this.model,persist:true,checkboxMultiState:true,className:"container ui-widget-content",showRoot:this.selectable===true,icon:{iconClass:"networkIcon",indent:false},branchIcons:false,nodeIcons:false});this.onTreeCreated(this.tree);this.model.owner=this.tree;this.domNode.appendChild(this.tree.domNode);
this.tree.startup();dojo.connect(this.tree,"onClick",function(item,nodeWidget){thiz.onTreeClicked(item,nodeWidget)});dojo.connect(this.tree,"onMouseDown",function(item,nodeWidget){var tn=dijit.getEnclosingWidget(item.target);if(thiz.contextMenuHandler)if(tn){var _item=tn.params?tn.params.item:null;if(_item){thiz.pMenuContextItem=_item;thiz.activeItem=_item;if(thiz.contextMenuHandler)thiz.contextMenuHandler.pMenuContextItem=_item}}});domClass.add(this.tree.containerNode,"ui-widget");try{this._createContextMenu(this.tree)}catch(e){debugger}this.store.query({path:this.url});
this.doInitialQuery()},getTreeNode:function(path){if(this.tree&&this.tree._itemNodesMap&&this.tree._itemNodesMap[path])return this.tree._itemNodesMap[path][0];return null},checkTree:function(){var rootNode=null;if(this.tree._itemNodesMap&&this.tree._itemNodesMap["$rootDir$"]&&this.tree._itemNodesMap["$rootDir$"][0]){rootNode=this.tree._itemNodesMap["$rootDir$"][0];var c=0;for(var n in this.tree._itemNodesMap){c++;if(c>1)return true}if(rootNode&&rootNode._stateClasses)for(var i=0;i<rootNode._stateClasses.length;i++){var obj=
rootNode._stateClasses[i];if(obj.indexOf("NotLoaded")!=-1)return false}}return true},_setCurrentTreeNode:function(node){if(node){this._previous=this._current;this._current=node;if(this.markVisisted&&this._previous)domClass.add(this._previous.domNode,"ui-priority-secondary")}},onItemSelected:function(evt){if(!evt||!evt.item||!evt.view)return;var thiz=this,item=evt.item;if(!this.checkTree()){utils.destroyWidget(this.tree,true,this);setTimeout(function(){thiz.initWidgets();thiz.publish(types.EVENTS.RESIZE,
{view:thiz})},1E3);return}if(evt.view.delegate&&evt.view.delegate.openItem){var lMode=evt.view.layoutMode;if(!lMode)return;if(lMode!=types.FILE_PANEL_LAYOUT.COVER&&lMode!=types.FILE_PANEL_LAYOUT.TREE&&lMode!=types.FILE_PANEL_LAYOUT.PREVIEW){this.delegate.activePanel=evt.view.delegate;if(evt.item.directory===true&&this.follow)utils.selectTreeNodeById(this.tree,evt.item.path)}}},onDidOpenItem:function(evt){if(evt&&evt.item&&evt.item.directory===true){utils.selectTreeNodeById(this.tree,evt.item.path);
this._setCurrentTreeNode(this.getTreeNode(evt.item.path))}},startup:function(){if(this.didLoad)return;this.inherited(arguments);this.subscribe(types.EVENTS.ON_ITEM_SELECTED,this.onItemSelected);this.subscribe(types.EVENTS.ON_DID_OPEN_ITEM,this.onDidOpenItem);if(this.delegate&&this.delegate.containerNode)domClass.remove(this.delegate.containerNode,"ui-state-default");this.initVariables();this.didLoad=true}})})},"dojo/_base/xhr":function(){define("dojo/_base/xhr",["./kernel","./sniff","require","../io-query",
"../dom","../dom-form","./Deferred","./config","./json","./lang","./array","../on","../aspect","../request/watch","../request/xhr","../request/util"],function(dojo,has,require,ioq,dom,domForm,Deferred,config,json,lang,array,on,aspect,watch,_xhr,util){dojo._xhrObj=_xhr._create;var cfg=dojo.config;dojo.objectToQuery=ioq.objectToQuery;dojo.queryToObject=ioq.queryToObject;dojo.fieldToObject=domForm.fieldToObject;dojo.formToObject=domForm.toObject;dojo.formToQuery=domForm.toQuery;dojo.formToJson=domForm.toJson;
dojo._blockAsync=false;var handlers=dojo._contentHandlers=dojo.contentHandlers={"text":function(xhr){return xhr.responseText},"json":function(xhr){return json.fromJson(xhr.responseText||null)},"json-comment-filtered":function(xhr){if(!config.useCommentedJson)0&&console.warn("Consider using the standard mimetype:application/json."+" json-commenting can introduce security issues. To"+" decrease the chances of hijacking, use the standard the 'json' handler and"+" prefix your json with: {}\x26\x26\n"+
"Use djConfig.useCommentedJson\x3dtrue to turn off this message.");var value=xhr.responseText;var cStartIdx=value.indexOf("/*");var cEndIdx=value.lastIndexOf("*/");if(cStartIdx==-1||cEndIdx==-1)throw new Error("JSON was not comment filtered");return json.fromJson(value.substring(cStartIdx+2,cEndIdx))},"javascript":function(xhr){return dojo.eval(xhr.responseText)},"xml":function(xhr){var result=xhr.responseXML;if(has("ie"))if(!result||!result.documentElement){var ms=function(n){return"MSXML"+n+".DOMDocument"};
var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];array.some(dp,function(p){try{var dom=new ActiveXObject(p);dom.async=false;dom.loadXML(xhr.responseText);result=dom}catch(e){return false}return true})}return result},"json-comment-optional":function(xhr){if(xhr.responseText&&/^[^{\[]*\/\*/.test(xhr.responseText))return handlers["json-comment-filtered"](xhr);else return handlers["json"](xhr)}};dojo._ioSetArgs=function(args,canceller,okHandler,errHandler){var ioArgs={args:args,url:args.url};var formObject=
null;if(args.form){var form=dom.byId(args.form);var actnNode=form.getAttributeNode("action");ioArgs.url=ioArgs.url||(actnNode?actnNode.value:null);formObject=domForm.toObject(form)}var miArgs=[{}];if(formObject)miArgs.push(formObject);if(args.content)miArgs.push(args.content);if(args.preventCache)miArgs.push({"dojo.preventCache":(new Date).valueOf()});ioArgs.query=ioq.objectToQuery(lang.mixin.apply(null,miArgs));ioArgs.handleAs=args.handleAs||"text";var d=new Deferred(function(dfd){dfd.canceled=true;
canceller&&canceller(dfd);var err=dfd.ioArgs.error;if(!err){err=new Error("request cancelled");err.dojoType="cancel";dfd.ioArgs.error=err}return err});d.addCallback(okHandler);var ld=args.load;if(ld&&lang.isFunction(ld))d.addCallback(function(value){return ld.call(args,value,ioArgs)});var err=args.error;if(err&&lang.isFunction(err))d.addErrback(function(value){return err.call(args,value,ioArgs)});var handle=args.handle;if(handle&&lang.isFunction(handle))d.addBoth(function(value){return handle.call(args,
value,ioArgs)});d.addErrback(function(error){return errHandler(error,d)});if(cfg.ioPublish&&dojo.publish&&ioArgs.args.ioPublish!==false){d.addCallbacks(function(res){dojo.publish("/dojo/io/load",[d,res]);return res},function(res){dojo.publish("/dojo/io/error",[d,res]);return res});d.addBoth(function(res){dojo.publish("/dojo/io/done",[d,res]);return res})}d.ioArgs=ioArgs;return d};var _deferredOk=function(dfd){var ret=handlers[dfd.ioArgs.handleAs](dfd.ioArgs.xhr);return ret===undefined?null:ret};var _deferError=
function(error,dfd){if(!dfd.ioArgs.args.failOk)console.error(error);return error};var _checkPubCount=function(dfd){if(_pubCount<=0){_pubCount=0;if(cfg.ioPublish&&dojo.publish&&(!dfd||dfd&&dfd.ioArgs.args.ioPublish!==false))dojo.publish("/dojo/io/stop")}};var _pubCount=0;aspect.after(watch,"_onAction",function(){_pubCount-=1});aspect.after(watch,"_onInFlight",_checkPubCount);dojo._ioCancelAll=watch.cancelAll;dojo._ioNotifyStart=function(dfd){if(cfg.ioPublish&&dojo.publish&&dfd.ioArgs.args.ioPublish!==
false){if(!_pubCount)dojo.publish("/dojo/io/start");_pubCount+=1;dojo.publish("/dojo/io/send",[dfd])}};dojo._ioWatch=function(dfd,validCheck,ioCheck,resHandle){var args=dfd.ioArgs.options=dfd.ioArgs.args;lang.mixin(dfd,{response:dfd.ioArgs,isValid:function(response){return validCheck(dfd)},isReady:function(response){return ioCheck(dfd)},handleResponse:function(response){return resHandle(dfd)}});watch(dfd);_checkPubCount(dfd)};var _defaultContentType="application/x-www-form-urlencoded";dojo._ioAddQueryToUrl=
function(ioArgs){if(ioArgs.query.length){ioArgs.url+=(ioArgs.url.indexOf("?")==-1?"?":"\x26")+ioArgs.query;ioArgs.query=null}};dojo.xhr=function(method,args,hasBody){var rDfd;var dfd=dojo._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel()},_deferredOk,_deferError);var ioArgs=dfd.ioArgs;if("postData"in args)ioArgs.query=args.postData;else if("putData"in args)ioArgs.query=args.putData;else if("rawBody"in args)ioArgs.query=args.rawBody;else if(arguments.length>2&&!hasBody||"POST|PUT".indexOf(method.toUpperCase())===
-1)dojo._ioAddQueryToUrl(ioArgs);var options={method:method,handleAs:"text",timeout:args.timeout,withCredentials:args.withCredentials,ioArgs:ioArgs};if(typeof args.headers!=="undefined")options.headers=args.headers;if(typeof args.contentType!=="undefined"){if(!options.headers)options.headers={};options.headers["Content-Type"]=args.contentType}if(typeof ioArgs.query!=="undefined")options.data=ioArgs.query;if(typeof args.sync!=="undefined")options.sync=args.sync;dojo._ioNotifyStart(dfd);try{rDfd=_xhr(ioArgs.url,
options,true)}catch(e){dfd.cancel();return dfd}dfd.ioArgs.xhr=rDfd.response.xhr;rDfd.then(function(){dfd.resolve(dfd)}).otherwise(function(error){ioArgs.error=error;if(error.response){error.status=error.response.status;error.responseText=error.response.text;error.xhr=error.response.xhr}dfd.reject(error)});return dfd};dojo.xhrGet=function(args){return dojo.xhr("GET",args)};dojo.rawXhrPost=dojo.xhrPost=function(args){return dojo.xhr("POST",args,true)};dojo.rawXhrPut=dojo.xhrPut=function(args){return dojo.xhr("PUT",
args,true)};dojo.xhrDelete=function(args){return dojo.xhr("DELETE",args)};dojo._isDocumentOk=function(x){return util.checkStatus(x.status)};dojo._getText=function(url){var result;dojo.xhrGet({url:url,sync:true,load:function(text){result=text}});return result};lang.mixin(dojo.xhr,{_xhrObj:dojo._xhrObj,fieldToObject:domForm.fieldToObject,formToObject:domForm.toObject,objectToQuery:ioq.objectToQuery,formToQuery:domForm.toQuery,formToJson:domForm.toJson,queryToObject:ioq.queryToObject,contentHandlers:handlers,
_ioSetArgs:dojo._ioSetArgs,_ioCancelAll:dojo._ioCancelAll,_ioNotifyStart:dojo._ioNotifyStart,_ioWatch:dojo._ioWatch,_ioAddQueryToUrl:dojo._ioAddQueryToUrl,_isDocumentOk:dojo._isDocumentOk,_getText:dojo._getText,get:dojo.xhrGet,post:dojo.xhrPost,put:dojo.xhrPut,del:dojo.xhrDelete});return dojo.xhr})},"dijit/DialogUnderlay":function(){define("dijit/DialogUnderlay",["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-attr","dojo/dom-style","dojo/on","dojo/window","./_Widget","./_TemplatedMixin",
"./BackgroundIframe","./Viewport","./main"],function(declare,lang,aspect,domAttr,domStyle,on,winUtils,_Widget,_TemplatedMixin,BackgroundIframe,Viewport,dijit){var DialogUnderlay=declare("dijit.DialogUnderlay",[_Widget,_TemplatedMixin],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(id){domAttr.set(this.node,
"id",id+"_underlay");this._set("dialogId",id)},_setClassAttr:function(clazz){this.node.className="dijitDialogUnderlay "+clazz;this._set("class",clazz)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var viewport=winUtils.getBox(this.ownerDocument);os.top=viewport.t+"px";os.left=viewport.l+"px";is.width=
viewport.w+"px";is.height=viewport.h+"px";os.display="block"},show:function(){this.domNode.style.display="block";this.open=true;this.layout();this.bgIframe=new BackgroundIframe(this.domNode,true);var win=winUtils.get(this.ownerDocument);this._modalConnects=[Viewport.on("resize",lang.hitch(this,"layout")),on(win,"scroll",lang.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none";while(this._modalConnects.length)this._modalConnects.pop().remove();
this.open=false},destroy:function(){while(this._modalConnects.length)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});DialogUnderlay.show=function(attrs,zIndex){var underlay=DialogUnderlay._singleton;if(!underlay||underlay._destroyed)underlay=dijit._underlay=DialogUnderlay._singleton=new DialogUnderlay(attrs);else if(attrs)underlay.set(attrs);domStyle.set(underlay.domNode,"zIndex",zIndex);if(!underlay.open)underlay.show()};DialogUnderlay.hide=function(){var underlay=
DialogUnderlay._singleton;if(underlay&&!underlay._destroyed)underlay.hide()};return DialogUnderlay})},"xblox/model/Block":function(){define("xblox/model/Block",["dojo/_base/declare","dojo/Deferred","dojo/_base/lang","./ModelBase","xide/factory","xide/utils"],function(declare,Deferred,lang,ModelBase,factory,utils){return declare("xblox.model.Block",[ModelBase],{serializeMe:true,name:null,description:"No Description",enabled:true,items:null,parent:null,canDelete:true,renderBlockIcon:true,_return:null,
_lastResult:null,_deferredObject:null,_currentIndex:0,_lastRunSettings:null,_onLoaded:false,beanType:"BLOCK",ignoreSerialize:["_currentIndex","_deferredObject","_return","parent","ignoreSerialize","_lastRunSettings","_onLoaded","beanType"],canAdd:function(){return null},addToEnd:function(array1,array2){if(array2&&array1.length!=null&&array2.length!=null)array1.push.apply(array1,array2);else console.error("add to end failed : invalid args in"+this.name);return array1},removeBlock:function(what,del){if(what){if(del!==
false&&what.empty)what.empty();if(del!==false)delete what.items;what.parent=null;if(this.items)this.items.remove(what)}},_getContainer:function(item){return"items"},empty:function(what){try{this._empty(what)}catch(e){debugger}},_empty:function(what){var data=what||this.items;if(data)for(var i=0;i<data.length;i++){var subBlock=data[i];if(subBlock&&subBlock.empty)subBlock.empty();if(subBlock&&this.scope&&this.scope.blockStore)this.scope.blockStore.remove(subBlock.id)}},containsItem:function(data,obj){var i=
data.length;while(i--)if(data[i].id===obj.id)return true;return false},indexOf:function(data,obj){var i=data.length;while(i--)if(data[i].id===obj.id)return i;return-1},_getBlock:function(dir){try{var item=this;if(!item||!item.parentId)return false;var parent=this.scope.getBlockById(item.parentId);if(!parent)return null;var items=parent[parent._getContainer(item)];if(!items||items.length<2||!this.containsItem(items,item))return null;var cIndex=this.indexOf(items,item);if(cIndex+dir<0)return false;
var upperItem=items[cIndex+dir];if(upperItem)return upperItem}catch(e){debugger}return null},getPreviousBlock:function(){return this._getBlock(-1)},getNextBlock:function(){return this._getBlock(1)},getPreviousResult:function(){var parent=this.getPreviousBlock()||this.getParent();if(parent&&parent._lastResult!=null)if(this.isArray(parent._lastResult))return parent._lastResult;else return[parent._lastResult];return null},_getArg:function(val){var _float=parseFloat(val);if(!isNaN(_float))return _float;
else{if(val==="true"||val==="false")return utils.toBoolean(val);return val}return val},getArgs:function(){var result=[];if(this.args){result=utils.getJson(this.args);if(result!=null&&this.isArray(result));}if(result.length==0&&this.args&&this.args.length&&this.isString(this.args))if(this.args.indexOf(",")!==-1){var _splitted=this.args.split(",");for(var i=0;i<_splitted.length;i++){var _float=parseFloat(_splitted[i]);if(!isNaN(_float))result.push(_float);else if(_splitted[i]==="true"||_splitted[i]===
"false")result.push(utils.toBoolean(_splitted[i]));else result.push(_splitted[i])}return result}else result=[this._getArg(this.args)];var previousResult=this.getPreviousResult();if(previousResult!=null)if(lang.isArray(previousResult)&&previousResult.length==1)result.push(previousResult[0]);else result.push(previousResult);return result},canMove:function(item,dir){try{item=item||this;if(!item||!item.parentId)return false;var parent=this.scope.getBlockById(item.parentId);if(!parent)return false;var items=
parent[parent._getContainer(item)];if(!items||items.length<2||!this.containsItem(items,item))return false;var cIndex=this.indexOf(items,item);if(cIndex+dir<0)return false;var upperItem=items[cIndex+dir];if(!upperItem)return false}catch(e){debugger}return true},move:function(item,dir){item=item||this;if(!item||!item.parentId)return false;var parent=this.scope.getBlockById(item.parentId);if(!parent)return false;var items=parent[parent._getContainer(item)];if(!items||items.length<2||!this.containsItem(items,
item))return false;var cIndex=this.indexOf(items,item);if(cIndex+dir<0)return false;var upperItem=items[cIndex+dir];if(!upperItem)return false;items[cIndex+dir]=item;items[cIndex]=upperItem;return true},remove:function(what){if(this.parentId!=null&&this.parent==null)this.parent=this.scope.getBlockById(this.parentId);if(this.parent&&this.parent.removeBlock){this.parent.removeBlock(this);return}what=what||this;if(what){if(what.empty)what.empty();delete what.items;what.parent=null;if(this.items)this.items.remove(what)}},
prepareBlockContructorArgs:function(ctorArgs){if(!ctorArgs)ctorArgs={};if(!ctorArgs["id"])ctorArgs["id"]=this.createUUID();if(!ctorArgs["items"])ctorArgs["items"]=[];if(!ctorArgs["scope"]);},_add:function(proto,ctrArgs,where){var _block=null;try{if(ctrArgs){this.prepareBlockContructorArgs(ctrArgs);_block=factory.createBlock(proto,ctrArgs)}else if(ctrArgs==null)_block=proto;_block.scope=this.scope;if(this.scope)this.scope.registerBlock(_block);_block.parent=this;_block.parentId=this.id;if(where==null){if(!this.items)this.items=
[];this.items.push(_block)}else if(this[where]&&this[where].push)this[where].push(_block);return _block}catch(e){debugger}return null},add:function(proto,ctrArgs,where){return this._add(proto,ctrArgs,where)},getContext:function(){if(this.scope.context&&this.scope.context.instance)return this.scope.context.instance;return null},resolved:function(){if(this._deferredObject){this._deferredObject.resolve();delete this._deferredObject}},_solve:function(scope,settings){settings=settings||{highlight:false};
var ret=[];for(var n=0;n<this.items.length;n++){var block=this.items[n];this.addToEnd(ret,block.solve(scope,settings))}return ret},solve:function(scope,settings){settings=settings||{highlight:false};var ret=[];for(var n=0;n<this.items.length;n++){var block=this.items[n];this.addToEnd(ret,block.solve(scope,settings))}return ret},solveMany:function(scope,settings){if(!this._lastRunSettings&&settings)this._lastRunSettings=settings;settings=this._lastRunSettings||settings;this._currentIndex=0;this._return=
[];var ret=[],items=this[this._getContainer()];if(items.length){var res=this.runFrom(items,0,settings);this.onSuccess(this,settings);return res}else this.onSuccess(this,settings);return ret},runFrom:function(blocks,index,settings){var thiz=this,blocks=blocks||this.items;var onFinishBlock=function(block,results){block._lastResult=block._lastResult||results;thiz._currentIndex++;thiz.runFrom(blocks,thiz._currentIndex,settings)};var wireBlock=function(block){block._deferredObject.then(function(results){onFinishBlock(block,
results)})};if(blocks.length)for(var n=index;n<blocks.length;n++){var block=blocks[n];if(block.deferred===true){block._deferredObject=new Deferred;this._currentIndex=n;wireBlock(block);this.addToEnd(this._return,block.solve(this.scope,settings));break}else this.addToEnd(this._return,block.solve(this.scope,settings))}else this.onSuccess(this,settings);return this._return},onActivity:function(block,settings,event){this.publish(event,null,block)},onRun:function(block,settings){var highlight=settings&&
settings.highlight;if(block&&highlight)this.onActivity(block,settings,this.types.EVENTS.ON_RUN_BLOCK)},onFailed:function(block,settings){var highlight=settings&&settings.highlight;if(block&&highlight)this.onActivity(block,settings,this.types.EVENTS.ON_RUN_BLOCK_FAILED)},onSuccess:function(block,settings){var highlight=settings&&settings.highlight;if(block&&highlight)this.onActivity(block,settings,this.types.EVENTS.ON_RUN_BLOCK_SUCCESS)},canDisable:function(){return true},getParent:function(){if(this.parentId)return this.scope.getBlockById(this.parentId);
return null},getDefaultFields:function(){var fields=[];if(this.canDisable&&this.canDisable()!==false)fields.push(this.utils.createCI("enabled",0,this.enabled,{group:"General",title:"Enabled",dst:"enabled"}));fields.push(this.utils.createCI("condition",26,this.description,{group:"Description",title:"Description",dst:"description",useACE:false}));return fields},getFields:function(){return this.getDefaultFields()},toFriendlyName:function(str){var special=["[","]","(",")","{","}"];for(var n=0;n<special.length;n++)str=
str.replace(special[n],"");str=utils.replaceAll("\x3d\x3d"," equals ",str);str=utils.replaceAll("'","",str);return str},getIconClass:function(){return null},getBlockIcon:function(symbol){symbol=symbol||"";return this.renderBlockIcon==true?'\x3cspan class\x3d"xBloxIcon"\x3e'+symbol+"\x3c/span\x3e":""},serializeField:function(name){return this.ignoreSerialize.indexOf(name)==-1},onLoad:function(){},activate:function(){},deactivate:function(){},onFieldsRendered:function(block,cis){},onChangeField:function(field,
newValue){if(field=="enabled")if(newValue==true)this.activate();else this.deactivate()}})})},"xfile/views/FileGridViewRendering":function(){define("xfile/views/FileGridViewRendering",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/_base/Deferred","dojo/on","dojo/_base/lang","dgrid/OnDemandGrid","dgrid/Selection","dgrid/Keyboard","dgrid/extensions/ColumnResizer","dgrid/extensions/DnD","dgrid/extensions/Pagination","dgrid/extensions/ColumnHider","put-selector/put","xide/utils","xide/types",
"xide/factory","./FileGridKeyboard","./DndSource"],function(array,declare,domClass,Deferred,on,lang,Grid,Selection,Keyboard,ColumnResizer,DnD,Pagination,ColumnHider,put,utils,types,factory,FileGridKeyboard,DndSource){return declare("xfiles.views.FileGridViewRendering",null,{thumbSize:"100",resizeThumb:true,_parseConfig:function(config){var thiz=this;var columnsOut=[];if(!config){config={};var columns={};columns[types.FILE_GRID_COLUMNS.NAME]=true;columns[types.FILE_GRID_COLUMNS.SIZE]=true;columns[types.FILE_GRID_COLUMNS.MODIFIED]=
true;config.columnFlags=columns}if(this.config.layoutMode==null)this.config.layoutMode=types.FILE_PANEL_LAYOUT.LIST;if(this.config.layoutMode==types.FILE_PANEL_LAYOUT.THUMB)config.columnFlags[types.FILE_GRID_COLUMNS.SIZE]=false;if(config.columnFlags[types.FILE_GRID_COLUMNS.NAME])columnsOut.push({label:"Name",field:"name",sortable:true,editorx:"dijit/form/TextBox",formatter:function(value,obj){var directory=obj&&obj.directory!=null&&obj.directory===true;var no_access=obj.read===false&&obj.write===
false;var isBack=obj.name=="..";var icon="";var imageClass="";var useCSS=false;if(directory)if(isBack){imageClass="fa fa-level-up itemFolderList";useCSS=true}else if(!no_access){imageClass="fa fa-folder itemFolderList";useCSS=true}else{imageClass="fa fa-lock itemFolderList";useCSS=true}else if(!no_access){imageClass="itemFolderList fa "+utils.getIconClass(obj.path);useCSS=true}else{imageClass="fa fa-lock itemFolderList";useCSS=true}var label=obj.showPath===true?obj.path:value;if(!useCSS)return'\x3cimg class\x3d"fileGridIconCell" src\x3d"'+
icon+' "/\x3e\x3cspan class\x3d"fileGridNameCell"\x3e'+label+"\x3c/span\x3e";else return'\x3cspan class\x3d"'+imageClass+'""\x3e\x3c/span\x3e\x3cspan class\x3d"name fileGridNameNode" style\x3d"vertical-align: middle;padding-top: 0px"\x3e'+label+"\x3c/span\x3e"}});if(config.columnFlags[types.FILE_GRID_COLUMNS.SIZE])columnsOut.push({label:"Size",field:"size"});if(config.columnFlags[types.FILE_GRID_COLUMNS.MODIFIED])columnsOut.push({label:"Modified",field:"modified",sortable:true,formatter:function(value,
obj){var directory=!obj.directory==null;var dateStr="";if(directory);else return thiz.formatDateSimple(value);return dateStr}});config.columns=columnsOut;return config},_createGrid:function(store,pagination){if(this.grid){utils.destroyWidget(this.grid);this.grid=null}var _store=store||this.store;_store.defaultQueryOptions=this.getQueryOptions();this.config=this._parseConfig(this.config);var thiz=this;var renderers={gallery:function(obj,options){return thiz.itemRendererGallery(obj)},details:function(obj,
options){return thiz.itemRendererDetails(obj,options)},table:function(obj,options){return thiz.itemRendererTable(this,obj,options);var div=put("div.collapsed",Grid.prototype.renderRow.apply(this,arguments)),expando=put(div,"div.expando","");return div}};this.renderers=renderers;this.config.selectionMode="extended";var SharedDndGridSource=declare(DndSource,{copyState2:function(){return false},onDropInternal:function(nodes,copy,target){var grid=this.grid;var items=[];for(var i=0;i<nodes.length;i++){var obj=
nodes[i];var row=grid.row(obj);if(row&&row.data&&row.data.name!=="..")items.push(row.data)}if(target&&items.length&&target.directory===true){if(target.name===".."){var parents=target._S.getParents(target);if(parents)target=parents[0]}thiz.onDrop(items,target,grid,copy)}},onDropExternal:function(source,nodes,copy,targetItem){var grid=this.grid;var items=[];array.forEach(nodes,function(node){Deferred.when(source.getObject(node),function(object){object.added=grid.addedSide;if(object.name!=="..")items.push(object)})});
thiz.onDrop(items,targetItem,grid,copy)}});var isMobile=/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase());var canDND=isMobile==false&&this.config.ALLOWED_ACTIONS[types.OPERATION_INT.DND]==1;if(this.config.layoutMode==types.FILE_PANEL_LAYOUT.LIST){var baseClasses=canDND?[Grid,Selection,Keyboard,DnD]:[Grid,Selection,Keyboard];if(pagination===true)baseClasses.push(Pagination);if(this.config.PANEL_OPTIONS.ALLOW_COLUMN_HIDE)baseClasses.push(ColumnHider);
if(this.config.PANEL_OPTIONS.ALLOW_COLUMN_HIDE)baseClasses.push(ColumnHider);if(this.config.PANEL_OPTIONS.ALLOW_COLUMN_RESIZE)baseClasses.push(ColumnResizer);this.grid=new (declare(baseClasses))({keepScrollPosition:true,dndConstructor:SharedDndGridSource,columns:this.config.columns,selectionMode:this.config.selectionMode,store:_store,rowsPerPage:20,renderRow:renderers.table,delegate:this,deselectOnRefresh:false,cellNavigation:false,dndParams:{allowNested:true,checkAcceptance:function(source,nodes){return true},
isSource:true}},dojo.doc.createElement("div"))}else if(this.config.layoutMode==types.FILE_PANEL_LAYOUT.THUMB)try{var baseClasses=canDND?[Grid,Selection,FileGridKeyboard,DnD]:[Grid,Selection,FileGridKeyboard];this.grid=new (declare(baseClasses))({keepScrollPosition:true,dndConstructor:SharedDndGridSource,columns:this.config.columns,selectionMode:this.config.selectionMode,store:_store,renderRow:renderers.table,delegate:this,deselectOnRefresh:false,cellNavigation:false,dndParams:{allowNested:true,checkAcceptance:function(source,
nodes){return true},isSource:true}},dojo.doc.createElement("div"))}catch(e){}renderers.table=this.grid.renderRow;this.containerNode.appendChild(this.grid.domNode);if(this.autoHeight);this.grid.startup();var gridClass=this.config.layoutMode==types.FILE_PANEL_LAYOUT.LIST?"table":"gallery";domClass.add(this.grid.domNode,gridClass);this.grid.cellNavigation=this.config.layoutMode==types.FILE_PANEL_LAYOUT.LIST;this.viewClickHandler(gridClass);this.currentLayoutClass=gridClass;this.grid.on("dgrid-editor-show",
function(evt){thiz.editing=true;thiz.editContext=evt});this.grid.on("dgrid-editor-hide",function(evt){thiz.editing=false});this.grid.on("keydown",function(evt){thiz.onKeyEvent(evt)});this.grid.on("keyup",function(evt){thiz.onKeyEvent(evt)});this.grid.on("click",function(evt){if(evt&&evt.target&&domClass.contains(evt.target,"dgrid-content"))thiz.onContainerFocus();thiz.onMouseEvent(evt)});this.grid.on("dgrid-select",function(data){thiz.getNumberOfItems();if(this.isForcedFocus)return;if(data&&data.rows&&
data.rows.length==1){thiz.prevItem=data.rows[0].data;thiz.prevFocusNode=data.rows[0].element;if(!thiz.ctlrKeyDown)thiz.onGridFileSelected(data.rows[0].data,data.rows[0].element);else thiz.onGridFilesSelected(data.rows);thiz.lastSelectedRowItem=data.rows[0].data}else if(data&&data.rows&&data.rows.length>=1)thiz.onGridFilesSelected(data.rows)});this.grid.on(".dgrid-content:contextmenu",function(evt){var row=thiz.grid.row(evt);thiz.activeItem=row&&row.data});this.grid.on("dblclick",function(evt){thiz.onMouseDoubleClickEvent(evt)});
on.once(thiz.grid,"dgrid-refresh-complete",function(){thiz.onGridRefreshed()});if(this.config.PANEL_OPTIONS.ALLOW_CONTEXT_MENU)this._createContextMenu(this.grid);var hider=utils.find(".dgrid-hider-menu",this.grid.domNode,false);if(hider&&hider[0])domClass.add(hider[0],"ui-widget-content")},_recreateGrid:function(){this._createGrid();this.setDisplayMode(this.currentLayoutClass)},getThemePath:function(){return this.themeRoot+this.theme},initVariables:function(){if(this.config){lang.mixin(this,this.config);
if(!this.config.columnFlags){var columns={};columns[types.FILE_GRID_COLUMNS.NAME]=true;columns[types.FILE_GRID_COLUMNS.SIZE]=true;columns[types.FILE_GRID_COLUMNS.MODIFIED]=true;this.config.columnFlags=columns}}this.queryOptions={deep:true,storeOnly:true}},viewClickHandler:function(view){this.grid.renderRow=this.renderers[view];try{put(this.grid.domNode,"!table!gallery!details."+view)}catch(e){}this.grid.set("showHeader",view=="table");try{this.grid.refresh()}catch(e){}},setDisplayMode:function(mode){if(mode===
"table")this.onListMode(this);else if(mode==="gallery")this.onGalleryMode(this)},onListMode:function(ref){this.config.layoutMode=types.FILE_PANEL_LAYOUT.LIST;ref.viewClickHandler("table");domClass.remove(this.grid.domNode,this.currentLayoutClass);domClass.add(this.grid.domNode,"table");this.grid.cellNavigation=false;this.currentLayoutClass="table"},onGalleryMode:function(ref){this.config.layoutMode=types.FILE_PANEL_LAYOUT.THUMB;this._recreateGrid();ref.viewClickHandler("gallery");this.grid.cellNavigation=
false;domClass.remove(this.grid.domNode,this.currentLayoutClass);domClass.add(this.grid.domNode,"gallery");this.currentLayoutClass="gallery"},itemRendererDetails:function(obj){var div=put("div");div.innerHTML='\x3cdiv class\x3d"icon" style\x3d"background-image:url(resources/'+obj.icon+'-64.png);"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"name"\x3e'+obj.name+'\x3c/div\x3e\x3cdiv class\x3d"summary"\x3e'+obj.summary+"\x3c/div\x3e";return div},itemRendererTable:function(thizGrid,obj,options){var thiz=
this;var div=put("div.collapsed",Grid.prototype.renderRow.apply(thizGrid,[obj,options]));return div;var div=put("div");div.innerHTML='\x3cdiv class\x3d"icon" style\x3d"background-image:url(resources/'+obj.icon+'-64.png);"\x3e\x26nbsp;\x3c/div\x3e\x3cdiv class\x3d"name"\x3e'+obj.name+'\x3c/div\x3e\x3cdiv class\x3d"summary"\x3e'+obj.summary+"\x3c/div\x3e";return div},getImageUrl:function(item){if(this.delegate&&this.delegate.getImageUrl){var params=null;if(this.resizeThumb)params={width:this.thumbSize};
return this.delegate.getImageUrl(item,null,params)}return null},itemRendererGallery:function(obj){var thiz=this;var div=put("span.fileGridCell");var icon=obj.icon;var no_access=obj.read===false&&obj.write===false;var isBack=obj.name=="..";var directory=obj&&obj.directory!=null&&obj.directory===true;var imageClass="";var useCSS=false;if(directory)if(isBack){imageClass="fa fa-level-up fa-5x itemFolder";useCSS=true}else if(!no_access){imageClass="fa fa-folder fa-5x itemFolder";useCSS=true}else{imageClass=
"fa fa-lock fa-5x itemFolder";useCSS=true}else{imageClass="itemIcon";if(no_access){imageClass="fa fa-lock fa-5x itemFolder";useCSS=true}else if(utils.isImage(obj.path)){var url=this.getImageUrl(obj);if(url)obj.icon=url;else obj.icon=thiz.config.REPO_URL+"/"+obj.path;imageClass="imageFile"}else{imageClass="fa fa-5x "+utils.getIconClass(obj.path);useCSS=true}}var label=obj.showPath===true?obj.path:obj.name;if(useCSS){div.innerHTML='\x3cspan class\x3d"'+imageClass+'""\x3e\x3c/span\x3e \x3cdiv class\x3d"name" style\x3d""\x3e'+
label+"\x3c/div\x3e";return div}if(directory)div.innerHTML='\x3cspan class\x3d"'+imageClass+'""\x3e\x3c/span\x3e \x3cdiv class\x3d"name"\x3e'+obj.name+"\x3c/div\x3e";else div.innerHTML='\x3cimg class\x3d"'+imageClass+'" src\x3d"'+obj.icon+'"/\x3e\x26nbsp;\x3cdiv class\x3d"name"\x3e'+obj.name+"\x3c/div\x3e";return div},createControls:function(){if(this.hasTrail&&this.hasControls){if(this.trail.listButton){utils.destroyWidget(this.trail.listButton);this.trail.listButton=null}if(this.trail.galleryButton){utils.destroyWidget(this.trail.galleryButton);
this.trail.galleryButton=null}this.trail.listButton=factory.createButton(this.trail.domNode,"","fileGridToolbarButton","float:right;","List",this.onListMode,this);this.trail.galleryButton=factory.createButton(this.trail.domNode,"","fileGridToolbarButton","float:right;","Thumb",this.onGalleryMode,this)}},formatDateSimple:function(data,format){var momentUnix=moment.unix(data);var dateStr=momentUnix.format("YYYY MMMM Do, h:mm:ss a");return dateStr},formatDate:function(dateObject,format){if(!format)format=
"yyyy-MM-dd h:mm:ss";format=format.replace("d",dateObject.getDate()<10?"0"+dateObject.getDate():dateObject.getDate());format=format.replace("D",dateObject.getDay());format=format.replace("Y",dateObject.getFullYear());format=format.replace("y",dateObject.getYear());var month=dateObject.getMonth()+1;format=format.replace("m",month<10?"0"+month:month);format=format.replace("H",(dateObject.getHours()<10?"0":"")+dateObject.getHours());format=format.replace("h",dateObject.getHours()%12||12);format=format.replace("p",
dateObject.getHours()<12?"am":"pm");format=format.replace("P",dateObject.getHours()<12?"AM":"PM");format=format.replace("i",(dateObject.getMinutes()<10?"0":"")+dateObject.getMinutes());format=format.replace("s",(dateObject.getSeconds()<10?"0":"")+dateObject.getSeconds());return format},initWidgets:function(data){var thiz=this;this.initVariables();if(this.hasTrail)if(!this.trail){this.trail=window["xappFileTrail"];this.containerNode.appendChild(this.trail.domNode);this.trail.startup()}this._createGrid()},
childSelector:".dgrid-row",focusNode:function(node){this.focusChild(node)}})})},"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(declare,domAttr){return declare("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){var original=this.checked;this._set("checked",!original);var ret=this.inherited(arguments);this.set("checked",ret?this.checked:original);return ret},_setCheckedAttr:function(value,
priorityChange){this._set("checked",value);var node=this.focusNode||this.domNode;if(this._created)if(domAttr.get(node,"checked")!=!!value)domAttr.set(node,"checked",!!value);node.setAttribute(this._aria_attr,String(value));this._handleOnChange(value,priorityChange)},postCreate:function(){this.inherited(arguments);var node=this.focusNode||this.domNode;if(this.checked)node.setAttribute("checked","checked")},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false)}})})},
"xstyle/css":function(){define("xstyle/css",["require"],function(moduleRequire){function testElementStyle(tag,id,property){var docElement=document.documentElement;var testDiv=docElement.insertBefore(document.createElement(tag),docElement.firstChild);testDiv.id=id;var styleValue=(testDiv.currentStyle||getComputedStyle(testDiv,null))[property];docElement.removeChild(testDiv);return styleValue}return{load:function(resourceDef,require,callback,config){var url=require.toUrl(resourceDef);var cachedCss=
require.cache&&require.cache["url:"+url];if(cachedCss){if(cachedCss.xCss){var parser=cachedCss.parser;var xCss=cachedCss.xCss;cachedCss=cachedCss.cssText}moduleRequire(["./util/createStyleSheet"],function(createStyleSheet){createStyleSheet(cachedCss)});if(xCss);return checkForParser()}function checkForParser(){var parser=testElementStyle("x-parse",null,"content");if(parser&&parser!="none")require([eval(parser)],callback);else callback()}var displayStyle=testElementStyle("div",resourceDef.replace(/\//g,
"-").replace(/\..*/,"")+"-loaded","display");if(displayStyle=="none")return checkForParser();moduleRequire(["./core/load-css"],function(load){load(url,checkForParser)})}}})},"xblox/model/Contains":function(){define("xblox/model/Contains",["dojo/_base/declare"],function(declare){return declare("xblox.model.Contains",null,{mayHaveChildren:function(parent){var items=this[this._getContainer()];return items!=null&&items.length>0},getChildren:function(parent){return this[this._getContainer()]},canAdd:function(){return[]},
solve:function(scope,settings,run,error){if(!this._lastRunSettings&&settings)this._lastRunSettings=settings;settings=this._lastRunSettings||settings;this._currentIndex=0;this._return=[];var ret=[],items=this[this._getContainer()];if(items.length){var res=this.runFrom(items,0,settings);this.onSuccess(this,settings);return res}else this.onSuccess(this,settings);return ret}})})},"xblox/model/logic/ElseIfBlock":function(){define("xblox/model/logic/ElseIfBlock",["dojo/_base/declare","xblox/model/Block"],
function(declare,Block){return declare("xblox.model.logic.ElseIfBlock",[Block],{condition:null,consequent:null,mayHaveChildren:function(){return this.consequent!=null},getChildren:function(parent){var result=[];if(this.consequent)result.push(this.consequent);return result},name:"else if",toText:function(){return this.name+" "+this.condition},_checkCondition:function(scope){return scope.parseExpression(this.condition)}})})},"dcl/dcl":function(){(function(factory){if(typeof define!="undefined")define("dcl/dcl",
["./mini"],factory);else if(typeof module!="undefined")module.exports=factory(require("./mini"));else dcl=factory(dcl)})(function(dcl){function nop(){}var Advice=dcl(dcl.Super,{constructor:function(){this.b=this.f.before;this.a=this.f.after;this.f=this.f.around}});function advise(f){return dcl._mk(f,Advice)}function makeAOPStub(b,a,f){var sb=b||nop,sa=a||nop,sf=f||nop,x=function(){var r;sb.apply(this,arguments);try{r=sf.apply(this,arguments)}catch(e){r=e}sa.call(this,arguments,r);if(r instanceof Error)throw r;
return r};x.advices={b:b,a:a,f:f};return x}function chain(id){return function(ctor,name){var m=ctor._m,c;if(m){c=+m.w[name]||0;if(c&&c!=id)dcl._e("set chaining",name,ctor,id,c);m.w[name]=id}}}dcl.mix(dcl,{Advice:Advice,advise:advise,before:function(f){return dcl.advise({before:f})},after:function(f){return dcl.advise({after:f})},around:dcl.superCall,chainBefore:chain(1),chainAfter:chain(2),isInstanceOf:function(o,ctor){if(o instanceof ctor)return true;var t=o.constructor._m,i;if(t)for(t=t.b,i=t.length-
1;i>=0;--i)if(t[i]===ctor)return true;return false},_sb:function(id,bases,name,chains){var f=chains[name]=dcl._ec(bases,name,"f"),b=dcl._ec(bases,name,"b").reverse(),a=dcl._ec(bases,name,"a");f=id?dcl._st(f,id==1?function(f){return dcl._sc(f.reverse())}:dcl._sc,name):dcl._ss(f,name);return!b.length&&!a.length?f||function(){}:makeAOPStub(dcl._sc(b),dcl._sc(a),f)}});return dcl})},"xide/utils/WidgetUtils":function(){define(["xide/utils","xide/types"],function(utils,types){utils.getWidgetType=function(type){var res=
"";if(type==types.ECIType.ENUMERATION)res="Select";if(type==types.ECIType.STRING)res="TextBox";if(type==types.ECIType.ICON)res="TextBox";if(type==types.ECIType.REFERENCE)res="Button";if(type==types.ECIType.EXPRESSION)res="Expression";if(type==types.ECIType.EXPRESSION_EDITOR)res="ExpressionEditor";if(type==types.ECIType.ARGUMENT)res="Arguments";if(type==types.ECIType.WIDGET_REFERENCE)res="WidgetReference";if(type==types.ECIType.DOM_PROPERTIES)res="DomStyleProperties";return res};utils.getWidgetGroupTitle=
function(widgetGroup){switch(widgetGroup){case types.WidgetGroup.General:return types.WidgetGroupTitle.General;case types.WidgetGroup.Visual:return types.WidgetGroupTitle.Visual;case types.WidgetGroup.All:return types.WidgetGroupTitle.All;case types.WidgetGroup.Grouping:return types.WidgetGroupTitle.Grouping;case types.WidgetGroup.Queries:return types.WidgetGroupTitle.Queries;case types.WidgetGroup.Schemas:return types.WidgetGroupTitle.Schemas;case types.WidgetGroup.Relations:return types.WidgetGroupTitle.Relations;
case types.WidgetGroup.Scripts:return types.WidgetGroupTitle.Scripts;case types.WidgetGroup.Server:return types.WidgetGroupTitle.Server;case types.WidgetGroup.User:return types.WidgetGroupTitle.User;case types.WidgetGroup.System:return types.WidgetGroupTitle.System}return types.WidgetGroupTitle.Unknown};utils.getWidgetGroup=function(ci){if(!ci||utils.toBoolean(ci.visible)===false)return types.WidgetGroup.Hidden;var ciName=utils.toString(ci.name);if(ciName==types.DRIVER_PROPERTY.CF_DRIVER_NAME||ciName==
types.DRIVER_PROPERTY.CF_DRIVER_ICON)return types.WidgetGroup.Visual;if(ciName==types.DRIVER_PROPERTY.CF_DRIVER_CLASS)return types.WidgetGroup.System;return types.WidgetGroup.Unknown};utils.recursiveHunt=function(lookfor,model,buildme,item){if(item){var id=model.getIdentity(item);buildme.push(id);if(id==lookfor)return buildme;for(var idx in item.children){var buildmebranch=buildme.slice(0);var r=utils.recursiveHunt(lookfor,model,buildmebranch,item.children[idx]);if(r)return r}}return undefined};utils.selectTreeNodeById=
function(tree,lookfor){if(!tree)return;var buildme=[];var result=utils.recursiveHunt(lookfor,tree.model,buildme,tree.model.root);if(result&&result.length>0)tree._setPathAttr(result);return result};return utils})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(arrayUtil){return function(query,options){switch(typeof query){default:throw new Error("Can not query with a "+typeof query);case "object":case "undefined":var queryObject=query;query=function(object){for(var key in queryObject){var required=
queryObject[key];if(required&&required.test){if(!required.test(object[key],object))return false}else if(required!=object[key])return false}return true};break;case "string":if(!this[query])throw new Error("No filter function "+query+" was found in store");query=this[query];case "function":}function execute(array){var results=arrayUtil.filter(array,query);var sortSet=options&&options.sort;if(sortSet)results.sort(typeof sortSet=="function"?sortSet:function(a,b){for(var sort,i=0;sort=sortSet[i];i++){var aValue=
a[sort.attribute];var bValue=b[sort.attribute];if(aValue!=bValue)return!!sort.descending==(aValue==null||aValue>bValue)?-1:1}return 0});if(options&&(options.start||options.count)){var total=results.length;results=results.slice(options.start||0,(options.start||0)+(options.count||Infinity));results.total=total}return results}execute.matches=query;return execute}})},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/cache","dojo/_base/declare","dojo/dom-construct","dojo/_base/lang",
"dojo/on","dojo/sniff","dojo/string","./_AttachMixin"],function(cache,declare,domConstruct,lang,on,has,string,_AttachMixin){var _TemplatedMixin=declare("dijit._TemplatedMixin",_AttachMixin,{templateString:null,templatePath:null,_skipNodeCache:false,searchContainerNode:true,_stringRepl:function(tmpl){var className=this.declaredClass,_this=this;return string.substitute(tmpl,this,function(value,key){if(key.charAt(0)=="!")value=lang.getObject(key.substr(1),false,_this);if(typeof value=="undefined")throw new Error(className+
" template:"+key);if(value==null)return"";return key.charAt(0)=="!"?value:value.toString().replace(/"/g,"\x26quot;")},this)},buildRendering:function(){if(!this._rendered){if(!this.templateString)this.templateString=cache(this.templatePath,{sanitize:true});var cached=_TemplatedMixin.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);var node;if(lang.isString(cached)){node=domConstruct.toDom(this._stringRepl(cached),this.ownerDocument);if(node.nodeType!=1)throw new Error("Invalid template: "+
cached);}else node=cached.cloneNode(true);this.domNode=node}this.inherited(arguments);if(!this._rendered)this._fillContent(this.srcNodeRef);this._rendered=true},_fillContent:function(source){var dest=this.containerNode;if(source&&dest)while(source.hasChildNodes())dest.appendChild(source.firstChild)}});_TemplatedMixin._templateCache={};_TemplatedMixin.getCachedTemplate=function(templateString,alwaysUseString,doc){var tmplts=_TemplatedMixin._templateCache;var key=templateString;var cached=tmplts[key];
if(cached){try{if(!cached.ownerDocument||cached.ownerDocument==(doc||document))return cached}catch(e){}domConstruct.destroy(cached)}templateString=string.trim(templateString);if(alwaysUseString||templateString.match(/\$\{([^\}]+)\}/g))return tmplts[key]=templateString;else{var node=domConstruct.toDom(templateString,doc);if(node.nodeType!=1)throw new Error("Invalid template: "+templateString);return tmplts[key]=node}};if(has("ie"))on(window,"unload",function(){var cache=_TemplatedMixin._templateCache;
for(var key in cache){var value=cache[key];if(typeof value=="object")domConstruct.destroy(value);delete cache[key]}});return _TemplatedMixin})},"dcl/mini":function(){(function(factory){if(typeof define!="undefined")define("dcl/mini",[],factory);else if(typeof module!="undefined")module.exports=factory();else dcl=factory()})(function(){var counter=0,cname="constructor",pname="prototype",F=function(){},empty={},mix,extractChain,stubSuper,stubChain,stubChainSuper,post;function dcl(superClass,props){var bases=
[0],proto,base,ctor,meta,connectionMap,output,vector,superClasses,i,j=0,n;if(superClass)if(superClass instanceof Array){connectionMap={};superClasses=superClass.slice(0).reverse();for(i=superClasses.length-1;i>=0;--i){base=superClasses[i];base._u=base._u||counter++;if(proto=base._m){for(vector=proto.b,j=vector.length-1;j>0;--j){n=vector[j]._u;connectionMap[n]=(connectionMap[n]||0)+1}superClasses[i]=vector.slice(0)}else superClasses[i]=[base]}output={};c:while(superClasses.length){for(i=0;i<superClasses.length;++i){vector=
superClasses[i];base=vector[0];n=base._u;if(!connectionMap[n]){if(!output[n]){bases.push(base);output[n]=1}vector.shift();if(vector.length)--connectionMap[vector[0]._u];else superClasses.splice(i,1);continue c}}dcl._e("cycle",props,superClasses)}superClass=superClass[0];j=bases.length-((meta=superClass._m)&&superClass===bases[bases.length-(j=meta.b.length)]?j:1)-1}else{superClass._u=superClass._u||counter++;bases=bases.concat((meta=superClass._m)?meta.b:superClass)}proto=superClass?dcl.delegate(superClass[pname]):
{};vector=superClass&&(meta=superClass._m)?dcl.delegate(meta.w):{constructor:2};for(;j>0;--j){base=bases[j];meta=base._m;dcl.mix(proto,meta&&meta.h||base[pname]);if(meta)for(n in superClasses=meta.w)vector[n]=(+vector[n]||0)|superClasses[n]}for(n in props)if(isSuper(meta=props[n]))vector[n]=+vector[n]||0;else proto[n]=meta;meta={b:bases,h:props,w:vector,c:{}};bases[0]={_m:meta,prototype:proto};buildStubs(meta,proto);ctor=proto[cname];ctor._m=meta;ctor[pname]=proto;bases[0]=ctor;return dcl._p(ctor)}
function Super(f){this.f=f}function isSuper(f){return f&&f.spr instanceof Super}function allKeys(o){var keys=[];for(var name in o)keys.push(name);return keys}(mix=function(a,b){for(var n in b)a[n]=b[n]})(dcl,{mix:mix,delegate:function(o){return Object.create(o)},allKeys:allKeys,Super:Super,superCall:function superCall(f){return dcl._mk(f)},_mk:function makeSuper(f,S){var fn=function(){};fn.spr=new (S||Super)(f);return fn},_p:function(ctor){return ctor},_e:function(msg){throw Error("dcl: "+msg);},
_f:function(f,a,n){var t=f.spr.f(a);t.ctr=f.ctr;return t},_ec:extractChain=function(bases,name,advice){var i=bases.length-1,chain=[],base,f,around=advice=="f";for(;base=bases[i];--i)if((f=base._m)?(f=f.h).hasOwnProperty(name)&&(isSuper(f=f[name])?around?f.spr.f:f=f.spr[advice]:around):around&&(f=name==cname?base:base[pname][name])&&f!==empty[name]){f.ctr=base;chain.push(f)}return chain},_sc:stubChain=function(chain){var l=chain.length,f;return!l?0:l==1?(f=chain[0],function(){f.apply(this,arguments)}):
function(){for(var i=0;i<l;++i)chain[i].apply(this,arguments)}},_ss:stubSuper=function(chain,name){var i=0,f,p=empty[name];for(;f=chain[i];++i)p=isSuper(f)?chain[i]=dcl._f(f,p,name):f;return name!=cname?p:function(){p.apply(this,arguments)}},_st:stubChainSuper=function(chain,stub,name){var i=0,f,diff,pi=0;for(;f=chain[i];++i)if(isSuper(f)){diff=i-pi;diff=chain[i]=dcl._f(f,!diff?0:diff==1?chain[pi]:stub(chain.slice(pi,i)),name);pi=i}diff=i-pi;return!diff?0:diff==1&&name!=cname?chain[pi]:stub(pi?chain.slice(pi):
chain)},_sb:function(id,bases,name,chains){var f=chains[name]=extractChain(bases,name,"f");return(id?stubChainSuper(f,stubChain,name):stubSuper(f,name))||function(){}}});function buildStubs(meta,proto){var weaver=meta.w,bases=meta.b,chains=meta.c;for(var name in weaver)proto[name]=dcl._sb(weaver[name],bases,name,chains)}return dcl})},"xfile/views/RemoteEditor":function(){define("xfile/views/RemoteEditor",["dojo/_base/array","dojo/_base/declare","dojo/_base/html","dojo/dom-style","dojo/_base/connect",
"dojo/on","dojo/_base/lang","dojo/dom-geometry","xide/widgets/TemplatedWidgetBase","xide/types","xide/factory"],function(array,declare,html,domStyle,connect,on,lang,domGeometry,TemplatedWidgetBase,types,factory){return dojo.declare("xfile.views.RemoteEditor",[TemplatedWidgetBase],{title:null,wFloatingPane:null,didStartup:false,scriptFrame:null,scriptRoot:null,frameUrl:null,scriptFrameParent:null,editorWaitingTime:4E3,isLoading:false,parentContainer:null,saveUrl:null,itemPath:null,extraPadding:5,templateString:"\x3cdiv class\x3d'scriptEditor' title\x3d'${!title}' data-dojo-attach-point\x3d'wFloatingPane' style\x3d''\x3e"+
"\x3cdiv id\x3d'scriptFrameParent' class\x3d'scriptFrameParent' data-dojo-attach-point\x3d'scriptFrameParent'\x3e\x3c/div\x3e"+"\x3c/div\x3e",focus:function(){},sendMessage:function(message){this.scriptFrame.postMessage(JSON.stringify(message))},onMessage:function(message){var result=JSON.parse(message);if(result&&result.command&&result.command==="save")if(this.delegate&&this.delegate.onImageSaved)this.delegate.onImageSaved(result.url)},looseFocus:function(){this.domNode.blur();if(this.scriptFrameParent){this.scriptFrameParent.blur();
this.domNode.tabindex=-1;this.scriptFrameParent.tabindex=-1;this.scriptFrameParent.blur()}},onEditorReady:function(url){var scriptStandBy=dijit.registry.byId("scriptStandBy");if(scriptStandBy)scriptStandBy.hide();this.frameUrl=url;if(!url)return null;var thiz=this;var xdmTarget=this.scriptFrameParent;if(xdmTarget);this._focusEditor();this.isLoading=false;var bindStr="?";if(url.indexOf("?")!=-1)bindStr="\x26";url+=bindStr+"xdmTarget\x3d"+encodeURIComponent(""+window.location.href);var dstNode=this.parentContainer.containerNode||
this.parentContainer.domNode;var box=domGeometry.getMarginBox(dstNode);box.w-=this.extraPadding;box.h-=this.extraPadding;console.error("open remote editor : "+url);this.scriptFrame=new easyXDM.Socket({remote:url,container:this.scriptFrameParent,props:{style:{width:box.w+"px",height:box.h+"px"}},onload:function(){},onReady:function(){thiz.looseFocus();thiz.sendMessage({command:"edit",height:box.h,width:box.w,url:thiz.editUrl,saveUrl:thiz.saveUrl,title:thiz.title})},onMessage:function(message,origin){thiz.onMessage(message)}});
setTimeout(function(){factory.publish(types.EVENTS.RESIZE,{},thiz)},100)},_focusEditor:function(){setTimeout(function(){var l=dojo.query('[id*\x3d"easyXDM_"]');if(l!=null&&l.length>0)for(var i=0;i<l.length;i++)if(l[i].contentWindow)l[i].contentWindow.focus()},200)},onHide:function(){},destroy:function(){},onResize:function(){if(this.parentContainer&&this.scriptFrameParent&&this.scriptFrameParent.children.length>0){var box=domGeometry.getMarginBox(this.parentContainer.containerNode);box.w-=this.extraPadding;
box.h-=this.extraPadding;var dst=this.scriptFrameParent.children[0];domStyle.set(dst,{width:box.w+"px",height:box.h+"px"})}},reload:function(scope){dojo.empty(this.scriptFrameParent);this.scriptFrame=null;if(this.frameUrl)this.onEditorReady(this.frameUrl);if(this.scriptFrameParent){this.domNode.tabindex=-1;this.scriptFrameParent.tabindex=-1;this.scriptFrameParent.blur()}},changeScope:function(scope){},_registerMenuHandlers:function(){var thiz=this},startup:function(){this.inherited(arguments);console.error("remote editor startup");
if(this.frameUrl)try{this.onEditorReady(this.frameUrl)}catch(e){debugger}var thiz=this;var resizeCB=function(){thiz.onResize()};dojo.connect(window,dojo.global.onorientationchange!==undefined?"onorientationchange":"onresize",this,function(){setTimeout(function(){resizeCB()},500)})}})})},"xide/utils/HTMLUtils":function(){define(["dojo/_base/lang","xide/utils","dijit/registry","dojo/_base/declare","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/dom-class"],function(lang,utils,registry,declare,
domGeometry,domStyle,has,domClass){utils.isDescendant=function(parent,child){var node=child.parentNode;while(node!=null){if(node==parent)return true;node=node.parentNode}return false};utils.hasChild=function(name,container){if(!name||!container)if(container.getChildren){var containers=container.getChildren();for(var i=0;i<containers.length;i++)if(containers[i].title===name)return containers[i]}return null};utils.removeAddCSSClasses=function(startNode,match,remove,add){var items=utils.find(match,startNode,
false);if(items)for(var i in items){var node=items[i];if(remove!=null)domClass.remove(node,remove);if(add!=null)domClass.add(node,add)}};utils.find=function(queryString,startNode,single){var nodes=dojo.query(queryString,startNode);if(nodes&&nodes.length>0)return single===false?nodes:nodes[0];return null};utils.findEmptyNode=function(startNode,mustHaveClass){if(!startNode||startNode.children==null||startNode.children.length==null)return null;var children=startNode.children;if(mustHaveClass!=null)children=
utils.find(mustHaveClass,startNode,false);for(var i in children){var child=children[i];if(child.innerHTML==="")return child}return null};utils.loopMe=function(depth,idx){if(idx<depth)utils.loopMe(depth,++idx);else var obj=arguments.callee};utils.addWidget=function(widgetProto,ctrArgsIn,delegate,parent,startup,cssClass){var ctrArgs={delegate:delegate};lang.mixin(ctrArgs,ctrArgsIn);if(ctrArgs.config&&ctrArgs.config.beanContextName)ctrArgs.beanContextName=ctrArgs.config.beanContextName;var widget=new widgetProto(ctrArgs,
dojo.doc.createElement("div"));if(!widget){console.error("invalid widget");return null}if(parent)utils.addChild(parent,widget,startup);else return null;if(cssClass)domClass.add(widget.domNode,cssClass);return widget};utils.addChild=function(parent,child,startup){if(!parent||!child){console.error("error! parent or child is invalid!");return}try{var _parentNode=parent.addChild!=null?parent:parent.containerNode||parent.domNode||parent;var _childNode=parent.addChild!=null?child:child.domNode||child;if(_parentNode&&
_childNode)if(!parent.addChild){_parentNode.appendChild(_childNode);if(startup===true&&child.startup)child.startup()}else{var insertIndex=-1;if(parent.getChildren)insertIndex=parent.getChildren().length;try{parent.addChild(_childNode,insertIndex,startup)}catch(e){console.error("add child failed for some reason!",e)}}else if(has("debug"))console.error("utils.addChild : invalid parameters :: parent or child domNode is null")}catch(e){console.error("addWidget : crashed : "+e)}};utils.templatify=function(baseClass,
templateString,parentNode,templateArguments,baseClasses,startup){var widgetClassIn=baseClass||"xide.widgets.TemplatedWidgetBase";var widgetProto=null;if(baseClasses)widgetProto=declare([baseClass].concat(baseClasses));else widgetProto=dojo.getObject(widgetClassIn);if(!widgetProto)return null;var ctrArgs={templateString:templateString};lang.mixin(ctrArgs,templateArguments);var widget=new widgetProto(ctrArgs,dojo.doc.createElement("div"));utils.addChild(parentNode,widget);if(startup===true)widget.startup();
return widget};utils.isEmpty=function(node){if(!node)return false;var widget=null;if(node.id){widget=registry.byId(node.id);if(widget)if(widget.containerNode)if(widget.containerNode.children&&widget.containerNode.children.length==0)return true}return!!(node.children&&node.children.length==0)};utils._clearProperty=function(prop,owner){var _key=null;if(owner)_key=utils.getObjectKeyByValue(owner,prop);if(_key)owner[_key]=null};utils._destroyWidget=function(view,callDestroy,owner){try{if(view){if(view.parentContainer&&
view.parentContainer.removeChild){if(view.destroy&&callDestroy!==false)view.destroy();view.parentContainer.removeChild(view);utils._clearProperty(view,owner);return}if(view.destroyRecursive)view.destroyRecursive();if(view.destroy)view.destroy();if(view.domNode||view["domNode"]){if(view.domNode)dojo.destroy(view.domNode)}else{var doc=view.ownerDocument;if(doc)dojo.destroy(view)}utils._clearProperty(view,owner)}}catch(e){console.error("error in destroying widget "+e,e)}};utils.destroyWidget=function(view,
callDestroy,owner){if(view)if(lang.isArray(view))for(var i=0;i<view.length;i++){var obj1=view[i];var _key=null;if(owner)_key=utils.getObjectKeyByValue(owner,obj1);utils._destroyWidget(obj1,callDestroy);if(_key)owner[_key]=null}else utils._destroyWidget(view,callDestroy,owner)};utils.destroyIfEmpty=function(node,parent){if(!node)return false;var widget=null;if(node.id){widget=registry.byId(node.id);if(widget)if(widget.containerNode)if(widget.containerNode.children&&widget.containerNode.children.length==
0){var size=dojo.marginBox(widget.containerNode);if(parent!=null&&parent.removeChild&&node.containerNode){parent.removeChild(node);return size}else{utils.destroyWidget(widget);return size}}}if(node.children&&node.children.length==0){var size=dojo.marginBox(node);utils.destroyWidget(node);return size}};utils.mimicNode=function(srcNode,dstNode,width,height,sizeFunc,attribute){if(srcNode&&dstNode){var _sizeFun=sizeFunc||domGeometry.getMarginBox;var adjustWidth=width===true;var adjustHeight=height===
true;var _box=_sizeFun(srcNode);if(adjustHeight)domStyle.set(dstNode,{"height":_box.h+"px"})}};return utils})},"xfile/manager/Context":function(){define("xfile/manager/Context",["dojo/_base/declare","dojo/_base/lang","dojo/has","xide/manager/Context","./PanelManager","./ClipboardManager","xide/manager/PluginManager","./Application","./NotificationManager","./FileManager","./MountManager","./OpenDelegate","xide/manager/SettingsManager","xide/manager/ResourceManager","xfile/manager/LogManager","xfile/views/ActionDialog",
"xfile/factory","xide/types","xide/utils","dojox/encoding/digests/MD5","dojo/json","xide/widgets/TemplatedWidgetBase","xide/views/ActionDialog","xide/views/CIActionDialog","xfile/views/EditorPluginMixin"],function(declare,lang,has,Context,PanelManager,ClipboardManager,PluginManager,Application,NotificationManager,FileManager,MountManager,OpenDelegate,SettingsManager,ResourceManager,LogManager,ActionDialog,factory,types,utils,MD5,json,TemplatedWidgetBase,XActionDialog,CIActionDialog,EditorPluginMixin){return declare("xfile.manager.Context",
[Context,EditorPluginMixin],{fileManager:null,scriptManager:null,panelManager:null,clipboardManager:null,pluginManager:null,mountManager:null,stores:null,openDelegate:null,cflow:false,beanContextName:"xfileMain",loadCFLOW:function(){},registerEditorExtension:function(name,extensions,iconClass,owner,isDefault,onEdit,editorClass,editorArgs){iconClass=iconClass||"el-icon-brush";var _editorArgs={name:name,extensions:extensions,onEdit:onEdit,iconClass:iconClass,owner:this,isDefault:isDefault!=null?isDefault:
false,editorClass:editorClass};if(editorArgs)_editorArgs=lang.mixin(_editorArgs,editorArgs);var thiz=this;if(!onEdit)_editorArgs.onEdit=function(item){var panelMgr=thiz.getPanelManager();panelMgr.createEditor(_editorArgs,item)};if(lang.isString(extensions)&&extensions.indexOf(",")==-1)types.registerCustomMimeIconExtension(extensions,iconClass);xfile.views.EditorPluginMixin.onRegisterEditor(_editorArgs);this.publish(types.EVENTS.REGISTER_EDITOR,_editorArgs)},getOpenDelegate:function(){return this.openDelegate},
getStore:function(mount,options,rpcUrl){if(!this.stores)this.stores={};mount=utils.replaceAll("/","",mount);options=options||{fields:types.FIELDS.SHOW_ISDIR|types.FIELDS.SHOW_OWNER|types.FIELDS.SHOW_SIZE|types.FIELDS.SHOW_MIME|types.FIELDS.SHOW_PERMISSIONS|types.FIELDS.SHOW_TIME};var optionsStr=MD5(JSON.stringify(options),1);var storeKey=mount+"_"+optionsStr;if(!this.stores[storeKey]){this.stores[storeKey]=factory.createStore(rpcUrl||types.config.FILES_STORE_URL,mount,false,options,types.config);
this.stores[storeKey].query({path:"."},{})}if(window["xappFileTrail"])window["xappFileTrail"].store=this.stores[storeKey];return this.stores[storeKey]},getPanelManager:function(){return this.panelManager},getMountManager:function(){return this.mountManager},openUrl:function(url,container,config){config=config||this.config;return this.getPanelManager().openUrl(url,container,config)},initManagers:function(){this.inherited(arguments);if(this.workflowManager)this.workflowManager.init();if(this.notificationManager)this.notificationManager.init();
if(this.fileManager)this.fileManager.init();if(this.mountManager)this.mountManager.init();if(this.panelManager)this.panelManager.init();try{if(this.settingsManager)this.settingsManager.init()}catch(e){console.error("failed")}this.panelManager.init();this.resourceManager.init();if(this.logManager)this.logManager.init();if(typeof xappPluginResources!="undefined"&&this.pluginManager){0&&console.log("load plugins!");this.pluginManager.loadPlugins(xappPluginResources)}if(has("debug"))try{this.loadXIDE()}catch(e){console.error("error loading xide ! "+
e)}},initWithConfig:function(config){if(config&&config.mixins)this.doMixins(config.mixins)},prepare:function(){if(this.config)this.initWithConfig(this.config)},patchManager:function(){},onXIDELoaded:function(min,WebSocket){var thiz=this;var _ctorArgs={delegate:{onServerResponse:function(e){thiz.onXIDEMessage(dojo.fromJson(e.data))}}};try{var client=new WebSocket(_ctorArgs);lang.mixin(client,_ctorArgs);client.init({options:{host:"http://127.0.0.1",port:9994,channel:"",debug:{"all":false,"protocol_connection":true,
"protocol_messages":true,"socket_server":true,"socket_client":true,"socket_messages":true,"main":true}}});client.connect()}catch(e){console.error("create client with store : failed : "+e)}},loadXIDE:function(){var thiz=this;require(["xide/min","xide/client/WebSocket"],function(min,WebSocket){if(thiz._didXIDE)return;thiz._didXIDE=true;thiz.onXIDELoaded(min,WebSocket)})},constructManagers:function(){ActionDialog.prototype.ctx=this;TemplatedWidgetBase.prototype.ctx=this;XActionDialog.prototype.ctx=this;
CIActionDialog.prototype.ctx=this;this.inherited(arguments);this.panelManager=this.createManager(PanelManager,null);this.application=this.createManager(Application);this.notificationManager=this.createManager(NotificationManager);this.fileManager=this.createManager(FileManager);this.mountManager=this.createManager(MountManager);this.settingsManager=this.createManager(SettingsManager);this.clipboardManager=this.createManager(ClipboardManager);this.openDelegate=this.createManager(OpenDelegate);this.resourceManager=
this.createManager(ResourceManager);this.pluginManager=this.createManager(PluginManager);this.logManager=this.createManager(LogManager);if(this.cflow)try{this.loadCFLOW()}catch(e){console.error("cflow! "+e)}}})})},"xfile/types":function(){define("xfile/types",["dojo/_base/declare"],function(declare){return declare("xfile.types",null,{})})},"xfile/manager/Application":function(){define("xfile/manager/Application",["dojo/_base/declare","dojo/_base/lang","dojo/has","xide/manager/Application","xfile/views/MainView",
"dojo/dom-geometry","dojo/dom-class","dojo/_base/window","xfile/config","xfile/factory/model","cbtree/extensions/TreeStyling","cbtree/models/FileStoreModel","cbtree/data/FileStore","xide/types","xfile/views/FilePreview","xfile/views/_EditorMixin","xblox/embedded_ui","xblox/manager/BlockManager","xfile/manager/BlockManager","xfile/views/BlocksFileEditor"],function(declare,lang,has,Application,MainView,domGeometry,domClass,win,config,factory,TreeStyling,FileStoreModel,FileStore,types,FilePreview,_EditorMixin,
embedded_ui,BlockManager,XFBlockManager,BlocksFileEditor){return declare("xfile.manager.Application",[Application],{mainView:null,loadXBLOX:true,extraBottomHeight:0,resizeToNode:function(parent){if(parent!=null){var parentO=dojo.byId(parent);if(parentO){var size=domGeometry.getMarginBox(parentO);var dstHeight=size.h;dstHeight-=this.extraBottomHeight;var mainContainer=dijit.registry.byId("main");if(mainContainer){mainContainer.containerNode.style.height=dstHeight+"px";mainContainer.resize();setTimeout(function(){mainContainer.resize()},
300)}}}},repaint:function(evt,parent){var winSize=dojo.window.getBox();if(parent!=null){var parentO=dojo.byId(parent);if(parentO){this.resizeToNode(parent);return}}var dstHeight=winSize.h;dstHeight-=this.extraBottomHeight;var mainContainer=dijit.registry.byId("main");if(mainContainer){mainContainer.containerNode.style.height=dstHeight+"px";mainContainer.resize();setTimeout(function(){mainContainer.resize()},300)}},onXBlocksReady:function(){0&&console.log("xblox ready");var blockManagerClass="xfile.manager.BlockManager";
var blockManagerProto=require("xfile/manager/BlockManager");var blockManagerInstance=new blockManagerProto;blockManagerInstance.ctx=this.ctx;blockManagerInstance.updatePalette=false;blockManagerInstance.init();blockManagerInstance.serviceObject=this.ctx.getFileManager().serviceObject;blockManagerInstance.config=this.config;this.ctx.blockManager=blockManagerInstance;var _editor=require("xfile/views/BlocksFileEditor");var thiz=this;thiz.ctx.registerEditorExtension("xBlocks","xblox","fa-play-circle-o",
thiz,true,null,_editor,{rightLayoutContainer:thiz.mainView.getRightTopTarget(false,false),ctx:thiz.ctx,mainView:thiz.mainView,blockManagerClass:blockManagerClass})},_loadBlox:function(){var thiz=this,_re=require;_re(["xblox/embedded_ui","xfile/manager/BlockManager","xfile/views/BlocksFileEditor","xide/widgets/ExpressionJavaScript"],function(embedded_ui,BlockManager,BlocksFileEditor,ExpressionJavaScript){setTimeout(function(){thiz.onXBlocksReady()},10)})},patchXIDE:function(){var thiz=this,_re=require,
ctx=this.ctx;_re(["xide/widgets/FileWidget"],function(FileWidget){FileWidget.prototype.ctx=ctx;var xFileConfig=ctx.config;var vfsDriverConfig=factory.cloneConfig(xFileConfig);var rootStore=ctx.getStore(ctx.config.defaultStoreName,{"fields":1663});ctx.defaultOptions={sources:ctx.getMountManager().getMounts(),store:rootStore,defaultStoreName:ctx.config.defaultStoreName}})},onStarted:function(){var thiz=this;this.patchXIDE();var resizeCB=function(){thiz.publish(types.EVENTS.RESIZE,{});thiz.repaint()};
dojo.connect(window,dojo.global.onorientationchange!==undefined?"onorientationchange":"onresize",this,function(){setTimeout(function(){resizeCB()},1E3)});setTimeout(function(){resizeCB()},100);if(this.loadXBLOX)this._loadBlox()},_setupTranslations:function(){var dstCtx=this.ctx;if(dstCtx&&dstCtx.getLocals)this._messages=dstCtx.getLocals("xide.widgets","TemplatedWidgetBase");else this._messages=[]},boot:function(config){var xFileConfiguration=config||typeof xFileConfig!=="undefined"?xFileConfig:null;
if(xFileConfiguration){if(typeof xFileConfigMixin!="undefined"){var _xFileConfigMixin=xFileConfigMixin;lang.mixin(xFileConfiguration,xFileConfigMixin)}lang.mixin(types.config,xFileConfiguration);types.config.FILES_MODEL_PROTO=FileStoreModel;types.config.FILES_STORE_PROTO=FileStore}},start:function(config){this.inherited(arguments);this.boot();var locationString=location.href;var isMobile=/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase());
if(locationString.indexOf("layout")!=-1)if(locationString.indexOf("layout\x3ddual")!=-1)config["LAYOUT_PRESET"]=1;else if(locationString.indexOf("layout\x3dsingle")!=-1)config["LAYOUT_PRESET"]=2;else if(locationString.indexOf("layout\x3dbrowser")!=-1)config["LAYOUT_PRESET"]=3;else if(locationString.indexOf("layout\x3dpreview")!=-1){config["LAYOUT_PRESET"]=4;config.FILE_PANEL_OPTIONS_MAIN={"LAYOUT":types.FILE_PANEL_LAYOUT.SPLIT_HORIZONTAL,"AUTO_OPEN":"true"}}else{if(locationString.indexOf("layout\x3dgallery")!=
-1)config["LAYOUT_PRESET"]=5}else if(isMobile||locationString.indexOf("minimal\x3dtrue")!=-1){config.PANEL_OPTIONS.ALLOW_INFO_VIEW=false;config.PANEL_OPTIONS.ALLOW_LOG_VIEW=false;config.PANEL_OPTIONS.ALLOW_BREADCRUMBS=false;config["LAYOUT_PRESET"]=2}domClass.add(win.body(),"claro");config.beanContextName=this.ctx.beanContextName;try{if(!this.mainView){var parentNode=dojo.byId(config.ROOT_NODE||"xFileRoot");if(parentNode){this.mainView=new MainView({ctx:this.ctx,beanContextName:this.ctx.beanContextName,
config:config,panelManager:this.ctx.getPanelManager(),persistent:true},parentNode);this.mainView.startup();this.ctx.mainView=this.mainView;this.ctx.getPanelManager().rootView=this.mainView;this.mainView.initWithConfig(config)}}}catch(e){debugger}this.onStarted()}})})},"xide/views/BeanActionHandler":function(){define(["dojo/_base/declare","xide/types"],function(declare,types){return declare("xide.views.BeanActionHandler",null,{_activeBeanView:null,_activeItem:null,_activeBeanType:null,_getBeanType:function(evtData){if(evtData&&
evtData.beanType)return evtData.beanType;var view=evtData.view||evtData.owner;if(view&&view.beanType)return view.beanType;var item=evtData.item;if(item&&item.beanType)return item.beanType;return null},_getBeanView:function(evtData){var view=evtData.view||evtData.owner;if(view&&view.hasItemActions!=null)return view;return null},_setCurrentBeanType:function(type){if(this._activeBeanType!==type){this._activeBeanType=type;return true}return false},_changeBeanContext:function(view,type,item){if(type==
null||view==null){console.error("_changeBeanContext : invalid params",arguments);return}if(view.beanContextName&&this.beanContextName&&view.beanContextName!=this.beanContextName)return;var settings={shouldChange:true};this.publish(types.EVENTS.ON_ACTION_CHANGE_CONTEXT,{item:item,beanType:type,view:view,settings:settings});var thiz=this;setTimeout(function(){thiz.publish(types.EVENTS.ON_ACTION_CONTEXT_CHANGED,{item:item,beanType:type,view:view})},10)},_setCurrentBeanView:function(view){if(this._activeBeanView!=
view&&view!=null){this._activeBeanView=view;var _beanType=this._getBeanType(view);if(_beanType)this._setCurrentBeanType(_beanType);if(view)this._changeBeanContext(this._activeBeanView,this._activeBeanType,this._activeItem)}},_isBeanView:function(view){return view&&view.hasItemActions&&view.hasItemActions()},_onItemSelected:function(evt){if(evt._didBM)return;evt._didBM=true;if(!evt.item)return;var beanType=this._getBeanType(evt);if(beanType){var changed=this._setCurrentBeanType(beanType);this._activeItem=
evt.item;var view=this._getBeanView(evt);if(changed&&view&&this._isBeanView(view)){this._activeBeanView=view;this._changeBeanContext(this._activeBeanView,this._activeBeanType,this._activeItem)}}},_onViewRemoved:function(evt){if(evt.view&&evt.view==this._activeBeanView)this._setCurrentBeanView(null)},_onShowView:function(evt){if(evt._didBM)return;evt._didBM=true;var view=evt?evt.view?evt.view:null:null;if(view&&this._isBeanView(view)){var _beanType=this._getBeanType(evt);if(_beanType)this._setCurrentBeanType(_beanType);
this._setCurrentBeanView(view)}},initBeanActionHandler:function(){this.subscribe(types.EVENTS.ITEM_SELECTED,this._onItemSelected);this.subscribe(types.EVENTS.ON_VIEW_SHOW,this._onShowView);this.subscribe(types.EVENTS.ON_VIEW_REMOVED,this._onViewRemoved)}})})},"xwordpress/manager/Context":function(){define("xwordpress/manager/Context",["dojo/_base/declare","xfile/manager/Context"],function(declare,Context){return declare("xwordpress.manager.Context",[Context],{defaultNamespace:"xfile.manager.",namespace:"xwordpress.manager.",
initManagers:function(){this.inherited(arguments);if(this.tooltipManager)this.tooltipManager.init();if(this.workflowManager)this.workflowManager.init();if(this.notificationManager)this.notificationManager.init();try{if(this.settingsManager);}catch(e){console.error("failed")}},constructor:function(config){this.config=config},constructManagers:function(){this.inherited(arguments);if(!this.workflowManager)this.workflowManager=new xwordpress.manager.WorkflowManager({ctx:this});if(!this.fileManager)this.fileManager=
new xwordpress.manager.FileManager({ctx:this});if(!this.notificationManager)this.notificationManager=new xfile.manager.NotificationManager({ctx:this})}})})},"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\n\t\t\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\n\t\t\ttitle\x3d"${optionsTitle}"\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode" role\x3d"presentation"\n\t\t\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\n\x3e\x3c/table\x3e\n',
"dijit/form/HorizontalSlider":function(){require({cache:{"url:dijit/form/templates/HorizontalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown, onkeyup:_onKeyUp"\n\trole\x3d"presentation"\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\x3e\x3c/tr\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\n\t\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitSliderBarContainerH" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event\x3d"press:_onBarClick"\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\n\t\t\t\t\t\x3e\x3c/div\n\t\t\t\t\x3e\x3c/div\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c/div\n\t\t\t\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\x3e\x3c/tr\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\x3e\x3c/tr\n\x3e\x3c/table\x3e\n'}});
define("dijit/form/HorizontalSlider",["dojo/_base/array","dojo/_base/declare","dojo/dnd/move","dojo/_base/fx","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/dnd/Moveable","dojo/dnd/Mover","dojo/query","dojo/mouse","dojo/on","../_base/manager","../focus","../typematic","./Button","./_FormValueWidget","../_Container","dojo/text!./templates/HorizontalSlider.html"],function(array,declare,move,fx,domGeometry,domStyle,keys,lang,has,Moveable,Mover,query,mouse,on,manager,
focus,typematic,Button,_FormValueWidget,_Container,template){var _SliderMover=declare("dijit.form._SliderMover",Mover,{onMouseMove:function(e){var widget=this.widget;var abspos=widget._abspos;if(!abspos){abspos=widget._abspos=domGeometry.position(widget.sliderBarContainer,true);widget._setPixelValue_=lang.hitch(widget,"_setPixelValue");widget._isReversed_=widget._isReversed()}var pixelValue=e[widget._mousePixelCoord]-abspos[widget._startingPixelCoord];widget._setPixelValue_(widget._isReversed_?abspos[widget._pixelCount]-
pixelValue:pixelValue,abspos[widget._pixelCount],false)},destroy:function(e){Mover.prototype.destroy.apply(this,arguments);var widget=this.widget;widget._abspos=null;widget._setValueAttr(widget.value,true)}});var HorizontalSlider=declare("dijit.form.HorizontalSlider",[_FormValueWidget,_Container],{templateString:template,value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:manager.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",
baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey)return;this._setValueAttr(this.value,true)},_onKeyDown:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey)return;switch(e.keyCode){case keys.HOME:this._setValueAttr(this.minimum,
false);break;case keys.END:this._setValueAttr(this.maximum,false);break;case this._descending||this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW:case this._descending===false?keys.DOWN_ARROW:keys.UP_ARROW:case this._descending===false?keys.PAGE_DOWN:keys.PAGE_UP:this.increment(e);break;case this._descending||this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW:case this._descending===false?keys.UP_ARROW:keys.DOWN_ARROW:case this._descending===false?keys.PAGE_UP:keys.PAGE_DOWN:this.decrement(e);
break;default:return}e.stopPropagation();e.preventDefault()},_onHandleClick:function(e){if(this.disabled||this.readOnly)return;if(!has("ie"))focus.focus(this.sliderHandle);e.stopPropagation();e.preventDefault()},_isReversed:function(){return!this.isLeftToRight()},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect)return;focus.focus(this.sliderHandle);e.stopPropagation();e.preventDefault();var abspos=domGeometry.position(this.sliderBarContainer,true);var pixelValue=e[this._mousePixelCoord]-
abspos[this._startingPixelCoord];this._setPixelValue(this._isReversed()?abspos[this._pixelCount]-pixelValue:pixelValue,abspos[this._pixelCount],true);this._movable.onMouseDown(e)},_setPixelValue:function(pixelValue,maxPixels,priorityChange){if(this.disabled||this.readOnly)return;var count=this.discreteValues;if(count<=1||count==Infinity)count=maxPixels;count--;var pixelsPerValue=maxPixels/count;var wholeIncrements=Math.round(pixelValue/pixelsPerValue);this._setValueAttr(Math.max(Math.min((this.maximum-
this.minimum)*wholeIncrements/count+this.minimum,this.maximum),this.minimum),priorityChange)},_setValueAttr:function(value,priorityChange){this._set("value",value);this.valueNode.value=value;this.focusNode.setAttribute("aria-valuenow",value);this.inherited(arguments);var percent=(value-this.minimum)/(this.maximum-this.minimum);var progressBar=this._descending===false?this.remainingBar:this.progressBar;var remainingBar=this._descending===false?this.progressBar:this.remainingBar;if(this._inProgressAnim&&
this._inProgressAnim.status!="stopped")this._inProgressAnim.stop(true);if(priorityChange&&this.slideDuration>0&&progressBar.style[this._progressPixelSize]){var _this=this;var props={};var start=parseFloat(progressBar.style[this._progressPixelSize]);var duration=this.slideDuration*(percent-start/100);if(duration==0)return;if(duration<0)duration=0-duration;props[this._progressPixelSize]={start:start,end:percent*100,units:"%"};this._inProgressAnim=fx.animateProperty({node:progressBar,duration:duration,
onAnimate:function(v){remainingBar.style[_this._progressPixelSize]=100-parseFloat(v[_this._progressPixelSize])+"%"},onEnd:function(){delete _this._inProgressAnim},properties:props});this._inProgressAnim.play()}else{progressBar.style[this._progressPixelSize]=percent*100+"%";remainingBar.style[this._progressPixelSize]=(1-percent)*100+"%"}},_bumpValue:function(signedChange,priorityChange){if(this.disabled||this.readOnly)return;var s=domStyle.getComputedStyle(this.sliderBarContainer);var c=domGeometry.getContentBox(this.sliderBarContainer,
s);var count=this.discreteValues;if(count<=1||count==Infinity)count=c[this._pixelCount];count--;var value=(this.value-this.minimum)*count/(this.maximum-this.minimum)+signedChange;if(value<0)value=0;if(value>count)value=count;value=value*(this.maximum-this.minimum)/count+this.minimum;this._setValueAttr(value,priorityChange)},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect)return;this._setValueAttr(val,true)},_onClkIncBumper:function(){this._onClkBumper(this._descending===
false?this.minimum:this.maximum)},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum)},decrement:function(e){this._bumpValue(e.keyCode==keys.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(e){this._bumpValue(e.keyCode==keys.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(evt){evt.stopPropagation();evt.preventDefault();this._bumpValue(evt.wheelDelta<0?-1:1,true)},startup:function(){if(this._started)return;array.forEach(this.getChildren(),function(child){if(this[child.container]!=
this.containerNode)this[child.container].appendChild(child.domNode)},this);this.inherited(arguments)},_typematicCallback:function(count,button,e){if(count==-1)this._setValueAttr(this.value,true);else this[button==(this._descending?this.incrementButton:this.decrementButton)?"decrement":"increment"](e)},buildRendering:function(){this.inherited(arguments);if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display=""}var label=query('label[for\x3d"'+this.id+'"]');if(label.length){if(!label[0].id)label[0].id=
this.id+"_label";this.focusNode.setAttribute("aria-labelledby",label[0].id)}this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum)},postCreate:function(){this.inherited(arguments);if(this.showButtons)this.own(typematic.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),typematic.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));this.own(on(this.domNode,mouse.wheel,lang.hitch(this,"_mouseWheeled")));
var mover=declare(_SliderMover,{widget:this});this._movable=new Moveable(this.sliderHandle,{mover:mover});this._layoutHackIE7()},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped")this._inProgressAnim.stop(true);this.inherited(arguments)}});HorizontalSlider._Mover=_SliderMover;return HorizontalSlider})},"dojox/json/ref":function(){define("dojox/json/ref",["dojo/_base/array","dojo/_base/json","dojo/_base/kernel","dojo/_base/lang","dojo/date/stamp",
"dojox"],function(array,djson,dojo,lang,stamp,dojox){lang.getObject("json",true,dojox);return dojox.json.ref={resolveJson:function(root,args){args=args||{};var idAttribute=args.idAttribute||"id";var refAttribute=this.refAttribute;var idAsRef=args.idAsRef;var prefix=args.idPrefix||"";var assignAbsoluteIds=args.assignAbsoluteIds;var index=args.index||{};var timeStamps=args.timeStamps;var ref,reWalk=[];var pathResolveRegex=/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/;var addProp=this._addProp;var F=
function(){};function walk(it,stop,defaultId,needsPrefix,schema,defaultObject){var i,update,val,id=idAttribute in it?it[idAttribute]:defaultId;if(idAttribute in it||id!==undefined&&needsPrefix)id=(prefix+id).replace(pathResolveRegex,"$2$3");var target=defaultObject||it;if(id!==undefined){if(assignAbsoluteIds)it.__id=id;if(args.schemas&&!(it instanceof Array)&&(val=id.match(/^(.+\/)[^\.\[]*$/)))schema=args.schemas[val[1]];if(index[id]&&it instanceof Array==index[id]instanceof Array){target=index[id];
delete target.$ref;delete target._loadObject;update=true}else{var proto=schema&&schema.prototype;if(proto){F.prototype=proto;target=new F}}index[id]=target;if(timeStamps)timeStamps[id]=args.time}while(schema){var properties=schema.properties;if(properties)for(i in it){var propertyDefinition=properties[i];if(propertyDefinition&&propertyDefinition.format=="date-time"&&typeof it[i]=="string")it[i]=stamp.fromISOString(it[i])}schema=schema["extends"]}var length=it.length;for(i in it){if(i==length)break;
if(it.hasOwnProperty(i)){val=it[i];if(typeof val=="object"&&val&&!(val instanceof Date)&&i!="__parent"){ref=val[refAttribute]||idAsRef&&val[idAttribute];if(!ref||!val.__parent)if(it!=reWalk)val.__parent=target;if(ref){delete it[i];var path=ref.toString().replace(/(#)([^\.\[])/,"$1.$2").match(/(^([^\[]*\/)?[^#\.\[]*)#?([\.\[].*)?/);if(index[(prefix+ref).replace(pathResolveRegex,"$2$3")])ref=index[(prefix+ref).replace(pathResolveRegex,"$2$3")];else if(ref=path[1]=="$"||path[1]=="this"||path[1]==""?
root:index[(prefix+path[1]).replace(pathResolveRegex,"$2$3")])if(path[3])path[3].replace(/(\[([^\]]+)\])|(\.?([^\.\[]+))/g,function(t,a,b,c,d){ref=ref&&ref[b?b.replace(/[\"\'\\]/,""):d]});if(ref)val=ref;else if(!stop){var rewalking;if(!rewalking)reWalk.push(target);rewalking=true;val=walk(val,false,val[refAttribute],true,propertyDefinition);val._loadObject=args.loader}}else if(!stop)val=walk(val,reWalk==it,id===undefined?undefined:addProp(id,i),false,propertyDefinition,target!=it&&typeof target[i]==
"object"&&target[i])}it[i]=val;if(target!=it&&!target.__isDirty){var old=target[i];target[i]=val;if(update&&val!==old&&!target._loadObject&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&i!="$ref"&&!(val instanceof Date&&old instanceof Date&&val.getTime()==old.getTime())&&!(typeof val=="function"&&typeof old=="function"&&val.toString()==old.toString())&&index.onUpdate)index.onUpdate(target,i,old,val)}}}if(update&&(idAttribute in it||target instanceof Array))for(i in target){if(!target.__isDirty&&target.hasOwnProperty(i)&&
!it.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&!(target instanceof Array&&isNaN(i))){if(index.onUpdate&&i!="_loadObject"&&i!="_idAttr")index.onUpdate(target,i,target[i],undefined);delete target[i];while(target instanceof Array&&target.length&&target[target.length-1]===undefined)target.length--}}else if(index.onLoad)index.onLoad(target);return target}if(root&&typeof root=="object"){root=walk(root,false,args.defaultId,true);walk(reWalk,false)}return root},fromJson:function(str,args){function ref(target){var refObject=
{};refObject[this.refAttribute]=target;return refObject}try{var root=eval("("+str+")")}catch(e){throw new SyntaxError("Invalid JSON string: "+e.message+" parsing: "+str);}if(root)return this.resolveJson(root,args);return root},toJson:function(it,prettyPrint,idPrefix,indexSubObjects){var useRefs=this._useRefs;var addProp=this._addProp;var refAttribute=this.refAttribute;idPrefix=idPrefix||"";var paths={};var generated={};function serialize(it,path,_indentStr){if(typeof it=="object"&&it){var value;if(it instanceof
Date)return'"'+stamp.toISOString(it,{zulu:true})+'"';var id=it.__id;if(id){if(path!="#"&&(useRefs&&!id.match(/#/)||paths[id])){var ref=id;if(id.charAt(0)!="#")if(it.__clientId==id)ref="cid:"+id;else if(id.substring(0,idPrefix.length)==idPrefix)ref=id.substring(idPrefix.length);else ref=id;var refObject={};refObject[refAttribute]=ref;return djson.toJson(refObject,prettyPrint)}path=id}else{it.__id=path;generated[path]=it}paths[path]=it;_indentStr=_indentStr||"";var nextIndent=prettyPrint?_indentStr+
djson.toJsonIndentStr:"";var newLine=prettyPrint?"\n":"";var sep=prettyPrint?" ":"";if(it instanceof Array){var res=array.map(it,function(obj,i){var val=serialize(obj,addProp(path,i),nextIndent);if(typeof val!="string")val="undefined";return newLine+nextIndent+val});return"["+res.join(","+sep)+newLine+_indentStr+"]"}var output=[];for(var i in it)if(it.hasOwnProperty(i)){var keyStr;if(typeof i=="number")keyStr='"'+i+'"';else if(typeof i=="string"&&(i.charAt(0)!="_"||i.charAt(1)!="_"))keyStr=djson._escapeString(i);
else continue;var val=serialize(it[i],addProp(path,i),nextIndent);if(typeof val!="string")continue;output.push(newLine+nextIndent+keyStr+":"+sep+val)}return"{"+output.join(","+sep)+newLine+_indentStr+"}"}else if(typeof it=="function"&&dojox.json.ref.serializeFunctions)return it.toString();return djson.toJson(it)}var json=serialize(it,"#","");if(!indexSubObjects)for(var i in generated)delete generated[i].__id;return json},_addProp:function(id,prop){return id+(id.match(/#/)?id.length==1?"":".":"#")+
prop},refAttribute:"$ref",_useRefs:false,serializeFunctions:false}})},"dojo/dnd/Manager":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../_base/window","../dom-class","../Evented","../has","../keys","../on","../topic","../touch","./common","./autoscroll","./Avatar"],function(array,declare,event,lang,win,domClass,Evented,has,keys,on,topic,touch,dnd,autoscroll,Avatar){var Manager=declare("dojo.dnd.Manager",[Evented],{constructor:function(){this.avatar=null;
this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[]},OFFSET_X:has("touch")?0:16,OFFSET_Y:has("touch")?-64:16,overSource:function(source){if(this.avatar){this.target=source&&source.targetState!="Disabled"?source:null;this.canDropFlag=Boolean(this.target);this.avatar.update()}topic.publish("/dnd/source/over",source)},outSource:function(source){if(this.avatar){if(this.target==source){this.target=null;this.canDropFlag=false;this.avatar.update();topic.publish("/dnd/source/over",
null)}}else topic.publish("/dnd/source/over",null)},startDrag:function(source,nodes,copy){autoscroll.autoScrollStart(win.doc);this.source=source;this.nodes=nodes;this.copy=Boolean(copy);this.avatar=this.makeAvatar();win.body().appendChild(this.avatar.node);topic.publish("/dnd/start",source,nodes,this.copy);this.events=[on(win.doc,touch.move,lang.hitch(this,"onMouseMove")),on(win.doc,touch.release,lang.hitch(this,"onMouseUp")),on(win.doc,"keydown",lang.hitch(this,"onKeyDown")),on(win.doc,"keyup",lang.hitch(this,
"onKeyUp")),on(win.doc,"dragstart",event.stop),on(win.body(),"selectstart",event.stop)];var c="dojoDnd"+(copy?"Copy":"Move");domClass.add(win.body(),c)},canDrop:function(flag){var canDropFlag=Boolean(this.target&&flag);if(this.canDropFlag!=canDropFlag){this.canDropFlag=canDropFlag;this.avatar.update()}},stopDrag:function(){domClass.remove(win.body(),["dojoDndCopy","dojoDndMove"]);array.forEach(this.events,function(handle){handle.remove()});this.events=[];this.avatar.destroy();this.avatar=null;this.source=
this.target=null;this.nodes=[]},makeAvatar:function(){return new Avatar(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(e){var a=this.avatar;if(a){autoscroll.autoScrollNodes(e);var s=a.node.style;s.left=e.pageX+this.OFFSET_X+"px";s.top=e.pageY+this.OFFSET_Y+"px";var copy=Boolean(this.source.copyState(dnd.getCopyKeyState(e)));if(this.copy!=copy)this._setCopyStatus(copy)}if(has("touch"))e.preventDefault()},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=
Boolean(this.source.copyState(dnd.getCopyKeyState(e)));topic.publish("/dnd/drop/before",this.source,this.nodes,copy,this.target,e);topic.publish("/dnd/drop",this.source,this.nodes,copy,this.target,e)}else topic.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(e){if(this.avatar)switch(e.keyCode){case keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy)this._setCopyStatus(copy);break;case keys.ESCAPE:topic.publish("/dnd/cancel");this.stopDrag();break}},onKeyUp:function(e){if(this.avatar&&
e.keyCode==keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy)this._setCopyStatus(copy)}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();domClass.replace(win.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});dnd._manager=null;Manager.manager=dnd.manager=function(){if(!dnd._manager)dnd._manager=new Manager;return dnd._manager};return Manager})},"xide/widgets/_PermaMixin":function(){define(["dojo/_base/declare"],
function(declare){return declare("xide.widgets._PermaMixin",null,{getPermaLink:function(){return null},initWithPermaLink:function(link){}})})},"xide/widgets/DomStyleProperties":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dojo/dom","dojo/dom-attr","xide/widgets/WidgetBase","xide/factory","xide/utils","xide/types","xide/views/CIActionDialog","xide/layout/ContentPane"],function(declare,lang,domStyle,dom,domAttr,WidgetBase,factory,utils,types,CIActionDialog,ContentPane){return declare("xide.widgets.DomStyleProperties",
[WidgetBase],{wContentSelectorButton:null,lastUploadedFileName:null,oriPath:null,minHeight:"400px;",value:"",options:null,styleView:null,tabContainer:null,stylePane:null,preview:null,values:{},previewExtraStyle:"max-width:300px;max-height:100px;height:inherit;width:inherit;",templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e"+"\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e"+"\x3ctbody\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+
"\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'previewNode'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button2'\x3e\x3c/td\x3e"+
"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"+"\x3cdiv data-dojo-attach-point\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'previewRoot' style\x3d'width: inherit;min-height:100px;height:auto;padding: 4px;background-color: #808080'\x3e"+"\x3cdiv id\x3d'div_5' data-dojo-attach-point\x3d'preview' style\x3d'width: inherit;height:inherit;'\x3e\x3c/div\x3e"+"\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'last'\x3e\x3c/div\x3e"+"\x3c/div\x3e",
filePathValidator:function(value,constraints){return true},loadVE:function(readyCB){var styleViewProto=dojo.getObject("xide.ve.views.StyleView");var thiz=this;if(!styleViewProto){var _re=require;_re(["xide/ve/Embedded"],function(Embedded){var veEmbedded=new Embedded;if(readyCB)readyCB()})}else readyCB()},postMixInProperties:function(){this.inherited(arguments);if(this.userData&&this.userData.title)this.title=this.userData.title;if(this.userData&&this.userData.vertical===true||this.vertical===true)this.templateString=
"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e"+"\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e"+"\x3ctbody\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+"\x3ctd width\x3d'100%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'previewNode'\x3e\x3c/td\x3e"+
"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button2'\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"+"\x3cdiv data-dojo-attach-point\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'previewRoot' style\x3d'width: inherit;height:120px;padding: 4px;background-color: #808080'\x3e"+
"\x3cdiv id\x3d'div_5' data-dojo-attach-point\x3d'preview' style\x3d'width: inherit;height:100px;'\x3e"+"\x3cspan class\x3d'dijitReset' style\x3d'text-align: center'\x3eSome Text\x3c/span\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'last' style\x3d''\x3e\x3c/div\x3e"+"\x3c/div\x3e"},onFileSelected:function(path){this.editBox.set("value",path);this.value=path;this.setValue(path)},onReloaded:function(){0&&console.log("on reloaded");this._destroyWidgets();this.createWidgets()},
_destroyWidgets:function(){utils.destroyWidget(this.styleView);utils.destroyWidget(this.stylePane);dojo.empty(this.last);this.styleView=null},createWidgets:function(){this.styleView=this.createStyleView();this.publish(types.EVENTS.RESIZE,null,null,100)},getStyleArray:function(){var value=utils.toString(this.userData["value"]);var _values=value.split(";");var result=[];for(var i=0;i<_values.length;i++){var obj=_values[i];if(!obj||obj.length==0||!obj.split)continue;var keyVal=obj.split(":");if(!keyVal||
!keyVal.length)continue;var _prop={};_prop[keyVal[0]]=keyVal[1];result.push(_prop)}return result},createStyleView:function(){var pane=utils.addWidget(ContentPane,{title:"Widget Properties",closable:false,style:"padding:0px;"},this,this.last,true,"ui-widget-content");this.stylePane=pane;var tabContainer=new dijit.layout.TabContainer({region:"center",tabPosition:"right"+"-h",tabStrip:false,"class":"davinciPalette davinciTopPalette",style:"height:inherit;",splitter:false,nested:true,controllerWidget:"dijit.layout.TabController"});
pane.containerNode.appendChild(tabContainer.domNode);tabContainer.startup();this.tabContainer=tabContainer;var _re=require;var thiz=this;var sview=_re("xide/ve/views/StyleView");var styleView=utils.addWidget(sview,{title:"Properties",toolbarDiv:pane.containerNode},null,tabContainer,true);var ctx={blockChange:function(){},getAppCssRelativeFile:function(){return""},getThemeMeta:function(){return null},editor:thiz,getStyleAttributeValues:function(widget){return thiz.getStyleArray()},getSelection:function(){return thiz._widgetSelection},
_cssCache:{},_getCssFiles:function(){return null},getModel:function(){return{getRule:function(){return[]}}},model:{getMatchingRules:function(){return{rules:[]}}}};this.supports=function(){return true};var widgetEventData={domNode:this.preview,type:"html.div",_srcElement:{tag:"div"},isHtmlWidget:true,isWidget:false,_skipAttrs:[],_edit_context:{},id:"div_5",_params:null,getClassNames:function(){return null},getContext:function(){return ctx},metadata:{"$ownproperty":{},"$src":"no source",content:"\x3cdiv\x3e\x3c/div\x3e",
"description":{"type":"text/html","value":"\x3cp\x3eThe div element has no special meaning at all. It represents its children.\x3c/p\x3e"},version:"1.0","id":"http://www.w3.org/html/div","name":"html.div","spec":"1.0","title":{"type":"text/html","value":"\x3cp\x3eHTML block-level container element.\x3c/p\x3e"}}};this._widgetSelection=[widgetEventData];styleView._initialPerspectiveReady();styleView._editor=this;this.editorID="davinci.ve.HTMLPageEditor";styleView._widgets=[widgetEventData];styleView._widget=
widgetEventData;setTimeout(function(){dojo.publish("/davinci/ui/widgetSelected",[widgetEventData])},100);return styleView},onSelect:function(){if(!this.styleView)this.createWidgets();else this._destroyWidgets()},_onChanged:function(){var _value=this._toStyleString(this.values);if(_value===";")_value="";this.userData.changed=true;this.userData.active=true;this.editBox.set("value",_value);var previewVal=_value+this.previewExtraStyle;domAttr.set(this.preview,"style",previewVal)},onChangeStyleProperty:function(property,
value){if(!property||property==="undefined")return;if(!value||!value.length){delete this.values[property];this._onChanged();return}this.values[property]=value;this._onChanged()},onStyleValuesChange:function(evt){if(!evt||!evt.cascade||!evt.values)return;if(utils.isDescendant(this.domNode,evt.cascade.domNode))this.onChangeStyleProperty(evt.cascade.target[0],evt.cascade._value)},_toStyleString:function(values){var _values=[];for(var prop in values)_values.push(prop+":"+values[prop]);return _values.join(";")+
";"},_toObject:function(styleString){var _result={};var _values=styleString.split(";");for(var i=0;i<_values.length;i++){var obj=_values[i];if(!obj||obj.length==0||!obj.split)continue;var keyVal=obj.split(":");if(!keyVal||!keyVal.length)continue;_result[keyVal[0]]=keyVal[1]}return _result},_createEditBox:function(){var thiz=this;var value=utils.toString(this.userData["value"]);this.editBox=factory.createValidationTextBox(this.previewNode,"","",value,this.filePathValidator,this.delegate,"Not a path!",
"I need some input");this.connectEditBox(this.editBox,function(value){if(value&&value.length){thiz.values=thiz._toObject(value);domAttr.set(thiz.preview,"style",value+thiz.previewExtraStyle);if(thiz.styleView);}})},fillTemplate:function(){var thiz=this;var value=utils.toString(this.userData["value"]);this.values=this._toObject(value);var previewVal=value+this.previewExtraStyle;domAttr.set(this.preview,"style",previewVal);if(!this.editBox)this._createEditBox();this.selectButton=factory.createButton(this.button0,
"el-icon-magic","elusiveButton","","",this.onSelect,this);this.subscribe("/davinci/ui/styleValuesChange",this.onStyleValuesChange)},startup:function(){this.inherited(arguments);var styleViewProto=dojo.getObject("xide.ve.views.StyleView");var thiz=this;this._createEditBox();if(!styleViewProto)this.loadVE(function(){thiz.fillTemplate()});else this.fillTemplate();this.onReady()}})})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(lang){function throwAbstract(){throw new TypeError("abstract");
}return lang.extend(function Promise(){},{then:function(callback,errback,progback){throwAbstract()},cancel:function(reason,strict){throwAbstract()},isResolved:function(){throwAbstract()},isRejected:function(){throwAbstract()},isFulfilled:function(){throwAbstract()},isCanceled:function(){throwAbstract()},always:function(callbackOrErrback){return this.then(callbackOrErrback,callbackOrErrback)},otherwise:function(errback){return this.then(null,errback)},trace:function(){return this},traceRejected:function(){return this},
toString:function(){return"[object Promise]"}})})},"dgrid/extensions/ColumnResizer":function(){define(["dojo/_base/declare","dojo/on","dojo/query","dojo/_base/lang","dojo/dom","dojo/dom-geometry","dojo/has","../util/misc","put-selector/put","dojo/_base/html","dojo/has!debug?xstyle/css!../css/extensions/ColumnResizer.css"],function(declare,listen,query,lang,dom,geom,has,miscUtil,put){function addRowSpan(table,span,startRow,column,id){for(var i=1;i<span;i++)table[startRow+i][column]=id}function subRowAssoc(subRows){var i=
subRows.length,l=i,numCols=subRows[0].length,table=new Array(i);while(i--)table[i]=new Array(numCols);var associations={};for(i=0;i<l;i++){var row=table[i],subRow=subRows[i];for(var j=0,js=0;j<numCols;j++){var cell=subRow[js],k;if(typeof row[j]!="undefined")continue;row[j]=cell.id;if(cell.rowSpan&&cell.rowSpan>1)addRowSpan(table,cell.rowSpan,i,j,cell.id);if(i>0&&cell.colSpan&&cell.colSpan>1)for(k=1;k<cell.colSpan;k++){row[++j]=cell.id;if(cell.rowSpan&&cell.rowSpan>1)addRowSpan(table,cell.rowSpan,
i,j,cell.id)}associations[cell.id]=subRows[0][j].id;js++}}return associations}function resizeColumnWidth(grid,colId,width,parentType,doResize){if(width<=0)return;var column=grid.columns[colId],event,rule;if(!column)return;event={grid:grid,columnId:colId,width:width,bubbles:true,cancelable:true};if(parentType)event.parentType=parentType;if(!grid._resizedColumns||listen.emit(grid.headerNode,"dgrid-columnresize",event)){if(width==="auto")delete column.width;else{column.width=width;width+="px"}rule=grid._columnSizes[colId];
if(rule)rule.set("width",width);else rule=miscUtil.addCssRule("#"+miscUtil.escapeCssIdentifier(grid.domNode.id)+" .dgrid-column-"+miscUtil.escapeCssIdentifier(colId,"-"),"width: "+width+";");grid._columnSizes[colId]=rule;if(doResize!==false)grid.resize();return true}}var resizerNode,resizableCount=0;var resizer={create:function(){resizerNode=put("div.dgrid-column-resizer")},destroy:function(){put(resizerNode,"!");resizerNode=null},show:function(grid){var pos=geom.position(grid.domNode,true);resizerNode.style.top=
pos.y+"px";resizerNode.style.height=pos.h+"px";put(document.body,resizerNode)},move:function(x){resizerNode.style.left=x+"px"},hide:function(){resizerNode.parentNode.removeChild(resizerNode)}};return declare(null,{resizeNode:null,minWidth:40,adjustLastColumn:true,_resizedColumns:false,buildRendering:function(){this.inherited(arguments);if(!resizableCount++)resizer.create()},destroy:function(){this.inherited(arguments);for(var name in this._columnSizes)this._columnSizes[name].remove();if(!--resizableCount)resizer.destroy()},
resizeColumnWidth:function(colId,width){return resizeColumnWidth(this,colId,width)},configStructure:function(){var oldSizes=this._oldColumnSizes=lang.mixin({},this._columnSizes),k;this._resizedColumns=false;this._columnSizes={};this.inherited(arguments);for(k in oldSizes)if(!(k in this._columnSizes))oldSizes[k].remove();delete this._oldColumnSizes},_configColumn:function(column){this.inherited(arguments);var colId=column.id,rule;if("width"in column){if(rule=this._oldColumnSizes[colId])rule.set("width",
column.width+"px");else rule=miscUtil.addCssRule("#"+miscUtil.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+miscUtil.escapeCssIdentifier(colId,"-"),"width: "+column.width+"px;");this._columnSizes[colId]=rule}},renderHeader:function(){this.inherited(arguments);var grid=this;var assoc;if(this.columnSets&&this.columnSets.length){var csi=this.columnSets.length;while(csi--)assoc=lang.mixin(assoc||{},subRowAssoc(this.columnSets[csi]))}else if(this.subRows&&this.subRows.length>1)assoc=subRowAssoc(this.subRows);
var colNodes=query(".dgrid-cell",grid.headerNode),i=colNodes.length;while(i--){var colNode=colNodes[i],id=colNode.columnId,col=grid.columns[id],childNodes=colNode.childNodes,resizeHandle;if(!col||col.resizable===false)continue;var headerTextNode=put("div.dgrid-resize-header-container");colNode.contents=headerTextNode;while(childNodes.length>0)put(headerTextNode,childNodes[0]);resizeHandle=put(colNode,headerTextNode,"div.dgrid-resize-handle.resizeNode-"+miscUtil.escapeCssIdentifier(id,"-"));resizeHandle.columnId=
assoc&&assoc[id]||id}if(!grid.mouseMoveListen){listen(grid.headerNode,".dgrid-resize-handle:mousedown"+(has("touch")?",.dgrid-resize-handle:touchstart":""),function(e){grid._resizeMouseDown(e,this);grid.mouseMoveListen.resume();grid.mouseUpListen.resume()});grid._listeners.push(grid.mouseMoveListen=listen.pausable(document,"mousemove"+(has("touch")?",touchmove":""),miscUtil.throttleDelayed(function(e){grid._updateResizerPosition(e)})));grid._listeners.push(grid.mouseUpListen=listen.pausable(document,
"mouseup"+(has("touch")?",touchend":""),function(e){grid._resizeMouseUp(e);grid.mouseMoveListen.pause();grid.mouseUpListen.pause()}));grid.mouseMoveListen.pause();grid.mouseUpListen.pause()}},_resizeMouseDown:function(e,target){e.preventDefault();dom.setSelectable(this.domNode,false);this._startX=this._getResizeMouseLocation(e);this._targetCell=query(".dgrid-column-"+miscUtil.escapeCssIdentifier(target.columnId,"-"),this.headerNode)[0];this._updateResizerPosition(e);resizer.show(this)},_resizeMouseUp:function(e){var columnSizes=
this._columnSizes,colNodes,colWidths,gridWidth;if(this.adjustLastColumn)gridWidth=this.headerNode.clientWidth-1;if(!this._resizedColumns){colNodes=query(".dgrid-cell",this.headerNode);if(this.columnSets&&this.columnSets.length)colNodes=colNodes.filter(function(node){var idx=node.columnId.split("-");return idx[0]=="0"&&!(node.columnId in columnSizes)});else if(this.subRows&&this.subRows.length>1)colNodes=colNodes.filter(function(node){return node.columnId.charAt(0)=="0"&&!(node.columnId in columnSizes)});
colWidths=colNodes.map(function(colNode){return colNode.offsetWidth});colNodes.forEach(function(colNode,i){resizeColumnWidth(this,colNode.columnId,colWidths[i],null,false)},this);this._resizedColumns=true}dom.setSelectable(this.domNode,true);var cell=this._targetCell,delta=this._getResizeMouseLocation(e)-this._startX,newWidth=cell.offsetWidth+delta,obj=this._getResizedColumnWidths(),totalWidth=obj.totalWidth,lastCol=obj.lastColId,lastColWidth=query(".dgrid-column-"+miscUtil.escapeCssIdentifier(lastCol,
"-"),this.headerNode)[0].offsetWidth;if(newWidth<this.minWidth)newWidth=this.minWidth;if(resizeColumnWidth(this,cell.columnId,newWidth,e.type))if(cell.columnId!=lastCol&&this.adjustLastColumn)if(totalWidth+delta<gridWidth)resizeColumnWidth(this,lastCol,"auto",e.type);else if(lastColWidth-delta<=this.minWidth)resizeColumnWidth(this,lastCol,this.minWidth,e.type);resizer.hide();delete this._startX;delete this._targetCell},_updateResizerPosition:function(e){if(!this._targetCell)return;var mousePos=this._getResizeMouseLocation(e),
delta=mousePos-this._startX,width=this._targetCell.offsetWidth,left=mousePos;if(width+delta<this.minWidth)left=this._startX-(width-this.minWidth);resizer.move(left)},_getResizeMouseLocation:function(e){var posX=0;if(e.pageX)posX=e.pageX;else if(e.clientX)posX=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;return posX},_getResizedColumnWidths:function(){var totalWidth=0,colNodes=query(".dgrid-cell",this.headerNode);if(this.columnSets&&this.columnSets.length)colNodes=colNodes.filter(function(node){var idx=
node.columnId.split("-");return idx[1]=="0"});else if(this.subRows&&this.subRows.length>1)colNodes=colNodes.filter(function(node){return node.columnId.charAt(0)=="0"});var i=colNodes.length;if(!i)return{};var lastColId=colNodes[i-1].columnId;while(i--)totalWidth+=colNodes[i].offsetWidth;return{totalWidth:totalWidth,lastColId:lastColId}}})})},"xide/views/Dialog":function(){define(["dojo/_base/declare","dijit/Dialog","xide/mixins/EventedMixin","xide/factory","dojo/dom-class","dojo/dom-geometry","dojo/dom-style",
"dojo/window"],function(declare,Dialog,EventedMixin,factory,domClass,domGeometry,domStyle,winUtils){return declare("xide.views.Dialog",[Dialog,EventedMixin],{maxRatio:0.9,_messages:null,minimizable:false,_minimizeButton:null,minimize:function(){},_makeMinizable:function(){var button=factory.createButton(this.titleBar,"fa-minus-square-o","","position:absolute;right:24px;margin:0px","",null,this);dojo.place(button.domNode,this.closeButtonNode,"before");domClass.remove(button.domNode,"dijitButton");
domClass.remove(button.domNode,"dijitReset");domClass.remove(button.domNode.children[0],"dijitButtonNode");domClass.remove(button.domNode.children[0],"dijitReset")},_position:function(){if(!domClass.contains(this.ownerDocumentBody,"dojoMove")){var node=this.domNode,viewport=winUtils.getBox(this.ownerDocument),p=this._relativePosition,bb=p?null:domGeometry.position(node),l=Math.floor(viewport.l+(p?p.x:(viewport.w-bb.w)/2)),t=Math.floor(viewport.t+(p?p.y:(viewport.h-bb.h)/2));domStyle.set(node,{left:l+
"px",top:t+"px"})}},translate:function(value,toLowerCase){if(value&&value.length!=null&&value.toLocaleLowerCase!=null){var _titleKey=toLowerCase===false?value:value.toLocaleLowerCase();_titleKey=_titleKey.replace(/\s+/g,"_");if(_titleKey&&this._messages!=null){var _titleValue=this._messages[_titleKey];if(_titleValue&&_titleValue.length>0)return _titleValue}}return value},postMixInProperties:function(){this.inherited(arguments);var ctxo=sctx||this.ctx;if(mctx!=null)ctxo=mctx;if(ctxo&&ctxo.getLocals)this._messages=
ctxo.getLocals("xide.widgets","TemplatedWidgetBase");else this._messages=[]},show:function(){var res=this.inherited(arguments);if(this.titleNode)this.titleNode.innerHTML=this.translate(this.title);if(this.minimizable)this._makeMinizable();return res}})})},"xfile/views/FilePropertyView":function(){define("xfile/views/FilePropertyView",["dojo/_base/declare","xide/widgets/TemplatedWidgetBase","xide/mixins/EventedMixin","xide/utils","xide/types","xide/factory","xfile/widgets/FileProperties","dojo/dom-construct"],
function(declare,TemplatedWidgetBase,EventedMixin,utils,types,factory,FileProperties,domConstruct){return declare("xfile.views.FilePropertyView",[TemplatedWidgetBase],{thumbSize:"200",resizeThumb:true,root:null,iconNode:null,theme:"/default/",themeRoot:null,icon:null,fileProperties:null,propsNode:null,getThemePath:function(){return this.themeRoot+this.theme},templateString:"\x3cdiv\x3e\x3cdiv class\x3d'rootNode' data-dojo-attach-point\x3d'root'\x3e"+"\x3cdiv class\x3d'propertyHeader'\x3e\x3c/div\x3e"+
"\x3cdiv class\x3d'iconNode' data-dojo-attach-point\x3d'iconNode'\x3e\x3c/div\x3e"+"\x3chr/\x3e"+"\x3cdiv class\x3d'propertyNode' data-dojo-attach-point\x3d'propsNode'\x3e\x3c/div\x3e"+"\x3chr/\x3e"+"\x3c/div\x3e",getImageUrl:function(item){if(this.delegate&&this.delegate.getImageUrl){var params=null;if(this.resizeThumb)params={width:this.thumbSize};var res=this.delegate.getImageUrl(item,null,params);return res}return null},renderIcon:function(icon){if(this.icon)utils.destroyWidget(this.icon);var allowCache=
false;if(icon.indexOf("mimes/64")!=-1)allowCache=true;if(!allowCache);var image=new xfile.widgets.Image({src:icon,backgroundClass:"filePropertyMimeIcon",triggerOnLoad:false},dojo.doc.createElement("div"));this.iconNode.appendChild(image.domNode);image.startup();this.icon=image},renderIconClass:function(icon){if(this.icon)utils.destroyWidget(this.icon);var imageClass="fa "+icon+" fa-5x "+"fileIconProperty";var _icon=domConstruct.create("span",{innerHTML:"\x26nbsp;",className:imageClass});this.iconNode.appendChild(_icon);
this.icon=_icon},renderProps:function(item){if(this.fileProperties)utils.destroyWidget(this.fileProperties);var props=new FileProperties({item:item},dojo.doc.createElement("div"));this.propsNode.appendChild(props.domNode);props.startup();this.fileProperties=props},initWithItem:function(obj){if(!obj)return;if(this.item==obj)return;this.item=obj;var icon=""+obj.icon||"";var didRenderIcon=false;if(obj&&obj.directory!=null&&obj.directory===true){this.renderIconClass("fa-folder");didRenderIcon=true}else if(obj.directory==
null){var imageClass="";if(utils.isImage(obj.path)){var url=this.getImageUrl(obj);if(url)icon=url;else utils.cleanUrl(this.webRoot+"/"+obj.path)}else{this.renderIconClass(utils.getIconClass(obj.path));didRenderIcon=true}}if(!didRenderIcon)this.renderIcon(icon);try{this.renderProps(obj)}catch(e){console.error("error in file property view : "+e.message)}this.publish(types.EVENTS.ON_FILE_PROPERTIES_RENDERED,{view:this,item:obj})},isMyBeanContext:function(evtData){return!(evtData.beanContextName&&this.beanContextName&&
evtData.beanContextName!==this.beanContextName)},onItemSelected:function(data){try{if(data&&data.item&&data.item._S){var item=data.item;if(this.isMyBeanContext(data))this.initWithItem(item)}}catch(e){}},destroy:function(){this.inherited(arguments)},startup:function(){if(this.didStartup)return;this.inherited(arguments);this.didStartup=true;var thiz=this;this.subscribe(types.EVENTS.ITEM_SELECTED,function(data){thiz.onItemSelected(data)},this)}})})},"dijit/_KeyNavMixin":function(){define("dijit/_KeyNavMixin",
["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(array,declare,domAttr,keys,lang,on,registry,_FocusMixin){return declare("dijit._KeyNavMixin",_FocusMixin,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);domAttr.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var keyCodes=this._keyNavCodes={};keyCodes[keys.HOME]=lang.hitch(this,"focusFirstChild");keyCodes[keys.END]=
lang.hitch(this,"focusLastChild");keyCodes[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]=lang.hitch(this,"_onLeftArrow");keyCodes[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]=lang.hitch(this,"_onRightArrow");keyCodes[keys.UP_ARROW]=lang.hitch(this,"_onUpArrow");keyCodes[keys.DOWN_ARROW]=lang.hitch(this,"_onDownArrow")}var self=this,childSelector=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.domNode,"keypress",lang.hitch(this,
"_onContainerKeypress")),on(this.domNode,"keydown",lang.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",lang.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(childSelector,"focusin"),function(evt){self._onChildFocus(registry.getEnclosingWidget(this),evt)}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,
1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(widget,last){if(!widget)return;if(this.focusedChild&&widget!==this.focusedChild)this._onChildBlur(this.focusedChild);widget.set("tabIndex",this.tabIndex);widget.focus(last?"end":"start")},_onContainerFocus:function(evt){if(evt.target!==this.domNode||
this.focusedChild)return;this.focus()},_onFocus:function(){domAttr.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(evt){domAttr.set(this.domNode,"tabIndex",this.tabIndex);if(this.focusedChild){this.focusedChild.set("tabIndex","-1");this.lastFocusedChild=this.focusedChild;this._set("focusedChild",null)}this.inherited(arguments)},_onChildFocus:function(child){if(child&&child!=this.focusedChild){if(this.focusedChild&&!this.focusedChild._destroyed)this.focusedChild.set("tabIndex",
"-1");child.set("tabIndex",this.tabIndex);this.lastFocused=child;this._set("focusedChild",child)}},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(item,evt,searchString,numMatches){if(item)this.focusChild(item)},_keyboardSearchCompare:function(item,searchString){var element=item.domNode,text=item.label||(element.focusNode?element.focusNode.label:"")||element.innerText||element.textContent||"",currentString=text.replace(/^\s+/,"").substr(0,searchString.length).toLowerCase();
return!!searchString.length&&currentString==searchString?-1:0},_onContainerKeydown:function(evt){var func=this._keyNavCodes[evt.keyCode];if(func){func(evt,this.focusedChild);evt.stopPropagation();evt.preventDefault();this._searchString=""}else if(evt.keyCode==keys.SPACE&&this._searchTimer&&!(evt.ctrlKey||evt.altKey||evt.metaKey)){evt.stopImmediatePropagation();evt.preventDefault();on.emit(this.domNode,"keypress",{charCode:keys.SPACE,cancelable:true,bubbles:true})}},_onContainerKeypress:function(evt){if(evt.charCode<
32)return;if(evt.ctrlKey||evt.altKey)return;var matchedItem=null,searchString,numMatches=0,search=lang.hitch(this,function(){if(this._searchTimer)this._searchTimer.remove();this._searchString+=keyChar;var allSameLetter=/^(.)\1*$/.test(this._searchString);var searchLen=allSameLetter?1:this._searchString.length;searchString=this._searchString.substr(0,searchLen);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString=""},this.multiCharSearchDuration);var currentItem=this.focusedChild||
null;if(searchLen==1||!currentItem){currentItem=this._getNextFocusableChild(currentItem,1);if(!currentItem)return}var stop=currentItem;do{var rc=this._keyboardSearchCompare(currentItem,searchString);if(!!rc&&numMatches++==0)matchedItem=currentItem;if(rc==-1){numMatches=-1;break}currentItem=this._getNextFocusableChild(currentItem,1)}while(currentItem!=stop)}),keyChar=String.fromCharCode(evt.charCode).toLowerCase();evt.preventDefault();evt.stopPropagation();search();this.onKeyboardSearch(matchedItem,
evt,searchString,numMatches)},_onChildBlur:function(){},_getNextFocusableChild:function(child,dir){var wrappedValue=child;do{if(!child){child=this[dir>0?"_getFirst":"_getLast"]();if(!child)break}else child=this._getNext(child,dir);if(child!=null&&child!=wrappedValue&&child.isFocusable())return child}while(child!=wrappedValue);return null},_getFirst:function(){return null},_getLast:function(){return null},_getNext:function(child,dir){if(child){child=child.domNode;while(child){child=child[dir<0?"previousSibling":
"nextSibling"];if(child&&"getAttribute"in child){var w=registry.byNode(child);if(w)return w}}}return null}})})},"xfile/manager/PanelManager":function(){define("xfile/manager/PanelManager",["dojo/_base/declare","dojo/_base/lang","./PanelManagerBase","xfile/factory","xide/utils","xfile/views/FilePanel","xfile/views/FileTreeView","xide/types","xfile/views/FilePropertyView","xide/widgets/TemplatedWidgetBase","./PanelManagerActions","xide/mixins/EventedMixin","dojox/encoding/digests/SHA1","xfile/views/EditorPluginMixin",
"xide/factory","xide/layout/ContentPane"],function(declare,lang,PanelManagerBase,factory,utils,FilePanel,FileTreeView,types,FilePropertyView,TemplatedWidgetBase,PanelManagerActions,EventedMixin,SHA1,EditorPluginMixin,xfactory,ContentPane){return declare("xfile.manager.PanelManager",[PanelManagerBase,TemplatedWidgetBase,PanelManagerActions,EventedMixin],{panels:null,tabContainer:null,currentPanel:null,store:null,model:null,newAlternateTarget:"topTabs",propertyView:null,propertyViewPanel:null,contentPreview:null,
templateString:"\x3cdiv\x3e\x3c/div\x3e",rootView:null,currentLightBox:null,onPerspectiveChangedEnd:function(){utils.destroyWidget([this.propertyView],false,this);this.propertyView=null},onPerspectiveChanged:function(mode){0&&console.log("changing perspective to "+mode);this.getRootView().setPerspective(mode)},editMount:function(mount){this.ctx.getMountManager().editMount(mount)},removeMount:function(mount){this.ctx.getMountManager().removeMount(mount)},getSources:function(){return this.ctx.getMountManager().getMounts()},
getImageUrl:function(src,cache,params){return this.ctx.getFileManager().getImageUrl(src,cache,params)},getRootView:function(){return this.rootView},getRootContainer:function(){return this.rootView.layoutMain},onBrowserFilesDropped:function(srcView,files){this.ctx.getFileManager().config=this.config;this.ctx.getFileManager().store=this.store;var dst0=srcView.getCopyDestination();var parent=srcView.getCurrentParent();var dst=parent||dst0;this.ctx.getFileManager().upload(files,dst.mount,dst?dst.path:
"./tmp",srcView)},onBrowserUrlDropped:function(srcView,url){var dst0=srcView.getCopyDestination();var parent=srcView.getCurrentParent();var dst=parent||dst0;var store=dst._S,thiz=this;var struct={store:store,dst:dst.path,operation:types.OPERATION.DOWNLOAD_TO};this.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,thiz);var cb=_readyCB=function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,thiz);if(parent){var struct2={store:store,dst:parent.path,operation:types.OPERATION.DOWNLOAD_TO};thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,
struct2,thiz);setTimeout(function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct2,thiz)},100)}};this.ctx.getFileManager().downloadTo(url,dst.mount,dst?dst.path:"./tmp",cb,dst)},getNewAlternateTarget:function(item,panel){if(this.rootView&&this.rootView.getNewAlternateTarget){var target=this.rootView.getNewAlternateTarget();if(target)return target}return utils.getWidget(this.newAlternateTarget)},openItemAlternate:function(item,panel){if(!item)return null;var target=this.getNewAlternateTarget(item,
panel);if(!target)return null;if(item&&item.directory!=null&&item.directory===true){var pathToOpen=item.path;var _panel=this.createFilePanelEx(item.mount,panel,pathToOpen,target,{config:{allowFiles:false}});_panel.owner=panel;return _panel}},closeFile:function(editor,item,panel){if(editor&&editor.onClose){if(editor&&editor.owner&&editor.owner.onFileClosed)editor.owner.onFileClosed(editor);editor.onClose()}},onItemSelected:function(eventData){var item=eventData.item;if(!item||!item.path)return null},
createEditor:function(ctrArgs,item){if(lang.isArray(item))item=item[0];var title=item?item.name:"";var thiz=this;var ctrArgsFinal={ctx:this.ctx,config:this.config,item:item,title:title,closeable:true,closable:true};if(ctrArgs)lang.mixin(ctrArgsFinal,ctrArgs);if(lang.isString(ctrArgs.editorClass)){if(!dojo.getObject(ctrArgs.editorClass))return null}else if(lang.isObject(ctrArgs.editorClass));var root=null;if(this.ctx.mainView&&this.ctx.mainView.getNewAlternateTarget)root=this.ctx.mainView.getNewAlternateTarget();
if(!root)return null;if(!ctrArgs.editorClass.prototype.isInstanceOf(ContentPane)){ctrArgsFinal.style="padding:0px;";var pane=utils.addWidget(ContentPane,ctrArgsFinal,thiz,root,true);root=pane.containerNode}if(!ctrArgsFinal.style)ctrArgsFinal.style="padding:0px;";else ctrArgsFinal.style+=";padding:0px;";thiz.publish(types.EVENTS.ON_CREATE_EDITOR_BEGIN,{args:ctrArgsFinal,item:item},this);setTimeout(function(){var editor=utils.addWidget(ctrArgs.editorClass,ctrArgsFinal,thiz,root,true);var struct={item:item,
view:editor};thiz.publish(types.EVENTS.ON_CREATE_EDITOR_END,{args:ctrArgsFinal,item:item,editor:editor},this);if(editor.openItem)editor.openItem(item);else setTimeout(function(){thiz.publish(types.EVENTS.ITEM_SELECTED,struct,editor)},100);if(root.resize)root.resize()},0)},openFile:function(item,panel,params){if(!item||!item.path)return null;var openInTextEditor=false;if(params&&params.label==="Text-Editor")openInTextEditor=true;if(!openInTextEditor){var defaultEditor=EditorPluginMixin.getDefaultEditor(item);
if(defaultEditor){0&&console.log("found default Editor : ",defaultEditor);try{return this.createEditor(defaultEditor,item)}catch(e){debugger}}}if(utils.isImage(item.path));var openDelegate=this.ctx.getOpenDelegate();if(openDelegate&&openDelegate.openMySelf){var res=openDelegate.openMySelf(item);if(res)return}if(this.ctx.getScriptManager()!=null){var editor=this.ctx.getScriptManager().onFileClicked(item);if(editor){editor.owner=panel;return editor}}return null},getLastActivePanel:function(){if(this.panels.length>
0)return this.panels[this.panels.length-1];return null},onHidePanel:function(panel){},_findNextTab:function(originPanel){var candidate=null;var originRegion=originPanel.region;if(originPanel.parentContainer)originRegion=originPanel.parentContainer.region;for(var i=0;i<this.panels.length;i++){var panel=this.panels[i];if(panel!=originPanel&&panel.isVisible()){var dstRegion=panel.region;if(originPanel.parentContainer)dstRegion=panel.parentContainer.region;if(originRegion!=dstRegion)candidate=panel}}return candidate},
onTab:function(panel){var nextTab=this._findNextTab(panel);if(nextTab&&nextTab.currentView)if(nextTab.getActiveItem&&nextTab.getActiveItem()&&nextTab.currentView.focusItem)nextTab.currentView.focusItem(nextTab.getActiveItem(),false);else if(nextTab.currentView.focusFirstItem)nextTab.currentView.focusFirstItem()},onClosedPanel:function(panel){var reRoot=false;if(panel)if(panel.parentContainer){var children=panel.parentContainer.getChildren();if(children.length==1)reRoot=true;if(reRoot)if(this.rootView)this.rootView.onLastPanelRemoved()}},
onClosePanel:function(panel){var reRoot=false;if(panel){if(panel.parentContainer){var children=panel.parentContainer.getChildren();if(children.length==2)reRoot=true;if(panel.owner&&panel.owner.onPanelClosed)panel.owner.onPanelClosed(panel);panel.parentContainer.removeChild(panel);if(reRoot)if(this.rootView)this.rootView.onLastPanelRemoved()}this.panels.remove(panel)}this.currentPanel=this.getLastActivePanel()||this.currentPanel;if(this.currentPanel&&this.currentPanel.restoreFocus)this.currentPanel.restoreFocus()},
onShowPanel:function(panel,wasNew){if(wasNew);this.currentPanel=panel},getStore:function(mount,storeOptions){var store=this.ctx.getStore(mount,storeOptions);return store},createFilePanelEx:function(mount,owner,url,where,options){this.initVariables();if(url==null)url=".";if(mount==null)mount="root";var store=null;if(mount!==null)store=this.getStore(mount);var startMode=types.FILE_PANEL_LAYOUT.LIST;if(owner.config&&owner.config.layoutMode)startMode=owner.config.layoutMode;var _options={title:url||"./",
cookiePrefix:"left",url:url,region:"left",closable:true,config:this.config,className:"xfileContainerEmbedded filePanel",ctx:this.ctx,clipboardManager:this.ctx.getClipboardManager(),panelManager:this,lazy:false,owner:owner,store:store||this.store,startPath:url,startLayout:startMode};if(options)if(options.config){var newConfig=factory.cloneConfig(_options.config);_options.config=newConfig;lang.mixin(_options.config,options.config)}var panel=utils.addWidget(FilePanel,_options,this,where,true);panel.panelDelegate=
panel;this.panels.push(panel);return panel},cloneConfig:function(config){var newConfig={ACTION_TOOLBAR_MODE:config.ACTION_TOOLBAR_MODE,ALLOWED_ACTIONS:lang.clone(config.ALLOWED_ACTIONS),FILES_STORE_SERVICE_CLASS:config.FILES_STORE_SERVICE_CLASS,FILES_STORE_URL:config.FILES_STORE_URL,FILE_PANEL_OPTIONS_LEFT:lang.clone(config.FILE_PANEL_OPTIONS_LEFT),FILE_PANEL_OPTIONS_MAIN:lang.clone(config.FILE_PANEL_OPTIONS_MAIN),FILE_PANEL_OPTIONS_RIGHT:lang.clone(config.FILE_PANEL_OPTIONS_RIGHT),FILE_SERVICE:config.FILE_SERVICE,
FILE_SERVICE_FULL:config.FILE_SERVICE_FULL,LAYOUT_PRESET:config.LAYOUT_PRESET,PANEL_OPTIONS:config.PANEL_OPTIONS,REPO_URL:config.REPO_URL,RPC_PARAMS:config.RPC_PARAMS,THEME_ROOT:config.THEME_ROOT,WEB_ROOT:config.WEB_ROOT,allowFiles:config.allowFiles,clipboardManager:config.clipboardManager,columnFlags:lang.clone(config.columnFlags),columns:config.columns,hasControls:config.hasControls,hasTrail:config.hasTrail,keyboardDelegate:config.keyboardDelegate,mouseDelegate:config.mouseDelegate,layoutMode:config.layoutMode,
selectionMode:config.selectionMode};return newConfig},createFilePanel:function(url,title,container,config,lazy,cookiePrefix,region,mount,storeOptions,mixins){this.initVariables();var thiz=this;if(url==null)url=".";if(mount==null)if(this.config&&this.config.defaultStoreName)mount=this.config.defaultStoreName;else mount="root";var store=null;if(mount!==null)store=this.getStore(mount,storeOptions);var _ctorArgs={title:title||url||"./",cookiePrefix:cookiePrefix||"left",url:url,region:region||"left",closable:true,
config:config||this.config,className:"xfileContainerEmbedded filePanel ui-widget-content",ctx:this.ctx,parentContainer:container,delegate:this,clipboardManager:this.ctx.getClipboardManager(),panelManager:this,lazy:lazy,store:store||this.store};if(mixins)_ctorArgs=lang.mixin(_ctorArgs,mixins);var tabView=new FilePanel(_ctorArgs);tabView.panelDelegate=tabView;this.panels.push(tabView);container.addChild(tabView);if(tabView.id=="xfiles_views_FilePanel_3");return tabView},onPanelAdded:function(panelStruct){},
onChangeRoot:function(panel,root){return this.getStore(root)},initVariables:function(){if(!this.panels)this.panels=[];if(!this.store)this.store=window["xappFileStore"];if(!this.model)this.model=window["xappFileModel"]},openUrl:function(url,container,config,cookiePrefix,region,mount,storeOptions,mixins){var tabbed=true;if(config)if(config.PANEL_OPTIONS!=null&&config.PANEL_OPTIONS.ALLOW_MULTI_TAB===false)tabbed=false;if(tabbed)if(!this.tabContainer)this.tabContainer=factory.createMultiTabView(container,
url||"./");var dstContainer=this.tabContainer||container;var panel=this.createFilePanel(url,url,dstContainer,config,false,cookiePrefix,region,mount,storeOptions,mixins);if(tabbed)panel=this.createFilePanel(url,"New",dstContainer,config,true,cookiePrefix,region,mount,storeOptions,mixins);return panel},onImageLoaded:function(){var main=dijit.registry.byId("main");if(main)main.resize();if(this.propertyViewPanel)this.propertyViewPanel.resize()},onPanelClosedEvent:function(evt){var panel=evt.panel;var reRoot=
false;if(panel){if(!panel.domNode){console.error("did already removed panel!");return}if(panel.parentContainer){var children=panel.parentContainer.getChildren();if(children.length==2)reRoot=true;if(panel.owner&&panel.owner.onPanelClosed)panel.owner.onPanelClosed(panel);try{panel.parentContainer.removeChild(panel)}catch(e){console.error("onPanelClosedEvent crashed")}if(reRoot)if(this.rootView)this.rootView.onLastPanelRemoved()}this.panels.remove(panel)}this.currentPanel=this.getLastActivePanel()||
this.currentPanel;if(this.currentPanel&&this.currentPanel.restoreFocus)this.currentPanel.restoreFocus()},_createPropertyView:function(item,container){var main=dijit.registry.byId("main")||this.mainView;if(!main)return;if(!container)return null;var _container=utils.addWidget(ContentPane,{title:"File Properties",region:"right",splitter:true,className:"filePropertyPanel ui-widget-content",style:"padding:0px;"},null,container,true);container=_container;this.propertyViewPanel=container;this.propertyView=
new FilePropertyView({delegate:this,region:"right",title:this.translate("properties"),minSize:180,className:"filePropertyView ui-widget-content",style:"width:100%;",themeRoot:this.config.THEME_ROOT,webRoot:this.config.REPO_URL},dojo.doc.createElement("div"));container.containerNode.appendChild(this.propertyView.domNode);this.propertyView.startup();main.resize();this.publish(types.EVENTS.RESIZE,{},this);return this.propertyView},onPluginLoaded:function(data){var name=data.name;this.publish(types.EVENTS.ON_PLUGIN_READY,
{name:name,mainView:this.rootView,config:this.config,ctx:this.ctx,panelManager:this,fileManager:this.ctx.getFileManager(),store:this.store,serviceObject:this.ctx.getService()},this)},onActionContextChanged:function(evt){if(evt&&evt.beanType!=="BTFILE"){if(this.propertyView){var _parent=this.propertyView.parentContainer;utils.destroyWidget([this.propertyView,_parent],false,this);this.propertyView=null}this.propertyView=null}else if(evt&&evt.beanType==="BTFILE"){var container=this.ctx.mainView.getRightTopTarget(true,
false);this.propertyView=this._createPropertyView(null,container)}},init:function(){this.initVariables();this.subscribe(types.EVENTS.IMAGE_LOADED,this.onImageLoaded,this);this.subscribe(types.EVENTS.RESIZE,this.onImageLoaded,this);this.subscribe(types.EVENTS.ON_PLUGIN_LOADED,this.onPluginLoaded,this);this.subscribe(types.EVENTS.ITEM_SELECTED,this.onItemSelected,this);this.subscribe(types.EVENTS.ON_PANEL_CLOSED,this.onPanelClosedEvent,this);this.subscribe(types.EVENTS.ON_ACTION_CONTEXT_CHANGED,this.onActionContextChanged);
this._setupTranslations()}})})},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(array,declare,dom,has,keys,lang,on,dijit){var _TextBoxMixin=declare("dijit.form._TextBoxMixin"+(0?"_NoBidi":""),null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),
this.constraints)},_setValueAttr:function(value,priorityChange,formattedValue){var filteredValue;if(value!==undefined){filteredValue=this.filter(value);if(typeof formattedValue!="string")if(filteredValue!==null&&(typeof filteredValue!="number"||!isNaN(filteredValue)))formattedValue=this.filter(this.format(filteredValue,this.constraints));else formattedValue=""}if(formattedValue!=null&&(typeof formattedValue!="number"||!isNaN(formattedValue))&&this.textbox.value!=formattedValue){this.textbox.value=
formattedValue;this._set("displayedValue",this.get("displayedValue"))}this.inherited(arguments,[filteredValue,priorityChange])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(value){if(value==null)value="";else if(typeof value!="string")value=String(value);this.textbox.value=value;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"))},format:function(value){return value==null?
"":value.toString?value.toString():value},parse:function(value){return value},_refreshState:function(){},onInput:function(){},__skipInputEvent:false,_onInput:function(evt){this._processInput(evt);if(this.intermediateChanges)this.defer(function(){this._handleOnChange(this.get("value"),false)})},_processInput:function(evt){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);
var handleEvent=function(e){var charOrCode;if(e.type=="keydown"){charOrCode=e.keyCode;switch(charOrCode){case keys.SHIFT:case keys.ALT:case keys.CTRL:case keys.META:case keys.CAPS_LOCK:case keys.NUM_LOCK:case keys.SCROLL_LOCK:return}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(charOrCode){case keys.NUMPAD_0:case keys.NUMPAD_1:case keys.NUMPAD_2:case keys.NUMPAD_3:case keys.NUMPAD_4:case keys.NUMPAD_5:case keys.NUMPAD_6:case keys.NUMPAD_7:case keys.NUMPAD_8:case keys.NUMPAD_9:case keys.NUMPAD_MULTIPLY:case keys.NUMPAD_PLUS:case keys.NUMPAD_ENTER:case keys.NUMPAD_MINUS:case keys.NUMPAD_PERIOD:case keys.NUMPAD_DIVIDE:return}if(charOrCode>=
65&&charOrCode<=90||charOrCode>=48&&charOrCode<=57||charOrCode==keys.SPACE)return;var named=false;for(var i in keys)if(keys[i]===e.keyCode){named=true;break}if(!named)return}}charOrCode=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;if(!charOrCode)charOrCode=e.keyCode>=65&&e.keyCode<=90||e.keyCode>=48&&e.keyCode<=57||e.keyCode==keys.SPACE?String.fromCharCode(e.keyCode):e.keyCode;if(!charOrCode)charOrCode=229;if(e.type=="keypress"){if(typeof charOrCode!="string")return;if(charOrCode>="a"&&
charOrCode<="z"||charOrCode>="A"&&charOrCode<="Z"||charOrCode>="0"&&charOrCode<="9"||charOrCode===" ")if(e.ctrlKey||e.metaKey||e.altKey)return}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=false;return}}else this.__skipInputEvent=true;var faux={faux:true},attr;for(attr in e)if(attr!="layerX"&&attr!="layerY"){var v=e[attr];if(typeof v!="function"&&typeof v!="undefined")faux[attr]=v}lang.mixin(faux,{charOrCode:charOrCode,_wasConsumed:false,preventDefault:function(){faux._wasConsumed=
true;e.preventDefault()},stopPropagation:function(){e.stopPropagation()}});if(this.onInput(faux)===false){faux.preventDefault();faux.stopPropagation()}if(faux._wasConsumed)return;this.defer(function(){this._onInput(faux)})};this.own(on(this.textbox,"keydown, keypress, paste, cut, input, compositionend",lang.hitch(this,handleEvent)))},_blankValue:"",filter:function(val){if(val===null)return this._blankValue;if(typeof val!="string")return val;if(this.trim)val=lang.trim(val);if(this.uppercase)val=val.toUpperCase();
if(this.lowercase)val=val.toLowerCase();if(this.propercase)val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1)});return val},_setBlurValue:function(){this._setValueAttr(this.get("value"),true)},_onBlur:function(e){if(this.disabled)return;this._setBlurValue();this.inherited(arguments)},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(by){if(this.disabled||this.readOnly)return;if(this.selectOnClick&&
by=="mouse"){this._selectOnClickHandle=on.once(this.domNode,"mouseup, touchend",lang.hitch(this,function(evt){if(!this._isTextSelected())_TextBoxMixin.selectInputText(this.textbox)}));this.own(this._selectOnClickHandle);this.defer(function(){if(this._selectOnClickHandle){this._selectOnClickHandle.remove();this._selectOnClickHandle=null}},500)}this.inherited(arguments);this._refreshState()},reset:function(){this.textbox.value="";this.inherited(arguments)}});if(0)_TextBoxMixin=declare("dijit.form._TextBoxMixin",
_TextBoxMixin,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}});_TextBoxMixin._setSelectionRange=dijit._setSelectionRange=function(element,start,stop){if(element.setSelectionRange)element.setSelectionRange(start,stop)};_TextBoxMixin.selectInputText=dijit.selectInputText=function(element,
start,stop){element=dom.byId(element);if(isNaN(start))start=0;if(isNaN(stop))stop=element.value?element.value.length:0;try{element.focus();_TextBoxMixin._setSelectionRange(element,start,stop)}catch(e){}};return _TextBoxMixin})},"xide/views/SplitView":function(){define(["dojo/_base/declare","xide/utils","xide/types","xide/widgets/TemplatedWidgetBase","xide/widgets/_CSSMixin","xide/widgets/_StyleMixin","xide/widgets/_InsertionMixin","xide/widgets/_HTMLTemplateMixin","dojo/dom-class","xide/widgets/_PermaMixin",
"xide/mixins/EventedMixin","xide/mixins/ItemActionMixin"],function(declare,utils,types,TemplatedWidgetBase,CSSMixin,_StyleMixin,_InsertionMixin,HTMLTemplateMixin,domClass,PermaMixin,EventedMixin,ItemActionMixin){return declare("xide.views.SplitView",[TemplatedWidgetBase,CSSMixin,_StyleMixin,HTMLTemplateMixin,_InsertionMixin,PermaMixin,EventedMixin,ItemActionMixin],{config:null,ctx:null,cssClass:"splitView",layoutMain:null,layoutTop:null,layoutLeft:null,layoutCenter:null,layoutRight:null,layoutBottom:null,
preventCaching:true,leftPanel:null,centerPanel:null,initialReload:false,persistent:false,_restoredPermaItems:0,layoutRightPlaceHolder:null,mode:"vertical",templateString:"\x3cdiv\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutMain' data-dojo-type\x3d'xide.layout.BorderContainer' data-dojo-props\x3d\"design:'headline'\" class\x3d'layoutMain '\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutLeft' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'left',splitter:'true'\" class\x3d'layoutLeftSplit' style\x3d'width: 50%'\x3e\x3c/div\x3e"+
"\x3cdiv data-dojo-attach-point\x3d'layoutCenter' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'center',splitter:'true'\" class\x3d'layoutCenterSplit' style\x3d'width: 50%'\x3e\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e",firstContainer:null,secondContainer:null,setFirstContainer:function(container){utils.destroyWidget(this.firstContainer);dojo.empty(this.layoutLeft.containerNode)},postMixInProperties:function(){if(this.mode=="horizontal")this.templateString="\x3cdiv\x3e"+
"\x3cdiv data-dojo-attach-point\x3d'layoutMain' data-dojo-type\x3d'xide.layout.BorderContainer' data-dojo-props\x3d\"design:'headline'\" class\x3d'layoutMain '\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutLeft' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'top',splitter:'true'\" class\x3d'layoutLeftSplit' style\x3d'height: 50%'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutCenter' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'center',splitter:'true'\" class\x3d'layoutCenterSplit' style\x3d'height: 50%'\x3e\x3c/div\x3e"+
"\x3c/div\x3e"+"\x3c/div\x3e";this.inherited(arguments)},onChildAdded:function(who,what){this.resize()},openItem:function(){},resize:function(){this.inherited(arguments);if(this.layoutMain)this._resizeContainer(this.layoutMain,"main");if(this.layoutLeft)this._resizeContainer(this.layoutLeft,"left");if(this.layoutTop)this._resizeContainer(this.layoutTop,"top");if(this.layoutCenter)this._resizeContainer(this.layoutCenter,"center");if(this.layoutRight)this._resizeContainer(this.layoutRight,"right");
if(this.layoutLeft)this._resizeContainer(this.layoutLeft,"left");if(this.layoutBottom)this._resizeContainer(this.layoutBottom,"bottom")},_resizeContainer:function(container,name){try{if(container&&container.domNode)container.resize();else;}catch(e){}},startup:function(){this.inherited(arguments);if(this.mode=="vertical")domClass.add(this.domNode,"splitViewVertical");else domClass.add(this.domNode,"splitViewHorizontal");this.subscribe(types.EVENTS.RESIZE,this.resize)}})})},"xblox/delegate/BlockActionMixin":function(){define("xblox/delegate/BlockActionMixin",
["dojo/_base/array","dojo/_base/declare","xide/factory","xblox/widgets/AddBlockWidget"],function(array,declare,factory,AddBlockWidget){return declare("xblox.delegate.BlockActionMixin",null,{currentItem:null,prevItem:null,nextItem:null,_watchers:null,blockScope:null,blockToolbar:null,blockProvider:null,blockStore:null,blockGroup:null,blockGridView:null,newRootItemGroup:null,save:true,paste:function(items,owner,cut){var target=this.getItem(),_flatten,source,thiz=this;if(!owner||!owner.gridView)return;
if(!target){for(var i=0;i<items.length;i++){var obj=items[i];if(obj.parentId){obj._parentOri=""+obj.parentId;obj.parentId=null}}_flatten=this.blockScope.flatten(items);var _clones=this.blockScope.cloneBlocks2(_flatten,this.newRootItemGroup);var firstItem=null;for(var i=0;i<_clones.length;i++){var clone=_clones[i];if(!firstItem)firstItem=clone}for(var i=0;i<items.length;i++){var obj=items[i];if(obj._parentOri){obj.parentId=obj._parentOri;delete obj["_parentOri"]}}this.gridView.refresh();this.onItemAdded(firstItem,
firstItem);this.currentItem=firstItem;setTimeout(function(){if(thiz.blockGridView.select)thiz.blockGridView.select(firstItem,true)},50);return}var grid=owner.gridView.grid;var srcScope=items[0].scope;var dstScope=target.scope;if(srcScope!=dstScope)return;if(!cut)return;var insert=target.canAdd()||false;var parent=srcScope.getBlockById(target.parentId);if(!parent)parent=target;var targetState="Moved";var before=false;_flatten=this.blockScope.flatten(items);items=srcScope.cloneBlocks(_flatten);for(var i=
0;i<items.length;i++){source=items[i];if(source==target)0&&console.log("source\x3dtarget!");source.parentId=parent.id;if(parent)parent.add(source);this.onDrop(source,target,before,grid,targetState,insert)}},onDrop:function(source,target,before,grid,targetState,insert){var ctrArgs=source.ctrArgs||{};var proto=source.proto;var add=!before==true&&target.parentId==null;var newBlock=null;var isNewItem=false;if(source.ctrArgs){ctrArgs.scope=ctrArgs.scope||target.scope;ctrArgs.group=ctrArgs.group||target.group;
ctrArgs.parentId=ctrArgs.parentId||target.id;isNewItem=true}if(isNewItem)if(target.parentId==null&&!insert){ctrArgs.parentId=null;newBlock=factory.createBlock(proto,ctrArgs)}else{if(insert&&target.canAdd&&target.canAdd()!=null)newBlock=target.add(proto,ctrArgs,null)}else if(targetState==="Moved")if(source.scope&&target.scope&&source.scope==target.scope){var moved=target.scope.moveTo(source,target,before,insert);if(moved)this.saveItems();else console.error("weird, didnt move");var store=this.blockScope[this.storeField]||
this.blockStore||this.blockScope.blockStore;this.gridView.grid.set("store",store,{group:this.blockGroup});return}else console.error("weird");if(newBlock&&newBlock.postCreate)newBlock.postCreate();var store=this.blockScope[this.storeField]||this.blockStore||this.blockScope.blockStore;this.gridView.grid.set("store",store,{group:this.blockGroup});if(newBlock)this.onItemAdded(target,newBlock)},execute:function(block){if(!block||!block.scope){console.error("have no scope");return}try{var result=block.scope.solveBlock(block,
{highlight:true,force:true})}catch(e){console.error(" excecuting block -  "+block.name+" failed! : "+e);console.error(printStackTrace().join("\n\n"))}},editBlock:function(item){if(!item)return;var thiz=this;var _edited=function(item){if(thiz.save&&thiz.delegate&&thiz.delegate.save)thiz.delegate.save(thiz);thiz.onItemAction(item,false)};var blockManager=this.delegate.getBlockManager?this.delegate.getBlockManager():this.ctx.getBlockManager();blockManager.editBlock(item,_edited)},removeItem:function(item,
updateWatchers){item=item||this.currentItem;0&&console.log("removing block : "+item.name+" | "+item.id);try{if(!item)return false;if(item.remove)item.remove();var store=this.blockScope[this.storeField]||this.blockStore||this.blockScope.blockStore;if(store)store.remove(item.id);if(updateWatchers!==false)this.onItemAction(item);return true}catch(e){debugger}},onItemAdded:function(parent,newItem){if(!parent||!newItem)return false;if(this.blockGridView)try{if(this.blockGridView.expand)this.blockGridView.expand(parent,
true);if(this.blockGridView.select)this.blockGridView.select(newItem,true)}catch(e){console.error("error expanding new blocks!",e)}this.saveItems()},addItem:function(menuItem){var item=menuItem.item;if(!item)return;var target=item.target;var proto=item.proto;var ctorArgs=item.ctrArgs;var where=null;var newBlock=null;if(!target){var _item=this.getItem();if(_item)target=_item}if(target&&proto&&ctorArgs){if(target.owner&&target.dstField){where=target.dstField;target=target.owner}ctorArgs["parentId"]=
target.id;ctorArgs["group"]=null;ctorArgs["parent"]=target;newBlock=target.add(proto,ctorArgs,where);newBlock.parent=target}else if(!target&&proto&&ctorArgs){if(ctorArgs.group==="No Group"&&this.newRootItemGroup)ctorArgs.group=this.newRootItemGroup;if(!ctorArgs.group&&this.newRootItemGroup)ctorArgs.group=this.newRootItemGroup;newBlock=factory.createBlock(proto,ctorArgs)}if(newBlock&&newBlock.postCreate)newBlock.postCreate();var store=this.blockScope[this.storeField]||this.blockStore||this.blockScope.blockStore;
this.gridView.grid.set("store",store,{group:this.blockGroup});this.onItemAdded(target,newBlock)},onItemSelected:function(item){try{}catch(e){console.error("publish ON_BLOCK_SELECTED failed "+e)}this.currentItem=item;if(!this.hasItemActions(item))return;var actions=this.getItemActions(item);if(this.blockToolbar){this.blockToolbar.clear();this.blockToolbar.addActions(actions,this,null)}},hasItemActions:function(item){return true},getItem:function(){return this.currentItem},move:function(dir){var item=
this.getItem();if(!item||!item.parentId)return;try{item.move(item,dir);this.onItemAction(true);0&&console.log("move up to"+item.name)}catch(e){debugger}},saveItems:function(){if(this.save&&this.delegate&&this.delegate.save)this.delegate.save()},getItemActions:function(item){item=item||this.currentItem;var thiz=this;var actions=[];var _createAction=this.createAddBlockWidget(item);actions.push(_createAction);if(item){if(item.canDelete!==false)actions.push(this._createAction("Remove","el-icon-remove-sign",
item,function(){thiz.removeItem()}));if(item.canMove(null,-1))actions.push(this._createAction("Up","el-icon-circle-arrow-up",item,function(){thiz.move(-1)}));if(item.canMove(null,1))actions.push(this._createAction("Down","el-icon-circle-arrow-down",item,function(){thiz.move(1)}));actions.push({title:"Play",icon:"el-icon-play",place:"last",emit:false,style:"",handler:function(){thiz.execute(item)}});actions.push({title:"Reload",icon:"el-icon-refresh",place:"last",emit:false,style:"",handler:function(){thiz.reload()}})}return actions},
update:function(){try{array.forEach(this._watchers,function(item){item()})}catch(e){debugger}},onItemAction:function(save){try{array.forEach(this._watchers,function(item){item()})}catch(e){debugger}if(save!==false)this.saveItems()},registerUpdateFunction:function(fn){if(!this._watchers)this._watchers=[];this._watchers.push(fn)},createAddBlockWidget:function(item){var _addBlock=new AddBlockWidget({item:item,delegate:this,style:"float:left;"},dojo.doc.createElement("div"));_addBlock.startup();return _addBlock},
_createAction:function(label,icon,item,clickFunction){return{title:label,icon:item?item.icon||icon:null,place:"last",emit:false,style:"",handler:clickFunction}}})})},"xide/mixins/EventedMixin":function(){define(["dojo/_base/array","dojo/_base/declare","xide/types","xide/factory"],function(array,declare,types,factory){return declare(null,{_events:null,types:types,subscribe:function(keys,cb,to){var events=factory.subscribe(keys,cb,to||this);if(!this._events)this._events=[];this._events=this._events.concat(events)},
publish:function(keys,data,from,delay){if(data&&!data.beanContextName)data.beanContextName=this.beanContextName?this.beanContextName:this.config?this.config.beanContextName?this.config.beanContextName:null:null;if(delay>0)setTimeout(function(){factory.publish(keys,data,from||this)},delay);else factory.publish(keys,data,from||this)},destroy:function(){this.inherited(arguments);if(!this._events)this._events=[];array.forEach(this._events,dojo.unsubscribe)}})})},"dijit/a11y":function(){define("dijit/a11y",
["dojo/_base/array","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/sniff","./main"],function(array,dom,domAttr,domStyle,lang,has,dijit){var a11y={_isElementShown:function(elem){var s=domStyle.get(elem);return s.visibility!="hidden"&&s.visibility!="collapsed"&&s.display!="none"&&domAttr.get(elem,"type")!="hidden"},hasDefaultTabStop:function(elem){switch(elem.nodeName.toLowerCase()){case "a":return domAttr.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;
case "iframe":var body;try{var contentDocument=elem.contentDocument;if("designMode"in contentDocument&&contentDocument.designMode=="on")return true;body=contentDocument.body}catch(e1){try{body=elem.contentWindow.document.body}catch(e2){return false}}return body&&(body.contentEditable=="true"||body.firstChild&&body.firstChild.contentEditable=="true");default:return elem.contentEditable=="true"}},isTabNavigable:function(elem){if(domAttr.get(elem,"disabled"))return false;else if(domAttr.has(elem,"tabIndex"))return domAttr.get(elem,
"tabIndex")>=0;else return a11y.hasDefaultTabStop(elem)},_getTabNavigable:function(root){var first,last,lowest,lowestTabindex,highest,highestTabindex,radioSelected={};function radioName(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase()}var shown=a11y._isElementShown,isTabNavigable=a11y.isTabNavigable;var walkTree=function(parent){for(var child=parent.firstChild;child;child=child.nextSibling){if(child.nodeType!=1||
has("ie")<=9&&child.scopeName!=="HTML"||!shown(child))continue;if(isTabNavigable(child)){var tabindex=+domAttr.get(child,"tabIndex");if(!domAttr.has(child,"tabIndex")||tabindex==0){if(!first)first=child;last=child}else if(tabindex>0){if(!lowest||tabindex<lowestTabindex){lowestTabindex=tabindex;lowest=child}if(!highest||tabindex>=highestTabindex){highestTabindex=tabindex;highest=child}}var rn=radioName(child);if(domAttr.get(child,"checked")&&rn)radioSelected[rn]=child}if(child.nodeName.toUpperCase()!=
"SELECT")walkTree(child)}};if(shown(root))walkTree(root);function rs(node){return radioSelected[radioName(node)]||node}return{first:rs(first),last:rs(last),lowest:rs(lowest),highest:rs(highest)}},getFirstInTabbingOrder:function(root,doc){var elems=a11y._getTabNavigable(dom.byId(root,doc));return elems.lowest?elems.lowest:elems.first},getLastInTabbingOrder:function(root,doc){var elems=a11y._getTabNavigable(dom.byId(root,doc));return elems.last?elems.last:elems.highest}};1&&lang.mixin(dijit,a11y);return a11y})},
"dojox/mdnd/DropIndicator":function(){define("dojox/mdnd/DropIndicator",["dojo/_base/kernel","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","./AreaManager"],function(dojo,declare,domClass,domConstruct,AreaManager){var di=declare("dojox.mdnd.DropIndicator",null,{node:null,constructor:function(){var dropIndicator=document.createElement("div");var subDropIndicator=document.createElement("div");dropIndicator.appendChild(subDropIndicator);domClass.add(dropIndicator,"dropIndicator");this.node=
dropIndicator},place:function(area,nodeRef,size){if(size)this.node.style.height=size.h+"px";try{if(nodeRef)area.insertBefore(this.node,nodeRef);else area.appendChild(this.node);return this.node}catch(e){return null}},remove:function(){if(this.node){this.node.style.height="";if(this.node.parentNode)this.node.parentNode.removeChild(this.node)}},destroy:function(){if(this.node){if(this.node.parentNode)this.node.parentNode.removeChild(this.node);domConstruct.destroy(this.node);delete this.node}}});AreaManager.areaManager()._dropIndicator=
new di;return di})},"dgrid/Selection":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/Deferred","dojo/on","dojo/has","dojo/aspect","./List","dojo/has!touch?./util/touch","put-selector/put","dojo/query","dojo/_base/sniff"],function(kernel,declare,Deferred,on,has,aspect,List,touchUtil,put){has.add("dom-comparedocumentposition",function(global,doc,element){return!!element.compareDocumentPosition});has.add("pointer",function(global,doc,element){return"onpointerdown"in element?
"pointer":"onmspointerdown"in element?"MSPointer":false});has.add("css-user-select",function(global,doc,element){var style=element.style,prefixes=["Khtml","O","ms","Moz","Webkit"],i=prefixes.length,name="userSelect";do if(typeof style[name]!=="undefined")return name;while(i--&&(name=prefixes[i]+"UserSelect"));return false});has.add("dom-selectstart",typeof document.onselectstart!=="undefined");var ctrlEquiv=has("mac")?"metaKey":"ctrlKey",hasUserSelect=has("css-user-select"),hasPointer=has("pointer"),
hasMSPointer=hasPointer&&hasPointer.slice(0,2)==="MS",downType=hasPointer?hasPointer+(hasMSPointer?"Down":"down"):"mousedown",upType=hasPointer?hasPointer+(hasMSPointer?"Up":"up"):"mouseup";function makeUnselectable(node,unselectable){var value=node.unselectable=unselectable?"on":"",elements=node.getElementsByTagName("*"),i=elements.length;while(--i){if(elements[i].tagName==="INPUT"||elements[i].tagName==="TEXTAREA")continue;elements[i].unselectable=value}}function setSelectable(grid,selectable){var node=
grid.bodyNode,value=selectable?"text":has("ff")<21?"-moz-none":"none";if(hasUserSelect)node.style[hasUserSelect]=value;else if(has("dom-selectstart"))if(!selectable&&!grid._selectstartHandle)grid._selectstartHandle=on(node,"selectstart",function(evt){var tag=evt.target&&evt.target.tagName;if(tag!=="INPUT"&&tag!=="TEXTAREA")evt.preventDefault()});else{if(selectable&&grid._selectstartHandle){grid._selectstartHandle.remove();delete grid._selectstartHandle}}else{makeUnselectable(node,!selectable);if(!selectable&&
!grid._unselectableHandle)grid._unselectableHandle=aspect.after(grid,"renderRow",function(row){makeUnselectable(row,true);return row});else if(selectable&&grid._unselectableHandle){grid._unselectableHandle.remove();delete grid._unselectableHandle}}}return declare(null,{selectionDelegate:".dgrid-row",selectionEvents:downType+","+upType+",dgrid-cellfocusin",selectionTouchEvents:has("touch")?touchUtil.tap:null,deselectOnRefresh:true,allowSelectAll:false,selection:{},selectionMode:"extended",allowTextSelection:undefined,
_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var selectionMode=this.selectionMode;this.selectionMode="";this._setSelectionMode(selectionMode)},destroy:function(){this.inherited(arguments);if(this._selectstartHandle)this._selectstartHandle.remove();if(this._unselectableHandle)this._unselectableHandle.remove();if(this._removeDeselectSignals)this._removeDeselectSignals()},
_setSelectionMode:function(mode){if(mode==this.selectionMode)return;this.clearSelection();this.selectionMode=mode;this._selectionHandlerName="_"+mode+"SelectionHandler";this._setAllowTextSelection(this.allowTextSelection)},setSelectionMode:function(mode){kernel.deprecated("setSelectionMode(...)",'use set("selectionMode", ...) instead',"dgrid 0.4");this.set("selectionMode",mode)},_setAllowTextSelection:function(allow){if(typeof allow!=="undefined")setSelectable(this,allow);else setSelectable(this,
this.selectionMode==="none");this.allowTextSelection=allow},_handleSelect:function(event,target){if(!this[this._selectionHandlerName]||!this.allowSelect(this.row(target))||event.type==="dgrid-cellfocusin"&&event.parentType==="mousedown"||event.type===upType&&target!=this._waitForMouseUp)return;this._waitForMouseUp=null;this._selectionTriggerEvent=event;if(!event.keyCode||!event.ctrlKey||event.keyCode==32)if(!event.shiftKey&&event.type===downType&&this.isSelected(target))this._waitForMouseUp=target;
else this[this._selectionHandlerName](event,target);this._selectionTriggerEvent=null},_singleSelectionHandler:function(event,target){var ctrlKey=event.keyCode?event.ctrlKey:event[ctrlEquiv];if(this._lastSelected===target)this.select(target,null,!ctrlKey||!this.isSelected(target));else{this.clearSelection();this.select(target);this._lastSelected=target}},_multipleSelectionHandler:function(event,target){var lastRow=this._lastSelected,ctrlKey=event.keyCode?event.ctrlKey:event[ctrlEquiv],value;if(!event.shiftKey){value=
ctrlKey?null:true;lastRow=null}this.select(target,lastRow,value);if(!lastRow)this._lastSelected=target},_extendedSelectionHandler:function(event,target){if(event.button===2?!this.isSelected(target):!(event.keyCode?event.ctrlKey:event[ctrlEquiv]))this.clearSelection(null,true);this._multipleSelectionHandler(event,target)},_toggleSelectionHandler:function(event,target){this.select(target,null,null)},_initSelectionEvents:function(){var grid=this,contentNode=this.contentNode,selector=this.selectionDelegate;
this._selectionEventQueues={deselect:[],select:[]};if(has("touch")&&!has("pointer")&&this.selectionTouchEvents){on(contentNode,touchUtil.selector(selector,this.selectionTouchEvents),function(evt){grid._handleSelect(evt,this);grid._ignoreMouseSelect=this});on(contentNode,on.selector(selector,this.selectionEvents),function(event){if(grid._ignoreMouseSelect!==this)grid._handleSelect(event,this);else if(event.type===upType)grid._ignoreMouseSelect=null})}else on(contentNode,on.selector(selector,this.selectionEvents),
function(event){grid._handleSelect(event,this)});if(this.addKeyHandler)this.addKeyHandler(32,function(event){grid._handleSelect(event,event.target)});if(this.allowSelectAll)this.on("keydown",function(event){if(event[ctrlEquiv]&&event.keyCode==65&&!/\bdgrid-input\b/.test(event.target.className)){event.preventDefault();grid[grid.allSelected?"clearSelection":"selectAll"]()}});if(this._setStore)aspect.after(this,"_setStore",function(){grid._updateDeselectionAspect()});this._updateDeselectionAspect()},
_updateDeselectionAspect:function(){var self=this,store=this.store,beforeSignal,afterSignal;function ifSelected(object,idToUpdate,methodName){var id=idToUpdate||object&&object[self.idProperty||"id"];if(id!=null){var row=self.row(id),selection=row&&self.selection[row.id];if(selection)self[methodName](row,null,selection)}}if(this._removeDeselectSignals)this._removeDeselectSignals();if(store&&store.notify){beforeSignal=aspect.before(store,"notify",function(object,idToUpdate){if(!object)ifSelected(object,
idToUpdate,"deselect")});afterSignal=aspect.after(store,"notify",function(object,idToUpdate){ifSelected(object,idToUpdate,"select")},true);this._removeDeselectSignals=function(){beforeSignal.remove();afterSignal.remove()}}else{beforeSignal=aspect.before(this,"removeRow",function(rowElement,justCleanup){var row;if(!justCleanup){row=this.row(rowElement);if(row&&row.id in this.selection)this.deselect(row)}});this._removeDeselectSignals=function(){beforeSignal.remove()}}},allowSelect:function(row){return true},
_fireSelectionEvent:function(type){var queue=this._selectionEventQueues[type],triggerEvent=this._selectionTriggerEvent,eventObject;eventObject={bubbles:true,grid:this};if(triggerEvent)eventObject.parentType=triggerEvent.type;eventObject[this._selectionTargetType]=queue;on.emit(this.contentNode,"dgrid-"+type,eventObject);this._selectionEventQueues[type]=[]},_fireSelectionEvents:function(){var queues=this._selectionEventQueues,type;for(type in queues)if(queues[type].length)this._fireSelectionEvent(type)},
_select:function(row,toRow,value){var selection,previousValue,element,toElement,direction;if(typeof value==="undefined")value=true;if(!row.element)row=this.row(row);if(value===false||this.allowSelect(row)){selection=this.selection;previousValue=!!selection[row.id];if(value===null)value=!previousValue;element=row.element;if(!value&&!this.allSelected)delete this.selection[row.id];else selection[row.id]=value;if(element)if(value)put(element,".dgrid-selected"+(this.addUiClasses?".ui-state-active":""));
else put(element,"!dgrid-selected!ui-state-active");if(value!==previousValue&&element)this._selectionEventQueues[(value?"":"de")+"select"].push(row);if(toRow){if(!toRow.element)toRow=this.row(toRow);if(!toRow){this._lastSelected=element;0&&console.warn("The selection range has been reset because the "+"beginning of the selection is no longer in the DOM. "+"If you are using OnDemandList, you may wish to increase "+"farOffRemoval to avoid this, but note that keeping more nodes "+"in the DOM may impact performance.");
return}toElement=toRow.element;if(toElement){direction=this._determineSelectionDirection(element,toElement);if(!direction){toElement=document.getElementById(toElement.id);direction=this._determineSelectionDirection(element,toElement)}while(row.element!=toElement&&(row=this[direction](row)))this._select(row,null,value)}}}},_determineSelectionDirection:has("dom-comparedocumentposition")?function(from,to){var result=to.compareDocumentPosition(from);if(result&1)return false;return result===2?"down":"up"}:
function(from,to){if(to.sourceIndex<1)return false;return to.sourceIndex>from.sourceIndex?"down":"up"},select:function(row,toRow,value){this._select(row,toRow,value);this._fireSelectionEvents()},deselect:function(row,toRow){this.select(row,toRow,false)},clearSelection:function(exceptId,dontResetLastSelected){this.allSelected=false;for(var id in this.selection)if(exceptId!==id)this._select(id,null,false);if(!dontResetLastSelected)this._lastSelected=null;this._fireSelectionEvents()},selectAll:function(){this.allSelected=
true;this.selection={};for(var i in this._rowIdToObject){var row=this.row(this._rowIdToObject[i]);this._select(row.id,null,true)}this._fireSelectionEvents()},isSelected:function(object){if(typeof object==="undefined"||object===null)return false;if(!object.element)object=this.row(object);return object.id in this.selection?!!this.selection[object.id]:this.allSelected&&(!object.data||this.allowSelect(object))},refresh:function(){if(this.deselectOnRefresh)this.clearSelection();this._lastSelected=null;
return this.inherited(arguments)},renderArray:function(){var grid=this,rows=this.inherited(arguments);Deferred.when(rows,function(rows){var selection=grid.selection,i,row,selected;for(i=0;i<rows.length;i++){row=grid.row(rows[i]);selected=row.id in selection?selection[row.id]:grid.allSelected;if(selected)grid._select(row,null,selected)}grid._fireSelectionEvents()});return rows}})})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabIndex\x3d"-1"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"xblox/views/BlockEditDialog":function(){define("xblox/views/BlockEditDialog",["dojo/_base/declare","xide/views/CIActionDialog","xide/factory","xide/types","xide/utils","xblox/views/BlockEditView"],function(declare,CIActionDialog,factory,types,utils,BlockEditView){return declare("xblock.views.BlockEditDialog",[CIActionDialog],{onSave:function(ci,value){if(ci.dst&&this.item[ci.dst])this.item[ci.dst]=value},initWithCIS:function(cis){this.cisView=utils.addWidget(BlockEditView,{delegate:this,options:{groupOrder:{"General":0,
"Advanced":1,"Description":2}},cis:cis},this,this.containerNode,true)},onOk:function(){var cis=this.cisView.getCIS();var options=utils.toOptions(cis);for(var i=0;i<options.length;i++){var option=options[i];var field=option.dst;if(field!=null&&this.item[field]!=null){if(option.active!=null&&option.active===false&&option.changed===false)continue;if(this.item[option.dst]!=option.value||this.item[option.dst]!==option.value){if(this.item.onChangeField)this.item.onChangeField(option.dst,option.value);this.item[option.dst]=
option.value}}}if(this.delegate&&this.delegate.onOk)this.delegate.onOk(this,this.item);try{this.hide()}catch(e){}return true},initWithBlock:function(item){var cis=item.getFields();if(cis)this.initWithCIS(cis)},startup:function(){this.inherited(arguments);if(this.item)this.initWithBlock(this.item);this.addActionButtons();this.inherited(arguments)}})})},"dijit/form/TextBox":function(){require({cache:{"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n'}});
define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(declare,domConstruct,domStyle,kernel,lang,has,_FormValueWidget,_TextBoxMixin,template,dijit){var TextBox=declare("dijit.form.TextBox"+(0?"_NoBidi":""),[_FormValueWidget,_TextBoxMixin],{templateString:template,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',
_buttonInputDisabled:has("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var type=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||(type=="hidden"||type=="file")&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);if(has("ie")<9)this.defer(function(){try{var s=domStyle.getComputedStyle(this.domNode);
if(s){var ff=s.fontFamily;if(ff){var inputs=this.domNode.getElementsByTagName("INPUT");if(inputs)for(var i=0;i<inputs.length;i++)inputs[i].style.fontFamily=ff}}}catch(e){}})},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=domConstruct.create("span",{onmousedown:function(e){e.preventDefault()},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after")}this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));
this._updatePlaceHolder()},_onInput:function(evt){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){if(this._phspan)this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none"},_setValueAttr:function(value,priorityChange,formattedValue){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){kernel.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},
setDisplayedValue:function(value){kernel.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",value)},_onBlur:function(e){if(this.disabled)return;this.inherited(arguments);this._updatePlaceHolder();if(has("mozilla"))if(this.selectOnClick)this.textbox.selectionStart=this.textbox.selectionEnd=undefined},_onFocus:function(by){if(this.disabled||this.readOnly)return;this.inherited(arguments);this._updatePlaceHolder()}});
if(has("ie")){TextBox.prototype._isTextSelected=function(){var range=this.ownerDocument.selection.createRange();var parent=range.parentElement();return parent==this.textbox&&range.text.length>0};dijit._setSelectionRange=_TextBoxMixin._setSelectionRange=function(element,start,stop){if(element.createTextRange){var r=element.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",start);r.moveEnd("character",stop-start);r.select()}}}if(0)TextBox=declare("dijit.form.TextBox",
TextBox,{_setPlaceHolderAttr:function(v){this.inherited(arguments);this.applyTextDir(this._phspan)}});return TextBox})},"dijit/layout/StackContainer":function(){define("dijit/layout/StackContainer",["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/topic","dojo/when","../registry","../_WidgetBase","./_LayoutWidget","dojo/i18n!../nls/common"],function(array,cookie,declare,domClass,domConstruct,has,lang,
on,ready,topic,when,registry,_WidgetBase,_LayoutWidget){if(has("dijit-legacy-requires"))ready(0,function(){var requires=["dijit/layout/StackController"];require(requires)});var StackContainer=declare("dijit.layout.StackContainer",_LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);domClass.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"keydown",lang.hitch(this,
"_onKeyDown")))},startup:function(){if(this._started)return;var children=this.getChildren();array.forEach(children,this._setupChild,this);if(this.persist)this.selectedChildWidget=registry.byId(cookie(this.id+"_selectedChild"));else array.some(children,function(child){if(child.selected)this.selectedChildWidget=child;return child.selected},this);var selected=this.selectedChildWidget;if(!selected&&children[0]){selected=this.selectedChildWidget=children[0];selected.selected=true}topic.publish(this.id+
"-startup",{children:children,selected:selected,textDir:this.textDir});this.inherited(arguments)},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=true;var selected=this.selectedChildWidget;if(selected)this._showChild(selected)}this.inherited(arguments)},_setupChild:function(child){var childNode=child.domNode,wrapper=domConstruct.place("\x3cdiv role\x3d'tabpanel' class\x3d'"+this.baseClass+"ChildWrapper'\x3e",child.domNode,"replace"),label=child["aria-label"]||child.title||child.label;
if(label)wrapper.setAttribute("aria-label",label);domConstruct.place(childNode,wrapper);child._wrapper=wrapper;this.inherited(arguments);domClass.replace(wrapper,"dijitHidden","dijitVisible");if(childNode.style.display=="none")childNode.style.display="block";child.domNode.title=""},addChild:function(child,insertIndex){this.inherited(arguments);if(this._started){topic.publish(this.id+"-addChild",child,insertIndex);this.layout();if(!this.selectedChildWidget)this.selectChild(child)}},removeChild:function(page){var idx=
array.indexOf(this.getChildren(),page);this.inherited(arguments);domConstruct.destroy(page._wrapper);delete page._wrapper;if(this._started)topic.publish(this.id+"-removeChild",page);if(this._descendantsBeingDestroyed)return;if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var children=this.getChildren();if(children.length)this.selectChild(children[Math.max(idx-1,0)])}}if(this._started)this.layout()},selectChild:function(page,animate){var d;page=registry.byId(page);
if(this.selectedChildWidget!=page){d=this._transition(page,this.selectedChildWidget,animate);this._set("selectedChildWidget",page);topic.publish(this.id+"-selectChild",page);if(this.persist)cookie(this.id+"_selectedChild",this.selectedChildWidget.id)}return when(d||true)},_transition:function(newWidget,oldWidget){if(oldWidget)this._hideChild(oldWidget);var d=this._showChild(newWidget);if(newWidget.resize)if(this.doLayout)newWidget.resize(this._containerContentBox||this._contentBox);else newWidget.resize();
return d},_adjacent:function(forward){var children=this.getChildren();var index=array.indexOf(children,this.selectedChildWidget);index+=forward?1:children.length-1;return children[index%children.length]},forward:function(){return this.selectChild(this._adjacent(true),true)},back:function(){return this.selectChild(this._adjacent(false),true)},_onKeyDown:function(e){topic.publish(this.id+"-containerKeyDown",{e:e,page:this})},layout:function(){var child=this.selectedChildWidget;if(child&&child.resize)if(this.doLayout)child.resize(this._containerContentBox||
this._contentBox);else child.resize()},_showChild:function(page){var children=this.getChildren();page.isFirstChild=page==children[0];page.isLastChild=page==children[children.length-1];page._set("selected",true);domClass.replace(page._wrapper,"dijitVisible","dijitHidden");return page._onShow&&page._onShow()||true},_hideChild:function(page){page._set("selected",false);domClass.replace(page._wrapper,"dijitHidden","dijitVisible");page.onHide&&page.onHide()},closeChild:function(page){var remove=page.onClose&&
page.onClose(this,page);if(remove){this.removeChild(page);page.destroyRecursive()}},destroyDescendants:function(preserveDom){this._descendantsBeingDestroyed=true;this.selectedChildWidget=undefined;array.forEach(this.getChildren(),function(child){if(!preserveDom)this.removeChild(child);child.destroyRecursive(preserveDom)},this);this._descendantsBeingDestroyed=false}});StackContainer.ChildWidgetProperties={selected:false,disabled:false,closable:false,iconClass:"dijitNoIcon",showTitle:true};lang.extend(_WidgetBase,
StackContainer.ChildWidgetProperties);return StackContainer})},"dijit/form/_RadioButtonMixin":function(){define("dijit/form/_RadioButtonMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/lang","dojo/query","../registry"],function(array,declare,domAttr,lang,query,registry){return declare("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var ary=[];query("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(lang.hitch(this,function(inputNode){if(inputNode.name==
this.name&&inputNode.form==this.focusNode.form){var widget=registry.getEnclosingWidget(inputNode);if(widget)ary.push(widget)}}));return ary},_setCheckedAttr:function(value){this.inherited(arguments);if(!this._created)return;if(value)array.forEach(this._getRelatedWidgets(),lang.hitch(this,function(widget){if(widget!=this&&widget.checked)widget.set("checked",false)}))},_getSubmitValue:function(value){return value==null?"on":value},_onClick:function(e){if(this.checked||this.disabled){e.stopPropagation();
e.preventDefault();return false}if(this.readOnly){e.stopPropagation();e.preventDefault();array.forEach(this._getRelatedWidgets(),lang.hitch(this,function(widget){domAttr.set(this.focusNode||this.domNode,"checked",widget.checked)}));return false}return this.inherited(arguments)}})})},"cbtree/Evented":function(){define("cbtree/Evented",["dojo/aspect","dojo/on"],function(aspect,on){function Evented(){this.on=function(type,listener){function onMethod(target,type){var ctor=target.constructor;var onMap=
ctor._onMap;if(!onMap){onMap=ctor._onMap={};for(var attr in ctor.prototype)if(/^on/.test(attr))onMap[attr.replace(/^on/,"").toLowerCase()]=attr}var method=onMap[type.toLowerCase()]||"on"+type;return method}return on.parse(this,type,listener,function(target,type){return aspect.after(target,onMethod(target,type),listener,true)})};this.emit=function(type,event){var args=[this];if(!event.type)event.type=type;args.push.apply(args,arguments);return on.emit.apply(on,args)}}return Evented})},"xide/manager/ManagerBase":function(){define(["dojo/_base/declare",
"dojo/Stateful","xide/mixins/EventedMixin"],function(declare,Stateful,EventedMixin){return declare("xide/types/ManagerBase",[Stateful,EventedMixin],{ctx:null,init:function(){}})})},"dojo/_base/window":function(){define("dojo/_base/window",["./kernel","./lang","../sniff"],function(dojo,lang,has){var ret={global:dojo.global,doc:this["document"]||null,body:function(doc){doc=doc||dojo.doc;return doc.body||doc.getElementsByTagName("body")[0]},setContext:function(globalObject,globalDocument){dojo.global=
ret.global=globalObject;dojo.doc=ret.doc=globalDocument},withGlobal:function(globalObject,callback,thisObject,cbArguments){var oldGlob=dojo.global;try{dojo.global=ret.global=globalObject;return ret.withDoc.call(null,globalObject.document,callback,thisObject,cbArguments)}finally{dojo.global=ret.global=oldGlob}},withDoc:function(documentObject,callback,thisObject,cbArguments){var oldDoc=ret.doc,oldQ=has("quirks"),oldIE=has("ie"),isIE,mode,pwin;try{dojo.doc=ret.doc=documentObject;dojo.isQuirks=has.add("quirks",
dojo.doc.compatMode=="BackCompat",true,true);if(has("ie"))if((pwin=documentObject.parentWindow)&&pwin.navigator){isIE=parseFloat(pwin.navigator.appVersion.split("MSIE ")[1])||undefined;mode=documentObject.documentMode;if(mode&&mode!=5&&Math.floor(isIE)!=mode)isIE=mode;dojo.isIE=has.add("ie",isIE,true,true)}if(thisObject&&typeof callback=="string")callback=thisObject[callback];return callback.apply(thisObject,cbArguments||[])}finally{dojo.doc=ret.doc=oldDoc;dojo.isQuirks=has.add("quirks",oldQ,true,
true);dojo.isIE=has.add("ie",oldIE,true,true)}}};1&&lang.mixin(dojo,ret);return ret})},"xide/factory/Objects":function(){define(["dojo/_base/lang","xide/factory","dcl/dcl"],function(lang,factory,dcl){factory.createInstance=function(classNameOrPrototype,ctrArgs,baseClasses){var ctrArgsFinal={};lang.mixin(ctrArgsFinal,ctrArgs);var objectProtoType=classNameOrPrototype;if(lang.isString(classNameOrPrototype)){var proto=dojo.getObject(objectProtoType);if(proto)objectProtoType=proto;else{console.error("no such class : "+
classNameOrPrototype);return null}}if(baseClasses){var classes=[];classes=classes.concat(baseClasses);objectProtoType=dcl(classes,objectProtoType.prototype)}var instance=new objectProtoType(ctrArgsFinal);if(instance)instance.ctrArgs=ctrArgsFinal;return instance};return factory})},"xide/manager/BeanManager":function(){define(["dojo/_base/declare","xide/utils","dojox/encoding/digests/MD5","dijit/registry"],function(declare,utils,MD5,registry){return declare(null,{currentItem:null,beanNamespace:"beanNS",
beanName:"beanName",getMetaValue:function(item,title){var meta=utils.toObject(item["user"]);if(meta)return utils.getCIInputValueByName(meta,title);return null},setCurrentItem:function(item){this.currentItem=item},getItem:function(){return this.currentItem},onItemSelected:function(evt){if(evt&&evt.item)this.currentItem=evt.item},onItemAdded:function(res){this.currentItem=null;this.reload()},onItemRemoved:function(res){this.currentItem=null;this.reload()},reload:function(){},updateCI:function(ci,newValue,
oldValue,storeRef){if(ci&&storeRef)this.updateItemMetaData(utils.toString(storeRef.scope),utils.toString(storeRef.path),"/inputs",{id:utils.toString(ci.id)},{value:newValue})},getViewTarget:function(){var mainView=this.ctx.getApplication().mainView;return mainView.getNewAlternateTarget()},getRightTopTarget:function(clear,open){var mainView=this.ctx.getApplication().mainView;return mainView.getRightTopTarget(clear,open)},getLayoutRightMain:function(clear,open){var mainView=this.ctx.getApplication().mainView;
return mainView.getLayoutRightMain(clear,open)},getRightBottomTarget:function(clear,open){var mainView=this.ctx.getApplication().mainView;return mainView.getRightBottomTarget(clear,open)},getViewId:function(item,suffix){return this.beanNamespace+MD5(utils.toString(item.scope)+utils.toString(item.path),1)+(suffix!=null?suffix:"")},getView:function(item,suffix){return registry.byId(this.getViewId(item,suffix))},getStore:function(){return this.store},isValid:function(){return this.store!=null},initStore:function(data){this.store=
new dojo.data.ItemFileWriteStore({data:data,labelAttribute:"name",hierarchical:false});this.onStoreReady();return this.store},onStoreReady:function(){},createGroup:function(scope,name,readyCB){return this.callMethodEx(null,"createGroup",[scope,name],readyCB,true)},removeGroup:function(scope,name,readyCB){return this.callMethodEx(null,"removeGroup",[scope,name],readyCB,true)},removeItem:function(scope,name,readyCB){return this.callMethodEx(null,"removeItem",[scope,name],readyCB,true)},updateItemMetaData:function(scope,
driverMetaPath,dataPath,query,value,readyCB,errorCB){return this.callMethodEx(null,"updateItemMetaData",[scope,driverMetaPath,dataPath,query,value],readyCB,false)}})})},"dojo/_base/json":function(){define(["./kernel","../json"],function(dojo,json){dojo.fromJson=function(js){return eval("("+js+")")};dojo._escapeString=json.stringify;dojo.toJsonIndentStr="\t";dojo.toJson=function(it,prettyPrint){return json.stringify(it,function(key,value){if(value){var tf=value.__json__||value.json;if(typeof tf=="function")return tf.call(value)}return value},
prettyPrint&&dojo.toJsonIndentStr)};return dojo})},"url:dijit/templates/ProgressBar.html":'\x3cdiv class\x3d"dijitProgressBar dijitProgressBarEmpty" role\x3d"progressbar"\n\t\x3e\x3cdiv  data-dojo-attach-point\x3d"internalProgress" class\x3d"dijitProgressBarFull"\n\t\t\x3e\x3cdiv class\x3d"dijitProgressBarTile" role\x3d"presentation"\x3e\x3c/div\n\t\t\x3e\x3cspan style\x3d"visibility:hidden"\x3e\x26#160;\x3c/span\n\t\x3e\x3c/div\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"labelNode" class\x3d"dijitProgressBarLabel" id\x3d"${id}_label"\x3e\x3c/div\n\t\x3e\x3cspan data-dojo-attach-point\x3d"indeterminateHighContrastImage"\n\t\t   class\x3d"dijitInline dijitProgressBarIndeterminateHighContrastImage"\x3e\x3c/span\n\x3e\x3c/div\x3e\n',
"dojox/encoding/digests/_base":function(){define("dojox/encoding/digests/_base",["dojo/_base/lang"],function(lang){var base=lang.getObject("dojox.encoding.digests",true);base.outputTypes={Base64:0,Hex:1,String:2,Raw:3};base.addWords=function(a,b){var l=(a&65535)+(b&65535);var m=(a>>16)+(b>>16)+(l>>16);return m<<16|l&65535};var chrsz=8;var mask=(1<<chrsz)-1;base.stringToWord=function(s){var wa=[];for(var i=0,l=s.length*chrsz;i<l;i+=chrsz)wa[i>>5]|=(s.charCodeAt(i/chrsz)&mask)<<i%32;return wa};base.wordToString=
function(wa){var s=[];for(var i=0,l=wa.length*32;i<l;i+=chrsz)s.push(String.fromCharCode(wa[i>>5]>>>i%32&mask));return s.join("")};base.wordToHex=function(wa){var h="0123456789abcdef",s=[];for(var i=0,l=wa.length*4;i<l;i++)s.push(h.charAt(wa[i>>2]>>i%4*8+4&15)+h.charAt(wa[i>>2]>>i%4*8&15));return s.join("")};base.wordToBase64=function(wa){var p="\x3d",tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=[];for(var i=0,l=wa.length*4;i<l;i+=3){var t=(wa[i>>2]>>8*(i%4)&255)<<16|(wa[i+
1>>2]>>8*((i+1)%4)&255)<<8|wa[i+2>>2]>>8*((i+2)%4)&255;for(var j=0;j<4;j++)if(i*8+j*6>wa.length*32)s.push(p);else s.push(tab.charAt(t>>6*(3-j)&63))}return s.join("")};base.stringToUtf8=function(input){var output="";var i=-1;var x,y;while(++i<input.length){x=input.charCodeAt(i);y=i+1<input.length?input.charCodeAt(i+1):0;if(55296<=x&&x<=56319&&56320<=y&&y<=57343){x=65536+((x&1023)<<10)+(y&1023);i++}if(x<=127)output+=String.fromCharCode(x);else if(x<=2047)output+=String.fromCharCode(192|x>>>6&31,128|
x&63);else if(x<=65535)output+=String.fromCharCode(224|x>>>12&15,128|x>>>6&63,128|x&63);else if(x<=2097151)output+=String.fromCharCode(240|x>>>18&7,128|x>>>12&63,128|x>>>6&63,128|x&63)}return output};return base})},"xide/manager/RPCService":function(){define(["dojo/_base/declare","dojo/_base/lang","dojox/rpc/Service","dojo/has","dojox/encoding/digests/SHA1"],function(declare,lang,Service,has,SHA1){return declare("xide.manager.RPCService",[Service],{extraArgs:null,signatureField:"sig",signatureToken:null,
correctTarget:true,sync:false,getParameterMap:function(serviceClass,serviceClassMethod){var services=this._smd.services;var smd=services[serviceClass+"."+serviceClassMethod];if(smd&&smd.parameters)return smd.parameters;return[]},_getRequest:function(method,args){var smd=this._smd;var envDef=dojox.rpc.envelopeRegistry.match(method.envelope||smd.envelope||"NONE");var parameters=(method.parameters||[]).concat(smd.parameters||[]);if(envDef.namedParams){if(args.length==1&&dojo.isObject(args[0]))args=args[0];
else{var data={};for(var i=0;i<method.parameters.length;i++)if(typeof args[i]!="undefined"||!method.parameters[i].optional)data[method.parameters[i].name]=args[i];args=data}if(method.strictParameters||smd.strictParameters)for(i in args){var found=false;for(var j=0;j<parameters.length;j++)if(parameters[i].name==i)found=true;if(!found)delete args[i]}for(i=0;i<parameters.length;i++){var param=parameters[i];if(!param.optional&&param.name&&args!=null&&!args[param.name])if(param["default"])args[param.name]=
param["default"];else if(!(param.name in args))throw new Error("Required parameter "+param.name+" was omitted");}}else if(parameters&&parameters[0]&&parameters[0].name&&args.length==1&&dojo.isObject(args[0]))if(envDef.namedParams===false)args=dojox.rpc.toOrdered(parameters,args);else args=args[0];if(dojo.isObject(this._options))args=dojo.mixin(args,this._options);var schema=method._schema||method.returns;var request=envDef.serialize.apply(this,[smd,method,args]);request._envDef=envDef;var contentType=
method.contentType||smd.contentType||request.contentType;return dojo.mixin(request,{sync:this.sync,contentType:contentType,headers:method.headers||smd.headers||request.headers||{},target:request.target||dojox.rpc.getTarget(smd,method),transport:method.transport||smd.transport||request.transport,envelope:method.envelope||smd.envelope||request.envelope,timeout:method.timeout||smd.timeout,callbackParamName:method.callbackParamName||smd.callbackParamName,rpcObjectParamName:method.rpcObjectParamName||
smd.rpcObjectParamName,schema:schema,handleAs:request.handleAs||"auto",preventCache:method.preventCache||smd.preventCache,frameDoc:this._options.frameDoc||undefined})},_executeMethod:function(method){var args=[];var i;if(arguments.length==2&&lang.isArray(arguments[1]))args=arguments[1];else for(i=1;i<arguments.length;i++)args.push(arguments[i]);var request=this._getRequest(method,args);if(this.correctTarget)request.target=this._smd.target;if(this.extraArgs){var index=0;for(var key in this.extraArgs){request.target+=
request.target.indexOf("?")!=-1?"\x26":"?";request.target+=key+"\x3d"+this.extraArgs[key]}}if(this.signatureToken){request.target+=request.target.indexOf("?")!=-1?"\x26":"?";var signature=SHA1._hmac(request.data,this.signatureToken,1);var signature=SHA1._hmac(request.data,this.signatureToken,1);request.target+=this.signatureField+"\x3d"+signature}var deferred=dojox.rpc.transportRegistry.match(request.transport).fire(request);deferred.addBoth(function(results){return request._envDef.deserialize.call(this,
results)});return deferred}})})},"xfile/views/FilePreview":function(){define("xfile/views/FilePreview",["dojo/_base/declare","xide/widgets/TemplatedWidgetBase","xide/types","xide/widgets/_CSSMixin","xide/mixins/EventedMixin","xide/views/_ProgressIndicatorMixin","./_PreviewMixin"],function(declare,TemplatedWidgetBase,types,_CSSMixin,EventedMixin,_ProgressIndicatorMixin,_PreviewMixin){return declare("xfile.views.FilePreview",[TemplatedWidgetBase,_CSSMixin,_PreviewMixin,EventedMixin,_ProgressIndicatorMixin],
{cssClass:"filePreviewRoot",templateString:"\x3cdiv\x3e"+"\x3cdiv class\x3d'filePreviewView ui-helper-reset ui-widget' data-dojo-attach-point\x3d'root'\x3e"+"\x3cdiv data-dojo-attach-point\x3d'previewNode' class\x3d'ui-helper-clearfix' style\x3d'height: inherit;text-align: center'\x3e\x3c/div\x3e"+"\x3c!--div class\x3d'elfinder-quicklook-navbar' style\x3d''\x3e"+"\x3cdiv class\x3d'elfinder-quicklook-navbar-icon elfinder-quicklook-navbar-icon-prev'\x3e\x3c/div\x3e"+"\x3cdiv class\x3d'elfinder-quicklook-navbar-icon elfinder-quicklook-navbar-icon-fullscreen'\x3e\x3c/div\x3e"+
"\x3cdiv class\x3d'elfinder-quicklook-navbar-icon elfinder-quicklook-navbar-icon-next'\x3e\x3c/div\x3e"+"\x3cdiv class\x3d'elfinder-quicklook-navbar-separator'\x3e\x3c/div\x3e"+"\x3cdiv class\x3d'elfinder-quicklook-navbar-icon elfinder-quicklook-navbar-icon-close'\x3e\x3c/div\x3e"+"\x3c/div--\x3e"+"\x3c/div\x3e",previewNode:null,updateOnSelection:true,getActiveItem:function(){return null},getCurrentParent:function(){return null},openItem:function(item){if(!item._S)return;if(item.directory===true)return;
this.showStandBy(this.previewNode,true,1E4);0&&console.log("preview open item",this.domNode);try{this.renderPreview(item)}catch(e){console.error("preview crash")}},onItemSelected:function(data){if(!data)return;this.openItem(data.item)},resize:function(){this.inherited(arguments)},startup:function(){if(this.didStartup)return;this.inherited(arguments);this.didStartup=true;var thiz=this;if(this.updateOnSelection)this.subscribe(types.EVENTS.ITEM_SELECTED,function(data){if(data.item._S)thiz.onItemSelected(data)},
this);this.subscribe(types.EVENTS.RESIZE,function(){thiz._onResize()})}})})},"dojo/cldr/nls/en-gb/number":function(){define({"currencyFormat":"\u00a4#,##0.00","decimalFormat-short":"000T"})},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(array,declare,domAttr,domStyle,lang,mouse,on,has,winUtils,a11y){return declare("dijit.form._FormWidgetMixin",
null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(value){this._set("disabled",value);domAttr.set(this.focusNode,"disabled",value);if(this.valueNode)domAttr.set(this.valueNode,"disabled",value);this.focusNode.setAttribute("aria-disabled",value?"true":"false");if(value){this._set("hovering",false);this._set("active",false);var attachPointNames=
"tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode";array.forEach(lang.isArray(attachPointNames)?attachPointNames:[attachPointNames],function(attachPointName){var node=this[attachPointName];if(has("webkit")||a11y.hasDefaultTabStop(node))node.setAttribute("tabIndex","-1");else node.removeAttribute("tabIndex")},this)}else if(this.tabIndex!="")this.set("tabIndex",this.tabIndex)},_onFocus:function(by){if(by=="mouse"&&this.isFocusable()){var focusHandle=
this.own(on(this.focusNode,"focus",function(){mouseUpHandle.remove();focusHandle.remove()}))[0];var mouseUpHandle=this.own(on(this.ownerDocumentBody,"mouseup, touchend",lang.hitch(this,function(evt){mouseUpHandle.remove();focusHandle.remove();if(this.focused)if(evt.type=="touchend")this.defer("focus");else this.focus()})))[0]}if(this.scrollOnFocus)this.defer(function(){winUtils.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&domStyle.get(this.domNode,
"display")!="none"},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(e){}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number")return isNaN(val1)&&isNaN(val2)?0:val1-val2;else if(val1>val2)return 1;else if(val1<val2)return-1;else return 0},onChange:function(){},_onChangeActive:false,_handleOnChange:function(newValue,priorityChange){if(this._lastValueReported==undefined&&(priorityChange===null||!this._onChangeActive))this._resetValue=
this._lastValueReported=newValue;this._pendingOnChange=this._pendingOnChange||typeof newValue!=typeof this._lastValueReported||this.compare(newValue,this._lastValueReported)!=0;if((this.intermediateChanges||priorityChange||priorityChange===undefined)&&this._pendingOnChange){this._lastValueReported=newValue;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle)this._onChangeHandle.remove();this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(newValue)})}}},
create:function(){this.inherited(arguments);this._onChangeActive=true},destroy:function(){if(this._onChangeHandle){this._onChangeHandle.remove();this.onChange(this._lastValueReported)}this.inherited(arguments)}})})},"xfile/views/MainView":function(){define("xfile/views/MainView",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","xide/types","xide/factory","xide/utils","xfile/widgets/BreadCrumb","xfile/widgets/ActionToolbarEmbedded","dijit/registry","xide/layout/TabContainer","xfile/views/FilePreview",
"xide/views/MainView","xfile/views/BlocksFileEditor","./_MainViewMixin"],function(array,declare,domClass,types,factory,utils,BreadCrumb,ActionToolbarEmbedded,registry,TabContainer,FilePreview,MainView,BlocksFileEditor,_MainViewMixin){return declare("xfile.views.MainView",[MainView,_MainViewMixin],{config:null,ctx:null,cssClass:"mainView xasMain dTuned",layoutMain:null,layoutTop:null,layoutLeft:null,layoutCenter:null,layoutRight:null,layoutBottom:null,toolbar:null,preventCaching:true,panelManager:null,
leftPanel:null,centerPanel:null,centerTabContainer:null,breadCrumb:null,bottomTabContainer:null,logPanel:null,layoutBottomPlaceHolder:null,initialReload:false,persistent:true,_restoredPermaItems:0,_contextChanged:false,defaultStore:"root",defaultStoreOptions:{"fields":1663,"includedFileExtensions":"*","excludedFileExtensions":"*"},templateString:"\x3cdiv\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutMain' data-dojo-type\x3d'xfile.layout.BorderContainer' data-dojo-props\x3d\"design:'headline'\" class\x3d'layoutMain ' id\x3d'main' style\x3d''\x3e"+
"\x3cdiv data-dojo-attach-point\x3d'layoutTop' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'top',splitter:'true'\" class\x3d'layoutTop ui-state-default'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutLeft' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'leading',splitter:'true'\" class\x3d'layoutLeft filePanelLayoutcontainer'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutCenter' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'center',splitter:'false'\" class\x3d'layoutCenter filePanelLayoutcontainer'\x3e\x3c/div\x3e"+
"\x3cdiv data-dojo-attach-point\x3d'layoutRight' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'right',splitter:'true',minSize:'200',toggleSplitterState:'full',toggleSplitterFullSize:'200px' \" class\x3d'layoutRight filePropertyPanel ui-state-default'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutBottom' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'bottom',splitter:'true',toggleSplitterState:'closed',toggleSplitterClosedSize:'0px',toggleSplitterFullSize:'150px'\" class\x3d'layoutBottom'\x3e\x3cdiv data-dojo-attach-point\x3d'layoutBottomPlaceHolder' style\x3d'height: 80px;'\x3e\x3c/div\x3e\x3c/div\x3e"+
"\x3c/div\x3e"+"\x3c/div\x3e",_permaItemReady:function(item){if(item)if(item.directory!=null&&item.directory===true){if(this.centerPanel)if(this._restoredPermaItems==0)this.centerPanel.openItem(item);else this.centerPanel.openItemAlternate(item);this._restoredPermaItems+=1}else this.panelManager.openFile(item)},getPermaLink:function(){var items=[];if(this.centerTabContainer)array.forEach(registry.findWidgets(this.centerTabContainer.containerNode),function(child){if(child.getPermaLink){var childPerma=
child.getPermaLink();if(childPerma&&childPerma!=".")items.push(encodeURIComponent(childPerma))}});else if(this.centerPanel&&this.centerPanel.getPermaLink){var childPerma=this.centerPanel.getPermaLink();if(childPerma&&childPerma!=".")items.push(encodeURIComponent(childPerma))}if(items&&items.length>0)return"mainView\x3d"+encodeURIComponent(items.join("|"));return""},_getItem:function(url){var thiz=this;var store=this.panelManager.store;var _readyCB=function(item){thiz._permaItemReady(item)};setTimeout(function(){store.getItem(url,
true,_readyCB)},10)},restorePermaLink:function(link){try{var urls=[];link=link||window.location.href;if(link){var params=utils.urlDecode(link);if(params&&params.mainView){params.mainView=decodeURIComponent(params.mainView);var items=params.mainView.indexOf("|")!=-1?params.mainView.split("|"):[params.mainView];if(items&&items.length>0)for(var i=0;i<items.length;i++)urls.push(decodeURIComponent(items[i]))}}if(urls.length>0)for(var i=0;i<urls.length;i++)this._getItem(urls[i])}catch(e){debugger}},getNewAlternateTarget:function(item,
panel){if(!this.centerTabContainer){if(this.centerPanel){var tmpPos=dojo.doc.createElement("div");dojo.place(this.centerPanel.domNode,tmpPos)}var thiz=this;var tabContainer=utils.addWidget(TabContainer,{tabStrip:true,tabPosition:"top",splitter:true,region:"center",attachParent:true,style:"width:100%;height:100%",parentContainer:this.layoutCenter,onOneTabLeft:function(){thiz.onLastPanelRemoved(this)}},this,this.layoutCenter.containerNode,true);this.centerPanel.ignoreShow=true;tabContainer.addChild(this.centerPanel);
this.centerTabContainer=tabContainer}return this.centerTabContainer},onLastPanelRemoved:function(){if(this.centerPanel&&this.centerTabContainer){utils.destroyWidget(this.centerTabContainer);this.centerTabContainer=null;this.layoutCenter.containerNode.appendChild(this.centerPanel.domNode);this.resize()}},onPanelClosed:function(){if(this.centerTabContainer){var children=this.centerTabContainer.getChildren();var reRoot=false;if(children.length==1)reRoot=true;if(reRoot)this.onLastPanelRemoved()}},prepareLayout:function(config){return this._prepareLayout(config)},
_createPanel:function(panelOptions,dstContainer,cookiePrefix,region,mixins){if(panelOptions.AUTO_OPEN||panelOptions.AUTO_OPEN==null)return this.getPanelManager().openUrl(this.config.START_PATH,dstContainer,this.config,cookiePrefix,region,"root",null,mixins)},onChangeToggleSplitterState:function(splitter,state){if(!this.persistent)return;var splitterData=[];if(this.layoutLeft&&this.layoutLeft._splitterWidget)splitterData.push({region:"left",state:this.layoutLeft._splitterWidget.state});if(this.layoutRight&&
this.layoutRight._splitterWidget)splitterData.push({region:"right",state:this.layoutRight._splitterWidget.state});if(this.layoutBottom&&this.layoutBottom._splitterWidget)splitterData.push({region:"bottom",state:this.layoutBottom._splitterWidget.state});this.ctx.getSettingsManager().write(null,".",null,{id:"splitter",data:JSON.stringify(splitterData),name:"Splitter States"},true,null)},setupToggleSplitterListeners:function(){if(this.layoutLeft&&this.layoutLeft._splitterWidget)this.layoutLeft._splitterWidget.delegate=
this;if(this.layoutRight&&this.layoutRight._splitterWidget)this.layoutRight._splitterWidget.delegate=this;if(this.layoutBottom&&this.layoutBottom._splitterWidget)this.layoutBottom._splitterWidget.delegate=this},_getState:function(region,data){for(var i=0;i<data.length;i++)if(data[i].region==region)return data[i].state;return null},_restoreSplitter:function(){},_restoreToggleSplitters:function(){var store=this.ctx.getSettingsManager().getStore();if(store){var data=utils.queryStoreEx(store,{id:"splitter"},
true,true);if(data){data=data.data;if(data){if(this.layoutLeft&&this.layoutLeft._splitterWidget){var state=this._getState("left",data);if(state)this.layoutLeft._splitterWidget.set("state",state)}if(this.layoutRight&&this.layoutRight._splitterWidget){var state=this._getState("right",data);if(state)this.layoutRight._splitterWidget.set("state",state)}if(this.layoutBottom&&this.layoutBottom._splitterWidget){var state=this._getState("bottom",data);if(state)this.layoutBottom._splitterWidget.set("state",
state)}}}}},onPanelsCreated:function(config){if(config.PANEL_OPTIONS.ALLOW_INFO_VIEW&&config.FILE_PANEL_OPTIONS_RIGHT&&config.FILE_PANEL_OPTIONS_RIGHT.AUTO_OPEN){var container=this.getRightTopTarget(true,false);this.getPanelManager().openProperties(null,container)}},createPanels:function(config){this._createPanels(config,true);this.onPanelsCreated(config)},getPanelManager:function(){return this.panelManager},onShowPanel:function(data){try{var panel=data?data?data.panel?data.panel:null:null:null;var showBreadcrumb=
this.config.PANEL_OPTIONS!=null&&(this.config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===true||this.config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===1);if(showBreadcrumb&&!this.breadCrumb&&panel&&panel.store){var trail=new BreadCrumb({store:panel.store,cssBaseClass:"fileIcon",className:"breadCrumb ui-state-default"},dojo.doc.createElement("div"));if(!trail){console.error("breadcrumb creation failed");return}this.breadCrumb=trail;this.layoutTop.containerNode.appendChild(trail.domNode);dojo.place(trail.domNode,this.layoutTop.containerNode,
"last");trail.startup();this.layoutTop.resize();var thiz=this;trail.onClick=function(item,widget){if(item&&trail.owner&&trail.owner.openItem)trail.owner.openItem(item)};return trail}if(panel&&panel.getCurrentPathItem){var cPathItem=panel.getCurrentPathItem();if(cPathItem&&this.breadCrumb);}}catch(e){}},onDidOpenItem:function(data){var item=data?data?data.item?data.item:null:null:null;if(item&&item.path&&item.directory===true){if(!this.breadCrumb)this.breadCrumb=this.createBreadCrumb(this.config,item._S);
if(this.breadCrumb){if(this.breadCrumb.store!=item._S){this.breadCrumb.store=item._S;this.breadCrumb._clearTrail()}this.breadCrumb.setTrail(item.path);this.breadCrumb.owner=data.panel}}},createBreadCrumb:function(config,store){if(this.breadCrumb)return;var breadCrumb=null;try{breadCrumb=new BreadCrumb({store:store,cssBaseClass:"fileIcon",className:"breadCrumb"},dojo.doc.createElement("div"))}catch(e){0&&console.log("breadcrumb crash")}if(!breadCrumb)return;this.layoutTop.containerNode.appendChild(breadCrumb.domNode);
dojo.place(breadCrumb.domNode,this.layoutTop.containerNode,"last");breadCrumb.startup();this.layoutTop.resize();this.layoutMain.resize();var thiz=this;breadCrumb.onClick=function(item,widget){if(item&&breadCrumb.owner&&breadCrumb.owner.openItem)breadCrumb.owner.openItem(item)};return breadCrumb},_createToolbarEx:function(displayMode,config,container){if(displayMode=="self"){this.actionToolbar=new ActionToolbarEmbedded({delegate:this.ctx.getPanelManager(),ctx:this.ctx,config:config,useElusive:true,
style:"width:auto"},dojo.doc.createElement("div"));domClass.add(this.actionToolbar.domNode,"actionToolbarEmbedded");container.containerNode.appendChild(this.actionToolbar.domNode);this.actionToolbar.startup()}},clear:function(){this.inherited(arguments);this.getPanelManager().onPerspectiveChangedEnd();this.getPanelManager().panels=[];this.getPanelManager().currentPanel=null},clear2:function(){if(this.centerPanel)utils.destroyWidget(this.centerPanel);if(this.leftPanel)utils.destroyWidget(this.leftPanel);
if(this.actionToolbar)utils.destroyWidget(this.actionToolbar);if(this.bottomTabContainer)utils.destroyWidget(this.bottomTabContainer);this._contextChanged=true;if(this.layoutTop)dojo.empty(this.layoutTop.containerNode)},setPerspective:function(mode){this.clear();this.config.LAYOUT_PRESET=mode;this.initWithConfig(this.config,true);this._contextChanged=true;this.getPanelManager().onActionContextChanged()},registerEditorExtensions:function(ctx){ctx.registerEditorExtension("Preview","jpeg|jpg|png|avi|mpg|mkv|mp4|mp3|pdf",
"el-icon-eye-open",this,true,null,FilePreview,{updateOnSelection:false});this.ctx.registerEditorExtension("xBlocks","xblox","fa-play-circle-o",this,true,null,BlocksFileEditor,{rightLayoutContainer:this.getRightTopTarget(false,false),ctx:this.ctx,mainView:this,blockManagerClass:"xfile.manager.BlockManager"})},onReady:function(){},initWithConfig:function(config,perspectiveChanged){var thiz=this;try{var minimal=location.href.indexOf("minimal\x3dtrue")!=-1;if(minimal){config.PANEL_OPTIONS.ALLOW_INFO_VIEW=
false;config.PANEL_OPTIONS.ALLOW_LOG_VIEW=false;config.PANEL_OPTIONS.ALLOW_BREADCRUMBS=false}thiz.registerEditorExtensions(thiz.ctx);setTimeout(function(){thiz.prepareLayout(config)},100);setTimeout(function(){if(config&&config.ACTION_TOOLBAR_MODE!=null)try{thiz._createToolbar(config.ACTION_TOOLBAR_MODE,config,thiz.layoutTop)}catch(e){}thiz.createPanels(config)},200);if(perspectiveChanged===true)setTimeout(function(){switch(thiz.config.LAYOUT_PRESET){case types.LAYOUT_PRESET.SINGLE:thiz.centerPanel.onLayoutModeChanged(types.FILE_PANEL_LAYOUT.LIST);
break}},400);if(perspectiveChanged!==true){if(thiz.persistent){thiz.setupToggleSplitterListeners();setTimeout(function(){thiz._restoreToggleSplitters();thiz.resize();thiz.publish(types.EVENTS.RESIZE,{},this)},1E3)}this.onReady();setTimeout(function(){thiz.publish(types.EVENTS.ON_MAIN_VIEW_READY,null,thiz)},7E3)}}catch(e){debugger}},updateItemActions:function(items,owner,actions,where){if(this.toolbar&&this.toolbar.getCurrentItem()!=items){this.toolbar.clear();if(actions&&actions.length>0)this.toolbar.addActions(actions,
owner,items)}},onActionContextChanged:function(evt){this._contextChanged=true},onItemSelected:function(evt,clear){if(!this.isMyBeanContext(evt))return;var item=evt.item;if(this.breadCrumb&&evt.item&&evt.callee&&evt.callee.delegate)if(item&&item.path&&item.directory===true){if(this.breadCrumb.store!=item._S){this.breadCrumb.store=item._S;this.breadCrumb._clearTrail()}if(item._S.isItemLoaded(item))this.breadCrumb.setTrail(item.path);this.breadCrumb.owner=evt.callee.delegate}var owner=evt["owner"]||
evt["view"];if(owner&&owner["hasItemActions"]!=null&&owner.hasItemActions()===true){var actions=owner.getItemActions();this.updateItemActions(owner.getItem(),owner,actions)}if(this.config.PANEL_OPTIONS.ALLOW_INFO_VIEW&&this.config.FILE_PANEL_OPTIONS_RIGHT&&this.config.FILE_PANEL_OPTIONS_RIGHT.AUTO_OPEN){if(this._contextChanged){clear=true;this._contextChanged=false}else clear=false;if(item&&item._S){var container=this.getRightTopTarget(clear,false);this.getPanelManager().openProperties(item,container,
false)}}},removeEmptyContainers:function(){utils.destroyIfEmpty(this.layoutRight);utils.destroyIfEmpty(this.layoutCenter);utils.destroyIfEmpty(this.layoutLeft);utils.destroyIfEmpty(this.layoutTop);utils.destroyIfEmpty(this.layoutBottom)},postMixInProperties:function(){this.inherited(arguments)},shouldChangeActionContext:function(item){if(item&&!item._S)return true;return false},onViewShow:function(evt){if(!this.isMyBeanContext(evt))return;try{var view=evt["view"];if(view&&view["hasItemActions"]!=
null&&view.hasItemActions()===true){evt["owner"]=view;this.onItemSelected(evt)}}catch(e){console.error("on view show error"+e)}},getInfoTarget:function(data){},startup:function(){this.inherited(arguments);this.buttons=[];var thiz=this;if(this.toolbar)this.toolbar.delegate=this;factory.subscribe(types.EVENTS.ON_DID_OPEN_ITEM,this.onDidOpenItem,this);this.registerFileOperationEvents();this.registerBeanEvents();this._setupTranslations()},_resizeContainer:function(container,name){try{if(container&&container.domNode)container.resize();
else;}catch(e){}},_fixToolbar:function(){if(this.toolbar&&this.layoutBottom&&this.layoutMain&&this.layoutBottom.domNode)dojo.place(this.toolbar.domNode,this.layoutBottom.domNode,"before")},resize:function(){this.inherited(arguments);if(this.layoutMain)this._resizeContainer(this.layoutMain,"main");if(this.layoutLeft)this._resizeContainer(this.layoutLeft,"left");if(this.layoutTop)this._resizeContainer(this.layoutTop,"top");if(this.layoutCenter)this._resizeContainer(this.layoutCenter,"center");if(this.layoutRight)this._resizeContainer(this.layoutRight,
"right");if(this.layoutLeft)this._resizeContainer(this.layoutLeft,"left");if(this.layoutBottom)this._resizeContainer(this.layoutBottom,"bottom")},_createBottomTabContainer:function(){if(this.layoutBottomPlaceHolder){utils.destroyWidget(this.layoutBottomPlaceHolder);this.layoutBottomPlaceHolder=null}if(this.layoutBottom&&this.layoutBottom._splitterWidget)this.layoutBottom._splitterWidget.set("state","full");return utils.addWidget(dijit.layout.TabContainer,{tabStrip:true,tabPosition:"bottom",region:"bottom",
attachParent:true,style:"width:100%"},null,this.layoutBottom.containerNode,true)},showLogPanel:function(){if(this.config.PANEL_OPTIONS!=null&&this.config.PANEL_OPTIONS.ALLOW_LOG_VIEW===false)return false;if(!this.bottomTabContainer){this.bottomTabContainer=this._createBottomTabContainer();var logManager=this.ctx.getLogManager();if(logManager);}if(this.bottomTabContainer&&this.logPanel){this.bottomTabContainer.selectChild(this.logPanel);domClass.add(this.logPanel.containerNode,"ui-widget-content");
domClass.add(this.logPanel.containerNode,"bottomTabLog")}var splitter=this.layoutBottom._splitterWidget;if(splitter)switch(splitter.state){case "full":break;case "collapsed":case "closed":splitter.set("state","full");break}return true}})})},"xwordpress/Widgets":function(){define("xwordpress/Widgets",["dojo/_base/declare","xide/widgets/TemplatedWidgetBase","xide/widgets/EditorToolbar","xide/widgets/_CSSMixin","xide/widgets/_HTMLTemplateMixin","xide/widgets/_InsertionMixin","xide/widgets/_StyleMixin",
"xide/widgets/_PermaMixin","xide/widgets/Button","xfile/widgets/Image","xfile/widgets/Image","xfile/widgets/FileProperties","xfile/widgets/Toaster","xfile/widgets/BreadCrumb","xfile/widgets/NewItemSelector","xfile/widgets/EditorSelector","xfile/widgets/ProgressItem"],function(declare){return declare("xwordpress.Widgets",null,{})})},"dojo/json":function(){define(["./has"],function(has){var hasJSON=typeof JSON!="undefined";has.add("json-parse",hasJSON);has.add("json-stringify",hasJSON&&JSON.stringify({a:0},
function(k,v){return v||1})=='{"a":1}');if(has("json-stringify"))return JSON;else{var escapeString=function(str){return('"'+str.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:has("json-parse")?JSON.parse:function(str,strict){if(strict&&!/^([\s\[\{]*(?:"(?:\\.|[^"])+"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(str))throw new SyntaxError("Invalid characters in JSON");
return eval("("+str+")")},stringify:function(value,replacer,spacer){var undef;if(typeof replacer=="string"){spacer=replacer;replacer=null}function stringify(it,indent,key){if(replacer)it=replacer(key,it);var val,objtype=typeof it;if(objtype=="number")return isFinite(it)?it+"":"null";if(objtype=="boolean")return it+"";if(it===null)return"null";if(typeof it=="string")return escapeString(it);if(objtype=="function"||objtype=="undefined")return undef;if(typeof it.toJSON=="function")return stringify(it.toJSON(key),
indent,key);if(it instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(t,prop,plus){var num=it["getUTC"+prop]()+(plus?1:0);return num<10?"0"+num:num});if(it.valueOf()!==it)return stringify(it.valueOf(),indent,key);var nextIndent=spacer?indent+spacer:"";var sep=spacer?" ":"";var newLine=spacer?"\n":"";if(it instanceof Array){var itl=it.length,res=[];for(key=0;key<itl;key++){var obj=it[key];val=stringify(obj,nextIndent,key);if(typeof val!=
"string")val="null";res.push(newLine+nextIndent+val)}return"["+res.join(",")+newLine+indent+"]"}var output=[];for(key in it){var keyStr;if(it.hasOwnProperty(key)){if(typeof key=="number")keyStr='"'+key+'"';else if(typeof key=="string")keyStr=escapeString(key);else continue;val=stringify(it[key],nextIndent,key);if(typeof val!="string")continue;output.push(newLine+nextIndent+keyStr+":"+sep+val)}}return"{"+output.join(",")+newLine+indent+"}"}return stringify(value,"","")}}}})},"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\n\t   cellspacing\x3d"0"\x3e\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\n\x3c/table\x3e\n',
"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(dojo){return dojo.dojox})},"dojo/dnd/Selector":function(){define("dojo/dnd/Selector",["../_base/array","../_base/declare","../_base/event","../_base/kernel","../_base/lang","../dom","../dom-construct","../mouse","../_base/NodeList","../on","../touch","./common","./Container"],function(array,declare,event,kernel,lang,dom,domConstruct,mouse,NodeList,on,touch,dnd,Container){var Selector=declare("dojo.dnd.Selector",Container,{constructor:function(node,
params){if(!params)params={};this.singular=params.singular;this.autoSync=params.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(on(this.node,touch.press,lang.hitch(this,"onMouseDown")),on(this.node,touch.release,lang.hitch(this,"onMouseUp")))},singular:false,getSelectedNodes:function(){var t=new NodeList;var e=dnd._empty;for(var i in this.selection){if(i in e)continue;t.push(dom.byId(i))}return t},selectNone:function(){return this._removeSelection()._removeAnchor()},
selectAll:function(){this.forInItems(function(data,id){this._addItemClass(dom.byId(id),"Selected");this.selection[id]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var e=dnd._empty;for(var i in this.selection){if(i in e)continue;var n=dom.byId(i);this.delItem(i);domConstruct.destroy(n)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(f,o){o=o||kernel.global;var s=this.selection,e=dnd._empty;for(var i in s){if(i in e)continue;f.call(o,this.getItem(i),
i,this)}},sync:function(){Selector.superclass.sync.call(this);if(this.anchor)if(!this.getItem(this.anchor.id))this.anchor=null;var t=[],e=dnd._empty;for(var i in this.selection){if(i in e)continue;if(!this.getItem(i))t.push(i)}array.forEach(t,function(i){delete this.selection[i]},this);return this},insertNodes:function(addSelected,data,before,anchor){var oldCreator=this._normalizedCreator;this._normalizedCreator=function(item,hint){var t=oldCreator.call(this,item,hint);if(addSelected){if(!this.anchor){this.anchor=
t.node;this._removeItemClass(t.node,"Selected");this._addItemClass(this.anchor,"Anchor")}else if(this.anchor!=t.node){this._removeItemClass(t.node,"Anchor");this._addItemClass(t.node,"Selected")}this.selection[t.node.id]=1}else{this._removeItemClass(t.node,"Selected");this._removeItemClass(t.node,"Anchor")}return t};Selector.superclass.insertNodes.call(this,data,before,anchor);this._normalizedCreator=oldCreator;return this},destroy:function(){Selector.superclass.destroy.call(this);this.selection=
this.anchor=null},onMouseDown:function(e){if(this.autoSync)this.sync();if(!this.current)return;if(!this.singular&&!dnd.getCopyKeyState(e)&&!e.shiftKey&&this.current.id in this.selection){this.simpleSelection=true;if(mouse.isLeft(e))event.stop(e);return}if(!this.singular&&e.shiftKey){if(!dnd.getCopyKeyState(e))this._removeSelection();var c=this.getAllNodes();if(c.length){if(!this.anchor){this.anchor=c[0];this._addItemClass(this.anchor,"Anchor")}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var i=
0,node;for(;i<c.length;++i){node=c[i];if(node==this.anchor||node==this.current)break}for(++i;i<c.length;++i){node=c[i];if(node==this.anchor||node==this.current)break;this._addItemClass(node,"Selected");this.selection[node.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}}else if(this.singular)if(this.anchor==this.current){if(dnd.getCopyKeyState(e))this.selectNone()}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=
1}else if(dnd.getCopyKeyState(e))if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor()}else if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id]}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected")}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}else if(!(this.current.id in this.selection)){this.selectNone();
this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}event.stop(e)},onMouseUp:function(){if(!this.simpleSelection)return;this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1}},onMouseMove:function(){this.simpleSelection=false},onOverEvent:function(){this.onmousemoveEvent=on(this.node,touch.move,lang.hitch(this,"onMouseMove"))},onOutEvent:function(){if(this.onmousemoveEvent){this.onmousemoveEvent.remove();
delete this.onmousemoveEvent}},_removeSelection:function(){var e=dnd._empty;for(var i in this.selection){if(i in e)continue;var node=dom.byId(i);if(node)this._removeItemClass(node,"Selected")}this.selection={};return this},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null}return this}});return Selector})},"xblox/factory/Blocks":function(){define("xblox/factory/Blocks",["dojo/_base/lang","xide/factory","xide/utils","xide/types","xide/mixins/ReloadMixin",
"xide/mixins/EventedMixin","xblox/model/logic/CaseBlock","xblox/model/Block","xblox/model/functions/CallBlock","xblox/model/code/CallMethod","xblox/model/code/RunScript","xblox/model/loops/ForBlock","xblox/model/loops/WhileBlock","xblox/model/variables/VariableAssignmentBlock","xblox/model/logic/IfBlock","xblox/model/logic/ElseIfBlock","xblox/model/logic/SwitchBlock","xblox/model/variables/VariableSwitch","xblox/model/events/OnEvent","xblox/model/events/OnKey","xblox/model/logging/Log","xblox/model/html/SetStyle",
"xblox/model/html/SetCSS","xblox/model/server/RunServerMethod"],function(lang,factory,utils,types,ReloadMixin,EventedMixin,CaseBlock,Block,CallBlock,CallMethod,RunScript,ForBlock,WhileBlock,VariableAssignmentBlock,IfBlock,ElseIfBlock,SwitchBlock,VariableSwitch,OnEvent,OnKey,Log,SetStyle,SetCSS,RunServerMethod){var cachedAll=null;factory.clearVariables=function(){};factory.getAllBlocks=function(scope,owner,target,group,allowCache){if(allowCache!==false&&cachedAll!=null){for(var i=0;i<cachedAll.length;i++){var obj=
cachedAll[i];if(obj.name==="Set Variable"){cachedAll.remove(obj);break}}return cachedAll}else if(allowCache==false)cachedAll=null;var items=factory._getFlowBlocks(scope,owner,target,group);items=items.concat(factory._getLoopBlocks(scope,owner,target,group));items=items.concat(factory._getCommandBlocks(scope,owner,target,group));items=items.concat(factory._getCodeBlocks(scope,owner,target,group));items=items.concat(factory._getEventBlocks(scope,owner,target,group));items=items.concat(factory._getLoggingBlocks(scope,
owner,target,group));items=items.concat(factory._getHTMLBlocks(scope,owner,target,group));items=items.concat(factory._getServerBlocks(scope,owner,target,group));cachedAll=items;return items};factory._getCommandBlocks=function(scope,owner,target,group){var items=[];return items};factory._getServerBlocks=function(scope,owner,target,group){var items=[];items.push({name:"Server",iconClass:"el-icon-repeat",items:[{name:"Run Server Method",owner:owner,iconClass:"fa-plug",proto:RunServerMethod,target:target,
ctrArgs:{scope:scope,group:group}}]});factory.publish(types.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:items,group:"Server"});return items};factory._getHTMLBlocks=function(scope,owner,target,group){var items=[];items.push({name:"HTML",iconClass:"fa-paint-brush",items:[{name:"Set Style",owner:owner,iconClass:"fa-paint-brush",proto:SetStyle,target:target,ctrArgs:{scope:scope,group:group}},{name:"Set CSS",owner:owner,iconClass:"fa-paint-brush",proto:SetCSS,target:target,ctrArgs:{scope:scope,group:group}}]});
return items};factory._getVariableBlocks=function(scope,owner,target,group){var items=[];items.push({name:"Flow",iconClass:"el-icon-random",items:[{name:"If...Else",owner:owner,iconClass:"el-icon-fork",proto:IfBlock,target:target,ctrArgs:{scope:scope,group:group,condition:"[value1]\x3d\x3d'PW'"}},{name:"Switch",owner:owner,iconClass:"el-icon-fork",proto:SwitchBlock,target:target,ctrArgs:{scope:scope,group:group}}]});return items};factory._getEventBlocks=function(scope,owner,target,group){var items=
[];items.push({name:"Events",iconClass:"fa-bell",items:[{name:"On Event",owner:owner,iconClass:"fa-bell",proto:OnEvent,target:target,ctrArgs:{scope:scope,group:group}},{name:"On Key",owner:owner,iconClass:"fa-keyboard-o",proto:OnKey,target:target,ctrArgs:{scope:scope,group:group}}]});factory.publish(types.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:items,group:"Events"});return items};factory._getLoggingBlocks=function(scope,owner,target,group){var items=[];items.push({name:"Logging",iconClass:"fa-bug",
items:[{name:"Log",owner:owner,iconClass:"fa-bug",proto:Log,target:target,ctrArgs:{scope:scope,group:group}}]});factory.publish(types.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:items,group:"Logging"});return items};factory._getCodeBlocks=function(scope,owner,target,group){var items=[];items.push({name:"Code",iconClass:"fa-code",items:[{name:"Call Method",owner:owner,iconClass:"el-icon-video",proto:CallMethod,target:target,ctrArgs:{scope:scope,group:group}},{name:"Run Script",owner:owner,iconClass:"fa-code",
proto:RunScript,target:target,ctrArgs:{scope:scope,group:group}}]});factory.publish(types.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:items,group:"Code"});return items};factory._getFlowBlocks=function(scope,owner,target,group){var items=[];items.push({name:"Flow",iconClass:"el-icon-random",items:[{name:"If...Else",owner:owner,iconClass:"el-icon-fork",proto:IfBlock,target:target,ctrArgs:{scope:scope,group:group,condition:"[value1]\x3d\x3d'PW'"}},{name:"Switch",owner:owner,iconClass:"el-icon-fork",proto:SwitchBlock,
target:target,ctrArgs:{scope:scope,group:group}},{name:"Variable Switch",owner:owner,iconClass:"el-icon-fork",proto:VariableSwitch,target:target,ctrArgs:{scope:scope,group:group}}]});factory.publish(types.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:items,group:"Flow"});return items};factory._getLoopBlocks=function(scope,owner,target,group){var items=[];items.push({name:"Loops",iconClass:"el-icon-repeat",items:[{name:"While",owner:owner,iconClass:"el-icon-repeat",proto:WhileBlock,target:target,ctrArgs:{scope:scope,
group:group,condition:"[Volume]\x3c\x3d100"}},{name:"For",owner:owner,iconClass:"el-icon-repeat",proto:ForBlock,target:target,ctrArgs:{scope:scope,group:group,initial:"1",comparator:"\x3c\x3d","final":"5",modifier:"+1",counterName:"value"}}]});factory.publish(types.EVENTS.ON_BUILD_BLOCK_INFO_LIST,{items:items,group:"Loops"});return items};factory._getMathBlocks=function(scope,owner,dstItem,group){var items=[];items.push({name:"Math",owner:this,iconClass:"el-icon-qrcode",dstItem:dstItem,items:[{name:"If...Else",
owner:dstItem,iconClass:"el-icon-compass",proto:IfBlock,item:dstItem,ctrArgs:{scope:scope,group:group}}]});return items};factory._getTimeBlocks=function(scope,owner,dstItem,group){var items=[];items.push({name:"Time",owner:this,iconClass:"el-icon-qrcode",dstItem:dstItem,items:[{name:"If...Else",owner:dstItem,iconClass:"el-icon-time",proto:IfBlock,item:dstItem,ctrArgs:{scope:scope,group:group}}]});return items};factory._getTransformBlocks=function(scope,owner,dstItem,group){var items=[];items.push({name:"Time",
owner:this,iconClass:"el-icon-magic",dstItem:dstItem,items:[{name:"If...Else",owner:dstItem,iconClass:"el-icon-time",proto:IfBlock,item:dstItem,ctrArgs:{scope:scope,group:group}}]});return items};factory.prepareBlockContructorArgs=function(ctorArgs){if(!ctorArgs)ctorArgs={};if(!ctorArgs["id"])ctorArgs["id"]=utils.createUUID();if(!ctorArgs["items"])ctorArgs["items"]=[]};factory.createBlock=function(mixed,ctorArgs,baseClasses){factory.prepareBlockContructorArgs(ctorArgs);var block=factory.createInstance(mixed,
ctorArgs,baseClasses);block.ctrArgs=null;try{if(block&&block.init)block.init();ReloadMixin.prototype.mergeFunctions(block,EventedMixin.prototype);ReloadMixin.prototype.mergeFunctions(block,ReloadMixin.prototype);if(block.scope)block.scope.registerBlock(block);try{if(block.initReload)block.initReload()}catch(e){debugger}}catch(e){debugger}if(!block)debugger;return block};return factory})},"url:dijit/layout/templates/_TabButton.html":'\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"titleNode,innerDiv,tabContent" class\x3d"dijitTabInner dijitTabContent ui-state-default"\x3e\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3cspan data-dojo-attach-point\x3d\'containerNode,focusNode\' class\x3d\'tabLabel\'\x3e\x3c/span\x3e\n\t\x3cspan class\x3d"dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point\x3d\'closeNode\'\n\t\t  role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d\'closeText\' class\x3d\'dijitTabCloseText\'\x3e[x]\x3c/span\n\t\t\t\t\x3e\x3c/span\x3e\n\x3c/div\x3e\n',
"xide/widgets/ImageWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","xide/utils","./FileWidget","xfile/factory"],function(declare,lang,utils,FileWidget,xFileFactory){return declare("xide.widgets.ImageWidget",[FileWidget],{oriPath:null,img:null,minHeight:"51px;",value:"",onPlatformChanged:function(newPlatform){this.inherited(arguments);this.setThumbnail(this.getValue())},clearValue:function(){this.setValue(null);this.setThumbnail(null)},templateString2:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e"+
"\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e"+"\x3ctbody\x3e"+"\x3ctr\x3e"+"\x3ctd width\x3d'25%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue' valign\x3d'middle' data-dojo-attach-point\x3d'previewNode'\x3e\x3c/td\x3e"+"\x3ctd width\x3d'25px' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+"\x3ctd data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+"\x3ctd data-dojo-attach-point\x3d'button2' width\x3d'25px' \x3e\x3c/td\x3e"+
"\x3ctd data-dojo-attach-point\x3d'button3' width\x3d'25px' \x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"+"\x3cdiv data-dojo-attach-point\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'last'\x3e\x3c/div\x3e"+"\x3c/div\x3e",updateImageUrl:function(url){this.oriPath=url;this.userData=utils.setCIValueByField(this.userData,"value",url);this.setThumbnail(url);this.delegate.updateItem(this.userData)},delayedCIUpdate:function(thiz){thiz.userData=
utils.setCIValueByField(thiz.userData,"value",thiz.oriPath);sctx.getStoreDelegate().updateDataItem(thiz.userData)},getOptions:function(){var ctx=window["xFileContext"];var _defaultOptions={title:this.dialogTitle,owner:ctx,dst:{name:"Select",path:"."},src:".",ctx:ctx};var options=this.options||ctx.defaultOptions;if(options){_defaultOptions=lang.mixin(_defaultOptions,options);0&&console.dir(options)}else console.error("have no options");if(_defaultOptions.store&&_defaultOptions.defaultStoreName){_defaultOptions.defaultStoreOptions=
{"fields":1663,"includedFileExtensions":"jpg,png,jpeg","excludedFileExtensions":"*"};_defaultOptions.store=ctx.getStore(_defaultOptions.defaultStoreName,_defaultOptions.defaultStoreOptions)}return _defaultOptions},onSelect:function(){var thiz=this;var defaultOptions=this.getOptions();xFileFactory.createFileSelectDialogLarge(defaultOptions,function(path){thiz.onFileSelected(path)})},startup:function(){this.inherited(arguments)}})})},"xide/widgets/WidgetBase":function(){define(["dojo/_base/declare",
"dojo/dom-class","xide/widgets/TemplatedWidgetBase","xide/widgets/ToolTipMixin","xide/utils","xide/factory","xide/types","./_CSSMixin","./_StyleMixin","dojo/dom-construct"],function(declare,domClass,TemplatedWidgetBase,ToolTipMixin,utils,factory,types,CSSMixin,StyleMixin,domConstruct){return declare("xide.widgets.WidgetBase",[TemplatedWidgetBase,ToolTipMixin,CSSMixin,StyleMixin],{cssClass:"ui-state-default",_currentPlatform:null,data:null,model:null,widgets:null,delegate:null,helpNodes:null,navigationView:null,
currentWidget:null,currentDataItem:null,didLoad:false,isSubWidget:false,title:"NoTitle",value:"Unset",minHeight:"60px;",previewNode:null,button0:null,valueNode:null,button1:null,toolBarRoot:null,toolBar:null,button2:null,button3:null,wButton2:null,wButton3:null,didStartup:false,nativeWidget:null,isInherited:false,expander:null,expanderButton:null,expanderOpen:false,expanderPane:null,lastHeight:null,hasPlatform:false,titleNode:null,storeDelegate:null,extensionRoot:null,extensionTag:"td",extensionClass:"extension",
_didSendReady:false,styles:null,active:true,vertical:false,templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e"+"\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%'\x3e"+"\x3ctbody align\x3d'left'\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot' valign\x3d'middle' style\x3d'height:90%'\x3e"+"\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cb\x3e\x3cspan data-dojo-attach-point\x3d'titleNode'\x3e${!title}\x3c/span\x3e\x3c/b\x3e\x3c/td\x3e"+"\x3ctd valign\x3d'middle' class\x3d'widgetValue' data-dojo-attach-point\x3d'valueNode' width\x3d'100px'\x3e${!value}\x3c/td\x3e"+
"\x3ctd class\x3d'extension' data-dojo-attach-point\x3d'previewNode'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"+"\x3cdiv data-dojo-attach-point\x3d'expander' style\x3d'width:100%;'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'last'\x3e\x3c/div\x3e"+"\x3c/div\x3e",changed:false,setActive:function(active){this.active=
false;if(this.userData)this.userData._active=active},setStoreDelegate:function(delegate){this.storeDelegate=delegate},getExtensionRoot:function(){return this.extensionRoot},getFreeExtensionSlot:function(startNode){var root=startNode||this.getExtensionRoot();if(!root)return null;var node=utils.findEmptyNode(root,".extension");if(!node)node=domConstruct.create(this.extensionTag,{className:this.extensionClass},root);return node},getCurrentPlatform:function(){return this._currentPlatform},getRootId:function(){return this.id},
save:function(){factory.publish(types.EVENTS.ON_CI_UPDATE,{owner:this.delegate||this.owner,ci:this.userData,newValue:this.getValue(),storeItem:this.storeItem},this)},setValue:function(value,dataSource,dataRef,title){if(this.getCurrentPlatform()==null||this.getCurrentPlatform()==xapp.types.PlatformGroup.ALL){var oldValue=utils.getCIValueByField(this.userData,"value");this.userData=utils.setCIValueByField(this.userData,"value",value);if(this.skipSave==true){JSCOMPILER_PRESERVE(this.skipSave==false);
return}factory.publish(types.EVENTS.ON_CI_UPDATE,{owner:this.delegate||this.owner,ci:this.userData,newValue:value,oldValue:oldValue,storeItem:this.storeItem},this);return}else if(this.hasPlatform)this.setPlatformOverride(value,dataSource,dataRef,title)},getValue:function(platform,field){if(platform||this.getCurrentPlatform()){var override=this.getPlatformOverride(platform||this.getCurrentPlatform());if(override)return utils.toString(override[field||"value"])}else if(this.userData)return utils.getCIValueByField(this.userData,
field||"value");return null},onPlatformChanged:function(newPlatform){this._currentPlatform=newPlatform==xapp.types.PlatformGroup.ALL?null:newPlatform;var ciOverride=this.getPlatformOverride()},clearValue:function(){this.userData=utils.setCIValueByField(this.userData,"value","Unset");this.userData=utils.setCIValueByField(this.userData,"dataSource","");this.userData=utils.setCIValueByField(this.userData,"dataRef","");sctx.getStoreDelegate().updateDataItem(this.userData);if(this.valueNode)this.valueNode.innerHTML=
"Unset"},onCIPlatformOverrideReady:function(ciPlatformOverride){},setPlatformOverride:function(value,dataSource,dataRef,title,platform){var ciOverride=this.getPlatformOverride();if(!ciOverride){if(value!=null){var override={dstId:utils.toString(this.userData.id),pageId:utils.toInt(this.pageData.uid),dstIdStr:platform||this.getCurrentPlatform(),refGroupStr:xapp.types.CIOverrideRefGroup.PLATFORM,dataSource:utils.toString(dataSource),dataRef:utils.toString(dataRef),value:utils.toString(value),title:utils.toString(title)};
sctx.getApplication().createCIPlatformOverride(this,override)}}else{if(value==null){ciOverride.value=null;ciOverride.dataSource=null;ciOverride.dataRef=null;ciOverride.title=null;sctx.getStoreDelegate().deleteCIPlatformOverride(ciOverride);return}ciOverride.value=value;ciOverride.dataSource=dataSource;ciOverride.dataRef=dataRef;ciOverride.title=title;sctx.getStoreDelegate().onCIPlatformOverrideChanged(ciOverride)}},getPlatformOverride:function(platform){var store=sctx.getApplication().getCIOverrideStore();
return utils.getCIPlatformOverride(store,utils.toInt(this.pageData.uid),utils.toInt(this.userData.id),platform||this.getCurrentPlatform())},openExpander:function(){if(this.expanderPane){domClass.remove(this.expanderButton.iconNode,"widgetMinusButton");domClass.add(this.expanderButton.iconNode,"widgetAddButton");utils.destroyWidget(this.expanderPane);this.domNode.style.height=this.lastHeight;this.expanderPane=null;return}domClass.remove(this.expanderButton.iconNode,"widgetAddButton");domClass.add(this.expanderButton.iconNode,
"widgetMinusButton");var anchor=dojo.doc.createElement("DIV",{});this.expanderPane=dojo.create("DIV",{className:"widgetExpanderPane widgetBorder"},anchor);this.last.appendChild(anchor);if(!this.lastHeight)this.lastHeight=this.domNode.style.height;this.domNode.style.height="auto";anchor=dojo.doc.createElement("DIV",{});var platformWidget=new xide.widgets.PlatformWidget({title:"Platform",delegate:this},anchor);this.expanderPane.appendChild(platformWidget.domNode);platformWidget.startup()},setupExpander:function(){var thiz=
this;this.expanderButton=new dijit.form.ToggleButton({role:"presentation",showLabel:false,checked:true,iconClass:"widgetAddButton",style:"padding-left:0px;overflow:hidden;"},this.expander);dojo.connect(this.expanderButton,"onClick",function(item){thiz.openExpander()});domClass.remove(this.expanderButton.domNode,"dijitButton");domClass.remove(this.expanderButton.domNode,"dijitButtonNode");domClass.add(this.expanderButton.domNode,"noBGButton");domClass.add(this.expanderButton.domNode,"platformExpanderButton")},
getWidgetsFromTemplate:function(){},empty:function(){if(this.helpNodes)for(var i=0;i<this.helpNodes.length;i++){var widget=this.helpNodes[i];dojo.destroy(widget)}if(this.widgets)for(var i=0;i<this.widgets.length;i++){var widget=this.widgets[i];widget.destroyRecursive();dojo.destroy(widget)}},onLoad:function(){},onCIOverrideReadyVisibility:function(ciOverride){this.onVisibilityToggle()},onVisibilityToggle:function(e){var store=sctx.getApplication().ciOverrideStore;var ciOverrides=utils.getPageCIOverrides(store,
utils.toInt(this.pageData.uid));var ciOverride=utils.getPageCIOverrideByCIId(store,utils.toInt(this.pageData.uid),utils.toInt(this.userData.id));if(this.isInherited)if(!ciOverride){var flags=xapp.types.CIOverrideFlags.HideInAllFollowElements;var override={dstId:utils.toString(this.userData.id),pageId:utils.toInt(this.pageData.uid),flags:flags};sctx.getApplication().createCIOverride(this,override)}else{var newToggleState=utils.toggleVisibility(ciOverride);utils.setIntegerValue(ciOverride.flags,newToggleState);
sctx.getStoreDelegate().onCIOverrideChanged(ciOverride);this.wButton3.updateVisibilityButton(this.wButton3,newToggleState)}},buildToolbar:function(){if(this.toolBar)return;var thiz=this;var vFlags=xapp.types.CIOverrideFlags.None;if(this.pageData){var ciOverride=utils.getPageCIOverrideByCIId(sctx.getApplication().getCIOverrideStore(),utils.toInt(this.pageData.uid),utils.toInt(this.userData.id));if(ciOverride)vFlags=utils.toInt(ciOverride.flags)}var anchor=dojo.doc.createElement("DIV",{});this.wButton3=
new xas.widgets.VisibilityToggle({toggleState:vFlags,delegate:this,role:"button",showLabel:false,iconClass:"dijitEditorIcon iconVisible",style:"padding-left:0px",checked:true},anchor);this.button3.appendChild(this.wButton3.domNode);this.wButton3.startup()},fillTemplate:function(){var thiz=this;if(this.nativeWidget){this.valueNode.innerHTML="";this.valueNode.appendChild(this.nativeWidget.domNode)}},addClearButton:function(){if(this.wButton1)return;var thiz=this;var anchor=dojo.doc.createElement("DIV",
{});this.wButton1=new dijit.form.ToggleButton({role:"button",showLabel:false,checked:true,iconClass:"widgetDeleteButton",style:"padding-left:0px;"},anchor);this.button1.appendChild(this.wButton1.domNode);dojo.connect(this.wButton1,"onClick",function(item){thiz.clearValue();if(thiz.setThumbnail)thiz.setThumbnail("")})},startup:function(){if(this.value==null)this.value="Unset";if(this.didStartup)return;this.inherited(arguments);if(this.userData&&this.userData.inherited&&this.userData.inherited==true){this.isInherited=
true;domClass.remove(this.domNode,"widgetContainer");this.buildToolbar();domClass.add(this.domNode,"widgetContainerAlternate")}else;if(this.value="Unset")if(this.valueNode);this.didStartup=true;if(this.nativeWidget&&this.setupNativeWidgetHandler)this.setupNativeWidgetHandler();this.updateTitleNode(this.title)},connectEditBox:function(editBox,onChanged){var thiz=this;dojo.connect(editBox,"onChange",function(value){if(onChanged)onChanged(value);var _valueNow=utils.toString(thiz.userData["value"]);if(value===
_valueNow)return;thiz.userData.changed=true;thiz.userData.active=true;if(thiz.serialize)value=thiz.serialize();utils.setCIValueByField(thiz.userData,"value",value);factory.publish(types.EVENTS.ON_CI_UPDATE,{owner:thiz.delegate||thiz.owner,ci:thiz.userData,newValue:value,storeItem:thiz.storeItem},thiz)})},getElements:function(cssClass,rootNode){return(rootNode||dojo.body()).getElementsByClassName(cssClass)},onReady:function(){if(this.doStyleMixin&&this.styles)this.doStyleMixin(this.styles);if(!this._didSendReady){factory.publish(types.EVENTS.ON_WIDGET_READY,
{ci:this.userData,widget:this,storeItem:this.storeItem,owner:this.owner});this._didSendReady=true}if(this.userData&&this.userData.vertical===true)domClass.add(this.domNode,"vertical")}})})},"xfile/manager/LogManager":function(){define("xfile/manager/LogManager",["dojo/_base/declare","dojo/_base/lang","xide/utils","xide/types","xlog/manager/LogManager","xlog/views/LogView"],function(declare,lang,utils,types,LogManager,LogView){return declare("xfile.manager.LogManager",[LogManager],{init:function(){this.inherited(arguments);
this.ls()},createLoggingView:function(store,where,silent){var parent=where||this.getViewTarget();try{return utils.addWidget(LogView,{delegate:this,store:store,title:"Log",closable:false,style:"padding:0px",className:"ui-widget-content logGridView",showSource:false,silent:silent,onShow:function(){this.resize();if(this.onResize)this.onResize();if(this.silent!==false){this.publish(types.EVENTS.ON_VIEW_SHOW,{view:this});this.silent=false}}},this,parent,true)}catch(e){console.error(e)}}})})},"xblox/views/BlocksFileEditor":function(){define("xblox/views/BlocksFileEditor",
["dojo/_base/declare","dojo/_base/lang","xide/views/BeanView","xide/views/BeanTreeView","xide/factory","xide/utils","dojo/store/Memory","dojo/store/Observable","xfile/views/_EditorMixin","xide/layout/ContentPane","xblox/views/GroupedBlockView","xblox/views/BlocksGridViewDefault","xblox/views/VariablesGridView","xblox/model/variables/Variable"],function(declare,lang,BeanView,BeanTreeView,factory,utils,Memory,Observable,_EditorMixin,ContentPane,GroupedBlockView,BlocksGridViewDefault,VariablesGridView,
Variable){return declare("xblox.views.BlocksFileEditor",[BeanView,BeanTreeView,_EditorMixin],{_item:null,cssClass:"bloxEditor",blockManager:null,blockManagerClass:"xblox.manager.BlockManager",model:null,store:null,tree:null,currentItem:null,didLoad:false,selectable:false,beanType:"BLOCK",blockScope:null,groupContainer:null,hasItemActions:function(){return true},getItemActions:function(){return this.inherited(arguments)},onReloaded:function(){this.destroyWidgets();this.openItem(this._item)},openItem:function(item){this._item=
item;var thiz=this;try{var _loaded=function(content){thiz.initWithContent(content)}.bind(thiz)}catch(e){console.error("trouble loading xblox file : ",e)}this.getContent(item,_loaded)},initWithContent:function(content){var data=null;try{data=utils.getJson(content)}catch(e){console.error("invalid block data")}if(data)this.initWithData(data)},initWithScope:function(blockScope){this.blockScope=blockScope;var allBlockGroups=blockScope.allGroups(),thiz=this;0&&console.log("       block groups",allBlockGroups);
if(allBlockGroups.indexOf("Variables")==-1)allBlockGroups.push("Variables");if(allBlockGroups.indexOf("Events")==-1)allBlockGroups.push("Events");if(allBlockGroups.indexOf("On Load")==-1)allBlockGroups.push("On Load");else;setTimeout(function(){try{thiz.renderGroups(allBlockGroups,blockScope)}catch(e){debugger}},100)},getScopeUserData:function(){return{owner:this}},initWithData:function(data){0&&console.log("init with data",data);var scopeId=utils.createUUID();var blockInData=data;var variableInData=
data;if(lang.isArray(data));else if(lang.isObject(data)){scopeId=data.scopeId||scopeId;blockInData=data.blocks||[];variableInData=data.variables||[]}var blockManager=this.getBlockManager();this.blockManager=blockManager;var scopeUserData=this.getScopeUserData();var blockScope=blockManager.getScope(scopeId,scopeUserData,true);var allBlocks=blockScope.blocksFromJson(blockInData);for(var i=0;i<allBlocks.length;i++){var obj=allBlocks[i];obj._lastRunSettings={force:false,highlight:true}}var allVariables=
blockScope.variablesFromJson(variableInData);blockManager.onBlocksReady(blockScope);0&&console.log("   got blocks",allBlocks);0&&console.log("   got variables",allVariables);if(allBlocks)return this.initWithScope(blockScope)},_createTreeStore:function(blockData){var data={items:blockData,identifier:"name",label:"name"};var blockStore=Observable(new Memory({data:data,getChildren:function(object){return object.items},mayHaveChildren:function(parent){return parent.items!=null&&parent.items.length>0}}));
return blockStore},destroyWidgets:function(){utils.destroyWidget(this.groupContainer);if(this.blockManager&&this.blockScope)this.blockManager.removeScope(this.blockScope.id);this.groupContainer=null;this.blockManager=null},destroy:function(){0&&console.log("destroy");this.destroyWidgets();this.inherited(arguments)},getBlockManager:function(){if(!this.blockManager){if(this.ctx.blockManager)return this.ctx.blockManager;this.blockManager=factory.createInstance(this.blockManagerClass,{ctx:this.ctx});
0&&console.log("_createBlockManager ",this.blockManager)}return this.blockManager},createGroupContainer:function(){var tabContainer=utils.addWidget(dijit.layout.TabContainer,{tabStrip:true,tabPosition:"top",splitter:true,style:"min-width:450px;height:inherit;padding:0px;","className":"ui-widget-content"},null,this.containerNode,true);return tabContainer},getGroupContainer:function(){if(this.groupContainer)return this.groupContainer;this.groupContainer=this.createGroupContainer();return this.groupContainer},
createGroupView:function(groupContainer,group){return utils.addWidget(ContentPane,{delegate:this,title:group,closable:false,style:"padding:0px",cssClass:"blocksEditorPane",blockView:null,onShow:function(){if(this.blockView)this.blockView.onShow()}},this,groupContainer,true)},createGroupedBlockView:function(container,group,scope,extra){var thiz=this;var args={attachTo:container,blockGroup:group,title:group,gridViewProto:BlocksGridViewDefault,blockScope:scope,ctx:this.ctx,delegate:this,showAllBlocks:true,
open:true,lazy:true,titlePane:false,canToggle:false,gridParams:{cssClass:"bloxGridView"}};if(extra)args=lang.mixin(args,extra);var view=new GroupedBlockView(args);view.startup();return view},renderGroups:function(_array,blockScope){var groupContainer=this.getGroupContainer();var lastChild=null,thiz=this;for(var i=0;i<_array.length;i++)try{var groupBlocks=blockScope.getBlocks({group:_array[i]});if(_array[i]!=="Variables"&&(!groupBlocks||!groupBlocks.length))continue;var contentPane=this.createGroupView(groupContainer,
_array[i]);var gridViewConstructurArgs={};if(_array[i]==="Variables"){gridViewConstructurArgs.newRootItemFunction=function(){try{var newItem=new Variable({title:"No-Title-Yet",type:13,value:"No Value",enumType:"VariableType",save:false,initialize:"",group:"Variables",id:utils.createUUID(),scope:blockScope})}catch(e){debugger}};gridViewConstructurArgs.onGridDataChanged=function(evt){0&&console.log("onGridDataChanged",evt);var item=evt.item;if(item)item[evt.field]=evt.newValue;thiz.save()};gridViewConstructurArgs.showAllBlocks=
false;gridViewConstructurArgs.newRootItemLabel="New Variable";gridViewConstructurArgs.newRootItemIcon="fa-code";gridViewConstructurArgs.storeField="variableStore";gridViewConstructurArgs.gridViewProto=VariablesGridView}gridViewConstructurArgs.newRootItemGroup=_array[i];lastChild=this.createGroupedBlockView(contentPane.containerNode,_array[i],blockScope,gridViewConstructurArgs);contentPane.blockView=lastChild;lastChild.parentContainer=contentPane}catch(e){debugger}groupContainer.resize();if(lastChild);
setTimeout(function(){if(thiz.parentContainer)thiz.parentContainer.resize()},500)},onSave:function(groupedBlockView){this.save()},save:function(){if(this.blockScope){var all={blocks:null,variables:null};var blocks=this.blockScope.blocksToJson();try{var _testData=dojo.fromJson(JSON.stringify(blocks))}catch(e){console.error("invalid data");return}var _onSaved=function(){};var variables=this.blockScope.variablesToJson();try{var _testData=dojo.fromJson(JSON.stringify(variables))}catch(e){console.error("invalid data");
return}all.blocks=blocks;all.variables=variables;this.saveContent(JSON.stringify(all,null,2),this._item,_onSaved)}},onGridKeyEnter:function(){this.editBlock(this.getItem())},onGridMouseDoubleClick:function(){this.editBlock(this.getItem())},startup:function(){if(this.didLoad)return;this.inherited(arguments);this.didLoad=true}})})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(declare,Grid,OnDemandList){return declare([Grid,OnDemandList],{})})},"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\n\t\t\x3c/span\n\t\x3e\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',"xide/views/GridView":function(){define(["dojo/_base/declare","dojo/dom-class",
"xide/types","xide/factory","xide/utils","dgrid/Keyboard","xide/views/GridKeyboardHandler"],function(declare,domClass,types,factory,utils,Keyboard,GridKeyboardHandler){return declare("xide.views.GridView",[GridKeyboardHandler],{grid:null,childSelector:".dgrid-row",itemType:0,handleContainerClick:true,resizeHeightToParent:true,clearSelection:false,selectedItemNode:null,selectedItem:null,selectedItems:null,keyboardNavigation:false,mouseNavigation:false,openTreeOnEnter:false,dnd:true,gridParams:null,
autoHeight:false,autoSelectOnShow:true,beanType:null,onShow:function(){this.onContainerFocus()},select:function(item,focus){this.grid.select(item);if(focus===true)this.focusItem(item)},expand:function(item,focus){var isExpanded=this._isExpanded(item);if(!isExpanded)this.grid.expand(item);if(focus===true)this.focusItem(item)},_isExpanded:function(item){var focusNode=this.toFocusNode(item);if(focusNode){var innerNode=utils.find(".ui-icon-triangle-1-se",focusNode,true);if(innerNode)return true;else{innerNode=
utils.find(".ui-icon-triangle-1-e",focusNode,true);if(!innerNode)return null}}return false},addGridBases:function(bases){if(this.keyboardNavigation)bases.push(Keyboard);return bases},onRight:function(evt){var row=this.grid.row(evt);if(row&&this.grid.expand)this.grid.expand(row)},onLeft:function(evt){var row=this.grid.row(evt);if(row&&row.data&&row.data.parentId){var item=row.data;var isExpanded=this._isExpanded(row.data);if(!isExpanded){var store=this.store;var parent=this.store.query({id:item.parentId});
if(parent&&parent.length==1){this.select(parent[0],true);return}else if(this.blockScope){parent=this.blockScope.getBlockById(item.parentId);if(parent){this.select(parent,true);return}}}}if(row&&this.grid.expand)this.grid.expand(row)},onEnter:function(evt){if(this.delegate&&this.delegate.onGridKeyEnter)this.delegate.onGridKeyEnter(evt)},focusNode:function(node){this.focusChild(node)},toFocusNode:function(item){var row=this.grid.row(item);if(row&&row.element){var innerNode=utils.find(".dgrid-cell",
row.element,true);if(innerNode)return innerNode;else return row.element}else{var innerNode=utils.find(".dgrid-row",this.grid.domNode,true);if(innerNode)return innerNode}return null},focusItem:function(item,storeOnly){if(storeOnly){this.nextFocusItem=item;return}var row=this.grid.row(item);if(row){var focusNode=this.toFocusNode(item);if(!focusNode&&this.focusedChildNode)focusNode=this.focusedChildNode;if(focusNode){this.grid._focusNode=focusNode;if(this.grid.focus)this.grid.focus(focusNode);focusNode.focus()}else console.error("have no focus node")}else console.error("have no focus row")},
getCurrentItemNodes:function(startnode){var rows=utils.find(".dgrid-row",startnode||this.domNode,false);if(rows)return rows;return null},getNumberOfItems:function(startnode){var nbItems=0;var rows=utils.find(".dgrid-row",startnode||this.domNode,false);if(rows)return rows.length;return nbItems},_onGridDataChanged:function(evt){var cell=evt.cell;var item=null;if(cell&&cell.row&&cell.row.data)item=cell.row.data;var id=evt.rowId;var oldValue=evt.oldValue;var newValue=evt.value;var data={item:item,id:id,
oldValue:oldValue,newValue:newValue,grid:this.grid,field:cell.column.field};if(this.delegate&&this.delegate.onGridDataChanged)this.delegate.onGridDataChanged(data)},_onGridEditorShow:function(evt){if(this.delegate&&this.delegate.onGridEditorShow)this.delegate.onGridEditorShow(evt)},onGridCreated:function(grid){grid=grid||this.grid;var thiz=this;if(this.autoHeight)domClass.add(this.grid.domNode,"dgrid-autoheight");if(this.handleContainerClick)grid.on("click",function(evt){if(evt&&evt.target&&domClass.contains(evt.target,
"dgrid-content"))thiz.onContainerFocus()});grid.on("dgrid-select",function(data){if(thiz.isForcedFocus)return;if(data&&data.rows&&data.rows.length==1){thiz.prevItem=data.rows[0].data;thiz.prevFocusNode=data.rows[0].element;if(!thiz.ctlrKeyDown)thiz.onItemSelected(data.rows[0].data,data.rows[0].element);else thiz.onItemSelected(data.rows);thiz.lastSelectedRowItem=data.rows[0].data}else if(data&&data.rows&&data.rows.length>=1)thiz.onItemsSelected(data.rows)});grid.on("dgrid-datachange",function(evt){thiz._onGridDataChanged(evt)});
grid.on("dgrid-error",function(evt){0&&console.warn("error on grid: ",evt.error)});grid.on("dgrid-editor-show",function(evt){thiz._onGridEditorShow(evt)});if(this.mouseNavigation)grid.on("dblclick",function(evt){thiz.onMouseDoubleClickEvent(evt)});grid.on("keydown",function(evt){thiz.onKey(evt)});grid.on("keyup",function(evt){thiz.onKeyUp(evt)})},restoreFocus:function(){this.onContainerFocus()},onContainerFocus:function(){var thiz=this;if(this.delegate.onItemSelected)this.delegate.onItemSelected(null);
if(!this.clearSelection)setTimeout(function(){thiz.onFocusRootNode()},1);else{this.grid.clearSelection();this.selectedItem=null;this.selectedItems=null;if(this.selectedItemNode)this.selectedItemNode.blur();this.selectedItemNode=null}},_getValidItem:function(nodes){for(var i=0;i<nodes.length;i++){var row=this.grid.row(nodes[i]);if(row&&row.data&&row.data.name!==".")return row.data}return null},getFirstItem:function(){var innerNodes=utils.find(".dgrid-row",this.grid.domNode,false);if(innerNodes)if(innerNodes.length>
0){var item=this._getValidItem(innerNodes);if(item)return item}return null},focusFirstItem:function(){if(this._getFirst){var first=this._getFirst();if(first){this.focusItem(first,false);this.grid._focusNode=first;this.grid.focus(first)}else console.error("focusFirstItem:failed")}},onFocusRootNode:function(){if(this.prevFocusNode){this.isForcedFocus=true;this.focusItem(this.prevFocusNode,false);this.grid._focusNode=this.prevFocusNode;if(this.grid.focus)this.grid.focus(this.prevFocusNode);this.isForcedFocus=
false}else this.focusFirstItem()},onKeyboardSearch:function(item,evt,searchString,numMatches){if(item&&item.data)this.focusItem(item.data,false)},onGridRefreshed:function(){var newRow=null;if(this.activeItem!=null)this._restoreItem(this.activeItem);try{if(this.nextFocusItemForce){this.focusItem(this.nextFocusItemForce,false);this.nextFocusItemForce=null}else if(this.autoFocus)if(this.nextFocusItem)this.focusItem(this.nextFocusItem,false);else if(this.grid.focus&&newRow)this.grid.focus(newRow)}catch(e){console.error("onGridFreshed::focus : went wrong!")}var thiz=
this;setTimeout(function(){factory.publish(types.EVENTS.RESIZE,{},this)},100);this.grid.resize()},onSelected:function(rowIndex){var item=this.grid.getItem(rowIndex);if(item.directory)this.delegate.updateGrid(item)},onItemChanged:function(item,operation){var thiz=this;thiz.grid.refresh()},getActiveItem:function(){return this.activeItem},onKeyEvent:function(evt){if(this.keyboardDelegate)this.keyboardDelegate.onGridKey(evt)},onMouseEvent:function(evt){if(this.mouseDelegate)this.mouseDelegate.onGridMouse(evt)},
onMouseDoubleClickEvent:function(evt){if(this.delegate&&this.delegate.onGridMouseDoubleClick)this.delegate.onGridMouseDoubleClick(evt)},getCurrentSelection:function(viaCSS){if(viaCSS===true){var res=[];var rows=utils.find(".dgrid-selected",this.grid.domNode,false);if(rows==null||rows.length==0)return null;for(var i=0;i<rows.length;i++){var row=this.grid.row(rows[i]);if(row!=null&&row.data!=null&&row.data.name!=null&&row.data.name!="."&&row.data.name!="..")res.push(row.data)}if(res.length>0)return res;
else return null}return this.selectedItems},onItemsSelected:function(items,node){this.selectedItems=[];for(var i=0;i<items.length;i++){var item=items[i];var itemData=item.data;if(item&&itemData){if(item.data=="..")continue;this.selectedItems.push(itemData)}}},onItemSelected:function(item,node){this.selectedItem=item;this.selectedItemNode=node;this.selectedItems=[item];var struct={store:this.store,item:item,owner:this,type:this.itemType,view:this};if(this.beanType)struct.beanType=this.beanType;try{this.publish(types.EVENTS.ON_ITEM_SELECTED,
struct)}catch(e){console.error("publish ON_ITEM_SELECTED failed "+e)}var innerNode=utils.find(".dgrid-cell",node,true);if(innerNode){this.focusedChildNode=innerNode;this.focusedChildNode["data"]=item}this.activeItem=item;if(this.delegate.onItemSelected)this.delegate.onItemSelected(item);if(node&&node.focus)node.focus()},refresh:function(store){if(store){this.store=store;this.grid.set("store",store)}else this.grid.refresh()},onResize:function(){if(this.resizeHeightToParent)if(this.domNode&&this.domNode.parentNode)utils.mimicNode(this.domNode,
this.domNode.parentNode,false,true);if(this.domNode&&this.grid)this.grid.resize()},startup:function(){try{this.inherited(arguments);this.subscribe(types.EVENTS.RESIZE,this.onResize)}catch(e){console.error("grid view startup crash : "+e)}}})})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(dojo,lang,ArrayUtil,config){var Color=dojo.Color=function(color){if(color)this.setColor(color)};Color.named={"black":[0,0,0],"silver":[192,192,192],"gray":[128,128,128],
"white":[255,255,255],"maroon":[128,0,0],"red":[255,0,0],"purple":[128,0,128],"fuchsia":[255,0,255],"green":[0,128,0],"lime":[0,255,0],"olive":[128,128,0],"yellow":[255,255,0],"navy":[0,0,128],"blue":[0,0,255],"teal":[0,128,128],"aqua":[0,255,255],"transparent":config.transparentColor||[0,0,0,0]};lang.extend(Color,{r:255,g:255,b:255,a:1,_set:function(r,g,b,a){var t=this;t.r=r;t.g=g;t.b=b;t.a=a},setColor:function(color){if(lang.isString(color))Color.fromString(color,this);else if(lang.isArray(color))Color.fromArray(color,
this);else{this._set(color.r,color.g,color.b,color.a);if(!(color instanceof Color))this.sanitize()}return this},sanitize:function(){return this},toRgb:function(){var t=this;return[t.r,t.g,t.b]},toRgba:function(){var t=this;return[t.r,t.g,t.b,t.a]},toHex:function(){var arr=ArrayUtil.map(["r","g","b"],function(x){var s=this[x].toString(16);return s.length<2?"0"+s:s},this);return"#"+arr.join("")},toCss:function(includeAlpha){var t=this,rgb=t.r+", "+t.g+", "+t.b;return(includeAlpha?"rgba("+rgb+", "+t.a:
"rgb("+rgb)+")"},toString:function(){return this.toCss(true)}});Color.blendColors=dojo.blendColors=function(start,end,weight,obj){var t=obj||new Color;ArrayUtil.forEach(["r","g","b","a"],function(x){t[x]=start[x]+(end[x]-start[x])*weight;if(x!="a")t[x]=Math.round(t[x])});return t.sanitize()};Color.fromRgb=dojo.colorFromRgb=function(color,obj){var m=color.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return m&&Color.fromArray(m[1].split(/\s*,\s*/),obj)};Color.fromHex=dojo.colorFromHex=function(color,
obj){var t=obj||new Color,bits=color.length==4?4:8,mask=(1<<bits)-1;color=Number("0x"+color.substr(1));if(isNaN(color))return null;ArrayUtil.forEach(["b","g","r"],function(x){var c=color&mask;color>>=bits;t[x]=bits==4?17*c:c});t.a=1;return t};Color.fromArray=dojo.colorFromArray=function(a,obj){var t=obj||new Color;t._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));if(isNaN(t.a))t.a=1;return t.sanitize()};Color.fromString=dojo.colorFromString=function(str,obj){var a=Color.named[str];return a&&
Color.fromArray(a,obj)||Color.fromRgb(str,obj)||Color.fromHex(str,obj)};return Color})},"xfile/views/FileGridViewDND":function(){define("xfile/views/FileGridViewDND",["dojo/_base/declare"],function(declare){return declare("xfiles.views.FileGridViewDND",null,{onDrop:function(src,dstItem,dstView,copy){var delegate=this.delegate;var dst=dstItem;if(dst==null&&dstView&&dstView.delegate&&dstView.delegate.getCurrentParent)dst=dstView.delegate.getCurrentParent();else 0&&console.warn("invalid state whilst dropping file");
if(dst)if(copy)delegate.copyItem(null,src,dst,true);else delegate.moveItem(null,src,dst,true);else console.error("have no drop target !")}})})},"xblox/model/Scope":function(){define("xblox/model/Scope",["dojo/_base/declare","./ModelBase","./Expression","./variables/Variable","xide/factory","xide/utils","xide/types","dojo/store/Memory","dojo/store/Observable","xide/mixins/ReloadMixin"],function(declare,ModelBase,Expression,Variable,factory,utils,types,Memory,Observable,ReloadMixin){return declare("xblox.model.Scope",
[ModelBase,ReloadMixin],{context:null,serviceObject:null,getService:function(){return this.serviceObject},blockStore:null,variableStore:null,clearCache:function(){this.expressionModel.expressionCache={};this.expressionModel.variableFuncCache={}},getVariableStore:function(){return this.variableStore},getBlockStore:function(){return this.blockStore},getVariables:function(query){if(!this.variableStore)return[];query=query||{id:/\S+/};return this.variableStore.query(query)},loopBlock:function(block){if(block&&
block.auto>0){var thiz=this;setTimeout(function(){block.solve(thiz);thiz.loopBlock(block)},block.auto)}},getEventsAsOptions:function(selected){var result=[];for(var e in types.EVENTS){var label=types.EVENTS[e];var item={label:label,value:types.EVENTS[e]};result.push(item)}result=result.concat([{label:"onclick",value:"onclick"},{label:"ondblclick",value:"ondblclick"},{label:"onmousedown",value:"onmousedown"},{label:"onmouseup",value:"onmouseup"},{label:"onmouseover",value:"onmouseover"},{label:"onmousemove",
value:"onmousemove"},{label:"onmouseout",value:"onmouseout"},{label:"onkeypress",value:"onkeypress"},{label:"onkeydown",value:"onkeydown"},{label:"onkeyup",value:"onkeyup"},{label:"onfocus",value:"onfocus"},{label:"onblur",value:"onblur"},{label:"onchange",value:"onchange"}]);for(var i=0;i<result.length;i++){var obj=result[i];if(obj.value===selected){obj.selected=true;break}}return result},getVariablesAsOptions:function(){var variables=this.getVariables();var result=[];if(variables)for(var i=0;i<
variables.length;i++)result.push({label:variables[i].title,value:variables[i].title});return result},getCommandsAsOptions:function(){var items=this.getBlocks({declaredClass:"xcf.model.Command"});var result=[];if(items)for(var i=0;i<items.length;i++)result.push({label:items[i].name,value:items[i].name});return result},getBlocks:function(query){if(!this.blockStore)return[];query=query||{id:/\S+/};return this.blockStore.query(query)},declaredClass:"xblox.model.Scope",expressionModel:new Expression,registerVariable:function(variable){this.variables[variable.title]=
variable;if(this.variableStore)this.variableStore.put(variable)},getVariable:function(title){var _var=this.variableStore.data[title];if(_var)return _var;var _var=this.variableStore.query({title:title});if(_var)return _var[0];console.error("couldnt find variable with name "+title);return null},registerBlock:function(block){if(block.id)this.blocks[block.id]=block;if(this.blockStore){var added=this.blockStore.get(block.id);if(added)return;if(block.addToStore)block.addToStore(this.blockStore);else this.blockStore.put(block)}},
allBlocks:function(block){var result=[];for(var b in this.blocks)if(this.blocks[b].id!=null)result.push(this.blocks[b]);return result},hasGroup:function(group){var all=this.allGroups();for(var i=0;i<all.length;i++){var obj=all[i];if(obj===group)return true}return false},allGroups:function(){var result=[];var all=this.allBlocks();var _has=function(what){for(var i=0;i<result.length;i++)if(result[i]===what)return true;return false};for(var i=0;i<all.length;i++){var obj=all[i];if(obj.parentId)continue;
if(obj.group){if(!_has(obj.group))result.push(obj.group)}else if(!_has("No Group"))result.push("No Group")}return result},variablesToJson:function(){var result=[];var data=this.variableStore?this.variableStore.data:this.variables;for(var e in data){var variable=data[e];if(variable.serializeMe===false)continue;if(variable.keys==null)continue;var varOut={};for(var prop in variable)if(this.isString(variable[prop])||this.isNumber(variable[prop])||this.isBoolean(variable[prop]))varOut[prop]=variable[prop];
result.push(varOut)}return result},isScript:function(val){return this.isString(val)&&(val.indexOf("return")!=-1||val.indexOf(";")!=-1||val.indexOf("[")!=-1||val.indexOf("{")!=-1||val.indexOf("}")!=-1)},variablesToJavascriptEx:function(skipVariable,expression){var result=[];var data=this.variableStore?this.variableStore.data:this.variables;for(var i=0;i<data.length;i++){var _var=data[i];if(_var==skipVariable)continue;var _varVal=""+_var.value;if(skipVariable&&skipVariable.value&&skipVariable.value.indexOf(_var.title)==
-1)continue;if(expression&&expression.indexOf(_var.title)==-1)continue;if(_varVal.length==0)continue;if(!this.isScript(_varVal)&&_varVal.indexOf("'")==-1)_varVal="'"+_varVal+"'";else if(this.isScript(_varVal))_varVal=this.expressionModel.parseVariable(this,_var);if(_varVal==="''")_varVal="'0'";result.push(_varVal)}return result},variablesToJavascript:function(skipVariable,expression){var result="";var data=this.variableStore?this.variableStore.data:this.variables;for(var i=0;i<data.length;i++){var _var=
data[i];if(_var==skipVariable)continue;var _varVal=""+_var.value;if(skipVariable&&skipVariable.value&&skipVariable.value.indexOf(_var.title)==-1)continue;if(expression&&expression.indexOf(_var.title)==-1)continue;if(_varVal.length==0)continue;if(!this.isScript(_varVal)&&_varVal.indexOf("'")==-1)_varVal="'"+_varVal+"'";else if(this.isScript(_varVal))_varVal=this.expressionModel.parseVariable(this,_var);if(_varVal==="''")_varVal="'0'";result+="var "+_var.title+" \x3d "+_varVal+";";result+="\n"}return result},
variablesFromJson:function(data){var result=[];for(var i=0;i<data.length;i++){var variable=data[i];variable["scope"]=this;if(!variable.declaredClass){0&&console.log("   variable has no class ");continue}var _class=utils.replaceAll(".","/",variable.declaredClass);var variableClassProto=require(_class);if(!variableClassProto){0&&console.log("couldnt resolve "+_class);continue}result.push(new variableClassProto(variable))}return result},regenerateIDs:function(blocks){var thiz=this;var updateChildren=
function(block){var newId=utils.createUUID();var children=thiz.getBlocks({parentId:block.id});if(children&&children.length>0)for(var i=0;i<children.length;i++){var child=children[i];child.parentId=newId;updateChildren(child)}block.id=newId};for(var i=0;i<blocks.length;i++){var block=blocks[i];updateChildren(block)}},cloneBlocks2:function(blocks,forceGroup){var blocksJSON=this.blocksToJson(blocks);var tmpScope=this.owner.getScope(utils.createUUID(),null,false);var newBlocks=tmpScope.blocksFromJson(blocksJSON,
false);newBlocks=tmpScope.allBlocks();tmpScope.regenerateIDs(newBlocks);blocksJSON=tmpScope.blocksToJson(newBlocks);if(forceGroup)for(var i=0;i<blocksJSON.length;i++){var block=blocksJSON[i];if(block.parentId==null)block.group=forceGroup}newBlocks=this.blocksFromJson(blocksJSON);return newBlocks},cloneBlocks:function(blocks){var blocksJSON=this.blocksToJson(blocks);var tmpScope=this.owner.getScope(utils.createUUID(),null,false);var newBlocks=tmpScope.blocksFromJson(blocksJSON,false);newBlocks=tmpScope.allBlocks();
for(var i=0;i<newBlocks.length;i++){var block=newBlocks[i];block.id=utils.createUUID();block.parentId=null}blocksJSON=this.blocksToJson(newBlocks);this.blocksFromJson(newBlocks);return newBlocks},blocksToJson:function(data){try{var result=[];data=data&&data.length?data:this.blockStore?this.blockStore.data:this.blocks;for(var b in data){var block=data[b];if(block.keys==null)continue;var blockOut={_containsChildrenIds:[]};for(var prop in block){if(prop=="ctrArgs")continue;if(typeof block[prop]!=="function"&&
!block.serializeField(prop))continue;if(this.isString(block[prop])||this.isNumber(block[prop])||this.isBoolean(block[prop]))blockOut[prop]=block[prop];if(prop!="parent")if(this.isBlock(block[prop])){blockOut[prop]=block[prop].id;blockOut._containsChildrenIds.push(prop)}else if(this.areBlocks(block[prop])){blockOut[prop]=[];for(var i=0;i<block[prop].length;i++)blockOut[prop].push(block[prop][i].id);blockOut._containsChildrenIds.push(prop)}}result.push(blockOut)}}catch(e){console.error("from json failed : "+
e)}return result},_createBlockStore:function(){var blockData={identifier:"id",label:"title",items:[]};var blockStore=Observable(new Memory({data:blockData,getChildren:function(parent,options){if(parent.getChildren)return parent.getChildren(parent);var op=lang.mixin({},options&&options.originalQuery||null,{parentId:parent.id});var res=this.query(op,options);return res},mayHaveChildren:function(parent){if(parent.mayHaveChildren)return parent.mayHaveChildren(parent);return parent.items!=null&&parent.items.length>
0},query:function(query,options){query=query||{};options=options||{};if(!query.parentId&&!options.deep)query.parentId=undefined;return this.queryEngine(query,options)(this.data)}}));return blockStore},blocksFromJson:function(data,check){var resultSelected=[];for(var i=0;i<data.length;i++){var block=data[i];block["scope"]=this;if(block._containsChildrenIds==null)block._containsChildrenIds=[];var children=[];for(var cf=0;cf<block._containsChildrenIds.length;cf++){var propName=block._containsChildrenIds[cf];
children[propName]=block[propName];block[propName]=null}delete block._containsChildrenIds;if(!block.declaredClass){0&&console.log("   not a class ");continue}var blockClassProto=null;var _class=null;try{_class=utils.replaceAll(".","/",block.declaredClass);blockClassProto=require(_class)}catch(e){console.error("couldnt resolve class "+_class)}if(!blockClassProto){0&&console.log("couldnt resolve "+_class);continue}var blockOut=factory.createBlock(blockClassProto,block);blockOut._children=children;resultSelected.push(blockOut)}var allBlocks=
this.allBlocks();for(var i=0;i<allBlocks.length;i++){var block=allBlocks[i];if(block._children){for(var propName in block._children)if(typeof block._children[propName]=="string"){var child=this.getBlockById(block._children[propName]);if(!child){0&&console.log("   couldnt resolve child: "+block._children[propName],block);continue}block[propName]=child;child.parent=block}else if(typeof block._children[propName]=="object"){block[propName]=[];for(var j=0;j<block._children[propName].length;j++){var child=
this.getBlockById(block._children[propName][j]);if(!child){0&&console.log("   couldnt resolve child: "+block._children[propName][j]);continue}block[propName].push(child)}}delete block._children}if(check!==false&&block.parentId!=null){var parent=this.getBlockById(block.parentId);if(parent==null){console.error("have orphan block!",block);debugger;block.remove()}}}var result=this.allBlocks();return resultSelected},getBlockByName:function(name){for(var b in this.blocks)if(this.blocks[b].name===name)return this.blocks[b]},
getBlockById:function(id){return this.blocks[id]},flatten:function(blocks){var result=[];for(var b in blocks){var block=blocks[b];if(block.keys==null)continue;result.push(block);for(var prop in block){if(prop=="ctrArgs")continue;if(prop!="parent")if(this.isBlock(block[prop]))result.push(block[prop]);else if(this.areBlocks(block[prop]))for(var i=0;i<block[prop].length;i++)result.push(block[prop][i])}}return result},solveBlock:function(mixed,settings,force){settings=settings||{highlight:false};var block=
null;if(this.isString(mixed))block=this.getBlockByName(mixed);else if(this.isObject(mixed))block=mixed;var result=null;if(block){if(settings.force!==true&&block.enabled==false){console.error("block is not enabled");return null}if(settings.force===true)settings.force=false;result=block.solve(this,settings)}else console.error("solving block failed, have no block! ",mixed);return result},solve:function(scope,settings){var ret="";for(var n=0;n<this.items.length;n++)ret+=this.items[n].solve(scope,settings);
return ret},parseExpression:function(expression,addVariables){return this.expressionModel.parse(this,expression,addVariables)},isString:function(a){return typeof a=="string"},isNumber:function(a){return typeof a=="number"},isBoolean:function(a){return typeof a=="boolean"},isObject:function(a){return typeof a==="object"},isBlock:function(a){var ret=false;if(typeof a=="object"&&a!=null&&a.length==undefined)if(a.serializeMe)ret=true;return ret},areBlocks:function(a){var ret=false;if(typeof a=="object"&&
a!=null&&a.length>0)if(this.isBlock(a[0]))ret=true;return ret},_onVariableChanged:function(evt){if(evt.item&&this.expressionModel.variableFuncCache[evt.item.title])delete this.expressionModel.variableFuncCache[evt.item.title]},init:function(){this.subscribe(types.EVENTS.ON_DRIVER_VARIABLE_CHANGED,this._onVariableChanged)},_destroy:function(){var allblocks=this.allBlocks();for(var i=0;i<allblocks.length;i++){var obj=allblocks[i];if(obj._destroy)obj._destroy();if(obj.destroy)obj.destroy()}},moveTo:function(source,
target,before,add){if(add)if(target.canAdd&&target.canAdd()){var sourceParent=this.getBlockById(source.parentId);if(sourceParent)sourceParent.removeBlock(source,false);target.add(source,null,null);return}else{console.error("cant reparent");return false}if(!target.parentId&&add==false){console.error("root level move");var sourceParent=this.getBlockById(source.parentId);if(sourceParent&&sourceParent.removeBlock){sourceParent.removeBlock(source,false);source.parentId=null;source.group=target.group}var itemsToBeMoved=
[];var groupItems=this.getBlocks({group:target.group});var rootLevelIndex=[];var store=this.getBlockStore();var sourceIndex=store.index[source.id];var targetIndex=store.index[target.id];for(var i=0;i<groupItems.length;i++){var item=groupItems[i];if(groupItems[i].parentId==null&&groupItems[i]!=source){var itemIndex=store.index[item.id];var add=before?itemIndex>=targetIndex:itemIndex<=targetIndex;if(add){itemsToBeMoved.push(groupItems[i]);rootLevelIndex.push(store.index[groupItems[i].id])}}}for(var j=
0;j<itemsToBeMoved.length;j++)store.remove(itemsToBeMoved[j].id);this.getBlockStore().remove(source.id);if(before)this.getBlockStore().put(source);for(var j=0;j<itemsToBeMoved.length;j++)store.put(itemsToBeMoved[j]);if(!before)this.getBlockStore().put(source);return true}else if(!source.parentId&&target.parentId&&add==false){source.group=target.group;if(target);}else if(!source.parentId&&!target.parentId&&add){console.error("we are adding an item into root root item");if(target.canAdd&&target.canAdd()){source.group=
null;target.add(source,null,null)}return true}else if(source.parentId&&target.parentId&&add==false&&source.parentId===target.parentId){console.error("we move within the same parents");var parent=this.getBlockById(source.parentId);if(!parent){console.error("     couldnt find parent ");return false}var maxSteps=20;var items=parent[parent._getContainer(source)];var cIndexSource=source.indexOf(items,source);var cIndexTarget=source.indexOf(items,target);var direction=cIndexSource>cIndexTarget?-1:1;var distance=
Math.abs(cIndexSource-(cIndexTarget+(before==true?-1:1)));for(var i=0;i<distance-1;i++)parent.move(source,direction);return true}else if(source.parentId&&target.parentId&&add==false&&source.parentId!==target.parentId){0&&console.log("same parent!");console.error("we move within the different parents");var sourceParent=this.getBlockById(source.parentId);if(!sourceParent){console.error("     couldnt find source parent ");return false}var targetParent=this.getBlockById(target.parentId);if(!targetParent){console.error("     couldnt find target parent ");
return false}if(sourceParent&&sourceParent.removeBlock&&targetParent.canAdd&&targetParent.canAdd()){sourceParent.removeBlock(source,false);targetParent.add(source,null,null)}else{console.error("cant reparent");return false}var items=targetParent[targetParent._getContainer(source)];if(items==null)console.error("weird : target parent has no item container");var cIndexSource=targetParent.indexOf(items,source);var cIndexTarget=targetParent.indexOf(items,target);if(!cIndexSource||!cIndexTarget){console.error(" weird : invalid drop processing state, have no valid item indicies");
return}var direction=cIndexSource>cIndexTarget?-1:1;var distance=Math.abs(cIndexSource-(cIndexTarget+(before==true?-1:1)));for(var i=0;i<distance-1;i++)targetParent.move(source,direction);return true}return false}})})},"dojo/fx":function(){define(["./_base/lang","./Evented","./_base/kernel","./_base/array","./_base/connect","./_base/fx","./dom","./dom-style","./dom-geometry","./ready","require"],function(lang,Evented,dojo,arrayUtil,connect,baseFx,dom,domStyle,geom,ready,require){if(!dojo.isAsync)ready(0,
function(){var requires=["./fx/Toggler"];require(requires)});var coreFx=dojo.fx={};var _baseObj={_fire:function(evt,args){if(this[evt])this[evt].apply(this,args||[]);return this}};var _chain=function(animations){this._index=-1;this._animations=animations||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;arrayUtil.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay)this.duration+=a.delay},this)};_chain.prototype=new Evented;lang.extend(_chain,{_onAnimate:function(){this._fire("onAnimate",
arguments)},_onEnd:function(){connect.disconnect(this._onAnimateCtx);connect.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length)this._fire("onEnd");else{this._current=this._animations[++this._index];this._onAnimateCtx=connect.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=connect.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true)}},play:function(delay,gotoStart){if(!this._current)this._current=this._animations[this._index=
0];if(!gotoStart&&this._current.status()=="playing")return this;var beforeBegin=connect.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin")}),onBegin=connect.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments)}),onPlay=connect.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);connect.disconnect(beforeBegin);connect.disconnect(onBegin);connect.disconnect(onPlay)});if(this._onAnimateCtx)connect.disconnect(this._onAnimateCtx);
this._onAnimateCtx=connect.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx)connect.disconnect(this._onEndCtx);this._onEndCtx=connect.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var e=connect.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);connect.disconnect(e)});this._current.pause()}return this},gotoPercent:function(percent,andPlay){this.pause();
var offset=this.duration*percent;this._current=null;arrayUtil.some(this._animations,function(a){if(a.duration<=offset){this._current=a;return true}offset-=a.duration;return false});if(this._current)this._current.gotoPercent(offset/this._current.duration,andPlay);return this},stop:function(gotoEnd){if(this._current){if(gotoEnd){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(true);this._current=this._animations[this._index]}var e=connect.connect(this._current,
"onStop",this,function(arg){this._fire("onStop",arguments);connect.disconnect(e)});this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){if(this._onAnimateCtx)connect.disconnect(this._onAnimateCtx);if(this._onEndCtx)connect.disconnect(this._onEndCtx)}});lang.extend(_chain,_baseObj);coreFx.chain=function(animations){return new _chain(animations)};var _combine=function(animations){this._animations=animations||[];this._connects=
[];this._finished=0;this.duration=0;arrayUtil.forEach(animations,function(a){var duration=a.duration;if(a.delay)duration+=a.delay;if(this.duration<duration)this.duration=duration;this._connects.push(connect.connect(a,"onEnd",this,"_onEnd"))},this);this._pseudoAnimation=new baseFx.Animation({curve:[0,1],duration:this.duration});var self=this;arrayUtil.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(connect.connect(self._pseudoAnimation,
evt,function(){self._fire(evt,arguments)}))})};lang.extend(_combine,{_doAction:function(action,args){arrayUtil.forEach(this._animations,function(a){a[action].apply(a,args)});return this},_onEnd:function(){if(++this._finished>this._animations.length)this._fire("onEnd")},_call:function(action,args){var t=this._pseudoAnimation;t[action].apply(t,args)},play:function(delay,gotoStart){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",
arguments);this._call("pause",arguments);return this},gotoPercent:function(percent,andPlay){var ms=this.duration*percent;arrayUtil.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:ms/a.duration,andPlay)});this._call("gotoPercent",arguments);return this},stop:function(gotoEnd){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){arrayUtil.forEach(this._connects,connect.disconnect)}});
lang.extend(_combine,_baseObj);coreFx.combine=function(animations){return new _combine(animations)};coreFx.wipeIn=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=baseFx.animateProperty(lang.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1}else{var height=domStyle.get(node,"height");return Math.max(height,1)}},end:function(){return node.scrollHeight}}}},
args));var fini=function(){s.height="auto";s.overflow=o};connect.connect(anim,"onStop",fini);connect.connect(anim,"onEnd",fini);return anim};coreFx.wipeOut=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=baseFx.animateProperty(lang.mixin({properties:{height:{end:1}}},args));connect.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display=""});var fini=function(){s.overflow=o;s.height="auto";s.display="none"};connect.connect(anim,"onStop",fini);
connect.connect(anim,"onEnd",fini);return anim};coreFx.slideTo=function(args){var node=args.node=dom.byId(args.node),top=null,left=null;var init=function(n){return function(){var cs=domStyle.getComputedStyle(n);var pos=cs.position;top=pos=="absolute"?n.offsetTop:parseInt(cs.top)||0;left=pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0;if(pos!="absolute"&&pos!="relative"){var ret=geom.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px"}}}(node);
init();var anim=baseFx.animateProperty(lang.mixin({properties:{top:args.top||0,left:args.left||0}},args));connect.connect(anim,"beforeBegin",anim,init);return anim};return coreFx})},"xfile/views/FileCoverView":function(){define("xfile/views/FileCoverView",["dojo/_base/declare","dojo/dom-construct","xide/utils","xide/types","xide/widgets/_CSSMixin","xide/mixins/EventedMixin","xide/views/_ProgressIndicatorMixin","./FileView","require"],function(declare,domConstruct,utils,types,_CSSMixin,EventedMixin,
_ProgressIndicatorMixin,FileView,require){return declare("xfile.views.FileCoverView",[FileView,_CSSMixin,EventedMixin,_ProgressIndicatorMixin],{thumbSize:"470",imageSize:470,resizeThumb:true,cssClass:"filePreviewRoot",cflowNode:null,previewNode:null,updateOnSelection:true,coverflow:null,lastDirectoryItem:null,currentThumbId:null,_idMap:[],_selectOnly:false,destroy:function(){this.inherited(arguments)},getActiveItem:function(){return null},getItem:function(){return this.activeItem},getCurrentParent:function(){return null},
_createImageNode:function(itemPath,text){},_createGalleryMarkup:function(items,id){this._idMap={};var _markup='\x3cul id\x3d"'+id+'" style\x3d"display: none;"\x3e';_markup+='\x3cul data-cat\x3d"x"\x3e';var tpl="\x3cul\x3e"+'\x3cli data-type\x3d"media" data-url\x3d"${url}"\x3e\x3c/li\x3e'+'\x3cli data-thumbnail-path\x3d"${thumb}"\x3e\x3c/li\x3e'+'\x3cli xfile-path\x3d"${path}"\x3e\x3c/li\x3e'+'\x3cli data-thumbnail-text\x3d""\x3e'+'\x3cp class\x3d"largeLabel"\x3e${title}\x3c/p\x3e'+'\x3cp class\x3d"smallLabel"\x3e\x3c/p\x3e'+
"\x3c/li\x3e"+'\x3cli data-info\x3d""\x3e'+'\x3cp class\x3d"mediaDescriptionHeader"\x3e\x3c/p\x3e'+'\x3cp class\x3d"mediaDescriptionText"\x3e\x3c/p\x3e'+"\x3c/li\x3e"+"\x3c/ul\x3e";for(var i=0;i<items.length;i++){var obj=items[i];if(!utils.isImage(obj.path))continue;var params=null;if(this.resizeThumb)params={width:this.thumbSize};var thumbUrl=this.delegate.getImageUrl(obj,null,params);0&&console.log("thumb url "+thumbUrl);0&&console.log("full url "+this.delegate.getImageUrl(obj));this._idMap[i]=
obj;_markup+=utils.substituteString(tpl,{url:this.delegate.getImageUrl(obj),thumb:thumbUrl,title:obj.name,path:obj.path})}_markup+="\x3c/ul\x3e\x3c/ul\x3e";return _markup},_getDirectoryItem:function(item){if(!item)return[];var directoryItem=item;var store=item._S;if(!store)return[];if(item.isDir!==true){directoryItem=store.getParents(item,true);if(directoryItem.length){directoryItem=directoryItem[0];return directoryItem}}return item},getItems:function(item){var res=[];var directoryItem=this._getDirectoryItem(item)||
item;if(directoryItem&&directoryItem._S)try{0&&console.log("is loaded : "+directoryItem._S.isItemLoaded(directoryItem))}catch(e){debugger}if(directoryItem&&directoryItem.children){for(var i=0;i<directoryItem.children.length;i++){var obj=directoryItem.children[i];if(utils.isImage(obj.path))res.push(obj)}return res}return[]},onThumbChange:function(evt){if(evt&&evt.id!=null&&this._idMap[evt.id]!=null){if(this._selectOnly){this._selectOnly=false;return}this.activeItem=this._idMap[evt.id];this.currentThumbId=
evt.id;this.publish(types.EVENTS.ON_ITEM_SELECTED,{item:this._idMap[evt.id],select:true,view:this})}},createCoverView:function(item){var items=this.getItems(item);if(!items||items.length==0)return;if(this.coverflow){try{this.coverflow.destroy()}catch(e){console.error("crash in cflow "+e)}this.coverflow=null;dojo.empty(this.cflowNode)}var thiz=this;try{var _r=require;var skinpath=_r.toUrl("xfile/views/resources/cflow/");var id=utils.createUUID();this.cflowNode.innerHTML=this._createGalleryMarkup(items,
id);if(!this.coverflow){this.coverflow=new ImageFlowApp({coverflowHolderDivId:this.cflowNode.id,coverflowDataListDivId:id,displayType:"responsive",autoScale:"no",coverflowWidth:$(this.domNode).width(),coverflowHeight:$(this.domNode).height()-30,skinPath:skinpath+"skin_white",backgroundColor:"black",backgroundImagePath:"",backgroundRepeat:"repeat-x",showDisplay2DAlways:"no",coverflowStartPosition:"center",coverflowTopology:"dualsided",coverflowXRotation:0,coverflowYRotation:0,numberOfThumbnailsToDisplayLeftAndRight:"all",
infiniteLoop:"no",rightClickContextMenu:"disabled",fluidWidthZIndex:1E3,thumbnailWidth:this.imageSize,thumbnailHeight:266,thumbnailXOffset3D:86,thumbnailXSpace3D:78,thumbnailZOffset3D:200,thumbnailZSpace3D:93,thumbnailYAngle3D:70,thumbnailXOffset2D:20,thumbnailXSpace2D:30,thumbnailHoverOffset:100,thumbnailBorderSize:0,thumbnailBackgroundColor:"#FFFFFF",thumbnailBorderColor1:"#FFFFFF",thumbnailBorderColor2:"#FFFFFF",transparentImages:"no",thumbnailsAlignment:"center",maxNumberOfThumbnailsOnMobile:13,
showThumbnailsGradient:"yes",thumbnailGradientColor1:"rgba(0, 0, 0, 0)",thumbnailGradientColor2:"rgba(0, 0, 0, 1)",showText:"yes",textOffset:10,showThumbnailBoxShadow:"yes",thumbnailBoxShadowCss:"0px 2px 2px #111111",showTooltip:"no",dynamicTooltip:"yes",showReflection:"yes",reflectionHeight:60,reflectionDistance:0,reflectionOpacity:0.4,slideshowDelay:5E3,autoplay:"no",disableNextAndPrevButtonsOnMobile:"no",controlsMaxWidth:700,slideshowTimerColor:"#FFFFFF",controlsPosition:"bottom",controlsOffset:15,
showPrevButton:"yes",showNextButton:"yes",showSlideshowButton:"yes",showScrollbar:"yes",disableScrollbarOnMobile:"yes",enableMouseWheelScroll:"yes",scrollbarHandlerWidth:200,scrollbarTextColorNormal:"#000000",scrollbarTextColorSelected:"#FFFFFF",addKeyboardSupport:"yes",showCategoriesMenu:"false",startAtCategory:1,categoriesMenuMaxWidth:700,categoriesMenuOffset:25,categoryColorNormal:"#999999",categoryColorSelected:"#FFFFFF",addLightBoxKeyboardSupport:"yes",showLightBoxNextAndPrevButtons:"yes",showLightBoxZoomButton:"yes",
showLightBoxInfoButton:"yes",showLightBoxSlideShowButton:"yes",showLightBoxInfoWindowByDefault:"no",slideShowAutoPlay:"no",lightBoxVideoAutoPlay:"no",lightBoxVideoWidth:640,lightBoxVideoHeight:480,lightBoxIframeWidth:800,lightBoxIframeHeight:600,lightBoxBackgroundColor:"#000000",lightBoxInfoWindowBackgroundColor:"#FFFFFF",lightBoxItemBorderColor1:"#fcfdfd",lightBoxItemBorderColor2:"#e4FFe4",lightBoxItemBackgroundColor:"#333333",lightBoxMainBackgroundOpacity:0.8,lightBoxInfoWindowBackgroundOpacity:0.9,
lightBoxBorderSize:0,lightBoxBorderRadius:0,lightBoxSlideShowDelay:4E3});var _onThumbChange=function(evt){thiz.onThumbChange(evt)};this.coverflow.addListener("thumbChanged",_onThumbChange)}}catch(e){console.error("clow crash : "+e)}},openItem:function(item){this.createCoverView(item)},getThumbId:function(item){if(!this._idMap)return;for(var thumb in this._idMap){var obj=this._idMap[thumb];if(obj==item)return thumb}return null},onItemSelected:function(data){var directoryItem=this._getDirectoryItem(data.item);
if(data.select===true)return;if(!directoryItem)return;if(directoryItem&&directoryItem==this.lastDirectoryItem){var _t=this.getThumbId(data.item);if(_t){this._selectOnly=true;this.coverflow.gotoThumb(parseInt(_t))}return}if(!this.getItems(data.item))return;this.lastDirectoryItem=directoryItem;this.openItem(data.item);this.lastItem=data.item},resize:function(){this.inherited(arguments)},startup:function(){if(this.didStartup)return;this.inherited(arguments);this.root=domConstruct.create("div",{className:"fileCoverView ui-helper-reset ui-widget"},
this.containerNode);this.cflowNode=domConstruct.create("div",{className:"fileCoverViewNode"},this.root);this.cflowNode.id=utils.createUUID();this.didStartup=true;var thiz=this;if(this.updateOnSelection)this.subscribe(types.EVENTS.ITEM_SELECTED,function(data){var item=data.item;if(item){var directoryItem=thiz._getDirectoryItem(item)||item;if(directoryItem&&directoryItem._S)if(!directoryItem._S.isItemLoaded(directoryItem))directoryItem._S.getItem(directoryItem.path,true,function(){thiz.onItemSelected(data)});
else thiz.onItemSelected(data)}},this);this.subscribe(types.EVENTS.RESIZE,function(){if(thiz.coverflow)thiz.openItem(thiz.lastItem)})}})})},"xide/manager/ContextBase":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/i18n","xide/factory","xide/types"],function(declare,array,lang,i18n,factory,types){return declare("xide.manager.ContextBase",null,{language:"en",managers:[],createManager:function(clz,config,ctrArgs){if(!this.managers)this.managers=[];var ctrArgsFinal=
{ctx:this,config:config||this.config};if(ctrArgs)lang.mixin(ctrArgsFinal,ctrArgs);if(lang.isString(clz)&&this.namespace){var _clz=null;if(clz.indexOf(".")==-1)_clz=this.namespace+clz;else _clz=""+clz;if(!dojo.getObject(_clz)){0&&console.log("creating manager instance : "+_clz+" doesnt exists!"+" Using default! ");clz=this.defaultNamespace+clz}else clz=_clz;0&&console.log("creating manager instance : "+clz)}else if(lang.isObject(clz))0&&console.log("creating manager instance : "+clz.declaredClass);
var mgr=factory.createInstance(clz,ctrArgsFinal);if(!mgr){console.error("creating manager instance failed : "+clz);return}this.managers.push(mgr);factory.publish(types.EVENTS.ON_CREATED_MANAGER,{instance:mgr,className:clz,ctx:this,config:config||this.config});return mgr},constructManagers:function(){},getValidLanguage:function(){if(this.language!="en"&&this.language!="es"&&this.language!="de"&&this.language!="fr")return"en";return this.language},getLanguage:function(){if(this.language!="en"&&this.language!=
"es"&&this.language!="de"&&this.language!="fr")return"en";return this.language},getLocals:function(module,bundleName){var locals=null;try{locals=i18n.getLocalization(module,bundleName,this.language)}catch(e){}return locals},doMixins:function(mixins){for(var i=0;i<mixins.length;i++){var mixin=mixins[i];var obj=dojo.getObject(mixin.declaredClass);if(mixin.declaredClass===this.declaredClass)obj=this;if(obj)lang.mixin(obj.prototype,mixin.mixin);else console.error("couldnt apply mixin to : "+mixin.declaredClass)}},
constructor:function(){if(typeof navigator!=="undefined"&&typeof forceLanguage==="undefined"){if(navigator.appName=="Netscape")var language=navigator.language;else var language=navigator.browserLanguage;this.language=language.substring(0,2)}else if(typeof forceLanguage!=="undefined"){this.language=forceLanguage;console.error("init with "+this.language)}}})})},"url:dojox/layout/resources/GridContainer.html":'\x3cdiv id\x3d"${id}" class\x3d"gridContainer" dojoAttachPoint\x3d"containerNode" tabIndex\x3d"0" dojoAttachEvent\x3d"onkeypress:_selectFocus"\x3e\n\t\x3cdiv dojoAttachPoint\x3d"gridContainerDiv"\x3e\n\t\t\x3ctable class\x3d"gridContainerTable" dojoAttachPoint\x3d"gridContainerTable" cellspacing\x3d"0" cellpadding\x3d"0"\x3e\n\t\t\t\x3ctbody\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d"gridNode" \x3e\n\t\t\t\t\t\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/tbody\x3e\n\t\t\x3c/table\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',
"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(has,lang,CancelError,Promise,instrumentation){var PROGRESS=0,RESOLVED=1,REJECTED=2;var FULFILLED_ERROR_MESSAGE="This deferred has already been fulfilled.";var freezeObject=Object.freeze||function(){};var signalWaiting=function(waiting,type,result,rejection,deferred){if(1)if(type===REJECTED&&Deferred.instrumentRejected&&waiting.length===0)Deferred.instrumentRejected(result,
false,rejection,deferred);for(var i=0;i<waiting.length;i++)signalListener(waiting[i],type,result,rejection)};var signalListener=function(listener,type,result,rejection){var func=listener[type];var deferred=listener.deferred;if(func)try{var newResult=func(result);if(type===PROGRESS){if(typeof newResult!=="undefined")signalDeferred(deferred,type,newResult)}else{if(newResult&&typeof newResult.then==="function"){listener.cancel=newResult.cancel;newResult.then(makeDeferredSignaler(deferred,RESOLVED),makeDeferredSignaler(deferred,
REJECTED),makeDeferredSignaler(deferred,PROGRESS));return}signalDeferred(deferred,RESOLVED,newResult)}}catch(error){signalDeferred(deferred,REJECTED,error)}else signalDeferred(deferred,type,result);if(1)if(type===REJECTED&&Deferred.instrumentRejected)Deferred.instrumentRejected(result,!!func,rejection,deferred.promise)};var makeDeferredSignaler=function(deferred,type){return function(value){signalDeferred(deferred,type,value)}};var signalDeferred=function(deferred,type,result){if(!deferred.isCanceled())switch(type){case PROGRESS:deferred.progress(result);
break;case RESOLVED:deferred.resolve(result);break;case REJECTED:deferred.reject(result);break}};var Deferred=function(canceler){var promise=this.promise=new Promise;var deferred=this;var fulfilled,result,rejection;var canceled=false;var waiting=[];if(1&&Error.captureStackTrace){Error.captureStackTrace(deferred,Deferred);Error.captureStackTrace(promise,Deferred)}this.isResolved=promise.isResolved=function(){return fulfilled===RESOLVED};this.isRejected=promise.isRejected=function(){return fulfilled===
REJECTED};this.isFulfilled=promise.isFulfilled=function(){return!!fulfilled};this.isCanceled=promise.isCanceled=function(){return canceled};this.progress=function(update,strict){if(!fulfilled){signalWaiting(waiting,PROGRESS,update,null,deferred);return promise}else if(strict===true)throw new Error(FULFILLED_ERROR_MESSAGE);else return promise};this.resolve=function(value,strict){if(!fulfilled){signalWaiting(waiting,fulfilled=RESOLVED,result=value,null,deferred);waiting=null;return promise}else if(strict===
true)throw new Error(FULFILLED_ERROR_MESSAGE);else return promise};var reject=this.reject=function(error,strict){if(!fulfilled){if(1&&Error.captureStackTrace)Error.captureStackTrace(rejection={},reject);signalWaiting(waiting,fulfilled=REJECTED,result=error,rejection,deferred);waiting=null;return promise}else if(strict===true)throw new Error(FULFILLED_ERROR_MESSAGE);else return promise};this.then=promise.then=function(callback,errback,progback){var listener=[progback,callback,errback];listener.cancel=
promise.cancel;listener.deferred=new Deferred(function(reason){return listener.cancel&&listener.cancel(reason)});if(fulfilled&&!waiting)signalListener(listener,fulfilled,result,rejection);else waiting.push(listener);return listener.deferred.promise};this.cancel=promise.cancel=function(reason,strict){if(!fulfilled){if(canceler){var returnedReason=canceler(reason);reason=typeof returnedReason==="undefined"?reason:returnedReason}canceled=true;if(!fulfilled){if(typeof reason==="undefined")reason=new CancelError;
reject(reason);return reason}else if(fulfilled===REJECTED&&result===reason)return reason}else if(strict===true)throw new Error(FULFILLED_ERROR_MESSAGE);};freezeObject(promise)};Deferred.prototype.toString=function(){return"[object Deferred]"};if(instrumentation)instrumentation(Deferred);return Deferred})},"xide/views/GridKeyboardHandler":function(){define(["dojo/_base/declare","dojo/keys","dojo/has"],function(declare,keys,has){return declare("xide.views.GridKeyboardHandler",null,{ctlrKeyDown:false,
onKeyUp:function(evt){switch(evt.keyCode){case keys.META:case keys.SHIFT:case keys.ALT:case keys.CTRL:this.ctlrKeyDown=false;break}},onKey:function(evt){var thiz=this;if(evt.type&&evt.type=="keyup")return this.onKeyUp(evt);var vKey=86,cKey=67,cutKey=88;if(evt.keyCode==keys.ENTER)if(this.ctlrKeyDown){if(this.openItemAlternate){evt.preventDefault();this.openItemAlternate(null)}}else{if(evt.target.className.indexOf("dijitInputInner")==-1&&this.onEnter){this.onEnter(evt);evt.preventDefault()}}else switch(evt.keyCode){case keys.META:case keys.ALT:case keys.SHIFT:case keys.CTRL:this.ctlrKeyDown=
true;setTimeout(function(){thiz.ctlrKeyDown=false},2E3);break;case keys.SPACE:if(this.onPreview){evt.preventDefault();this.onPreview()}break;case keys.RIGHT_ARROW:if(evt.originalTarget&&evt.originalTarget.className.indexOf("InputInner")!=-1)return;if(this.onRight){evt.preventDefault();this.onRight(evt)}break;case keys.LEFT_ARROW:if(evt.originalTarget&&evt.originalTarget.className.indexOf("InputInner")!=-1)return;if(this.onLeft){evt.preventDefault();this.onLeft(evt)}break;case keys.F1:if(this.openSourceMenu){evt.preventDefault();
this.openSourceMenu()}break;case keys.F2:if(this.onRename){evt.preventDefault();this.onRename()}break;case keys.TAB:if(this.onTab){this.onTab(evt);evt.preventDefault()}break;case keys.BACKSPACE:var doBack=true;if(has("chrome")&&this.ctlrKeyDown==false)doBack=false;if(doBack)if(this.onBack){evt.preventDefault();this.onBack()}break;case keys.DELETE:if(this.deleteItem){evt.preventDefault();this.deleteItem()}break;case cKey:if(this.ctlrKeyDown&&this.onClipBoardCopy)this.onClipBoardCopy();break;case vKey:if(this.ctlrKeyDown&&
this.onClipBoardPaste)this.onClipBoardPaste();break;case cutKey:if(this.ctlrKeyDown&&this.onClipBoardCut)this.onClipBoardCut();break}}})})},"xfile/manager/PanelManagerBase":function(){define("xfile/manager/PanelManagerBase",["dojo/_base/declare","xide/manager/ManagerBase"],function(declare,ManagerBase){return declare("xfile.manager.PanelManagerBase",[ManagerBase],{})})},"dojox/layout/GridContainer":function(){define("dojox/layout/GridContainer",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/array",
"dojo/_base/connect","dojo/_base/sniff","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/dom-construct","dojo/_base/lang","dojo/_base/window","dojo/ready","dojox/layout/GridContainerLite"],function(dojo,declare,array,connect,has,domClass,domStyle,geom,domConstruct,lang,win,ready,GridContainerLite){return declare("dojox.layout.GridContainer",GridContainerLite,{hasResizableColumns:true,liveResizeColumns:false,minColWidth:20,minChildWidth:150,mode:"right",isRightFixed:false,isLeftFixed:false,
startup:function(){this.inherited(arguments);if(this.hasResizableColumns){for(var i=0;i<this._grid.length-1;i++)this._createGrip(i);if(!this.getParent())ready(lang.hitch(this,"_placeGrips"))}},resizeChildAfterDrop:function(node,targetArea,indexChild){if(this.inherited(arguments))this._placeGrips()},onShow:function(){this.inherited(arguments);this._placeGrips()},resize:function(){this.inherited(arguments);if(this._isShown()&&this.hasResizableColumns)this._placeGrips()},_createGrip:function(index){var dropZone=
this._grid[index],grip=domConstruct.create("div",{"class":"gridContainerGrip"},this.domNode);dropZone.grip=grip;dropZone.gripHandler=[this.connect(grip,"onmouseover",function(e){var gridContainerGripShow=false;for(var i=0;i<this._grid.length-1;i++)if(domClass.contains(this._grid[i].grip,"gridContainerGripShow")){gridContainerGripShow=true;break}if(!gridContainerGripShow)domClass.replace(e.target,"gridContainerGripShow","gridContainerGrip")})[0],this.connect(grip,"onmouseout",function(e){if(!this._isResized)domClass.replace(e.target,
"gridContainerGrip","gridContainerGripShow")})[0],this.connect(grip,"onmousedown","_resizeColumnOn")[0],this.connect(grip,"ondblclick","_onGripDbClick")[0]]},_placeGrips:function(){var gripWidth,height,left=0,grip;array.forEach(this._grid,function(dropZone){if(dropZone.grip){grip=dropZone.grip;if(!gripWidth)gripWidth=grip.offsetWidth/2;left+=geom.getMarginBox(dropZone.node).w;domStyle.set(grip,"left",left-gripWidth+"px");if(!height)height=geom.getContentBox(this.gridNode).h;if(height>0)domStyle.set(grip,
"height",height+"px")}},this)},_onGripDbClick:function(){this._updateColumnsWidth(this._dragManager);this.resize()},_resizeColumnOn:function(e){this._activeGrip=e.target;this._initX=e.pageX;e.preventDefault();win.body().style.cursor="ew-resize";this._isResized=true;var tabSize=[];var grid;var i;for(i=0;i<this._grid.length;i++)tabSize[i]=geom.getContentBox(this._grid[i].node).w;this._oldTabSize=tabSize;for(i=0;i<this._grid.length;i++){grid=this._grid[i];if(this._activeGrip==grid.grip){this._currentColumn=
grid.node;this._currentColumnWidth=tabSize[i];this._nextColumn=this._grid[i+1].node;this._nextColumnWidth=tabSize[i+1]}grid.node.style.width=tabSize[i]+"px"}var calculateChildMinWidth=function(childNodes,minChild){var width=0;var childMinWidth=0;array.forEach(childNodes,function(child){if(child.nodeType==1){var objectStyle=domStyle.getComputedStyle(child);var minWidth=has("ie")?minChild:parseInt(objectStyle.minWidth);childMinWidth=minWidth+parseInt(objectStyle.marginLeft)+parseInt(objectStyle.marginRight);
if(width<childMinWidth)width=childMinWidth}});return width};var currentColumnMinWidth=calculateChildMinWidth(this._currentColumn.childNodes,this.minChildWidth);var nextColumnMinWidth=calculateChildMinWidth(this._nextColumn.childNodes,this.minChildWidth);var minPix=Math.round(geom.getMarginBox(this.gridContainerTable).w*this.minColWidth/100);this._currentMinCol=currentColumnMinWidth;this._nextMinCol=nextColumnMinWidth;if(minPix>this._currentMinCol)this._currentMinCol=minPix;if(minPix>this._nextMinCol)this._nextMinCol=
minPix;this._connectResizeColumnMove=connect.connect(win.doc,"onmousemove",this,"_resizeColumnMove");this._connectOnGripMouseUp=connect.connect(win.doc,"onmouseup",this,"_onGripMouseUp")},_onGripMouseUp:function(){win.body().style.cursor="default";connect.disconnect(this._connectResizeColumnMove);connect.disconnect(this._connectOnGripMouseUp);this._connectOnGripMouseUp=this._connectResizeColumnMove=null;if(this._activeGrip)domClass.replace(this._activeGrip,"gridContainerGrip","gridContainerGripShow");
this._isResized=false},_resizeColumnMove:function(e){e.preventDefault();if(!this._connectResizeColumnOff){connect.disconnect(this._connectOnGripMouseUp);this._connectOnGripMouseUp=null;this._connectResizeColumnOff=connect.connect(win.doc,"onmouseup",this,"_resizeColumnOff")}var d=e.pageX-this._initX;if(d==0)return;if(!(this._currentColumnWidth+d<this._currentMinCol||this._nextColumnWidth-d<this._nextMinCol)){this._currentColumnWidth+=d;this._nextColumnWidth-=d;this._initX=e.pageX;this._activeGrip.style.left=
parseInt(this._activeGrip.style.left)+d+"px";if(this.liveResizeColumns){this._currentColumn.style["width"]=this._currentColumnWidth+"px";this._nextColumn.style["width"]=this._nextColumnWidth+"px";this.resize()}}},_resizeColumnOff:function(e){win.body().style.cursor="default";connect.disconnect(this._connectResizeColumnMove);connect.disconnect(this._connectResizeColumnOff);this._connectResizeColumnOff=this._connectResizeColumnMove=null;if(!this.liveResizeColumns){this._currentColumn.style["width"]=
this._currentColumnWidth+"px";this._nextColumn.style["width"]=this._nextColumnWidth+"px"}var tabSize=[],testSize=[],tabWidth=this.gridContainerTable.clientWidth,node,update=false,i;for(i=0;i<this._grid.length;i++){node=this._grid[i].node;if(has("ie")){tabSize[i]=geom.getMarginBox(node).w;testSize[i]=geom.getContentBox(node).w}else{tabSize[i]=geom.getContentBox(node).w;testSize=tabSize}}for(i=0;i<testSize.length;i++)if(testSize[i]!=this._oldTabSize[i]){update=true;break}if(update){var mul=has("ie")?
100:1E4;for(i=0;i<this._grid.length;i++)this._grid[i].node.style.width=Math.round(100*mul*tabSize[i]/tabWidth)/mul+"%";this.resize()}if(this._activeGrip)domClass.replace(this._activeGrip,"gridContainerGrip","gridContainerGripShow");this._isResized=false},setColumns:function(nbColumns){var z,j;if(nbColumns>0){var length=this._grid.length,delta=length-nbColumns;if(delta>0){var count=[],zone,start,end,nbChildren;if(this.mode=="right"){end=this.isLeftFixed&&length>0?1:0;start=this.isRightFixed?length-
2:length-1;for(z=start;z>=end;z--){nbChildren=0;zone=this._grid[z].node;for(j=0;j<zone.childNodes.length;j++)if(zone.childNodes[j].nodeType==1&&!(zone.childNodes[j].id=="")){nbChildren++;break}if(nbChildren==0)count[count.length]=z;if(count.length>=delta){this._deleteColumn(count);break}}if(count.length<delta)connect.publish("/dojox/layout/gridContainer/noEmptyColumn",[this])}else{start=this.isLeftFixed&&length>0?1:0;end=this.isRightFixed?length-1:length;for(z=start;z<end;z++){nbChildren=0;zone=this._grid[z].node;
for(j=0;j<zone.childNodes.length;j++)if(zone.childNodes[j].nodeType==1&&!(zone.childNodes[j].id=="")){nbChildren++;break}if(nbChildren==0)count[count.length]=z;if(count.length>=delta){this._deleteColumn(count);break}}if(count.length<delta)connect.publish("/dojox/layout/gridContainer/noEmptyColumn",[this])}}else if(delta<0)this._addColumn(Math.abs(delta));if(this.hasResizableColumns)this._placeGrips()}},_addColumn:function(nbColumns){var grid=this._grid,dropZone,node,index,length,isRightMode=this.mode==
"right",accept=this.acceptTypes.join(","),m=this._dragManager;if(this.hasResizableColumns&&(!this.isRightFixed&&isRightMode||this.isLeftFixed&&!isRightMode&&this.nbZones==1))this._createGrip(grid.length-1);for(var i=0;i<nbColumns;i++){node=domConstruct.create("td",{"class":"gridContainerZone dojoxDndArea","accept":accept,"id":this.id+"_dz"+this.nbZones});length=grid.length;if(isRightMode)if(this.isRightFixed){index=length-1;grid.splice(index,0,{"node":grid[index].node.parentNode.insertBefore(node,
grid[index].node)})}else{index=length;grid.push({"node":this.gridNode.appendChild(node)})}else if(this.isLeftFixed){index=length==1?0:1;this._grid.splice(1,0,{"node":this._grid[index].node.parentNode.appendChild(node,this._grid[index].node)});index=1}else{index=length-this.nbZones;this._grid.splice(index,0,{"node":grid[index].node.parentNode.insertBefore(node,grid[index].node)})}if(this.hasResizableColumns)if(!isRightMode&&this.nbZones!=1||!isRightMode&&this.nbZones==1&&!this.isLeftFixed||isRightMode&&
i<nbColumns-1||isRightMode&&i==nbColumns-1&&this.isRightFixed)this._createGrip(index);m.registerByNode(grid[index].node);this.nbZones++}this._updateColumnsWidth(m)},_deleteColumn:function(indices){var child,grid,index,nbDelZones=0,length=indices.length,m=this._dragManager;for(var i=0;i<length;i++){index=this.mode=="right"?indices[i]:indices[i]-nbDelZones;grid=this._grid[index];if(this.hasResizableColumns&&grid.grip){array.forEach(grid.gripHandler,function(handler){connect.disconnect(handler)});domConstruct.destroy(this.domNode.removeChild(grid.grip));
grid.grip=null}m.unregister(grid.node);domConstruct.destroy(this.gridNode.removeChild(grid.node));this._grid.splice(index,1);this.nbZones--;nbDelZones++}var lastGrid=this._grid[this.nbZones-1];if(lastGrid.grip){array.forEach(lastGrid.gripHandler,connect.disconnect);domConstruct.destroy(this.domNode.removeChild(lastGrid.grip));lastGrid.grip=null}this._updateColumnsWidth(m)},_updateColumnsWidth:function(manager){this.inherited(arguments);manager._dropMode.updateAreas(manager._areaList)},destroy:function(){connect.unsubscribe(this._dropHandler);
this.inherited(arguments)}})})},"xfile/views/PreviewEditor":function(){define("xfile/views/PreviewEditor",["dojo/_base/array","dojo/_base/declare","dojo/_base/html","dojo/on","dojo/_base/lang","dojo/dom-geometry","xide/widgets/TemplatedWidgetBase","xide/utils"],function(array,declare,html,on,lang,domGeometry,TemplatedWidgetBase,utils){return declare("xfile.views.PreviewEditor",[TemplatedWidgetBase],{wFloatingPane:null,closeable:true,moduleView:null,didStartup:false,ckEditorRoot:null,ckEditor:null,
editorControlsRoot:null,btnSave:null,title:null,dataItem:null,content:null,titleWidget:null,dataRef:null,sourceType:null,dataName:null,saveButton:true,titleEdit:true,editorContent:null,getContent:function(){if(this.ckEditor)return this.ckEditor.getData();return null},templateString:"\x3cdiv class\x3d'editorRoot' data-dojo-type\x3d'dijit.layout.ContentPane' title\x3d'${!title}' closable\x3d'true' data-dojo-attach-point\x3d'wFloatingPane' style\x3d''\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.layout.ContentPane'\x3e"+
"\x3cdiv data-dojo-attach-point\x3d'ckEditorRoot' style\x3d''\x3e\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e",createEditorControls:function(){},onHide:function(){},onClose:function(){this.ckEditor.destroy();utils.destroyWidget(this.ckEditor);utils.destroyWidget(this);this.inherited(arguments)},destroy:function(){},attachCKEditor:function(){var thiz=this;this.ckEditorRoot.id=this.id+"_Editor";var rootId=this.ckEditorRoot.id;this.ckEditor=CKEDITOR.replace(rootId,{removePlugins:"docprops,colordialog,div,link,scayt,showblocks,specialchar,devtools,pastefromword,pastetext,iframe,iframedialog,liststyle,wsc,styles,find,smiley,source,styles,fonts,table,tableresize,templates,flash,iframe,image,link,forms,div,pagebreak,styles,xml,scayt,showblocks,uicolor",
startupFocus:true,on:{instanceReady:function(ev){this.focus()}}});this.ckEditor.setData(this.content);this.ckEditor.focus();setTimeout(function(){thiz.ckEditor.focus()},2E3)},saveContentCB:function(thiz,res){},saveContent:function(){var refId=utils.toInt(this.dataItem.uid);var content=this.ckEditor.getData();if(sctx&&sctx.getContentManager&&sctx.getContentManager())var newId=sctx.getContentManager().saveContent(this,this.saveContentCB,refId,content,"Content",this.titleWidget.value)},startup:function(){if(this.didStartup)return;
this.set("closable",true);this.inherited(arguments);this.didStartup=true;this.attachCKEditor()}})})},"xide/widgets/ToolTipMixin":function(){define(["dojo/_base/declare","xide/utils","dijit/Tooltip"],function(declare,utils,Tooltip){return declare("xide.widgets.ToolTipMixin",null,{ttMaxCount:3,initToolTip:function(text,maxCount,delay){if(!text)return;var str=text.replace(/\n/g,"\x3cbr/\x3e");if(maxCount!=null)this.ttMaxCount=maxCount;if(str&&utils.isValidString(str)){this["tt"]=new Tooltip({innerHTML:str,
showDelay:delay!=null?delay:1500});this["tt"].startup();this["tt"].addTarget(this.getTooltipNode?this.getTooltipNode():this.domNode)}}})})},"dgrid/Grid":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/on","dojo/has","put-selector/put","./List","./util/misc","dojo/_base/sniff"],function(kernel,declare,listen,has,put,List,miscUtil){var contentBoxSizing=has("ie")<8&&!has("quirks");function appendIfNode(parent,subNode){if(subNode&&subNode.nodeType)parent.appendChild(subNode)}function replaceInvalidChars(str){return miscUtil.escapeCssIdentifier(str,
"-")}var Grid=declare(List,{columns:null,cellNavigation:true,tabableHeader:false,showHeader:true,column:function(target){if(typeof target!="object")return this.columns[target];else return this.cell(target).column},listType:"grid",cell:function(target,columnId){if(target.column&&target.element)return target;if(target.target&&target.target.nodeType)target=target.target;var element;if(target.nodeType){var object;do{if(this._rowIdToObject[target.id])break;var colId=target.columnId;if(colId){columnId=
colId;element=target;break}target=target.parentNode}while(target&&target!=this.domNode)}if(!element&&typeof columnId!="undefined"){var row=this.row(target),rowElement=row&&row.element;if(rowElement){var elements=rowElement.getElementsByTagName("td");for(var i=0;i<elements.length;i++)if(elements[i].columnId==columnId){element=elements[i];break}}}if(target!=null)return{row:row||this.row(target),column:columnId&&this.column(columnId),element:element}},createRowCells:function(tag,each,subRows,object){var row=
put("table.dgrid-row-table[role\x3dpresentation]"),cellNavigation=this.cellNavigation,tbody=has("ie")<9||has("quirks")?put(row,"tbody"):row,tr,si,sl,i,l,subRow,column,id,extraClasses,className,cell,innerCell,colSpan,rowSpan;subRows=subRows||this.subRows;for(si=0,sl=subRows.length;si<sl;si++){subRow=subRows[si];tr=put(tbody,"tr");if(subRow.className)put(tr,"."+subRow.className);for(i=0,l=subRow.length;i<l;i++){column=subRow[i];id=column.id;extraClasses=column.field?".field-"+replaceInvalidChars(column.field):
"";className=typeof column.className==="function"?column.className(object):column.className;if(className)extraClasses+="."+className;cell=put(tag+(".dgrid-cell.dgrid-cell-padding"+(id?".dgrid-column-"+replaceInvalidChars(id):"")+extraClasses.replace(/ +/g,"."))+"[role\x3d"+(tag==="th"?"columnheader":"gridcell")+"]");cell.columnId=id;if(contentBoxSizing){innerCell=put(cell,"!dgrid-cell-padding div.dgrid-cell-padding");cell.contents=innerCell}else innerCell=cell;colSpan=column.colSpan;if(colSpan)cell.colSpan=
colSpan;rowSpan=column.rowSpan;if(rowSpan)cell.rowSpan=rowSpan;each(innerCell,column);tr.appendChild(cell)}}return row},left:function(cell,steps){if(!cell.element)cell=this.cell(cell);return this.cell(this._move(cell,-(steps||1),"dgrid-cell"))},right:function(cell,steps){if(!cell.element)cell=this.cell(cell);return this.cell(this._move(cell,steps||1,"dgrid-cell"))},renderRow:function(object,options){var self=this;var row=this.createRowCells("td",function(td,column){var data=object;if(column.get)data=
column.get(object);else if("field"in column&&column.field!="_item")data=data[column.field];if(column.renderCell)appendIfNode(td,column.renderCell(object,data,td,options));else defaultRenderCell.call(column,object,data,td,options)},options&&options.subRows,object);return put("div[role\x3drow]\x3e",row)},renderHeader:function(){var grid=this,columns=this.columns,headerNode=this.headerNode,i=headerNode.childNodes.length;headerNode.setAttribute("role","row");while(i--)put(headerNode.childNodes[i],"!");
var row=this.createRowCells("th",function(th,column){var contentNode=column.headerNode=th;if(contentBoxSizing)th=th.parentNode;var field=column.field;if(field)th.field=field;if(column.renderHeaderCell)appendIfNode(contentNode,column.renderHeaderCell(contentNode));else if("label"in column||column.field)contentNode.appendChild(document.createTextNode("label"in column?column.label:column.field));if(column.sortable!==false&&field&&field!="_item"){th.sortable=true;th.className+=" dgrid-sortable"}},this.subRows&&
this.subRows.headerRows);this._rowIdToObject[row.id=this.id+"-header"]=this.columns;headerNode.appendChild(row);if(this._sortListener)this._sortListener.remove();this._sortListener=listen(row,"click,keydown",function(event){if(event.type=="click"||event.keyCode==32||!has("opera")&&event.keyCode==13){var target=event.target,field,sort,newSort,eventObj;do if(target.sortable){newSort=[{attribute:field=target.field||target.columnId,descending:(sort=grid._sort[0])&&sort.attribute==field&&!sort.descending}];
eventObj={bubbles:true,cancelable:true,grid:grid,parentType:event.type,sort:newSort};if(listen.emit(event.target,"dgrid-sort",eventObj)){grid._sortNode=target;grid.set("sort",newSort)}break}while((target=target.parentNode)&&target!=headerNode)}})},resize:function(){var headerTableNode=this.headerNode.firstChild,contentNode=this.contentNode,width;this.inherited(arguments);if(!has("ie")||has("ie")>7&&!has("quirks")){contentNode.style.width="";if(contentNode&&headerTableNode)if((width=headerTableNode.offsetWidth)!=
contentNode.offsetWidth)contentNode.style.width=width+"px"}},destroy:function(){this._destroyColumns();if(this._sortListener)this._sortListener.remove();this.inherited(arguments)},_setSort:function(property,descending){this.inherited(arguments);this.updateSortArrow(this._sort)},updateSortArrow:function(sort,updateSort){if(this._lastSortedArrow){put(this._lastSortedArrow,"\x3c!dgrid-sort-up!dgrid-sort-down");put(this._lastSortedArrow,"!");delete this._lastSortedArrow}if(updateSort)this._sort=sort;
if(!sort[0])return;var prop=sort[0].attribute,desc=sort[0].descending,target=this._sortNode,columns,column,i;delete this._sortNode;if(!target){columns=this.columns;for(i in columns){column=columns[i];if(column.field==prop){target=column.headerNode;break}}}if(target){target=target.contents||target;this._lastSortedArrow=put(target.firstChild,"-div.dgrid-sort-arrow.ui-icon[role\x3dpresentation]");this._lastSortedArrow.innerHTML="\x26nbsp;";put(target,desc?".dgrid-sort-down":".dgrid-sort-up");this.resize()}},
styleColumn:function(colId,css){return this.addCssRule("#"+miscUtil.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+replaceInvalidChars(colId),css)},_configColumns:function(prefix,rowColumns){var subRow=[],isArray=rowColumns instanceof Array;function configColumn(column,columnId){if(typeof column=="string")rowColumns[columnId]=column={label:column};if(!isArray&&!column.field)column.field=columnId;columnId=column.id=column.id||(isNaN(columnId)?columnId:prefix+columnId);if(this._configColumn){this._configColumn(column,
columnId,rowColumns,prefix);columnId=column.id}if(isArray)this.columns[columnId]=column;column.grid=this;if(typeof column.init==="function")column.init();subRow.push(column)}miscUtil.each(rowColumns,configColumn,this);return isArray?rowColumns:subRow},_destroyColumns:function(){var subRows=this.subRows,subRowsLength=subRows&&subRows.length,i,j,column,len;this.cleanup();for(i=0;i<subRowsLength;i++)for(j=0,len=subRows[i].length;j<len;j++){column=subRows[i][j];if(typeof column.destroy==="function")column.destroy()}},
configStructure:function(){var subRows=this.subRows,columns=this._columns=this.columns;this.columns=!columns||columns instanceof Array?{}:columns;if(subRows)for(var i=0;i<subRows.length;i++)subRows[i]=this._configColumns(i+"-",subRows[i]);else this.subRows=[this._configColumns("",columns)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(columns){this._destroyColumns();this.subRows=null;this.columns=columns;this._updateColumns()},_setSubRows:function(subrows){this._destroyColumns();
this.subRows=subrows;this._updateColumns()},setColumns:function(columns){kernel.deprecated("setColumns(...)",'use set("columns", ...) instead',"dgrid 0.4");this.set("columns",columns)},setSubRows:function(subrows){kernel.deprecated("setSubRows(...)",'use set("subRows", ...) instead',"dgrid 0.4");this.set("subRows",subrows)},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);if(this._started)if(this._sort&&
this._sort.length)this.updateSortArrow(this._sort);else this.resize()}});function defaultRenderCell(object,data,td,options){if(this.formatter){var formatter=this.formatter,formatterScope=this.grid.formatterScope;td.innerHTML=typeof formatter==="string"&&formatterScope?formatterScope[formatter](data,object):this.formatter(data,object)}else if(data!=null)td.appendChild(document.createTextNode(data))}Grid.appendIfNode=appendIfNode;Grid.defaultRenderCell=defaultRenderCell;return Grid})},"dojo/data/util/sorter":function(){define("dojo/data/util/sorter",
["../../_base/lang"],function(lang){var sorter={};lang.setObject("dojo.data.util.sorter",sorter);sorter.basicComparator=function(a,b){var r=-1;if(a===null)a=undefined;if(b===null)b=undefined;if(a==b)r=0;else if(a>b||a==null)r=1;return r};sorter.createSortFunction=function(sortSpec,store){var sortFunctions=[];function createSortFunction(attr,dir,comp,s){return function(itemA,itemB){var a=s.getValue(itemA,attr);var b=s.getValue(itemB,attr);return dir*comp(a,b)}}var sortAttribute;var map=store.comparatorMap;
var bc=sorter.basicComparator;for(var i=0;i<sortSpec.length;i++){sortAttribute=sortSpec[i];var attr=sortAttribute.attribute;if(attr){var dir=sortAttribute.descending?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&"toString"in attr)attr=attr.toString();comp=map[attr]||bc}sortFunctions.push(createSortFunction(attr,dir,comp,store))}}return function(rowA,rowB){var i=0;while(i<sortFunctions.length){var ret=sortFunctions[i++](rowA,rowB);if(ret!==0)return ret}return 0}};return sorter})},"dgrid/util/misc":function(){define(["put-selector/put"],
function(put){var extraRules=[],extraSheet,removeMethod,rulesProperty,invalidCssChars=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g;function removeRule(index){var realIndex=extraRules[index],i,l;if(realIndex===undefined)return;extraSheet[removeMethod](realIndex);extraRules[index]=undefined;for(i=index+1,l=extraRules.length;i<l;i++)if(extraRules[i]>realIndex)extraRules[i]--}var util={defaultDelay:15,throttle:function(cb,context,delay){var ran=false;delay=delay||util.defaultDelay;return function(){if(ran)return;
ran=true;cb.apply(context,arguments);setTimeout(function(){ran=false},delay)}},throttleDelayed:function(cb,context,delay){var ran=false;delay=delay||util.defaultDelay;return function(){if(ran)return;ran=true;var a=arguments;setTimeout(function(){ran=false;cb.apply(context,a)},delay)}},debounce:function(cb,context,delay){var timer;delay=delay||util.defaultDelay;return function(){if(timer){clearTimeout(timer);timer=null}var a=arguments;timer=setTimeout(function(){cb.apply(context,a)},delay)}},each:function(arrayOrObject,
callback,context){var i,len;if(!arrayOrObject)return;if(typeof arrayOrObject.length==="number")for(i=0,len=arrayOrObject.length;i<len;i++)callback.call(context,arrayOrObject[i],i,arrayOrObject);else for(i in arrayOrObject)callback.call(context,arrayOrObject[i],i,arrayOrObject)},addCssRule:function(selector,css){if(!extraSheet){extraSheet=put(document.getElementsByTagName("head")[0],"style");extraSheet=extraSheet.sheet||extraSheet.styleSheet;removeMethod=extraSheet.deleteRule?"deleteRule":"removeRule";
rulesProperty=extraSheet.cssRules?"cssRules":"rules"}var index=extraRules.length;extraRules[index]=(extraSheet.cssRules||extraSheet.rules).length;extraSheet.addRule?extraSheet.addRule(selector,css):extraSheet.insertRule(selector+"{"+css+"}",extraRules[index]);return{get:function(prop){return extraSheet[rulesProperty][extraRules[index]].style[prop]},set:function(prop,value){if(typeof extraRules[index]!=="undefined")extraSheet[rulesProperty][extraRules[index]].style[prop]=value},remove:function(){removeRule(index)}}},
escapeCssIdentifier:function(id,replace){return id.replace(invalidCssChars,replace||"\\$1")}};return util})},"xwordpress/GUIALL":function(){define("xwordpress/GUIALL",["dojo/_base/declare","xide/factory/Widgets","dojox/widget/Standby","xfile/factory","xfile/factory/model","xfile/factory/views","xfile/views/ToggleSplitter","xstyle/has-class","xide/factory","xide/factory/Widgets","xide/factory/Views","dgrid/util/touch","dgrid/TouchScroll","dgrid/extensions/_DnD-touch-autoscroll"],function(declare){return declare("xwordpress.GUIALL",
null,{})})},"xwordpress/Imports/DijitImports":function(){define("xwordpress/Imports/DijitImports",["dojo/_base/declare","dijit/Dialog","dijit/layout/BorderContainer","dijit/layout/AccordionContainer","dijit/layout/TabContainer","dijit/layout/LayoutContainer","dijit/layout/StackContainer","dijit/Toolbar","dijit/_editor/plugins/FontChoice","dijit/ToolbarSeparator","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/Button","dijit/form/ComboButton","dijit/form/TextBox",
"dijit/form/ValidationTextBox","dijit/form/CheckBox","dijit/form/Select","dijit/form/DropDownButton","dijit/form/NumberSpinner","dijit/form/RadioButton","dijit/InlineEditBox","dijit/TooltipDialog","dijit/form/HorizontalSlider","dijit/ProgressBar","dijit/PopupMenuItem"],function(declare,Dialog,BorderContainer,AccordionContainer,TabContainer,LayoutContainer,StackContainer,Toolbar,FontChoice,ToolbarSeparator,Widget,_TemplatedMixin,_WidgetsInTemplateMixin,Button,ComboButton,TextBox,ValidationTextBox,
Checkbox,Select,DropDownButton,NumberSpinner,RadioButton,InlineEditBox,TooltipDialog,HorizontalSlider,ProgressBar,PopupMenuItem){return declare("xwordpress.Imports.DijitImports",null,{constructor:function(){}})})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(has,win){if(has("ie")<=7)try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}var dom={};if(has("ie"))dom.byId=function(id,doc){if(typeof id!="string")return id;var _d=doc||win.doc,te=id&&_d.getElementById(id);
if(te&&(te.attributes.id.value==id||te.id==id))return te;else{var eles=_d.all[id];if(!eles||eles.nodeName)eles=[eles];var i=0;while(te=eles[i++])if(te.attributes&&te.attributes.id&&te.attributes.id.value==id||te.id==id)return te}};else dom.byId=function(id,doc){return(typeof id=="string"?(doc||win.doc).getElementById(id):id)||null};dom.isDescendant=function(node,ancestor){try{node=dom.byId(node);ancestor=dom.byId(ancestor);while(node){if(node==ancestor)return true;node=node.parentNode}}catch(e){}return false};
has.add("css-user-select",function(global,doc,element){if(!element)return false;var style=element.style;var prefixes=["Khtml","O","ms","Moz","Webkit"],i=prefixes.length,name="userSelect",prefix;do if(typeof style[name]!=="undefined")return name;while(i--&&(name=prefixes[i]+"UserSelect"));return false});var cssUserSelect=has("css-user-select");dom.setSelectable=cssUserSelect?function(node,selectable){dom.byId(node).style[cssUserSelect]=selectable?"":"none"}:function(node,selectable){node=dom.byId(node);
var nodes=node.getElementsByTagName("*"),i=nodes.length;if(selectable){node.removeAttribute("unselectable");while(i--)nodes[i].removeAttribute("unselectable")}else{node.setAttribute("unselectable","on");while(i--)nodes[i].setAttribute("unselectable","on")}};return dom})},"dojo/window":function(){define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style"],function(lang,has,baseWindow,dom,geom,style){var window={getBox:function(doc){doc=doc||baseWindow.doc;var scrollRoot=
doc.compatMode=="BackCompat"?baseWindow.body(doc):doc.documentElement,scroll=geom.docScroll(doc),w,h;if(has("touch")){var uiWindow=window.get(doc);w=uiWindow.innerWidth||scrollRoot.clientWidth;h=uiWindow.innerHeight||scrollRoot.clientHeight}else{w=scrollRoot.clientWidth;h=scrollRoot.clientHeight}return{l:scroll.x,t:scroll.y,w:w,h:h}},get:function(doc){if(has("ie")&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var win=doc._parentWindow;
doc._parentWindow=null;return win}return doc.parentWindow||doc.defaultView},scrollIntoView:function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||baseWindow.doc,body=baseWindow.body(doc),html=doc.documentElement||body.parentNode,isIE=has("ie"),isWK=has("webkit");if((!(has("mozilla")||isIE||isWK||has("opera"))||node==body||node==html)&&typeof node.scrollIntoView!="undefined"){node.scrollIntoView(false);return}var backCompat=doc.compatMode=="BackCompat",clientAreaRoot=isIE>=9&&"frameElement"in
node.ownerDocument.parentWindow?html.clientHeight>0&&html.clientWidth>0&&(body.clientHeight==0||body.clientWidth==0||body.clientHeight>html.clientHeight||body.clientWidth>html.clientWidth)?html:body:backCompat?body:html,scrollRoot=isWK?body:clientAreaRoot,rootWidth=clientAreaRoot.clientWidth,rootHeight=clientAreaRoot.clientHeight,rtl=!geom.isBodyLtr(doc),nodePos=pos||geom.position(node),el=node.parentNode,isFixed=function(el){return isIE<=6||isIE&&backCompat?false:style.get(el,"position").toLowerCase()==
"fixed"};if(isFixed(node))return;while(el){if(el==body)el=scrollRoot;var elPos=geom.position(el),fixedPos=isFixed(el);if(el==scrollRoot){elPos.w=rootWidth;elPos.h=rootHeight;if(scrollRoot==html&&isIE&&rtl)elPos.x+=scrollRoot.offsetWidth-elPos.w;if(elPos.x<0||!isIE)elPos.x=0;if(elPos.y<0||!isIE)elPos.y=0}else{var pb=geom.getPadBorderExtents(el);elPos.w-=pb.w;elPos.h-=pb.h;elPos.x+=pb.l;elPos.y+=pb.t;var clientSize=el.clientWidth,scrollBarSize=elPos.w-clientSize;if(clientSize>0&&scrollBarSize>0){elPos.w=
clientSize;elPos.x+=rtl&&(isIE||el.clientLeft>pb.l)?scrollBarSize:0}clientSize=el.clientHeight;scrollBarSize=elPos.h-clientSize;if(clientSize>0&&scrollBarSize>0)elPos.h=clientSize}if(fixedPos){if(elPos.y<0){elPos.h+=elPos.y;elPos.y=0}if(elPos.x<0){elPos.w+=elPos.x;elPos.x=0}if(elPos.y+elPos.h>rootHeight)elPos.h=rootHeight-elPos.y;if(elPos.x+elPos.w>rootWidth)elPos.w=rootWidth-elPos.x}var l=nodePos.x-elPos.x,t=nodePos.y-Math.max(elPos.y,0),r=l+nodePos.w-elPos.w,bot=t+nodePos.h-elPos.h;if(r*l>0){var s=
Math[l<0?"max":"min"](l,r);if(rtl&&(isIE==8&&!backCompat||isIE>=9))s=-s;nodePos.x+=el.scrollLeft;el.scrollLeft+=s;nodePos.x-=el.scrollLeft}if(bot*t>0){nodePos.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);nodePos.y-=el.scrollTop}el=el!=scrollRoot&&!fixedPos&&el.parentNode}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false)}}};1&&lang.setObject("dojo.window",window);return window})},"xfile/widgets/Image":function(){define("xfile/widgets/Image",["dojo/_base/declare",
"dojo/dom-construct","xide/widgets/TemplatedWidgetBase","xide/widgets/_CSSMixin","xide/utils","xide/factory","xide/types"],function(declare,domConstruct,TemplatedWidgetBase,CSSMixin,utils,factory,types){return declare("xfile.widgets.Image",[TemplatedWidgetBase,CSSMixin],{baseClass:"mediaImage",backgroundClass:"imageBackground",tag:"div",src:null,imageNode:null,layoutContainer:null,hasLightBox:true,lightbox:null,lightboxNano:true,templateString:"\x3cdiv\x3e\x3c/div\x3e",triggerOnLoad:true,_openLightBox:function(href){var thiz=
this;if(!this.lightboxNano){if(!this.lightbox){this.lightbox=new LightboxDialog({style:"margin-top:0px !important;",modal:true,_allowPassthru:true});this.lightbox.startup();this.lightbox.connect("onclick",function(){try{thiz.lightbox.hide()}catch(e){}})}this.lightbox.show({leaveTitle:true,href:href,title:""});setTimeout(function(){thiz.lightbox.resize()},1500)}else;},_onImageLoaded:function(img,src){this.publish(types.EVENTS.IMAGE_LOADED,null,this)},_onImageError:function(img){if(img){utils.destroyWidget(img);
this.publish(types.EVENTS.IMAGE_ERROR,null,this)}},buildRendering:function(){this.inherited(arguments);this.domNode=domConstruct.create(this.tag,{className:this.backgroundClass})},startup:function(){var thiz=this;if(!this.imageNode){this.imageNode=domConstruct.create("img",{className:this.baseClass+"",src:this.src},this.domNode);if(this.triggerOnLoad)this.imageNode["onload"]=function(){thiz._onImageLoaded(thiz.imageNode,thiz.src)};this.imageNode["onerror"]=function(){thiz._onImageError(thiz.imageNode)}}}})})},
"xblox/widgets/AddBlockWidget":function(){define("xblox/widgets/AddBlockWidget",["dojo/_base/declare","dojo/_base/html","dojo/dom-class","dojo/on","xide/widgets/TemplatedWidgetBase","xfile/types/Types","xide/factory","dijit/MenuItem","dijit/MenuSeparator","dojo/aspect"],function(declare,html,domClass,on,TemplatedWidgetBase,types,factory,MenuItem,MenuSeparator,aspect){return declare("xblocks.widgets.AddBlockWidget",[TemplatedWidgetBase],{wButton:null,wThumb:null,wList:null,wTree:null,layout:null,menu:null,
_didCreateDefaultItems:false,addJQueryClasses:true,menuItems:null,firstItem:null,templateString:"\x3cdiv\x3e\x3cdiv class\x3d'addBlockSelector' data-dojo-type\x3d'dijit.form.DropDownButton' data-dojo-props\x3d\"iconClass:'el-icon-plus-sign'\" data-dojo-attach-point\x3d'wButton'\x3e"+"\x3cspan\x3e\x3c/span\x3e"+"\x3cdiv data-dojo-attach-point\x3d'menu' data-dojo-type\x3d'dijit.Menu' style\x3d'display: none;'\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e",_patchMenu:function(widget){var thiz=this;
aspect.after(widget,"onOpen",function(){if(this._popupWrapper&&this._popupWrapper){var dst=this._popupWrapper;domClass.add(dst,"ui-menu ui-widget ui-widget-content")}})},open:function(){this.wButton.domNode.focus();this.wButton.openDropDown();if(this.firstItem)this.firstItem.focus()},postMixInProperties:function(){this.inherited(arguments)},_defaultItems:function(){var items=[];return items},onMenuItemClick:function(menuItem){if(menuItem.item.handler){menuItem.item.handler();return}try{this.delegate.addItem(menuItem)}catch(e){debugger}},
fixButton:function(button){if(button&&button.iconNode){domClass.add(button.domNode,"ui-menu-item");domClass.remove(button.iconNode,"dijitReset");domClass.add(button.iconNode,"actionToolbarButtonElusive")}},_addHandler:function(menuItem,item){var thiz=this;dojo.connect(menuItem,"onClick",function(){thiz.onMenuItemClick(menuItem)})},createMenuItem:function(itemData,index){var icon=itemData.icon||itemData.iconClass||"fileSelectDiscIcon";var subItems=itemData.items;var thiz=this;if(subItems&&subItems.length>
0){var pSubMenu=new dijit.Menu({parentMenu:this.menu});this._patchMenu(pSubMenu);for(var i=0;i<subItems.length;i++){var subItem=new MenuItem({item:subItems[i],iconClass:subItems[i].iconClass,label:subItems[i].name,owner:itemData});pSubMenu.addChild(subItem);this._addHandler(subItem,subItems[i])}this.menu.addChild(new dijit.PopupMenuItem({label:itemData.label||itemData.name,popup:pSubMenu,iconClass:icon}));return pSubMenu}else{var menuItem=new MenuItem({item:itemData,iconClass:icon,label:itemData.label||
itemData.name});this.menu.addChild(menuItem);dojo.connect(menuItem,"onClick",function(){thiz.onMenuItemClick(menuItem)});this.fixButton(menuItem);return menuItem}},_createDefaultItems:function(){this.menuItems=[];this.firstItem=null;var actions=this.delegate.getAddActions(this.item)||this._defaultItems();for(var i=0;i<actions.length;i++){var menuItem=this.createMenuItem(actions[i],i+1);if(!this.firstItem)this.firstItem=menuItem;this.menuItems.push(menuItem)}this.wButton.set("disabled",!(actions&&
actions.length>0));this._didCreateDefaultItems=true},onOpen:function(){if(!this._didCreateDefaultItems)this._createDefaultItems()},startup:function(){try{this.inherited(arguments);if(!this._didCreateDefaultItems)this._createDefaultItems();if(this.addJQueryClasses)domClass.add(this.menu.containerNode,"addBlockMenu ui-menu ui-widget ui-widget-content ui-corner-all");this.fixButton(this.wButton);this._patchMenu(this.menu)}catch(e){debugger}}})})},"xfile/views/ActionDialog":function(){define("xfile/views/ActionDialog",
["dojo/_base/declare","xide/views/ActionDialog"],function(declare,ActionDialog){return declare("xfile.views.ActionDialog",[ActionDialog],{resizeToContent:false,autofocus:true,resizeable:true})})},"xlog/widgets/RowDetailEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/_Widget","xide/widgets/TemplatedWidgetBase","xide/widgets/ToolTipMixin","xide/mixins/EventedMixin","xide/mixins/ReloadMixin"],function(declare,lang,_Widget,TemplatedWidgetBase,ToolTipMixin,EventedMixin,ReloadMixin){return declare("xlog.widgets.RowDetailEditor",
[_Widget,TemplatedWidgetBase,EventedMixin,ReloadMixin,ToolTipMixin],{_didRenderBlock:false,containerNode:null,debug:true,highlightDelay:1200,_isHighLighting:false,getRootId:function(){return this.id},getTooltipNode:function(){return this.containerNode},templateString:"\x3cdiv data-dojo-attach-point\x3d'root' class\x3d'' style\x3d''\x3e"+"\x3cdiv data-dojo-attach-point\x3d'containerNode'\x3eno set\x3c/div\x3e"+"\x3c/div\x3e",_createJSONEditor:function(data){var pdiv=dojo.doc.createElement("div");this.containerNode.appendChild(pdiv);
var options={mode:"view",search:false,change:false};this.editor=new JSONEditor(pdiv,options);this.editor.set(data);this.editor.collapseAll()},renderObject:function(block){if(!this.containerNode)return;dojo.empty(this.containerNode);this._createJSONEditor(block)},renderString:function(string){if(!this.containerNode)return;dojo.empty(this.containerNode);var pdiv=dojo.doc.createElement("span",{innerHTML:string});this.containerNode.appendChild(pdiv)},onReloaded:function(){this._didRenderBlock=false;if(this.containerNode)dojo.empty(this.containerNode);
this.renderBlock(this.object)},startup:function(){this.inherited(arguments);try{if(!this._didRenderBlock)if(this.object&&this.object.details){var details=this.object.details;if(lang.isObject(details)){var cache=[];var _serialized=JSON.stringify(details,function(key,value){if(typeof value==="function"||typeof value==="undefined")return;if(key==="_events"||key==="_inherited"||key==="scope"||key==="store"||key==="__inherited"||key==="delegate"||key==="owner"||key==="domNode"||key==="containerNode"||
key[0]==="_")return;if(value==null)return;if(value["declaredClass"]!=null)return;var _type=typeof value;if(typeof value==="object"&&value!==null){if(cache.indexOf(value)!==-1)return;cache.push(value)}return value});cache=null;if(_serialized)details=dojo.fromJson(_serialized);if(lang.isArray(details)&&details.length===0)return"";this.renderObject(details)}else if(lang.isString)this.renderString(this.object.details)}else;this._didRenderBlock=true}catch(e){console.error("log detail failed! "+e)}}})})},
"dojo/_base/lang":function(){define("dojo/_base/lang",["./kernel","../has","../sniff"],function(dojo,has){has.add("bug-for-in-skips-shadowed",function(){for(var i in{toString:1})return 0;return 1});var _extraNames=has("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],_extraLen=_extraNames.length,getProp=function(parts,create,context){var p,i=0,dojoGlobal=dojo.global;if(!context)if(!parts.length)return dojoGlobal;
else{p=parts[i++];try{context=dojo.scopeMap[p]&&dojo.scopeMap[p][1]}catch(e){}context=context||(p in dojoGlobal?dojoGlobal[p]:create?dojoGlobal[p]={}:undefined)}while(context&&(p=parts[i++]))context=p in context?context[p]:create?context[p]={}:undefined;return context},opts=Object.prototype.toString,efficient=function(obj,offset,startWith){return(startWith||[]).concat(Array.prototype.slice.call(obj,offset||0))},_pattern=/\{([^\}]+)\}/g;var lang={_extraNames:_extraNames,_mixin:function(dest,source,
copyFunc){var name,s,i,empty={};for(name in source){s=source[name];if(!(name in dest)||dest[name]!==s&&(!(name in empty)||empty[name]!==s))dest[name]=copyFunc?copyFunc(s):s}if(has("bug-for-in-skips-shadowed"))if(source)for(i=0;i<_extraLen;++i){name=_extraNames[i];s=source[name];if(!(name in dest)||dest[name]!==s&&(!(name in empty)||empty[name]!==s))dest[name]=copyFunc?copyFunc(s):s}return dest},mixin:function(dest,sources){if(!dest)dest={};for(var i=1,l=arguments.length;i<l;i++)lang._mixin(dest,arguments[i]);
return dest},setObject:function(name,value,context){var parts=name.split("."),p=parts.pop(),obj=getProp(parts,true,context);return obj&&p?obj[p]=value:undefined},getObject:function(name,create,context){return getProp(name.split("."),create,context)},exists:function(name,obj){return lang.getObject(name,false,obj)!==undefined},isString:function(it){return typeof it=="string"||it instanceof String},isArray:function(it){return it&&(it instanceof Array||typeof it=="array")},isFunction:function(it){return opts.call(it)===
"[object Function]"},isObject:function(it){return it!==undefined&&(it===null||typeof it=="object"||lang.isArray(it)||lang.isFunction(it))},isArrayLike:function(it){return it&&it!==undefined&&!lang.isString(it)&&!lang.isFunction(it)&&!(it.tagName&&it.tagName.toLowerCase()=="form")&&(lang.isArray(it)||isFinite(it.length))},isAlien:function(it){return it&&!lang.isFunction(it)&&/\{\s*\[native code\]\s*\}/.test(String(it))},extend:function(ctor,props){for(var i=1,l=arguments.length;i<l;i++)lang._mixin(ctor.prototype,
arguments[i]);return ctor},_hitchArgs:function(scope,method){var pre=lang._toArray(arguments,2);var named=lang.isString(method);return function(){var args=lang._toArray(arguments);var f=named?(scope||dojo.global)[method]:method;return f&&f.apply(scope||this,pre.concat(args))}},hitch:function(scope,method){if(arguments.length>2)return lang._hitchArgs.apply(dojo,arguments);if(!method){method=scope;scope=null}if(lang.isString(method)){scope=scope||dojo.global;if(!scope[method])throw['lang.hitch: scope["',
method,'"] is null (scope\x3d"',scope,'")'].join("");return function(){return scope[method].apply(scope,arguments||[])}}return!scope?method:function(){return method.apply(scope,arguments||[])}},delegate:function(){function TMP(){}return function(obj,props){TMP.prototype=obj;var tmp=new TMP;TMP.prototype=null;if(props)lang._mixin(tmp,props);return tmp}}(),_toArray:has("ie")?function(){function slow(obj,offset,startWith){var arr=startWith||[];for(var x=offset||0;x<obj.length;x++)arr.push(obj[x]);return arr}
return function(obj){return(obj.item?slow:efficient).apply(this,arguments)}}():efficient,partial:function(method){var arr=[null];return lang.hitch.apply(dojo,arr.concat(lang._toArray(arguments)))},clone:function(src){if(!src||typeof src!="object"||lang.isFunction(src))return src;if(src.nodeType&&"cloneNode"in src)return src.cloneNode(true);if(src instanceof Date)return new Date(src.getTime());if(src instanceof RegExp)return new RegExp(src);var r,i,l;if(lang.isArray(src)){r=[];for(i=0,l=src.length;i<
l;++i)if(i in src)r.push(lang.clone(src[i]))}else r=src.constructor?new src.constructor:{};return lang._mixin(r,src,lang.clone)},trim:String.prototype.trim?function(str){return str.trim()}:function(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(tmpl,map,pattern){return tmpl.replace(pattern||_pattern,lang.isFunction(map)?map:function(_,k){return lang.getObject(k,false,map)})}};1&&lang.mixin(dojo,lang);return lang})},"dojo/sniff":function(){define(["./has"],function(has){if(1){var n=
navigator,dua=n.userAgent,dav=n.appVersion,tv=parseFloat(dav);has.add("air",dua.indexOf("AdobeAIR")>=0),has.add("khtml",dav.indexOf("Konqueror")>=0?tv:undefined);has.add("webkit",parseFloat(dua.split("WebKit/")[1])||undefined);has.add("chrome",parseFloat(dua.split("Chrome/")[1])||undefined);has.add("safari",dav.indexOf("Safari")>=0&&!has("chrome")?parseFloat(dav.split("Version/")[1]):undefined);has.add("mac",dav.indexOf("Macintosh")>=0);has.add("quirks",document.compatMode=="BackCompat");has.add("ios",
/iPhone|iPod|iPad/.test(dua));has.add("android",parseFloat(dua.split("Android ")[1])||undefined);if(!has("webkit")){if(dua.indexOf("Opera")>=0)has.add("opera",tv>=9.8?parseFloat(dua.split("Version/")[1])||tv:tv);if(dua.indexOf("Gecko")>=0&&!has("khtml")&&!has("webkit"))has.add("mozilla",tv);if(has("mozilla"))has.add("ff",parseFloat(dua.split("Firefox/")[1]||dua.split("Minefield/")[1])||undefined);if(document.all&&!has("opera")){var isIE=parseFloat(dav.split("MSIE ")[1])||undefined;var mode=document.documentMode;
if(mode&&mode!=5&&Math.floor(isIE)!=mode)isIE=mode;has.add("ie",isIE)}has.add("wii",typeof opera!="undefined"&&opera.wiiremote)}}return has})},"xfile/views/FileView":function(){define("xfile/views/FileView",["dojo/_base/declare","xide/views/BeanView","xfile/views/ContextMenuHandler","xfile/views/UploadMixin","xfile/widgets/PerspectiveSelector","xfile/widgets/NewItemSelector","xfile/widgets/EditorSelector","xfile/views/EditorPluginMixin","./_ItemActionMixin","dojo/cookie","dojo/json","xide/types",
"xide/utils"],function(declare,BeanView,ContextMenuHandler,UploadMixin,PerspectiveSelector,NewItemSelector,EditorSelector,EditorPluginMixin,_ItemActionMixin,cookie,json,types,utils){return declare("xfiles/views/FileView",[BeanView,UploadMixin,_ItemActionMixin],{activeItem:null,config:null,keyboardDelegate:null,mouseDelegate:null,prevItem:null,addReturnRow:true,cookiePrefix:"left",editorDelegate:null,backItem:null,autoFocus:true,ctlrKeyDown:false,beanType:"BTFILE",onButtonClicked:function(button){if(this.delegate&&
this.delegate.delegate&&this.delegate.delegate.onActionButton){button.item=this.activeItem;if(!button.item){console.error(" have no item!");return}this.delegate.delegate.onActionButton(button,button.item,button.operation,this)}},_createPerspectiveSelector:function(){var _owner=this.delegate.owner;if(this.delegate.owner&&this.delegate.owner.owner&&this.delegate.owner.owner.onPerspectiveChanged)_owner=this.delegate.owner.owner;return utils.addWidget(PerspectiveSelector,{title:"Perspective",iconClass:"el-icon-website",
operation:types.OPERATION.PERSPECTIVE,disabled:false,delegate:this.delegate.delegate,owner:_owner,style:"display:inline;height:inherit;float:left;"},this.delegate.delegate,dojo.doc.createElement("div"),true)},_createEditorSelector:function(editors){return utils.addWidget(EditorSelector,{editors:editors,style:"float:left"},this,dojo.doc.createElement("div"),true)},getItemActions:function(){var actions=[];var item=this.getItem();if(!item){actions.push(this._createPerspectiveSelector());return actions}var handler=
this.delegate.delegate;var thiz=this;var _onButtonClicked=function(action,command,item,owner){if(handler&&handler.onActionButton)handler.onActionButton(action,item,command,thiz)};var allowedActions=this.config.ALLOWED_ACTIONS||{1:true,2:true,3:true,4:true,5:true,6:true,7:true,8:true,9:true,10:true,11:true,12:true,13:true,14:true,15:true,16:true,17:true};var opsInt=types.OPERATION_INT;var editButton=null;if(allowedActions[opsInt.EDIT]){editButton=this._createAction(types.OPERATION.EDIT,item,_onButtonClicked,
false);actions.push(editButton)}if(allowedActions[opsInt.DELETE])actions.push(this._createAction(types.OPERATION.DELETE,item,_onButtonClicked,false));if(allowedActions[opsInt.RELOAD])actions.push(this._createAction(types.OPERATION.RELOAD,item,_onButtonClicked,false));if(allowedActions[opsInt.COMPRESS])actions.push(this._createAction(types.OPERATION.COMPRESS,item,_onButtonClicked,false));if(allowedActions[opsInt.DOWNLOAD])actions.push(this._createAction(types.OPERATION.DOWNLOAD,item,_onButtonClicked,
false));if(allowedActions[opsInt.INFO])actions.push(this._createAction(types.OPERATION.INFO,item,_onButtonClicked,false));if(allowedActions[opsInt.RENAME])actions.push(this._createAction(types.OPERATION.RENAME,item,_onButtonClicked,false));if(allowedActions[opsInt.MOVE])actions.push(this._createAction(types.OPERATION.MOVE,item,_onButtonClicked,false));if(allowedActions[opsInt.COPY])actions.push(this._createAction(types.OPERATION.COPY,item,_onButtonClicked,false));if(allowedActions[opsInt.NEW_FILE]||
allowedActions[opsInt.NEW_DIRECTORY]){var button=new NewItemSelector({title:"New",delegate:this,allowedActions:allowedActions},dojo.doc.createElement("div"));button.startup();actions.push(button)}actions.push(this._createPerspectiveSelector());if(item.directory===true);else if(allowedActions[opsInt.EDIT]){var editors=EditorPluginMixin.getEditors(item)||[];if(editors.length>=1){if(editButton)actions.remove(editButton);var editorSelector=this._createEditorSelector(editors);editorSelector.createMenuItem("el-icon-file-edit",
"Text-Editor",types.OPERATION.EDIT);actions.push(editorSelector)}else if(editors.length==0);}return actions},hasItemActions:function(){var item=this.getItem();return true},getItem:function(){if(this.delegate&&this.delegate.findActiveItem)return this.delegate.findActiveItem();return null},onFocusRootNode:function(){console.error("on focus root node")},getCurrentParent:function(){var currentItem=this.activeItem;if(!currentItem&&this.getFirstItem){var _firstItem=this.getFirstItem();if(_firstItem)currentItem=
_firstItem}if(currentItem)if(currentItem.directory!=null&&currentItem.directory===true)if(currentItem[this.id]&&currentItem[this.id]["isBack"]===true);else{var parent=this.store.getParents(currentItem,true)[0];if(parent)return parent}else{var parent=this.store.getParents(currentItem,true)[0];if(parent)return parent}return currentItem},hasItem:function(fileName,ignoreValue){var items=this.getCurrentItems();for(var i=0;i<items.length;i++)if(items[i].name!=ignoreValue&&items[i].name==fileName)return true;
return false},getCurrentItems:function(){var parentItem=this.getCurrentParent();if(parentItem){var query={path:parentItem.path};var queryOptions={deep:false,ignoreCase:false,sort:[{attribute:"name",descending:false,ignoreCase:false}],storeOnly:true};return this.store.query(query,queryOptions)}return null},onBack:function(){if(this.backItem){this.openItem(this.backItem);return this.backItem}},getEditorDelegate:function(){return this.editorDelegate},loadPreferences:function(){var settings=cookie(this.cookiePrefix+
"_layout_settings");settings=settings?json.parse(settings):{};return settings},onPreferencesChanged:function(){var settings=cookie(this.cookiePrefix+"_layout_settings");settings=settings?json.parse(settings):{};return settings},getParentItem:function(item){if(!item)return;var parent=this.store.getParents(item,true);if(parent&&parent.length==1)return parent[0];return null},getPrevItem:function(){return this.prevItem},getQueryOptions:function(){return{deep:true,ignoreCase:false,sort:[{attribute:"directory",
descending:true,ignoreCase:false},{attribute:"name",descending:false,ignoreCase:false}],storeOnly:true}},doInitialQuery:function(url){var query={path:url||"."};var queryOptions={deep:true,ignoreCase:false,sort:[{attribute:"directory",descending:true,ignoreCase:false},{attribute:"name",descending:false,ignoreCase:false}],storeOnly:true};this.store.query(query,queryOptions)},getActiveItem:function(){return this.activeItem},doQuery:function(url){var query={path:url||"."};var queryOptions={deep:true,
ignoreCase:false,sort:[{attribute:"directory",descending:true,ignoreCase:false},{attribute:"name",descending:false,ignoreCase:false}],storeOnly:true};return this.store.query(query,queryOptions)},onKeyEvent:function(evt){if(this.keyboardDelegate)this.keyboardDelegate.onGridKey(evt)},onMouseEvent:function(evt){if(this.mouseDelegate)this.mouseDelegate.onGridMouse(evt)},onMouseDoubleClickEvent:function(evt){if(this.mouseDelegate)this.mouseDelegate.onGridMouseDouble(evt)},getThemePath:function(){return this.themeRoot+
this.theme},onOpenProperties:function(item){if(this.delegate&&this.delegate.onOpenProperties)this.delegate.onOpenProperties(item)},onClose:function(){this.delegate.gridView=null;this.inherited(arguments);var parent=dijit.byId("topTabs");if(parent)parent.removeChild(this)},pathToRegex:function(path){return path;var segm=path.split("/");var regex="(^\\.";var i;for(i=0;i<segm.length;i++)if(segm[i]!==".")regex=regex+"\\/"+segm[i];regex=regex+"\\/[^\\/]*$)";return regex},_createContextMenu:function(node){this.contextMenuHandler=
new ContextMenuHandler({editStyle:false,panelDelegate:this.delegate,panelManager:this.delegate.delegate,clipboardManager:this.config.clipboardManager,config:this.config,owner:this});this.contextMenuHandler.delegate=this;this.contextMenuHandler.node=this.grid;this.contextMenuHandler.store=this.store;this.contextMenuHandler.model=this.model;this.contextMenuHandler.startup();this.contextMenuHandler.initWithNode(node)},formatDateSimple:function(data,format){var momentUnix=moment.unix(data);return momentUnix.format("YYYY MMMM Do, h:mm:ss a")},
formatDate:function(dateObject,format){if(!format)format="yyyy-MM-dd h:mm:ss";format=format.replace("d",dateObject.getDate()<10?"0"+dateObject.getDate():dateObject.getDate());format=format.replace("D",dateObject.getDay());format=format.replace("Y",dateObject.getFullYear());format=format.replace("y",dateObject.getYear());var month=dateObject.getMonth()+1;format=format.replace("m",month<10?"0"+month:month);format=format.replace("H",(dateObject.getHours()<10?"0":"")+dateObject.getHours());format=format.replace("h",
dateObject.getHours()%12||12);format=format.replace("p",dateObject.getHours()<12?"am":"pm");format=format.replace("P",dateObject.getHours()<12?"AM":"PM");format=format.replace("i",(dateObject.getMinutes()<10?"0":"")+dateObject.getMinutes());format=format.replace("s",(dateObject.getSeconds()<10?"0":"")+dateObject.getSeconds());return format},startup:function(){if(this.didLoad)return;this.inherited(arguments);this.didLoad=true;this.on("click",function(){this.publish(types.EVENTS.ON_VIEW_SHOW,{view:this})})}})})},
"xide/views/TextEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/_Widget","dijit/layout/_LayoutWidget","dojo/dom-construct","dojo/dom-style","dojo/has","xide/types","xide/factory"],function(declare,lang,_Widget,_LayoutWidget,domConstruct,domStyle,has,types,factory){return declare("xide.views.TextEditor",[_Widget],{_aceConfig:null,_loadedModes:{},focus:function(){if(this.autoFocus===false)return;if(this.editor){this.editor.resize();this.editor.renderer.updateFull();this.editor.focus()}},
addAutoCompleter:function(list){var editor=this.getEditor();var langTools=ace.require("ace/ext/language_tools");var rhymeCompleter={getCompletions:function(editor,session,pos,prefix,callback){if(prefix.length===0){callback(null,[]);return}callback(null,list.map(function(ea){return{name:ea.word,value:ea.word,meta:"optional text"}}))}};langTools.addCompleter(rhymeCompleter)},onEditorReady:function(){var editor=this.getEditor();var config=this._aceConfig;editor.commands.addCommands([{name:"gotoline",
bindKey:{win:"Ctrl-L",mac:"Command-L"},exec:function(editor,line){if(typeof line=="object"){var arg=this.name+" "+editor.getCursorPosition().row;editor.cmdLine.setValue(arg,1);editor.cmdLine.focus();return}line=parseInt(line,10);if(!isNaN(line))editor.gotoLine(line)},readOnly:true},{name:"snippet",bindKey:{win:"Alt-C",mac:"Command-Alt-C"},exec:function(editor,needle){if(typeof needle=="object"){editor.cmdLine.setValue("snippet ",1);editor.cmdLine.focus();return}var s=snippetManager.getSnippetByName(needle,
editor);if(s)snippetManager.insertSnippet(editor,s.content)},readOnly:true},{name:"increaseFontSize",bindKey:"Ctrl-+",exec:function(editor){var size=parseInt(editor.getFontSize(),10)||12;editor.setFontSize(size+1)}},{name:"decreaseFontSize",bindKey:"Ctrl+-",exec:function(editor){var size=parseInt(editor.getFontSize(),10)||12;editor.setFontSize(Math.max(size-1||1))}},{name:"resetFontSize",bindKey:"Ctrl+0",exec:function(editor){editor.setFontSize(12)}}]);this.focus()},onDidChange:function(){},setOptions:function(opts){var editor=
this.getEditor(),thiz=this;this.editor.session.setUseWorker(true);editor.setOptions({enableBasicAutocompletion:true,enableSnippets:true});editor.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())};editor.on("change",function(){thiz.onDidChange(arguments)});this.onEditorReady();return},getEditor:function(){return this.editor},buildRendering:function(){this.inherited("buildRendering",arguments);var node=domConstruct.create("div");domStyle.set(node,{padding:"0",margin:"0",
"className":"editor-ace ace_editor ace-codebox-dark ace_dark"});var editor=this.getEditor();var config=ace.require("ace/config");this._aceConfig=config;config.init();ace.require("ace/ext/language_tools");this.editor=ace.edit(node);this.editorSession=this.editor.getSession();this.domNode=node},set:function(key,value){var self=this;if(key=="value"){this.editorSession.setValue(value);var thiz=this;var _s=function(){setTimeout(function(){factory.publish(types.EVENTS.RESIZE,{},thiz)},100)}}else if(key==
"theme"){if(typeof value=="string")value="ace/theme/"+value;this.editor.setTheme(value)}else if(key=="mode")try{if(1)ace.require(["ace/mode/"+value],function(modeModule){if(modeModule&&modeModule.Mode)self.editorSession.setMode(new modeModule.Mode)})}catch(e){console.error("ace mode failed : "+value)}else if(key=="readOnly")this.editor.setReadOnly(value);else if(key=="tabSize")this.editorSession.setTabSize(value);else if(key=="softTabs")this.editorSession.setUseSoftTabs(value);else if(key=="wordWrap")this.editorSession.setUseWrapMode(value);
else if(key=="printMargin")this.editor.renderer.setPrintMarginColumn(value);else if(key=="showPrintMargin")this.editor.setShowPrintMargin(value);else if(key=="highlightActiveLine")this.editor.setHighlightActiveLine(value);else if(key=="fontSize")domStyle.set(this.domNode,key,value);else if(key=="showGutter")this.editor.renderer.setShowGutter(value);return this.inherited("set",arguments)},get:function(key){if(key=="value")return this.editorSession.getValue();return this.inherited("get",arguments)},
startup:function(){},resize:function(size){if(size)_LayoutWidget.prototype.resize.apply(this,arguments);var self=this;this._resizer=setTimeout(lang.hitch(self,function(){delete self._resizer;self.editor.resize()}),10)},layout:function(){this._layoutMode=true},destroy:function(){if(this._resizer){clearTimeout(this._resizer);delete this._resizer}return this.inherited("destroy",arguments)}})})},"xide/widgets/FileWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","xide/widgets/WidgetBase",
"xide/factory","xide/utils","xfile/factory"],function(declare,lang,WidgetBase,factory,utils,xFileFactory){return declare("xide.widgets.FileWidget",[WidgetBase],{wContentSelectorButton:null,lastUploadedFileName:null,ajaxplorerIframe:null,ajaxplorerDialog:null,oriPath:null,minHeight:"54px;",value:"",options:null,dialogTitle:"Select Script",onPlatformChanged:function(newPlatform){this.inherited(arguments)},clearValue:function(){this.setValue(null)},templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e"+
"\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e"+"\x3ctbody\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+"\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'previewNode'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+
"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button2'\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"+"\x3cdiv data-dojo-attach-point\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'last'\x3e\x3c/div\x3e"+"\x3c/div\x3e",filePathValidator:function(value,constraints){return true},onFileSelected:function(dlg,item){if(item){var acceptFiles=utils.toBoolean(this.userData["acceptFiles"]);var acceptFolders=
utils.toBoolean(this.userData["acceptFolders"]);var encodeFilePath=utils.toBoolean(this.userData["encodeFilePath"]);var buildFullPath=utils.toBoolean(this.userData["buildFullPath"]);var isDirectory=item.directory===true;if(isDirectory&&!acceptFolders)return;else if(!isDirectory&&!acceptFiles)return;this.userData.changed=true;this.userData.active=true;var _newPath=buildFullPath?utils.buildPath(item.mount,item.path,encodeFilePath):item.path;this.editBox.set("value",_newPath);this.value=_newPath;this.setValue(_newPath)}},
getOptions:function(){var ctx=this.ctx||window["xFileContext"];var _defaultOptions={title:this.dialogTitle,owner:ctx,dst:{name:"Select",path:"."},src:".",ctx:ctx};var options=this.options||ctx.defaultOptions;if(options){_defaultOptions=lang.mixin(_defaultOptions,options);0&&console.dir(options)}else console.error("have no options");var userOptions=this.userData?this.userData.filePickerOptions:null;if(userOptions)_defaultOptions=lang.mixin(_defaultOptions,userOptions);if(_defaultOptions.store&&_defaultOptions.defaultStoreName){if(!userOptions||
!userOptions.defaultStoreOptions)_defaultOptions.defaultStoreOptions={"fields":1663,"includedFileExtensions":"*","excludedFileExtensions":"*"};_defaultOptions.store=ctx.getStore(_defaultOptions.defaultStoreName,_defaultOptions.defaultStoreOptions)}return _defaultOptions},onSelect:function(){var thiz=this;var defaultOptions=this.getOptions();try{xFileFactory.createFileSelectDialogLarge(defaultOptions,function(dlg,item){thiz.onFileSelected(dlg,item)})}catch(e){console.error("file widget crash : "+e);
debugger}},fillTemplate:function(){var value=utils.toString(this.userData["value"]);this.editBox=factory.createValidationTextBox(this.previewNode,"","",value,this.filePathValidator,this.delegate,"Not a path!","I need some input");this.connectEditBox(this.editBox);this.selectButton=factory.createButton(this.button0,"el-icon-folder-open","elusiveButton","","",this.onSelect,this)},startup:function(){this.inherited(arguments);this.fillTemplate();this.onReady()}})})},"xfile/views/BlocksFileEditor":function(){define("xfile/views/BlocksFileEditor",
["dojo/_base/declare","xblox/views/BlocksFileEditor"],function(declare,BlocksFileEditor){return declare("xfile.views.BlocksFileEditor",[BlocksFileEditor],{getScopeUserData:function(){return{owner:this.ctx.blockManager}},startup:function(){if(this.didLoad)return;this.inherited(arguments);this.didLoad=true}})})},"xide/views/MainView":function(){define(["dojo/_base/array","dojo/_base/declare","xide/widgets/TemplatedWidgetBase","xide/widgets/_CSSMixin","xide/widgets/_StyleMixin","xide/widgets/_InsertionMixin",
"xide/widgets/_HTMLTemplateMixin","dojo/dom-class","xide/types","cbtree/data/BreadCrumb","xfile/widgets/ActionToolbarEmbedded","xide/widgets/_PermaMixin","dijit/registry","xide/utils","xide/factory","xide/layout/BorderContainer","xide/layout/ContentPane","xide/layout/TabContainer","xide/mixins/EventedMixin"],function(array,declare,TemplatedWidgetBase,CSSMixin,_StyleMixin,_InsertionMixin,HTMLTemplateMixin,domClass,types,BreadCrumb,ActionToolbarEmbedded,PermaMixin,registry,utils,factory,BorderContainer,
ContentPane,TabContainer,EventedMixin){return declare("xide.views.MainView",[TemplatedWidgetBase,CSSMixin,_StyleMixin,HTMLTemplateMixin,_InsertionMixin,PermaMixin,EventedMixin],{config:null,ctx:null,cssClass:"mainView xasMain dTuned",layoutMain:null,layoutTop:null,layoutLeft:null,layoutCenter:null,layoutRight:null,layoutBottom:null,toolbar:null,preventCaching:true,panelManager:null,leftPanel:null,centerPanel:null,centerTabContainer:null,breadCrumb:null,bottomTabContainer:null,logPanel:null,layoutBottomPlaceHolder:null,
initialReload:false,persistent:false,_restoredPermaItems:0,rightBorderContainer:null,rightTopTabParent:null,rightTopTabContainer:null,rightBottomContainer:null,rightBottomTabContainer:null,layoutRightPlaceHolder:null,leftTabContainer:null,templateString:"\x3cdiv\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutMain' data-dojo-type\x3d'xide.layout.BorderContainer' data-dojo-props\x3d\"design:'headline'\" class\x3d'layoutMain '\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutTop' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'top',splitter:'true'\" class\x3d'layoutTop ui-state-default'\x3e\x3c/div\x3e"+
"\x3cdiv data-dojo-attach-point\x3d'layoutLeft' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'leading',splitter:'true'\" class\x3d'layoutLeft'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutCenter' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'center',splitter:'true'\" class\x3d'layoutCenter'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'layoutRight' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'right',splitter:'true',minSize:'200',toggleSplitterState:'closed',toggleSplitterClosedSize:'0px',toggleSplitterFullSize:'200px' \" class\x3d'layoutRight' style\x3d'min-width: 200px;'\x3e\x3cdiv data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-attach-point\x3d'layoutRightPlaceHolder' style\x3d'min-width:200px;width: 200px;'\x3e\x3c/div\x3e\x3c/div\x3e"+
"\x3cdiv data-dojo-attach-point\x3d'layoutBottom' data-dojo-type\x3d'xide.layout.ContentPane' data-dojo-props\x3d\"region:'bottom',splitter:'true',toggleSplitterState:'closed',toggleSplitterClosedSize:'0px',toggleSplitterFullSize:'150px'\" class\x3d'layoutBottom ui-state-default'\x3e\x3cdiv data-dojo-attach-point\x3d'layoutBottomPlaceHolder' style\x3d'height: 80px;'\x3e\x3c/div\x3e\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e",_openRight:function(){if(this.layoutRight){var splitter=this.layoutRight._splitterWidget;
if(splitter)switch(splitter.state){case "full":break;case "collapsed":case "closed":splitter.set("state","full");this.publish(types.EVENTS.RESIZE,{},this);break}}return true},getLeftTabContainer:function(){return this.leftTabContainer},getRightBottomTarget:function(clear,open,single){if(this.layoutRight){var layoutRightMain=this.getLayoutRightMain();if(clear)utils.destroyWidget([this.rightBottomTabContainer,this.rightBottomContainer],false,this);if(!this.rightBottomContainer)this.rightBottomContainer=
utils.addWidget(ContentPane,{style:"width:100%;height:30%;padding:0px",region:"center",parentContainer:this.rightBorderContainer},this,layoutRightMain);if(!this.rightBottomTabContainer){var tabContainer=new dijit.layout.TabContainer({tabStrip:true,tabPosition:"top",splitter:true,region:"center",attachParent:true,style:"width:100%;height:100%",allowSplit:false},dojo.doc.createElement("div"));this.rightBottomContainer.containerNode.appendChild(tabContainer.domNode);this.rightBottomTabContainer=tabContainer;
tabContainer.startup()}if(open===true)this._openRight();return this.rightBottomTabContainer}return null},getRightTopTarget:function(clear,open){try{if(this.layoutRight){var layoutRightMain=this.getLayoutRightMain();if(clear)utils.destroyWidget([this.rightTopTabContainer,this.rightTopTabParent],false,this);if(!this.rightTopTabParent)this.rightTopTabParent=utils.addWidget(ContentPane,{delegate:this,style:"width:100%;height:70%;padding:0px;overflow:hidden;",region:"top",splitter:true,parentContainer:layoutRightMain},
this,layoutRightMain);if(!this.rightTopTabContainer)this.rightTopTabContainer=utils.addWidget(dijit.layout.TabContainer,{delegate:this,tabStrip:true,tabPosition:"top",attachParent:true,style:"width:100%;height:100%;overflow-x:hidden;",allowSplit:false},null,this.rightTopTabParent.containerNode,true);if(clear)this.resize();if(open===true)this._openRight();return this.rightTopTabContainer}}catch(e){debugger}return null},getLayoutRightMain:function(){if(this.layoutRight){if(!this.rightBorderContainer){this.rightBorderContainer=
new BorderContainer({splitter:true,design:"headline",style:"width:200px;height:inherit;",liveSplitters:true,gutters:true},dojo.doc.createElement("div"));this.layoutRight.containerNode.appendChild(this.rightBorderContainer.domNode);this.rightBorderContainer.startup()}return this.rightBorderContainer}return null},getNewAlternateTarget:function(item,panel){if(!this.centerTabContainer){if(this.centerPanel){var tmpPos=dojo.doc.createElement("div");dojo.place(this.centerPanel.domNode,tmpPos)}var tabContainer=
new TabContainer({delegate:this,tabStrip:true,tabPosition:"top",splitter:true,region:"center",attachParent:true,style:"width:100%;height:100%",parentContainer:this.layoutCenter,sizeTarget:this.layoutCenter.containerNode,allowSplit:true},dojo.doc.createElement("div"));this.layoutCenter.containerNode.appendChild(tabContainer.domNode);tabContainer.startup();if(this.centerPanel)tabContainer.addChild(this.centerPanel);this.centerTabContainer=tabContainer}return this.centerTabContainer},_permaItemReady:function(item){if(item)if(item.directory!=
null&&item.directory===true){if(this.centerPanel)if(this._restoredPermaItems==0)this.centerPanel.openItem(item);else this.centerPanel.openItemAlternate(item);this._restoredPermaItems+=1}else this.panelManager.openFile(item)},getPermaLink:function(){var items=[];if(this.centerTabContainer)array.forEach(registry.findWidgets(this.centerTabContainer.containerNode),function(child){if(child.getPermaLink){var childPerma=child.getPermaLink();if(childPerma&&childPerma!=".")items.push(encodeURIComponent(childPerma))}});
else if(this.centerPanel&&this.centerPanel.getPermaLink){var childPerma=this.centerPanel.getPermaLink();if(childPerma&&childPerma!=".")items.push(encodeURIComponent(childPerma))}if(items&&items.length>0)return"mainView\x3d"+encodeURIComponent(items.join("|"));return""},_getItem:function(url){var thiz=this;var store=this.panelManager.store;var _readyCB=function(item){thiz._permaItemReady(item)};setTimeout(function(){store.getItem(url,true,_readyCB)},10)},restorePermaLink:function(link){try{var urls=
[];link=link||window.location.href;if(link){var params=utils.urlDecode(link);if(params&&params.mainView){params.mainView=decodeURIComponent(params.mainView);var items=params.mainView.indexOf("|")!=-1?params.mainView.split("|"):[params.mainView];if(items&&items.length>0)for(var i=0;i<items.length;i++)urls.push(decodeURIComponent(items[i]))}}if(urls.length>0)for(var i=0;i<urls.length;i++)this._getItem(urls[i])}catch(e){debugger}},onLastPanelRemoved:function(){if(this.centerPanel&&this.centerTabContainer){var tmpPos=
dojo.doc.createElement("div");dojo.place(this.centerPanel.domNode,tmpPos);utils.destroyWidget(this.centerTabContainer);this.centerTabContainer=null;this.layoutCenter.containerNode.appendChild(this.centerPanel.domNode);this.resize()}},onPanelClosed:function(){if(this.centerTabContainer){var children=this.centerTabContainer.getChildren();var reRoot=false;if(children.length==1)reRoot=true;if(reRoot)this.onLastPanelRemoved()}},prepareLayout:function(config){if(config.LAYOUT_PRESET==types.LAYOUT_PRESET.SINGLE)this.layoutMain.removeChild(this.layoutLeft);
if(config.PANEL_OPTIONS!=null&&config.PANEL_OPTIONS.ALLOW_INFO_VIEW===false)this.layoutMain.removeChild(this.layoutRight);if(config.PANEL_OPTIONS!=null&&(config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===false||config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===0)&&(config.ACTION_TOOLBAR_MODE==null||config.ACTION_TOOLBAR_MODE!="self"))this.layoutMain.removeChild(this.layoutTop);else if(this.layoutTop._splitterWidget){utils.destroyWidget(this.layoutTop._splitterWidget);this.layoutTop._splitterWidget=null}if(config.PANEL_OPTIONS!=
null&&config.PANEL_OPTIONS.ALLOW_LOG_VIEW===false)this.layoutMain.removeChild(this.layoutBottom);else if(this.layoutBottom._splitterWidget){this.layoutBottom._splitterWidget.fullSize="150px";this.layoutBottom._splitterWidget.collapsedSize=null;if(!this.bottomTabContainer)this.bottomTabContainer=this._createBottomTabContainer()}},createPanel:function(panelOptions,dstContainer,cookiePrefix,region){if(!this.panelManager);if(panelOptions.AUTO_OPEN||panelOptions.AUTO_OPEN==null){var panel=this.getPanelManager().openUrl(this.config.START_PATH,
dstContainer,this.config,cookiePrefix,region);if(this.initialReload){var thiz=this;setTimeout(function(){panel.onReload(panel)},800)}return panel}},onChangeToggleSplitterState:function(splitter,state){if(!this.persistent)return;var splitterData=[];if(this.layoutLeft&&this.layoutLeft._splitterWidget)splitterData.push({region:"left",state:this.layoutLeft._splitterWidget.state});if(this.layoutRight&&this.layoutRight._splitterWidget)splitterData.push({region:"right",state:this.layoutRight._splitterWidget.state});
if(this.layoutBottom&&this.layoutBottom._splitterWidget)splitterData.push({region:"bottom",state:this.layoutBottom._splitterWidget.state});this.ctx.getSettingsManager().write(null,".",null,{id:"splitter",data:JSON.stringify(splitterData),name:"Splitter States"},true,null)},setupToggleSplitterListeners:function(){if(this.layoutLeft&&this.layoutLeft._splitterWidget)this.layoutLeft._splitterWidget.delegate=this;if(this.layoutRight&&this.layoutRight._splitterWidget)this.layoutRight._splitterWidget.delegate=
this;if(this.layoutBottom&&this.layoutBottom._splitterWidget)this.layoutBottom._splitterWidget.delegate=this},_getState:function(region,data){for(var i=0;i<data.length;i++)if(data[i].region==region)return data[i].state;return null},_restoreSplitter:function(){},_restoreToggleSplitters:function(){var store=this.ctx.getSettingsManager().getStore();if(store){var data=utils.queryStoreEx(store,{id:"splitter"},true,true);if(data){data=data.data;if(data){if(this.layoutLeft&&this.layoutLeft._splitterWidget){var state=
this._getState("left",data);if(state)this.layoutLeft._splitterWidget.set("state",state)}if(this.layoutRight&&this.layoutRight._splitterWidget){var state=this._getState("right",data);if(state)this.layoutRight._splitterWidget.set("state",state)}if(this.layoutBottom&&this.layoutBottom._splitterWidget){var state=this._getState("bottom",data);if(state)this.layoutBottom._splitterWidget.set("state",state)}}}}},createPanels:function(config){if(config.LAYOUT_PRESET==types.LAYOUT_PRESET.DUAL){this.leftPanel=
this.createPanel(config.FILE_PANEL_OPTIONS_LEFT,this.layoutLeft,types.LAYOUT_REGION.LEFT,types.LAYOUT_REGION.LEFT);this.centerPanel=this.createPanel(config.FILE_PANEL_OPTIONS_MAIN,this.layoutCenter,types.LAYOUT_REGION.CENTER,types.LAYOUT_REGION.CENTER);this.leftPanel.currentPanels.push(this.centerPanel);this.leftPanel.activePanel=this.centerPanel;this.centerPanel.currentPanels.push(this.leftPanel);this.centerPanel.owner=this.leftPanel;this.centerPanel.closeable=false}else if(config.LAYOUT_PRESET==
types.LAYOUT_PRESET.SINGLE&&config.FILE_PANEL_OPTIONS_MAIN!=null)this.createPanel(config.FILE_PANEL_OPTIONS_MAIN,this.layoutCenter,types.LAYOUT_REGION.CENTER)},getPanelManager:function(){return this.panelManager},onShowPanel:function(data){var panel=data?data?data.panel?data.panel:null:null:null;if(panel&&panel.getCurrentPathItem){var cPathItem=panel.getCurrentPathItem();if(cPathItem&&this.breadCrumb){this.breadCrumb.setTrail(cPathItem.path);this.breadCrumb.owner=panel}}},onDidOpenItem:function(data){var item=
data?data?data.item?data.item:null:null:null;if(item&&item.path&&item.directory===true)if(this.breadCrumb)this.breadCrumb.setTrail(item.path)},createBreadCrumb:function(config){if(this.breadCrumb)return;this.breadCrumb=window["xappFileTrail"];this.layoutTop.containerNode.appendChild(this.breadCrumb.domNode);dojo.place(this.breadCrumb.domNode,this.layoutTop.containerNode,"last");this.breadCrumb.startup();this.layoutTop.resize();this.layoutMain.resize();var thiz=this;this.breadCrumb.onClick=function(item,
widget){if(item&&thiz.breadCrumb.owner&&thiz.breadCrumb.owner.openItem)thiz.breadCrumb.owner.openItem(item)};return;var store=this.leftPanel?this.leftPanel.store:this.centerPanel?this.centerPanel.store:null;if(store){var breadCrumb=new BreadCrumb({store:store,cssBaseClass:"fileIcon",className:"breadCrumb"},dojo.doc.createElement("div"));this.layoutTop.containerNode.appendChild(breadCrumb.domNode);dojo.place(breadCrumb.domNode,this.layoutTop.containerNode,"last");breadCrumb.startup();this.breadCrumb=
breadCrumb}},_createToolbarEx:function(displayMode,config,container){if(displayMode=="self"){var ctx=this.ctx;this.actionToolbar=new ActionToolbarEmbedded({delegate:this.ctx.getPanelManager(),ctx:this.ctx,config:config},dojo.doc.createElement("div"));domClass.add(this.actionToolbar.domNode,"actionToolbarEmbedded");container.containerNode.appendChild(this.actionToolbar.domNode);this.actionToolbar.startup()}},initWithConfig:function(config){var thiz=this;try{domClass.add(this.layoutRight.domNode,"ui-state-default");
setTimeout(function(){thiz.prepareLayout(config)},100);setTimeout(function(){thiz.createPanels(config);thiz.restorePermaLink(null)},200);setTimeout(function(){var toolbarHeight=0;if(config&&config.ACTION_TOOLBAR_MODE!=null)try{thiz._createToolbarEx(config.ACTION_TOOLBAR_MODE,config,thiz.layoutTop);toolbarHeight+=35}catch(e){}if(config.PANEL_OPTIONS!=null&&(config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===true||config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===1))try{thiz.createBreadCrumb(config);toolbarHeight+=30}catch(e){debugger}thiz.repaint()},
500)}catch(e){debugger}},removeEmptyContainers:function(){utils.destroyIfEmpty(this.layoutRight);utils.destroyIfEmpty(this.layoutCenter);utils.destroyIfEmpty(this.layoutLeft);utils.destroyIfEmpty(this.layoutTop);utils.destroyIfEmpty(this.layoutBottom)},postMixInProperties:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.buttons=[];if(this.toolbar)this.toolbar.delegate=this;this._setupTranslations()},_resizeContainer:function(container,name){try{if(container&&
container.domNode)container.resize()}catch(e){console.error("_resizeContainer : failed for "+name)}},_fixToolbar:function(){if(this.toolbar&&this.layoutBottom&&this.layoutMain&&this.layoutBottom.domNode)dojo.place(this.toolbar.domNode,this.layoutBottom.domNode,"before")},resize:function(){this.inherited(arguments);if(this.layoutMain)this._resizeContainer(this.layoutMain,"main");if(this.layoutLeft)this._resizeContainer(this.layoutLeft,"left");if(this.layoutTop)this._resizeContainer(this.layoutTop,
"top");if(this.layoutCenter)this._resizeContainer(this.layoutCenter,"center");if(this.layoutRight)this._resizeContainer(this.layoutRight,"right");if(this.layoutLeft)this._resizeContainer(this.layoutLeft,"left");if(this.layoutBottom)this._resizeContainer(this.layoutBottom,"bottom")},onStartupPost:function(){var thiz=this;dojo.connect(null,dojo.global.onorientationchange!==undefined?"onorientationchange":"onresize",this,function(){thiz.resize()});factory.subscribe(types.EVENTS.RESIZE,thiz.resize,this);
factory.subscribe(types.EVENTS.ON_DID_OPEN_ITEM,thiz.onDidOpenItem,this);factory.subscribe(types.EVENTS.UPLOAD_BEGIN,thiz.onUploadBegin,this);this.removeEmptyContainers();this.resize()},postCreate:function(){this.inherited(arguments)},buildRendering:function(){this.inherited(arguments)},_createBottomTabContainer:function(){if(this.layoutBottomPlaceHolder){utils.destroyWidget(this.layoutBottomPlaceHolder);this.layoutBottomPlaceHolder=null}var tabContainer=new dijit.layout.TabContainer({tabStrip:true,
tabPosition:"bottom",region:"bottom",attachParent:true,style:"width:100%"},dojo.doc.createElement("div"));this.layoutBottom.containerNode.appendChild(tabContainer.domNode);tabContainer.startup();return tabContainer},showLogPanel:function(){if(this.config.PANEL_OPTIONS!=null&&this.config.PANEL_OPTIONS.ALLOW_LOG_VIEW===false)return false;if(!this.bottomTabContainer)this.bottomTabContainer=this._createBottomTabContainer();if(this.bottomTabContainer&&this.logPanel)this.bottomTabContainer.selectChild(this.logPanel);
var splitter=this.layoutBottom._splitterWidget;if(splitter)switch(splitter.state){case "full":break;case "collapsed":case "closed":splitter.set("state","full");break}return true},repaint:function(evt,parent){var winSize=dojo.window.getBox();if(parent!=null){var parentO=dojo.byId(parent);if(parentO){this.resizeToNode(parent);return}}var dstHeight=winSize.h;dstHeight-=10;this.layoutMain.containerNode.style.height=dstHeight+"px";this.layoutMain.resize()},onChildAdded:function(who,what){this.resize()}})})},
"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/window","./main"],function(array,has,win,dijit){var _widgetTypeCtr={},hash={};var registry={length:0,add:function(widget){if(hash[widget.id])throw new Error("Tried to register widget with id\x3d\x3d"+widget.id+" but that id is already registered");hash[widget.id]=widget;this.length++},remove:function(id){if(hash[id]){delete hash[id];this.length--}},byId:function(id){return typeof id=="string"?hash[id]:
id},byNode:function(node){return hash[node.getAttribute("widgetId")]},toArray:function(){var ar=[];for(var id in hash)ar.push(hash[id]);return ar},getUniqueId:function(widgetType){var id;do id=widgetType+"_"+(widgetType in _widgetTypeCtr?++_widgetTypeCtr[widgetType]:_widgetTypeCtr[widgetType]=0);while(hash[id]);return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id},findWidgets:function(root,skipNode){var outAry=[];function getChildrenHelper(root){for(var node=root.firstChild;node;node=node.nextSibling)if(node.nodeType==
1){var widgetId=node.getAttribute("widgetId");if(widgetId){var widget=hash[widgetId];if(widget)outAry.push(widget)}else if(node!==skipNode)getChildrenHelper(node)}}getChildrenHelper(root);return outAry},_destroyAll:function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];array.forEach(registry.findWidgets(win.body()),function(widget){if(!widget._destroyed)if(widget.destroyRecursive)widget.destroyRecursive();else if(widget.destroy)widget.destroy()})},getEnclosingWidget:function(node){while(node){var id=
node.nodeType==1&&node.getAttribute("widgetId");if(id)return hash[id];node=node.parentNode}return null},_hash:hash};dijit.registry=registry;return registry})},"url:dijit/layout/templates/AccordionButton.html":"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onTitleClick' class\x3d'dijitAccordionTitle ui-state-default' role\x3d\"presentation\"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d'titleNode,focusNode' data-dojo-attach-event\x3d'onkeydown:_onTitleKeyDown'\n\t\t\tclass\x3d'dijitAccordionTitleFocus' role\x3d\"tab\" aria-expanded\x3d\"false\"\n\t\t\x3e\x3cspan class\x3d'dijitInline dijitAccordionArrow' role\x3d\"presentation\"\x3e\x3c/span\n\t\t\x3e\x3cspan class\x3d'arrowTextUp' role\x3d\"presentation\"\x3e+\x3c/span\n\t\t\x3e\x3cspan class\x3d'arrowTextDown' role\x3d\"presentation\"\x3e-\x3c/span\n\t\t\x3e\x3cspan role\x3d\"presentation\" class\x3d\"dijitInline dijitIcon\" data-dojo-attach-point\x3d\"iconNode\"\x3e\x3c/span\x3e\n\t\t\x3cspan role\x3d\"presentation\" data-dojo-attach-point\x3d'titleTextNode, textDirNode' class\x3d'dijitAccordionText'\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n",
"xide/views/CodeMirrorEditor":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/html","dojo/_base/connect","dojo/dom-construct","xide/utils","xide/layout/ContentPane","xide/factory","xfile/types"],function(declare,array,html,connect,domConstruct,utils,ContentPane,factory,types){return declare("xide.views.CodeMirrorEditor",[ContentPane],{wFloatingPane:null,closeable:true,moduleView:null,didStartup:false,editorRoot:null,aceEditor:null,editorControlsRoot:null,btnSave:null,title:null,
dataItem:null,value:null,titleWidget:null,ctrlDown:false,hasSaveButton:true,attachACEditor:true,root:null,toolbar:null,pane:null,content:null,editorFrame:null,rootPrefix:"",templateString:"\x3cdiv\x3e\x3cdiv class\x3d'aceCSSEditor' data-dojo-type\x3d'dijit.layout.ContentPane' title\x3d'${!title}' closable\x3d'true' data-dojo-attach-point\x3d'pane' style\x3d'padding:5px'\x3e"+"\x3cdiv data-dojo-attach-point\x3d'editorControlsRoot'\x3e"+"\x3c/div\x3e"+"\x3cbr/\x3e"+"\x3cdiv data-dojo-attach-point\x3d'editorRoot' style\x3d'height:inherit;width: 100%'\x3e\x3c/div\x3e"+
"\x3c/div\x3e\x3c/div\x3e",getPermaLink:function(){if(this.params&&this.params.filePath)return encodeURIComponent(this.params.filePath)},onShow:function(focus){this.inherited(arguments);try{if(this.codeMirror&&this.content)this.codeMirror.refresh()}catch(e){debugger}},focus:function(){this.inherited(arguments);var thiz=this;if(this.parentContainer&&this.parentContainer.selectChild)this.parentContainer.selectChild(this);this.domNode.tabindex=1;this.containerNode.tabindex=1;setTimeout(function(){thiz.domNode.focus();
thiz.containerNode.focus()},0);var cm=thiz.codeMirror;setTimeout(function(){if(cm&&cm.display&&cm.display.input&&cm.display.input.focus){cm.display.input.tabindex=1;cm.display.input.focus()}},500)},createEditorControls:function(){this.toolbar=new xide.widgets.EditorToolbar({style:"padding:0 !important;"},dojo.doc.createElement("div"));this.toolbar["delegate"]=this;this.containerNode.appendChild(this.toolbar.domNode);this.toolbar.startup()},onFullscreen:function(ref){this.codeMirror.setOption("fullScreen",
!this.codeMirror.getOption("fullScreen"))},getContent:function(){return this.codeMirror.getValue()},onSave:function(ref){var thiz=this;try{var value=this.codeMirror.getValue();if(value){var _cb=function(content){var struct={path:thiz.filePath};factory.createEvent(types.EVENTS.ON_FILE_CONTENT_CHANGED,struct,thiz)};this.delegate.setFileContent(this.filePath,value,_cb)}}catch(e){console.error("error saving")}},setContent:function(content){this.content=content;this.codeMirror.setValue(content);this.codeMirror.refresh()},
loadContent:function(filePath){var thiz=this;var _cb=function(content){if(content==null)return;var cm=thiz.codeMirror;this.content=content;thiz.codeMirror.setValue(content);var root=thiz.parentContainer;if(root){root.resize();thiz.codeMirror.refresh()}setTimeout(function(){if(cm&&cm.display&&cm.display.input&&cm.display.input.focus)cm.display.input.focus()},500)};this.delegate.getFileContent(filePath,_cb);var root=this.parentContainer;if(root){root.resize();this.codeMirror.refresh()}},setDefaults:function(){return{stylesheet:["/lib/codemirror.css"],
path:""+this.rootPrefix+"/lib/external/codemirror-3.20/",autofocus:true,parserfile:[],basefiles:["addon/mode/loadmode.js"],iframeClass:null,passDelay:200,passTime:50,lineNumberDelay:200,lineNumberTime:50,continuousScanning:false,saveFunction:null,mode:"javascript",onLoad:function(){debugger},onChange:null,undoDepth:50,undoDelay:800,disableSpellcheck:true,textWrapping:true,readOnly:false,width:"",height:"400px",minHeight:100,autoMatchParens:false,parserConfig:null,tabMode:"indent",enterMode:"indent",
electricChars:true,reindentOnLoad:false,activeTokens:null,onCursorActivity:null,lineNumbers:false,firstLineNumber:1,onLineNumberClick:null,indentUnit:2,domain:null,noScriptCaching:false}},frameHTML:function(options){if(typeof options.parserfile=="string")options.parserfile=[options.parserfile];if(typeof options.basefiles=="string")options.basefiles=[options.basefiles];if(typeof options.stylesheet=="string")options.stylesheet=[options.stylesheet];var base="components/com_xas/client/lib/external/codemirror-3.20/";
var html=['\x3c!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"\x3e\x3chtml\x3e\x3chead\x3e'];html.push('\x3cmeta http-equiv\x3d"X-UA-Compatible" content\x3d"IE\x3dEmulateIE7"/\x3e');var prefix=this.rootPrefix+"/lib/external/codemirror-3.20/";var queryStr=options.noScriptCaching?"?nocache\x3d"+(new Date).getTime().toString(16):"";array.forEach(options.stylesheet,function(file){html.push('\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+
prefix+file+queryStr+'"/\x3e')});array.forEach(options.basefiles.concat(options.parserfile),function(file){if(!/^https?:/.test(file))file=options.path+file;html.push('\x3cscript type\x3d"text/javascript" src\x3d"'+file+queryStr+'"\x3e\x3c'+"/script\x3e")});var scriptTag='\x3cscript type\x3d"text/javascript"\x3e'+"var dst \x3d document.getElementById('editbox');"+"var cm \x3d new CodeMirror(null,document.options);"+'cm.setOption("mode", "javascript");'+"debugger;"+"\x3c/script\x3e";html.push(scriptTag);
html.push('\x3c/head\x3e\x3cbody style\x3d"border-width: 0;" id\x3d"editbox" class\x3d"editbox" spellcheck\x3d"'+(options.disableSpellcheck?"false":"true")+'"\x3e'+scriptTag+"\x3c/body\x3e\x3c/html\x3e");return html.join("")},initCodeMirror2:function(fsMode,fileName){var thiz=this;this.editorFrame=domConstruct.create("iframe",{src:"javascript:;"},dojo.doc.createElement("div"));this.options=this.setDefaults();var options=this.options;var frame=this.editorFrame;frame.frameBorder=0;frame.style.border=
"0";frame.style.width="100%";frame.style.height="100%";frame.style.display="block";var div=this.wrapping=domConstruct.create("div");div.style.position="relative";div.className="CodeMirror-wrapping";div.style.width=options.width;div.style.height=options.height=="dynamic"?options.minHeight+"px":options.height;var teHack=this.textareaHack=domConstruct.create("textarea");div.appendChild(teHack);teHack.style.position="absolute";teHack.style.left="-10000px";teHack.style.width="10px";teHack.tabIndex=1E5;
this.containerNode.appendChild(div);div.appendChild(frame);this.options.textWrapping=this.textWrapping;this.options.lineNumbers=this.lineNumbers;this.win=frame.contentWindow;this.win.document.open();this.win.document.write("asdfasdfasdf asdfsdf");this.win.document.close();return},initCodeMirror:function(fsMode,fileName){var thiz=this;this.codeMirror=new CodeMirror(this.containerNode,{lineNumbers:true,matchBrackets:true,stylesheet:[],path:"",iframeClass:"iframeclass",passDelay:200,passTime:50,lineNumberDelay:200,
lineNumberTime:50,continuousScanning:false,saveFunction:null,onLoad:null,onChange:null,undoDepth:50,undoDelay:800,disableSpellcheck:true,textWrapping:true,width:"",height:"300px",minHeight:100,autoMatchParens:false,parserConfig:null,tabMode:"indent",enterMode:"indent",electricChars:true,reindentOnLoad:false,activeTokens:null,onCursorActivity:null,firstLineNumber:1,onLineNumberClick:null,domain:null,noScriptCaching:true,mode:"application/x-httpd-php",indentUnit:4,readOnly:false,foldGutter:true,gutters:["CodeMirror-linenumbers",
"CodeMirror-foldgutter"],extraKeys:{"F11":function(cm){cm.setOption("fullScreen",!thiz.codeMirror.getOption("fullScreen"))},"Esc":function(cm){if(thiz.codeMirror.getOption("fullScreen"))thiz.codeMirror.setOption("fullScreen",false)}}});var ext=utils.getFileExtension(fileName);if(ext==="html")ext="htmlmixed";if(ext==="js")ext="javascript";if(ext==="json")ext="javascript";if(ext==="sh")ext="shell";if(ext==="cp")ext="xml";if(ext==="less")ext="less";this.codeMirror.setOption("mode",ext);CodeMirror.autoLoadMode(this.codeMirror,
ext);this.loadContent(fileName)},onOpen:function(fileName){CodeMirror.modeURL=this.root+"/mode/%N/%N.js";var path="plugins/editor.codemirror/CodeMirror/";var extension=utils.getFileExtension(fileName);var parserFile;var styleSheet;var parserConfig={};switch(extension){case "js":case "json":parserFile=["tokenizejavascript.js","parsejavascript.js"];styleSheet=path+"css/jscolors.css";if(extension=="json")parserConfig.json=true;break;case "xml":parserFile="parsexml.js";styleSheet=path+"css/xmlcolors.css";
break;case "css":parserFile="parsecss.js";styleSheet=path+"css/csscolors.css";break;case "html":parserFile=["parsexml.js","parsecss.js","tokenizejavascript.js","parsejavascript.js","parsehtmlmixed.js"];styleSheet=[path+"css/xmlcolors.css",path+"css/jscolors.css",path+"css/csscolors.css"];break;case "sparql":parserFile="parsesparql.js";styleSheet=path+"css/sparqlcolors.css";break;case "php":case "phtml":parserFile=["parsexml.js","parsecss.js","tokenizejavascript.js","parsejavascript.js","../contrib/php/js/tokenizephp.js",
"../contrib/php/js/parsephp.js","../contrib/php/js/parsephphtmlmixed.js"];styleSheet=[path+"css/xmlcolors.css",path+"css/jscolors.css",path+"css/csscolors.css",path+"/contrib/php/css/phpcolors.css"];break;case "py":parserFile="../contrib/python/js/parsepython.js";styleSheet=path+"contrib/python/css/pythoncolors.css";ResourcesManager.prototype.loadCSSResource("plugins/editor.codemirror/css/linenumbers-py.css");break;case "lua":parserFile="../contrib/lua/js/parselua.js";styleSheet=path+"contrib/python/css/luacolors.css";
break;case "c#":parserFile=["../contrib/csharp/js/tokenizecsharp.js","../contrib/csharp/js/parsecsharp.js"];styleSheet=path+"contrib/csharp/css/csharpcolors.css";break;case "java":case "jsp":parserFile=["../contrib/java/js/tokenizejava.js","../contrib/java/js/parsejava.js"];styleSheet=path+"contrib/java/css/javacolors.css";break;case "sql":parserFile="../contrib/sql/js/parsesql.js";styleSheet=path+"contrib/sql/css/sqlcolors.css";break;case "xquery":parserFile=["../contrib/xquery/js/tokenizexquery.js",
"../contrib/xquery/js/parsexquery.js"];styleSheet=path+"contrib/xquery/css/xquerycolors.css";break;default:parserFile="parsedummy.js";styleSheet=path+"../css/dummycolors.css";break}this.options={path:path+"js/",parserfile:parserFile,stylesheet:styleSheet,parserConfig:parserConfig}},onHide:function(){},onClose2:function(){utils.destroyWidget(this.codeMirror);this.inherited(arguments);utils.destroyWidget(this.id);var parent=dijit.byId("topTabs");parent.removeChild(this)},destroy:function(){},dataRecievedJSON:function(result){this.content=
result.description;this.title=result.title;this.titleWidget.value=this.title;this.attachCKEditor()},saveContentCB:function(thiz,res){console.error("content saved")},saveContent:function(){var value=this.aceEditor.get("value");sctx.getStyleManager().updateSheet(sctx.getSession().getUUID(),sctx.getSession().getAppId(),utils.toString(this.dataItem.path),value);sctx.getWorkflowManager().onCSSEditorChange(this.dataItem,value)},startup:function(){if(this.didStartup)return;this.set("closable",true);this.inherited(arguments);
this.didStartup=true;var thiz=this;this.createEditorControls();this.onOpen(this.filePath);thiz.initCodeMirror(false,thiz.filePath);connect.connect(this.containerNode,"onclick",function(evt){thiz.focus()});connect.connect(this.domNode,"onkeyup",function(evt){if(evt.keyCode==17)thiz.ctrlDown=false});connect.connect(this.domNode,"onkeydown",function(evt){if(evt.keyCode==17)thiz.ctrlDown=true;if(thiz.ctrlDown&&evt.keyCode==83){evt.preventDefault();thiz.onSave()}})}})})},"xfile/views/ContextMenuHandler":function(){define("xfile/views/ContextMenuHandler",
["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","xide/views/OkCancelDialog","dijit/MenuSeparator","xide/types","xide/utils","xfile/views/FileRenameDialog","xide/widgets/TemplatedWidgetBase","xfile/views/EditorPluginMixin","xfile/widgets/EditorSelector","xide/mixins/EventedMixin"],function(declare,lang,domClass,OkCancelDialog,MenuSeparator,types,utils,FileRenameDialog,TemplatedWidgetBase,EditorPluginMixin,EditorSelector,EventedMixin){return declare("xfile.views.ContextMenuHandler",[TemplatedWidgetBase,
EditorPluginMixin,EventedMixin],{delegate:null,panelDelegate:null,panelManager:null,menu:null,node:null,store:null,model:null,pMenuContextItem:null,currentInsertionNode:null,menueItemEdit:null,menueItemOpen:null,menueItemOpenAlt:null,menueItemRefresh:null,menueItemRename:null,menueItemCopy:null,menueItemPaste:null,menueItemCut:null,menueItemDelete:null,menueItemCompress:null,menueItemProperties:null,menueItemStyleSettings:null,templateString:"\x3cdiv\x3e\x3c/div\x3e",addJQueryClasses:true,pluginItems:null,
buttons:null,getCurrentSelection:function(){var selection=null;if(this.pMenuContextItem)return[this.pMenuContextItem];else if(this.panelDelegate)selection=this.panelDelegate.getSelection();return selection},onCut:function(e){var selection=this.getCurrentSelection()||this.panelDelegate.getSelection();if(selection){var struct={items:selection};this.publish(types.EVENTS.ON_CLIPBOARD_CUT,struct,this)}},onPaste:function(e){this.publish(types.EVENTS.ON_CLIPBOARD_PASTE,{owner:this},this)},onCopy:function(e){var selection=
this.getCurrentSelection()||this.panelDelegate.getSelection();if(selection){var struct={items:selection};this.publish(types.EVENTS.ON_CLIPBOARD_COPY,struct,this)}},onCompress:function(e){var activeItem=this.getCurrentSelection()||this.delegate.getSelection();if(activeItem&&this.panelManager.compressItem)this.panelManager.compressItem(activeItem)},onOpenItem:function(e){if(this.panelDelegate)this.panelDelegate.openItem(this.getCurrentSelection())},onOpenItemAlt:function(e){if(this.panelDelegate)this.panelDelegate.openItemAlternate(this.pMenuContextItem)},
onEdit:function(e){},_deleteDataItem:function(normalizedItem){var dstStore=this.store;var test=""+normalizedItem["id"];var thiz=this;var found=utils.deleteStoreItemById(this.store,test);if(found)sctx.getDBManager().deleteDataSource(test)},onRename:function(e){var activeItem=this.getCurrentSelection()||this.delegate.getActiveItem();var thiz=this;if(activeItem)thiz.panelManager.onRename(activeItem)},onDelete:function(e){var activeItem=this.getCurrentSelection()||this.delegate.getActiveItem();var thiz=
this;if(activeItem)this.panelDelegate.deleteItem(activeItem)},onRefresh:function(e){var activeItem=this.getCurrentSelection()||this.delegate.getActiveItem();if(activeItem&&activeItem.params.item);},onOpenProperties:function(e){var activeItem=this.getCurrentSelection()||this.delegate.getActiveItem();if(activeItem&&this.delegate.onOpenProperties)this.delegate.onOpenProperties(activeItem)},prepareEditorsSelector:function(editButton,editors){var thiz=this;var pSubMenu=new dijit.Menu({parentMenu:this.menu,
onOpen:function(){if(thiz.addJQueryClasses&&this.domNode.parentNode){var _p=this.domNode.parentNode;domClass.add(_p,"ui-menu ui-widget ui-widget-content ui-corner-all")}}});for(var i=0;i<editors.length;i++){var editor=editors[i];var _cb=editor.onEdit;var button=this.createMenuItem(editor.name,_cb,editor.iconClass,types.OPERATION.CUSTOM,pSubMenu)}var popupMenu=new dijit.PopupMenuItem({label:"Open With",popup:pSubMenu,iconClass:"fa-mail-forward",onHide:function(){thiz.menu.removeChild(pSubMenu)}});
this.editSelector=popupMenu;this.menu.addChild(popupMenu);dojo.place(popupMenu.domNode,editButton.domNode,"after");dojo.connect(pSubMenu,"_openMyself",this,function(e){if(thiz.addJQueryClasses&&pSubMenu.domNode&&popupMenu.domNode.parentNode){var _p=pSubMenu.domNode.parentNode;domClass.add(_p,"ui-menu ui-widget ui-widget-content ui-corner-all")}});return pSubMenu},updateOpenItem:function(){var activeItem=this.getCurrentSelection()||this.delegate.getActiveItem();if(!activeItem)return;if(lang.isArray(activeItem)&&
activeItem.length>0)activeItem=activeItem[0];utils.destroyWidget(this.editSelector);this.editSelector=null;var btnEdit=this.menueItemOpen;var editors=EditorPluginMixin.getEditors(activeItem);if(btnEdit)if(editors){if(btnEdit instanceof dijit.MenuItem)try{var newEditMenu=this.prepareEditorsSelector(btnEdit,editors)}catch(e){debugger}}else if(this.editSelector){utils.destroyWidget(this.editSelector);this.editSelector=null}},onOpen:function(){var activeItem=this.getCurrentSelection()||this.delegate.getActiveItem();
var struct={menu:this.menu,item:activeItem,openWithMenuItem:null};try{this.updateOpenItem()}catch(e){debugger}if(activeItem&&activeItem.params&&activeItem.item);},createMenuItem:function(name,clickCB,iconClass,operation,menu){var thiz=this;var _title=this.translate(name);var item=new dijit.MenuItem({label:_title,onClick:function(){if(clickCB)clickCB(thiz.getCurrentSelection()||thiz.delegate.getActiveItem())},iconClass:iconClass||null,operation:operation});var _menu=menu||this.menu;_menu.addChild(item);
if(this.addJQueryClasses)domClass.add(item.domNode,"ui-menu-item");domClass.remove(item.iconNode,"dijitReset");domClass.add(item.iconNode,"actionToolbarButtonElusive");this.buttons.push(item);return item},onClose:function(node){for(var i=0;i<this.pluginItems.length;i++){this.menu.removeChild(this.pluginItems[i]);utils.destroyWidget(this.pluginItems[i])}this.pluginItems=[]},createMenu:function(node){var thiz=this;this.menu=new dijit.Menu({targetNodeIds:[node.id],onClose:function(){thiz.onClose()}});
var allowedActions=this.config.ALLOWED_ACTIONS||{"0":false,1:true,2:true,3:true,4:true,5:true,6:true,7:true,8:true,9:true,10:true,11:true,12:true};var opsInt=types.OPERATION_INT;if(allowedActions[opsInt.OPEN]){this.menueItemOpen=this.createMenuItem("open",lang.hitch(thiz,"onOpenItem")," el-icon-return-key",types.OPERATION.EDIT);this.menueItemOpenAlt=this.createMenuItem("open_alternate",lang.hitch(thiz,"onOpenItemAlt"),"el-icon-share-alt",null)}this.menu.addChild(new MenuSeparator);if(allowedActions[opsInt.DELETE])this.menueItemDelete=
this.createMenuItem("remove",lang.hitch(thiz,"onDelete"),"el-icon-remove-circle",types.OPERATION.DELETE);if(allowedActions[opsInt.RENAME])this.menueItemRename=this.createMenuItem("rename",lang.hitch(thiz,"onRename"),"el-icon-edit",types.OPERATION.RENAME);if(allowedActions[opsInt.COMPRESS])this.menueItemCompress=this.createMenuItem("compress",lang.hitch(thiz,"onCompress"),"el-icon-briefcase",types.OPERATION.COMPRESS);this.menu.addChild(new MenuSeparator);if(allowedActions[opsInt.COPY_PASTE]){this.menueItemCopy=
this.createMenuItem("copy",lang.hitch(thiz,"onCopy"),"fa-copy",types.OPERATION.COPY);this.menueItemPaste=this.createMenuItem("paste",lang.hitch(thiz,"onPaste"),"fa-paste",types.OPERATION.PASTE);this.menueItemCut=this.createMenuItem("cut",lang.hitch(thiz,"onCut"),"fa-cut",null)}this.menu.addChild(new MenuSeparator);if(allowedActions[opsInt.INFO])this.menueItemProperties=this.createMenuItem("info",lang.hitch(thiz,"onOpenProperties"),"el-icon-info-sign",types.OPERATION.INFO);this.menu.bindDomNode(node.domNode);
dojo.connect(this.menu,"_openMyself",this,function(e){try{thiz.onOpen(e);if(thiz.addJQueryClasses&&thiz.menu.domNode&&thiz.menu.domNode.parentNode){var _p=thiz.menu.domNode.parentNode;domClass.add(_p,"ui-menu ui-widget ui-widget-content ui-corner-all")}}catch(e){}})},initWithNode:function(node){this.pluginItems=[];this.buttons=[];this._setupTranslations();this.createMenu(node)},startup:function(){this.inherited(arguments)}})})},"dijit/_base/focus":function(){define("dijit/_base/focus",["dojo/_base/array",
"dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../main"],function(array,dom,lang,topic,win,focus,dijit){var exports={_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed},getBookmark:function(){var bm,rg,tg,sel=win.doc.selection,cf=focus.curNode;if(win.global.getSelection){sel=win.global.getSelection();if(sel)if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||tg=="input"&&(!cf.type||cf.type.toLowerCase()==
"text")){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return{isCollapsed:sel.end<=sel.start,mark:sel}}}bm={isCollapsed:true};if(sel.rangeCount)bm.mark=sel.getRangeAt(0).cloneRange()}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()}}}else if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input"))if(sel.type&&sel.type.toLowerCase()=="none")return{isCollapsed:true,mark:null};else{rg=sel.createRange();return{isCollapsed:rg.text&&
rg.text.length?false:true,mark:{range:rg,pRange:true}}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length)}catch(e){bm.isCollapsed=true;return bm}if(sel.type.toUpperCase()=="CONTROL")if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len)bm.mark.push(rg.item(i++))}else{bm.isCollapsed=true;bm.mark=null}else bm.mark=rg.getBookmark()}else 0&&console.warn("No idea how to store the current selection for this browser!");return bm},moveToBookmark:function(bookmark){var _doc=
win.doc,mark=bookmark.mark;if(mark)if(win.global.getSelection){var sel=win.global.getSelection();if(sel&&sel.removeAllRanges)if(mark.pRange){var n=mark.node;n.selectionStart=mark.start;n.selectionEnd=mark.end}else{sel.removeAllRanges();sel.addRange(mark)}else 0&&console.warn("No idea how to restore selection for this browser!")}else if(_doc.selection&&mark){var rg;if(mark.pRange)rg=mark.range;else if(lang.isArray(mark)){rg=_doc.body.createControlRange();array.forEach(mark,function(n){rg.addElement(n)})}else{rg=
_doc.body.createTextRange();rg.moveToBookmark(mark)}rg.select()}},getFocus:function(menu,openedForWindow){var node=!focus.curNode||menu&&dom.isDescendant(focus.curNode,menu.domNode)?dijit._prevFocus:focus.curNode;return{node:node,bookmark:node&&node==focus.curNode&&win.withGlobal(openedForWindow||win.global,dijit.getBookmark),openedForWindow:openedForWindow}},_activeStack:[],registerIframe:function(iframe){return focus.registerIframe(iframe)},unregisterIframe:function(handle){handle&&handle.remove()},
registerWin:function(targetWindow,effectiveNode){return focus.registerWin(targetWindow,effectiveNode)},unregisterWin:function(handle){handle&&handle.remove()}};focus.focus=function(handle){if(!handle)return;var node="node"in handle?handle.node:handle,bookmark=handle.bookmark,openedForWindow=handle.openedForWindow,collapsed=bookmark?bookmark.isCollapsed:false;if(node){var focusNode=node.tagName.toLowerCase()=="iframe"?node.contentWindow:node;if(focusNode&&focusNode.focus)try{focusNode.focus()}catch(e){}focus._onFocusNode(node)}if(bookmark&&
win.withGlobal(openedForWindow||win.global,dijit.isCollapsed)&&!collapsed){if(openedForWindow)openedForWindow.focus();try{win.withGlobal(openedForWindow||win.global,dijit.moveToBookmark,null,[bookmark])}catch(e2){}}};focus.watch("curNode",function(name,oldVal,newVal){dijit._curFocus=newVal;dijit._prevFocus=oldVal;if(newVal)topic.publish("focusNode",newVal)});focus.watch("activeStack",function(name,oldVal,newVal){dijit._activeStack=newVal});focus.on("widget-blur",function(widget,by){topic.publish("widgetBlur",
widget,by)});focus.on("widget-focus",function(widget,by){topic.publish("widgetFocus",widget,by)});lang.mixin(dijit,exports);return dijit})},"xide/factory/Widgets":function(){define(["dojo/dom-class","dojo/_base/lang","xide/factory","xide/types","xide/utils","xide/widgets/Button","xide/widgets/ToggleButton","xide/widgets/ImageWidget","xide/widgets/FileWidget","xide/widgets/SelectWidget","xide/widgets/Expression","xide/widgets/ArgumentsWidget","xide/widgets/RichTextWidget","xide/widgets/JSONEditorWidget",
"xide/widgets/ExpressionEditor","xide/widgets/WidgetReference","xide/widgets/DomStyleProperties"],function(domClass,lang,factory,types,utils,Button,ToggleButton,ImageWidget,FileWidget,SelectWidget,Expression,ArgumentsWidget,RichTextWidget,JSONEditorWidget,ExpressionEditor,WidgetReference,DomStyleProperties){factory.createDijit=function(json,onChangeHander,storeItem,ci){if(!json.type){0&&console.warn("type is missing for : "+json.title);return null}var _ctrArgs={delegate:onChangeHander,intermediateChanges:ci.intermediateChanges!=
null?ci.intermediateChanges:true,vertical:ci.vertical!=null?ci.vertical:false,userData:ci};if(ci.widget!=null)lang.mixin(_ctrArgs,ci.widget);if(json.type=="DataWidget"){_ctrArgs=lang.mixin(_ctrArgs,{preload:true,title:"Content Source",value:json.props.value,oriValue:json.props.oriValue,storeItem:storeItem,href:"templates/DataWidget.html"});return new xas.widgets.DataWidget(_ctrArgs)}if(json.type=="ImageWidget"){_ctrArgs=lang.mixin(_ctrArgs,{preload:true,title:json.title,storeItem:storeItem,href:"templates/ImageWidget.html"});
return new ImageWidget(_ctrArgs)}if(json.type=="FileWidget"){_ctrArgs=lang.mixin(_ctrArgs,{preload:true,title:json.props.title||"File",value:json.props.value,oriValue:json.props.oriValue,storeItem:storeItem,href:"templates/DataWidget.html"});return new xide.widgets.FileWidget(_ctrArgs)}if(json.type=="Expression"){_ctrArgs=lang.mixin(_ctrArgs,{preload:true,title:json.props.title||"Expression",value:json.props.value,oriValue:json.props.oriValue,storeItem:storeItem});return new xide.widgets.Expression(_ctrArgs)}if(json.type==
"WidgetReference"){_ctrArgs=lang.mixin(_ctrArgs,{preload:true,title:json.props.title||"Widget Reference",value:json.props.value,oriValue:json.props.oriValue,storeItem:storeItem});return new xide.widgets.WidgetReference(_ctrArgs)}if(json.type=="DomStyleProperties"){_ctrArgs=lang.mixin(_ctrArgs,{preload:true,title:json.props.title||"Style Properties",value:json.props.value,oriValue:json.props.oriValue,storeItem:storeItem});return new xide.widgets.DomStyleProperties(_ctrArgs)}if(json.type=="ExpressionEditor"){_ctrArgs=
lang.mixin(_ctrArgs,{preload:true,title:json.props.title||"ExpressionEditor",value:json.props.value,oriValue:json.props.oriValue,storeItem:storeItem});return new xide.widgets.ExpressionEditor(_ctrArgs)}if(json.type=="Arguments"){_ctrArgs=lang.mixin(_ctrArgs,{preload:true,title:json.props.title||"Arguments",value:json.props.value,oriValue:json.props.oriValue,storeItem:storeItem});return new xide.widgets.ArgumentsWidget(_ctrArgs)}if(json.type=="IconWidget"){_ctrArgs=lang.mixin(_ctrArgs,{preload:true,
title:json.title,storeItem:storeItem,href:"templates/IconWidget.html"});return new xas.widgets.IconWidget(_ctrArgs)}var type=json.type;if(json.nativeType){json.props.intermediateChanges=true;type=json.nativeType}var cls=dojo.getObject(type,false,dijit.form);if(!cls){cls=dojo.getObject(type,false,dijit);if(!cls)cls=dojo.getObject(type,false)}if(!cls)cls=dojo.getObject(type,false,xide.widgets);if(!cls)throw new Error("cannot find your widget type!");var myDijit=null;if(ci.widget!=null)lang.mixin(json.props,
ci.widget);try{myDijit=new cls(json.props,json.node)}catch(e){console.error("constructing dijit widget failed : "+e.message);return null}var resultWidget=myDijit;if(json.type=="SelectWidget"){_ctrArgs=lang.mixin(_ctrArgs,{title:json.title,nativeWidget:myDijit});resultWidget=new xide.widgets.SelectWidget(_ctrArgs)}if(json.type=="TextWidget"){_ctrArgs=lang.mixin(_ctrArgs,{title:json.title,nativeWidget:myDijit});resultWidget=new xide.widgets.SelectWidget(_ctrArgs)}var changeWidget=myDijit;if(resultWidget.nativeWidget)changeWidget=
null;if(changeWidget)if(!myDijit instanceof dijit.form.CheckBox)dojo.connect(changeWidget,"onChange",function(item){if(onChangeHander&&onChangeHander.widgetChanged)onChangeHander.widgetChanged(this)});if(!myDijit instanceof dijit.form.CheckBox&&myDijit instanceof dijit.form.Button)dojo.connect(resultWidget,"onClick",function(item){if(onChangeHander&&onChangeHander.widgetChanged)onChangeHander.widgetChanged(this)});return resultWidget};factory.createWidgetData=function(data,value){var res={type:"",
nativeType:null,props:{options:data.options||[]},title:"NoTitle",node:null,autocomplete:true,vertical:data.vertical!=null?data.vertical:false};res.type=utils.getWidgetType(data.type);var name=utils.toString(data.name);var _title=utils.toString(data.title);if(utils.isValidString(_title)&&_title.length>0&&_title[0].length>0)name=_title;if(data.type==types.ECIType.ENUMERATION){if(!data.options){var options=types.resolveEnumeration(data.enumType);if(options&&options.length>0)res.props.options=options}res.props.value=
data.value;res.props.prevValue=data.value;res.type="SelectWidget";res.nativeType="xide.form.Select";res.autocomplete=true}if(data.type==types.ECIType.STRING){res.props.value=data.value;res.props.prevValue=data.value;res.type="TextWidget";res.nativeType="TextBox";res.autocomplete=true}if(data.type==types.ECIType.SCHEMAS){res.props.valueStr=data.value;res.type="JSONEditorWidget";res.props.newEntryTemplate={isRoot:true,id:"root",schema:"{class:'pmedia.types.CList',items:%query_categories::schema_categories%}"};
res.props.initialTemplate=[];res.props.aceEditorOptions={region:"center",value:"",style:"margin: 0; padding: 0; overflow: auto;position:relative;height:100%;width:100%;",theme:"twilight",mode:"json",readOnly:false,tabSize:8,softTabs:true,wordWrap:false,printMargin:120,showPrintMargin:true,highlightActiveLine:true,fontSize:"12px",showGutter:true}}if(data.type==types.ECIType.JSON_DATA){res.props.valueStr=data.value;res.type="JSONEditorWidget";res.props.newEntryTemplate={isRoot:true,id:"root",schema:"{}"};
res.props.initialTemplate=[];res.props.aceEditorOptions={region:"center",value:"",style:"margin: 0; padding: 0; overflow: auto;position:relative;height:100%;width:100%;",theme:"twilight",mode:"json",readOnly:false,tabSize:8,softTabs:true,wordWrap:false,printMargin:120,showPrintMargin:true,highlightActiveLine:true,fontSize:"12px",showGutter:true}}if(data.type==types.ECIType.QUERIES){res.props.valueStr=data.value;res.type="JSONEditorWidget";res.props.newEntryTemplate={id:"query_categories",query:" SELECT jos_mt_cats.cat_id refId, "+
"jos_mt_cats.cat_name res_title, "+"jos_mt_cats.cat_published res_published, "+"jos_mt_cats.cat_parent res_groupId, "+"jos_mt_cats.cat_image res_image "+"FROM jos_mt_cats "};res.props.initialTemplate=[];res.props.aceEditorOptions={region:"center",value:"",style:"margin: 0; padding: 0; overflow: auto;position:relative;height:100%;width:100%;",theme:"twilight",mode:"sql",readOnly:false,tabSize:4,softTabs:false,wordWrap:true,showPrintMargin:false,highlightActiveLine:false,fontSize:"12px",showGutter:true}}if(data.type==
types.ECIType.RELATIONS){res.props.valueStr=data.value;res.type="JSONEditorWidget";res.props.newEntryTemplate={order:-1,type:"ebCategoryDetail"};res.props.initialTemplate=[];res.props.aceEditorOptions={region:"center",value:"",style:"margin: 0; padding: 0; overflow: auto;position:relative;height:100%;width:100%;",theme:"twilight",mode:"json",readOnly:false,tabSize:4,softTabs:false,wordWrap:true,showPrintMargin:false,highlightActiveLine:false,fontSize:"12px",showGutter:true}}if(data.type==types.ECIType.BOOL){res.props["checked"]=
utils.toBoolean(data.value);res.props.value=data.value;res.props.prevValue=data.value;res.type="SelectWidget";res.nativeType="CheckBox"}if(data.type==types.ECIType.IMAGE){res.props.value=data.value;res.type="ImageWidget";if(name=="BACKGROUND")name="Background"}if(data.type==types.ECIType.FILE){res.props.value=data.value;res.type="FileWidget"}if(data.type==types.ECIType.SCRIPT){res.props.value=data.value;res.type="ScriptWidget"}if(data.type==types.ECIType.RICHTEXT){res.props.value=data.value;res.type=
"RichTextWidget"}if(data.type==types.ECIType.ICON){res.props.value=data.value;res.type="IconWidget"}if(data.type==types.ECIType.REFERENCE){res.props.disabled=!data.enabled;res.props.innerHTML="Select"}if(res.type===null||res.type==""){var _type=types.resolveWidgetMapping(data.type);if(_type)res.type=_type}res.title=name;if(res.title==undefined);return res};factory.checkForCustomTypes=function(cis){var addedCIS=[];var removedCIs=[];for(var i=0;i<cis.length;i++){var ci=cis[i];var ciType=utils.toInt(ci.type);
if(ciType>types.ECIType.END){var resolved=types.resolveType(ciType);if(resolved){lang.mixin(addedCIS,resolved);removedCIs.push(ci)}}}if(addedCIS.length>0)cis=cis.concat(addedCIS);if(removedCIs)for(var i in removedCIs)cis.remove(removedCIs[i]);return cis};factory.createWidgetsFromArray=function(data,changeHandler,storeItem,showInvisible){if(data==null)return null;var res=[];data=factory.checkForCustomTypes(data);for(var i=0;i<data.length;i++){var inDef=data[i];if(!inDef)continue;if(showInvisible==
false&&utils.toBoolean(inDef.visible)==false)continue;var wData=factory.createWidgetData(inDef,inDef.value);if(!wData)continue;var widget=factory.createDijit(wData,changeHandler,storeItem,inDef);if(!widget)continue;widget["userData"]=inDef;widget["owner"]=changeHandler;widget["storeItem"]=storeItem;widget["order"]=i;inDef["_widget"]=widget;factory.publish(types.EVENTS.ON_CREATED_WIDGET,{ci:inDef,widget:widget,storeItem:storeItem,owner:changeHandler});if(widget.nativeWidget){widget.nativeWidget["userData"]=
inDef;widget.nativeWidget["storeItem"]=storeItem}res.push(widget)}res.sort(function(a,b){var orderA=utils.toInt(a.userData.order);var orderB=utils.toInt(b.userData.order);return orderA-orderB});return res};factory.createButton=function(dstNode,iconClass,buttonClass,style,label,onClickCB,delegate){var anchor=dojo.doc.createElement("DIV",{});var wButton=new xide.widgets.Button({role:"button",showLabel:label?true:false,label:label?label:"",checked:true,iconClass:""+iconClass||"",cssClass:buttonClass,
style:""+style||""},anchor);dstNode.appendChild(wButton.domNode);if(onClickCB&&delegate)dojo.connect(wButton,"onClick",lang.hitch(delegate,onClickCB));wButton.startup();if(buttonClass&&buttonClass.length>0&&lang.isString(buttonClass))domClass.add(wButton.domNode,buttonClass);return wButton};factory.createToggleButton=function(dstNode,iconClass,buttonClass,style,label,onClickCB,delegate,checked){var anchor=dojo.doc.createElement("DIV",{});var wButton=new xide.widgets.ToggleButton({role:"button",showLabel:label?
true:false,label:label?label:"",checked:checked,iconClass:""+iconClass||"",cssClass:buttonClass,style:""+style||""},anchor);dstNode.appendChild(wButton.domNode);if(onClickCB&&delegate)dojo.connect(wButton,"onClick",function(item){onClickCB(delegate,wButton)});wButton.startup();if(buttonClass&&buttonClass.length>0)domClass.add(wButton.domNode,buttonClass);return wButton};factory.createEditBox=function(dstNode,style,labelText,value,onClickCB,delegate){var anchor=dojo.doc.createElement("DIV",{"className":"labelRoot"});
var label=null;if(labelText!=null)label=dojo.create("LABEL",{innerHTML:labelText+"",style:""+style||""},anchor);var wButton=new dijit.form.TextBox({value:value?value:"",style:""+style||""},dojo.doc.createElement("DIV"));anchor.appendChild(wButton.domNode);dstNode.appendChild(anchor);domClass.add(anchor,"labelRoot");if(label)wButton["labelNode"]=label;if(onClickCB&&delegate)dojo.connect(wButton,"onClick",function(item){onClickCB(delegate,wButton)});return wButton};factory.createValidationTextBox=function(dstNode,
style,labelText,value,validator,delegate,invalidMessage,missingMessage,toolTipPosition){var anchor=dojo.doc.createElement("DIV",{"className":"labelRoot"});var label=dojo.create("LABEL",{innerHTML:labelText+"",style:""+style||""},anchor);var wButton=new dijit.form.ValidationTextBox({value:value?value:"",style:""+style||"",promptMessage:"Enter new file name",validator:validator,required:true,delegate:delegate,toolTipPosition:toolTipPosition||["after-centered","before-centered"]},dojo.doc.createElement("DIV"));
anchor.appendChild(wButton.domNode);dstNode.appendChild(anchor);domClass.add(anchor,"labelRoot");return wButton};factory.createToolbarButton=function(dstNode,iconClass,buttonClass,style,label,onClickCB,delegate){var anchor=dojo.doc.createElement("DIV",{});var wButton=new dijit.form.Button({role:"button",showLabel:label?true:false,label:label?label:"",checked:true,iconClass:""+iconClass||"",style:""+style||""},anchor);dstNode.appendChild(wButton.domNode);if(onClickCB&&delegate)dojo.connect(wButton,
"onClick",function(item){onClickCB(delegate,wButton)});wButton.startup();if(buttonClass&&buttonClass.length>0)domClass.add(wButton.domNode,buttonClass);return wButton};factory.createCheckBox=function(dstNode,style,labelText,value,onClickCB,delegate,checked,toolTipText,className){var anchor=dojo.doc.createElement("DIV",{});var wButton=new dijit.form.CheckBox({value:value?value:"",style:""+style||"",checked:checked!=null?checked:false},dojo.doc.createElement("DIV"));anchor.appendChild(wButton.domNode);
var label=dojo.create("LABEL",{innerHTML:labelText+"",style:""+style+"margin-right:3px;"||"",id:""+wButton.id+"Label"});anchor.appendChild(label);dstNode.appendChild(anchor);if(onClickCB&&delegate)dojo.connect(wButton,"onClick",function(item){onClickCB(delegate,wButton)});if(toolTipText)var tt=new dijit.Tooltip({innerHTML:toolTipText,showDelay:500,connectId:[""+wButton.id+"Label"]});if(className)domClass.add(anchor,className);return wButton};return factory})},"dijit/PopupMenuBarItem":function(){define("dijit/PopupMenuBarItem",
["dojo/_base/declare","./PopupMenuItem","./MenuBarItem"],function(declare,PopupMenuItem,MenuBarItem){var _MenuBarItemMixin=MenuBarItem._MenuBarItemMixin;return declare("dijit.PopupMenuBarItem",[PopupMenuItem,_MenuBarItemMixin],{})})},"dijit/form/_FormMixin":function(){define("dijit/form/_FormMixin",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/window"],function(array,declare,kernel,lang,on,winUtils){return declare("dijit.form._FormMixin",null,{state:"",
_getDescendantFormWidgets:function(children){var res=[];array.forEach(children||this.getChildren(),function(child){if("value"in child)res.push(child);else res=res.concat(this._getDescendantFormWidgets(child.getChildren()))},this);return res},reset:function(){array.forEach(this._getDescendantFormWidgets(),function(widget){if(widget.reset)widget.reset()})},validate:function(){var didFocus=false;return array.every(array.map(this._getDescendantFormWidgets(),function(widget){widget._hasBeenBlurred=true;
var valid=widget.disabled||!widget.validate||widget.validate();if(!valid&&!didFocus){winUtils.scrollIntoView(widget.containerNode||widget.domNode);widget.focus();didFocus=true}return valid}),function(item){return item})},setValues:function(val){kernel.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",val)},_setValueAttr:function(obj){var map={};array.forEach(this._getDescendantFormWidgets(),function(widget){if(!widget.name)return;
var entry=map[widget.name]||(map[widget.name]=[]);entry.push(widget)});for(var name in map){if(!map.hasOwnProperty(name))continue;var widgets=map[name],values=lang.getObject(name,false,obj);if(values===undefined)continue;values=[].concat(values);if(typeof widgets[0].checked=="boolean")array.forEach(widgets,function(w){w.set("value",array.indexOf(values,w._get("value"))!=-1)});else if(widgets[0].multiple)widgets[0].set("value",values);else array.forEach(widgets,function(w,i){w.set("value",values[i])})}},
getValues:function(){kernel.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var obj={};array.forEach(this._getDescendantFormWidgets(),function(widget){var name=widget.name;if(!name||widget.disabled)return;var value=widget.get("value");if(typeof widget.checked=="boolean")if(/Radio/.test(widget.declaredClass))if(value!==false)lang.setObject(name,value,obj);else{value=lang.getObject(name,false,obj);if(value===
undefined)lang.setObject(name,null,obj)}else{var ary=lang.getObject(name,false,obj);if(!ary){ary=[];lang.setObject(name,ary,obj)}if(value!==false)ary.push(value)}else{var prev=lang.getObject(name,false,obj);if(typeof prev!="undefined")if(lang.isArray(prev))prev.push(value);else lang.setObject(name,[prev,value],obj);else lang.setObject(name,value,obj)}});return obj},isValid:function(){return this.state==""},onValidStateChange:function(){},_getState:function(){var states=array.map(this._descendants,
function(w){return w.get("state")||""});return array.indexOf(states,"Error")>=0?"Error":array.indexOf(states,"Incomplete")>=0?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(inStartup){this._descendants=this._getDescendantFormWidgets();array.forEach(this._descendants,function(child){if(!child._started)child.startup()});if(!inStartup)this._onChildChange()},_onChildChange:function(attr){if(!attr||attr=="state"||attr=="disabled")this._set("state",this._getState());if(!attr||
attr=="value"||attr=="disabled"||attr=="checked"){if(this._onChangeDelayTimer)this._onChangeDelayTimer.remove();this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10)}},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var self=this;this.own(on(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",
function(evt){if(evt.target==self.domNode)return;self._onChildChange(evt.type.replace("attrmodified-",""))}));this.watch("state",function(attr,oldVal,newVal){this.onValidStateChange(newVal=="")})},destroy:function(){this.inherited(arguments)}})})},"xide/layout/BorderContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dijit/layout/BorderContainer","dojo/dom-class","dijit/layout/utils"],function(array,declare,BorderContainer,domClass,layoutUtils){return declare("xide.layout.BorderContainer",
[BorderContainer],{splitter:false,cssClass:"borderContainer",persist:false,_splitterClass:"xide.views.ToggleSplitter",cookieName:null,postMixInProperties:function(){this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);domClass.add(this.domNode,this.cssClass)},onChangeToggleSplitterState:function(splitter,state){if(!this.persistent)return;var splitterData=[];if(this.layoutLeft&&this.layoutLeft._splitterWidget)splitterData.push({region:"left",state:this.layoutLeft._splitterWidget.state});
if(this.layoutRight&&this.layoutRight._splitterWidget)splitterData.push({region:"right",state:this.layoutRight._splitterWidget.state});if(this.layoutBottom&&this.layoutBottom._splitterWidget)splitterData.push({region:"bottom",state:this.layoutBottom._splitterWidget.state});this.ctx.getSettingsManager().write(null,".",null,{id:"splitter",data:JSON.stringify(splitterData),name:"Splitter States"},true,null)},setupToggleSplitterListeners:function(){if(this.layoutLeft&&this.layoutLeft._splitterWidget)this.layoutLeft._splitterWidget.delegate=
this;if(this.layoutRight&&this.layoutRight._splitterWidget)this.layoutRight._splitterWidget.delegate=this;if(this.layoutBottom&&this.layoutBottom._splitterWidget)this.layoutBottom._splitterWidget.delegate=this},_layoutChildren:function(changedChildId,changedChildSize){if(!this._borderBox||!this._borderBox.h)return;var childrenAndSplitters=[];array.forEach(this._getOrderedChildren(),function(pane){childrenAndSplitters.push(pane);if(pane._splitterWidget)childrenAndSplitters.push(pane._splitterWidget)});
if(this.editor.l==5)this.editor.l=0;if(this.editor.t==5)this.editor.t=0;if(this.editor.w==10)this.editor.w=0;var dim={l:this.editor.l,t:this.editor.t,w:this._borderBox.w-this.editor.w,h:this._borderBox.h-this.editor.h};var editor=this.editor;var region=editor.region;layoutUtils.layoutChildren(this.domNode,dim,childrenAndSplitters,changedChildId,changedChildSize)}})})},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style",
"dojo/_base/lang","dojo/on","dojo/sniff"],function(require,dijit,config,domConstruct,domStyle,lang,on,has){has.add("config-bgIframe",!has("touch"));function make(transparent){var iframe;if(has("ie")<9){var burl=config["dojoBlankHtmlUrl"]||require.toUrl("dojo/resources/blank.html")||'javascript:""';var html="\x3ciframe src\x3d'"+burl+"' role\x3d'presentation'"+" style\x3d'position: absolute; left: 0px; top: 0px; z-index: -1;"+(transparent?'filter:Alpha(Opacity\x3d"0");':"")+"'\x3e";iframe=document.createElement(html)}else{iframe=
domConstruct.create("iframe");iframe.src='javascript:""';iframe.className="dijitBackgroundIframe";iframe.setAttribute("role","presentation");if(transparent)domStyle.set(iframe,"opacity",0.1)}iframe.tabIndex=-1;return iframe}var _frames=new function(){var queue=[];this.pop=function(){var iframe;if(queue.length){iframe=queue.pop();iframe.style.display=""}else return make();return iframe};this.push=function(iframe){iframe.style.display="none";queue.push(iframe)}};dijit.BackgroundIframe=function(node,
transparent){if(!node.id)throw new Error("no id");if(has("config-bgIframe")){var iframe=this.iframe=transparent?make(true):_frames.pop();node.appendChild(iframe);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,"resize",node))}else domStyle.set(iframe,{width:"100%",height:"100%"})}};lang.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe)domStyle.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"})},destroy:function(){if(this._conn){this._conn.remove();
this._conn=null}if(this.iframe){_frames.push(this.iframe);delete this.iframe}}});return dijit.BackgroundIframe})},"dijit/layout/TabController":function(){require({cache:{"url:dijit/layout/templates/_TabButton.html":'\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"titleNode,innerDiv,tabContent" class\x3d"dijitTabInner dijitTabContent ui-state-default"\x3e\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTabButtonIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3cspan data-dojo-attach-point\x3d\'containerNode,focusNode\' class\x3d\'tabLabel\'\x3e\x3c/span\x3e\n\t\x3cspan class\x3d"dijitInline dijitTabCloseButton dijitTabCloseIcon" data-dojo-attach-point\x3d\'closeNode\'\n\t\t  role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d\'closeText\' class\x3d\'dijitTabCloseText\'\x3e[x]\x3c/span\n\t\t\t\t\x3e\x3c/span\x3e\n\x3c/div\x3e\n'}});
define("dijit/layout/TabController",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/has","dojo/i18n","dojo/_base/lang","./StackController","../registry","../Menu","../MenuItem","dojo/text!./templates/_TabButton.html","dojo/i18n!../nls/common"],function(declare,dom,domAttr,domClass,has,i18n,lang,StackController,registry,Menu,MenuItem,template){var TabButton=declare("dijit.layout._TabButton"+(0?"_NoBidi":""),StackController.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},
templateString:template,_setNameAttr:"focusNode",scrollOnFocus:false,buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.containerNode,false)},startup:function(){this.inherited(arguments);var n=this.domNode;this.defer(function(){n.className=n.className},1)},_setCloseButtonAttr:function(disp){this._set("closeButton",disp);domClass.toggle(this.domNode,"dijitClosable",disp);this.closeNode.style.display=disp?"":"none";if(disp){var _nlsResources=i18n.getLocalization("dijit","common");
if(this.closeNode)domAttr.set(this.closeNode,"title",_nlsResources.itemClose)}},_setDisabledAttr:function(disabled){this.inherited(arguments);if(this.closeNode)if(disabled)domAttr.remove(this.closeNode,"title");else{var _nlsResources=i18n.getLocalization("dijit","common");domAttr.set(this.closeNode,"title",_nlsResources.itemClose)}},_setLabelAttr:function(content){this.inherited(arguments);if(!this.showLabel&&!this.params.title)this.iconNode.alt=lang.trim(this.containerNode.innerText||this.containerNode.textContent||
"")}});if(0)TabButton=declare("dijit.layout._TabButton",TabButton,{_setLabelAttr:function(content){this.inherited(arguments);this.applyTextDir(this.iconNode,this.iconNode.alt)}});var TabController=declare("dijit.layout.TabController",StackController,{baseClass:"dijitTabController",templateString:"\x3cdiv role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown:onkeydown'\x3e\x3c/div\x3e",tabPosition:"top",buttonWidget:TabButton,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);
var closeMenu=new Menu({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(node){return domClass.contains(node,"dijitClosable")&&!domClass.contains(node,"dijitTabDisabled")}});this.own(closeMenu);var _nlsResources=i18n.getLocalization("dijit","common"),controller=this;var label="";if(_nlsResources&&_nlsResources.itemClose)label=_nlsResources.itemClose;closeMenu.addChild(new MenuItem({label:label,ownerDocument:this.ownerDocument,
dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(evt){var button=registry.byNode(this.getParent().currentTarget);controller.onCloseButtonClick(button.page)}}))}});TabController.TabButton=TabButton;return TabController})},"dijit/_MenuBase":function(){define("dijit/_MenuBase",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer",
"./_TemplatedMixin"],function(array,declare,dom,domAttr,domClass,lang,mouse,on,winUtils,a11yclick,registry,_Widget,_CssStateMixin,_KeyNavContainer,_TemplatedMixin){return declare("dijit._MenuBase",[_Widget,_TemplatedMixin,_KeyNavContainer,_CssStateMixin],{selected:null,_setSelectedAttr:function(item){if(this.selected!=item){if(this.selected){this.selected._setSelected(false);this._onChildDeselect(this.selected)}if(item)item._setSelected(true);this._set("selected",item)}},activated:false,_setActivatedAttr:function(val){domClass.toggle(this.domNode,
"dijitMenuActive",val);domClass.toggle(this.domNode,"dijitMenuPassive",!val);this._set("activated",val)},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:false,childSelector:function(node){var widget=registry.byNode(node);return node.parentNode==this.containerNode&&widget&&widget.focus},postCreate:function(){var self=this,matches=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.containerNode,on.selector(matches,mouse.enter),
function(){self.onItemHover(registry.byNode(this))}),on(this.containerNode,on.selector(matches,mouse.leave),function(){self.onItemUnhover(registry.byNode(this))}),on(this.containerNode,on.selector(matches,a11yclick),function(evt){self.onItemClick(registry.byNode(this),evt);evt.stopPropagation();evt.preventDefault()}));this.inherited(arguments)},onKeyboardSearch:function(item,evt,searchString,numMatches){this.inherited(arguments);if(!!item&&(numMatches==-1||!!item.popup&&numMatches==1))this.onItemClick(item,
evt)},_keyboardSearchCompare:function(item,searchString){if(!!item.shortcutKey)return searchString==item.shortcutKey.toLowerCase()?-1:0;return this.inherited(arguments)?1:0},onExecute:function(){},onCancel:function(){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,evt);else{var topMenu=this._getTopMenu();if(topMenu&&topMenu._isMenuBar)topMenu.focusNext()}},_onPopupHover:function(){this.set("selected",this.currentPopupItem);
this._stopPendingCloseTimer()},onItemHover:function(item){if(this.activated){this.set("selected",item);if(item.popup&&!item.disabled&&!this.hover_timer)this.hover_timer=this.defer(function(){this._openItemPopup(item)},this.popupDelay)}else if(this.passivePopupDelay<Infinity){if(this.passive_hover_timer)this.passive_hover_timer.remove();this.passive_hover_timer=this.defer(function(){this.onItemClick(item,{type:"click"})},this.passivePopupDelay)}this._hoveredChild=item;item._set("hovering",true)},_onChildDeselect:function(item){this._stopPopupTimer();
if(this.currentPopupItem==item){this._stopPendingCloseTimer();this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null;this.currentPopupItem=null;item._closePopup()},this.popupDelay)}},onItemUnhover:function(item){if(this._hoveredChild==item)this._hoveredChild=null;if(this.passive_hover_timer){this.passive_hover_timer.remove();this.passive_hover_timer=null}item._set("hovering",false)},_stopPopupTimer:function(){if(this.hover_timer)this.hover_timer=this.hover_timer.remove()},_stopPendingCloseTimer:function(){if(this._pendingClose_timer)this._pendingClose_timer=
this._pendingClose_timer.remove()},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu);return top},onItemClick:function(item,evt){if(this.passive_hover_timer)this.passive_hover_timer.remove();this.focusChild(item);if(item.disabled)return false;if(item.popup){this.set("selected",item);this.set("activated",true);this._openItemPopup(item,/^key/.test(evt._origType||evt.type))}else{this.onExecute();item._onClick?item._onClick(evt):item.onClick(evt)}},_openItemPopup:function(from_item,
focus){if(from_item==this.currentPopupItem)return;if(this.currentPopupItem){this._stopPendingCloseTimer();this.currentPopupItem._closePopup()}this._stopPopupTimer();var popup=from_item.popup;popup.parentMenu=this;this.own(this._mouseoverHandle=on.once(popup.domNode,"mouseover",lang.hitch(this,"_onPopupHover")));var self=this;from_item._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){if(focus)self.focusChild(from_item);self._cleanUp()},onExecute:lang.hitch(this,"_cleanUp",
true),onClose:function(){if(self._mouseoverHandle){self._mouseoverHandle.remove();delete self._mouseoverHandle}}},focus);this.currentPopupItem=from_item},onOpen:function(){this.isShowingNow=true;this.set("activated",true)},onClose:function(){this.set("activated",false);this.set("selected",null);this.isShowingNow=false;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();if(this.currentPopupItem){if(this.focused){domAttr.set(this.selected.focusNode,"tabIndex",this.tabIndex);this.selected.focusNode.focus()}this.currentPopupItem._closePopup();
this.currentPopupItem=null}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item)this.onItemUnhover(this._hoveredChild);this.set("selected",item)},_onBlur:function(){this._cleanUp(true);this.inherited(arguments)},_cleanUp:function(clearSelectedItem){this._closeChild();if(typeof this.isShowingNow=="undefined")this.set("activated",false);if(clearSelectedItem)this.set("selected",null)}})})},"xide/mixins/ReferenceMixin":function(){define(["dojo/_base/declare","xide/types","xide/utils",
"dijit/registry"],function(declare,types,utils,registry){return declare("xide.mixins.ReferenceMixin",null,{skipWidgetCSSClasses:["dijitButtonHover","dijitHover","dijit","dijitInline","dijitReset","dijitCheckBoxChecked","dijitChecked","dijitLeft"],_cssClassesToQuery:function(string){var result="";if(string){var els=string.split(" ");for(var i=0;i<els.length;i++){if(utils.contains(this.skipWidgetCSSClasses,els[i])>-1||els[i].toLowerCase().indexOf("hover")>-1)continue;result+="."+els[i]}}return result.trim()},
resolveReference:function(params){if(!params||!params.reference||!params.reference.length)return null;switch(params.mode){case types.WIDGET_REFERENCE_MODE.BY_ID:return[registry.byId(params.reference)]||[dojo.byId(params.reference)];case types.WIDGET_REFERENCE_MODE.BY_CLASS:var obj=dojo.getObject(params.reference);if(obj)return[obj];break;case types.WIDGET_REFERENCE_MODE.BY_CSS:var query=this._cssClassesToQuery(params.reference);var objects=utils.find(query,null,false);if(objects)return objects;break}return null}})})},
"dijit/_editor/_Plugin":function(){define("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(connect,declare,lang,Destroyable,Button){var _Plugin=declare("dijit._editor._Plugin",Destroyable,{constructor:function(args){this.params=args||{};lang.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:Button,disabled:false,getLabel:function(key){return this.editor.commands[key]},
_initButton:function(){if(this.command.length){var label=this.getLabel(this.command),editor=this.editor,className=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var props=lang.mixin({label:label,ownerDocument:editor.ownerDocument,dir:editor.dir,lang:editor.lang,showLabel:false,iconClass:className,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(props)}}if(this.get("disabled")&&this.button)this.button.set("disabled",
this.get("disabled"))},destroy:function(){if(this.dropDown)this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(o,f,tf){this.own(connect.connect(o,f,this,tf))},updateState:function(){var e=this.editor,c=this.command,checked,enabled;if(!e||!e.isLoaded||!c.length)return;var disabled=this.get("disabled");if(this.button)try{enabled=!disabled&&e.queryCommandEnabled(c);if(this.enabled!==enabled){this.enabled=enabled;this.button.set("disabled",!enabled)}if(enabled)if(typeof this.button.checked==
"boolean"){checked=e.queryCommandState(c);if(this.checked!==checked){this.checked=checked;this.button.set("checked",e.queryCommandState(c))}}}catch(e){0&&console.log(e)}},setEditor:function(editor){this.editor=editor;this._initButton();if(this.button&&this.useDefaultCommand)if(this.editor.queryCommandAvailable(this.command))this.own(this.button.on("click",lang.hitch(this.editor,"execCommand",this.command,this.commandArg)));else this.button.domNode.style.display="none";this.own(this.editor.on("NormalizedDisplayChanged",
lang.hitch(this,"updateState")))},setToolbar:function(toolbar){if(this.button)toolbar.addChild(this.button)},set:function(name,value){if(typeof name==="object"){for(var x in name)this.set(x,name[x]);return this}var names=this._getAttrNames(name);if(this[names.s])var result=this[names.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(name,value);return result||this},get:function(name){var names=this._getAttrNames(name);return this[names.g]?this[names.g]():this[name]},_setDisabledAttr:function(disabled){this._set("disabled",
disabled);this.updateState()},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name])return apn[name];var uc=name.charAt(0).toUpperCase()+name.substr(1);return apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"}},_set:function(name,value){this[name]=value}});_Plugin.registry={};return _Plugin})},"xblox/views/GroupedBlockView":function(){define("xblox/views/GroupedBlockView",["dojo/_base/declare","dojo/_base/lang","xide/utils","xide/factory","xide/types","xide/mixins/EventedMixin","xide/views/ActionTogglePane",
"xide/widgets/ActionToolbar","dojo/store/Memory","dojo/store/Observable","xblox/model/variables/VariableAssignmentBlock","xblox/delegate/BlockActionMixin","dojo/Stateful"],function(declare,lang,utils,factory,types,EventedMixin,ActionTogglePane,ActionToolbar,Memory,Observable,VariableAssignmentBlock,BlockActionMixin,Stateful){return declare("xblox.views.GroupedBlockView",[Stateful,EventedMixin,BlockActionMixin],{cssClass:"commandSettings",settingsPane:null,view:null,currentItem:null,gridView:null,
attachTo:null,title:null,gridViewProto:null,newRootItemFunction:null,newRootItemLabel:"New Command",newRootItemIcon:"el-icon-video",createTestBlocks:false,showAllBlocks:false,open:true,storeField:"blockStore",handleContainerClick:true,clearSelection:true,keyboardNavigation:true,mouseNavigation:true,gridParams:null,lazy:false,titlePane:true,canToggle:true,onPreview:function(item){if(item)this.execute(item)},onTitlebarToggled:function(state){if(this.blockToolbar)if(!state)this.blockToolbar.clear();
else this.onItemSelected(this.currentItem)},onResize:function(){if(this.gridView)this.gridView.onResize()},onGridKeyEnter:function(){this.editBlock(this.getItem())},onGridMouseDoubleClick:function(){this.editBlock(this.getItem())},onReloaded:function(){if(this.containerNode)dojo.empty(this.containerNode);this.createdWidgets()},reload:function(){var scope=this.blockScope;var store=scope[this.storeField];this.gridView.grid.set("store",store,{group:this.blockGroup});this.gridView.grid.sort("order");
this.gridView.refresh()},addItem2:function(menuItem){var item=menuItem.item;if(!item)return;var target=item.target;var proto=item.proto;var ctorArgs=item.ctrArgs;var where=null;if(target&&proto&&ctorArgs){if(target.owner&&target.dstField){where=target.dstField;target=target.owner}ctorArgs["parentId"]=target.id;ctorArgs["group"]=null;ctorArgs["parent"]=target;var _newBlock=target.add(proto,ctorArgs,where);_newBlock.parent=target}else if(!target&&proto&&ctorArgs)factory.createBlock(proto,ctorArgs);
this.onItemAction();this.gridView.grid.set("store",this.blockScope.blockStore,{group:this.blockGroup})},getAddActions:function(item){var thiz=this;if(item&&item.canAdd)if(item.canAdd()==null)return null;var items=[];if(this.showAllBlocks||item){var variables=this.blockScope.getVariables();var variableItems=[];for(var i=0;i<variables.length;i++)variableItems.push({name:variables[i].title,target:item,iconClass:"el-icon-compass",proto:VariableAssignmentBlock,item:variables[i],ctrArgs:{variable:variables[i].title,
scope:this.blockScope,value:"0"}});items=factory.getAllBlocks(this.blockScope,this,item,this.blockGroup);items.push({name:"Set Variable",target:item,iconClass:"el-icon-pencil-alt",items:variableItems});factory.publish(types.EVENTS.ON_BUILD_BLOCK_INFO_LIST_END,{items:items});return items}if(!item)if(this.newRootItemFunction){items.push({name:this.newRootItemLabel,iconClass:this.newRootItemIcon,handler:function(){thiz.newRootItemFunction();thiz.onItemAction()}});return items}},excecuteCommand:function(block){if(!block||
!block.scope)return;0&&console.log(" excecuting block -  "+block.name);try{0&&console.dir(block.scope.solveBlock(block.name))}catch(e){0&&console.log(" excecuting block -  "+block.name+" failed! : "+e);0&&console.log(printStackTrace().join("\n\n"));0&&console.dir(block.scope)}},createTitlePane:function(name,options){var thiz=this;var pane=utils.addWidget(ActionTogglePane,{title:name,open:options["open"]!=null?options["open"]:true,lazy:options["lazy"]!=null?options["lazy"]:false,delegate:this,toggleable:options["canToggle"]!=
null?options["canToggle"]:true,actions:[]},this,this.attachTo,true);this.view=pane;this.blockToolbar=this.view.toolbar;return pane},_createVariablesStore:function(data){var sdata={identifier:"id",label:"title",items:data};var store=Observable(Memory({data:sdata}));return store},_createSettingsPane:function(lazy){var where=null;if(this.titlePane){this.settingsPane=this.createTitlePane(this.title,{open:this.open,lazy:this.lazy,canToggle:this.canToggle});where=this.settingsPane.containerNode}else{this.toolbar=
utils.addWidget(ActionToolbar,{delegate:this,style:"display:inline-block;min-height:30px;width:auto;",actions:[]},this,this.attachTo,true);this.blockToolbar=this.toolbar;where=this.attachTo}var store=this.blockScope[this.storeField]||this.blockStore||this.blockScope.blockStore;var _gridCtorArgs={store:store,blockScope:this.blockScope,delegate:this,handleContainerClick:this.handleContainerClick,clearSelection:this.clearSelection,keyboardNavigation:this.keyboardNavigation,mouseNavigation:this.mouseNavigation};
if(this.gridParams)_gridCtorArgs=lang.mixin(_gridCtorArgs,this.gridParams);var gridView=utils.addWidget(this.gridViewProto,_gridCtorArgs,this,where,true);this.gridView=gridView;this.blockStore=store;this.blockGridView=gridView;this.gridView.grid.set("store",store,{group:this.blockGroup});return this.settingsPane?this.settingsPane:null},onShow:function(evt){if(evt&&evt.view&&evt.view==this.parentContainer){if(this.gridView){this.gridView.onShow();this.gridView.onResize()}}else if(this.gridView&&this.gridView.onShow){this.gridView.onShow();
this.gridView.onResize();if(this.parentContainer)this.parentContainer.resize();this.gridView.domNode.scrollTop=0}},save:function(){if(this.delegate&&this.delegate.onSave)this.delegate.onSave(this);return;var variables=this.blockScope.variablesToJson();try{var _testData=dojo.fromJson(JSON.stringify(variables))}catch(e){console.error("invalid data");return}this.setValue(JSON.stringify(variables))},onGridDataChanged:function(evt){return null;var item=this.store.get(evt.id);if(item)item[evt.field]=evt.newValue;
this.save()},createdWidgets:function(){try{var thiz=this;this._createSettingsPane();this.registerUpdateFunction(function(){if(thiz.gridView){thiz.gridView.grid.refresh();thiz.gridView.onResize()}})}catch(e){debugger}},onBlockPropertyChanged:function(evt){if(evt&&evt.item&&evt.item.scope==this.blockScope)if(this.gridView)this.gridView.refresh()},onVariableChanged:function(){if(this.gridView)this.gridView.refresh()},startup:function(){this.inherited(arguments);try{this.createdWidgets();if(this.blockGroup===
"Variables"){var thiz=this;factory.subscribe(types.EVENTS.ON_VARIABLE_CHANGED,function(evt){thiz.onVariableChanged(evt)},thiz)}this.subscribe(types.EVENTS.ON_BLOCK_PROPERTY_CHANGED,this.onBlockPropertyChanged)}catch(e){console.error("response settings widget crashed : "+e)}}})})},"dijit/layout/ScrollingTabController":function(){require({cache:{"url:dijit/layout/templates/ScrollingTabController.html":'\x3cdiv class\x3d"dijitTabListContainer-${tabPosition}" style\x3d"visibility:hidden"\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerMenuButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_menuBtn"\n\t\t data-dojo-props\x3d"containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\n\t\t data-dojo-attach-point\x3d"_menuBtn" showLabel\x3d"false" title\x3d""\x3e\x26#9660;\x3c/div\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_leftBtn"\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point\x3d"_leftBtn" data-dojo-attach-event\x3d"onClick: doSlideLeft"\x3e\x26#9664;\x3c/div\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_rightBtn"\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point\x3d"_rightBtn" data-dojo-attach-event\x3d"onClick: doSlideRight"\x3e\x26#9654;\x3c/div\x3e\n\t\x3cdiv class\x3d\'dijitTabListWrapper ui-state-default\' data-dojo-attach-point\x3d\'tablistWrapper\'\x3e\n\t\t\x3cdiv role\x3d\'tablist\' data-dojo-attach-event\x3d\'onkeydown:onkeydown\'\n\t\t\t data-dojo-attach-point\x3d\'containerNode\' class\x3d\'nowrapTabStrip \'\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',
"url:dijit/layout/templates/_ScrollingTabControllerButton.html":'\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onClick" class\x3d"dijitTabInnerDiv dijitTabContent dijitButtonContents"  data-dojo-attach-point\x3d"focusNode" role\x3d"button"\x3e\n\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitTabStripIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,titleNode" class\x3d"dijitButtonText"\x3e\x3c/span\x3e\n\x3c/div\x3e'}});
define("dijit/layout/ScrollingTabController",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/_base/lang","dojo/on","dojo/query","dojo/sniff","../registry","dojo/text!./templates/ScrollingTabController.html","dojo/text!./templates/_ScrollingTabControllerButton.html","./TabController","./utils","../_WidgetsInTemplateMixin","../Menu","../MenuItem","../form/Button","../_HasDropDown","dojo/NodeList-dom","dijit/a11yclick"],function(array,
declare,domClass,domGeometry,domStyle,fx,lang,on,query,has,registry,tabControllerTemplate,buttonTemplate,TabController,layoutUtils,_WidgetsInTemplateMixin,Menu,MenuItem,Button,_HasDropDown){var ScrollingTabController=declare("dijit.layout.ScrollingTabController",[TabController,_WidgetsInTemplateMixin],{baseClass:"dijitTabController dijitScrollingTabController",templateString:tabControllerTemplate,useMenu:true,useSlider:true,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},
buildRendering:function(){this.inherited(arguments);var n=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();if(!this.tabStripClass){this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None";domClass.add(n,"tabStrip-disabled")}domClass.add(this.tablistWrapper,this.tabStripClass)},onStartup:function(){this.inherited(arguments);domStyle.set(this.domNode,"visibility","");this._postStartup=true;this.own(on(this.containerNode,
"attrmodified-label, attrmodified-iconclass",lang.hitch(this,function(evt){if(this._dim)this.resize(this._dim)})))},onAddChild:function(page,insertIndex){this.inherited(arguments);domStyle.set(this.containerNode,"width",domStyle.get(this.containerNode,"width")+200+"px")},onRemoveChild:function(page,insertIndex){var button=this.pane2button(page.id);if(this._selectedTab===button.domNode)this._selectedTab=null;this.inherited(arguments)},_initButtons:function(){this._btnWidth=0;this._buttons=query("\x3e .tabStripButton",
this.domNode).filter(function(btn){if(this.useMenu&&btn==this._menuBtn.domNode||this.useSlider&&(btn==this._rightBtn.domNode||btn==this._leftBtn.domNode)){this._btnWidth+=domGeometry.getMarginSize(btn).w;return true}else{domStyle.set(btn,"display","none");return false}},this)},_getTabsWidth:function(){var children=this.getChildren();if(children.length){var leftTab=children[this.isLeftToRight()?0:children.length-1].domNode,rightTab=children[this.isLeftToRight()?children.length-1:0].domNode;return rightTab.offsetLeft+
rightTab.offsetWidth-leftTab.offsetLeft}else return 0},_enableBtn:function(width){var tabsWidth=this._getTabsWidth();width=width||domStyle.get(this.scrollNode,"width");return tabsWidth>0&&width<tabsWidth},resize:function(dim){this._dim=dim;this.scrollNode.style.height="auto";var cb=this._contentBox=layoutUtils.marginBox2contentBox(this.domNode,{h:0,w:dim.w});cb.h=this.scrollNode.offsetHeight;domGeometry.setContentSize(this.domNode,cb);var enable=this._enableBtn(this._contentBox.w);this._buttons.style("display",
enable?"":"none");this._leftBtn.layoutAlign="left";this._rightBtn.layoutAlign="right";this._menuBtn.layoutAlign=this.isLeftToRight()?"right":"left";layoutUtils.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,layoutAlign:"client"}]);if(this._selectedTab){if(this._anim&&this._anim.status()=="playing")this._anim.stop();this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab())}this._setButtonClass(this._getScroll());
this._postResize=true;return{h:this._contentBox.h,w:dim.w}},_getScroll:function(){return this.isLeftToRight()||has("ie")<8||has("ie")&&has("quirks")||has("webkit")?this.scrollNode.scrollLeft:domStyle.get(this.containerNode,"width")-domStyle.get(this.scrollNode,"width")+(has("ie")>=8?-1:1)*this.scrollNode.scrollLeft},_convertToScrollLeft:function(val){if(this.isLeftToRight()||has("ie")<8||has("ie")&&has("quirks")||has("webkit"))return val;else{var maxScroll=domStyle.get(this.containerNode,"width")-
domStyle.get(this.scrollNode,"width");return(has("ie")>=8?-1:1)*(val-maxScroll)}},onSelectChild:function(page){var tab=this.pane2button(page.id);if(!tab)return;var node=tab.domNode;if(node!=this._selectedTab){this._selectedTab=node;if(this._postResize){var sl=this._getScroll();if(sl>node.offsetLeft||sl+domStyle.get(this.scrollNode,"width")<node.offsetLeft+domStyle.get(node,"width"))this.createSmoothScroll().play()}}this.inherited(arguments)},_getScrollBounds:function(){var children=this.getChildren(),
scrollNodeWidth=domStyle.get(this.scrollNode,"width"),containerWidth=domStyle.get(this.containerNode,"width"),maxPossibleScroll=containerWidth-scrollNodeWidth,tabsWidth=this._getTabsWidth();if(children.length&&tabsWidth>scrollNodeWidth)return{min:this.isLeftToRight()?0:children[children.length-1].domNode.offsetLeft,max:this.isLeftToRight()?children[children.length-1].domNode.offsetLeft+children[children.length-1].domNode.offsetWidth-scrollNodeWidth:maxPossibleScroll};else{var onlyScrollPosition=this.isLeftToRight()?
0:maxPossibleScroll;return{min:onlyScrollPosition,max:onlyScrollPosition}}},_getScrollForSelectedTab:function(){var w=this.scrollNode,n=this._selectedTab,scrollNodeWidth=domStyle.get(this.scrollNode,"width"),scrollBounds=this._getScrollBounds();var pos=n.offsetLeft+domStyle.get(n,"width")/2-scrollNodeWidth/2;pos=Math.min(Math.max(pos,scrollBounds.min),scrollBounds.max);return pos},createSmoothScroll:function(x){if(arguments.length>0){var scrollBounds=this._getScrollBounds();x=Math.min(Math.max(x,
scrollBounds.min),scrollBounds.max)}else x=this._getScrollForSelectedTab();if(this._anim&&this._anim.status()=="playing")this._anim.stop();var self=this,w=this.scrollNode,anim=new fx.Animation({beforeBegin:function(){if(this.curve)delete this.curve;var oldS=w.scrollLeft,newS=self._convertToScrollLeft(x);anim.curve=new fx._Line(oldS,newS)},onAnimate:function(val){w.scrollLeft=val}});this._anim=anim;this._setButtonClass(x);return anim},_getBtnNode:function(e){var n=e.target;while(n&&!domClass.contains(n,
"tabStripButton"))n=n.parentNode;return n},doSlideRight:function(e){this.doSlide(1,this._getBtnNode(e))},doSlideLeft:function(e){this.doSlide(-1,this._getBtnNode(e))},doSlide:function(direction,node){if(node&&domClass.contains(node,"dijitTabDisabled"))return;var sWidth=domStyle.get(this.scrollNode,"width");var d=sWidth*0.75*direction;var to=this._getScroll()+d;this._setButtonClass(to);this.createSmoothScroll(to).play()},_setButtonClass:function(scroll){var scrollBounds=this._getScrollBounds();this._leftBtn.set("disabled",
scroll<=scrollBounds.min);this._rightBtn.set("disabled",scroll>=scrollBounds.max)}});var ScrollingTabControllerButtonMixin=declare("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:buttonTemplate,tabIndex:"",isFocusable:function(){return false}});declare("dijit.layout._ScrollingTabControllerButton",[Button,ScrollingTabControllerButtonMixin]);declare("dijit.layout._ScrollingTabControllerMenuButton",[Button,_HasDropDown,ScrollingTabControllerButtonMixin],
{containerId:"",tabIndex:"-1",isLoaded:function(){return false},loadDropDown:function(callback){this.dropDown=new Menu({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var container=registry.byId(this.containerId);array.forEach(container.getChildren(),function(page){var menuItem=new MenuItem({id:page.id+"_stcMi",label:page.title,iconClass:page.iconClass,disabled:page.disabled,ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,
textDir:page.textDir||container.textDir,onClick:function(){container.selectChild(page)}});this.dropDown.addChild(menuItem)},this);callback()},closeDropDown:function(focus){this.inherited(arguments);if(this.dropDown){this._popupStateNode.removeAttribute("aria-owns");this.dropDown.destroyRecursive();delete this.dropDown}}});return ScrollingTabController})},"dijit/form/_ListMouseMixin":function(){define("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(declare,
on,touch,_ListBase){return declare("dijit.form._ListMouseMixin",_ListBase,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=true;this.own(on(this.domNode,"mousedown",function(evt){evt.preventDefault()}));this._listConnect("click","_onClick");this._listConnect(touch.press,"_onMouseDown");this._listConnect(touch.release,"_onMouseUp");this._listConnect(touch.over,"_onMouseOver");this._listConnect(touch.out,"_onMouseOut")},_onClick:function(evt,target){this._setSelectedAttr(target);
if(this._deferredClick)this._deferredClick.remove();this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(target)})},_onMouseDown:function(evt,target){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null}this._isDragging=true;this._setSelectedAttr(target)},_onMouseUp:function(evt,target){this._isDragging=false;var selectedNode=this.selected;var hoveredNode=this._hoveredNode;if(selectedNode&&target==selectedNode)this.defer(function(){this._onClick(evt,
selectedNode)});else if(hoveredNode)this.defer(function(){this._onClick(evt,hoveredNode)})},_onMouseOut:function(evt,target){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null}if(this._isDragging)this._cancelDrag=(new Date).getTime()+1E3},_onMouseOver:function(evt,target){if(this._cancelDrag){var time=(new Date).getTime();if(time>this._cancelDrag)this._isDragging=false;this._cancelDrag=null}this._hoveredNode=target;this.onHover(target);if(this._isDragging)this._setSelectedAttr(target)}})})},
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"xblox/model/logic/IfBlock":function(){define("xblox/model/logic/IfBlock",["dojo/_base/declare","xblox/model/Block","xblox/model/Statement"],function(declare,Block,Statement){return declare("xblox.model.logic.IfBlock",[Block],{condition:"Invalid Expression",consequent:null,elseIfBlocks:null,alternate:null,canAdd:function(){return[]},autoCreateElse:true,name:"if",add:function(proto,ctrArgs,where){var _args=arguments;if(where==null)where="consequent";var _block=this._add(proto,ctrArgs,where);return _block},
addToStore:function(store){store.put(this)},mayHaveChildren:function(parent){return this.consequent!=null&&this.consequent.length>0},getChildren:function(parent){var result=[];if(this.consequent)result=result.concat(this.consequent);return result},toText:function(){return this.getBlockIcon("E")+this.name+" "+this.toFriendlyName(this.condition)},solve:function(scope,settings){var solvedCondition=this._checkCondition(scope);if(solvedCondition){this.onSuccess(this,settings);var result=null;if(this.consequent&&
this.consequent.length)for(var i=0;i<this.consequent.length;i++)result=this.consequent[i].solve(scope,settings);return result}else{var anyElseIf=false;this.onFailed(this,settings);if(this.elseIfBlocks)for(var n=0;n<this.elseIfBlocks.length&&!anyElseIf;n++)if(this.elseIfBlocks[n].declaredClass=="xblox.model.logic.ElseIfBlock")if(this.elseIfBlocks[n]._checkCondition(scope)){anyElseIf=true;return this.elseIfBlocks[n].consequent.solve(scope,settings)}if(this.alternate&&this.alternate.length>0&&!anyElseIf){var result=
null;for(var i=0;i<this.alternate.length;i++)result=this.alternate[i].solve(scope,settings);return result}}return[]},empty:function(what){this._empty(this.alternate);this._empty(this.consequent);this._empty(this.items)},removeBlock:function(what){if(what){if(what&&what.empty)what.empty();delete what.items;what.parent=null;this.alternate.remove(what);this.consequent.remove(what)}},_checkCondition:function(scope){return scope.parseExpression(this.condition+";",true)},_getContainer:function(item){if(this.consequent.contains(item))return"consequent";
else if(this.alternate.contains(item))return"alternate";return"_"},init:function(){this.alternate=this.alternate||[];this.consequent=this.consequent||[];for(var i=0;i<this.alternate.length;i++){this.alternate[i].parentId=this.id;this.alternate[i].parent=this}for(var i=0;i<this.consequent.length;i++){this.consequent[i].parentId=this.id;this.consequent[i].parent=this}var store=this.scope.blockStore},getFields:function(){var thiz=this;var fields=this.inherited(arguments);fields.push(this.utils.createCI("condition",
25,this.condition,{group:"General",title:"Expression",dst:"condition",delegate:{runExpression:function(val,run,error){return thiz.scope.expressionModel.parse(thiz.scope,val,false,run,error)}}}));return fields},postCreate:function(){var store=this.scope.blockStore;if(this.autoCreateElse||this.alternate.length>0){var _statement=new Statement({name:"else",items:this.alternate,group:this.group,owner:this,dstField:"alternate",parentId:this.parentId,parent:this.parent,scope:this.scope,canAdd:function(){return[]},
canEdit:function(){return false}});this.items.push(_statement);for(var i=0;i<this.alternate.length;i++){this.alternate[i].parentId=_statement.id;this.alternate[i].parent=_statement}store.put(_statement);if(this.parent&&this.parent.declaredClass==="xblox.model.logic.IfBlock")this.parent.consequent.push(_statement);if(this.parent&&this.parent.items!=null)this.parent.items.push(_statement)}},_toPHP:function(params){},_toJavascript:function(params){},toCode:function(lang,params){switch(lang){case "Javascript":return this._toJavascript();
case "PHP":return this._toPHP()}}})})},"xfile/views/FileOperationView":function(){define("xfile/views/FileOperationView",["dojo/_base/declare","dojo/dom-class","xide/widgets/TemplatedWidgetBase","./FileSelectDialog","xide/factory"],function(declare,domClass,TemplatedWidgetBase,FileSelectDialog,factory){return declare("xfile.views.FileOperationView",[TemplatedWidgetBase],{root:null,dst:null,src:null,delegate:null,selectButton:null,value:null,fileNameValid:false,lastMount:null,templateString:"\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d'root' data-dojo-type\x3d'dijit.layout.ContentPane'\x3e\x3c/div\x3e\x3c/div\x3e",
filePathValidator:function(value){var thiz=this;var result=false;var reg=new RegExp(/^[0-9a-zA-Z ..._/ ]+$/);if(value&&reg.test(value)){var doExistCheck=false;if(doExistCheck){result=false;thiz.promptMessage="Item already exists";thiz.message="Item already exists"}else{result=true;thiz.message="Enter new file name"}}else{thiz.promptMessage="This is not a valid path, try without special characters!";thiz.message="This is not a path filename, try without special characters!";result=false}this.fileNameValid=
result;if(this.owner&&this.owner.onValidated)this.owner.onValidated(result);return result},createWidgets:function(){var text=this.dst?this.dst.path:"/";var thiz=this;this.selectButton=factory.createButton(this.root.containerNode,"el-icon-folder-open","elusiveButton","","",function(){thiz.onSelect(thiz)},this);this.editBox=factory.createValidationTextBox(this.root.containerNode,"","To:",text,this.filePathValidator,this.delegate,"Not a path!","I need some input");this.editBox.owner=this},getValue:function(){return this.editBox.get("value")},
onSelect:function(dst){var thiz=dst;var delegate={onShowPanel:function(){},onOk:function(dlg){thiz.lastMount=dlg.lastMount;var activeItem=dlg.filePanel.getActiveItem();if(activeItem&&activeItem.path){thiz.editBox.set("value",activeItem.path);thiz.value=activeItem.path}}};var dlg=new FileSelectDialog({title:"Select Destination",delegate:delegate,owner:thiz.owner,dst:thiz.dst,src:thiz.src,ctx:thiz.ctx});domClass.add(dlg.domNode,"fileSelectDialog");dlg.show();dlg.initWithWithDestination(dst);dlg.resize();
setTimeout(function(){dlg.resize()},1E3)},startup:function(){this.inherited(arguments);this.createWidgets();this.editBox.focus()}})})},"dojo/io-query":function(){define(["./_base/lang"],function(lang){var backstop={};return{objectToQuery:function objectToQuery(map){var enc=encodeURIComponent,pairs=[];for(var name in map){var value=map[name];if(value!=backstop[name]){var assign=enc(name)+"\x3d";if(lang.isArray(value))for(var i=0,l=value.length;i<l;++i)pairs.push(assign+enc(value[i]));else pairs.push(assign+
enc(value))}}return pairs.join("\x26")},queryToObject:function queryToObject(str){var dec=decodeURIComponent,qp=str.split("\x26"),ret={},name,val;for(var i=0,l=qp.length,item;i<l;++i){item=qp[i];if(item.length){var s=item.indexOf("\x3d");if(s<0){name=dec(item);val=""}else{name=dec(item.slice(0,s));val=dec(item.slice(s+1))}if(typeof ret[name]=="string")ret[name]=[ret[name]];if(lang.isArray(ret[name]))ret[name].push(val);else ret[name]=val}}return ret}}})},"xfile/views/DndSource":function(){define("xfile/views/DndSource",
["dojo/_base/declare","dojo/dnd/Source","dojo/_base/Deferred","dojo/dnd/Manager","dojo/_base/NodeList","dojo/topic","dojo/has"],function(declare,Source,Deferred,DnDManager,NodeList,topic,has){var blockGridDndSource=declare(Source,{grid:null,hover:true,onDndCancel:function(){this.inherited(arguments);this.hover=false;if(this.targetAnchor)this._removeItemClass(this.targetAnchor,"Hover")},onDndSourceOver:function(source){if(this!==source){this.mouseDown=false;if(this.targetAnchor)this._unmarkTargetAnchor()}else if(this.isDragging){var m=
DnDManager.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)))}},_markTargetAnchorOn:function(hover){if(this.current==this.targetAnchor&&this.hover==hover)return;if(this.targetAnchor)this._removeItemClass(this.targetAnchor,this.hover?"Hover":"");this.hover=hover;if(this.targetAnchor)this._addItemClass(this.targetAnchor,this.hover?"Hover":"")},_unmarkTargetAnchorOn:function(){if(!this.targetAnchor)return;this._removeItemClass(this.targetAnchor,
"Hover");this.targetAnchor=null;this.targetBox=null;this.hover=false},getObject:function(node){var grid=this.grid;return grid.store.get(node.id.slice(grid.id.length+5))},_legalMouseDown:function(evt){var legal=this.inherited(arguments);return legal&&evt.target!=this.grid.bodyNode},onDrop:function(sourceSource,nodes,copy){if(this.targetAnchor)this._removeItemClass(this.targetAnchor,"Hover");var targetSource=this,targetRow=this._targetAnchor=this.targetAnchor,grid=this.grid,store=grid.store;if(!this.before&&
targetRow)targetRow=targetRow.nextSibling;targetRow=targetRow&&grid.row(targetRow);Deferred.when(targetRow&&store.get(targetRow.id),function(target){if(!target&&targetRow)target=targetRow.data;if(targetSource!=sourceSource)targetSource.onDropExternal(sourceSource,nodes,copy,target);else targetSource.onDropInternal(nodes,copy,target)})},onDropInternal:function(nodes,copy,targetItem){var store=this.grid.store,targetSource=this,grid=this.grid,anchor=targetSource._targetAnchor,targetRow;if(anchor)targetRow=
this.before?anchor.previousSibling:anchor.nextSibling;if(!copy&&(targetRow===nodes[0]||!targetItem&&grid.down(grid.row(nodes[0])).element==nodes[0]))return;nodes.forEach(function(node){Deferred.when(targetSource.getObject(node),function(object){store[copy&&store.copy?"copy":"put"](object,{before:targetItem})})})},onDropExternal:function(sourceSource,nodes,copy,targetItem){var store=this.grid.store,sourceGrid=sourceSource.grid;nodes.forEach(function(node,i){Deferred.when(sourceSource.getObject(node),
function(object){if(!copy)if(sourceGrid)Deferred.when(sourceGrid.store.getIdentity(object),function(id){!i&&sourceSource.selectNone();sourceSource.delItem(node.id);sourceGrid.store.remove(id)});else sourceSource.deleteSelectedNodes();store[store.copy?"copy":"put"](object,{before:targetItem})})})},onDndStart:function(source,nodes,copy){this.inherited(arguments);if(source==this){if(this.grid.cancelTouchScroll)this.grid.cancelTouchScroll();DnDManager.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/
2+"px"}},onMouseDown:function(evt){if(has("touch")&&this.isDragging&&touchUtil.countCurrentTouches(evt,this.grid.touchNode)>1){topic.publish("/dnd/cancel");DnDManager.manager().stopDrag()}else this.inherited(arguments)},onMouseMove:function(evt){if(!has("touch")||touchUtil.countCurrentTouches(evt,this.grid.touchNode)<=1)this.inherited(arguments)},checkAcceptance:function(source,nodes){return true;return source.getObject&&Source.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);
var t=new NodeList,id;for(id in this.grid.selection)t.push(this._selectedNodes[id]);return t},_markTargetAnchor:function(before){if(this.current==this.targetAnchor&&this.before==before)return;if(this.targetAnchor)this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=this.current;this.targetBox=null;this.before=before;if(this.targetAnchor)this._addItemClass(this.targetAnchor,this.before?"Before":"After")}});return blockGridDndSource})},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",
["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","./a11yclick"],function(on,array,keys,declare,has,a11yclick){var ret=declare("dijit._OnDijitClickMixin",null,{connect:function(obj,event,method){return this.inherited(arguments,[obj,event=="ondijitclick"?a11yclick:event,method])}});ret.a11yclick=a11yclick;return ret})},"dijit/tree/_dndSelector":function(){define("dijit/tree/_dndSelector",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang",
"dojo/dom","dojo/mouse","dojo/on","dojo/touch","../a11yclick","./_dndContainer"],function(array,connect,declare,kernel,lang,dom,mouse,on,touch,a11yclick,_dndContainer){return declare("dijit.tree._dndSelector",_dndContainer,{constructor:function(){this.selection={};this.anchor=null;this.events.push(on(this.tree.domNode,touch.press,lang.hitch(this,"onMouseDown")),on(this.tree.domNode,touch.release,lang.hitch(this,"onMouseUp")),on(this.tree.domNode,touch.move,lang.hitch(this,"onMouseMove")),on(this.tree.domNode,
a11yclick.press,lang.hitch(this,"onClickPress")),on(this.tree.domNode,a11yclick.release,lang.hitch(this,"onClickRelease")))},singular:false,getSelectedTreeNodes:function(){var nodes=[],sel=this.selection;for(var i in sel)nodes.push(sel[i]);return nodes},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(node,isAnchor){this.setSelection(this.getSelectedTreeNodes().concat([node]));if(isAnchor)this.anchor=
node;return node},removeTreeNode:function(node){var newSelection=array.filter(this.getSelectedTreeNodes(),function(selectedNode){return!dom.isDescendant(selectedNode.domNode,node.domNode)});this.setSelection(newSelection);return node},isTreeNodeSelected:function(node){return node.id&&!!this.selection[node.id]},setSelection:function(newSelection){var oldSelection=this.getSelectedTreeNodes();array.forEach(this._setDifference(oldSelection,newSelection),lang.hitch(this,function(node){node.setSelected(false);
if(this.anchor==node)delete this.anchor;delete this.selection[node.id]}));array.forEach(this._setDifference(newSelection,oldSelection),lang.hitch(this,function(node){node.setSelected(true);this.selection[node.id]=node}));this._updateSelectionProperties()},_setDifference:function(xs,ys){array.forEach(ys,function(y){y.__exclude__=true});var ret=array.filter(xs,function(x){return!x.__exclude__});array.forEach(ys,function(y){delete y["__exclude__"]});return ret},_updateSelectionProperties:function(){var selected=
this.getSelectedTreeNodes();var paths=[],nodes=[],selects=[];array.forEach(selected,function(node){var ary=node.getTreePath(),model=this.tree.model;nodes.push(node);paths.push(ary);ary=array.map(ary,function(item){return model.getIdentity(item)},this);selects.push(ary.join("/"))},this);var items=array.map(nodes,function(node){return node.item});this.tree._set("paths",paths);this.tree._set("path",paths[0]||[]);this.tree._set("selectedNodes",nodes);this.tree._set("selectedNode",nodes[0]||null);this.tree._set("selectedItems",
items);this.tree._set("selectedItem",items[0]||null)},onClickPress:function(e){if(this.current&&this.tree.isExpandoNode(e.target,this.current))return;if(mouse.isLeft(e))e.preventDefault();var treeNode=e.type=="keydown"?this.tree.focusedChild:this.current;if(!treeNode)return;var copy=connect.isCopyKey(e),id=treeNode.id;if(!this.singular&&!e.shiftKey&&this.selection[id]){this._doDeselect=true;return}else this._doDeselect=false;this.userSelect(treeNode,copy,e.shiftKey)},onClickRelease:function(e){if(!this._doDeselect)return;
this._doDeselect=false;this.userSelect(e.type=="keyup"?this.tree.focusedChild:this.current,connect.isCopyKey(e),e.shiftKey)},onMouseMove:function(){this._doDeselect=false},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(n1,n2){if(n1===n2)return 0;if("sourceIndex"in document.documentElement)return n1.sourceIndex-n2.sourceIndex;else if("compareDocumentPosition"in document.documentElement)return n1.compareDocumentPosition(n2)&2?1:-1;else if(document.createRange){var r1=doc.createRange();
r1.setStartBefore(n1);var r2=doc.createRange();r2.setStartBefore(n2);return r1.compareBoundaryPoints(r1.END_TO_END,r2)}else throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(node,multi,range){if(this.singular)if(this.anchor==node&&multi)this.selectNone();else{this.setSelection([node]);this.anchor=node}else if(range&&this.anchor){var cr=this._compareNodes(this.anchor.rowNode,node.rowNode),begin,end,anchor=this.anchor;if(cr<0){begin=
anchor;end=node}else{begin=node;end=anchor}var nodes=[];while(begin!=end){nodes.push(begin);begin=this.tree._getNext(begin)}nodes.push(end);this.setSelection(nodes)}else if(this.selection[node.id]&&multi)this.removeTreeNode(node);else if(multi)this.addTreeNode(node,true);else{this.setSelection([node]);this.anchor=node}},getItem:function(key){var widget=this.selection[key];return{data:widget,type:["treeNode"]}},forInSelectedItems:function(f,o){o=o||kernel.global;for(var id in this.selection)f.call(o,
this.getItem(id),id,this)}})})},"xfile/factory/config":function(){define("xfile/factory/config",["xide/types","xfile/factory","dojo/_base/lang"],function(types,factory,lang){factory.cloneConfig=function(config){var newConfig={ACTION_TOOLBAR_MODE:config.ACTION_TOOLBAR_MODE,ALLOWED_ACTIONS:lang.clone(config.ALLOWED_ACTIONS),FILES_STORE_SERVICE_CLASS:config.FILES_STORE_SERVICE_CLASS,FILES_STORE_URL:config.FILES_STORE_URL,FILE_PANEL_OPTIONS_LEFT:lang.clone(config.FILE_PANEL_OPTIONS_LEFT),FILE_PANEL_OPTIONS_MAIN:lang.clone(config.FILE_PANEL_OPTIONS_MAIN),
FILE_PANEL_OPTIONS_RIGHT:lang.clone(config.FILE_PANEL_OPTIONS_RIGHT),FILE_SERVICE:config.FILE_SERVICE,FILE_SERVICE_FULL:config.FILE_SERVICE_FULL,LAYOUT_PRESET:config.LAYOUT_PRESET,PANEL_OPTIONS:config.PANEL_OPTIONS,REPO_URL:config.REPO_URL,RPC_PARAMS:config.RPC_PARAMS,THEME_ROOT:config.THEME_ROOT,WEB_ROOT:config.WEB_ROOT,allowFiles:config.allowFiles,clipboardManager:config.clipboardManager,columnFlags:lang.clone(config.columnFlags),columns:config.columns,hasControls:config.hasControls,hasTrail:config.hasTrail,
keyboardDelegate:config.keyboardDelegate,mouseDelegate:config.mouseDelegate,layoutMode:config.layoutMode,selectionMode:config.selectionMode,beanContextName:config.beanContextName};return newConfig}})},"dojox/fx/scroll":function(){define("dojox/fx/scroll",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/fx","dojox/fx/_base","dojox/fx/_core","dojo/dom-geometry","dojo/_base/sniff"],function(kernel,lang,baseFx,fxExt,Line,domGeom,has){kernel.experimental("dojox.fx.scroll");var fx=lang.getObject("dojox.fx",
true);fxExt.smoothScroll=function(args){if(!args.target)args.target=domGeom.position(args.node);var isWindow=lang[has("ie")?"isObject":"isFunction"](args["win"].scrollTo),delta={x:args.target.x,y:args.target.y};if(!isWindow){var winPos=domGeom.position(args.win);delta.x-=winPos.x;delta.y-=winPos.y}var _anim=isWindow?function(val){args.win.scrollTo(val[0],val[1])}:function(val){args.win.scrollLeft=val[0];args.win.scrollTop=val[1]};var anim=new baseFx.Animation(lang.mixin({beforeBegin:function(){if(this.curve)delete this.curve;
var current=isWindow?dojo._docScroll():{x:args.win.scrollLeft,y:args.win.scrollTop};anim.curve=new Line([current.x,current.y],[current.x+delta.x,current.y+delta.y])},onAnimate:_anim},args));return anim};fx.smoothScroll=fxExt.smoothScroll;return fxExt.smoothScroll})},"xblox/model/ModelBase":function(){define("xblox/model/ModelBase",["dojo/_base/declare","xide/utils"],function(declare,utils){return declare("xblox.model.ModelBase",null,{id:null,description:"",parent:null,parentId:null,group:null,order:0,
constructor:function(arguments){for(var prop in arguments)if(arguments.hasOwnProperty(prop))this[prop]=arguments[prop];if(!this.id)this.id=this.createUUID();this.utils=utils},keys:function(a){var b=[];for(var c in a)b.push(c);return b},values:function(b){var a=[];for(var c in b)a.push(b[c]);return a},toArray:function(){return this.map()},size:function(){return this.toArray().length},createUUID:function(){var S4=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return S4()+S4()+
"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()},canEdit:function(){return true},getFields:function(){return null},isString:function(a){return typeof a=="string"},isNumber:function(a){return typeof a=="number"},isBoolean:function(a){return typeof a=="boolean"},isObject:function(a){return typeof a==="object"},isArray:function(a){if(Array.isArray)return Array.isArray(a);return false},getValue:function(val){var _float=parseFloat(val);if(!isNaN(_float))return _float;if(val==="true"||val===true)return true;
if(val==="false"||val===false)return false;return val},isScript:function(val){return this.isString(val)&&val.indexOf("@")==-1&&(val.indexOf("return")!=-1||val.indexOf(";")!=-1||val.indexOf("+")!=-1||val.indexOf("-")!=-1||val.indexOf("\x3c")!=-1||val.indexOf("*")!=-1||val.indexOf("/")!=-1||val.indexOf("%")!=-1||val.indexOf("\x3d")!=-1||val.indexOf("\x3e")!=-1||val.indexOf("[")!=-1||val.indexOf("{")!=-1||val.indexOf("}")!=-1)},replaceAll:function(find,replace,str){if(this.isString(str))return str.split(find).join(replace);
return str},isInValidState:function(){return true}})})},"xide/widgets/JSONEditorWidget":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/_base/lang","xide/widgets/WidgetBase","xide/views/TextEditor","xide/utils"],function(declare,domClass,lang,WidgetBase,TextEditor,utils){return declare("xide.widgets.JSONEditorWidget",[WidgetBase],{didLoad:false,minHeight:"525px",editorHeight:"470px",jsonEditorHeight:"270px",aceEditorHeight:"200px",newLabel:"New Entry",newEntryTemplate:"",wNew:null,
initialTemplate:[],wSaveButton:null,showACEEditor:true,aceEditorOptions:null,aceEditor:null,aceNode:null,wBorderContainer:null,wJSONPane:null,wACEPane:null,wToAceButton:null,wFromAceButton:null,hasSave:true,hasNew:false,templateString:"\x3cdiv class\x3d'jsonEditorWidgetContainer' style\x3d'width: 100%;height:${!minHeight};'\x3e\x3cdiv data-dojo-attach-point\x3d'wBorderContainer' data-dojo-type\x3d'dijit.layout.BorderContainer' region\x3d'center' data-dojo-props\x3d\"design:'sidebar',liveSplitters:true\" class\x3d'' style\x3d'width:100%;height:${!minHeight};'\x3e"+
"\x3cscript type\x3d'dojo/method'\x3e"+"this._splitterClass \x3d 'dojox.layout.ToggleSplitter';"+"\x3c/script\x3e"+"\x3cdiv style\x3d'height:30px;'\x3e"+"\x3cdiv class\x3d'jsonEditorToolbar' data-dojo-attach-point\x3d'menuBar' data-dojo-type\x3d'dijit.MenuBar' data-dojo-props\x3d\"region:'top'\"\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.PopupMenuBarItem' data-dojo-attach-point\x3d'menu' style\x3d'float: left;' disabled\x3d'false'\x3e"+"\x3cspan style\x3d'color: #000000; !important'\x3eNew\x3c/span\x3e"+
"\x3cdiv data-dojo-type\x3d'dijit.Menu' style\x3d'display: none;'\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-attach-point\x3d'wNew'\x3e${!newLabel}\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'wSaveButton' class\x3d'scriptEditorReloadButton' data-dojo-type\x3d'dijit.form.ToggleButton' data-dojo-props\x3d\"iconClass:'',showLabel:true\"\x3eSave\x3c/div\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuSeparator' style\x3d'float: left;width: 1px;height: 27px;background-color: #969696;margin-right: 15px;margin-left: 15px;'\x3e\x3c/div\x3e"+
"\x3cdiv data-dojo-attach-point\x3d'wToAceButton' class\x3d'' data-dojo-type\x3d'dijit.form.ToggleButton' data-dojo-props\x3d\"iconClass:'el-icon-chevron-down',showLabel:false\"\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'wFromAceButton' class\x3d'' data-dojo-type\x3d'dijit.form.ToggleButton' data-dojo-props\x3d\"iconClass:'el-icon-chevron-up',showLabel:false\"\x3e\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'wJSONPane' style\x3d'height:50%;width: 100%;padding: 0px;overflow: hidden;margin:0px;' toggleSplitterFullSize\x3d'100%' toggleSplitterCollapsedSize\x3d'100px' toggleSplitterState\x3d'open' data-dojo-type\x3d'dijit.layout.ContentPane' splitter\x3d'true' data-dojo-props\x3d\"region:'center',splitter:true\"\x3e"+
"\x3cdiv valign\x3d'middle' class\x3d'jsonEditorWidget' data-dojo-attach-point\x3d'valueNode' style\x3d'height:inherit;'\x3e\x3c/div\x3e"+"\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'wACEPane' style\x3d'height:50%;width: 100%;padding: 0px;overflow: hidden;' data-dojo-type\x3d'dijit.layout.ContentPane' splitter\x3d'true' data-dojo-props\x3d\"region:'bottom',splitter:true\"\x3e"+"\x3cdiv valign\x3d'middle' class\x3d'jsonAceEditorWidget' data-dojo-attach-point\x3d'aceNode' style\x3d'height:100%;padding: 0px;'\x3e\x3c/div\x3e"+
"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e",editor:null,getValue:function(){if(this.editor){var json=this.editor.get();var val=JSON.stringify(json);return val}return this.inherited(arguments)},onPlatformChanged:function(newPlatform){this.inherited(arguments);if(this.nativeWidget)this.nativeWidget.set("value",this.getValue())},resize:function(){this.inherited(arguments);this.wBorderContainer.resize();var thiz=this;try{if(this.showACEEditor&&!this.aceEditor)this._createACEEditor(this.aceNode)}catch(e){console.error("constructing ace editor widget failed : "+
e.message)}thiz.wJSONPane.resize();thiz.wACEPane.resize();thiz.wBorderContainer.resize()},setupNativeWidgetHandler:function(){if(this.nativeWidget){var thiz=this;dojo.connect(this.nativeWidget,"onChange",function(item){if(thiz["isSaving"]);thiz["isSaving"]=true;thiz.widgetChanged(this)})}},_createJSONEditor:function(parentNode){this.editor=new JSONEditor(parentNode)},appendNewTemplatedEntry:function(){var json=this.editor.get();if(!lang.isArray(json))lang.mixin(json,{},this.newEntryTemplate);else json.push(this.newEntryTemplate);
this.editor.set(json)},onFromAce:function(){if(this.aceEditor){var value=this.aceEditor.get("value");this.editor.set(dojo.fromJson(value))}},onToAce:function(){var json=this.editor.get();var val=JSON.stringify(json,null,2);if(this.aceEditor)this.aceEditor.set("value",val)},onSave:function(value){},setupEventHandlers:function(){var thiz=this;if(this.wNew)dojo.connect(this.wNew,"onClick",function(item){if(thiz.newEntryTemplate)thiz.appendNewTemplatedEntry(thiz.newEntryTemplate)});if(this.wSaveButton)dojo.connect(this.wSaveButton,
"onClick",function(item){var json=thiz.editor.get();thiz.setValue(JSON.stringify(json));thiz.onSave(JSON.stringify(json))});if(this.wFromAceButton)dojo.connect(this.wFromAceButton,"onClick",function(item){thiz.onFromAce()});if(this.wToAceButton)dojo.connect(this.wToAceButton,"onClick",function(item){thiz.onToAce()})},_createACEEditor:function(parentNode){var _options={region:"center",value:"",style:"margin: 0; padding: 0; position:relative;overflow: auto;height:inherit;width:inherit;",mode:"javascript",
readOnly:false,tabSize:2,softTabs:false,wordWrap:false,showPrintMargin:false,highlightActiveLine:false,fontSize:"13px",showGutter:true,className:"editor-ace ace_editor ace-codebox-dark ace_dark"};var editorPane=new TextEditor(_options,dojo.doc.createElement("div"));parentNode.appendChild(editorPane.domNode);editorPane.startup();this.aceEditor=editorPane;this.aceEditor.setOptions();var editor=this.aceEditor.getEditor();var thiz=this},startup:function(){this.inherited(arguments);if(!this.hasNew){this.wNew=
null;utils.destroyWidget(this.wNew)}if(!this.hasSave){this.wSaveButton=null;utils.destroyWidget(this.wSaveButton)}domClass.remove(this.wFromAceButton.iconNode,"dijitReset");domClass.add(this.wFromAceButton,"actionToolbarButtonElusive");domClass.remove(this.wToAceButton.iconNode,"dijitReset");domClass.add(this.wToAceButton,"actionToolbarButtonElusive");try{if(!this.editor){var pdiv=dojo.doc.createElement("div");this.valueNode.appendChild(pdiv);this._createJSONEditor(pdiv);this._createACEEditor(this.aceNode)}}catch(e){console.error("constructing json editor widget failed : "+
e.message)}var jsonStr=utils.toString(this.valueStr);if(!jsonStr||jsonStr.length==0)jsonStr="[]";this.valueStr=jsonStr;if(this.editor&&this.valueStr){if(this.valueStr!="Unset")try{var _json=dojo.fromJson(jsonStr);this.editor.set(_json)}catch(e){console.error("json editor chrash "+jsonStr);if(jsonStr.indexOf(",")!=-1){var _splitted=jsonStr.split(",");this.editor.set(_splitted)}else this.editor.set(dojo.fromJson("[]"))}else this.editor.set(this.initialTemplate);this.editor.expandAll()}this.setupEventHandlers()}})})},
"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset dijitMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand_ el-icon-caret-right" style\x3d"font-size: 8px"\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"dijit/layout/StackController":function(){define("dijit/layout/StackController",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","../focus","../registry","../_Widget","../_TemplatedMixin","../_Container","../form/ToggleButton","dojo/touch","dojo/i18n!../nls/common"],function(array,declare,domClass,domConstruct,keys,lang,on,topic,focus,registry,_Widget,_TemplatedMixin,_Container,ToggleButton){var StackButton=declare("dijit.layout._StackButton",
ToggleButton,{tabIndex:"-1",closeButton:false,_aria_attr:"aria-selected",buildRendering:function(evt){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});var StackController=declare("dijit.layout.StackController",[_Widget,_TemplatedMixin,_Container],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:StackButton,buttonWidgetCloseClass:"dijitStackCloseButton",
pane2button:function(id){return registry.byId(this.id+"_"+id)},postCreate:function(){this.inherited(arguments);this.own(topic.subscribe(this.containerId+"-startup",lang.hitch(this,"onStartup")),topic.subscribe(this.containerId+"-addChild",lang.hitch(this,"onAddChild")),topic.subscribe(this.containerId+"-removeChild",lang.hitch(this,"onRemoveChild")),topic.subscribe(this.containerId+"-selectChild",lang.hitch(this,"onSelectChild")),topic.subscribe(this.containerId+"-containerKeyDown",lang.hitch(this,
"onContainerKeyDown")));this.containerNode.dojoClick=true;this.own(on(this.containerNode,"click",lang.hitch(this,function(evt){var button=registry.getEnclosingWidget(evt.target);if(button!=this.containerNode&&!button.disabled&&button.page)for(var target=evt.target;target!==this.containerNode;target=target.parentNode)if(domClass.contains(target,this.buttonWidgetCloseClass)){this.onCloseButtonClick(button.page);break}else if(target==button.domNode){this.onButtonClick(button.page);break}})))},onStartup:function(info){this.textDir=
info.textDir;array.forEach(info.children,this.onAddChild,this);if(info.selected)this.onSelectChild(info.selected);var containerNode=registry.byId(this.containerId).containerNode,pane2button=lang.hitch(this,"pane2button"),paneToButtonAttr={"title":"label","showtitle":"showLabel","iconclass":"iconClass","closable":"closeButton","tooltip":"title","disabled":"disabled","textdir":"textdir"},connectFunc=function(attr,buttonAttr){return on(containerNode,"attrmodified-"+attr,function(evt){var button=pane2button(evt.detail&&
evt.detail.widget&&evt.detail.widget.id);if(button)button.set(buttonAttr,evt.detail.newValue)})};for(var attr in paneToButtonAttr)this.own(connectFunc(attr,paneToButtonAttr[attr]))},destroy:function(preserveDom){this.destroyDescendants(preserveDom);this.inherited(arguments)},onAddChild:function(page,insertIndex){var Cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;var button=new Cls({id:this.id+"_"+page.id,name:this.id+"_"+page.id,label:page.title,disabled:page.disabled,
ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,textDir:page.textDir||this.textDir,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip,page:page});this.addChild(button,insertIndex);page.controlButton=button;if(!this._currentChild)this.onSelectChild(page);var labelledby=page._wrapper.getAttribute("aria-labelledby")?page._wrapper.getAttribute("aria-labelledby")+" "+button.id:button.id;page._wrapper.removeAttribute("aria-label");page._wrapper.setAttribute("aria-labelledby",
labelledby)},onRemoveChild:function(page){if(this._currentChild===page)this._currentChild=null;var button=this.pane2button(page.id);if(button){this.removeChild(button);button.destroy()}delete page.controlButton},onSelectChild:function(page){if(!page)return;if(this._currentChild){var oldButton=this.pane2button(this._currentChild.id);oldButton.set("checked",false);domClass.remove(oldButton.domNode,"ui-state-active");oldButton.focusNode.setAttribute("tabIndex","-1")}var newButton=this.pane2button(page.id);
newButton.set("checked",true);domClass.add(newButton.domNode,"ui-state-active");this._currentChild=page;newButton.focusNode.setAttribute("tabIndex","0");var container=registry.byId(this.containerId)},onButtonClick:function(page){var button=this.pane2button(page.id);focus.focus(button.focusNode);if(this._currentChild&&this._currentChild.id===page.id)button.set("checked",true);var container=registry.byId(this.containerId);container.selectChild(page)},onCloseButtonClick:function(page){var container=
registry.byId(this.containerId);container.closeChild(page);if(this._currentChild){var b=this.pane2button(this._currentChild.id);if(b)focus.focus(b.focusNode||b.domNode)}},adjacent:function(forward){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition)))forward=!forward;var children=this.getChildren();var idx=array.indexOf(children,this.pane2button(this._currentChild.id)),current=children[idx];var child;do{idx=(idx+(forward?1:children.length-1))%children.length;child=children[idx]}while(child.disabled&&
child!=current);return child},onkeydown:function(e,fromContainer){if(this.disabled||e.altKey)return;var forward=null;if(e.ctrlKey||!e._djpage){switch(e.keyCode){case keys.LEFT_ARROW:case keys.UP_ARROW:if(!e._djpage)forward=false;break;case keys.PAGE_UP:if(e.ctrlKey)forward=false;break;case keys.RIGHT_ARROW:case keys.DOWN_ARROW:if(!e._djpage)forward=true;break;case keys.PAGE_DOWN:if(e.ctrlKey)forward=true;break;case keys.HOME:var children=this.getChildren();for(var idx=0;idx<children.length;idx++){var child=
children[idx];if(!child.disabled){this.onButtonClick(child.page);break}}e.stopPropagation();e.preventDefault();break;case keys.END:var children=this.getChildren();for(var idx=children.length-1;idx>=0;idx--){var child=children[idx];if(!child.disabled){this.onButtonClick(child.page);break}}e.stopPropagation();e.preventDefault();break;case keys.DELETE:case "W".charCodeAt(0):if(this._currentChild.closable&&(e.keyCode==keys.DELETE||e.ctrlKey))this.onCloseButtonClick(this._currentChild);e.stopPropagation();
e.preventDefault();break;case keys.TAB:if(e.ctrlKey){this.onButtonClick(this.adjacent(!e.shiftKey).page);e.stopPropagation();e.preventDefault()}break}if(forward!==null){this.onButtonClick(this.adjacent(forward).page);e.stopPropagation();e.preventDefault()}}},onContainerKeyDown:function(info){info.e._djpage=info.page;this.onkeydown(info.e)}});StackController.StackButton=StackButton;return StackController})},"dojox/mdnd/Moveable":function(){define("dojox/mdnd/Moveable",["dojo/_base/kernel","dojo/_base/declare",
"dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/dom","dojo/dom-geometry","dojo/dom-style","dojo/_base/window","dojox/mdnd/AutoScroll"],function(dojo,declare,array,connect,event,sniff,dom,geom,domStyle,baseWin,AutoScroll){return declare("dojox.mdnd.Moveable",null,{handle:null,skip:true,dragDistance:3,constructor:function(params,node){this.node=dom.byId(node);this.d=this.node.ownerDocument;if(!params)params={};this.handle=params.handle?dom.byId(params.handle):null;
if(!this.handle)this.handle=this.node;this.skip=params.skip;this.events=[connect.connect(this.handle,"onmousedown",this,"onMouseDown")];if(AutoScroll.autoScroll)this.autoScroll=AutoScroll.autoScroll},isFormElement:function(e){var t=e.target;if(t.nodeType==3)t=t.parentNode;return" a button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0},onMouseDown:function(e){if(this._isDragging)return;var isLeftButton=(e.which||e.button)==1;if(!isLeftButton)return;if(this.skip&&this.isFormElement(e))return;
if(this.autoScroll){this.autoScroll.setAutoScrollNode(this.node);this.autoScroll.setAutoScrollMaxPage()}this.events.push(connect.connect(this.d,"onmouseup",this,"onMouseUp"));this.events.push(connect.connect(this.d,"onmousemove",this,"onFirstMove"));this._selectStart=connect.connect(dojo.body(),"onselectstart",event.stop);this._firstX=e.clientX;this._firstY=e.clientY;event.stop(e)},onFirstMove:function(e){event.stop(e);var d=(this._firstX-e.clientX)*(this._firstX-e.clientX)+(this._firstY-e.clientY)*
(this._firstY-e.clientY);if(d>this.dragDistance*this.dragDistance){this._isDragging=true;connect.disconnect(this.events.pop());domStyle.set(this.node,"width",geom.getContentBox(this.node).w+"px");this.initOffsetDrag(e);this.events.push(connect.connect(this.d,"onmousemove",this,"onMove"))}},initOffsetDrag:function(e){this.offsetDrag={"l":e.pageX,"t":e.pageY};var s=this.node.style;var position=geom.position(this.node,true);this.offsetDrag.l=position.x-this.offsetDrag.l;this.offsetDrag.t=position.y-
this.offsetDrag.t;var coords={"x":position.x,"y":position.y};this.size={"w":position.w,"h":position.h};this.onDragStart(this.node,coords,this.size)},onMove:function(e){event.stop(e);if(sniff("ie")==8&&new Date-this.date<20)return;if(this.autoScroll)this.autoScroll.checkAutoScroll(e);var coords={"x":this.offsetDrag.l+e.pageX,"y":this.offsetDrag.t+e.pageY};var s=this.node.style;s.left=coords.x+"px";s.top=coords.y+"px";this.onDrag(this.node,coords,this.size,{"x":e.pageX,"y":e.pageY});if(sniff("ie")==
8)this.date=new Date},onMouseUp:function(e){if(this._isDragging){event.stop(e);this._isDragging=false;if(this.autoScroll)this.autoScroll.stopAutoScroll();delete this.onMove;this.onDragEnd(this.node);this.node.focus()}connect.disconnect(this.events.pop());connect.disconnect(this.events.pop())},onDragStart:function(node,coords,size){},onDragEnd:function(node){},onDrag:function(node,coords,size,mousePosition){},destroy:function(){array.forEach(this.events,connect.disconnect);this.events=this.node=null}})})},
"cbtree/Tree":function(){require({cache:{"url:cbtree/templates/cbtreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"indentNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitTreeExpando" role\x3d"presentation" /\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"checkBoxNode" class\x3d"cbtreeCheckBox" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" data-dojo-attach-point\x3d"iconNode" class\x3d"dijitIcon dijitTreeIcon" role\x3d"presentation"/\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\n\x3c/div\x3e\n'}});
define("cbtree/Tree",["module","require","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/Deferred","dojo/dom-construct","dojo/has","dojo/keys","dojo/on","dojo/topic","dojo/text!./templates/cbtreeNode.html","dijit/registry","dijit/Tree","./CheckBox","./errors/createError!./errors/CBTErrors.json","./util/IE8_Event","./util/shim/Array"],function(module,require,connect,declare,lang,aspect,Deferred,domConstruct,has,keys,on,topic,NodeTemplate,registry,Tree,CheckBox,createError,
IE8_Event){var CBTError=createError(module.id);var ie=has("ie");var dojoVers=0;var TreeNode=declare([Tree._TreeNode],{templateString:NodeTemplate,_checkBox:null,_toggle:true,_widget:null,constructor:function(args){var checkBoxWidget={type:CheckBox,target:"INPUT",mixin:null,postCreate:null};var widgetArgs={multiState:null,checked:undefined,value:"on"};var customWidget=args.widget;if(customWidget){lang.mixin(widgetArgs,customWidget.args);lang.mixin(checkBoxWidget,customWidget)}checkBoxWidget.args=widgetArgs;
this._toggle=typeof checkBoxWidget.type.prototype.toggle=="function";this._widget=checkBoxWidget},_getCheckedAttr:function(){if(this._checkBox)return this.tree.model.getChecked(this.item)},_getEnabledAttr:function(){return this.tree.model.getEnabled(this.item)},_set_checked_Attr:function(newState){if(this._checkBox)this._checkBox.set("checked",newState)},_set_enabled_Attr:function(enabled){if(this._checkBox)this._checkBox.set("readOnly",!enabled)},_setCheckedAttr:function(newState){if(this._checkBox)return this.tree.model.setChecked(this.item,
newState,this)},_setEnabledAttr:function(newState){if(this.tree.model.setEnabled(this.item,newState)===undefined)this.set("_enabled_",!!newState)},_createCheckBox:function(multiState){var attach=this.tree.attachToForm===true;var model=this.tree.model;var enabled=true;var checked=model.getChecked(this.item);var widget=this._widget;var args=widget.args;if(typeof model.getEnabled=="function")enabled=model.getEnabled(this.item);if(checked!==undefined){args.multiState=multiState;args.checked=checked;args.value=
this.label;if(typeof widget.mixin=="function")lang.hitch(this,widget.mixin)(args);this._checkBox=new widget.type(args);if(this._checkBox){if(attach)this._checkBox.set("name",this._checkBox.id);else this._checkBox.name=this._checkBox.id;this._checkBox.item=this.item;if(!this.isExpandable&&!this.tree.leafCheckBox||this.isExpandable&&!this.tree.branchCheckBox)this._checkBox.domNode.style.display="none";if(typeof this._widget.postCreate=="function")lang.hitch(this._checkBox,this._widget.postCreate)(this);
domConstruct.place(this._checkBox.domNode,this.checkBoxNode,"replace")}}if(this._checkBox)if(this.isExpandable){if(this.tree.branchReadOnly||!enabled)this._checkBox.set("readOnly",true)}else if(this.tree.leafReadOnly||!enabled)this._checkBox.set("readOnly",true)},_remove:function(){var parent=this.getParent();var tree=this.tree;var model=tree.model;function removeNode(node){if(!node._destroyed){var itemId=model.getIdentity(node.item);var nodes=tree._itemNodesMap[itemId];if(nodes.length==1)delete tree._itemNodesMap[itemId];
else{var index=nodes.indexOf(node);if(index!=-1)nodes.splice(index,1)}tree.dndController.removeTreeNode(node);node.getChildren().forEach(removeNode);if(tree.persist&&node.isExpanded)tree._state(node,false)}}removeNode(this);if(parent&&this!=tree.rootNode)parent.removeChild(this);this.destroyRecursive()},_setExpando:function(){this.rowNode.setAttribute("expandable",this.isExpandable.toString());this.inherited(arguments)},_toggleCheckBox:function(){var newState,oldState;if(this._checkBox){if(this._toggle)newState=
this._checkBox.toggle();else{oldState=this._checkBox.get("checked");newState=oldState=="mixed"?true:!oldState}this._checkBox.set("checked",newState)}return newState},destroy:function(){if(this._checkbox){this._checkbox.destroyRecursive();delete this._checkbox}this.inherited(arguments)},postCreate:function(){var tree=this.tree,itemIcon=null;if(tree.checkBoxes===true)this._createCheckBox(tree._multiState);if(tree._hasStyling&&tree._iconAttr){itemIcon=tree.get("icon",this.item);if(itemIcon)this.set("_icon_",
itemIcon)}this.set("tooltip",this.title);this.inherited(arguments)}});var CBTree=declare([Tree],{attachToForm:false,branchCheckBox:true,branchIcons:true,branchReadOnly:false,checkBoxes:true,clickEventCheckBox:true,closeOnUnchecked:false,deleteRecursive:false,enableDelete:false,leafCheckBox:true,leafIcons:true,leafReadOnly:false,openOnChecked:false,_multiState:true,_customWidget:null,_eventAttrMap:null,_dojoRequired:{min:{major:1,minor:8},max:{major:1,minor:99}},_checkboxBaseClass:CheckBox.prototype.baseClass,
_assertVersion:function(){if(dojo.version){var dojoMax=199,dojoMin=0;dojoVers=dojo.version.major*100+dojo.version.minor;if(this._dojoRequired){if(this._dojoRequired.min!==undefined)dojoMin=this._dojoRequired.min.major*100+this._dojoRequired.min.minor;if(this._dojoRequired.max!==undefined)dojoMax=this._dojoRequired.max.major*100+this._dojoRequired.max.minor;if(dojoVers<dojoMin||dojoVers>dojoMax)throw new CBTError("InvalidVersion","_assertVersion");}}else throw new CBTError("UnknownVersion","_assertVersion");
},_createTreeNode:function(args){args.widget=this._customWidget;if(this._hasStyling&&this._icon)args.icon=this._icon;return new TreeNode(args)},_onCheckBoxClick:function(evt,nodeWidget){var newState=nodeWidget._checkBox.get("checked");var item=nodeWidget.item;this.model.setChecked(item,newState,this);if(newState&&this.openOnChecked)this.expandChecked();else if(!newState&&this.closeOnUnchecked)this.collapseUnchecked();this.onCheckBoxClick(item,nodeWidget,evt);if(this.clickEventCheckBox)this.onClick(item,
nodeWidget,evt);this.focusNode(nodeWidget);topic.publish("checkbox",{item:item,node:nodeWidget,state:newState,evt:evt});evt.stopPropagation();return newState},_onClick:function(nodeWidget,evt){var node=registry.getEnclosingWidget(evt.target);if(node.isInstanceOf(TreeNode))this.inherited(arguments)},_onItemChange:function(item,attr,value){var nodeProp=this._eventAttrMap[attr];if(nodeProp){var identity=this.model.getIdentity(item),nodes=this._itemNodesMap[identity],request={};if(nodes){if(nodeProp.value)if(typeof nodeProp.value==
"function")request[nodeProp.attribute]=lang.hitch(this,nodeProp.value)(item,nodeProp.attribute,value);else request[nodeProp.attribute]=nodeProp.value;else request[nodeProp.attribute]=value;nodes.forEach(function(node){node.item=item;node.set(request)},this)}}},_onItemDelete:function(item){var identity=this.model.getIdentity(item);var nodes=this._itemNodesMap[identity];if(nodes){nodes=nodes.slice(0);nodes.forEach(function(node){node._remove()})}},_onDeleteKey:function(){var evt=arguments[0];if(dojoVers<
109)evt=evt.evt;if(connect.isCopyKey(evt))if(this.enableDelete&&typeof this.model.deleteItem=="function"){var items=this.paths.map(function(path){return path[path.length-1]});if(items.length)this.model.deleteItem(items,this.deleteRecursive)}},_onEnterKey:function(message){var node=message.node;var evt=message.evt;if(!evt.altKey&&evt.keyCode==keys.SPACE)this._onSpaceKey(evt,node);this.inherited(arguments)},_onSpaceKey:function(evt,node){if(node&&node._checkBox)if(!evt.altKey&&evt.keyCode==keys.SPACE){node._toggleCheckBox();
this._onCheckBoxClick(evt,node)}},_onLabelChange:function(oldValue,newValue){this.mapEventToAttr(oldValue,newValue,"label")},_onModelReset:function(){var expanded=lang.clone(this._openedNodes);var model=this.model;var tree=this;this.onLoadDeferred.always(function(){if(tree.rootNode&&!tree.rootNode._destroyed)tree._onItemDelete(tree.rootNode.item);model.ready().then(function(){tree.expandChildrenDeferred=new Deferred;tree.pendingCommandsDeferred=tree.expandChildrenDeferred;if(tree.persist)tree._openedNodes=
expanded;tree._load();tree.onLoadDeferred=tree.pendingCommandsPromise;tree.onLoadDeferred.then(lang.hitch(tree,"onLoad"))},function(err){throw err;})})},_onSubmit:function(evt){var event=evt;if(ie&&ie<9){event=new IE8_Event(this.formNode,"submit",{cancelable:true},evt);event.defaultPrevented=!!evt.returnValue}if(!event.defaultPrevented)if(this.onSubmit(this.formNode,this,event)===false)event.preventDefault();return!event.defaultPrevented},_setAttachToFormAttr:function(value){var extension="./extensions/TreeOnSubmit";
var tree=this;if(value)if(typeof value==="boolean"||typeof value==="object"){if(typeof value==="object"&&!this._hasOnSubmit)require([value.extension||extension],function(extendedTree){aspect.around(tree,"onSubmit",function(){return extendedTree.prototype.onSubmit});this._hasOnSubmit=true});this.attachToForm=value}else throw new CBTError("InvalidType","_setAttachToFormAttr");else this.attachToForm=false},_setWidgetAttr:function(widget){var customWidget=widget,property="checked",message,proto;if(typeof widget==
"string")return this._setWidgetAttr({type:widget});if(lang.isObject(widget)&&widget.hasOwnProperty("type")){customWidget=widget.type;if(typeof customWidget=="function"){proto=customWidget.prototype;this._checkboxBaseClass=customWidget.prototype.baseClass;if(proto&&proto[property]!==undefined)if(typeof proto.get=="function"&&typeof proto.set=="function"){this._customWidget=widget;return}else message="Widget does not support get() and/or set()";else message="widget MUST have a 'checked' property"}else if(typeof customWidget==
"string"&&~customWidget.indexOf("/")){var self=this;require([customWidget],function(newWidget){widget.type=newWidget;self._setWidgetAttr(widget)});return}else message="argument is not a valid module id"}else message="Object is missing required 'type' property";throw new CBTError("InvalidWidget","_setWidgetAttr",message);},collapseUnchecked:function(node){node=node||this.rootNode;if(node&&node.isExpandable&&node.isExpanded){var children=node.getChildren(node);children.forEach(function(child){this.collapseUnchecked(child)},
this);if(this.model.getChecked(node.item)===false)this._collapseNode(node)}},create:function(){this._assertVersion();this.inherited(arguments)},destroy:function(){this.model=null;this.inherited(arguments)},expandChecked:function(node){var expand=false;if(!node){node=this.rootNode;expand=!node._checkBox}if(node&&node.isExpandable&&(expand||this.model.getChecked(node.item))){if(!node.isExpanded)this._expandNode(node);var children=node.getChildren(node);children.forEach(function(child){this.expandChecked(child)},
this)}},getIconStyle:function(item){var isExpandable=this.model.mayHaveChildren(item);var style=this.inherited(arguments)||{};if(isExpandable){if(!this.branchIcons)style.display="none"}else if(!this.leafIcons)style.display="none";return style},mixinEvent:function(item,event,value){if(this.model.isItem(item)&&this._eventAttrMap[event]){this._onItemChange(item,event,value);this.onEvent(item,event,value)}},onCheckBoxClick:function(){},onEvent:function(){},onSubmit:function(){},postMixInProperties:function(){this._eventAttrMap=
{};this.inherited(arguments)},postCreate:function(){var target=this.domNode.parentNode;var model=this.model;var self=this;if(this.model){if(this.checkBoxes===true)if(this._modelOk()){this._multiState=model.multiState;this.mapEventToAttr(null,model.get("checkedAttr")||"checked","_checked_");model.validateData()}else{0&&console.warn(model.id+"::postCreate(): model does not support getChecked() and/or setChecked().");this.checkBoxes=false}aspect.after(model,"onLabelChange",lang.hitch(this,"_onLabelChange"),
true);aspect.after(model,"onReset",lang.hitch(this,"_onModelReset"),true);this.mapEventToAttr(null,model.get("enabledAttr"),"_enabled_");this.mapEventToAttr(null,model.get("labelAttr"),"label");this.inherited(arguments);var cbSelector="."+this._checkboxBaseClass;if(dojoVers<109){this.own(on(this.domNode,on.selector(cbSelector,"click"),function(evt){self._onCheckBoxClick(evt,registry.getEnclosingWidget(this.parentNode))}));this._onKeyDown(null,{});this._keyHandlerMap[keys.DELETE]="_onDeleteKey"}else{this.own(on(this.containerNode,
on.selector(cbSelector,"click"),function(evt){self._onCheckBoxClick(evt,registry.getEnclosingWidget(this.parentNode))}));this._keyNavCodes[keys.DELETE]=lang.hitch(this,"_onDeleteKey");this._keyNavCodes[keys.SPACE]=lang.hitch(this,"_onSpaceKey")}this.on("load",function(){if(!self.autoExpand&&self.openOnChecked)self.expandChecked()});while(target){if(target.nodeName==="FORM"){on(target,"submit",lang.hitch(this,"_onSubmit"));break}target=target.parentNode}this.formNode=target}else throw new CBTError("PropertyMissing",
"postCreate","no model was specified");},mapEventToAttr:function(oldAttr,attr,nodeAttr,value){if(typeof attr=="string"&&typeof nodeAttr=="string")if(attr.length&&nodeAttr.length){if(oldAttr)delete this._eventAttrMap[oldAttr];this._eventAttrMap[attr]={attribute:nodeAttr,value:value}}},_modelOk:function(){if(this.model.getChecked&&typeof this.model.getChecked=="function"&&this.model.setChecked&&typeof this.model.setChecked=="function")return true;return false}});CBTree._TreeNode=TreeNode;return CBTree})},
"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(has,win,dom,style){var geom={};geom.boxModel="content-box";if(has("ie"))geom.boxModel=document.compatMode=="BackCompat"?"border-box":"content-box";geom.getPadExtents=function getPadExtents(node,computedStyle){node=dom.byId(node);var s=computedStyle||style.getComputedStyle(node),px=style.toPixelValue,l=px(node,s.paddingLeft),t=px(node,s.paddingTop),r=px(node,s.paddingRight),b=px(node,s.paddingBottom);
return{l:l,t:t,r:r,b:b,w:l+r,h:t+b}};var none="none";geom.getBorderExtents=function getBorderExtents(node,computedStyle){node=dom.byId(node);var px=style.toPixelValue,s=computedStyle||style.getComputedStyle(node),l=s.borderLeftStyle!=none?px(node,s.borderLeftWidth):0,t=s.borderTopStyle!=none?px(node,s.borderTopWidth):0,r=s.borderRightStyle!=none?px(node,s.borderRightWidth):0,b=s.borderBottomStyle!=none?px(node,s.borderBottomWidth):0;return{l:l,t:t,r:r,b:b,w:l+r,h:t+b}};geom.getPadBorderExtents=function getPadBorderExtents(node,
computedStyle){node=dom.byId(node);var s=computedStyle||style.getComputedStyle(node),p=geom.getPadExtents(node,s),b=geom.getBorderExtents(node,s);return{l:p.l+b.l,t:p.t+b.t,r:p.r+b.r,b:p.b+b.b,w:p.w+b.w,h:p.h+b.h}};geom.getMarginExtents=function getMarginExtents(node,computedStyle){node=dom.byId(node);var s=computedStyle||style.getComputedStyle(node),px=style.toPixelValue,l=px(node,s.marginLeft),t=px(node,s.marginTop),r=px(node,s.marginRight),b=px(node,s.marginBottom);return{l:l,t:t,r:r,b:b,w:l+r,
h:t+b}};geom.getMarginBox=function getMarginBox(node,computedStyle){node=dom.byId(node);var s=computedStyle||style.getComputedStyle(node),me=geom.getMarginExtents(node,s),l=node.offsetLeft-me.l,t=node.offsetTop-me.t,p=node.parentNode,px=style.toPixelValue,pcs;if(has("mozilla")){var sl=parseFloat(s.left),st=parseFloat(s.top);if(!isNaN(sl)&&!isNaN(st)){l=sl;t=st}else if(p&&p.style){pcs=style.getComputedStyle(p);if(pcs.overflow!="visible"){l+=pcs.borderLeftStyle!=none?px(node,pcs.borderLeftWidth):0;
t+=pcs.borderTopStyle!=none?px(node,pcs.borderTopWidth):0}}}else if(has("opera")||has("ie")==8&&!has("quirks"))if(p){pcs=style.getComputedStyle(p);l-=pcs.borderLeftStyle!=none?px(node,pcs.borderLeftWidth):0;t-=pcs.borderTopStyle!=none?px(node,pcs.borderTopWidth):0}return{l:l,t:t,w:node.offsetWidth+me.w,h:node.offsetHeight+me.h}};geom.getContentBox=function getContentBox(node,computedStyle){node=dom.byId(node);var s=computedStyle||style.getComputedStyle(node),w=node.clientWidth,h,pe=geom.getPadExtents(node,
s),be=geom.getBorderExtents(node,s);if(!w){w=node.offsetWidth;h=node.offsetHeight}else{h=node.clientHeight;be.w=be.h=0}if(has("opera")){pe.l+=be.l;pe.t+=be.t}return{l:pe.l,t:pe.t,w:w-pe.w-be.w,h:h-pe.h-be.h}};function setBox(node,l,t,w,h,u){u=u||"px";var s=node.style;if(!isNaN(l))s.left=l+u;if(!isNaN(t))s.top=t+u;if(w>=0)s.width=w+u;if(h>=0)s.height=h+u}function isButtonTag(node){return node.tagName.toLowerCase()=="button"||node.tagName.toLowerCase()=="input"&&(node.getAttribute("type")||"").toLowerCase()==
"button"}function usesBorderBox(node){return geom.boxModel=="border-box"||node.tagName.toLowerCase()=="table"||isButtonTag(node)}geom.setContentSize=function setContentSize(node,box,computedStyle){node=dom.byId(node);var w=box.w,h=box.h;if(usesBorderBox(node)){var pb=geom.getPadBorderExtents(node,computedStyle);if(w>=0)w+=pb.w;if(h>=0)h+=pb.h}setBox(node,NaN,NaN,w,h)};var nilExtents={l:0,t:0,w:0,h:0};geom.setMarginBox=function setMarginBox(node,box,computedStyle){node=dom.byId(node);var s=computedStyle||
style.getComputedStyle(node),w=box.w,h=box.h,pb=usesBorderBox(node)?nilExtents:geom.getPadBorderExtents(node,s),mb=geom.getMarginExtents(node,s);if(has("webkit"))if(isButtonTag(node)){var ns=node.style;if(w>=0&&!ns.width)ns.width="4px";if(h>=0&&!ns.height)ns.height="4px"}if(w>=0)w=Math.max(w-pb.w-mb.w,0);if(h>=0)h=Math.max(h-pb.h-mb.h,0);setBox(node,box.l,box.t,w,h)};geom.isBodyLtr=function isBodyLtr(doc){doc=doc||win.doc;return(win.body(doc).dir||doc.documentElement.dir||"ltr").toLowerCase()=="ltr"};
geom.docScroll=function docScroll(doc){doc=doc||win.doc;var node=win.doc.parentWindow||win.doc.defaultView;return"pageXOffset"in node?{x:node.pageXOffset,y:node.pageYOffset}:(node=has("quirks")?win.body(doc):doc.documentElement)&&{x:geom.fixIeBiDiScrollLeft(node.scrollLeft||0,doc),y:node.scrollTop||0}};if(has("ie"))geom.getIeDocumentElementOffset=function getIeDocumentElementOffset(doc){doc=doc||win.doc;var de=doc.documentElement;if(has("ie")<8){var r=de.getBoundingClientRect(),l=r.left,t=r.top;if(has("ie")<
7){l+=de.clientLeft;t+=de.clientTop}return{x:l<0?0:l,y:t<0?0:t}}else return{x:0,y:0}};geom.fixIeBiDiScrollLeft=function fixIeBiDiScrollLeft(scrollLeft,doc){doc=doc||win.doc;var ie=has("ie");if(ie&&!geom.isBodyLtr(doc)){var qk=has("quirks"),de=qk?win.body(doc):doc.documentElement,pwin=win.global;if(ie==6&&!qk&&pwin.frameElement&&de.scrollHeight>de.clientHeight)scrollLeft+=de.clientLeft;return ie<8||qk?scrollLeft+de.clientWidth-de.scrollWidth:-scrollLeft}return scrollLeft};geom.position=function(node,
includeScroll){node=dom.byId(node);var db=win.body(node.ownerDocument),ret=node.getBoundingClientRect();ret={x:ret.left,y:ret.top,w:ret.right-ret.left,h:ret.bottom-ret.top};if(has("ie")<9){var offset=geom.getIeDocumentElementOffset(node.ownerDocument);ret.x-=offset.x+(has("quirks")?db.clientLeft+db.offsetLeft:0);ret.y-=offset.y+(has("quirks")?db.clientTop+db.offsetTop:0)}if(includeScroll){var scroll=geom.docScroll(node.ownerDocument);ret.x+=scroll.x;ret.y+=scroll.y}return ret};geom.getMarginSize=
function getMarginSize(node,computedStyle){node=dom.byId(node);var me=geom.getMarginExtents(node,computedStyle||style.getComputedStyle(node));var size=node.getBoundingClientRect();return{w:size.right-size.left+me.w,h:size.bottom-size.top+me.h}};geom.normalizeEvent=function(event){if(!("layerX"in event)){event.layerX=event.offsetX;event.layerY=event.offsetY}if(!has("dom-addeventlistener")){var se=event.target;var doc=se&&se.ownerDocument||document;var docBody=has("quirks")?doc.body:doc.documentElement;
var offset=geom.getIeDocumentElementOffset(doc);event.pageX=event.clientX+geom.fixIeBiDiScrollLeft(docBody.scrollLeft||0,doc)-offset.x;event.pageY=event.clientY+(docBody.scrollTop||0)-offset.y}};return geom})},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormWidgetMixin"],function(declare,domAttr,keys,lang,on,has,_FormWidgetMixin){return declare("dijit.form._FormValueMixin",
_FormWidgetMixin,{readOnly:false,_setReadOnlyAttr:function(value){domAttr.set(this.focusNode,"readOnly",value);this._set("readOnly",value)},postCreate:function(){this.inherited(arguments);if(this._resetValue===undefined)this._lastValueReported=this._resetValue=this.value},_setValueAttr:function(newValue,priorityChange){this._handleOnChange(newValue,priorityChange)},_handleOnChange:function(newValue,priorityChange){this._set("value",newValue);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,
false)},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true)}})})},"dojo/date/stamp":function(){define("dojo/date/stamp",["../_base/lang","../_base/array"],function(lang,array){var stamp={};lang.setObject("dojo.date.stamp",stamp);stamp.fromISOString=function(formattedString,defaultTime){if(!stamp._isoRegExp)stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;var match=stamp._isoRegExp.exec(formattedString),
result=null;if(match){match.shift();if(match[1])match[1]--;if(match[6])match[6]*=1E3;if(defaultTime){defaultTime=new Date(defaultTime);array.forEach(array.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return defaultTime["get"+prop]()}),function(value,index){match[index]=match[index]||value})}result=new Date(match[0]||1970,match[1]||0,match[2]||1,match[3]||0,match[4]||0,match[5]||0,match[6]||0);if(match[0]<100)result.setFullYear(match[0]||1970);var offset=
0,zoneSign=match[7]&&match[7].charAt(0);if(zoneSign!="Z"){offset=(match[8]||0)*60+(Number(match[9])||0);if(zoneSign!="-")offset*=-1}if(zoneSign)offset-=result.getTimezoneOffset();if(offset)result.setTime(result.getTime()+offset*6E4)}return result};stamp.toISOString=function(dateObject,options){var _=function(n){return n<10?"0"+n:n};options=options||{};var formattedDate=[],getter=options.zulu?"getUTC":"get",date="";if(options.selector!="time"){var year=dateObject[getter+"FullYear"]();date=["0000".substr((year+
"").length)+year,_(dateObject[getter+"Month"]()+1),_(dateObject[getter+"Date"]())].join("-")}formattedDate.push(date);if(options.selector!="date"){var time=[_(dateObject[getter+"Hours"]()),_(dateObject[getter+"Minutes"]()),_(dateObject[getter+"Seconds"]())].join(":");var millis=dateObject[getter+"Milliseconds"]();if(options.milliseconds)time+="."+(millis<100?"0":"")+_(millis);if(options.zulu)time+="Z";else if(options.selector!="time"){var timezoneOffset=dateObject.getTimezoneOffset();var absOffset=
Math.abs(timezoneOffset);time+=(timezoneOffset>0?"-":"+")+_(Math.floor(absOffset/60))+":"+_(absOffset%60)}formattedDate.push(time)}return formattedDate.join("T")};return stamp})},"cbtree/models/ItemWriteStoreEX":function(){define("cbtree/models/ItemWriteStoreEX",["dojo/_base/array","dojo/_base/lang","dojo/data/ItemFileWriteStore"],function(array,lang,ItemFileWriteStore){lang.extend(ItemFileWriteStore,{_validated:false,addReference:function(refItem,parentItem,attribute,index){if(!this.isItem(refItem)||
!this.isItem(parentItem))throw new Error("ItemWriteStoreEX::addReference(): refItem and/or parentItem is not a valid store item");if(refItem!==parentItem){var oldValue;if(parentItem[attribute]){oldValue=parentItem[attribute];this._addReferenceToMap(refItem,parentItem,attribute);if(typeof index==="number")parentItem[attribute].splice(index,0,refItem);else parentItem[attribute].push(refItem)}else{this._addReferenceToMap(refItem,parentItem,attribute);parentItem[attribute]=[refItem]}this.onSet(parentItem,
attribute,oldValue,parentItem[attribute]);return true}throw new Error("ItemWriteStoreEX::addReference(): parent and reference items are identical");},attachToRoot:function(item,insertIndex){if(!this.isRootItem(item)){item[this._rootItemPropName]=true;if(insertIndex!==undefined)this._arrayOfTopLevelItems.splice(insertIndex,0,item);else this._arrayOfTopLevelItems.push(item);this.onRoot(item,"attach")}},detachFromRoot:function(item){if(this.isRootItem(item)){this._removeArrayElement(this._arrayOfTopLevelItems,
item);delete item[this._rootItemPropName];this.onRoot(item,"detach")}},getIdentifierAttr:function(){if(!this._loadFinished)this._forceLoad();return this._getIdentifierAttribute()},getParents:function(item){var parents=[],itemId;if(item){var references=item[this._reverseRefMap]||item["backup_"+this._reverseRefMap];if(references)for(itemId in references)parents.push(this._getItemByIdentity(itemId));return parents}},isRootItem:function(item){this._assertIsItem(item);return item[this._rootItemPropName]?
true:false},isValidated:function(){return this._validated},itemExist:function(keywordArgs){var identifierAttr,itemIdentity,item;if(typeof keywordArgs!="object"&&typeof keywordArgs!="undefined")throw new Error("ItemWriteStoreEX::itemExist(): argument is not an object");this._assert(!this._saveInProgress);identifierAttr=this.getIdentifierAttr();if(identifierAttr!==Number&&this._itemsByIdentity){itemIdentity=keywordArgs[identifierAttr];if(typeof itemIdentity==="undefined")throw new Error("ItemWriteStoreEX::itemExist(): item has no identity");
if(!this._pending._deletedItems[itemIdentity])item=this._itemsByIdentity[itemIdentity];else throw new Error("ItemWriteStoreEX::itemExist(): item is pending deletion");}return item},loadStore:function(keywordArgs){var scope=keywordArgs.scope||window.global;var self=this;function loadComplete(count,requestArgs){var loadArgs=requestArgs.loadArgs||null;var scope=loadArgs.scope;self.onLoad(count);if(loadArgs)if(loadArgs.onComplete)loadArgs.onComplete.call(scope,count)}if(!this._loadFinished){var request=
{queryOptions:{deep:true},loadArgs:keywordArgs,onBegin:loadComplete,onError:keywordArgs.onError,scope:this};try{this.fetch(request)}catch(err){if(onError)onError.call(scope,err);else throw err;}}else if(onComplete)onComplete.call(scope,this._allFileItems.length)},onDelete:function(deletedItem){if(deletedItem[this._rootItemPropName]===true)this.onRoot(deletedItem,"delete")},onNew:function(item,parentInfo){if(this.isRootItem(item))this.onRoot(item,"new")},onLoad:function(count){},onRoot:function(item,
action){},setValidated:function(value){this._validated=Boolean(value)},removeReference:function(refItem,parentItem,attribute){if(!this.isItem(refItem)||!this.isItem(parentItem))throw new Error("ItemWriteStoreEX::removeReference(): refItem and/or parentItem is not a valid store item");if(parentItem[attribute]){this._removeReferenceFromMap(refItem,parentItem,attribute);var oldValue=parentItem[attribute];if(this._removeArrayElement(parentItem[attribute],refItem)){if(this._isEmpty(parentItem[attribute]))delete parentItem[attribute];
this.onSet(parentItem,attribute,oldValue,parentItem[attribute]);return true}}return false}})})},"xfile/views/_EditorMixin":function(){define("xfile/views/_EditorMixin",["dojo/_base/declare"],function(declare){return declare("xfile.views._EditorMixin",null,{iconClassNormal:null,getContent:function(item,onSuccess){var thiz=this;this.set("iconClass","fa-spinner fa-spin");var _ready=function(content){thiz.set("iconClass",thiz.iconClassNormal);onSuccess(content)};this.ctx.getFileManager().getContent(item.mount,
item.path,_ready)},saveContent:function(value,item,onSuccess,onError){this.ctx.getFileManager().setContent(item.mount,item.path,value,onSuccess)},startup:function(){this.iconClassNormal=""+this.iconClass;this.set("iconClass","fa-spinner fa-spin");this.inherited(arguments)}})})},"dijit/form/_AutoCompleterMixin":function(){define("dijit/form/_AutoCompleterMixin",["dojo/aspect","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","./DataList","./_TextBoxMixin",
"./_SearchMixin"],function(aspect,declare,domAttr,keys,lang,query,regexp,has,DataList,_TextBoxMixin,SearchMixin){var AutoCompleterMixin=declare("dijit.form._AutoCompleterMixin",SearchMixin,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(element){var pos=0;if(typeof element.selectionStart=="number")pos=element.selectionStart;else if(has("ie")){var tr=element.ownerDocument.selection.createRange().duplicate();
var ntr=element.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length}catch(e){}}return pos},_setCaretPos:function(element,location){location=parseInt(location);_TextBoxMixin.selectInputText(element,location,location)},_setDisabledAttr:function(value){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",value?"true":"false")},_onKey:function(evt){if(evt.charCode>=32)return;var key=evt.charCode||
evt.keyCode;if(key==keys.ALT||key==keys.CTRL||key==keys.META||key==keys.SHIFT)return;var pw=this.dropDown;var highlighted=null;this._abortQuery();this.inherited(arguments);if(evt.altKey||evt.ctrlKey||evt.metaKey)return;if(this._opened)highlighted=pw.getHighlightedOption();switch(key){case keys.PAGE_DOWN:case keys.DOWN_ARROW:case keys.PAGE_UP:case keys.UP_ARROW:if(this._opened)this._announceOption(highlighted);evt.stopPropagation();evt.preventDefault();break;case keys.ENTER:if(highlighted){if(highlighted==
pw.nextButton){this._nextSearch(1);evt.stopPropagation();evt.preventDefault();break}else if(highlighted==pw.previousButton){this._nextSearch(-1);evt.stopPropagation();evt.preventDefault();break}evt.stopPropagation();evt.preventDefault()}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length)}case keys.TAB:var newvalue=this.get("displayedValue");if(pw&&(newvalue==pw._messages["previousMessage"]||newvalue==pw._messages["nextMessage"]))break;if(highlighted)this._selectOption(highlighted);
case keys.ESCAPE:if(this._opened){this._lastQuery=null;this.closeDropDown()}break}},_autoCompleteText:function(text){var fn=this.focusNode;_TextBoxMixin.selectInputText(fn,fn.value.length);var caseFilter=this.ignoreCase?"toLowerCase":"substr";if(text[caseFilter](0).indexOf(this.focusNode.value[caseFilter](0))==0){var cpos=this.autoComplete?this._getCaretPos(fn):fn.value.length;if(cpos+1>fn.value.length){fn.value=text;_TextBoxMixin.selectInputText(fn,cpos)}}else{fn.value=text;_TextBoxMixin.selectInputText(fn)}},
_openResultList:function(results,query,options){var wasSelected=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();if(!results.length&&options.start==0){this.closeDropDown();return}this._nextSearch=this.dropDown.onPage=lang.hitch(this,function(direction){results.nextPage(direction!==-1);this.focus()});this.dropDown.createOptions(results,options,lang.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if("direction"in options){if(options.direction)this.dropDown.highlightFirstOption();
else if(!options.direction)this.dropDown.highlightLastOption();if(wasSelected)this._announceOption(this.dropDown.getHighlightedOption())}else if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(query[this.searchAttr].toString()))this._announceOption(this.dropDown.containerNode.firstChild.nextSibling)},_showResultList:function(){this.closeDropDown(true);this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return false},
closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);this.domNode.setAttribute("aria-expanded","false")}},_setBlurValue:function(){var newvalue=this.get("displayedValue");var pw=this.dropDown;if(pw&&(newvalue==pw._messages["previousMessage"]||newvalue==pw._messages["nextMessage"]))this._setValueAttr(this._lastValueReported,true);else if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",newvalue)}else{if(this.value!=this._lastValueReported)this._handleOnChange(this.value,
true);this._refreshState()}this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(item,priorityChange,displayedValue){var value="";if(item){if(!displayedValue)displayedValue=this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr];value=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):displayedValue}this.set("value",value,priorityChange,displayedValue,item)},_announceOption:function(node){if(!node)return;var newValue;if(node==this.dropDown.nextButton||
node==this.dropDown.previousButton){newValue=node.innerHTML;this.item=undefined;this.value=""}else{var item=this.dropDown.items[node.getAttribute("item")];newValue=(this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr]).toString();this.set("item",item,false,newValue)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",domAttr.get(node,"id"));this._autoCompleteText(newValue)},_selectOption:function(target){this.closeDropDown();
if(target)this._announceOption(target);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,true);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=undefined;this.inherited(arguments)},_startSearch:function(key){if(!this.dropDown){var popupId=this.id+"_popup",dropDownConstructor=lang.isString(this.dropDownClass)?lang.getObject(this.dropDownClass,false):this.dropDownClass;
this.dropDown=new dropDownConstructor({onChange:lang.hitch(this,this._selectOption),id:popupId,dir:this.dir,textDir:this.textDir})}this._lastInput=key;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store){var srcNodeRef=this.srcNodeRef;this.store=new DataList({},srcNodeRef);if(!("value"in this.params)){var item=this.item=this.store.fetchSelectedItem();if(item){var valueField=this._getValueField();this.value=
this.store._oldAPI?this.store.getValue(item,valueField):item[valueField]}}}},postCreate:function(){var label=query('label[for\x3d"'+this.id+'"]');if(label.length){if(!label[0].id)label[0].id=this.id+"_label";this.domNode.setAttribute("aria-labelledby",label[0].id)}this.inherited(arguments);aspect.after(this,"onSearch",lang.hitch(this,"_openResultList"),true)},_getMenuLabelFromItem:function(item){var label=this.labelFunc(item,this.store),labelType=this.labelType;if(this.highlightMatch!="none"&&this.labelType==
"text"&&this._lastInput){label=this.doHighlight(label,this._lastInput);labelType="html"}return{html:labelType=="html",label:label}},doHighlight:function(label,find){var modifiers=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=regexp.escapeString(find);return this._escapeHtml(label.replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==this.queryExpr.length-4?"$":""),modifiers),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'\x3cspan class\x3d"dijitComboBoxHighlightMatch"\x3e$1\x3c/span\x3e')},
_escapeHtml:function(str){str=String(str).replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");return str},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(item,store){return(store._oldAPI?store.getValue(item,this.labelAttr||this.searchAttr):item[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(value,priorityChange,displayedValue,item){this._set("item",item||null);if(value==null)value="";this.inherited(arguments)}});
if(0)AutoCompleterMixin.extend({_setTextDirAttr:function(textDir){this.inherited(arguments);if(this.dropDown)this.dropDown._set("textDir",textDir)}});return AutoCompleterMixin})},"xfile/widgets/PerspectiveSelector":function(){define("xfile/widgets/PerspectiveSelector",["dojo/_base/declare","dojo/dom-class","xide/widgets/TemplatedWidgetBase","xide/types","xide/utils"],function(declare,domClass,TemplatedWidgetBase,types,utils){return declare("xfile.widgets.PerspectiveSelector",[TemplatedWidgetBase],
{wButton:null,wDual:null,wSingle:null,wBrowser:null,wPreview:null,wGallery:null,currentModeClass:"fileLayoutTreeIcon",layout:null,config:null,addJQueryClasses:true,menu:null,templateString:"\x3cdiv\x3e"+"\x3cdiv class\x3d'fileLayoutSelector' data-dojo-type\x3d'dijit.form.DropDownButton' data-dojo-props\x3d\"iconClass:'el-icon-screen'\" data-dojo-attach-point\x3d'wButton'\x3e"+"\x3cspan\x3e\x3c/span\x3e"+"\x3cdiv data-dojo-attach-point\x3d'menu' data-dojo-type\x3d'dijit.Menu' style\x3d'display: none;'\x3e"+
"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'fa-columns'\" data-dojo-attach-point\x3d'wDual'\x3eDual\x3c/div\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'el-icon-th-large'\" data-dojo-attach-point\x3d'wSingle'\x3eSingle\x3c/div\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'el-icon-eye-open'\" data-dojo-attach-point\x3d'wPreview'\x3ePreview\x3c/div\x3e"+"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'el-icon-delicious'\" data-dojo-attach-point\x3d'wBrowser'\x3eBrowser\x3c/div\x3e"+
"\x3cdiv data-dojo-type\x3d'dijit.MenuItem' data-dojo-props\x3d\"iconClass:'el-icon-picture'\" data-dojo-attach-point\x3d'wGallery'\x3eGallery\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e",destroy:function(){utils.destroyWidget(this.menu);utils.destroyWidget(this.wButton);this.inherited(arguments)},onModeChanged:function(mode,updateDelegate,widget){if(this.wButton&&widget)this.wButton.set("iconClass",""+widget.iconClass);if(updateDelegate===true)if(this.owner&&this.owner.onPerspectiveChanged)this.owner.onPerspectiveChanged(mode);
else this.delegate.onPerspectiveChanged(mode);if(widget)this.currentModeClass=widget.iconClass},fixButton:function(button,layoutMode){var thiz=this;if(button&&button.iconNode){domClass.remove(button.iconNode,"dijitReset");domClass.add(button.iconNode,"actionToolbarButtonElusive");domClass.add(button.domNode,"ui-menu-item");if(layoutMode)button.on("click",function(){thiz.onModeChanged(layoutMode,true,button)})}},startup:function(){this.inherited(arguments);if(this.layout!=null)this.onModeChanged(this.layout,
false);if(this.addJQueryClasses)domClass.add(this.menu.containerNode,"ui-menu ui-widget ui-widget-content ui-corner-all");this.fixButton(this.wButton);this.fixButton(this.wSingle,types.LAYOUT_PRESET.SINGLE);this.fixButton(this.wDual,types.LAYOUT_PRESET.DUAL);this.fixButton(this.wPreview,types.LAYOUT_PRESET.PREVIEW);this.fixButton(this.wBrowser,types.LAYOUT_PRESET.BROWSER);this.fixButton(this.wGallery,types.LAYOUT_PRESET.GALLERY)}})})},"dijit/TitlePane":function(){require({cache:{"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n'}});
define("dijit/TitlePane",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","./_CssStateMixin","./_TemplatedMixin","./layout/ContentPane","dojo/text!./templates/TitlePane.html","./_base/manager","dijit/a11yclick"],function(array,declare,dom,domAttr,domClass,domGeometry,fxUtils,has,kernel,keys,_CssStateMixin,_TemplatedMixin,ContentPane,template,manager){var TitlePane=declare("dijit.TitlePane",
[ContentPane,_TemplatedMixin,_CssStateMixin],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:true,toggleable:true,tabIndex:"0",duration:manager.defaultDuration,baseClass:"dijitTitlePane",templateString:template,doLayout:false,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.titleNode,false)},postCreate:function(){this.inherited(arguments);if(this.toggleable)this._trackMouseState(this.titleBarNode,
this.baseClass+"Title");var hideNode=this.hideNode,wipeNode=this.wipeNode;this._wipeIn=fxUtils.wipeIn({node:wipeNode,duration:this.duration,beforeBegin:function(){hideNode.style.display=""}});this._wipeOut=fxUtils.wipeOut({node:wipeNode,duration:this.duration,onEnd:function(){hideNode.style.display="none"}})},_setOpenAttr:function(open,animate){array.forEach([this._wipeIn,this._wipeOut],function(animation){if(animation&&animation.status()=="playing")animation.stop()});if(animate){var anim=this[open?
"_wipeIn":"_wipeOut"];anim.play()}else this.hideNode.style.display=this.wipeNode.style.display=open?"":"none";if(this._started)if(open)this._onShow();else this.onHide();this.containerNode.setAttribute("aria-hidden",open?"false":"true");this.focusNode.setAttribute("aria-pressed",open?"true":"false");this._set("open",open);this._setCss()},_setToggleableAttr:function(canToggle){this.focusNode.setAttribute("role",canToggle?"button":"heading");if(canToggle){this.focusNode.setAttribute("aria-controls",
this.id+"_pane");this.focusNode.setAttribute("tabIndex",this.tabIndex);this.focusNode.setAttribute("aria-pressed",this.open)}else{domAttr.remove(this.focusNode,"aria-controls");domAttr.remove(this.focusNode,"tabIndex");domAttr.remove(this.focusNode,"aria-pressed")}this._set("toggleable",canToggle);this._setCss()},_setContentAttr:function(content){if(!this.open||!this._wipeOut||this._wipeOut.status()=="playing")this.inherited(arguments);else{if(this._wipeIn&&this._wipeIn.status()=="playing")this._wipeIn.stop();
domGeometry.setMarginBox(this.wipeNode,{h:domGeometry.getMarginBox(this.wipeNode).h});this.inherited(arguments);if(this._wipeIn)this._wipeIn.play();else this.hideNode.style.display=""}},toggle:function(){this._setOpenAttr(!this.open,true)},_setCss:function(){var node=this.titleBarNode||this.focusNode;var oldCls=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");domClass.replace(node,this._titleBarClass,oldCls||"");domClass.replace(node,
this._titleBarClass.replace("TitlePaneTitle",""),(oldCls||"").replace("TitlePaneTitle",""));this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(e){if(e.keyCode==keys.DOWN_ARROW&&this.open){this.containerNode.focus();e.preventDefault()}},_onTitleClick:function(){if(this.toggleable)this.toggle()},setTitle:function(title){kernel.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",title)}});if(0)TitlePane.extend({_setTitleAttr:function(title){this._set("title",
title);this.titleNode.innerHTML=title;this.applyTextDir(this.titleNode)},_setTooltipAttr:function(tooltip){this._set("tooltip",tooltip);if(this.textDir)tooltip=this.enforceTextDirWithUcc(null,tooltip);domAttr.set(this.focusNode,"title",tooltip)},_setTextDirAttr:function(textDir){if(this._created&&this.textDir!=textDir){this._set("textDir",textDir);this.set("title",this.title);this.set("tooltip",this.tooltip)}}});return TitlePane})},"dojo/dnd/Container":function(){define("dojo/dnd/Container",["../_base/array",
"../_base/declare","../_base/event","../_base/kernel","../_base/lang","../_base/window","../dom","../dom-class","../dom-construct","../Evented","../has","../on","../query","../ready","../touch","./common"],function(array,declare,event,kernel,lang,win,dom,domClass,domConstruct,Evented,has,on,query,ready,touch,dnd){var Container=declare("dojo.dnd.Container",Evented,{skipForm:false,allowNested:false,constructor:function(node,params){this.node=dom.byId(node);if(!params)params={};this.creator=params.creator||
null;this.skipForm=params.skipForm;this.parent=params.dropParent&&dom.byId(params.dropParent);this.map={};this.current=null;this.containerState="";domClass.add(this.node,"dojoDndContainer");if(!(params&&params._skipStartup))this.startup();this.events=[on(this.node,touch.over,lang.hitch(this,"onMouseOver")),on(this.node,touch.out,lang.hitch(this,"onMouseOut")),on(this.node,"dragstart",lang.hitch(this,"onSelectStart")),on(this.node,"selectstart",lang.hitch(this,"onSelectStart"))]},creator:function(){},
getItem:function(key){return this.map[key]},setItem:function(key,data){this.map[key]=data},delItem:function(key){delete this.map[key]},forInItems:function(f,o){o=o||kernel.global;var m=this.map,e=dnd._empty;for(var i in m){if(i in e)continue;f.call(o,m[i],i,this)}return o},clearItems:function(){this.map={}},getAllNodes:function(){return query((this.allowNested?"":"\x3e ")+".dojoDndItem",this.parent)},sync:function(){var map={};this.getAllNodes().forEach(function(node){if(node.id){var item=this.getItem(node.id);
if(item){map[node.id]=item;return}}else node.id=dnd.getUniqueId();var type=node.getAttribute("dndType"),data=node.getAttribute("dndData");map[node.id]={data:data||node.innerHTML,type:type?type.split(/\s*,\s*/):["text"]}},this);this.map=map;return this},insertNodes:function(data,before,anchor){if(!this.parent.firstChild)anchor=null;else if(before){if(!anchor)anchor=this.parent.firstChild}else if(anchor)anchor=anchor.nextSibling;var i,t;if(anchor)for(i=0;i<data.length;++i){t=this._normalizedCreator(data[i]);
this.setItem(t.node.id,{data:t.data,type:t.type});anchor.parentNode.insertBefore(t.node,anchor)}else for(i=0;i<data.length;++i){t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.appendChild(t.node)}return this},destroy:function(){array.forEach(this.events,function(handle){handle.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(params,node,Ctor){params._skipStartup=true;return new Ctor(node,params)},startup:function(){if(!this.parent){this.parent=
this.node;if(this.parent.tagName.toLowerCase()=="table"){var c=this.parent.getElementsByTagName("tbody");if(c&&c.length)this.parent=c[0]}}this.defaultCreator=dnd._defaultCreator(this.parent);this.sync()},onMouseOver:function(e){var n=e.relatedTarget;while(n){if(n==this.node)break;try{n=n.parentNode}catch(x){n=null}}if(!n){this._changeState("Container","Over");this.onOverEvent()}n=this._getChildByEvent(e);if(this.current==n)return;if(this.current)this._removeItemClass(this.current,"Over");if(n)this._addItemClass(n,
"Over");this.current=n},onMouseOut:function(e){for(var n=e.relatedTarget;n;){if(n==this.node)return;try{n=n.parentNode}catch(x){n=null}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null}this._changeState("Container","");this.onOutEvent()},onSelectStart:function(e){if(!this.skipForm||!dnd.isFormElement(e))event.stop(e)},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(type,newState){var prefix="dojoDnd"+type;var state=type.toLowerCase()+"State";domClass.replace(this.node,
prefix+newState,prefix+this[state]);this[state]=newState},_addItemClass:function(node,type){domClass.add(node,"dojoDndItem"+type)},_removeItemClass:function(node,type){domClass.remove(node,"dojoDndItem"+type)},_getChildByEvent:function(e){var node=e.target;if(node)for(var parent=node.parentNode;parent;node=parent,parent=node.parentNode)if((parent==this.parent||this.allowNested)&&domClass.contains(node,"dojoDndItem"))return node;return null},_normalizedCreator:function(item,hint){var t=(this.creator||
this.defaultCreator).call(this,item,hint);if(!lang.isArray(t.type))t.type=["text"];if(!t.node.id)t.node.id=dnd.getUniqueId();domClass.add(t.node,"dojoDndItem");return t}});dnd._createNode=function(tag){if(!tag)return dnd._createSpan;return function(text){return domConstruct.create(tag,{innerHTML:text})}};dnd._createTrTd=function(text){var tr=domConstruct.create("tr");domConstruct.create("td",{innerHTML:text},tr);return tr};dnd._createSpan=function(text){return domConstruct.create("span",{innerHTML:text})};
dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dnd._defaultCreator=function(node){var tag=node.tagName.toLowerCase();var c=tag=="tbody"||tag=="thead"?dnd._createTrTd:dnd._createNode(dnd._defaultCreatorNodes[tag]);return function(item,hint){var isObj=item&&lang.isObject(item),data,type,n;if(isObj&&item.tagName&&item.nodeType&&item.getAttribute){data=item.getAttribute("dndData")||item.innerHTML;type=item.getAttribute("dndType");type=type?type.split(/\s*,\s*/):["text"];n=item}else{data=
isObj&&item.data?item.data:item;type=isObj&&item.type?item.type:["text"];n=(hint=="avatar"?dnd._createSpan:c)(String(data))}if(!n.id)n.id=dnd.getUniqueId();return{node:n,data:data,type:type}}};return Container})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has"],function(JSON,kernel,array,has){has.add("activex",typeof ActiveXObject!=="undefined");var handleXML;if(has("activex")){var dp=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0",
"MSXML.DOMDocument"];handleXML=function(response){var result=response.data;if(!result||!result.documentElement){var text=response.text;array.some(dp,function(p){try{var dom=new ActiveXObject(p);dom.async=false;dom.loadXML(text);result=dom}catch(e){return false}return true})}return result}}var handlers={"javascript":function(response){return kernel.eval(response.text||"")},"json":function(response){return JSON.parse(response.text||null)},"xml":handleXML};function handle(response){var handler=handlers[response.options.handleAs];
response.data=handler?handler(response):response.data||response.text;return response}handle.register=function(name,handler){handlers[name]=handler};return handle})},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","./Viewport","./main"],function(array,domGeometry,domStyle,kernel,win,Viewport,dijit){function _place(node,choices,layoutNode,aroundNodeCoords){var view=Viewport.getEffectiveBox(node.ownerDocument);
if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body")win.body(node.ownerDocument).appendChild(node);var best=null;array.some(choices,function(choice){var corner=choice.corner;var pos=choice.pos;var overflow=0;var spaceAvailable={w:{"L":view.l+view.w-pos.x,"R":pos.x-view.l,"M":view.w}[corner.charAt(1)],h:{"T":view.t+view.h-pos.y,"B":pos.y-view.t,"M":view.h}[corner.charAt(0)]};var s=node.style;s.left=s.right="auto";if(layoutNode){var res=layoutNode(node,choice.aroundCorner,corner,
spaceAvailable,aroundNodeCoords);overflow=typeof res=="undefined"?0:res}var style=node.style;var oldDisplay=style.display;var oldVis=style.visibility;if(style.display=="none"){style.visibility="hidden";style.display=""}var bb=domGeometry.position(node);style.display=oldDisplay;style.visibility=oldVis;var startXpos={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(view.l,Math.min(view.l+view.w,pos.x+(bb.w>>1))-bb.w)}[corner.charAt(1)],startYpos={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(view.t,Math.min(view.t+view.h,
pos.y+(bb.h>>1))-bb.h)}[corner.charAt(0)],startX=Math.max(view.l,startXpos),startY=Math.max(view.t,startYpos),endX=Math.min(view.l+view.w,startXpos+bb.w),endY=Math.min(view.t+view.h,startYpos+bb.h),width=endX-startX,height=endY-startY;overflow+=bb.w-width+(bb.h-height);if(best==null||overflow<best.overflow)best={corner:corner,aroundCorner:choice.aroundCorner,x:startX,y:startY,w:width,h:height,overflow:overflow,spaceAvailable:spaceAvailable};return!overflow});if(best.overflow&&layoutNode)layoutNode(node,
best.aroundCorner,best.corner,best.spaceAvailable,aroundNodeCoords);var l=domGeometry.isBodyLtr(node.ownerDocument),top=best.y,side=l?best.x:view.w-best.x-best.w;if(/relative|absolute/.test(domStyle.get(win.body(node.ownerDocument),"position"))){top-=domStyle.get(win.body(node.ownerDocument),"marginTop");side-=(l?1:-1)*domStyle.get(win.body(node.ownerDocument),l?"marginLeft":"marginRight")}var s=node.style;s.top=top+"px";s[l?"left":"right"]=side+"px";s[l?"right":"left"]="auto";return best}var reverse=
{"TL":"BR","TR":"BL","BL":"TR","BR":"TL"};var place={at:function(node,pos,corners,padding,layoutNode){var choices=array.map(corners,function(corner){var c={corner:corner,aroundCorner:reverse[corner],pos:{x:pos.x,y:pos.y}};if(padding){c.pos.x+=corner.charAt(1)=="L"?padding.x:-padding.x;c.pos.y+=corner.charAt(0)=="T"?padding.y:-padding.y}return c});return _place(node,choices,layoutNode)},around:function(node,anchor,positions,leftToRight,layoutNode){var aroundNodePos;if(typeof anchor=="string"||"offsetWidth"in
anchor){aroundNodePos=domGeometry.position(anchor,true);var anchorBorder=domGeometry.getBorderExtents(anchor),anchorChildBorder=anchor.firstChild?domGeometry.getBorderExtents(anchor.firstChild):{t:0,l:0,b:0,r:0},nodeBorder=domGeometry.getBorderExtents(node),nodeChildBorder=node.firstChild?domGeometry.getBorderExtents(node.firstChild):{t:0,l:0,b:0,r:0};aroundNodePos.t+=Math.min(anchorBorder.t+anchorChildBorder.t,nodeBorder.t+nodeChildBorder.t);aroundNodePos.l+=Math.min(anchorBorder.l+anchorChildBorder.l,
nodeBorder.l+nodeChildBorder.l);aroundNodePos.h-=Math.min(anchorBorder.t+anchorChildBorder.t,nodeBorder.t+nodeChildBorder.t)+Math.min(anchorBorder.b+anchorChildBorder.b,nodeBorder.b+nodeChildBorder.b);aroundNodePos.w-=Math.min(anchorBorder.l+anchorChildBorder.l,nodeBorder.l+nodeChildBorder.l)+Math.min(anchorBorder.r+anchorChildBorder.r,nodeBorder.r+nodeChildBorder.r)}else aroundNodePos=anchor;if(anchor.parentNode){var sawPosAbsolute=domStyle.getComputedStyle(anchor).position=="absolute";var parent=
anchor.parentNode;while(parent&&parent.nodeType==1&&parent.nodeName!="BODY"){var parentPos=domGeometry.position(parent,true),pcs=domStyle.getComputedStyle(parent);if(/relative|absolute/.test(pcs.position))sawPosAbsolute=false;if(!sawPosAbsolute&&/hidden|auto|scroll/.test(pcs.overflow)){var bottomYCoord=Math.min(aroundNodePos.y+aroundNodePos.h,parentPos.y+parentPos.h);var rightXCoord=Math.min(aroundNodePos.x+aroundNodePos.w,parentPos.x+parentPos.w);aroundNodePos.x=Math.max(aroundNodePos.x,parentPos.x);
aroundNodePos.y=Math.max(aroundNodePos.y,parentPos.y);aroundNodePos.h=bottomYCoord-aroundNodePos.y;aroundNodePos.w=rightXCoord-aroundNodePos.x}if(pcs.position=="absolute")sawPosAbsolute=true;parent=parent.parentNode}}var x=aroundNodePos.x,y=aroundNodePos.y,width="w"in aroundNodePos?aroundNodePos.w:aroundNodePos.w=aroundNodePos.width,height="h"in aroundNodePos?aroundNodePos.h:(kernel.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+aroundNodePos.height+", width:"+width+
" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+aroundNodePos.height+", w:"+width+" }","","2.0"),aroundNodePos.h=aroundNodePos.height);var choices=[];function push(aroundCorner,corner){choices.push({aroundCorner:aroundCorner,corner:corner,pos:{x:{"L":x,"R":x+width,"M":x+(width>>1)}[aroundCorner.charAt(1)],y:{"T":y,"B":y+height,"M":y+(height>>1)}[aroundCorner.charAt(0)]}})}array.forEach(positions,function(pos){var ltr=leftToRight;switch(pos){case "above-centered":push("TM","BM");break;
case "below-centered":push("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":push(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":push(ltr?"TL":"TR",ltr?"TR":"TL");push(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":push(ltr?"BL":"BR",ltr?"TL":"TR");push(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":push(ltr?"TL":"TR",ltr?"BL":"BR");push(ltr?"TR":"TL",ltr?"BR":"BL");break;default:push(pos.aroundCorner,
pos.corner)}});var position=_place(node,choices,layoutNode,{w:width,h:height});position.aroundNodePos=aroundNodePos;return position}};return dijit.place=place})},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget",["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_Widget,_Container,_Contained,Viewport,declare,domClass,domGeometry,domStyle){return declare("dijit.layout._LayoutWidget",
[_Widget,_Container,_Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);domClass.add(this.domNode,"dijitContainer")},startup:function(){if(this._started)return;this.inherited(arguments);var parent=this.getParent&&this.getParent();if(!(parent&&parent.isLayoutContainer)){this.resize();this.own(Viewport.on("resize",lang.hitch(this,"resize")))}},resize:function(changeSize,resultSize){var node=this.domNode;if(changeSize)domGeometry.setMarginBox(node,
changeSize);var mb=resultSize||{};lang.mixin(mb,changeSize||{});if(!("h"in mb)||!("w"in mb))mb=lang.mixin(domGeometry.getMarginBox(node),mb);var cs=domStyle.getComputedStyle(node);var me=domGeometry.getMarginExtents(node,cs);var be=domGeometry.getBorderExtents(node,cs);var bb=this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)};var pe=domGeometry.getPadExtents(node,cs);this._contentBox={l:domStyle.toPixelValue(node,cs.paddingLeft),t:domStyle.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-
pe.h};this.layout()},layout:function(){},_setupChild:function(child){var cls=this.baseClass+"-child "+(child.baseClass?this.baseClass+"-"+child.baseClass:"");domClass.add(child.domNode,cls)},addChild:function(child,insertIndex){this.inherited(arguments);if(this._started)this._setupChild(child)},removeChild:function(child){var cls=this.baseClass+"-child"+(child.baseClass?" "+this.baseClass+"-"+child.baseClass:"");domClass.remove(child.domNode,cls);this.inherited(arguments)}})})},"dgrid/util/touch":function(){define(["dojo/on",
"dojo/query"],function(on,query){var util={tapRadius:10,dbltapTime:250,selector:function(selector,eventType,children){return function(target,listener){var bubble=eventType.bubble;if(bubble)eventType=bubble;else if(children!==false)children=true;return on(target,eventType,function(event){var eventTarget=event.target;if(eventTarget.nodeType==3)eventTarget=eventTarget.parentNode;while(!query.matches(eventTarget,selector,target))if(eventTarget==target||!children||!(eventTarget=eventTarget.parentNode))return;
return listener.call(eventTarget,event)})}},countCurrentTouches:function(evt,node){if(!("touches"in evt))return-1;var i,numTouches,touch;for(i=0,numTouches=0;touch=evt.touches[i];++i)if(node.contains(touch.target))++numTouches;return numTouches}};function handleTapStart(target,listener,evt,prevent){if(evt.targetTouches.length>1)return;var start=evt.changedTouches[0],startX=start.screenX,startY=start.screenY;prevent&&evt.preventDefault();var endListener=on(target,"touchend",function(evt){var end=evt.changedTouches[0];
if(!evt.targetTouches.length){if(Math.abs(end.screenX-startX)<util.tapRadius&&Math.abs(end.screenY-startY)<util.tapRadius){prevent&&evt.preventDefault();listener.call(this,evt)}endListener.remove()}})}function tap(target,listener){return on(target,"touchstart",function(evt){handleTapStart(target,listener,evt)})}function dbltap(target,listener){var first,timeout;return on(target,"touchstart",function(evt){if(!first)handleTapStart(target,function(evt){first=evt.changedTouches[0];timeout=setTimeout(function(){first=
timeout=null},util.dbltapTime)},evt);else handleTapStart(target,function(evt){if(!first)return;var second=evt.changedTouches[0];if(Math.abs(second.screenX-first.screenX)<util.tapRadius&&Math.abs(second.screenY-first.screenY)<util.tapRadius){timeout&&clearTimeout(timeout);first=timeout=null;listener.call(this,evt)}},evt,true)})}util.tap=tap;util.dbltap=dbltap;return util})},"xblox/embedded_ui":function(){define("xblox/embedded_ui",["xblox/embedded","xblox/views/BlocksFileEditor","xblox/factory/Blocks",
"xblox/views/GroupedBlockView","xide/widgets/ScriptWidget","xide/widgets/JSONEditorWidget","dijit/PopupMenuBarItem"],function(embedded,BlocksFileEditor){})},"xide/manager/ServerActionBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojox/rpc/Service","dojox/rpc/JsonRPC","xide/manager/RPCService","xide/manager/ManagerBase","xide/types","dojox/encoding/digests/SHA1"],function(declare,lang,Service,JsonRPC,RPCService,ManagerBase,types,SHA1){return declare("xide.manager.ServerActionBase",
[ManagerBase],{serviceObject:null,serviceUrl:null,singleton:true,serviceClass:null,findServiceUrl:function(declaredClass){var config=window["xFileConfig"];if(config&&config.mixins)for(var i=0;i<config.mixins.length;i++){var obj=config.mixins[i];if(obj.declaredClass===declaredClass&&obj.mixin&&obj.mixin.serviceUrl)return obj.mixin.serviceUrl}return null},init:function(){this.check()},_initService:function(){if(!this.serviceClass){console.error("have no service class : "+this.declaredClass);console.error("I am singleton "+
this.singleton)}if(!this.serviceUrl)console.error("have no service url : "+this.declaredClass);try{var obj=dojo.getObject("xide.manager.ServerActionBase");if(this.singleton)if(obj&&obj.serviceObject){this.serviceObject=obj.serviceObject;return}if(!this.serviceObject){0&&console.log("Init RPC Class "+this.serviceClass+" with url : "+this.serviceUrl+" singleton "+this.singleton);this.serviceObject=new RPCService(this.serviceUrl);this.serviceObject.sync=this.sync;if(this.singleton)obj.serviceObject=
this.serviceObject}}catch(e){console.error("error in rpc service creation : "+e);debugger}},check:function(){if(!this.serviceObject)this._initService()},onError:function(err){if(err)if(err.code===1){if(err.message&&lang.isArray(err.message)){this.publish(types.EVENTS.ERROR,{message:err.message.join("\x3cbr/\x3e")});return}}else if(err.code===0)this.publish(types.EVENTS.STATUS,"Ok");var struct={error:err};this.publish(types.EVENTS.ERROR,struct,this)},callMethodEx:function(serverClassIn,method,args,
readyCB,omitError){this.check();var serviceClass=serverClassIn||this.serviceClass;var thiz=this;if(!this.serviceObject){console.error("have no service object");return null}if(!this.serviceObject[serviceClass]||this.serviceObject[serviceClass][method]==null){if(omitError===true)this.onError({code:1,message:["Sorry, server doesnt know "+method+" in class"+serviceClass]});return null}var params={};if(this.config&&this.config.RPC_PARAMS){params=lang.mixin(params,this.config.RPC_PARAMS.rpcFixedParams);
params[this.config.RPC_PARAMS.rpcUserField]=this.config.RPC_PARAMS.rpcUserValue;this.serviceObject.extraArgs=params;this.serviceObject.signatureField=this.config.RPC_PARAMS.rpcSignatureField;this.serviceObject.signatureToken=this.config.RPC_PARAMS.rpcSignatureToken}this.serviceObject[serviceClass][method](args).then(function(res){try{if(readyCB)readyCB(res)}catch(e){console.error("bad news : callback for method "+method+" caused a crash in service class "+serviceClass)}if(res&&res.error&&res.error.code==
3)setTimeout(function(){thiz.onMessages(res.error)},50);if(res&&res.error&&res.error&&res.error.code!=0){thiz.onError(res.error);return}if(omitError==true){var struct={message:"Ok!"};thiz.publish(types.EVENTS.STATUS,struct,this)}},function(err){thiz.onError(err)})},callMethodEx2:function(serverClassIn,method,args,readyCB,omitError){this.check();var serviceClass=serverClassIn||this.serviceClass;var thiz=this;if(!this.serviceObject){console.error("have no service object");return null}if(this.serviceObject[serviceClass][method]==
null){if(omitError===true)this.onError({code:1,message:["Sorry, server doesnt know "+method]});return null}var params={};if(this.config&&this.config.RPC_PARAMS){params=lang.mixin(params,this.config.RPC_PARAMS.rpcFixedParams);params[this.config.RPC_PARAMS.rpcUserField]=this.config.RPC_PARAMS.rpcUserValue;this.serviceObject.extraArgs=params;this.serviceObject.signatureField=this.config.RPC_PARAMS.rpcSignatureField;this.serviceObject.signatureToken=this.config.RPC_PARAMS.rpcSignatureToken}return this.serviceObject[serviceClass][method](args)},
callMethod:function(method,args,readyCB,omitError){args=args||[[]];var serviceClass=this.serviceClass;try{var thiz=this;if(this.serviceObject[serviceClass][method]==null){if(omitError===true)this.onError({code:1,message:["Sorry, server doesnt know "+method]});return null}var params={};params=lang.mixin(params,this.config.RPC_PARAMS.rpcFixedParams);params[this.config.RPC_PARAMS.rpcUserField]=this.config.RPC_PARAMS.rpcUserValue;this.serviceObject.extraArgs=params;this.serviceObject.signatureField=this.config.RPC_PARAMS.rpcSignatureField;
this.serviceObject.signatureToken=this.config.RPC_PARAMS.rpcSignatureToken;this.serviceObject[this.serviceClass][method](args).then(function(res){try{if(readyCB)readyCB(res)}catch(e){console.error("crashed in "+method);0&&console.dir(e);debugger}if(res&&res.error&&res.error.code==3)setTimeout(function(){thiz.onMessages(res.error)},50);if(res&&res.error&&res.error&&res.error.code==1){thiz.onError(res.error);return}if(omitError!==false){var struct={message:"Ok!"};thiz.publish(types.EVENTS.STATUS,struct,
this)}},function(err){thiz.onError(err)})}catch(e){console.error("crash! "+e);thiz.onError(e)}}})})},"url:dijit/form/templates/DropDownButton.html":'\x3cspan class\x3d"dijit dijitReset dijitInline"\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\n\t\t\t\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\tdata-dojo-attach-point\x3d"valueNode" role\x3d"presentation"\n/\x3e\x3c/span\x3e\n',
"xide/views/ActionTogglePane":function(){define(["dojo/_base/declare","xide/widgets/_CSSMixin","xide/utils","xide/mixins/EventedMixin","xide/mixins/ReloadMixin","xide/views/TitlePane","xide/widgets/ActionToolbar"],function(declare,CSSMixin,utils,EventedMixin,ReloadMixin,TitlePane,ActionToolbar){return declare("xide.views.ActionTogglePane",[TitlePane,CSSMixin,EventedMixin,ReloadMixin],{delegate:null,actions:null,cssClass:"actionTogglePane",titleBarNode:null,_onTitleClick:function(evt){if(evt.target!=
this.titleBarNode)return;if(this.toggleable)this.toggle();if(this.delegate&&this.delegate.onTitlebarToggled)this.delegate.onTitlebarToggled(this.open)},createWidgets:function(){var actions=this.actions;if(actions){this.focusNode.style["float"]="left";this.toolbar=utils.addWidget(ActionToolbar,{delegate:this,style:"display:inline-block;float:right"},this,this.titleBarNode,true);this.toolbar.addActions(actions,this,null)}this.doCSSClass(this.domNode);this.didWidgets=true},startup:function(){this.inherited(arguments);
this.initReload();this.createWidgets()}})})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(lang,i18n,nlsNumber,dstring,dregexp){var number={};lang.setObject("dojo.number",number);number.format=function(value,options){options=lang.mixin({},options||{});var locale=i18n.normalizeLocale(options.locale),bundle=i18n.getLocalization("dojo.cldr","number",locale);options.customs=bundle;var pattern=options.pattern||bundle[(options.type||
"decimal")+"Format"];if(isNaN(value)||Math.abs(value)==Infinity)return null;return number._applyPattern(value,pattern,options)};number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;number._applyPattern=function(value,pattern,options){options=options||{};var group=options.customs.group,decimal=options.customs.decimal,patternList=pattern.split(";"),positivePattern=patternList[0];pattern=patternList[value<0?1:0]||"-"+positivePattern;if(pattern.indexOf("%")!=-1)value*=100;else if(pattern.indexOf("\u2030")!=
-1)value*=1E3;else if(pattern.indexOf("\u00a4")!=-1){group=options.customs.currencyGroup||group;decimal=options.customs.currencyDecimal||decimal;pattern=pattern.replace(/\u00a4{1,3}/,function(match){var prop=["symbol","currency","displayName"][match.length-1];return options[prop]||options.currency||""})}else if(pattern.indexOf("E")!=-1)throw new Error("exponential notation not supported");var numberPatternRE=number._numberPatternRE;var numberPattern=positivePattern.match(numberPatternRE);if(!numberPattern)throw new Error("unable to find a number expression in pattern: "+
pattern);if(options.fractional===false)options.places=0;return pattern.replace(numberPatternRE,number._formatAbsolute(value,numberPattern[0],{decimal:decimal,group:group,places:options.places,round:options.round}))};number.round=function(value,places,increment){var factor=10/(increment||10);return(factor*+value).toFixed(places)/factor};if((0.9).toFixed()==0){var round=number.round;number.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d)d=0;else{a/=d;if(a<0.5||a>=0.95)d=0}return round(v,
p,m)+(v>0?d:-d)}}number._formatAbsolute=function(value,pattern,options){options=options||{};if(options.places===true)options.places=0;if(options.places===Infinity)options.places=6;var patternParts=pattern.split("."),comma=typeof options.places=="string"&&options.places.indexOf(","),maxPlaces=options.places;if(comma)maxPlaces=options.places.substring(comma+1);else if(!(maxPlaces>=0))maxPlaces=(patternParts[1]||[]).length;if(!(options.round<0))value=number.round(value,maxPlaces,options.round);var valueParts=
String(Math.abs(value)).split("."),fractional=valueParts[1]||"";if(patternParts[1]||options.places){if(comma)options.places=options.places.substring(0,comma);var pad=options.places!==undefined?options.places:patternParts[1]&&patternParts[1].lastIndexOf("0")+1;if(pad>fractional.length)valueParts[1]=dstring.pad(fractional,pad,"0",true);if(maxPlaces<fractional.length)valueParts[1]=fractional.substr(0,maxPlaces)}else if(valueParts[1])valueParts.pop();var patternDigits=patternParts[0].replace(",","");
pad=patternDigits.indexOf("0");if(pad!=-1){pad=patternDigits.length-pad;if(pad>valueParts[0].length)valueParts[0]=dstring.pad(valueParts[0],pad);if(patternDigits.indexOf("#")==-1)valueParts[0]=valueParts[0].substr(valueParts[0].length-pad)}var index=patternParts[0].lastIndexOf(","),groupSize,groupSize2;if(index!=-1){groupSize=patternParts[0].length-index-1;var remainder=patternParts[0].substr(0,index);index=remainder.lastIndexOf(",");if(index!=-1)groupSize2=remainder.length-index-1}var pieces=[];
for(var whole=valueParts[0];whole;){var off=whole.length-groupSize;pieces.push(off>0?whole.substr(off):whole);whole=off>0?whole.slice(0,off):"";if(groupSize2){groupSize=groupSize2;delete groupSize2}}valueParts[0]=pieces.reverse().join(options.group||",");return valueParts.join(options.decimal||".")};number.regexp=function(options){return number._parseInfo(options).regexp};number._parseInfo=function(options){options=options||{};var locale=i18n.normalizeLocale(options.locale),bundle=i18n.getLocalization("dojo.cldr",
"number",locale),pattern=options.pattern||bundle[(options.type||"decimal")+"Format"],group=bundle.group,decimal=bundle.decimal,factor=1;if(pattern.indexOf("%")!=-1)factor/=100;else if(pattern.indexOf("\u2030")!=-1)factor/=1E3;else{var isCurrency=pattern.indexOf("\u00a4")!=-1;if(isCurrency){group=bundle.currencyGroup||group;decimal=bundle.currencyDecimal||decimal}}var patternList=pattern.split(";");if(patternList.length==1)patternList.push("-"+patternList[0]);var re=dregexp.buildGroupRE(patternList,
function(pattern){pattern="(?:"+dregexp.escapeString(pattern,".")+")";return pattern.replace(number._numberPatternRE,function(format){var flags={signed:false,separator:options.strict?group:[group,""],fractional:options.fractional,decimal:decimal,exponent:false},parts=format.split("."),places=options.places;if(parts.length==1&&factor!=1)parts[1]="###";if(parts.length==1||places===0)flags.fractional=false;else{if(places===undefined)places=options.pattern?parts[1].lastIndexOf("0")+1:Infinity;if(places&&
options.fractional==undefined)flags.fractional=true;if(!options.places&&places<parts[1].length)places+=","+parts[1].length;flags.places=places}var groups=parts[0].split(",");if(groups.length>1){flags.groupSize=groups.pop().length;if(groups.length>1)flags.groupSize2=groups.pop().length}return"("+number._realNumberRegexp(flags)+")"})},true);if(isCurrency)re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(match,before,target,after){var prop=["symbol","currency","displayName"][target.length-
1],symbol=dregexp.escapeString(options[prop]||options.currency||"");before=before?"[\\s\\xa0]":"";after=after?"[\\s\\xa0]":"";if(!options.strict){if(before)before+="*";if(after)after+="*";return"(?:"+before+symbol+after+")?"}return before+symbol+after});return{regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:group,decimal:decimal,factor:factor}};number.parse=function(expression,options){var info=number._parseInfo(options),results=(new RegExp("^"+info.regexp+"$")).exec(expression);if(!results)return NaN;
var absoluteMatch=results[1];if(!results[1]){if(!results[2])return NaN;absoluteMatch=results[2];info.factor*=-1}absoluteMatch=absoluteMatch.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return absoluteMatch*info.factor};number._realNumberRegexp=function(flags){flags=flags||{};if(!("places"in flags))flags.places=Infinity;if(typeof flags.decimal!="string")flags.decimal=".";if(!("fractional"in flags)||/^0/.test(flags.places))flags.fractional=[true,false];if(!("exponent"in
flags))flags.exponent=[true,false];if(!("eSigned"in flags))flags.eSigned=[true,false];var integerRE=number._integerRegexp(flags),decimalRE=dregexp.buildGroupRE(flags.fractional,function(q){var re="";if(q&&flags.places!==0){re="\\"+flags.decimal;if(flags.places==Infinity)re="(?:"+re+"\\d+)?";else re+="\\d{"+flags.places+"}"}return re},true);var exponentRE=dregexp.buildGroupRE(flags.exponent,function(q){if(q)return"([eE]"+number._integerRegexp({signed:flags.eSigned})+")";return""});var realRE=integerRE+
decimalRE;if(decimalRE)realRE="(?:(?:"+realRE+")|(?:"+decimalRE+"))";return realRE+exponentRE};number._integerRegexp=function(flags){flags=flags||{};if(!("signed"in flags))flags.signed=[true,false];if(!("separator"in flags))flags.separator="";else if(!("groupSize"in flags))flags.groupSize=3;var signRE=dregexp.buildGroupRE(flags.signed,function(q){return q?"[-+]":""},true);var numberRE=dregexp.buildGroupRE(flags.separator,function(sep){if(!sep)return"(?:\\d+)";sep=dregexp.escapeString(sep);if(sep==
" ")sep="\\s";else if(sep=="\u00a0")sep="\\s\\xa0";var grp=flags.groupSize,grp2=flags.groupSize2;if(grp2){var grp2RE="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return grp-grp2>0?"(?:"+grp2RE+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":grp2RE}return"(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)"},true);return signRE+numberRE};return number})},"cbtree/data/BreadCrumb":function(){require({cache:{"url:cbtree/templates/TrailBarItem.html":'\x3cdiv class\x3d"dijitReset dijitInline dijitMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"/\x3e\n\t\x3cspan data-dojo-attach-point\x3d"containerNode"\x3e\x3c/span\x3e\n\x3c/div\x3e\n'}});
define("cbtree/data/BreadCrumb",["dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dijit/MenuBar","dijit/MenuItem","dijit/MenuBarItem","dijit/DropDownMenu","dijit/registry","dojo/text!../templates/TrailBarItem.html","../Evented"],function(array,declare,event,lang,MenuBar,MenuItem,MenuBarItem,DropDownMenu,registry,TrailBarItemTemplate,Evented){var DirectoryItem=declare([MenuItem],{iconClass:"dijitEditorIcon dijitEditorIconTabIndent",templateString:TrailBarItemTemplate,popup:null,
constructor:function(args){this.popup=new DropDownMenu({})}});var BreadCrumb=declare([MenuBarItem,Evented],{trail:null,item:null,moduleName:"cbTree/stores/BreadCrumb",constructor:function(args){this.trail=args.trail;this.item=args.item;if(this.trail&&this.item){var store=this.trail.store;var item=this.item;this.label=store.getLabel(item);this.path=store.getValue(item,"path");if(this.item.directory){this.tag=new DirectoryItem;store.fetchChildren({item:item,query:{directory:true},queryOptions:{storeOnly:true},
onComplete:this._dropDownMenu,scope:this})}}else throw new Error(this.moduleName+"::constructor(): Both trail and item are required arguments.");},_addToTrail:function(){this.trail.addChild(this);this.trail.addChild(this.tag)},_dropDownMenu:function(items){var popupMenu=this.tag.popup;var menuItem;array.forEach(items,function(item){menuItem=new MenuItem({label:item.name,iconClass:this.trail._dirIconClass,onClick:lang.hitch(this,this.onClick)});menuItem.item=item;popupMenu.addChild(menuItem)},this)},
postCreate:function(){this._addToTrail()},onClick:function(evt){var menuItem=registry.getEnclosingWidget(evt.target);this.trail.onClick(menuItem.item,menuItem,evt);event.stop(evt)}});var CrumbTrail=declare([MenuBar,Evented],{store:null,moduleName:"cbTree/stores/CrumbTrail",_dirIconClass:"dijitIcon dijitFolderClosed",constructor:function(args){this._customIcon=false;this._crumbs={};this.store=args.store||null;if(this.store){this._setTrailAttr(".");if(args.cssBaseClass)if(args.cssBaseClass!=="fileIcon")this._dirIconClass=
args.cssBaseClass+" "+args.cssBaseClass+"Collapsed";else this._dirIconClass="fileIcon fileIconDIR fileIconDIRCollapsed"}else throw new Error(this.moduleName+"::constructor(): store argument is required.");},_addBreadCrumb:function(item){if(item){var identity=this.store.getIdentity(item);var breadCrumb=this._crumbs[identity];if(!breadCrumb){breadCrumb=new BreadCrumb({trail:this,item:item});this._crumbs[identity]=breadCrumb}else breadCrumb._addToTrail()}},_clearTrail:function(){var children=this.getChildren();
var i;for(i=0;i<children.length;i++)this.removeChild(children[i])},_setTrailAttr:function(path){var store=this.store;var self=this;if(path&&lang.isString(path)){var segm=path.split("/");var identity="",i;this._clearTrail();for(i=0;i<segm.length;i++){identity=identity+segm[i];store.fetchItemByIdentity({identity:identity,queryOptions:{storeOnly:true},onItem:self._addBreadCrumb,scope:this});identity=identity+"/"}}else throw new Error(this.moduleName+"::_setTrailAttr(): invalid path argument.");return true},
setTrail:function(path){return this._setTrailAttr(path)},onClick:function(){}});return CrumbTrail})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dijit/layout/_ContentPaneResizeMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/query","dojo/sniff","../registry","../Viewport","./utils"],function(array,declare,domClass,domGeometry,domStyle,lang,query,has,registry,Viewport,layoutUtils){return declare("dijit.layout._ContentPaneResizeMixin",
null,{doLayout:true,isLayoutContainer:true,startup:function(){if(this._started)return;var parent=this.getParent();this._childOfLayoutWidget=parent&&parent.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);if(this._isShown())this._onShow();if(!this._childOfLayoutWidget)this.own(Viewport.on("resize",lang.hitch(this,"resize")))},_checkIfSingleChild:function(){var candidateWidgets=[],otherVisibleNodes=false;query("\x3e *",this.containerNode).some(function(node){var widget=
registry.byNode(node);if(widget&&widget.resize)candidateWidgets.push(widget);else if(!/script|link|style/i.test(node.nodeName)&&node.offsetHeight)otherVisibleNodes=true});this._singleChild=candidateWidgets.length==1&&!otherVisibleNodes?candidateWidgets[0]:null;domClass.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(changeSize,resultSize){this._resizeCalled=true;this._scheduleLayout(changeSize,resultSize)},_scheduleLayout:function(changeSize,resultSize){if(this._isShown())this._layout(changeSize,
resultSize);else{this._needLayout=true;this._changeSize=changeSize;this._resultSize=resultSize}},_layout:function(changeSize,resultSize){delete this._needLayout;if(!this._wasShown&&this.open!==false)this._onShow();if(changeSize)domGeometry.setMarginBox(this.domNode,changeSize);var cn=this.containerNode;if(cn===this.domNode){var mb=resultSize||{};lang.mixin(mb,changeSize||{});if(!("h"in mb)||!("w"in mb))mb=lang.mixin(domGeometry.getMarginBox(cn),mb);this._contentBox=layoutUtils.marginBox2contentBox(cn,
mb)}else this._contentBox=domGeometry.getContentBox(cn);this._layoutChildren()},_layoutChildren:function(){if(this.doLayout)this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||domGeometry.getContentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h})}else{var children=this.getChildren(),widget,i=0;while(widget=children[i++])if(widget.resize)widget.resize()}},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open"in
this)return this.open;return this._resizeCalled}else if("open"in this)return this.open;else{var node=this.domNode,parent=this.domNode.parentNode;return node.style.display!="none"&&node.style.visibility!="hidden"&&!domClass.contains(node,"dijitHidden")&&parent&&parent.style&&parent.style.display!="none"}},_onShow:function(){this._wasShown=true;if(this._needLayout)this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"xide/views/SettingsTreeView":function(){define(["dojo/_base/declare",
"dojo/on","xide/layout/ContentPane","xide/utils"],function(declare,on,ContentPane,utils){return declare("xide.views.SettingsTreeView",[ContentPane],{onSettingsViewClosed:function(view){if(view){var parent=dijit.byId("topTabs");view.empty();parent.removeChild(view);utils.destroyWidget(view);currentSettingsView=null}},openSettingsView:function(item){var parent=dijit.byId("topTabs");var _settingsViewId="metaSettinsView"+item.id;this.currentSettingsView=dijit.byId(_settingsViewId);if(this.currentSettingsView){this.currentSettingsView.empty();
parent.removeChild(this.currentSettingsView);utils.destroyWidgetById(_settingsViewId)}this.currentSettingsView=new xas.views.GroupedMetaSettingsView({id:_settingsViewId,title:"Meta Settings",region:"center",closable:true,delegate:this,className:"groupedResourceSettingsView"},dojo.doc.createElement("div"));parent.addChild(this.currentSettingsView);parent.selectChild(this.currentSettingsView);this.currentSettingsView.initWithMetaDataStore(this.metaStore)},onTreeClicked:function(item,node){if(utils.toString(item.type)==
"MetaSettings"){this.currentResourceItem=item;this.openSettingsView(item)}},_defaultTree:function(){var res={"id":"1","identifier":"id","label":"name","items":[{children:[{"_reference":"41f2455e-59e9-430a-949a-e2181bd183d8"}],"id":"ROOT","label":null,"name":"Settings","path":null,"section":null,"type":"top","uid":0,"uidStr":null},{children:[],"id":"41f2455e-59e9-430a-949a-e2181bd183d8","label":null,"name":"Common","type":"MetaSettings","noChildren":true},{children:[],"id":"f0e9f360-5dce-468f-a982-c7c059d0ae14",
"label":null,"name":"Application","type":"Resources"}]};return res},initWidgets:function(data){var _storeTreeData=this._defaultTree();this.store=new dojo.data.ItemFileWriteStore({data:_storeTreeData,labelAttribute:"name"});this.model=new dijit.tree.ForestStoreModel({store:this.store,rootId:"ROOT",rootLabel:"Resources",query:{type:"top"},childrenAttrs:["children"]});this.tree=new dijit.Tree({showRoot:false,model:this.model,persist:false,className:"container"});var dstHandlerCtx=this;dojo.connect(this.tree,
"onClick",function(item,nodeWidget){dstHandlerCtx.onTreeClicked(item,nodeWidget)});this.domNode.appendChild(this.tree.domNode);this.tree.startup();this.tree.resize();var world=this.tree.rootNode;setTimeout(function(){world.getChildren();var firstPage=world.getChildren()[0];if(firstPage)on.emit(firstPage.expandoNode,"click",{bubbles:true})},300);if(this.model)this.model["mayHaveChildren"]=function(item){var result=true;if(item&&item["noChildren"]!=null)return false;return result}},resourceTreeDataReady:function(ref,
res){ref.resourceTreeData=utils.removeEmptyStrings(res);if(ref.tree)utils.destroyWidget(ref.tree);ref.initWidgets(ref.resourceTreeData)},init:function(platform){var thiz=this;var cb=function(res){thiz.resourceTreeDataReady(thiz,res)}},startup:function(){if(this.didLoad)return;this.inherited(arguments);this.didLoad=true}})})},"xblox/model/logging/Log":function(){define("xblox/model/logging/Log",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/Deferred","xblox/model/Block","xide/utils",
"xide/types","xide/mixins/EventedMixin"],function(declare,lang,array,Deferred,Block,utils,types,EventedMixin){return declare("xblox.model.logging.Log",[Block,EventedMixin],{name:"Log Message",level:"info",message:"",type:"XBlox",host:"this host",toText:function(){var result=this.getBlockIcon()+" "+this.name+" :: ";if(this.message)result+=this.message;return result},_solveExpression:function(expression,scope,settings,run,error){var _script=""+expression;var thiz=this;if(_script&&_script.length){var _function=
new Function("{"+_script+"}");var _args=this.getArgs();try{var _parsed=_function.apply(this,_args||{});if(run)run("Expression "+_script+" evaluates to "+_parsed);return _parsed}catch(e){if(error)error("invalid expression : \n"+_script+": "+e);return _script}}else console.error("have no script");return _script},solve:function(scope,settings,run,error){var _message=this._solveExpression(this.message,scope,settings,run,error);var message={message:_message,level:this.level,type:this.type,details:this.getArgs()};
this.onSuccess(this,settings);try{this.publish(types.EVENTS.ON_SERVER_LOG_MESSAGE,message)}catch(e){this.onFailed(this,settings)}return[]},canAdd:function(){return null},getFields:function(){var fields=this.inherited(arguments)||this.getDefaultFields();var thiz=this;var options=[{value:"info",label:"Info"},{value:"warning",label:"Warning"},{value:"error",label:"Error"}];fields.push(this.utils.createCI("Event",3,this.event,{group:"General",options:options,dst:"level"}));fields.push(this.utils.createCI("message",
25,this.message,{group:"General",title:"Message",dst:"message",delegate:{runExpression:function(val,run,error){var _res=thiz._solveExpression(val,thiz.scope,null,run,error)}}}));fields.push(this.utils.createCI("message",13,this.type,{group:"General",title:"Type",dst:"type"}));return fields},getBlockIcon:function(){return'\x3cspan class\x3d"fa-bug"\x3e\x3c/span\x3e'}})})},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/has","../registry"],
function(declare,dom,has,registry){var ButtonMixin=declare("dijit.form._ButtonMixin"+(0?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(e){e.stopPropagation();e.preventDefault();if(!this.disabled)this.valueNode.click(e);return false},_onClick:function(e){if(this.disabled){e.stopPropagation();e.preventDefault();return false}if(this.onClick(e)===false)e.preventDefault();cancelled=e.defaultPrevented;if(!cancelled&&this.type=="submit"&&!(this.valueNode||this.focusNode).form)for(var node=
this.domNode;node.parentNode;node=node.parentNode){var widget=registry.byNode(node);if(widget&&typeof widget._onSubmit=="function"){widget._onSubmit(e);e.preventDefault();cancelled=true;break}}return!cancelled},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false)},onClick:function(){return true},_setLabelAttr:function(content){this._set("label",content);var labelNode=this.containerNode||this.focusNode;labelNode.innerHTML=content}});if(0)ButtonMixin=declare("dijit.form._ButtonMixin",
ButtonMixin,{_setLabelAttr:function(){this.inherited(arguments);var labelNode=this.containerNode||this.focusNode;this.applyTextDir(labelNode)}});return ButtonMixin})},"xide/client/WebSocket":function(){define(["dojo/_base/declare","dojo/_base/lang","xide/types","xide/factory","xide/utils/_LogMixin","xide/client/ClientBase"],function(declare,lang,types,factory,_logMixin,ClientBase){return declare("xide.client.WebSocket",[ClientBase,_logMixin],{_socket:null,debugConnect:true,autoReconnect:true,reconnect:function(){0&&
console.log("reconnect!")},close:function(){this.destroy()},connect:function(_options){this.options=lang.mixin(this.options,_options);var host=this.options.host;var port=this.options.port;if(this.options.debug)this.initLogger(this.options.debug);if(!host)debugger;0&&console.log("Connecting to "+host+":"+port,"socket_client");var protocol=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];var options=
{debug:true,devel:true};options.protocols_whitelist=protocol;var sock=new SockJS(host+":"+port,null,options);var thiz=this;sock.onopen=function(){0&&console.log("open")};sock.onmessage=function(e){if(thiz.delegate.onServerResponse)thiz.delegate.onServerResponse(e)};sock.onclose=function(){0&&console.log("close");if(thiz.autoReconnect)thiz.reconnect()};this._socket=sock},emit:function(signal,dataIn,tag){try{dataIn.tag=tag||"notag";0&&console.log("send ",dataIn);var data=JSON.stringify(dataIn);this._socket.send(data)}catch(e){console.error("web socket client crash ! "+
e)}},onSignal:function(signal,callback){this._socket.on("data",callback)}})})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(lang,Promise,Evented){var evented=new Evented;var emit=evented.emit;evented.emit=null;function emitAsync(args){setTimeout(function(){emit.apply(evented,args)},0)}Promise.prototype.trace=function(){var args=lang._toArray(arguments);this.then(function(value){emitAsync(["resolved",value].concat(args))},function(error){emitAsync(["rejected",
error].concat(args))},function(update){emitAsync(["progress",update].concat(args))});return this};Promise.prototype.traceRejected=function(){var args=lang._toArray(arguments);this.otherwise(function(error){emitAsync(["rejected",error].concat(args))});return this};return evented})},"xfile/widgets/FileProperties":function(){define("xfile/widgets/FileProperties",["dojo/_base/declare","dojo/dom-construct","xide/widgets/TemplatedWidgetBase","xide/utils"],function(declare,domConstruct,TemplatedWidgetBase,
utils){return declare("xfile.widgets.FileProperties",[TemplatedWidgetBase],{item:null,fileName:"",fileSize:"",fileModified:"",fileType:"",fileOwner:"",fileGroup:"",filePermissions:"",tBody:null,templateString:'\x3ctable class\x3d"filePropertyTable" border\x3d"0" cellpadding\x3d"5px" width\x3d"100%" height\x3d"90px" \x3e'+"\x3ctbody data-dojo-attach-point\x3d'tBody' align\x3d'left'\x3e"+"\x3ctr class\x3d'filePropertyRow' valign\x3d'top'\x3e"+"\x3ctd class\x3d'filePropertyLabelColumn' valign\x3d'middle' width\x3d'30%'\x3e"+
"\x3cspan\x3eName\x3c/span\x3e"+"\x3c/td\x3e"+"\x3ctd class\x3d'filePropertyValueColumn' valign\x3d'middle' width\x3d'70%'\x3e"+"\x3cspan\x3e${!fileName}\x3c/span\x3e"+"\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr class\x3d'filePropertyRow' valign\x3d'top'\x3e"+"\x3ctd class\x3d'filePropertyLabelColumn' valign\x3d'middle' width\x3d'30%'\x3e"+"\x3cspan\x3eSize\x3c/span\x3e"+"\x3c/td\x3e"+"\x3ctd class\x3d'filePropertyValueColumn' valign\x3d'middle' width\x3d'70%'\x3e"+"\x3cspan\x3e${!fileSize}\x3c/span\x3e"+
"\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr class\x3d'filePropertyRow' valign\x3d'top'\x3e"+"\x3ctd class\x3d'filePropertyLabelColumn' valign\x3d'middle' width\x3d'30%'\x3e"+"\x3cspan\x3eLast Modif.\x3c/span\x3e"+"\x3c/td\x3e"+"\x3ctd class\x3d'filePropertyValueColumn' valign\x3d'middle' width\x3d'70%'\x3e"+"\x3cspan\x3e${!fileModified}\x3c/span\x3e"+"\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr class\x3d'filePropertyRow' valign\x3d'top'\x3e"+"\x3ctd class\x3d'filePropertyLabelColumn' valign\x3d'middle' width\x3d'30%'\x3e"+
"\x3cspan\x3eType\x3c/span\x3e"+"\x3c/td\x3e"+"\x3ctd class\x3d'filePropertyValueColumn' valign\x3d'middle' width\x3d'70%'\x3e"+"\x3cspan\x3e${!fileType}\x3c/span\x3e"+"\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr class\x3d'filePropertyRow' valign\x3d'top'\x3e"+"\x3ctd class\x3d'filePropertyLabelColumn' valign\x3d'middle' width\x3d'30%'\x3e"+"\x3cspan\x3eOwner\x3c/span\x3e"+"\x3c/td\x3e"+"\x3ctd class\x3d'filePropertyValueColumn' valign\x3d'middle' width\x3d'70%'\x3e"+"\x3cspan\x3e${!fileOwner}\x3c/span\x3e"+
"\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr class\x3d'filePropertyRow' valign\x3d'top'\x3e"+"\x3ctd class\x3d'filePropertyLabelColumn' valign\x3d'middle' width\x3d'30%'\x3e"+"\x3cspan\x3eGroup\x3c/span\x3e"+"\x3c/td\x3e"+"\x3ctd class\x3d'filePropertyValueColumn' valign\x3d'middle' width\x3d'70%'\x3e"+"\x3cspan\x3e${!fileGroup}\x3c/span\x3e"+"\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr class\x3d'filePropertyRow' valign\x3d'top'\x3e"+"\x3ctd class\x3d'filePropertyLabelColumn' valign\x3d'middle' width\x3d'30%'\x3e"+
"\x3cspan\x3ePermissions\x3c/span\x3e"+"\x3c/td\x3e"+"\x3ctd class\x3d'filePropertyValueColumn' valign\x3d'middle' width\x3d'70%'\x3e"+"\x3cspan\x3e${!filePermissions}\x3c/span\x3e"+"\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e",addField:function(label,value){var _tpl="\x3ctd class\x3d'filePropertyLabelColumn' valign\x3d'middle' width\x3d'30%'\x3e"+"\x3cspan\x3e${label}\x3c/span\x3e"+"\x3c/td\x3e"+"\x3ctd class\x3d'filePropertyValueColumn' valign\x3d'middle' width\x3d'70%'\x3e"+"\x3cspan\x3e${value}\x3c/span\x3e"+
"\x3c/td\x3e";_tpl=utils.substituteString(_tpl,{label:label,value:value});var tr=domConstruct.create("TR",{innerHTML:_tpl,className:"filePropertyRow",valign:"top"},this.tBody)},formatDateSimple:function(data,format){var momentUnix=moment.unix(data);var dateStr=momentUnix.format("YYYY MMMM Do, h:mm:ss a");return dateStr},postMixInProperties:function(){this.inherited(arguments);var item=this.item;if(item){this.fileName=item.name;this.fileSize=item.size||"0";this.filePermissions=item.permissions;if(item.owner&&
item.owner.user)this.fileOwner=item.owner.user.name;if(item.owner&&item.owner.group)this.fileGroup=item.owner.group.name;this.fileModified=this.formatDateSimple(item.modified);var fileTypeName="";if(item.directory!=null&&item.directory===true)fileTypeName="Directory";else fileTypeName=item.mime;this.fileType=fileTypeName}},_initEvents:function(){},_createButton:function(){},onButtonClicked:function(button){if(this.delegate&&this.delegate.onActionButton)this.delegate.onActionButton(button,button.item,
button.operation,button.owner)},startup:function(){this.inherited(arguments);if(this.item&&this.item.dimension!=null&&this.item.dimension!==false)this.addField("Dimension",this.item.dimension);var thiz=this}})})},"xfile/views/FileTreeViewSelectionMixin":function(){define("xfile/views/FileTreeViewSelectionMixin",["dojo/_base/declare"],function(declare){return declare("xfile.views.FileTreeViewSelectionMixin",null,{selected:null,unSelected:null,getSelected:function(){return this.selected},getUnselected:function(){return this.unSelected},
hasItem:function(path,where){for(var i=0;i<where.length;i++)if(where[i]==path)return true;return false},_clean:function(path,where){var hasItem=this.hasItem(path,where);if(hasItem)where.remove(path)},checkBoxClicked:function(item,nodeWidget,evt){var newState=nodeWidget.get("checked");this._clean(item.path,this.selected);this._clean(item.path,this.unSelected);var where=newState?this.selected:this.unSelected;if(item.path==null)item.path=this.url;if(item.path==this.url){if(newState)this.unSelected=[];
else this.selected=[];return}var path=""+item.path;path=path.replace("./","/");path=path.replace(/^\/|\/$/g,"");var basePath=""+this.url;basePath=basePath.replace("./","/");basePath=basePath.replace(/^\/|\/$/g,"");path=path.replace(basePath,"");path=path.replace(/^\/|\/$/g,"");var hasItem=this.hasItem(item.path,where);if(!hasItem)where.push(path);else where.remove(path)},onTreeCreated:function(tree){var thiz=this;var _cb=function(item,nodeWidget,evt){thiz.checkBoxClicked(item,nodeWidget,evt)};tree.on("checkBoxClick",
_cb);this.selected=[];this.unSelected=[]}})})},"dijit/tree/TreeStoreModel":function(){define("dijit/tree/TreeStoreModel",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(array,aspect,declare,lang){return declare("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(args){lang.mixin(this,args);this.connects=[];var store=this.store;if(!store.getFeatures()["dojo.data.api.Identity"])throw new Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
if(store.getFeatures()["dojo.data.api.Notification"])this.connects=this.connects.concat([aspect.after(store,"onNew",lang.hitch(this,"onNewItem"),true),aspect.after(store,"onDelete",lang.hitch(this,"onDeleteItem"),true),aspect.after(store,"onSet",lang.hitch(this,"onSetItem"),true)])},destroy:function(){var h;while(h=this.connects.pop())h.remove()},getRoot:function(onItem,onError){if(this.root)onItem(this.root);else this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(items){if(items.length!=
1)throw new Error("dijit.tree.TreeStoreModel: root query returned "+items.length+" items, but must return exactly one");this.root=items[0];onItem(this.root)}),onError:onError})},mayHaveChildren:function(item){return array.some(this.childrenAttrs,function(attr){return this.store.hasAttribute(item,attr)},this)},getChildren:function(parentItem,onComplete,onError){var store=this.store;if(!store.isItemLoaded(parentItem)){var getChildren=lang.hitch(this,arguments.callee);store.loadItem({item:parentItem,
onItem:function(parentItem){getChildren(parentItem,onComplete,onError)},onError:onError});return}var childItems=[];for(var i=0;i<this.childrenAttrs.length;i++){var vals=store.getValues(parentItem,this.childrenAttrs[i]);childItems=childItems.concat(vals)}var _waitCount=0;if(!this.deferItemLoadingUntilExpand)array.forEach(childItems,function(item){if(!store.isItemLoaded(item))_waitCount++});if(_waitCount==0)onComplete(childItems);else array.forEach(childItems,function(item,idx){if(!store.isItemLoaded(item))store.loadItem({item:item,
onItem:function(item){childItems[idx]=item;if(--_waitCount==0)onComplete(childItems)},onError:onError})})},isItem:function(something){return this.store.isItem(something)},fetchItemByIdentity:function(keywordArgs){this.store.fetchItemByIdentity(keywordArgs)},getIdentity:function(item){return this.store.getIdentity(item)},getLabel:function(item){if(this.labelAttr)return this.store.getValue(item,this.labelAttr);else return this.store.getLabel(item)},newItem:function(args,parent,insertIndex){var pInfo=
{parent:parent,attribute:this.childrenAttrs[0]},LnewItem;if(this.newItemIdAttr&&args[this.newItemIdAttr])this.fetchItemByIdentity({identity:args[this.newItemIdAttr],scope:this,onItem:function(item){if(item)this.pasteItem(item,null,parent,true,insertIndex);else{LnewItem=this.store.newItem(args,pInfo);if(LnewItem&&insertIndex!=undefined)this.pasteItem(LnewItem,parent,parent,false,insertIndex)}}});else{LnewItem=this.store.newItem(args,pInfo);if(LnewItem&&insertIndex!=undefined)this.pasteItem(LnewItem,
parent,parent,false,insertIndex)}},pasteItem:function(childItem,oldParentItem,newParentItem,bCopy,insertIndex){var store=this.store,parentAttr=this.childrenAttrs[0];if(oldParentItem)array.forEach(this.childrenAttrs,function(attr){if(store.containsValue(oldParentItem,attr,childItem)){if(!bCopy){var values=array.filter(store.getValues(oldParentItem,attr),function(x){return x!=childItem});store.setValues(oldParentItem,attr,values)}parentAttr=attr}});if(newParentItem)if(typeof insertIndex=="number"){var childItems=
store.getValues(newParentItem,parentAttr).slice();childItems.splice(insertIndex,0,childItem);store.setValues(newParentItem,parentAttr,childItems)}else store.setValues(newParentItem,parentAttr,store.getValues(newParentItem,parentAttr).concat(childItem))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(item,parentInfo){if(!parentInfo)return;this.getChildren(parentInfo.item,lang.hitch(this,function(children){this.onChildrenChange(parentInfo.item,children)}))},
onDeleteItem:function(item){this.onDelete(item)},onSetItem:function(item,attribute){if(array.indexOf(this.childrenAttrs,attribute)!=-1)this.getChildren(item,lang.hitch(this,function(children){this.onChildrenChange(item,children)}));else this.onChange(item)}})})},"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\n\t\t\x3cdiv class\x3d"dijitTooltipContents dijitTooltipFocusNode" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"url:cbtree/templates/cbtreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"indentNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitTreeExpando" role\x3d"presentation" /\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"checkBoxNode" class\x3d"cbtreeCheckBox" role\x3d"presentation"\x3e\x3c/span\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" data-dojo-attach-point\x3d"iconNode" class\x3d"dijitIcon dijitTreeIcon" role\x3d"presentation"/\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"dojox/xml/parser":function(){define("dojox/xml/parser",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(dojo){dojo.getObject("xml.parser",true,dojox);dojox.xml.parser.parse=function(str,mimetype){var _document=dojo.doc;var doc;mimetype=mimetype||"text/xml";if(str&&dojo.trim(str)&&"DOMParser"in dojo.global){var parser=new DOMParser;doc=parser.parseFromString(str,mimetype);var de=doc.documentElement;var errorNS="http://www.mozilla.org/newlayout/xml/parsererror.xml";
if(de.nodeName=="parsererror"&&de.namespaceURI==errorNS){var sourceText=de.getElementsByTagNameNS(errorNS,"sourcetext")[0];if(sourceText)sourceText=sourceText.firstChild.data;throw new Error("Error parsing text "+de.firstChild.data+" \n"+sourceText);}return doc}else if("ActiveXObject"in dojo.global){var ms=function(n){return"MSXML"+n+".DOMDocument"};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p)}catch(e){return false}return true});if(str&&
doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0)throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}if(doc)return doc}else if(_document.implementation&&_document.implementation.createDocument)if(str&&dojo.trim(str)&&_document.createElement){var tmp=_document.createElement("xml");tmp.innerHTML=str;var xmlDoc=_document.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,
function(child){xmlDoc.importNode(child,true)});return xmlDoc}else return _document.implementation.createDocument("","",null);return null};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _document=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_document.createTextNode(text));return text}else{if(node.textContent!==undefined)return node.textContent;var _result="";if(node)dojo.forEach(node.childNodes,function(child){switch(child.nodeType){case 1:case 5:_result+=
dojox.xml.parser.textContent(child);break;case 3:case 2:case 4:_result+=child.nodeValue}});return _result}};dojox.xml.parser.replaceChildren=function(node,newChildren){var nodes=[];if(dojo.isIE)dojo.forEach(node.childNodes,function(child){nodes.push(child)});dojox.xml.parser.removeChildren(node);dojo.forEach(nodes,dojo.destroy);if(!dojo.isArray(newChildren))node.appendChild(newChildren);else dojo.forEach(newChildren,function(child){node.appendChild(child)})};dojox.xml.parser.removeChildren=function(node){var count=
node.childNodes.length;while(node.hasChildNodes())node.removeChild(node.firstChild);return count};dojox.xml.parser.innerXML=function(node){if(node.innerXML)return node.innerXML;else if(node.xml)return node.xml;else if(typeof XMLSerializer!="undefined")return(new XMLSerializer).serializeToString(node);return null};return dojox.xml.parser})},"dojox/fx/_core":function(){define("dojox/fx/_core",["dojo/_base/lang","dojo/_base/array","./_base"],function(lang,arrayUtil,dojoxFx){var line=function(start,end){this.start=
start;this.end=end;var isArray=lang.isArray(start),d=isArray?[]:end-start;if(isArray){arrayUtil.forEach(this.start,function(s,i){d[i]=this.end[i]-s},this);this.getValue=function(n){var res=[];arrayUtil.forEach(this.start,function(s,i){res[i]=d[i]*n+s},this);return res}}else this.getValue=function(n){return d*n+this.start}};dojoxFx._Line=line;return line})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(declare,Moveable){var oldOnMove=Moveable.prototype.onMove;
return declare("dojo.dnd.TimedMoveable",Moveable,{timeout:40,constructor:function(node,params){if(!params)params={};if(params.timeout&&typeof params.timeout=="number"&&params.timeout>=0)this.timeout=params.timeout},onMoveStop:function(mover){if(mover._timer){clearTimeout(mover._timer);oldOnMove.call(this,mover,mover._leftTop)}Moveable.prototype.onMoveStop.apply(this,arguments)},onMove:function(mover,leftTop){mover._leftTop=leftTop;if(!mover._timer){var _t=this;mover._timer=setTimeout(function(){mover._timer=
null;oldOnMove.call(_t,mover,mover._leftTop)},this.timeout)}}})})},"xfile/manager/PanelManagerActions":function(){define("xfile/manager/PanelManagerActions",["dojo/_base/declare","dojo/_base/lang","./PanelManagerBase","xfile/factory","xfile/views/FilePanel","xfile/views/FileTreeView","xide/types","xfile/views/FilePropertyView","xfile/views/FileRenameDialog","xide/widgets/TemplatedWidgetBase","dojox/encoding/digests/SHA1","xide/utils","xide/factory"],function(declare,lang,PanelManagerBase,factory,
FilePanel,FileTreeView,types,FilePropertyView,FileRenameDialog,TemplatedWidgetBase,SHA1,utils){return declare("xfile.manager.PanelManagerActions",null,{onSearchResult:function(sourceView,item,store,panel,data,searchConf){var prevReload=this.config.ALLOWED_ACTIONS.RELOAD;var prevLayout=this.config.PANEL_OPTIONS.ALLOW_LAYOUT_SELECTOR;var prevSource=this.config.PANEL_OPTIONS.ALLOW_SOURCE_SELECTOR;this.config.ALLOWED_ACTIONS.RELOAD=false;this.config.PANEL_OPTIONS.ALLOW_LAYOUT_SELECTOR=false;this.config.PANEL_OPTIONS.ALLOW_SOURCE_SELECTOR=
false;var searchPanel=this.openItemAlternate(item,panel);searchPanel.setStaticData(data);try{setTimeout(function(){if(searchPanel.restoreFocus)searchPanel.restoreFocus()},1E3)}catch(e){console.error("focus crash")}},onFind:function(sourceView,item,store,panel){var path=".";if(item)path=item.path;var thiz=this;var _delegate={delegate:sourceView,onOk:function(dlg){var searchConf=dlg.getValue();var struct={store:store,dst:dlg.getValue(),operation:types.OPERATION.FIND};var cb=_readyCB=function(data){thiz.onSearchResult(sourceView,
item,store,panel,data,searchConf)};thiz.ctx.getFileManager().find(item.mount,dojo.toJson(searchConf),cb)}};var dlg=factory.createFileFindDialog("Find",path,sourceView,_delegate,this.ctx,this.config);dlg.show();dlg.initWithFilePath(path);dlg.resize();setTimeout(function(){dlg.resize()},1E3)},onPreview:function(item){if(this.config.MEDIA_PICKER)if(this.config.MEDIA_PICKER.editorNode&&this.config.MEDIA_PICKER.editorNodeAfter){var editor=dojo.byId(this.config.MEDIA_PICKER.editorNode);if(editor);}},openProperties:function(item,
container,clear){if(!item||!container)return;if(this.propertyView&&this.propertyView.domNode==null)clear=true;var _test=utils.hasChild("File Properties",container);if(_test)container.removeChild(_test);if(clear)this.propertyView=null;if(!this.propertyView)this.propertyView=this._createPropertyView(item,container);if(!item||!item._S)return;this.propertyView.initWithItem(item)},newItem:function(view,items,dst,store,silent,operation){var thiz=this;var dstPath="/";if(dst&&dst.path&&dst.path!=".")dstPath=
dst.path;var _delegate={delegate:view,onOk:function(dlg){var path2=dstPath+dlg.getValue();path2+="";var struct={store:store,dst:dstPath,operation:operation};thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,thiz);var cb=_readyCB=function(){setTimeout(function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,thiz)},1E3)};var path=utils.normalizePath(dstPath+"/"+dlg.getValue());if(operation==types.OPERATION.NEW_DIRECTORY)setTimeout(function(){thiz.ctx.getFileManager().mkdir(dst.mount,path,cb)},10);
if(operation==types.OPERATION.NEW_FILE)setTimeout(function(){thiz.ctx.getFileManager().mkfile(dst.mount,path,cb)},10)}};var dlg=factory.createNewItemDialog("Create",dst,view,_delegate,this.ctx,this.config,operation);dlg.show();dlg.initWithFileOoperation(items,dst,operation);dlg.resize();setTimeout(function(){dlg.resize()},1E3)},onActionButton:function(button,item,operation,owner){if(!button||!operation)return;switch(operation){case types.OPERATION.DELETE:var dst=owner.delegate.getCopyDestination();
var items=null;if(owner.getCurrentSelection&&owner.getCurrentSelection())items=owner.getCurrentSelection(true);if(items)this.deleteItems(owner,items,dst,owner.store);else this.deleteItems(owner,[item],dst,owner.store);break;case types.OPERATION.EDIT:if(owner&&owner.delegate&&owner.delegate.openItem)owner.delegate.openItem(item,button.params);break;case types.OPERATION.PREVIEW:if(this.onPreview)this.onPreview();break;case types.OPERATION.RENAME:if(owner&&owner.contextMenuHandler&&owner.contextMenuHandler.onRename)owner.contextMenuHandler.onRename(item);
break;case types.OPERATION.COPY:var dst=owner.delegate.getCopyDestination();var items=null;if(owner.getCurrentSelection&&owner.getCurrentSelection())items=owner.getCurrentSelection(true);if(items)this.copyItems(owner,items,dst,owner.store);else this.copyItems(owner,[item],dst,owner.store);break;case types.OPERATION.MOVE:var dst=owner.delegate.getCopyDestination();var items=null;if(owner.getCurrentSelection&&owner.getCurrentSelection())items=owner.getCurrentSelection(true);if(items)this.moveItems(owner,
items,dst,owner.store);else this.moveItems(owner,[item],dst,owner.store);break;case types.OPERATION.DOWNLOAD:this.downloadItem(item);break;case types.OPERATION.COMPRESS:var dst=owner.delegate.getCurrentParent();var items=item;if(owner.getCurrentSelection&&owner.getCurrentSelection(true))items=owner.getCurrentSelection(true);this.compressItem(items);break;case types.OPERATION.INFO:this.openProperties(item);break;case types.OPERATION.NEW_FILE:case types.OPERATION.NEW_DIRECTORY:if(!owner)return;var dst=
owner.delegate.getCurrentParent();this.newItem(owner,item,dst,owner.store,false,operation);break;case types.OPERATION.PERMA_LINK:this.onPermaLink();return}},onPermaLink:function(){var link=this.getRootView().getPermaLink();var result=""+window.location.href;if(result.indexOf("mainView")==-1)result+=result.indexOf("?")==-1?"?":"\x26";if(link!=null){var params=utils.urlDecode(result);if(params&&params.mainView){params.mainView=encodeURIComponent(params.mainView);if(result.indexOf(params.mainView)==
-1)console.error("maeh, not found");else result=result.replace(""+params.mainView,link)}else result+=link}result=result.replace("mainView\x3dmainView\x3d","mainView\x3d");alert(result);console.error("get perma link : "+result)},downloadItem:function(src,store){var selection=[];selection.push(src.path);var thiz=this;var downloadUrl=this.config.FILE_SERVICE;if(downloadUrl.indexOf("?")!=-1)downloadUrl+="\x26";else downloadUrl+="?";var serviceClass=this.ctx.getFileManager().serviceClass||"XCOM_Directory_Service";
var path=utils.buildPath(src.mount,src.path);downloadUrl+="service\x3d"+serviceClass+".get\x26path\x3d"+path+"\x26callback\x3dasdf";if(this.config.DOWNLOAD_URL!=null){downloadUrl=""+this.config.DOWNLOAD_URL;downloadUrl+="\x26path\x3d"+path+"\x26callback\x3dasdf"}downloadUrl+="\x26raw\x3dhtml";downloadUrl+="\x26attachment\x3d1";var aParams={"service":serviceClass+".get","path":path,"callback":"asdf","raw":"html","attachment":"1"};var pStr=dojo.toJson(aParams);var signature=SHA1._hmac(pStr,this.config.RPC_PARAMS.rpcSignatureToken,
1);downloadUrl+="\x26"+this.config.RPC_PARAMS.rpcUserField+"\x3d"+this.config.RPC_PARAMS.rpcUserValue;downloadUrl+="\x26"+this.config.RPC_PARAMS.rpcSignatureField+"\x3d"+signature;0&&console.log("download  : "+downloadUrl);window.open(downloadUrl)},compressItem:function(src,store){var selection=[];if(lang.isArray(src)){var l=src.length;for(var i=0;i<l;i++)selection.push(src[i].path)}else selection.push(src.path);var thiz=this;var dstPath="";var firstItem=src;if(lang.isArray(src)&&src.length>0)firstItem=
src[0];store=store||this.getItemStore(firstItem);var parent=store.getParents(firstItem,true)[0];if(!parent);var struct={store:store,dst:{path:parent?parent.path:"./"},operation:types.OPERATION.COMPRESS};this.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,thiz);var cb=_readyCB=function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,thiz)};setTimeout(function(){thiz.ctx.getFileManager().compressItem(firstItem.mount,selection,"zip",cb)},10)},copyItemsEx:function(view,items,dst,store){var thiz=this;
if(!lang.isArray(items))items=[items];if(!dst.directory)dst=dst._S.getParents(dst,true)[0];var dstPath=utils.normalizePath(dst.mount+"/"+dst.path);var selection=[];var hints=[];var nbItems=0;for(var i=0;i<items.length;i++){var itemPath=utils.normalizePath(items[i].mount+"/"+items[i].path);selection.push(itemPath);nbItems++;hints.push({path:dstPath,directory:items[i].directory})}var firstItem=items[0];if(!store&&firstItem)store=firstItem._S;var struct={store:store,dst:dst||"/",operation:types.OPERATION.COPY};
this.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,thiz);var cb=_readyCB=function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,thiz)};setTimeout(function(){thiz.ctx.getFileManager().copyItem(selection,dstPath,{include:null,exclude:null,mode:1504,hints:hints},cb)},10)},copyItems:function(view,items,dst,store,silent){if(silent===true)return this.copyItemsEx(view,items,dst,store);var selection=[];var nbItems=0;var hints=[];var dstPath=utils.normalizePath(dst.mount+"/"+dst.path);for(var i=0;i<items.length;i++){var itemPath=
utils.normalizePath(items[i].mount+"/"+items[i].path);selection.push(itemPath);nbItems++;hints.push({path:dstPath,directory:items[i].directory})}var thiz=this;var _delegate={delegate:view,onOk:function(dlg){var options=dlg.getOptions();if(options.lastMount)dstPath="/"+options.lastMount+"/"+dlg.getValue();var struct={store:store,dst:dlg.getValue(),operation:types.OPERATION.COPY};thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,thiz);var cb=_readyCB=function(){thiz.publish(types.EVENTS.STORE_CHANGED,
struct,thiz)};setTimeout(function(){thiz.ctx.getFileManager().copyItem(selection,dstPath,{include:options.includes,exclude:options.excludes,mode:options.mode,hints:hints},cb)},10)}};var a=this.translate("copying");var dlg=factory.createFileOperationDialog(this.translate("copying")+" "+nbItems+" "+this.translate("items")+(" to ("+dst.mount+")"),selection,dst,view,_delegate,this.ctx,this.config);dlg.show();dlg.initWithFileOoperation(items,dst,"copy");dlg.resize();setTimeout(function(){dlg.resize()},
1E3)},getItemStore:function(item){if(item&&item.length>0&&item[0]._S)return item[0]._S;else if(item&&item._S)return item._S;return null},onRename:function(item){var thiz=this;var delegate={delegate:this.delegate,onOk:function(dlg){var newName=null;if(dlg&&dlg.getValue)newName=dlg.getValue();if(newName&&newName.length>0){if(lang.isArray(item))item=item[0];var store=thiz.store||thiz.getItemStore(item);var parent=store.getParents(item,true)[0];var struct={store:store,dst:parent.path,operation:types.OPERATION.RENAME};
thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,thiz);var cb=_readyCB=function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,thiz)};setTimeout(function(){thiz.ctx.getFileManager().rename(item.mount,item.path,newName,cb)},10)}}};var result=new FileRenameDialog({title:"Attention!",delegate:delegate,className:"fileOperationView"});result.show();result.initWithFileOoperation(item[0])},moveItem:function(view,src,dst,store,silent){var selection=[];selection.push(src.path);var thiz=this;var parent=
this.store.getParents(src,true)[0];var _delegate={delegate:view,onOk:function(dlg){var options=dlg.getOptions();var struct={store:store,dst:dlg.getValue(),operation:types.OPERATION.MOVE};thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,thiz);var cb=_readyCB=function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,thiz)};setTimeout(function(){thiz.ctx.getFileManager().moveItem(selection,dlg.getValue(),options.includes,options.excludes,options.mode,cb)},10);if(parent){var struct2={store:store,
dst:parent.path,operation:types.OPERATION.MOVE};thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct2,thiz);setTimeout(function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct2,thiz)},100)}}};var dlg=factory.createFileOperationDialog(this.translate("moving")+" "+src.path,selection,dst,view,_delegate,this.ctx,this.config);dlg.show();dlg.initWithFileOoperation(src,dst,"move");dlg.resize();setTimeout(function(){dlg.resize()},1E3)},moveItemsEx:function(view,items,dst,store){if(!lang.isArray(items))items=
[items];var selection=[];var nbItems=0;if(!dst.directory){var _dstStore=dst._S;dst=dst._S.getParents(dst,true)[0]}var dstPath=utils.normalizePath(dst.mount+"/"+dst.path);for(var i=0;i<items.length;i++){var itemPath=utils.normalizePath(items[i].mount+"/"+items[i].path);selection.push(itemPath);nbItems++}var firstItem=items[0];if(!store&&firstItem)store=firstItem._S;var parent=store.getParents(firstItem,true)[0];var thiz=this;var struct={store:store,dst:dst.path,operation:types.OPERATION.MOVE};this.publish(types.EVENTS.BEFORE_STORE_CHANGE,
struct,thiz);var cb=_readyCB=function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,thiz);if(parent){var struct2={store:store,dst:parent.path,operation:types.OPERATION.MOVE};thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct2,thiz);setTimeout(function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct2,thiz)},100)}};var options={includes:[],excludes:[],mode:1501};setTimeout(function(){thiz.ctx.getFileManager().moveItem(selection,dstPath,options.includes,options.excludes,options.mode,cb)},10)},
moveItems:function(view,items,dst,store,silent){if(silent===true)return this.moveItemsEx(view,items,dst,store);var selection=[];var nbItems=0;var dstPath=utils.normalizePath(dst.mount+"/"+dst.path);for(var i=0;i<items.length;i++){var itemPath=utils.normalizePath(items[i].mount+"/"+items[i].path);selection.push(itemPath);nbItems++}var firstItem=items[0];if(!store&&firstItem)store=firstItem._S;var parent=store.getParents(firstItem,true)[0];var thiz=this;var _delegate={delegate:view,onOk:function(dlg){var options=
dlg.getOptions();var struct={store:store,dst:dlg.getValue(),operation:types.OPERATION.MOVE};thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,thiz);var cb=_readyCB=function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,thiz);if(parent){var struct2={store:store,dst:parent.path,operation:types.OPERATION.MOVE};thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct2,thiz);setTimeout(function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct2,thiz)},100)}};setTimeout(function(){thiz.ctx.getFileManager().moveItem(selection,
dstPath,options.includes,options.excludes,options.mode,cb)},10)}};var dlg=factory.createFileOperationDialog(this.translate("moving")+" "+nbItems+" "+this.translate("items"),selection,dst,view,_delegate,this.ctx,this.config);dlg.show();dlg.initWithFileOoperation(items,dst,"copy");dlg.resize();setTimeout(function(){dlg.resize()},1E3)},deleteItems:function(view,items,dir,store){var selection=[];var hints=[];var nbItems=0;var thiz=this;for(var i=0;i<items.length;i++){var dstPath=utils.normalizePath(items[i].mount+
"/"+items[i].path);selection.push(dstPath);nbItems++;hints.push({path:dstPath,directory:items[i].directory})}var _delegate={delegate:view,onOk:function(dlg){var struct={store:store,operation:types.OPERATION.DELETE,dst:dir};var cb=_readyCB=function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,thiz)};try{thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,thiz)}catch(e){}setTimeout(function(){thiz.ctx.getFileManager().deleteItems(selection,{hints:hints},cb)},10)}};var dlg=factory.createFileDeleteDialog(this.translate("removing")+
" "+nbItems+" "+this.translate("items")+"?",selection,view,_delegate,this.ctx,this.config);dlg.show();dlg.initWithSelection(items,"copy");dlg.resize();setTimeout(function(){dlg.resize()},1E3)},copyItem:function(view,src,dst,store){var selection=[];selection.push(src.path);var thiz=this;var hints=[{include:null,exlude:null,mode:1504,hints:[]}];var _delegate={delegate:view,onOk:function(dlg){var struct={store:store,dst:dlg.getValue(),operation:types.OPERATION.COPY};thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,
struct,thiz);var cb=_readyCB=function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,thiz)};setTimeout(function(){thiz.ctx.getFileManager().copyItem(selection,dlg.getValue(),cb)},10)}};var dlg=factory.createFileOperationDialog(this.translate("copying")+" "+src.path+"",selection,dst,view,_delegate,this.ctx,this.config);dlg.show();dlg.initWithFileOoperation(src,dst,"copy");dlg.resize();setTimeout(function(){dlg.resize()},1E3)}})})},"xide/widgets/Reference":function(){define(["dojo/_base/declare",
"dojo/_base/lang","xide/widgets/WidgetBase","xide/widgets/FlagsWidget","xide/factory","xide/utils","xide/types","xide/views/CIActionDialog","xide/form/Select"],function(declare,lang,WidgetBase,FlagsWidget,factory,utils,types,CIActionDialog,Select){return declare("xide.widgets.Reference",[WidgetBase],{wContentSelectorButton:null,widgetMode:null,lastUploadedFileName:null,modeNode:null,oriPath:null,minHeight:"400px;",value:"",options:null,mode:types.WIDGET_REFERENCE_MODE.BY_ID,flagsWidget:null,filterFlags:16,
pickFilterNode:null,templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e"+"\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e"+"\x3ctbody\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+"\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'previewNode'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+
"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button2'\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot2'\x3e"+"\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3ePick Filter\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'pickFilterNode'\x3e\x3c/td\x3e"+
"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button2'\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot2'\x3e"+"\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3eMode\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'modeNode'\x3e\x3c/td\x3e"+
"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button2'\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"+"\x3cdiv data-dojo-attach-point\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'last'\x3e\x3c/div\x3e"+"\x3c/div\x3e",
filePathValidator:function(value,constraints){return true},postMixInProperties:function(){this.inherited(arguments);if(this.userData&&this.userData.title)this.title=this.userData.title;if(this.userData&&this.userData.vertical===true||this.vertical===true)this.templateString="\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e"+"\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e"+"\x3ctbody\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+"\x3ctd width\x3d'100%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+
"\x3c/tr\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'previewNode'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button2'\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+
"\x3ctd width\x3d'100%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3ePick Filter\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot2'\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'pickFilterNode'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e"+"\x3c/tr\x3e"+
"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+"\x3ctd width\x3d'100%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3eMode\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot2'\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'modeNode'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' \x3e\x3c/td\x3e"+
"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"+"\x3cdiv data-dojo-attach-point\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'last'\x3e\x3c/div\x3e"+"\x3c/div\x3e"},onFileSelected:function(path){this.editBox.set("value",path);this.value=path;this.setValue(path)},onSelect:function(){var thiz=this;var _defaultOptions={};if(this.options)lang.mixin(_defaultOptions,this.options);try{var value=utils.toString(this.userData["value"]);var actionDialog=
new CIActionDialog({title:"Widget",style:"width:600px;height:500px;",resizeable:true,delegate:{onOk:function(dlg,data){var expression=utils.getCIInputValueByName(data,"Expression");thiz.userData.changed=true;thiz.userData.active=true;utils.setCIValueByField(thiz.userData,"value",expression);thiz.editBox.set("value",expression)}},cis:[utils.createCI("Expression",29,value,{group:"Expression",delegate:this.userData.delegate})]});actionDialog.show()}catch(e){debugger}},onModeChanged:function(mode){0&&
console.log("on widget reference mode changed :  "+mode);this.mode=mode},serialize:function(){return JSON.stringify({reference:this.editBox.get("value"),mode:this.mode})},addModeSelector:function(){this.widgetMode=utils.addWidget(Select,{options:[{label:"By Id",value:"byid",selected:this.mode=="byid"},{label:"By Declared Class",value:"byclass",selected:this.mode=="byclass"},{label:"By CSS Query",value:"bycss",selected:this.mode=="bycss"},{label:"By Expression",value:"byexpression",selected:this.mode==
"byexpression"}]},this,this.modeNode,true);var thiz=this;dojo.connect(this.widgetMode,"onChange",function(val){thiz.onModeChanged(val)})},onPickFilterChanged:function(val){this.allowHTMLNodes=val==4;this.allowWidgets=val==16},addPickFilter:function(){var thiz=this;var flags=[{value:2,label:"HTML"},{value:4,label:"Widgets"}];var flagsWidget=utils.addWidget(FlagsWidget,{value:16,data:flags,lineBreak:false,title:"",single:true,flagClass:"flagItem",style:"display:inline-block;width:auto;",onFlagChanged:function(val){thiz.onPickFilterChanged(val)},
_onFlagChange2:function(flagwidget){return thiz.onPickFilterChanged(flagwidget)},isChecked2:function(val,itemVal){return true},setValue:function(value){thiz.filterFlags=value},getValue:function(){return thiz.filterFlags}},thiz,this.pickFilterNode,true,"ui-widget-content");flagsWidget.startup();this.flagsWidget=flagsWidget;return flagsWidget},fillTemplate:function(){if(this.editBox)return;var thiz=this;var value=utils.toString(this.userData["value"]);if(value){var _t=dojo.fromJson(value);if(_t){this.mode=
_t.mode;value=_t.reference}}this.editBox=factory.createValidationTextBox(this.previewNode,"","",value,this.filePathValidator,this.delegate,"Not a path!","I need some input");this.connectEditBox(this.editBox);this.selectButton=factory.createButton(this.button0,"fa-eyedropper","elusiveButton","","",this.onPick,this);this.addPickFilter();this.addModeSelector()},startup:function(){this.inherited(arguments);this.fillTemplate();this.onReady()}})})},"dijit/a11yclick":function(){define("dijit/a11yclick",
["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(keys,mouse,on,touch){function clickKey(e){if((e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!/input|button/i.test(e.target.nodeName))for(var node=e.target;node;node=node.parentNode)if(node.dojoClick)return true}var lastKeyDownNode;on(document,"keydown",function(e){if(clickKey(e)){lastKeyDownNode=e.target;e.preventDefault()}else lastKeyDownNode=null});on(document,"keyup",function(e){if(clickKey(e)&&e.target==lastKeyDownNode){lastKeyDownNode=
null;on.emit(e.target,"click",{cancelable:true,bubbles:true,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altKey,_origType:e.type})}});var click=function(node,listener){node.dojoClick=true;return on(node,"click",listener)};click.click=click;click.press=function(node,listener){var touchListener=on(node,touch.press,function(evt){if(evt.type=="mousedown"&&!mouse.isLeft(evt))return;listener(evt)}),keyListener=on(node,"keydown",function(evt){if(evt.keyCode===keys.ENTER||evt.keyCode===
keys.SPACE)listener(evt)});return{remove:function(){touchListener.remove();keyListener.remove()}}};click.release=function(node,listener){var touchListener=on(node,touch.release,function(evt){if(evt.type=="mouseup"&&!mouse.isLeft(evt))return;listener(evt)}),keyListener=on(node,"keyup",function(evt){if(evt.keyCode===keys.ENTER||evt.keyCode===keys.SPACE)listener(evt)});return{remove:function(){touchListener.remove();keyListener.remove()}}};click.move=touch.move;return click})},"xide/views/ActionDialog":function(){define(["dojo/_base/declare",
"dojo/dom-style","dojo/on","xide/views/Dialog","xide/utils","dojo/dom-attr","xide/widgets/_InsertionMixin","dojo/dom-geometry","./KeyboardHandlerLight","xide/widgets/_CSSMixin","dojo/dom-class","dojo/window","dojox/layout/ResizeHandle","xide/factory","xide/types"],function(declare,domStyle,on,Dialog,utils,domAttr,InsertionMixin,domGeometry,KeyboardHandler,_CSSMixin,domClass,winUtils,ResizeHandle,factory,types){return declare("xide.views.ActionDialog",[Dialog,InsertionMixin,KeyboardHandler,_CSSMixin],
{ctx:null,model:null,delegate:null,didLoad:false,inserts:null,actionBar:null,autoDestroy:true,autoActionButtons:true,cssClass:"ui-state-default",titleBarClass:null,focusedButton:"ok",autofocus:false,dialogClass:"",resizeable:false,resizeToContent:true,_didOk:false,_size:function(){this._checkIfSingleChild();if(this._singleChild)if(typeof this._singleChildOriginalStyle!="undefined"){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;delete this._singleChildOriginalStyle}var bb=
domGeometry.position(this.domNode);var viewport=winUtils.getBox(this.ownerDocument);viewport.w*=this.maxRatio;viewport.h*=this.maxRatio;if(bb.w>=viewport.w||bb.h>=viewport.h){var containerSize=domGeometry.position(this.containerNode),w=Math.min(bb.w,viewport.w)-(bb.w-containerSize.w),h=Math.min(bb.h,viewport.h)-(bb.h-containerSize.h);if(this._singleChild&&this._singleChild.resize){if(typeof this._singleChildOriginalStyle=="undefined")this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;
this._singleChild.resize({w:w,h:h})}else domStyle.set(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"})}else if(this._singleChild&&this._singleChild.resize)this._singleChild.resize()},_resizeToContent:function(){var actionBox=domGeometry.getMarginBox(this.actionBar);var contentBox=domGeometry.getMarginBox(this.containerNode);var titleBox=domGeometry.getMarginBox(this.titleBar);var box=domGeometry.getMarginBox(this.domNode);var newHeight=actionBox.h+contentBox.h+
titleBox.h;domStyle.set(this.domNode,{height:newHeight+"px"})},hide:function(){var thiz=this;if(this.autoDestroy)setTimeout(function(){utils.destroyWidget(thiz)},500)},buildRendering:function(){this.inherited(arguments);domClass.add(this.domNode,this.dialogClass);domClass.add(this.domNode,"resizableDialog")},postMixInProperties:function(){this.inherited(arguments);var ctxo=this.ctx;if(ctxo&&ctxo.getLocals)this._messages=ctxo.getLocals("dijit","common")||this._messages},openItem:function(){this.onOk()},
onOk:function(){if(this._didOk){this.hide();return}this._didOk=true;if(this.delegate&&this.delegate.onOk)try{this.delegate.onOk(this)}catch(e){0&&console.log("crash in action dialog onOk "+e)}try{this.hide()}catch(e){debugger}},onCancel:function(){if(this.delegate&&this.delegate.onCancel)this.delegate.onCancel(this);try{this.hide()}catch(e){}},resize:function(coords){if(coords){domAttr.set(this.domNode,"height","inherit");dojo.style(this.domNode,"height","inherit");domAttr.set(this.domNode,"width",
"inherit");dojo.style(this.domNode,"width","inherit");dojo.style(this.domNode,"maxWidth","inherit");dojo.style(this.domNode,"maxHeight","inherit");var computedStyle=domStyle.getComputedStyle(this.containerNode);var output=domGeometry.getPadExtents(this.containerNode,computedStyle);var c={w:coords.w-output.w,h:coords.h-output.h};if(c.h)dojo.style(this.domNode,"height",c.h+"px");c.h-=domGeometry.getMarginBox(this.titleBar).h;var contentArea=dojo.query(".dijitDialogPaneContent",this.domNode)[0];actionArea=
this.actionBar;if(actionArea)c.h-=domGeometry.getMarginBox(actionArea).h;c.h-=20;if(c.w)dojo.style(contentArea,"width",c.w+"px");if(c.w)dojo.style(this.domNode,"width",c.w+"px");if(c.h)dojo.style(contentArea,"height",c.h+"px");dojo.forEach(this.getChildren(),dojo.hitch(this,function(child){if(child.resize)child.resize({w:c.w,h:c.h-27})}));factory.publish(types.EVENTS.RESIZE,{},this)}},addActionButtons:function(){if(this.actionBar)return;var t=this.translate("buttonOk",false);var buttonDiv=dojo.create("div",
{className:"ui-widget-content",style:"bottom: 0;left: 0;position: absolute;width: 100%;margin:0px;padding:0px;text-align:right;"});this.actionBar=buttonDiv;var thiz=this;this.domNode.appendChild(buttonDiv);var buttonOk=new dijit.form.Button({innerHTML:this.translate("buttonOk",false),onClick:function(e){e.preventDefault();thiz.onOk()}});this.okButton=buttonOk;buttonDiv.appendChild(buttonOk.domNode);buttonOk.startup();var buttonCancel=new dijit.form.Button({innerHTML:this.translate("buttonCancel",
false),style:this.resizeable===true?"margin-right:15px":"",onClick:function(){thiz.onCancel();thiz.hide();thiz.destroyRecursive()}});buttonDiv.appendChild(buttonCancel.domNode);buttonCancel.startup();this.cancelButton=buttonCancel;domClass.add(this.okButton.domNode,"ui-button ui-widget-content");domClass.add(this.cancelButton.domNode,"ui-button ui-widget-content");if(this.resizeable){var div=dojo.doc.createElement("div");buttonDiv.appendChild(div);new ResizeHandle({targetId:this.id},div)}domClass.add(this.containerNode,
"ui-widget-content")},fixHeight:function(){var actionBox=domGeometry.getMarginBox(this.actionBar);var box=domGeometry.getMarginBox(this.domNode);var newHeight=box.h+actionBox.h;domStyle.set(this.domNode,{height:newHeight+"px"});var thiz=this;setTimeout(function(){domStyle.set(thiz.containerNode,{height:"inherit"});setTimeout(function(){thiz._position()},10)},1E3)},show:function(){this.inherited(arguments);if(this.resizeToContent)this._resizeToContent();var thiz=this;if(this.focusedButton==="ok"&&
this.okButton){thiz.okButton.focus();thiz.okButton.domNode.focus()}},startup:function(){this.inherited(arguments);if(this.didLoad)return;this.didLoad=true;domClass.add(this.titleBar,"ui-widget-content");var thiz=this;if(this.inserts)this.doInserts(this.inserts);on(this.domNode,"keydown",function(event){thiz.onKey(event)});if(this.autoActionButtons)this.addActionButtons();if(this.titleBarClass)domClass.add(this.titleBar,this.titleBarClass);if(this.focusedButton&&this.okButton)setTimeout(function(){thiz.okButton.domNode.focus()},
500)}})})},"url:dijit/layout/templates/TabContainer.html":'\x3cdiv class\x3d"dijitTabContainer"\x3e\n\t\x3cdiv class\x3d"dijitTabListWrapper" data-dojo-attach-point\x3d"tablistNode"\x3e\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"tablistSpacer" class\x3d"dijitTabSpacer ${baseClass}-spacer"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class",
"dojo/hccss","dojo/domReady","dojo/_base/window"],function(domClass,has,domReady,win){domReady(function(){if(has("highcontrast"))domClass.add(win.body(),"dijit_a11y")});return has})},"xfile/views/History":function(){define("xfile/views/History",["dojo/_base/declare"],function(declare){return declare("xfile.views.History",null,{_back:null,_history:null,initHistory:function(){this._history=[]},onHistoryForward:function(prefix,item){this._history.push(item)},onHistoryBack:function(prefix,item){this._history.remove(item);
var nextItem=this.getCurrentHistoryState();if(nextItem);if(this.onDidGoBack)this.onDidGoBack(item)},getCurrentHistoryState:function(){var idx=this._history.length-1;if(idx<0)idx=0;if(idx<=this._history.length)return this._history[idx]}})})},"xide/widgets/ToggleButton":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-attr","dijit/form/ToggleButton"],function(declare,domClass,domAttr,ToggleButton){return declare("xide/widgets/ToggleButton",[ToggleButton],{currentItem:null,buttons:null,
iconClass:"",title:"title",disabled:false,iconNode:null,linkNode:null,_setCheckedAttr:function(value,priorityChange){this.inherited(arguments);this.checked=!value;domClass.remove(this.iconNode,this.icon1);domClass.remove(this.iconNode,this.icon2);domClass.add(this.iconNode,value?"fa-toggle-on":"fa-toggle-off")},setDisabled:function(disabled){this.set("disabled",disabled)},startup:function(){this.inherited(arguments);domClass.remove(this.iconNode,"dijitReset");this.setDisabled(this.disabled)}})})},
"xide/widgets/SelectWidget":function(){define(["dojo/_base/declare","xide/widgets/WidgetBase","xide/factory"],function(declare,WidgetBase,factory){return declare("xide.widgets.SelectWidget",[WidgetBase],{didLoad:false,value:"unset",onPlatformChanged:function(newPlatform){this.inherited(arguments);if(this.nativeWidget)this.nativeWidget.set("value",this.getValue())},widgetChanged:function(value){this.changed=true;if(this.userData)this.userData.changed=true;if(this.nativeWidget){if(this.nativeWidget instanceof
dijit.form.CheckBox){this.setValue(this.nativeWidget.get("checked"));return}this.setValue(this.nativeWidget.value)}},setupNativeWidgetHandler:function(){if(this.nativeWidget){var thiz=this;dojo.connect(this.nativeWidget,"onChange",function(item){thiz.widgetChanged(this)});dojo.connect(this.nativeWidget,"onBlur",function(){thiz.setActive(false)});dojo.connect(this.nativeWidget,"onFocus",function(){thiz.setActive(true)})}},initWithDataItem:function(data){this.empty();this.data=data;var thiz=this;this.widgets=
factory.createWidgetsFromArray(data.inputs,thiz);if(this.widgets)this.attachWidgets(this.widgets)},startup:function(){this.inherited(arguments);if(this.nativeWidget){this.valueNode.innerHTML="";this.valueNode.appendChild(this.nativeWidget.domNode);this.setupNativeWidgetHandler()}this.onReady()}})})},"xide/views/CIView":function(){define(["dojo/_base/lang","dojo/_base/declare","xide/layout/ContentPane","xide/utils","xide/factory","dojo/store/Memory"],function(lang,declare,ContentPane,utils,factory,
Memory){return declare("xide.views.CIBaseView",[ContentPane],{data:null,widgets:null,delegate:null,helpNodes:null,store:null,groups:null,groupContainer:null,cssClass:"CIView",options:null,resize:function(){this.inherited(arguments)},createGroupContainer:function(){var tabContainer=new dijit.layout.TabContainer({tabPosition:"top",style:"min-width:500px;min-height:300px;"});this.containerNode.appendChild(tabContainer.domNode);tabContainer.startup();return tabContainer},getGroupContainer:function(){if(this.groupContainer)return this.groupContainer;
this.groupContainer=this.createGroupContainer();return this.groupContainer},createGroupView:function(groupContainer,group){return utils.addWidget(ContentPane,{delegate:this,title:group,closable:false},this,groupContainer,true)},attachWidgets:function(data,dstNode){this.helpNodes=[];dstNode=dstNode||this.domNode;for(var i=0;i<data.length;i++){var widget=data[i];widget.delegate=this.owner||this;dstNode.appendChild(widget.domNode);widget.startup()}},empty:function(){if(this.helpNodes)for(var i=0;i<this.helpNodes.length;i++){var widget=
this.helpNodes[i];dojo.destroy(widget)}if(this.widgets)for(var i=0;i<this.widgets.length;i++){var widget=this.widgets[i];widget.destroyRecursive();dojo.destroy(widget)}},sortGroups:function(groups,groupMap){groups=groups.sort(function(a,b){if(a.name&&b.name&&groupMap[a.name]!=null&&groupMap[b.name]!=null){var orderA=groupMap[a.name];var orderB=groupMap[b.name];return orderB-orderA}return 100});return groups},toArray:function(obj){var result=[];for(var c in obj)result.push({name:c,value:obj[c]});return result},
renderGroups:function(groups){var groupContainer=this.getGroupContainer();var lastChild=null;var _array=this.toArray(groups);if(this.options&&this.options.groupOrder)_array=this.sortGroups(_array,this.options.groupOrder);for(var i=0;i<_array.length;i++)try{var view=this.createGroupView(groupContainer,_array[i].name);var groupWidgets=factory.createWidgetsFromArray(_array[i].value,this,null,false);this.attachWidgets(groupWidgets,view.containerNode);lastChild=view}catch(e){}groupContainer.resize();groupContainer.selectChild(lastChild)},
getCIS:function(){return this.data},getElements:function(data,group){var res=[];for(var i=0;i<data.length;i++){var obj=data[i];if(obj.group===group)res.push(obj)}return res},initWithCIS:function(data){this.empty();try{data=utils.flattenCIS(data);var store=new Memory({data:data});this.data=data;var grouped=null;var thiz=this;var groups=store.query({group:/\S+/,visible:true});if(groups.length>0){grouped={};for(var i in groups)if(grouped[groups[i].group]==null)if(lang.isString(groups[i].group))try{var elements=
this.getElements(data,groups[i].group);if(elements.length>0)grouped[groups[i].group]=elements}catch(e){debugger}}var nbElements=Object.keys(grouped).length;if(grouped!=null&&nbElements>1)this.renderGroups(grouped);else{this.widgets=factory.createWidgetsFromArray(data,thiz,null,false);if(this.widgets)this.attachWidgets(this.widgets)}}catch(e){debugger}},startup:function(){this.inherited(arguments);if(this.cis)this.initWithCIS(this.cis)}})})},"dijit/popup":function(){define("dijit/popup",["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./place","./BackgroundIframe","./Viewport","./main"],function(array,aspect,declare,dom,domAttr,domConstruct,domGeometry,domStyle,has,keys,lang,on,place,BackgroundIframe,Viewport,dijit){function destroyWrapper(){if(this._popupWrapper){domConstruct.destroy(this._popupWrapper);delete this._popupWrapper}}var PopupManager=declare(null,
{_stack:[],_beginZIndex:1E3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var oldPos=this._firstAroundPosition,newPos=domGeometry.position(this._firstAroundNode,true),dx=newPos.x-oldPos.x,dy=newPos.y-oldPos.y;if(dx||dy){this._firstAroundPosition=newPos;for(var i=0;i<this._stack.length;i++){var style=this._stack[i].wrapper.style;style.top=parseInt(style.top,10)+dy+"px";if(style.right=="auto")style.left=parseInt(style.left,10)+dx+"px";else style.right=parseInt(style.right,10)-dx+"px"}}this._aroundMoveListener=
setTimeout(lang.hitch(this,"_repositionAll"),dx||dy?10:50)}},_createWrapper:function(widget){var wrapper=widget._popupWrapper,node=widget.domNode;if(!wrapper){wrapper=domConstruct.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":widget["aria-label"]||widget.label||widget.name||widget.id},widget.ownerDocumentBody);wrapper.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";widget._popupWrapper=wrapper;aspect.after(widget,"destroy",
destroyWrapper,true)}return wrapper},moveOffScreen:function(widget){var wrapper=this._createWrapper(widget);var ltr=domGeometry.isBodyLtr(widget.ownerDocument),style={visibility:"hidden",top:"-9999px",display:""};style[ltr?"left":"right"]="-9999px";style[ltr?"right":"left"]="auto";domStyle.set(wrapper,style);return wrapper},hide:function(widget){var wrapper=this._createWrapper(widget);domStyle.set(wrapper,{display:"none",height:"auto",overflow:"visible",border:""});var node=widget.domNode;if("_originalStyle"in
node)node.style.cssText=node._originalStyle},getTopPopup:function(){var stack=this._stack;for(var pi=stack.length-1;pi>0&&stack[pi].parent===stack[pi-1].widget;pi--);return stack[pi]},open:function(args){var stack=this._stack,widget=args.popup,node=widget.domNode,orient=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():domGeometry.isBodyLtr(widget.ownerDocument),around=args.around,id=args.around&&args.around.id?args.around.id+"_dropdown":"popup_"+this._idGen++;
while(stack.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,stack[stack.length-1].widget.domNode)))this.close(stack[stack.length-1].widget);var wrapper=this.moveOffScreen(widget);if(widget.startup&&!widget._started)widget.startup();var maxHeight,popupSize=domGeometry.position(node);if("maxHeight"in args&&args.maxHeight!=-1)maxHeight=args.maxHeight||Infinity;else{var viewport=Viewport.getEffectiveBox(this.ownerDocument),aroundPos=around?domGeometry.position(around,false):{y:args.y-(args.padding||
0),h:(args.padding||0)*2};maxHeight=Math.floor(Math.max(aroundPos.y,viewport.h-(aroundPos.y+aroundPos.h)))}if(popupSize.h>maxHeight){var cs=domStyle.getComputedStyle(node),borderStyle=cs.borderLeftWidth+" "+cs.borderLeftStyle+" "+cs.borderLeftColor;domStyle.set(wrapper,{overflowY:"scroll",height:maxHeight+"px",border:borderStyle});node._originalStyle=node.style.cssText;node.style.border="none"}domAttr.set(wrapper,{id:id,style:{zIndex:this._beginZIndex+stack.length},"class":"dijitPopup "+(widget.baseClass||
widget["class"]||"").split(" ")[0]+"Popup"+" ui-menu ui-widget ui-widget-content",dijitPopupParent:args.parent?args.parent.id:""});if(stack.length==0&&around){this._firstAroundNode=around;this._firstAroundPosition=domGeometry.position(around,true);this._aroundMoveListener=setTimeout(lang.hitch(this,"_repositionAll"),50)}if(has("config-bgIframe")&&!widget.bgIframe)widget.bgIframe=new BackgroundIframe(wrapper);var layoutFunc=widget.orient?lang.hitch(widget,"orient"):null,best=around?place.around(wrapper,
around,orient,ltr,layoutFunc):place.at(wrapper,args,orient=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding,layoutFunc);wrapper.style.visibility="visible";node.style.visibility="visible";var handlers=[];handlers.push(on(wrapper,"keydown",lang.hitch(this,function(evt){if(evt.keyCode==keys.ESCAPE&&args.onCancel){evt.stopPropagation();evt.preventDefault();args.onCancel()}else if(evt.keyCode==keys.TAB){evt.stopPropagation();evt.preventDefault();var topPopup=this.getTopPopup();if(topPopup&&
topPopup.onCancel)topPopup.onCancel()}})));if(widget.onCancel&&args.onCancel)handlers.push(widget.on("cancel",args.onCancel));handlers.push(widget.on(widget.onExecute?"execute":"change",lang.hitch(this,function(){var topPopup=this.getTopPopup();if(topPopup&&topPopup.onExecute)topPopup.onExecute()})));stack.push({widget:widget,wrapper:wrapper,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:handlers});if(widget.onOpen)widget.onOpen(best);return best},
close:function(popup){var stack=this._stack;while(popup&&array.some(stack,function(elem){return elem.widget==popup})||!popup&&stack.length){var top=stack.pop(),widget=top.widget,onClose=top.onClose;if(widget.onClose)widget.onClose();var h;while(h=top.handlers.pop())h.remove();if(widget&&widget.domNode)this.hide(widget);if(onClose)onClose()}if(stack.length==0&&this._aroundMoveListener){clearTimeout(this._aroundMoveListener);this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null}}});
return dijit.popup=new PopupManager})},"dojo/data/ItemFileWriteStore":function(){define(["../_base/lang","../_base/declare","../_base/array","../_base/json","../_base/kernel","./ItemFileReadStore","../date/stamp"],function(lang,declare,arrayUtil,jsonUtil,kernel,ItemFileReadStore,dateStamp){return declare("dojo.data.ItemFileWriteStore",ItemFileReadStore,{constructor:function(keywordParameters){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending=
{_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize)this._datatypeMap["Date"].serialize=function(obj){return dateStamp.toISOString(obj,{zulu:true})};if(keywordParameters&&keywordParameters.referenceIntegrity===false)this.referenceIntegrity=false;this._saveInProgress=false},referenceIntegrity:true,_assert:function(condition){if(!condition)throw new Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},
newItem:function(keywordArgs,parentInfo){this._assert(!this._saveInProgress);if(!this._loadFinished)this._forceLoad();if(typeof keywordArgs!="object"&&typeof keywordArgs!="undefined")throw new Error("newItem() was passed something other than an object");var newIdentity=null;var identifierAttribute=this._getIdentifierAttribute();if(identifierAttribute===Number)newIdentity=this._arrayOfAllItems.length;else{newIdentity=keywordArgs[identifierAttribute];if(typeof newIdentity==="undefined")throw new Error("newItem() was not passed an identity for the new item");
if(lang.isArray(newIdentity))throw new Error("newItem() was not passed an single-valued identity");}if(this._itemsByIdentity)this._assert(typeof this._itemsByIdentity[newIdentity]==="undefined");this._assert(typeof this._pending._newItems[newIdentity]==="undefined");this._assert(typeof this._pending._deletedItems[newIdentity]==="undefined");var newItem={};newItem[this._storeRefPropName]=this;newItem[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[newIdentity]=
newItem;newItem[identifierAttribute]=[newIdentity]}this._arrayOfAllItems.push(newItem);var pInfo=null;if(parentInfo&&parentInfo.parent&&parentInfo.attribute){pInfo={item:parentInfo.parent,attribute:parentInfo.attribute,oldValue:undefined};var values=this.getValues(parentInfo.parent,parentInfo.attribute);if(values&&values.length>0){var tempValues=values.slice(0,values.length);if(values.length===1)pInfo.oldValue=values[0];else pInfo.oldValue=values.slice(0,values.length);tempValues.push(newItem);this._setValueOrValues(parentInfo.parent,
parentInfo.attribute,tempValues,false);pInfo.newValue=this.getValues(parentInfo.parent,parentInfo.attribute)}else{this._setValueOrValues(parentInfo.parent,parentInfo.attribute,newItem,false);pInfo.newValue=newItem}}else{newItem[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(newItem)}this._pending._newItems[newIdentity]=newItem;for(var key in keywordArgs){if(key===this._storeRefPropName||key===this._itemNumPropName)throw new Error("encountered bug in ItemFileWriteStore.newItem");var value=
keywordArgs[key];if(!lang.isArray(value))value=[value];newItem[key]=value;if(this.referenceIntegrity)for(var i=0;i<value.length;i++){var val=value[i];if(this.isItem(val))this._addReferenceToMap(val,newItem,key)}}this.onNew(newItem,pInfo);return newItem},_removeArrayElement:function(array,element){var index=arrayUtil.indexOf(array,element);if(index!=-1){array.splice(index,1);return true}return false},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var indexInArrayOfAllItems=
item[this._itemNumPropName];var identity=this.getIdentity(item);if(this.referenceIntegrity){var attributes=this.getAttributes(item);if(item[this._reverseRefMap])item["backup_"+this._reverseRefMap]=lang.clone(item[this._reverseRefMap]);arrayUtil.forEach(attributes,function(attribute){arrayUtil.forEach(this.getValues(item,attribute),function(value){if(this.isItem(value)){if(!item["backupRefs_"+this._reverseRefMap])item["backupRefs_"+this._reverseRefMap]=[];item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(value),
attr:attribute});this._removeReferenceFromMap(value,item,attribute)}},this)},this);var references=item[this._reverseRefMap];if(references)for(var itemId in references){var containingItem=null;if(this._itemsByIdentity)containingItem=this._itemsByIdentity[itemId];else containingItem=this._arrayOfAllItems[itemId];if(containingItem)for(var attribute in references[itemId]){var oldValues=this.getValues(containingItem,attribute)||[];var newValues=arrayUtil.filter(oldValues,function(possibleItem){return!(this.isItem(possibleItem)&&
this.getIdentity(possibleItem)==identity)},this);this._removeReferenceFromMap(item,containingItem,attribute);if(newValues.length<oldValues.length)this._setValueOrValues(containingItem,attribute,newValues,true)}}}this._arrayOfAllItems[indexInArrayOfAllItems]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity)delete this._itemsByIdentity[identity];this._pending._deletedItems[identity]=item;if(item[this._rootItemPropName])this._removeArrayElement(this._arrayOfTopLevelItems,item);this.onDelete(item);
return true},setValue:function(item,attribute,value){return this._setValueOrValues(item,attribute,value,true)},setValues:function(item,attribute,values){return this._setValueOrValues(item,attribute,values,true)},unsetAttribute:function(item,attribute){return this._setValueOrValues(item,attribute,[],true)},_setValueOrValues:function(item,attribute,newValueOrValues,callOnSet){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(lang.isString(attribute));this._assert(typeof newValueOrValues!==
"undefined");var identifierAttribute=this._getIdentifierAttribute();if(attribute==identifierAttribute)throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");var oldValueOrValues=this._getValueOrValues(item,attribute);var identity=this.getIdentity(item);if(!this._pending._modifiedItems[identity]){var copyOfItemState={};for(var key in item)if(key===this._storeRefPropName||key===this._itemNumPropName||key===this._rootItemPropName)copyOfItemState[key]=
item[key];else if(key===this._reverseRefMap)copyOfItemState[key]=lang.clone(item[key]);else copyOfItemState[key]=item[key].slice(0,item[key].length);this._pending._modifiedItems[identity]=copyOfItemState}var success=false;if(lang.isArray(newValueOrValues)&&newValueOrValues.length===0){success=delete item[attribute];newValueOrValues=undefined;if(this.referenceIntegrity&&oldValueOrValues){var oldValues=oldValueOrValues;if(!lang.isArray(oldValues))oldValues=[oldValues];for(var i=0;i<oldValues.length;i++){var value=
oldValues[i];if(this.isItem(value))this._removeReferenceFromMap(value,item,attribute)}}}else{var newValueArray;if(lang.isArray(newValueOrValues))newValueArray=newValueOrValues.slice(0,newValueOrValues.length);else newValueArray=[newValueOrValues];if(this.referenceIntegrity)if(oldValueOrValues){var oldValues=oldValueOrValues;if(!lang.isArray(oldValues))oldValues=[oldValues];var map={};arrayUtil.forEach(oldValues,function(possibleItem){if(this.isItem(possibleItem)){var id=this.getIdentity(possibleItem);
map[id.toString()]=true}},this);arrayUtil.forEach(newValueArray,function(possibleItem){if(this.isItem(possibleItem)){var id=this.getIdentity(possibleItem);if(map[id.toString()])delete map[id.toString()];else this._addReferenceToMap(possibleItem,item,attribute)}},this);for(var rId in map){var removedItem;if(this._itemsByIdentity)removedItem=this._itemsByIdentity[rId];else removedItem=this._arrayOfAllItems[rId];this._removeReferenceFromMap(removedItem,item,attribute)}}else for(var i=0;i<newValueArray.length;i++){var value=
newValueArray[i];if(this.isItem(value))this._addReferenceToMap(value,item,attribute)}item[attribute]=newValueArray;success=true}if(callOnSet)this.onSet(item,attribute,oldValueOrValues,newValueOrValues);return success},_addReferenceToMap:function(refItem,parentItem,attribute){var parentId=this.getIdentity(parentItem);var references=refItem[this._reverseRefMap];if(!references)references=refItem[this._reverseRefMap]={};var itemRef=references[parentId];if(!itemRef)itemRef=references[parentId]={};itemRef[attribute]=
true},_removeReferenceFromMap:function(refItem,parentItem,attribute){var identity=this.getIdentity(parentItem);var references=refItem[this._reverseRefMap];var itemId;if(references){for(itemId in references)if(itemId==identity){delete references[itemId][attribute];if(this._isEmpty(references[itemId]))delete references[itemId]}if(this._isEmpty(references))delete refItem[this._reverseRefMap]}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];
if(item&&item[this._reverseRefMap])0&&console.log("Item: ["+this.getIdentity(item)+"] is referenced by: "+jsonUtil.toJson(item[this._reverseRefMap]))}},_getValueOrValues:function(item,attribute){var valueOrValues=undefined;if(this.hasAttribute(item,attribute)){var valueArray=this.getValues(item,attribute);if(valueArray.length==1)valueOrValues=valueArray[0];else valueOrValues=valueArray}return valueOrValues},_flatten:function(value){if(this.isItem(value))return{_reference:this.getIdentity(value)};
else{if(typeof value==="object")for(var type in this._datatypeMap){var typeMap=this._datatypeMap[type];if(lang.isObject(typeMap)&&!lang.isFunction(typeMap)){if(value instanceof typeMap.type){if(!typeMap.serialize)throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");return{_type:type,_value:typeMap.serialize(value)}}}else if(value instanceof typeMap)return{_type:type,_value:value.toString()}}return value}},_getNewFileContentString:function(){var serializableStructure=
{};var identifierAttribute=this._getIdentifierAttribute();if(identifierAttribute!==Number)serializableStructure.identifier=identifierAttribute;if(this._labelAttr)serializableStructure.label=this._labelAttr;serializableStructure.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var serializableItem={};for(var key in item)if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var valueArray=
this.getValues(item,key);if(valueArray.length==1)serializableItem[key]=this._flatten(valueArray[0]);else{var serializableArray=[];for(var j=0;j<valueArray.length;++j){serializableArray.push(this._flatten(valueArray[j]));serializableItem[key]=serializableArray}}}serializableStructure.items.push(serializableItem)}}var prettyPrint=true;return jsonUtil.toJson(serializableStructure,prettyPrint)},_isEmpty:function(something){var empty=true;if(lang.isObject(something)){var i;for(i in something){empty=false;
break}}else if(lang.isArray(something))if(something.length>0)empty=false;return empty},save:function(keywordArgs){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var saveCompleteCallback=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(keywordArgs&&keywordArgs.onComplete){var scope=keywordArgs.scope||kernel.global;keywordArgs.onComplete.call(scope)}};var saveFailedCallback=function(err){self._saveInProgress=false;
if(keywordArgs&&keywordArgs.onError){var scope=keywordArgs.scope||kernel.global;keywordArgs.onError.call(scope,err)}};if(this._saveEverything){var newFileContentString=this._getNewFileContentString();this._saveEverything(saveCompleteCallback,saveFailedCallback,newFileContentString)}if(this._saveCustom)this._saveCustom(saveCompleteCallback,saveFailedCallback);if(!this._saveEverything&&!this._saveCustom)saveCompleteCallback()},revert:function(){this._assert(!this._saveInProgress);var identity;for(identity in this._pending._modifiedItems){var copyOfItemState=
this._pending._modifiedItems[identity];var modifiedItem=null;if(this._itemsByIdentity)modifiedItem=this._itemsByIdentity[identity];else modifiedItem=this._arrayOfAllItems[identity];copyOfItemState[this._storeRefPropName]=this;for(var key in modifiedItem)delete modifiedItem[key];lang.mixin(modifiedItem,copyOfItemState)}var deletedItem;for(identity in this._pending._deletedItems){deletedItem=this._pending._deletedItems[identity];deletedItem[this._storeRefPropName]=this;var index=deletedItem[this._itemNumPropName];
if(deletedItem["backup_"+this._reverseRefMap]){deletedItem[this._reverseRefMap]=deletedItem["backup_"+this._reverseRefMap];delete deletedItem["backup_"+this._reverseRefMap]}this._arrayOfAllItems[index]=deletedItem;if(this._itemsByIdentity)this._itemsByIdentity[identity]=deletedItem;if(deletedItem[this._rootItemPropName])this._arrayOfTopLevelItems.push(deletedItem)}for(identity in this._pending._deletedItems){deletedItem=this._pending._deletedItems[identity];if(deletedItem["backupRefs_"+this._reverseRefMap]){arrayUtil.forEach(deletedItem["backupRefs_"+
this._reverseRefMap],function(reference){var refItem;if(this._itemsByIdentity)refItem=this._itemsByIdentity[reference.id];else refItem=this._arrayOfAllItems[reference.id];this._addReferenceToMap(refItem,deletedItem,reference.attr)},this);delete deletedItem["backupRefs_"+this._reverseRefMap]}}for(identity in this._pending._newItems){var newItem=this._pending._newItems[identity];newItem[this._storeRefPropName]=null;this._arrayOfAllItems[newItem[this._itemNumPropName]]=null;if(newItem[this._rootItemPropName])this._removeArrayElement(this._arrayOfTopLevelItems,
newItem);if(this._itemsByIdentity)delete this._itemsByIdentity[identity]}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true},isDirty:function(item){if(item){var identity=this.getIdentity(item);return(new Boolean(this._pending._newItems[identity]||this._pending._modifiedItems[identity]||this._pending._deletedItems[identity])).valueOf()}else return!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},
onSet:function(item,attribute,oldValue,newValue){},onNew:function(newItem,parentInfo){},onDelete:function(deletedItem){},close:function(request){if(this.clearOnClose)if(!this.isDirty())this.inherited(arguments);else throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}})})},"dijit/layout/TabContainer":function(){define("dijit/layout/TabContainer",["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase",
"./TabController","./ScrollingTabController"],function(lang,declare,_TabContainerBase,TabController,ScrollingTabController){return declare("dijit.layout.TabContainer",_TabContainerBase,{useMenu:true,useSlider:true,controllerWidget:"",_makeController:function(srcNode){var cls=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout"),TabController=typeof this.controllerWidget=="string"?lang.getObject(this.controllerWidget):this.controllerWidget;return new TabController({id:this.id+"_tablist",ownerDocument:this.ownerDocument,
dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":cls,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},srcNode)},postMixInProperties:function(){this.inherited(arguments);if(!this.controllerWidget)this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?ScrollingTabController:TabController}})})},
"dojox/mobile":function(){define("dojox/mobile",[".","dojo/_base/lang","dojox/mobile/_base"],function(dojox,lang,base){lang.getObject("mobile",true,dojox);return dojox.mobile})},"xlog/views/LogView":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","xide/views/BeanView","dgrid/OnDemandGrid","dgrid/Selection","dgrid/Keyboard","dgrid/editor","xide/views/GridView","dgrid/extensions/ColumnHider","dgrid/extensions/ColumnResizer","dgrid/extensions/ColumnReorder","xide/types","xide/utils",
"xide/widgets/FlagsWidget","xlog/widgets/RowDetailEditor"],function(declare,lang,domClass,BeanView,OnDemandGrid,Selection,Keyboard,editor,GridView,ColumnHider,ColumnResizer,ColumnReorder,types,utils,FlagsWidget,RowDetailEditor){var logview=declare("xlog/views/LogView",[BeanView,GridView],{delegate:null,store:null,flagWidget:null,cssClass:"layoutContainer normalizedGridView logGridView",beanType:"XLOG",sourceLabel:"Host",sourceField:"host",showSource:true,_eventKeys:{},reload:function(store){this.refresh(store)},
formatDateSimple:function(data,format){var momentUnix=moment.unix(data);return momentUnix.format("MMMM Do, h:mm:ss a")},_createPendingEvent:function(message,item,terminatorMessage,id){var _handle=null;var _progressHandle=null;var _progressFailedHandle=null;var thiz=this;var _id=id;item._isInProgress=true;var _onEnd=function(evt){if(!item._isTerminated&&_handle){item.message=item.oriMessage+" : Done";if(evt&&evt.failed===true){item.level="error";item.message=item.oriMessage+" : Failed"}item._isTerminated=
true;_handle.remove();_handle=null;thiz.grid.refresh();if(_progressHandle!=null)_progressHandle.remove()}};_handle=dojo.subscribe(terminatorMessage,lang.hitch(thiz,_onEnd));if(item.showProgress&&item.progressMessage){function ProgressHandler(){this.bytesLoaded=null;this.percentValue=null;this.item=null;this._onProgressFailed=function(data){this.item.level="error";this.item.message=item.oriMessage+" : Failed";this.item._isTerminated=true;if(_handle){_handle.remove();_handle=null}if(_progressHandle!=
null){_progressHandle.remove();_progressHandle=null}thiz.grid.refresh();_progressFailedHandle.remove();_progressFailedHandle=null};this._onProgress=function(data){try{var computableEvent=data.progress;var percentage=null;if(percentage==null){percentage=Math.round(computableEvent.loaded*100/computableEvent.total);this.bytesLoaded=computableEvent.loaded}if(this.percentValue!=percentage){var _newMessage=""+this.item.oriMessage;_newMessage+=" : "+percentage+"%";this.item.message=""+_newMessage;thiz.grid.refresh()}this.percentValue=
percentage;if(this.percentValue>=100){this.item.message=this.item.oriMessage+" : Done";_progressHandle.remove();_progressHandle=null;if(_handle){_handle.remove();_handle=null}this.item._isTerminated=true;thiz.grid.refresh()}}catch(e){console.error("crash in log progress "+e)}}}var progressObject=new ProgressHandler;progressObject.item=item;_progressHandle=dojo.subscribe(item.progressMessage,lang.hitch(progressObject,progressObject._onProgress));if(item.progressFailedMessage)_progressFailedHandle=
dojo.subscribe(item.progressFailedMessage,lang.hitch(progressObject,progressObject._onProgressFailed))}},getMessageFormatter:function(message,item){var _isTerminated=item.terminatorMessage!=null&&!item._isTerminated;if(_isTerminated){if(item.oriMessage==null)item.oriMessage=""+item.message;this._createPendingEvent(message,item,item.terminatorMessage,item.time);return'\x3cspan class\x3d"fa-spinner fa-spin" style\x3d"margin-right: 4px"\x3e\x3c/span\x3e'+message}return message},getColumns:function(){var thiz=
this;var columns={Level:{field:"level",label:"Level",sortable:true,formatter:function(level){switch(level){case "info":return'\x3cspan style\x3d"color:gray"\x3e'+level+"\x3c/span\x3e";case "error":return'\x3cspan style\x3d"color:red"\x3e'+level+"\x3c/span\x3e";case "warning":return'\x3cspan style\x3d"color:orange"\x3e'+level+"\x3c/span\x3e"}return level}},Type:{field:"type",label:"Type",sortable:true},Host:{field:"host",label:"Host",sortable:true},Message:{field:"message",label:"Message",sortable:true,
formatter:function(message,item){return thiz.getMessageFormatter(message,item)},formatter2:function(status){var tpl='\x3cdiv style\x3d"color:${color}"\x3e'+utils.capitalize(status)+"\x3c/div\x3e";return utils.substituteString(tpl,{color:status=="offline"?"red":"green"})}},Time:{field:"time",label:"Time",sortable:true,formatter:function(time){return thiz.formatDateSimple(time/1E3)}},Details:editor({field:"details",label:"Details",sortable:false},RowDetailEditor)};if(!this.showSource)delete columns["Host"];
return columns},createWidgets:function(store){var grid=new (declare([OnDemandGrid,Selection,Keyboard,ColumnHider,ColumnResizer,ColumnReorder]))({store:store,sort:"time",columns:this.getColumns(),cellNavigation:false,deselectOnRefresh:false,rowsPerPage:20},this.containerNode);grid.sort("time");grid.refresh();this.grid=grid;this.onGridCreated(grid);var hider=utils.find(".dgrid-hider-menu",this.domNode,false);domClass.add(hider[0],"ui-widget-content")},onItemClick:function(item){if(!item)this.publish(types.EVENTS.ON_VIEW_SHOW,
{view:this})},startup:function(){this.inherited(arguments);if(this.store)this.createWidgets(this.store)},hasItemActions:function(){return true},getItem:function(){return this.selectedItem},clear:function(){},isLevelEnabled:function(level){if(this.flagWidget)for(var i=0;i<this.flagWidget.checkboxes.length;i++){var obj=this.flagWidget.checkboxes[i];if(obj.value===level)return obj.get("checked")}else return true;return false},update:function(store){this.onLevelChanged(store)},onLevelChanged:function(store){var logItems=
this.store.query({});for(var i=0;i<logItems.length;i++){var item=logItems[i];item.show=this.isLevelEnabled(item.level)}if(store)this.store=store;this.grid.set("store",this.store,{show:true})},createLevelWidget:function(){var thiz=this;var flags=[{value:"info",label:"Info"},{value:"warning",label:"Warning"},{value:"error",label:"Error"}];var flagsWidget=utils.addWidget(FlagsWidget,{value:8,data:flags,lineBreak:false,title:"",single:false,flagClass:"flagItem",style:"display:inline-block;width:auto;",
_onFlagChange:function(){return thiz.onLevelChanged()},isChecked:function(val,itemVal){return true},setValue:function(value){thiz.flags=value},getValue:function(){return 8}},thiz,dojo.doc.createElement("div"),true,"ui-widget-content");flagsWidget.startup();this.flagWidget=flagsWidget;return flagsWidget},createFilterWidget:function(){},getItemActions:function(){var thiz=this.delegate;var self=this;var actions=[];actions.push({title:"Clear",icon:"el-icon-remove-sign",disabled:false,command:"Reload",
place:"last",emit:false,style:"float:left;",handler:function(){thiz.clear(self)}});actions.push({title:"Reload",icon:"el-icon-refresh",disabled:false,command:"Reload",place:"last",emit:false,style:"float:left;",handler:function(){thiz.reload(self)}});var flagsWidget=this.createLevelWidget();actions.push(flagsWidget);return actions}});return logview})},"dijit/form/_FormValueWidget":function(){define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],
function(declare,has,_FormWidget,_FormValueMixin){return declare("dijit.form._FormValueWidget",[_FormWidget,_FormValueMixin],{_layoutHackIE7:function(){if(has("ie")==7){var domNode=this.domNode;var parent=domNode.parentNode;var pingNode=domNode.firstChild||domNode;var origFilter=pingNode.style.filter;var _this=this;while(parent&&parent.clientHeight==0){(function ping(){var disconnectHandle=_this.connect(parent,"onscroll",function(){_this.disconnect(disconnectHandle);pingNode.style.filter=(new Date).getMilliseconds();
_this.defer(function(){pingNode.style.filter=origFilter})})})();parent=parent.parentNode}}}})})},"xide/widgets/Expression":function(){define(["dojo/_base/declare","dojo/_base/lang","xide/widgets/WidgetBase","xide/factory","xide/utils","xide/types","xide/views/CIActionDialog"],function(declare,lang,WidgetBase,factory,utils,types,CIActionDialog){return declare("xide.widgets.Expression",[WidgetBase],{wContentSelectorButton:null,lastUploadedFileName:null,oriPath:null,minHeight:"400px;",value:"",options:null,
templateString:"\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e"+"\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e"+"\x3ctbody\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+"\x3ctd width\x3d'15%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'previewNode'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+
"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button2'\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"+"\x3cdiv data-dojo-attach-point\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'last'\x3e\x3c/div\x3e"+"\x3c/div\x3e",filePathValidator:function(value,constraints){return true},postMixInProperties:function(){this.inherited(arguments);
if(this.userData&&this.userData.title)this.title=this.userData.title;if(this.userData&&this.userData.vertical===true||this.vertical===true)this.templateString="\x3cdiv class\x3d'widgetContainer widgetBorder widgetTable' style\x3d''\x3e"+"\x3ctable border\x3d'0' cellpadding\x3d'5px' width\x3d'100%' \x3e"+"\x3ctbody\x3e"+"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+"\x3ctd width\x3d'100%' class\x3d'widgetTitle'\x3e\x3cspan\x3e\x3cb\x3e${!title}\x3c/b\x3e\x3cspan\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+
"\x3ctr data-dojo-attach-point\x3d'extensionRoot'\x3e"+"\x3ctd width\x3d'100px' class\x3d'widgetValue2' valign\x3d'middle' data-dojo-attach-point\x3d'previewNode'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button0'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button1'\x3e\x3c/td\x3e"+"\x3ctd class\x3d'extension' width\x3d'25px' data-dojo-attach-point\x3d'button2'\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3c/tbody\x3e"+
"\x3c/table\x3e"+"\x3cdiv data-dojo-attach-point\x3d'expander' onclick\x3d'' style\x3d'width:100%;'\x3e\x3c/div\x3e"+"\x3cdiv data-dojo-attach-point\x3d'last'\x3e\x3c/div\x3e"+"\x3c/div\x3e"},onFileSelected:function(path){this.editBox.set("value",path);this.value=path;this.setValue(path)},onSelect:function(){var thiz=this;var _defaultOptions={};if(this.options)lang.mixin(_defaultOptions,this.options);try{var value=utils.toString(this.userData["value"]);var actionDialog=new CIActionDialog({title:"Expression",
style:"width:600px;height:500px;",resizeable:true,delegate:{onOk:function(dlg,data){var expression=utils.getCIInputValueByName(data,"Expression");thiz.userData.changed=true;thiz.userData.active=true;utils.setCIValueByField(thiz.userData,"value",expression);thiz.editBox.set("value",expression)}},cis:[utils.createCI("Expression",29,value,{group:"Expression",delegate:this.userData.delegate})]});actionDialog.show()}catch(e){debugger}},fillTemplate:function(){var thiz=this;var value=utils.toString(this.userData["value"]);
this.editBox=factory.createValidationTextBox(this.previewNode,"","",value,this.filePathValidator,this.delegate,"Not a path!","I need some input");dojo.connect(this.editBox,"onChange",function(item){thiz.userData.changed=true;thiz.userData.active=true;utils.setCIValueByField(thiz.userData,"value",item);factory.publish(types.EVENTS.ON_CI_UPDATE,{owner:thiz.delegate||thiz.owner,ci:thiz.userData,newValue:value,storeItem:this.storeItem},this)});this.selectButton=factory.createButton(this.button0,"el-icon-magic",
"elusiveButton","","",this.onSelect,this)},startup:function(){this.inherited(arguments);this.fillTemplate();this.onReady()}})})},"dojo/errors/RequestError":function(){define(["./create"],function(create){return create("RequestError",function(message,response){this.response=response})})},"dijit/tree/_dndContainer":function(){define("dijit/tree/_dndContainer",["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/touch"],function(aspect,declare,domClass,lang,on,touch){return declare("dijit.tree._dndContainer",
null,{constructor:function(tree,params){this.tree=tree;this.node=tree.domNode;lang.mixin(this,params);this.containerState="";domClass.add(this.node,"dojoDndContainer");this.events=[on(this.node,touch.enter,lang.hitch(this,"onOverEvent")),on(this.node,touch.leave,lang.hitch(this,"onOutEvent")),aspect.after(this.tree,"_onNodeMouseEnter",lang.hitch(this,"onMouseOver"),true),aspect.after(this.tree,"_onNodeMouseLeave",lang.hitch(this,"onMouseOut"),true),on(this.node,"dragstart, selectstart",function(evt){evt.preventDefault()})]},
destroy:function(){var h;while(h=this.events.pop())h.remove();this.node=this.parent=null},onMouseOver:function(widget){this.current=widget},onMouseOut:function(){this.current=null},_changeState:function(type,newState){var prefix="dojoDnd"+type;var state=type.toLowerCase()+"State";domClass.replace(this.node,prefix+newState,prefix+this[state]);this[state]=newState},_addItemClass:function(node,type){domClass.add(node,"dojoDndItem"+type)},_removeItemClass:function(node,type){domClass.remove(node,"dojoDndItem"+
type)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/domReady","dojo/sniff","dojo/Stateful","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(aspect,declare,dom,domAttr,domConstruct,Evented,lang,on,domReady,has,Stateful,
win,winUtils,a11y,registry,dijit){var FocusManager=declare([Stateful,Evented],{curNode:null,activeStack:[],constructor:function(){var check=lang.hitch(this,function(node){if(dom.isDescendant(this.curNode,node))this.set("curNode",null);if(dom.isDescendant(this.prevNode,node))this.set("prevNode",null)});aspect.before(domConstruct,"empty",check);aspect.before(domConstruct,"destroy",check)},registerIframe:function(iframe){return this.registerWin(iframe.contentWindow,iframe)},registerWin:function(targetWindow,
effectiveNode){var _this=this,body=targetWindow.document&&targetWindow.document.body;if(body){var mdh=on(targetWindow.document,"mousedown, touchstart",function(evt){_this._justMouseDowned=true;setTimeout(function(){_this._justMouseDowned=false},0);if(evt&&evt.target&&evt.target.parentNode==null)return;_this._onTouchNode(effectiveNode||evt.target,"mouse")});var fih=on(body,"focusin",function(evt){if(!evt.target.tagName)return;var tag=evt.target.tagName.toLowerCase();if(tag=="#document"||tag=="body")return;
if(a11y.isTabNavigable(evt.target))_this._onFocusNode(effectiveNode||evt.target);else _this._onTouchNode(effectiveNode||evt.target)});var foh=on(body,"focusout",function(evt){_this._onBlurNode(effectiveNode||evt.target)});return{remove:function(){mdh.remove();fih.remove();foh.remove();mdh=fih=foh=null;body=null}}}},_onBlurNode:function(node){if(this._clearFocusTimer)clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(lang.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",
null)}),0);if(this._justMouseDowned)return;if(this._clearActiveWidgetsTimer)clearTimeout(this._clearActiveWidgetsTimer);this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)},_onTouchNode:function(node,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer}var newStack=[];try{while(node){var popupParent=domAttr.get(node,"dijitPopupParent");if(popupParent)node=
registry.byId(popupParent).domNode;else if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===win.body())break;node=winUtils.get(node.ownerDocument).frameElement}else{var id=node.getAttribute&&node.getAttribute("widgetId"),widget=id&&registry.byId(id);if(widget&&!(by=="mouse"&&widget.get("disabled")))newStack.unshift(id);node=node.parentNode}}}catch(e){}this._setStack(newStack,by)},_onFocusNode:function(node){if(!node)return;if(node.nodeType==9)return;if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);
delete this._clearFocusTimer}this._onTouchNode(node);if(node==this.curNode)return;this.set("prevNode",this.curNode);this.set("curNode",node)},_setStack:function(newStack,by){var oldStack=this.activeStack,lastOldIdx=oldStack.length-1,lastNewIdx=newStack.length-1;if(newStack[lastNewIdx]==oldStack[lastOldIdx])return;this.set("activeStack",newStack);var widget,i;for(i=lastOldIdx;i>=0&&oldStack[i]!=newStack[i];i--){widget=registry.byId(oldStack[i]);if(widget){widget._hasBeenBlurred=true;widget.set("focused",
false);if(widget._focusManager==this)widget._onBlur(by);this.emit("widget-blur",widget,by)}}for(i++;i<=lastNewIdx;i++){widget=registry.byId(newStack[i]);if(widget){widget.set("focused",true);if(widget._focusManager==this)widget._onFocus(by);this.emit("widget-focus",widget,by)}}},focus:function(node){if(node)try{node.focus()}catch(e){}}});var singleton=new FocusManager;domReady(function(){var handle=singleton.registerWin(winUtils.get(document));if(has("ie"))on(window,"unload",function(){if(handle){handle.remove();
handle=null}})});dijit.focus=function(node){singleton.focus(node)};for(var attr in singleton)if(!/^_/.test(attr))dijit.focus[attr]=typeof singleton[attr]=="function"?lang.hitch(singleton,attr):singleton[attr];singleton.watch(function(attr,oldVal,newVal){dijit.focus[attr]=newVal});return singleton})},"url:dijit/form/templates/Spinner.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d"dijitReset dijitButtonNode dijitSpinnerButtonContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitSpinnerButtonInner" type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\tdata-dojo-attach-point\x3d"upArrowNode"\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9650; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/\x3e\x3c/div\n\t\t\x3e\x3c/div\n\t\t\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\tdata-dojo-attach-point\x3d"downArrowNode"\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/\x3e\x3c/div\n\t\t\x3e\x3c/div\n\t\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' data-dojo-attach-point\x3d"textbox,focusNode" type\x3d"${type}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown"\n\t\t\trole\x3d"spinbutton" autocomplete\x3d"off" ${!nameAttrSetting}\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(dojo,has,lang){var mix=lang.mixin,op=Object.prototype,opts=op.toString,xtor=new Function,counter=0,cname="constructor";function err(msg,cls){throw new Error("declare"+(cls?" "+cls:"")+": "+msg);}function c3mro(bases,className){var result=[],roots=[{cls:0,refs:[]}],nameMap={},clsCount=1,l=bases.length,i=0,j,lin,base,top,proto,rec,name,refs;for(;i<l;++i){base=bases[i];if(!base)err("mixin #"+i+" is unknown. Did you use dojo.require to pull it in?",
className);else if(opts.call(base)!="[object Function]")err("mixin #"+i+" is not a callable constructor.",className);lin=base._meta?base._meta.bases:[base];top=0;for(j=lin.length-1;j>=0;--j){proto=lin[j].prototype;if(!proto.hasOwnProperty("declaredClass"))proto.declaredClass="uniqName_"+counter++;name=proto.declaredClass;if(!nameMap.hasOwnProperty(name)){nameMap[name]={count:0,refs:[],cls:lin[j]};++clsCount}rec=nameMap[name];if(top&&top!==rec){rec.refs.push(top);++top.count}top=rec}++top.count;roots[0].refs.push(top)}while(roots.length){top=
roots.pop();result.push(top.cls);--clsCount;while(refs=top.refs,refs.length==1){top=refs[0];if(!top||--top.count){top=0;break}result.push(top.cls);--clsCount}if(top)for(i=0,l=refs.length;i<l;++i){top=refs[i];if(!--top.count)roots.push(top)}}if(clsCount)err("can't build consistent linearization",className);base=bases[0];result[0]=base?base._meta&&base===result[result.length-base._meta.bases.length]?base._meta.bases.length:1:0;return result}function inherited(args,a,f){var name,chains,bases,caller,
meta,base,proto,opf,pos,cache=this._inherited=this._inherited||{};if(typeof args=="string"){name=args;args=a;a=f}f=0;caller=args.callee;if(!caller);name=name||caller.nom;if(!name)err("can't deduce a name to call inherited()",this.declaredClass);meta=this.constructor._meta;bases=meta.bases;pos=cache.p;if(name!=cname){if(cache.c!==caller){pos=0;base=bases[0];meta=base._meta;if(meta.hidden[name]!==caller){chains=meta.chains;if(chains&&typeof chains[name]=="string")err("calling chained method with inherited: "+
name,this.declaredClass);do{meta=base._meta;proto=base.prototype;if(meta&&(proto[name]===caller&&proto.hasOwnProperty(name)||meta.hidden[name]===caller))break}while(base=bases[++pos]);pos=base?pos:-1}}base=bases[++pos];if(base){proto=base.prototype;if(base._meta&&proto.hasOwnProperty(name))f=proto[name];else{opf=op[name];do{proto=base.prototype;f=proto[name];if(f&&(base._meta?proto.hasOwnProperty(name):f!==opf))break}while(base=bases[++pos])}}f=base&&f||op[name]}else{if(cache.c!==caller){pos=0;meta=
bases[0]._meta;if(meta&&meta.ctor!==caller){chains=meta.chains;if(!chains||chains.constructor!=="manual")err("calling chained constructor with inherited",this.declaredClass);while(base=bases[++pos]){meta=base._meta;if(meta&&meta.ctor===caller)break}pos=base?pos:-1}}while(base=bases[++pos]){meta=base._meta;f=meta?meta.ctor:base;if(f)break}f=base&&f}cache.c=f;cache.p=pos;if(f)return a===true?f:f.apply(this,a||args)}function getInherited(name,args){if(typeof name=="string")return this.__inherited(name,
args,true);return this.__inherited(name,true)}function inherited__debug(args,a1,a2){var f=this.getInherited(args,a1);if(f)return f.apply(this,a2||a1||args)}var inheritedImpl=dojo.config.isDebug?inherited__debug:inherited;function isInstanceOf(cls){var bases=this.constructor._meta.bases;for(var i=0,l=bases.length;i<l;++i)if(bases[i]===cls)return true;return this instanceof cls}function mixOwn(target,source){for(var name in source)if(name!=cname&&source.hasOwnProperty(name))target[name]=source[name];
if(has("bug-for-in-skips-shadowed"))for(var extraNames=lang._extraNames,i=extraNames.length;i;){name=extraNames[--i];if(name!=cname&&source.hasOwnProperty(name))target[name]=source[name]}}function safeMixin(target,source){var name,t;for(name in source){t=source[name];if((t!==op[name]||!(name in op))&&name!=cname){if(opts.call(t)=="[object Function]")t.nom=name;target[name]=t}}if(has("bug-for-in-skips-shadowed"))for(var extraNames=lang._extraNames,i=extraNames.length;i;){name=extraNames[--i];t=source[name];
if((t!==op[name]||!(name in op))&&name!=cname){if(opts.call(t)=="[object Function]")t.nom=name;target[name]=t}}return target}function extend(source){declare.safeMixin(this.prototype,source);return this}function createSubclass(mixins){return declare([this].concat(mixins))}function chainedConstructor(bases,ctorSpecial){return function(){var a=arguments,args=a,a0=a[0],f,i,m,l=bases.length,preArgs;if(!(this instanceof a.callee))return applyNew(a);if(ctorSpecial&&(a0&&a0.preamble||this.preamble)){preArgs=
new Array(bases.length);preArgs[0]=a;for(i=0;;){a0=a[0];if(a0){f=a0.preamble;if(f)a=f.apply(this,a)||a}f=bases[i].prototype;f=f.hasOwnProperty("preamble")&&f.preamble;if(f)a=f.apply(this,a)||a;if(++i==l)break;preArgs[i]=a}}for(i=l-1;i>=0;--i){f=bases[i];m=f._meta;f=m?m.ctor:f;if(f)f.apply(this,preArgs?preArgs[i]:a)}f=this.postscript;if(f)f.apply(this,args)}}function singleConstructor(ctor,ctorSpecial){return function(){var a=arguments,t=a,a0=a[0],f;if(!(this instanceof a.callee))return applyNew(a);
if(ctorSpecial){if(a0){f=a0.preamble;if(f)t=f.apply(this,t)||t}f=this.preamble;if(f)f.apply(this,t)}if(ctor)ctor.apply(this,a);f=this.postscript;if(f)f.apply(this,a)}}function simpleConstructor(bases){return function(){var a=arguments,i=0,f,m;if(!(this instanceof a.callee))return applyNew(a);for(;f=bases[i];++i){m=f._meta;f=m?m.ctor:f;if(f){f.apply(this,a);break}}f=this.postscript;if(f)f.apply(this,a)}}function chain(name,bases,reversed){return function(){var b,m,f,i=0,step=1;if(reversed){i=bases.length-
1;step=-1}for(;b=bases[i];i+=step){m=b._meta;f=(m?m.hidden:b.prototype)[name];if(f)f.apply(this,arguments)}}}function forceNew(ctor){xtor.prototype=ctor.prototype;var t=new xtor;xtor.prototype=null;return t}function applyNew(args){var ctor=args.callee,t=forceNew(ctor);ctor.apply(t,args);return t}function declare(className,superclass,props){if(typeof className!="string"){props=superclass;superclass=className;className=""}props=props||{};var proto,i,t,ctor,name,bases,chains,mixins=1,parents=superclass;
if(opts.call(superclass)=="[object Array]"){bases=c3mro(superclass,className);t=bases[0];mixins=bases.length-t;superclass=bases[mixins]}else{bases=[0];if(superclass)if(opts.call(superclass)=="[object Function]"){t=superclass._meta;bases=bases.concat(t?t.bases:superclass)}else err("base class is not a callable constructor.",className);else if(superclass!==null)err("unknown base class. Did you use dojo.require to pull it in?",className)}if(superclass)for(i=mixins-1;;--i){proto=forceNew(superclass);
if(!i)break;t=bases[i];(t._meta?mixOwn:mix)(proto,t.prototype);ctor=new Function;ctor.superclass=superclass;ctor.prototype=proto;superclass=proto.constructor=ctor}else proto={};declare.safeMixin(proto,props);t=props.constructor;if(t!==op.constructor){t.nom=cname;proto.constructor=t}for(i=mixins-1;i;--i){t=bases[i]._meta;if(t&&t.chains)chains=mix(chains||{},t.chains)}if(proto["-chains-"])chains=mix(chains||{},proto["-chains-"]);t=!chains||!chains.hasOwnProperty(cname);bases[0]=ctor=chains&&chains.constructor===
"manual"?simpleConstructor(bases):bases.length==1?singleConstructor(props.constructor,t):chainedConstructor(bases,t);ctor._meta={bases:bases,hidden:props,chains:chains,parents:parents,ctor:props.constructor};ctor.superclass=superclass&&superclass.prototype;ctor.extend=extend;ctor.createSubclass=createSubclass;ctor.prototype=proto;proto.constructor=ctor;proto.getInherited=getInherited;proto.isInstanceOf=isInstanceOf;proto.inherited=inheritedImpl;proto.__inherited=inherited;if(className){proto.declaredClass=
className;lang.setObject(className,ctor)}if(chains)for(name in chains)if(proto[name]&&typeof chains[name]=="string"&&name!=cname){t=proto[name]=chain(name,bases,chains[name]==="after");t.nom=name}return ctor}dojo.safeMixin=declare.safeMixin=safeMixin;dojo.declare=declare;return declare})},"dojo/request/xhr":function(){define("dojo/request/xhr",["../errors/RequestError","./watch","./handlers","./util","../has"],function(RequestError,watch,handlers,util,has){has.add("native-xhr",function(){return typeof XMLHttpRequest!==
"undefined"});has.add("dojo-force-activex-xhr",function(){return has("activex")&&!document.addEventListener&&window.location.protocol==="file:"});has.add("native-xhr2",function(){if(!has("native-xhr"))return;var x=new XMLHttpRequest;return typeof x["addEventListener"]!=="undefined"&&(typeof opera==="undefined"||typeof x["upload"]!=="undefined")});has.add("native-formdata",function(){return typeof FormData==="function"});function handleResponse(response,error){var _xhr=response.xhr;response.status=
response.xhr.status;response.text=_xhr.responseText;if(response.options.handleAs==="xml")response.data=_xhr.responseXML;if(!error)try{handlers(response)}catch(e){error=e}if(error)this.reject(error);else if(util.checkStatus(_xhr.status))this.resolve(response);else{error=new RequestError("Unable to load "+response.url+" status: "+_xhr.status,response);this.reject(error)}}var isValid,isReady,addListeners,cancel;if(has("native-xhr2")){isValid=function(response){return!this.isFulfilled()};cancel=function(dfd,
response){response.xhr.abort()};addListeners=function(_xhr,dfd,response){function onLoad(evt){dfd.handleResponse(response)}function onError(evt){var _xhr=evt.target;var error=new RequestError("Unable to load "+response.url+" status: "+_xhr.status,response);dfd.handleResponse(response,error)}function onProgress(evt){if(evt.lengthComputable){response.loaded=evt.loaded;response.total=evt.total;dfd.progress(response)}}_xhr.addEventListener("load",onLoad,false);_xhr.addEventListener("error",onError,false);
_xhr.addEventListener("progress",onProgress,false);return function(){_xhr.removeEventListener("load",onLoad,false);_xhr.removeEventListener("error",onError,false);_xhr.removeEventListener("progress",onProgress,false)}}}else{isValid=function(response){return response.xhr.readyState};isReady=function(response){return 4===response.xhr.readyState};cancel=function(dfd,response){var xhr=response.xhr;var _at=typeof xhr.abort;if(_at==="function"||_at==="object"||_at==="unknown")xhr.abort()}}var undefined,
defaultOptions={data:null,query:null,sync:false,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}};function xhr(url,options,returnDeferred){var response=util.parseArgs(url,util.deepCreate(defaultOptions,options),has("native-formdata")&&options&&options.data&&options.data instanceof FormData);url=response.url;options=response.options;var remover,last=function(){remover&&remover()};var dfd=util.deferred(response,cancel,isValid,isReady,handleResponse,last);var _xhr=response.xhr=
xhr._create();if(!_xhr){dfd.cancel(new RequestError("XHR was not created"));return returnDeferred?dfd:dfd.promise}response.getHeader=function(headerName){return this.xhr.getResponseHeader(headerName)};if(addListeners)remover=addListeners(_xhr,dfd,response);var data=options.data,async=!options.sync,method=options.method;try{_xhr.open(method,url,async,options.user||undefined,options.password||undefined);if(options.withCredentials)_xhr.withCredentials=options.withCredentials;var headers=options.headers,
contentType;if(headers)for(var hdr in headers)if(hdr.toLowerCase()==="content-type")contentType=headers[hdr];else if(headers[hdr])_xhr.setRequestHeader(hdr,headers[hdr]);if(contentType&&contentType!==false)_xhr.setRequestHeader("Content-Type",contentType);if(!headers||!("X-Requested-With"in headers))_xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");if(util.notify)util.notify.emit("send",response,dfd.promise.cancel);_xhr.send(data)}catch(e){dfd.reject(e)}watch(dfd);_xhr=null;return returnDeferred?
dfd:dfd.promise}xhr._create=function(){throw new Error("XMLHTTP not available");};if(has("native-xhr")&&!has("dojo-force-activex-xhr"))xhr._create=function(){return new XMLHttpRequest};else if(has("activex"))try{new ActiveXObject("Msxml2.XMLHTTP");xhr._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP");xhr._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(e){}}util.addCommonMethods(xhr);return xhr})},"dojo/domReady":function(){define(["./has"],
function(has){var global=this,doc=document,readyStates={"loaded":1,"complete":1},fixReadyState=typeof doc.readyState!="string",ready=!!readyStates[doc.readyState];if(fixReadyState)doc.readyState="loading";if(!ready){var readyQ=[],tests=[],detectReady=function(evt){evt=evt||global.event;if(ready||evt.type=="readystatechange"&&!readyStates[doc.readyState])return;ready=1;if(fixReadyState)doc.readyState="complete";while(readyQ.length)readyQ.shift()(doc)},on=function(node,event){node.addEventListener(event,
detectReady,false);readyQ.push(function(){node.removeEventListener(event,detectReady,false)})};if(!has("dom-addeventlistener")){on=function(node,event){event="on"+event;node.attachEvent(event,detectReady);readyQ.push(function(){node.detachEvent(event,detectReady)})};var div=doc.createElement("div");try{if(div.doScroll&&global.frameElement===null)tests.push(function(){try{div.doScroll("left");return 1}catch(e){}})}catch(e){}}on(doc,"DOMContentLoaded");on(global,"load");if("onreadystatechange"in doc)on(doc,
"readystatechange");else if(!fixReadyState)tests.push(function(){return readyStates[doc.readyState]});if(tests.length){var poller=function(){if(ready)return;var i=tests.length;while(i--)if(tests[i]()){detectReady("poller");return}setTimeout(poller,30)};poller()}}function domReady(callback){if(ready)callback(doc);else readyQ.push(callback)}domReady.load=function(id,req,load){domReady(load)};return domReady})},"xblox/model/Targeted":function(){define("xblox/model/Targeted",["dojo/_base/declare","./Referenced"],
function(declare,Referenced){return declare("xblox.model.Targeted",[Referenced],{})})},"dojo/text":function(){define(["./_base/kernel","require","./has","./_base/xhr"],function(dojo,require,has,xhr){var getText;if(1)getText=function(url,sync,load){xhr("GET",{url:url,sync:!!sync,load:load,headers:dojo.config.textPluginHeaders||{}})};else if(require.getText)getText=require.getText;else console.error("dojo/text plugin failed to load because loader does not support getText");var theCache={},strip=function(text){if(text){text=
text.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var matches=text.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(matches)text=matches[1]}else text="";return text},notFound={},pending={};dojo.cache=function(module,url,value){var key;if(typeof module=="string")if(/\//.test(module)){key=module;value=url}else key=require.toUrl(module.replace(/\./g,"/")+(url?"/"+url:""));else{key=module+"";value=url}var val=value!=undefined&&typeof value!="string"?value.value:value,sanitize=
value&&value.sanitize;if(typeof val=="string"){theCache[key]=val;return sanitize?strip(val):val}else if(val===null){delete theCache[key];return null}else{if(!(key in theCache))getText(key,true,function(text){theCache[key]=text});return sanitize?strip(theCache[key]):theCache[key]}};return{dynamic:true,normalize:function(id,toAbsMid){var parts=id.split("!"),url=parts[0];return(/^\./.test(url)?toAbsMid(url):url)+(parts[1]?"!"+parts[1]:"")},load:function(id,require,load){var parts=id.split("!"),stripFlag=
parts.length>1,absMid=parts[0],url=require.toUrl(parts[0]),requireCacheUrl="url:"+url,text=notFound,finish=function(text){load(stripFlag?strip(text):text)};if(absMid in theCache)text=theCache[absMid];else if(requireCacheUrl in require.cache)text=require.cache[requireCacheUrl];else if(url in theCache)text=theCache[url];if(text===notFound)if(pending[url])pending[url].push(finish);else{var pendingList=pending[url]=[finish];getText(url,!require.async,function(text){theCache[absMid]=theCache[url]=text;
for(var i=0;i<pendingList.length;)pendingList[i++](text);delete pending[url]})}else finish(text)}}})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(declare,domClass,Source){return declare("dojo.dnd.Target",Source,{constructor:function(){this.isSource=false;domClass.remove(this.node,"dojoDndSource")}})})},"dojo/i18n":function(){define(["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./_base/xhr","./json","module"],function(dojo,
require,has,array,config,lang,xhr,json,module){has.add("dojo-preload-i18n-Api",1);1||has.add("dojo-v1x-i18n-Api",1);var thisModule=dojo.i18n={},nlsRe=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,getAvailableLocales=function(root,locale,bundlePath,bundleName){for(var result=[bundlePath+bundleName],localeParts=locale.split("-"),current="",i=0;i<localeParts.length;i++){current+=(current?"-":"")+localeParts[i];if(!root||root[current])result.push(bundlePath+current+"/"+bundleName)}return result},cache={},
getBundleName=function(moduleName,bundleName,locale){locale=locale?locale.toLowerCase():dojo.locale;moduleName=moduleName.replace(/\./g,"/");bundleName=bundleName.replace(/\./g,"/");return/root/i.test(locale)?moduleName+"/nls/"+bundleName:moduleName+"/nls/"+locale+"/"+bundleName},getL10nName=dojo.getL10nName=function(moduleName,bundleName,locale){return moduleName=module.id+"!"+getBundleName(moduleName,bundleName,locale)},doLoad=function(require,bundlePathAndName,bundlePath,bundleName,locale,load){require([bundlePathAndName],
function(root){var current=lang.clone(root.root),availableLocales=getAvailableLocales(!root._v1x&&root,locale,bundlePath,bundleName);require(availableLocales,function(){for(var i=1;i<availableLocales.length;i++)current=lang.mixin(lang.clone(current),arguments[i]);var target=bundlePathAndName+"/"+locale;cache[target]=current;load()})})},normalize=function(id,toAbsMid){return/^\./.test(id)?toAbsMid(id):id},getLocalesToLoad=function(targetLocale){var list=config.extraLocale||[];list=lang.isArray(list)?
list:[list];list.push(targetLocale);return list},load=function(id,require,load){if(has("dojo-preload-i18n-Api")){var split=id.split("*"),preloadDemand=split[1]=="preload";if(preloadDemand){if(!cache[id]){cache[id]=1;preloadL10n(split[2],json.parse(split[3]),1,require)}load(1)}if(preloadDemand||waitForPreloads(id,require,load))return}var match=nlsRe.exec(id),bundlePath=match[1]+"/",bundleName=match[5]||match[4],bundlePathAndName=bundlePath+bundleName,localeSpecified=match[5]&&match[4],targetLocale=
localeSpecified||dojo.locale,loadTarget=bundlePathAndName+"/"+targetLocale,loadList=localeSpecified?[targetLocale]:getLocalesToLoad(targetLocale),remaining=loadList.length,finish=function(){if(!--remaining)load(lang.delegate(cache[loadTarget]))};array.forEach(loadList,function(locale){var target=bundlePathAndName+"/"+locale;if(has("dojo-preload-i18n-Api"))checkForLegacyModules(target);if(!cache[target])doLoad(require,bundlePathAndName,bundlePath,bundleName,locale,finish);else finish()})};if(has("dojo-unit-tests"))var unitTests=
thisModule.unitTests=[];if(has("dojo-preload-i18n-Api")||1)var normalizeLocale=thisModule.normalizeLocale=function(locale){var result=locale?locale.toLowerCase():dojo.locale;return result=="root"?"ROOT":result},isXd=function(mid,contextRequire){return 0&&1?contextRequire.isXdUrl(require.toUrl(mid+".js")):true},preloading=0,preloadWaitQueue=[],preloadL10n=thisModule._preloadLocalizations=function(bundlePrefix,localesGenerated,guaranteedAmdFormat,contextRequire){contextRequire=contextRequire||require;
function doRequire(mid,callback){if(isXd(mid,contextRequire)||guaranteedAmdFormat)contextRequire([mid],callback);else syncRequire([mid],callback,contextRequire)}function forEachLocale(locale,func){var parts=locale.split("-");while(parts.length){if(func(parts.join("-")))return;parts.pop()}func("ROOT")}function preload(locale){locale=normalizeLocale(locale);forEachLocale(locale,function(loc){if(array.indexOf(localesGenerated,loc)>=0){var mid=bundlePrefix.replace(/\./g,"/")+"_"+loc;preloading++;doRequire(mid,
function(rollup){for(var p in rollup)cache[require.toAbsMid(p)+"/"+loc]=rollup[p];--preloading;while(!preloading&&preloadWaitQueue.length)load.apply(null,preloadWaitQueue.shift())});return true}return false})}preload();array.forEach(dojo.config.extraLocale,preload)},waitForPreloads=function(id,require,load){if(preloading)preloadWaitQueue.push([id,require,load]);return preloading},checkForLegacyModules=function(){};if(1){var amdValue={},evalBundle=new Function("__bundle","__checkForLegacyModules",
"__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},"+"\t   require \x3d function(){define.called \x3d 1;};"+"try{"+"define.called \x3d 0;"+"eval(__bundle);"+"if(define.called\x3d\x3d1)"+"return __amdValue;"+"if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))"+"return __checkForLegacyModules;"+"}catch(e){}"+"try{"+"return eval('('+__bundle+')');"+"}catch(e){"+"return e;"+"}"),syncRequire=function(deps,callback,require){var results=
[];array.forEach(deps,function(mid){var url=require.toUrl(mid+".js");function load(text){var result=evalBundle(text,checkForLegacyModules,mid,amdValue);if(result===amdValue)results.push(cache[url]=amdValue.result);else{if(result instanceof Error){console.error("failed to evaluate i18n bundle; url\x3d"+url,result);result={}}results.push(cache[url]=/nls\/[^\/]+\/[^\/]+$/.test(url)?result:{root:result,_v1x:1})}}if(cache[url])results.push(cache[url]);else{var bundle=require.syncLoadNls(mid);if(bundle)results.push(bundle);
else if(!xhr)try{require.getText(url,true,load)}catch(e){results.push(cache[url]={})}else xhr.get({url:url,sync:true,load:load,error:function(){results.push(cache[url]={})}})}});callback&&callback.apply(null,results)};checkForLegacyModules=function(target){for(var result,names=target.split("/"),object=dojo.global[names[0]],i=1;object&&i<names.length-1;object=object[names[i++]]);if(object){result=object[names[i]];if(!result)result=object[names[i].replace(/-/g,"_")];if(result)cache[target]=result}return result};
thisModule.getLocalization=function(moduleName,bundleName,locale){var result,l10nName=getBundleName(moduleName,bundleName,locale);load(l10nName,!isXd(l10nName,require)?function(deps,callback){syncRequire(deps,callback,require)}:require,function(result_){result=result_});return result};if(has("dojo-unit-tests"))unitTests.push(function(doh){doh.register("tests.i18n.unit",function(t){var check;check=evalBundle("{prop:1}",checkForLegacyModules,"nonsense",amdValue);t.is({prop:1},check);t.is(undefined,
check[1]);check=evalBundle("({prop:1})",checkForLegacyModules,"nonsense",amdValue);t.is({prop:1},check);t.is(undefined,check[1]);check=evalBundle("{'prop-x':1}",checkForLegacyModules,"nonsense",amdValue);t.is({"prop-x":1},check);t.is(undefined,check[1]);check=evalBundle("({'prop-x':1})",checkForLegacyModules,"nonsense",amdValue);t.is({"prop-x":1},check);t.is(undefined,check[1]);check=evalBundle("define({'prop-x':1})",checkForLegacyModules,"nonsense",amdValue);t.is(amdValue,check);t.is({"prop-x":1},
amdValue.result);check=evalBundle("define('some/module', {'prop-x':1})",checkForLegacyModules,"nonsense",amdValue);t.is(amdValue,check);t.is({"prop-x":1},amdValue.result);check=evalBundle("this is total nonsense and should throw an error",checkForLegacyModules,"nonsense",amdValue);t.is(check instanceof Error,true)})})}return lang.mixin(thisModule,{dynamic:true,normalize:normalize,load:load,cache:cache})})},"xide/widgets/_StyleMixin":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang",
"dojo/dom-style","dojo/dom-attr","xide/utils"],function(declare,array,lang,domStyle,domAttr,utils){return declare("xide.widgets._StyleMixin",null,{doStyleMixin:function(styles){if(styles)for(var i=0;i<styles.length;i++){var _style=styles[i];var nodes=utils.find(_style.selector,this.domNode,false);if(nodes&&nodes.length>0)for(var j=0;j<nodes.length;j++){var _styleAttr=domAttr.get(nodes[j],"style")||"";_styleAttr+=";";_styleAttr+=_style.value;domAttr.set(nodes[j],"style",_styleAttr)}}},setStyleEx:function(nodes,
styleMixin,op){if(nodes&&styleMixin)for(var i=0;i<nodes.length;i++)domStyle[op||"set"](nodes[i],styleMixin)},setStyle:function(nodeQuery,cssClasses,startNode){var result=[];if(lang.isArray(startNode)){for(var i=0;i<startNode.length;i++){this.setStyle(nodeQuery,cssClasses,startNode[i]);result.push(startNode[i])}return result}else{var nodes=utils.find(nodeQuery,startNode||this.domNode,false);if(nodes&&nodes.length>0)this.setStyleEx(nodes,cssClasses);return nodes}}})})},"xide/manager/WorkflowManager":function(){define(["dojo/_base/declare",
"xide/widgets/TemplatedWidgetBase","xfile/types","xide/manager/ManagerBase"],function(declare,TemplatedWidgetBase,types,ManagerBase){return declare("xide.manager.WorkflowManager",[ManagerBase,TemplatedWidgetBase],{dataSourceView:null,runSettingsWidget:null,consoleWidget:null,connectionView:null,runSettingsView:null,templateString:"\x3cdiv\x3e\x3c/div\x3e",rootPrefix:null,editors:null,getRootPrefix:function(){return this.rootPrefix},repaint:function(){var winSize=dojo.window.getBox();var mainContainer=
dijit.registry.byId("main");if(mainContainer){mainContainer.resize();setTimeout(function(){mainContainer.resize()},300)}},onRegisterEditor:function(eventData){this.editors.push(eventData.content)},initWidgets:function(){this.editors=[];factory.subscribe(types.EVENTS.REGISTER_EDITOR,this.onRegisterEditor,this);var thiz=this;var resizeCB=function(){thiz.repaint()};dojo.connect(window,dojo.global.onorientationchange!==undefined?"onorientationchange":"onresize",this,function(){setTimeout(function(){resizeCB()},
1E3)});setTimeout(function(){resizeCB()},100)}})})},"cbtree/data/FileStore":function(){define("cbtree/data/FileStore",["dojo/_base/array","dojo/_base/declare","dojo/_base/json","dojo/_base/lang","dojo/_base/window","dojo/_base/xhr","dojo/_base/Deferred","dojo/Evented","./util/filter","./util/sorter","dojo/store/util/QueryResults","dojo/store/util/SimpleQueryEngine","xide/types","xide/mixins/EventedMixin","xide/manager/ServerActionBase","xide/factory"],function(array,declare,json,lang,window,xhr,Deferred,
Evented,filterUtil,sorter,QueryResults,SimpleQueryEngine,types,EventedMixin,ServerActionBase,factory){var C_STORE_REF_PROP="_S";var C_STORE_ROOT="_SR";var C_PARENT_REF="_PRM";var C_ITEM_EXPANDED="_EX";var C_CHILDREN_ATTR="children";var C_PATH_ATTR="path";var FileStore=declare([Evented,ServerActionBase,EventedMixin],{constructor:function(args){this._features={"dojo.data.api.Read":true,"dojo.data.api.Write":true,"dojo.data.api.Identity":true,"dojo.data.api.Notification":true};this._loadInProgress=false;
this._loadFinished=false;this._closePending=false;this._requestQueue=[];this._authToken=null;this._itemsByIdentity={};this._allFileItems=[];this._privateAttrs=[C_STORE_REF_PROP,C_PARENT_REF,C_ITEM_EXPANDED,C_STORE_ROOT];this._readOnlyAttrs=["size","modified","directory","icon",C_CHILDREN_ATTR,C_PATH_ATTR];this._rootDir=null;this._rootId=".";for(var prop in args)this.set(prop,args[prop])},authToken:null,basePath:".",cache:false,clearOnClose:false,failOk:false,options:{includedFileExtensions:["php"],
excludedFileExtensions:["*"]},url:"",urlPreventCache:true,moduleName:"cbTree/store/FileStore",_addIconClass:false,_didInit:false,_labelAttr:"name",_validated:false,queryEngine:SimpleQueryEngine,defaultQueryOptions:null,singleton:true,isNew:function(){return!this._didInit},remove:function(id){},put:function(id){},get:function(id){if(id){var storeItem=this._getItemByIdentity(id);if(storeItem)return storeItem}return null},queryEx:function(query,options){if(query.path)this.queryEngine({path:query.path})},
getItem:function(path,recursive,readyCB){var item=this.getItemByPath(null,path);if(item&&this.isItemLoaded(item))return readyCB(item);else if(recursive){var thiz=this;var partsToLoad=[];var pathParts=path.split("/");0&&console.log("get item : ",pathParts);var ready=null;var _loadNext=null;var _getItem=function(_path,ready){0&&console.log("try to item "+_path);var _child=thiz.getItemByPath(null,_path);if(_child)if(thiz.isItemLoaded(_child))ready(_child);else thiz.loadItem({item:_child,onItem:function(item){ready(_child)},
onError:function(){},onInProgress:function(){setTimeout(function(){_loadNext()},100)}});else{var _l=thiz.getItemByPath(null,_path);if(_l){ready(_l);return}setTimeout(function(){var _l=thiz.getItemByPath(null,_path);if(_l)ready(_l);else console.error("no child to proceed in path "+_path,thiz)},100)}};_loadNext=function(){var finish=true;for(var i=0;i<partsToLoad.length;i++)if(partsToLoad[i].item==null){_getItem(partsToLoad[i].path,ready);finish=false;break}if(finish&&readyCB){var finalItem=thiz.getItem(path,
true,readyCB);if(finalItem)readyCB(finalItem)}else;};ready=function(item){var found=false;var i=0;for(i=0;i<partsToLoad.length;i++)if(partsToLoad[i].path==item.path){partsToLoad[i].item=item;found=true;break}if(found)setTimeout(function(){_loadNext()},10)};var itemStr="./";for(var i=0;i<pathParts.length;i++){if(pathParts[i]==".")continue;itemStr+=pathParts[i];partsToLoad.push({path:itemStr,item:null});if(pathParts.length>0)itemStr+="/"}_loadNext()}},getItemByPath:function(items,path){items=items||
this._allFileItems;for(var i=0;i<items.length;i++){var item=items[i];if(item.path==path)return item}return null},cleanItems:function(items){for(var i=0;i<items.length;i++){var item=items[i];if(item.isBack===true)item.isBack=false;if(item.prevName!=null)item.name=item.prevName}return items},_onStoreResynced:function(){var thiz=this;factory.publish(types.EVENTS.STORE_REFRESHED,{store:thiz},thiz)},_resyncStoreEx:function(item){var thiz=this;var request={item:item,forceLoad:true,onItem:function(){thiz._onStoreResynced()}};
this.loadItem(request)},storeChanged:function(data){var path=data.dst.path?data.dst.path:data.dst;if(path=="/"||path=="./")path=".";var _s=this.getItemByPath(this._allFileItems,path);if(!_s){path=""+path.replace("./","");_s=this.getItemByPath(this._allFileItems,path)}if(_s)this._resyncStoreEx(_s);else console.error("bad! had no parent item to sync store!!")},initStore:function(){this.init();factory.subscribe(types.EVENTS.STORE_CHANGED,this.storeChanged,this)},extractDirectoriesOnly:function(items){var res=
[];for(var i=0;i<items.length;i++)if(items[i].directory!=null&&items[i].directory===true)res.push(items[i]);return res},query2:function(query,options){var res=null;if(options&&options.sort==null&&this.defaultQueryOptions)options=this.defaultQueryOptions;var _res=null;var thiz=this;this.fetchEx({scope:this,query:{path:query.path||"./"},queryOptions:options,onComplete:function(items){var path=query.path||"./";if(options.single!=null&&options.single===true&&items&&items.length==1)_res=items[0];else if(items&&
items.length==1&&items[0].children&&items[0].children.length==0)_res=items[0];else if(items&&items.length==1&&items[0].children){_res=items[0].children;if(query.directory===true)_res=thiz.extractDirectoriesOnly(_res);var _sort=options.sort;if(_res.length&&_sort){var sortList=new sorter(_sort);_res.sort(sortList.sortFunction())}}}});var result=_res||this._allFileItems;if(this.defaultQueryOptions||options.sort){var _sort=options.sort||this.defaultQueryOptions.sort;if(result.length&&_sort){var sortList=
new sorter(_sort);result.sort(sortList.sortFunction())}}if(result!=null)result=this.cleanItems(result);return result},queryInternal:function(query,options){var res=null;if(options&&options.sort==null&&this.defaultQueryOptions)options=this.defaultQueryOptions;if(!options)options={};var _res=null;var thiz=this;this.fetchEx({scope:this,query:{path:query.path||"./"},queryOptions:options,onComplete:function(items){var path=query.path||"./";if(options.single!=null&&options.single===true&&items&&items.length==
1)_res=items[0];else if(items&&items.length==1&&items[0].children&&items[0].children.length==0)_res=items[0];else if(items&&items.length==1&&items[0].children){_res=items[0].children;if(query.directory===true)_res=thiz.extractDirectoriesOnly(_res);var _sort=options.sort;if(_res.length&&_sort){var sortList=new sorter(_sort);_res.sort(sortList.sortFunction())}}}});var result=_res||this._allFileItems;if(options&&(this.defaultQueryOptions||options.sort)){var _sort=options.sort||this.defaultQueryOptions.sort;
if(result.length&&_sort){var sortList=new sorter(_sort);result.sort(sortList.sortFunction())}}if(result!=null)result=this.cleanItems(result);return result},query:function(query,options){var thiz=this;var a=thiz.queryInternal(query,options);return a},_assertIsItem:function(item){if(!this.isItem(item))var test=this.isItem(item)},_assertIsAttribute:function(attribute,funcName){if(typeof attribute!=="string")throw new Error(this.moduleName+"::"+funcName+"(): Invalid attribute argument.");},_assertSupport:function(name){throw new Error(this.moduleName+
"::"+name+"(): Function not supported on a File Store.");},_containsValue:function(item,attribute,value,regexp){if(typeof item[attribute]!=="undefined")return array.some(this.getValues(item,attribute),function(possibleValue){if(possibleValue!==null&&!lang.isObject(possibleValue)&&regexp){if(possibleValue.toString().match(regexp))return true}else if(value===possibleValue)return true});else return value===false||value===undefined},_deleteFromStore:function(item,onSetCall){var identity=item[C_PATH_ATTR];
var parent=this.getValue(item,C_PARENT_REF);var siblings=this.getValues(parent,C_CHILDREN_ATTR);var delItems=[];if(item.directory){var children=this.getValues(item,C_CHILDREN_ATTR);var delChild;var i;for(i=0;i<children.length;i++){delChild=this._deleteFromStore(children[i],false);delItems=delItems.concat(delChild)}item[C_ITEM_EXPANDED]=false}this._removeArrayElement(this._allFileItems,item);this._removeArrayElement(siblings,item);delete this._itemsByIdentity[identity];item[C_STORE_REF_PROP]=null;
item["deleted"]=true;delItems.push(item);this._setValues(parent,C_CHILDREN_ATTR,siblings,onSetCall);this.onDelete(item);return delItems},_fetchFinal:function(requestArgs,arrayOfItems){var scope=requestArgs.scope||window.global,self=this,items=[],count=0;function filterItems(requestArgs,arrayOfItems){var queryOptions=requestArgs.queryOptions||{},ignoreCase=false,query=requestArgs.query||null,items=[],i;if(arrayOfItems){if(query){var regexpList={},match,fileItem,key,value;for(key in query){value=query[key];
if(typeof value==="string")regexpList[key]=filterUtil.patternToRegExp(value,ignoreCase);else if(value instanceof RegExp)regexpList[key]=value}for(i=0;i<arrayOfItems.length;++i){fileItem=arrayOfItems[i];match=true;for(key in query){value=query[key];if(!self._containsValue(fileItem,key,value,regexpList[key])){match=false;break}}if(match)items.push(fileItem)}}else items=arrayOfItems.slice(0);var _sort=requestArgs.sort||queryOptions.sort;if(items.length&&_sort){var sortList=new sorter(_sort);items.sort(sortList.sortFunction())}var start=
requestArgs.start?requestArgs.start:0;var count=requestArgs.count&&isFinite(requestArgs.count)?requestArgs.count:items.length;if(start||count!==items.length)items=items.slice(start,start+count);return items}return null}requestArgs.abort=function(){this.aborted=true};requestArgs.store=this;if(requestArgs.aborted!==true){items=filterItems(requestArgs,arrayOfItems);count=items?items.length:-1;if(requestArgs.onBegin)requestArgs.onBegin.call(scope,count,requestArgs);if(requestArgs.onItem&&count>0)for(i=
0;i<count&&requestArgs.aborted!==true;i++)requestArgs.onItem.call(scope,items[i],requestArgs);if(requestArgs.onComplete)if(requestArgs.onItem||requestArgs.aborted||count<0)requestArgs.onComplete.call(scope,null,requestArgs);else requestArgs.onComplete.call(scope,items,requestArgs)}if(requestArgs.onAbort&&requestArgs.aborted)requestArgs.onAbort.call(scope,requestArgs)},_getItemsArray:function(queryOptions){if(queryOptions&&queryOptions.deep)return this._allFileItems;return this._rootDir[C_CHILDREN_ATTR]},
_getItemByIdentity:function(identity){var item=null;if(this._itemsByIdentity)if(Object.hasOwnProperty.call(this._itemsByIdentity,identity))item=this._itemsByIdentity[identity];return item},_handleQueuedRequest:function(){var delayedFunc,fData;while(this._requestQueue.length>0&&!this._loadInProgress){fData=this._requestQueue.shift();delayedFunc=fData.func;delayedFunc.call(fData.scope,fData.args)}},_isPrivateAttr:function(attr){var i;for(i in this._privateAttrs)if(attr==this._privateAttrs[i])return true;
return false},_isReadOnlyAttr:function(attr){var i;for(i in this._readOnlyAttrs)if(attr==this._readOnlyAttrs[i])return true;return false},_queueRequest:function(requestObj){if(!this._closePending)this._requestQueue.push(requestObj);else{var requestArgs=requestObj.args;requestArgs.closePending=true;this._fetchFinal(requestArgs,null)}},_removeArrayElement:function(arrayOfItems,element){var index=array.indexOf(arrayOfItems,element);if(index!=-1){arrayOfItems.splice(index,1);return true}return false},
_requestToArgs:function(requestType,request){var reqParams={},xhrArgs=null,sync=false;if(this.basePath)reqParams.basePath=this.basePath;if(request.path)reqParams.path=request.path;else reqParams.path=".";if(this.authToken)reqParams.authToken=json.toJson(this.authToken);if(request.sync)sync=request.sync;switch(requestType){case "DELETE":break;case "GET":if(request.queryOptions)reqParams.queryOptions=json.toJson(request.queryOptions);if(this.options&&this.options.length)reqParams.options=json.toJson(this.options);
break;case "POST":if(request.newValue)reqParams.newValue=request.newValue;break}xhrArgs={url:this.url,handleAs:"json",content:reqParams,preventCache:this.urlPreventCache,handle:function(result,ioArgs){this.status=ioArgs.xhr.status},failOk:this.failOk,status:200,sync:sync};return xhrArgs},_requestToArgsEx:function(requestType,request){var reqParams={},xhrArgs=null,sync=false;if(this.basePath)reqParams.mount=this.basePath;if(request.path)reqParams.path=request.path;if(this.authToken)reqParams.authToken=
json.toJson(this.authToken);if(request.sync)sync=request.sync;switch(requestType){case "DELETE":break;case "GET":if(request.queryOptions)reqParams.queryOptions=json.toJson(request.queryOptions);if(this.options&&this.options.length)reqParams.options=json.toJson(this.options);break;case "POST":if(request.newValue)reqParams.newValue=request.newValue;break}xhrArgs={url:this.url,handleAs:"json",content:reqParams,preventCache:this.urlPreventCache,handle:function(result,ioArgs){this.status=ioArgs.xhr.status},
failOk:this.failOk,status:200,sync:sync};return xhrArgs},_resyncStore:function(item){var parent=this.getParents(item)[0];if(parent){var request={item:parent,forceLoad:true};this.loadItem(request)}else if(item===this._rootDir)throw new Error(this.moduleName+"::_resyncStore(): Store root directory failed to reload.");else throw new Error(this.moduleName+"::_resyncStore(): File Store is corrupt.");},_setAuthTokenAttr:function(token){if(lang.isObject(token))this.authToken=token;return false},_setOptionsAttr:function(value){var i;
this.options=value;return;if(lang.isArray(value))this.options=value;else if(lang.isString(value))this.options=value.split(",");else throw new Error(this.moduleName+"::_setOptionsAttr(): Options must be a comma"+" separated string of keywords"+" or an array of keyword strings.");for(i=0;i<this.options.length;i++)if(this.options[i]==="iconClass")this._addIconClass=true;return this.options},_setValue:function(item,attribute,newValue,onSetCall,owner){var oldValue;oldValue=item[attribute];item[attribute]=
newValue;if(onSetCall)this.onSet(item,attribute,oldValue,newValue,owner);return true},_setValues:function(item,attribute,newValues,onSetCall){var oldValues;var i;oldValues=this.getValues(item,attribute);if(lang.isArray(newValues))if(newValues.length===0&&attribute!==C_CHILDREN_ATTR){delete item[attribute];newValues=undefined}else item[attribute]=newValues.slice(0,newValues.length);else throw new Error(this.moduleName+"::setValues(): newValues not an array");if(onSetCall)this.onSet(item,attribute,
oldValues,newValues);return true},_updateFileStore:function(operation,dataObject,keywordArgs){var self=this;function deleteFile(identity){var files=[];var storeItem=self._getItemByIdentity(identity);if(storeItem)files=self._deleteFromStore(storeItem,true);return files}function makeDirectory(path){var newDir=self._getItemByIdentity(path);if(!newDir){newDir=self._rootDir;if(newDir){var segments=path.split("/");var subPath=".";var subDir=null;for(i=0;i<segments.length;i++)if(segments[i]!=="."){subPath=
subPath+"/"+segments[i];subDir=self._getItemByIdentity(subPath);if(!subDir){subDir={name:segments[i],path:subPath,directory:true,size:0};subDir[C_CHILDREN_ATTR]=[];subDir[C_ITEM_EXPANDED]=false;newDir=newFile(subDir,newDir,true)}else newDir=subDir}}else{newDir=newFile(null,null,false);return makeDirectory(path)}}return newDir}function mergeFiles(storeItem,servItem,onSetCall){var hasChanged=false;var empty={};var newVal,oldValue;var name;for(name in servItem)if(name!=C_CHILDREN_ATTR&&name!=C_ITEM_EXPANDED){newVal=
servItem[name];if(!(name in storeItem)||storeItem[name]!==newVal&&(!(name in empty)||empty[name]!==newVal)){oldValue=storeItem[name];storeItem[name]=newVal;if(onSetCall)self.onSet(storeItem,name,oldValue,newVal);hasChanged=true}}return hasChanged}function newFile(item,parent,onSetCall){if(parent){var identity=self.getIdentity(item);var child=self._getItemByIdentity(identity);if(!child){var oldValues=self.getValues(parent,C_CHILDREN_ATTR);var newValues=self.getValues(parent,C_CHILDREN_ATTR);item[C_STORE_REF_PROP]=
self;item[C_PARENT_REF]=parent;if(self["_addIconClass"])setIconClass(item);self._itemsByIdentity[identity]=item;self._allFileItems.push(item);newValues.push(item);self._setValues(parent,C_CHILDREN_ATTR,newValues,false);if(self._loadFinished&&onSetCall){var parentInfo={item:parent,attribute:C_CHILDREN_ATTR,oldValue:oldValues,newValue:newValues};self.onNew(item,!parent[C_STORE_ROOT]?parentInfo:null)}return item}throw new Error(self.moduleName+"::_updateFileStore:newFile(): item ["+item.path+"] already exist.");
}else{if(!self._rootDir){item={name:self._rootId,path:self._rootId,directory:true};item[C_STORE_REF_PROP]=self;item[C_CHILDREN_ATTR]=[];item[C_ITEM_EXPANDED]=false;item[C_STORE_ROOT]=true;if(self["_addIconClass"])setIconClass(item);self._itemsByIdentity[self._rootId]=item;self._allFileItems.push(item);self._rootDir=item;return item}throw new Error(self.moduleName+"::_updateFileStore:newFile(): item has no parent.");}}function setIconClass(item){var icc;if(item.directory)icc="fileIconDIR";else{var last=
item.name.lastIndexOf(".");if(last>0){var ext=item.name.substr(last+1).toLowerCase();ext=ext.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase()});icc="fileIcon"+ext}else icc="fileIconUnknown"}item["icon"]=icc+" fileIcon"}function updateDirectory(directory,files){var hasChanged=false;var file,path;var i;var oldValues=self.getValues(directory,C_CHILDREN_ATTR);var delValues=self.getValues(directory,C_CHILDREN_ATTR);var newValues=[];for(i=0;i<files.length;i++){file=updateFile(files[i],
directory);self._removeArrayElement(delValues,file);newValues.push(file)}if(delValues.length>0){file=delValues.shift();while(file){self._deleteFromStore(file,false);file=delValues.shift()}hasChanged=true}if(oldValues.length!=newValues.length)hasChanged=true;if(hasChanged&&self._loadFinished)self.onSet(directory,C_CHILDREN_ATTR,oldValues,newValues);directory[C_ITEM_EXPANDED]=true;return directory}function updateFile(item,directory){var newPath=item[C_PATH_ATTR];var oldPath=item.oldPath;var file;if(oldPath&&
oldPath!==newPath){var oldFile=self._getItemByIdentity(oldPath);if(oldFile){self._deleteFromStore(oldFile,true);delete item.oldPath}else throw new Error(self.moduleName+"::_updateFileStore:updateFile(): Unable to resolve ["+oldPath+"].");}if(!directory){var lastSegm=newPath.lastIndexOf("/");var dirName=newPath.substr(0,lastSegm)||newPath;directory=makeDirectory(dirName)}file=self._getItemByIdentity(newPath);if(file&&file.directory!==item.directory){self._deleteFromStore(file,true);file=null}if(file)mergeFiles(file,
item,true);else if(item.directory){file=makeDirectory(newPath);mergeFiles(file,item,false)}else file=newFile(item,directory,true);if(file.directory&&item[C_ITEM_EXPANDED])updateDirectory(file,item[C_CHILDREN_ATTR]);return file}if(dataObject){var items=dataObject.items,identity,files=[],file,i;if(items){if(items.length>1){var sortList=new sorter([{attribute:C_PATH_ATTR}]);items.sort(sortList.sortFunction())}for(i=0;i<items.length;i++){identity=self.getIdentity(items[i]);if(identity)switch(operation){case "DELETE":var deleted=
deleteFile(identity);files=files.concat(deleted);break;case "GET":case "POST":file=updateFile(items[i],null);files.push(file);break}else;}this._loadFinished=true;return files}}throw new Error(this.moduleName+"::_updateFileStore(): Empty or malformed server response.");},attachToRoot:function(item){this._assertIsItem(item);var newPath=this._rootId+"/"+item.name;this.renameItem(item,newPath)},close:function(request){if(this._loadInProgress){this._queueRequest({args:request,func:this.close,scope:this});
this._closePending=true}else{if(this.clearOnClose){this._closePending=true;this._queuedFetches=[];this._itemsByIdentity={};this._allFileItems=[];this._rootDir=null;this._loadFinished=false;this._loadInProgress=false;this._validated=false}this.onClose(this.clearOnClose);this._closePending=false}},containsValue:function(item,attribute,value){var regexp=undefined;if(typeof value==="string")regexp=filterUtil.patternToRegExp(value,false);return this._containsValue(item,attribute,value,regexp)},fetch:function(keywordArgs){try{var scope=
keywordArgs.scope||window.global;var queryOptions=keywordArgs.queryOptions||null;var storeOnly=queryOptions?queryOptions.storeOnly:false;var oper="GET";var self=this;if((this.cache||storeOnly)&&this._loadFinished)this._fetchFinal(keywordArgs,this._getItemsArray(queryOptions));else if(this._loadInProgress)this._queueRequest({args:keywordArgs,func:this.fetch,scope:self});else{this._loadInProgress=true;var getArgs=this._requestToArgs(oper,keywordArgs);var self=this;var prom=this.callMethodEx2(null,"ls",
{path:getArgs.content.path.replace("./","."),mount:getArgs.content.basePath,options:this.options}).then(function(data){try{self._updateFileStore(oper,data,keywordArgs);self._loadInProgress=false;if(keywordArgs.onItem){item=self._getItemByIdentity(path);keywordArgs.onItem.call(scope,item)}}catch(error){self._loadInProgress=false;if(keywordArgs.onError)keywordArgs.onError.call(scope,error);else console.error(error)}})}keywordArgs.abort=function(){this.aborted=true};return keywordArgs}catch(e){debugger}},
fetchEx:function(keywordArgs){var scope=keywordArgs.scope||window.global;var queryOptions=keywordArgs.queryOptions||null;var storeOnly=queryOptions?queryOptions.storeOnly:false;var oper="GET";var self=this;if((this.cache||storeOnly)&&this._loadFinished)this._fetchFinal(keywordArgs,this._getItemsArray(queryOptions));else if(this._loadInProgress)self._queueRequest({args:keywordArgs,func:self.fetch,scope:self});else{this._loadInProgress=true;var getArgs=self._requestToArgs(oper,keywordArgs);var prom=
self.callMethodEx2(null,"ls",{path:getArgs.content.path,mount:getArgs.content.basePath,options:self.options}).then(function(data){try{if(data&&data.error&&data.error.code!=0){self.onError(data.error);return}if(!self._didInit){self._didInit=true;self.publish(types.EVENTS.ON_FILE_STORE_READY,{store:self})}self._updateFileStore(oper,data,keywordArgs);self._loadInProgress=false;self._fetchFinal(keywordArgs,self._getItemsArray(queryOptions))}catch(error){console.error("something went wrong! ",error);self._loadInProgress=
false;if(keywordArgs.onError)keywordArgs.onError.call(scope,error);else console.error(error)}})}keywordArgs.abort=function(){this.aborted=true};return keywordArgs},fetchChildren:function(keywordArgs){var scope=keywordArgs.scope||window.global;var item=keywordArgs.item||this._rootDir;var self=this;this._assertIsItem(item);if(!this.isItemLoaded(item)||keywordArgs.forceLoad){var request={item:item,forceLoad:keywordArgs.forceLoad,onError:keywordArgs.onError,onItem:function(item){self._fetchFinal(keywordArgs,
item[C_CHILDREN_ATTR])}};this.loadItem(request)}else this._fetchFinal(keywordArgs,item[C_CHILDREN_ATTR]);keywordArgs.abort=function(){this.aborted=true};return keywordArgs},fetchItemByIdentity:function(keywordArgs){var scope=keywordArgs.scope||window.global;var path=keywordArgs.identity||keywordArgs[C_PATH_ATTR];var queryOptions=keywordArgs.queryOptions||null;var storeOnly=queryOptions?queryOptions.storeOnly:false;var oper="GET";var self=this;var item;item=this._getItemByIdentity(path);if((this.cache||
storeOnly)&&this._loadFinished)if(item){if(keywordArgs.onItem)keywordArgs.onItem.call(scope,item);return}if(this._loadInProgress)this._queueRequest({args:keywordArgs,func:this.fetchItemByIdentity,scope:self});else{this._loadInProgress=true;var request={path:path};var getArgs=this._requestToArgs(oper,request);var prom=this.callMethodEx2(null,"ls",{path:getArgs.content.basePath.replace("./","."),mount:".",options:this.options}).then(function(data){try{self._updateFileStore(oper,data,keywordArgs);self._loadInProgress=
false;if(keywordArgs.onItem){item=self._getItemByIdentity(path);keywordArgs.onItem.call(scope,item)}}catch(error){debugger;self._loadInProgress=false;if(keywordArgs.onError)keywordArgs.onError.call(scope,error);else console.error(error)}})}},getAttributes:function(item){this._assertIsItem(item);var attributes=[];for(var key in item)if(!this._isPrivateAttr(key))attributes.push(key);return attributes},getDirectory:function(item){this._assertIsItem(item);var parent;parent=this.getValue(item,C_PARENT_REF);
if(parent)return this.getPath(parent);return},getFeatures:function(){return this._features},getIdentity:function(item){if(item)return item[C_PATH_ATTR]},getIdentifierAttr:function(){return C_PATH_ATTR},getIdentityAttributes:function(item){return[C_PATH_ATTR]},getLabel:function(item){if(this._labelAttr&&this.isItem(item))return this.getValue(item,this._labelAttr);return undefined},getLabelAttributes:function(item){return this._labelAttr?[this._labelAttr]:null},getParents:function(item,allowRoot){if(item){if(allowRoot===
true)return this.getValues(item,C_PARENT_REF);if(item[C_PARENT_REF]==this._rootDir)return[];return this.getValues(item,C_PARENT_REF)}},getPath:function(item){this._assertIsItem(item);return item[C_PATH_ATTR]},getValue:function(item,attribute,defaultValue){var values=this.getValues(item,attribute);return values.length>0?values[0]:defaultValue},getValues:function(item,attribute){var result=[];this._assertIsItem(item);this._assertIsAttribute(attribute,"getValues");if(item[attribute]!==undefined)result=
lang.isArray(item[attribute])?item[attribute]:[item[attribute]];return result.slice(0)},hasAttribute:function(item,attribute){this._assertIsItem(item);this._assertIsAttribute(attribute,"hasAttribute");return attribute in item},isItem:function(something){if(something&&something[C_STORE_REF_PROP]===this)if(this._itemsByIdentity[something[C_PATH_ATTR]]===something)return true;return false},isItemLoaded:function(item){var loaded=this.isItem(item);if(loaded)if(item.directory&&!item[C_ITEM_EXPANDED])loaded=
false;return loaded},isRootItem:function(item){this._assertIsItem(item);var parent=this.getValue(item,C_PARENT_REF);if(parent&&parent[C_STORE_ROOT])return true;return false},isValidated:function(){return this._validated},loadItem:function(keywordArgs){var queryOptions=keywordArgs.queryOptions||null;var forceLoad=keywordArgs.forceLoad||false;var scope=keywordArgs.scope||window.global;var sort=keywordArgs.sort||null;var item=keywordArgs.item;var oper="GET";var self=this;if(!this.isItem(item))return;
if(forceLoad!==true)if(this.isItemLoaded(item))return;var path=this.getIdentity(item);if(this._loadInProgress){this._queueRequest({args:keywordArgs,func:this.loadItem,scope:self});if(keywordArgs.onInProgress)keywordArgs.onInProgress()}else{this._loadInProgress=true;var request={path:path};var getArgs=this._requestToArgs(oper,request);if(!getArgs.content.basePath)getArgs.content.basePath="root";var prom=this.callMethodEx2(null,"ls",{mount:getArgs.content.basePath.replace("./","."),path:getArgs.content.path,
options:this.options}).then(function(data){try{self._updateFileStore(oper,data,keywordArgs);self._loadInProgress=false;if(keywordArgs.onItem){item=self._getItemByIdentity(path);keywordArgs.onItem.call(scope,item)}}catch(error){self._loadInProgress=false;if(keywordArgs.onError)keywordArgs.onError(error);else console.error(error)}self._handleQueuedRequest()})}},loadStore:function(keywordArgs){var scope=keywordArgs.scope||window.global;var self=this;function loadComplete(count,requestArgs){var loadArgs=
requestArgs.loadArgs||null;var scope=loadArgs.scope;self.onLoad(count);if(loadArgs)if(loadArgs.onComplete)loadArgs.onComplete.call(scope,count)}if(!this._loadFinished)if(this._loadInProgress)this._queueRequest({args:keywordArgs,func:this.loadStore,scope:self});else{var request={queryOptions:{deep:false},loadArgs:keywordArgs,onBegin:loadComplete,onError:keywordArgs.onError,scope:this};try{this.fetch(request)}catch(err){if(onError)onError.call(scope,err);else throw err;}}else;},renameItem:function(item,
newPath,onItem,onError,scope){var scope=scope||window.global;this._assertIsItem(item);this._assertIsAttribute(newPath,"renameItem");if(item!=this._rootDir)if(item[C_PATH_ATTR]!==newPath){var keywordArgs={item:item,newValue:newPath,onItem:onItem,onError:onError,scope:scope};this._renameItem(keywordArgs)}else if(lang.isFunction(onItem))onItem.call(scope,item)},set:function(attribute,value){if(lang.isString(attribute)){var cc=attribute.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-
1).toUpperCase()});var setter="_set"+cc+"Attr";if(lang.isFunction(this[setter]))return this[setter](value);else if(this[attribute]!==undefined){this[attribute]=value;return this[attribute]}}},setValidated:function(value){this._validated=Boolean(value)},setValue:function(item,attribute,newValue,owner){var oldValue;var i;this._assertIsItem(item);this._assertIsAttribute(attribute,"setValue");if(typeof newValue==="undefined")throw new Error(this.moduleName+"::setValue(): newValue is undefined");if(attribute!==
C_PATH_ATTR){if(this._isReadOnlyAttr(attribute)||this._isPrivateAttr(attribute))throw new Error(this.moduleName+"::setValue(): attribute ["+attribute+"] is private or read-only");return this._setValue(item,attribute,newValue,true,owner)}else if(item[C_PATH_ATTR]!==newValue)this._renameItem({item:item,newValue:newValue})},setValues:function(item,attribute,newValues){var oldValues;var i;this._assertIsItem(item);this._assertIsAttribute(attribute,"setValues");if(typeof newValues==="undefined")throw new Error(this.moduleName+
"::setValue(): newValue is undefined");if(this._isReadOnlyAttr(attribute)||this._isPrivateAttr(attribute))throw new Error(this.moduleName+"::setValues(): attribute ["+attribute+"] is private or read-only");return this._setValues(item,attribute,newValues,true)},unsetAttribute:function(item,attribute){return this.setValues(item,attribute,[])},onClose:function(cleared){},onDelete:function(item){var parent=item[C_PARENT_REF];if(parent&&parent[C_STORE_ROOT])this.onRoot(item,"delete")},onLoad:function(count){},
onNew:function(item,parentInfo){if(this.isRootItem(item))this.onRoot(item,"new")},onRoot:function(item,action){},onSet:function(item,attribute,oldValue,newValue){},isDirty:function(item){return false},newItem:function(){this._assertSupport("newItem")},revert:function(){},save:function(){},addReference:function(){this._assertSupport("addReference")},detachFromRoot:function(){this._assertSupport("detachFromRoot")},itemExist:function(keywordArgs){var identity;if(typeof keywordArgs!="object")throw new Error(this.moduleName+
"::itemExist(): argument is not an object.");identity=keywordArgs[C_PATH_ATTR];if(typeof identity==="undefined")throw new Error(this.moduleName+"::itemExist(): argument does not include an identity.");return this._getItemByIdentity(identity)},removeReference:function(){this._assertSupport("removeReference")}});return FileStore})},"xfile/views/_KeyNavMixin":function(){define("xfile/views/_KeyNavMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on",
"dijit/registry","dijit/_FocusMixin","xide/utils"],function(array,declare,domAttr,keys,lang,on,registry,_FocusMixin,utils){return declare("dijit._KeyNavMixin",_FocusMixin,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);domAttr.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var keyCodes=this._keyNavCodes={};keyCodes[keys.UP_ARROW]=lang.hitch(this,"_onUpArrow");keyCodes[keys.DOWN_ARROW]=lang.hitch(this,"_onDownArrow")}var self=this,childSelector=typeof this.childSelector==
"string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.domNode,"keypress",lang.hitch(this,"_onContainerKeypress")),on(this.domNode,"keydown",lang.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",lang.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(childSelector,"focusin"),function(evt){}))},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild()},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,
1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusChild:function(widget,last){if(!widget)return;if(this.focusedChildNode&&widget!==this.focusedChildNode)this._onChildBlur(this.focusedChildNode);if(widget.set)widget.set("tabIndex",this.tabIndex);else;if(widget.focus)widget.focus(last?"end":"start")},_onContainerFocus:function(evt){if(evt.target!==
this.domNode||this.focusedChildNode)return;this.focus()},_onFocus:function(){domAttr.set(this.domNode,"tabIndex","-1");this.inherited(arguments)},_onBlur:function(evt){domAttr.set(this.domNode,"tabIndex",this.tabIndex);if(this.focusedChildNode&&this.focusedChildNode.set){this.focusedChildNode.set("tabIndex","-1");this.lastFocusedChild=this.focusedChildNode;this._set("focusedChild",null)}this.inherited(arguments)},_onChildFocus:function(child){if(child&&child!=this.focusedChildNode){if(this.focusedChildNode&&
!this.focusedChildNode._destroyed)this.focusedChildNode.set("tabIndex","-1");child.set("tabIndex",this.tabIndex);this.lastFocused=child;this._set("focusedChild",child)}},_searchString:"",multiCharSearchDuration:1E3,onKeyboardSearch:function(item,evt,searchString,numMatches){if(item)this.focusChild(item)},_keyboardSearchCompare:function(item,searchString){var element=item;if(item&&!item.data){var row=this.grid.row(item);if(row)item["data"]=row.data}var text=item?item.data?item.data.name:"":"";var currentString=
text.replace(/^\s+/,"").substr(0,searchString.length).toLowerCase();var res=!!searchString.length&&currentString==searchString?-1:0;return res},_onContainerKeydown:function(evt){var func=this._keyNavCodes[evt.keyCode];if(func){func(evt,this.focusedChild);evt.stopPropagation();evt.preventDefault();this._searchString=""}else if(evt.keyCode==keys.SPACE&&this._searchTimer&&!(evt.ctrlKey||evt.altKey||evt.metaKey)){evt.stopImmediatePropagation();evt.preventDefault();on.emit(this.domNode,"keypress",{charCode:keys.SPACE,
cancelable:true,bubbles:true})}},_onContainerKeypress:function(evt){if(this.editing)return;if(evt.charCode<32)return;if(evt.ctrlKey||evt.altKey)return;var matchedItem=null,searchString,numMatches=0,search=lang.hitch(this,function(){if(this._searchTimer)this._searchTimer.remove();this._searchString+=keyChar;var allSameLetter=/^(.)\1*$/.test(this._searchString);var searchLen=allSameLetter?1:this._searchString.length;searchString=this._searchString.substr(0,searchLen);this._searchTimer=this.defer(function(){this._searchTimer=
null;this._searchString=""},this.multiCharSearchDuration);var currentItem=this.focusedChildNode||this.focusedChild||null;if(searchLen==1||!currentItem){currentItem=this._getNextFocusableChild(currentItem,1);if(!currentItem)return}var stop=currentItem;var idx=0;do{var rc=this._keyboardSearchCompare(currentItem,searchString);if(!!rc&&numMatches++==0)matchedItem=currentItem;if(rc==-1){numMatches=-1;break}currentItem=this._getNextFocusableChild(currentItem,1)}while(currentItem!=stop)}),keyChar=String.fromCharCode(evt.charCode).toLowerCase();
evt.preventDefault();evt.stopPropagation();search();this.onKeyboardSearch(matchedItem,evt,searchString,numMatches)},_onChildBlur:function(){},_getNextFocusableChild:function(child,dir){var wrappedValue=child;do{if(!child){child=this[dir>0?"_getFirst":"_getLast"]();if(!child)break}else{if(child&&child.node){var innerNode=utils.find(".dgrid-cell",child.node,true);if(innerNode)child=innerNode}child=this._getNext(child,dir)}if(child!=null&&child!=wrappedValue)return child}while(child!=wrappedValue);return null},
_getFirst:function(){var innerNode=utils.find(".dgrid-row",this.grid.domNode,true);if(innerNode){var innerNode0=utils.find(".dgrid-cell",innerNode,true);if(innerNode0)return innerNode0}return innerNode},_getLast:function(){var innerNode=utils.find(".dgrid-row",this.grid.domNode,false);if(innerNode){var innerNode0=utils.find(".dgrid-cell",innerNode,true);if(innerNode0)return innerNode0}return null;return null},_getPrev:function(child,dir){if(child){var w=this.grid.up(child,1,true);if(w){var data=null;
if(w.data)data=w.data;if(w.element)w=w.element;var innerNode=utils.find(".dgrid-cell",w,true);if(innerNode){if(!innerNode.data)innerNode["data"]=data;return innerNode}return w}}return null},_getNext:function(child,dir){if(child){var w=this.grid.down(child,1,true);if(w){var data=null;if(w.data)data=w.data;if(w.element)w=w.element;var innerNode=utils.find(".dgrid-cell",w,true);if(innerNode){if(!innerNode.data)innerNode["data"]=data;return innerNode}return w}}return null}})})},"xide/types":function(){define(["dojo/_base/declare"],
function(declare){return declare("xide.types",null,{})})},"dojox/encoding/digests/SHA1":function(){define("dojox/encoding/digests/SHA1",["./_base"],function(base){var chrsz=8,mask=(1<<chrsz)-1;function R(n,c){return n<<c|n>>>32-c}function FT(t,b,c,d){if(t<20)return b&c|~b&d;if(t<40)return b^c^d;if(t<60)return b&c|b&d|c&d;return b^c^d}function KT(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function core(x,len){x[len>>5]|=128<<24-len%32;x[(len+64>>9<<4)+15]=len;var w=new Array(80),
a=1732584193,b=-271733879,c=-1732584194,d=271733878,e=-1009589776;for(var i=0;i<x.length;i+=16){var olda=a,oldb=b,oldc=c,oldd=d,olde=e;for(var j=0;j<80;j++){if(j<16)w[j]=x[i+j];else w[j]=R(w[j-3]^w[j-8]^w[j-14]^w[j-16],1);var t=base.addWords(base.addWords(R(a,5),FT(j,b,c,d)),base.addWords(base.addWords(e,w[j]),KT(j)));e=d;d=c;c=R(b,30);b=a;a=t}a=base.addWords(a,olda);b=base.addWords(b,oldb);c=base.addWords(c,oldc);d=base.addWords(d,oldd);e=base.addWords(e,olde)}return[a,b,c,d,e]}function hmac(data,
key){var wa=toWord(key);if(wa.length>16)wa=core(wa,key.length*chrsz);var ipad=new Array(16),opad=new Array(16);for(var i=0;i<16;i++){ipad[i]=wa[i]^909522486;opad[i]=wa[i]^1549556828}var hash=core(ipad.concat(toWord(data)),512+data.length*chrsz);return core(opad.concat(hash),512+160)}function toWord(s){var wa=[];for(var i=0,l=s.length*chrsz;i<l;i+=chrsz)wa[i>>5]|=(s.charCodeAt(i/chrsz)&mask)<<32-chrsz-i%32;return wa}function toHex(wa){var h="0123456789abcdef",s=[];for(var i=0,l=wa.length*4;i<l;i++)s.push(h.charAt(wa[i>>
2]>>(3-i%4)*8+4&15),h.charAt(wa[i>>2]>>(3-i%4)*8&15));return s.join("")}function _toString(wa){var s=[];for(var i=0,l=wa.length*32;i<l;i+=chrsz)s.push(String.fromCharCode(wa[i>>5]>>>32-chrsz-i%32&mask));return s.join("")}function toBase64(wa){var p="\x3d",tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=[];for(var i=0,l=wa.length*4;i<l;i+=3){var t=(wa[i>>2]>>8*(3-i%4)&255)<<16|(wa[i+1>>2]>>8*(3-(i+1)%4)&255)<<8|wa[i+2>>2]>>8*(3-(i+2)%4)&255;for(var j=0;j<4;j++)if(i*8+j*6>wa.length*
32)s.push(p);else s.push(tab.charAt(t>>6*(3-j)&63))}return s.join("")}base.SHA1=function(data,outputType){var out=outputType||base.outputTypes.Base64;var wa=core(toWord(data),data.length*chrsz);switch(out){case base.outputTypes.Raw:return wa;case base.outputTypes.Hex:return toHex(wa);case base.outputTypes.String:return _toString(wa);default:return toBase64(wa)}};base.SHA1._hmac=function(data,key,outputType){var out=outputType||base.outputTypes.Base64;var wa=hmac(data,key);switch(out){case base.outputTypes.Raw:return wa;
case base.outputTypes.Hex:return toHex(wa);case base.outputTypes.String:return _toString(wa);default:return toBase64(wa)}};return base.SHA1})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,kernel,sorter){var simpleFetch={};lang.setObject("dojo.data.util.simpleFetch",simpleFetch);simpleFetch.errorHandler=function(errorData,requestObject){if(requestObject.onError){var scope=requestObject.scope||kernel.global;requestObject.onError.call(scope,
errorData,requestObject)}};simpleFetch.fetchHandler=function(items,requestObject){var oldAbortFunction=requestObject.abort||null,aborted=false,startIndex=requestObject.start?requestObject.start:0,endIndex=requestObject.count&&requestObject.count!==Infinity?startIndex+requestObject.count:items.length;requestObject.abort=function(){aborted=true;if(oldAbortFunction)oldAbortFunction.call(requestObject)};var scope=requestObject.scope||kernel.global;if(!requestObject.store)requestObject.store=this;if(requestObject.onBegin)requestObject.onBegin.call(scope,
items.length,requestObject);if(requestObject.sort)items.sort(sorter.createSortFunction(requestObject.sort,this));if(requestObject.onItem)for(var i=startIndex;i<items.length&&i<endIndex;++i){var item=items[i];if(!aborted)requestObject.onItem.call(scope,item,requestObject)}if(requestObject.onComplete&&!aborted){var subset=null;if(!requestObject.onItem)subset=items.slice(startIndex,endIndex);requestObject.onComplete.call(scope,subset,requestObject)}};simpleFetch.fetch=function(request){request=request||
{};if(!request.store)request.store=this;this._fetchItems(request,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));return request};return simpleFetch})},"xblox/model/loops/ForBlock":function(){define("xblox/model/loops/ForBlock",["dojo/_base/declare","xblox/model/Block","xblox/model/variables/Variable"],function(declare,Block,Variable){return declare("xblox.model.loops.ForBlock",[Block],{initial:null,"final":null,comparator:null,modifier:null,items:null,counterName:null,_counter:null,
name:"For",_solve:function(scope,settings){var ret=[];for(var n=0;n<this.items.length;n++)this.addToEnd(ret,this.items[n].solve(scope,settings));return ret},solve:function(scope,settings){var ret=[];var noInfinite=true;this._counter=new Variable({title:this.counterName,value:this.initial,scope:scope,register:false});while(this._checkCondition(scope)){this.addToEnd(ret,this._solve(scope,settings));noIfinite=this._updateCounter(scope);if(!noInfinite)break}return ret},_checkCondition:function(scope){var expression=
""+this._counter.value+this.comparator+this["final"];return scope.parseExpression(expression)},_updateCounter:function(scope){var value=this._counter.value;var expression=""+value+this.modifier;var value=scope.parseExpression(expression);if(value==this._counter.value)return false;else{this._counter.value=value;return true}},mayHaveChildren:function(parent){return this.items!=null&&this.items.length>0},getChildren:function(parent){var result=[];if(this.items)result=result.concat(this.items);return result},
canAdd:function(){return[]},toText:function(){return this.getBlockIcon("F")+this.name+" "+this.initial+" "+this.comparator+" "+this["final"]+" with "+this.modifier},getFields:function(){var fields=[this.utils.createCI("initial",13,this.initial,{group:"General",title:"Initial",dst:"initial"}),this.utils.createCI("Final",13,this["final"],{group:"General",title:"Final",dst:"final"}),this.utils.createCI("comparator",13,this.comparator,{group:"General",title:"Comparision",dst:"comparator"}),this.utils.createCI("modifier",
13,this.modifier,{group:"General",title:"Modifier",dst:"modifier"})];fields=fields.concat(this.inherited(arguments));return fields}})})},"xfile/widgets/ActionToolbarButtonEmbedded":function(){define("xfile/widgets/ActionToolbarButtonEmbedded",["dojo/_base/declare","dijit/form/Button"],function(declare,Button){return declare("xfile.widgets.ActionToolbarButton",[Button],{currentItem:null,buttons:null,iconClass:"",title:"title",disabled:false,iconNode:null,linkNode:null,setDisabled:function(disabled){this.set("disabled",
disabled)},postMixInProperties:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.setDisabled(this.disabled)}})})},"xblox/model/variables/Variable":function(){define("xblox/model/variables/Variable",["dojo/_base/declare","xblox/model/Block","xide/utils"],function(declare,Block,utils){return declare("xblox.model.variables.Variable",[Block],{title:null,type:null,value:null,register:true,readOnly:false,getValue:function(){return this.value},canDisable:function(){return false},
constructor:function(arguments){for(var prop in arguments)if(arguments.hasOwnProperty(prop))this[prop]=arguments[prop];if(!this.id)this.id=this.createUUID();this.utils=utils;if(this.scope&&this.register!==false)this.scope.registerVariable(this)},canMove:function(){return false},getIconClass:function(){return"el-icon-quotes-alt"},solve:function(){var _result=this.scope.parseExpression(this.getValue(),true);0&&console.log("resolved variable "+this.title+" to "+_result);return[]},getFields:function(){var fields=
this.getDefaultFields();fields.push(this.utils.createCI("title",13,this.title,{group:"General",title:"Name",dst:"title"}));var thiz=this;fields.push(this.utils.createCI("value",25,this.value,{group:"General",title:"Value",dst:"value",delegate:{runExpression:function(val,run,error){return thiz.scope.expressionModel.parse(thiz.scope,val,false,run,error)}}}));return fields}})})},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class",
"dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(array,declare,dom,domClass,has,lang,on,domReady,touch,win,a11yclick,registry){var CssStateMixin=declare("dijit._CssStateMixin",[],{hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);array.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(attr){this.watch(attr,lang.hitch(this,"_setStateClass"))},
this);for(var ap in this.cssStateNodes||{})this._trackMouseState(this[ap],this.cssStateNodes[ap]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(event){if(!this.disabled)switch(event.type){case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":case "keydown":this._set("active",true);break;case "mouseup":case "dojotouchend":case "keyup":this._set("active",
false);break}},_setStateClass:function(){var newStateClasses=this.baseClass.split(" ");function multiply(modifier){newStateClasses=newStateClasses.concat(array.map(newStateClasses,function(c){return c+modifier}),"dijit"+modifier)}if(!this.isLeftToRight())multiply("Rtl");var checkedState=this.checked=="mixed"?"Mixed":this.checked?"Checked":"";if(this.checked)multiply(checkedState);if(this.state)multiply(this.state);if(this.selected)multiply("Selected");if(this._opened)multiply("Opened");if(this.disabled)multiply("Disabled");
else if(this.readOnly)multiply("ReadOnly");else if(this.active)multiply("Active");else if(this.hovering)multiply("Hover");if(this.focused)multiply("Focused");var tn=this.stateNode||this.domNode,classHash={};array.forEach(tn.className.split(" "),function(c){classHash[c]=true});if("_stateClasses"in this)array.forEach(this._stateClasses,function(c){delete classHash[c]});array.forEach(newStateClasses,function(c){classHash[c]=true});var newClasses=[];for(var c in classHash)newClasses.push(c);tn.className=
newClasses.join(" ");this._stateClasses=newStateClasses},_subnodeCssMouseEvent:function(node,clazz,evt){if(this.disabled||this.readOnly)return;function hover(isHovering){domClass.toggle(node,clazz+"Hover",isHovering)}function active(isActive){domClass.toggle(node,clazz+"Active",isActive)}function focused(isFocused){domClass.toggle(node,clazz+"Focused",isFocused)}switch(evt.type){case "mouseover":hover(true);break;case "mouseout":hover(false);active(false);break;case "mousedown":case "touchstart":case "keydown":active(true);
break;case "mouseup":case "dojotouchend":case "keyup":active(false);break;case "focus":case "focusin":focused(true);break;case "blur":case "focusout":focused(false);break}},_trackMouseState:function(node,clazz){node._cssState=clazz}});domReady(function(){function pointerHandler(evt,target,relatedTarget){if(relatedTarget&&dom.isDescendant(relatedTarget,target))return;for(var node=target;node&&node!=relatedTarget;node=node.parentNode)if(node._cssState){var widget=registry.getEnclosingWidget(node);if(widget)if(node==
widget.domNode)widget._cssMouseEvent(evt);else widget._subnodeCssMouseEvent(node,node._cssState,evt)}}var body=win.body(),activeNode;on(body,touch.over,function(evt){pointerHandler(evt,evt.target,evt.relatedTarget)});on(body,touch.out,function(evt){pointerHandler(evt,evt.target,evt.relatedTarget)});on(body,a11yclick.press,function(evt){activeNode=evt.target;pointerHandler(evt,activeNode)});on(body,a11yclick.release,function(evt){pointerHandler(evt,activeNode);activeNode=null});on(body,"focusin, focusout",
function(evt){var node=evt.target;if(node._cssState&&!node.getAttribute("widgetId")){var widget=registry.getEnclosingWidget(node);widget._subnodeCssMouseEvent(node,node._cssState,evt)}})});return CssStateMixin})},"xide/mixins/ItemActionMixin":function(){define(["dojo/_base/declare"],function(declare){return declare("xide.mixins.ItemActionMixin",null,{getActiveItem:function(){return null},hasItemActions:function(){return false},getItem:function(){return null},getItemActions:function(){return null}})})},
"xide/factory":function(){define(["dojo/_base/declare"],function(declare){return declare("xide.factory",null,{})})},"dojo/dnd/Source":function(){define(["../_base/array","../_base/connect","../_base/declare","../_base/kernel","../_base/lang","../dom-class","../dom-geometry","../mouse","../ready","../topic","./common","./Selector","./Manager"],function(array,connect,declare,kernel,lang,domClass,domGeom,mouse,ready,topic,dnd,Selector,Manager){if(!kernel.isAsync)ready(0,function(){var requires=["dojo/dnd/AutoSource",
"dojo/dnd/Target"];require(requires)});var Source=declare("dojo.dnd.Source",Selector,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(node,params){lang.mixin(this,lang.mixin({},params));var type=this.accept;if(type.length){this.accept={};for(var i=0;i<type.length;++i)this.accept[type[i]]=1}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=
null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource)domClass.add(this.node,"dojoDndSource");this.targetState="";if(this.accept)domClass.add(this.node,"dojoDndTarget");if(this.horizontal)domClass.add(this.node,"dojoDndHorizontal");this.topics=[topic.subscribe("/dnd/source/over",lang.hitch(this,"onDndSourceOver")),topic.subscribe("/dnd/start",lang.hitch(this,"onDndStart")),topic.subscribe("/dnd/drop",lang.hitch(this,"onDndDrop")),topic.subscribe("/dnd/cancel",lang.hitch(this,
"onDndCancel"))]},checkAcceptance:function(source,nodes){if(this==source)return!this.copyOnly||this.selfAccept;for(var i=0;i<nodes.length;++i){var type=source.getItem(nodes[i].id).type;var flag=false;for(var j=0;j<type.length;++j)if(type[j]in this.accept){flag=true;break}if(!flag)return false}return true},copyState:function(keyPressed,self){if(keyPressed)return true;if(arguments.length<2)self=this==Manager.manager().target;if(self){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return false},
destroy:function(){Source.superclass.destroy.call(this);array.forEach(this.topics,function(t){t.remove()});this.targetAnchor=null},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled")return;Source.superclass.onMouseMove.call(this,e);var m=Manager.manager();if(!this.isDragging)if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)){var nodes=this.getSelectedNodes();if(nodes.length)m.startDrag(this,nodes,this.copyState(dnd.getCopyKeyState(e),
true))}if(this.isDragging){var before=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=domGeom.position(this.current,true);if(this.horizontal)before=e.pageX-this.targetBox.x<this.targetBox.w/2==domGeom.isBodyLtr(this.current.ownerDocument);else before=e.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||before!=this.before){this._markTargetAnchor(before);m.canDrop(!this.current||m.source!=this||!(this.current.id in this.selection))}}},
onMouseDown:function(e){if(!this.mouseDown&&this._legalMouseDown(e)&&(!this.skipForm||!dnd.isFormElement(e))){this.mouseDown=true;this._lastX=e.pageX;this._lastY=e.pageY;Source.superclass.onMouseDown.call(this,e)}},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;Source.superclass.onMouseUp.call(this,e)}},onDndSourceOver:function(source){if(this!==source){this.mouseDown=false;if(this.targetAnchor)this._unmarkTargetAnchor()}else if(this.isDragging){var m=Manager.manager();m.canDrop(this.targetState!=
"Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)))}},onDndStart:function(source,nodes,copy){if(this.autoSync)this.sync();if(this.isSource)this._changeState("Source",this==source?copy?"Copied":"Moved":"");var accepted=this.accept&&this.checkAcceptance(source,nodes);this._changeState("Target",accepted?"":"Disabled");if(this==source)Manager.manager().overSource(this);this.isDragging=true},onDndDrop:function(source,nodes,copy,target){if(this==target)this.onDrop(source,
nodes,copy);this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source","");this._changeState("Target","")},onDrop:function(source,nodes,copy){if(this!=source)this.onDropExternal(source,nodes,copy);else this.onDropInternal(nodes,copy)},onDropExternal:function(source,nodes,copy){var oldCreator=this._normalizedCreator;if(this.creator)this._normalizedCreator=function(node,
hint){return oldCreator.call(this,source.getItem(node.id).data,hint)};else if(copy)this._normalizedCreator=function(node){var t=source.getItem(node.id);var n=node.cloneNode(true);n.id=dnd.getUniqueId();return{node:n,data:t.data,type:t.type}};else this._normalizedCreator=function(node){var t=source.getItem(node.id);source.delItem(node.id);return{node:node,data:t.data,type:t.type}};this.selectNone();if(!copy&&!this.creator)source.selectNone();this.insertNodes(true,nodes,this.before,this.current);if(!copy&&
this.creator)source.deleteSelectedNodes();this._normalizedCreator=oldCreator},onDropInternal:function(nodes,copy){var oldCreator=this._normalizedCreator;if(this.current&&this.current.id in this.selection)return;if(copy)if(this.creator)this._normalizedCreator=function(node,hint){return oldCreator.call(this,this.getItem(node.id).data,hint)};else this._normalizedCreator=function(node){var t=this.getItem(node.id);var n=node.cloneNode(true);n.id=dnd.getUniqueId();return{node:n,data:t.data,type:t.type}};
else{if(!this.current)return;this._normalizedCreator=function(node){var t=this.getItem(node.id);return{node:node,data:t.data,type:t.type}}}this._removeSelection();this.insertNodes(true,nodes,this.before,this.current);this._normalizedCreator=oldCreator},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){Source.superclass.onOverEvent.call(this);Manager.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled")this.onDraggingOver()},onOutEvent:function(){Source.superclass.onOutEvent.call(this);
Manager.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled")this.onDraggingOut()},_markTargetAnchor:function(before){if(this.current==this.targetAnchor&&this.before==before)return;if(this.targetAnchor)this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=this.current;this.targetBox=null;this.before=before;if(this.targetAnchor)this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){if(!this.targetAnchor)return;
this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved")},_legalMouseDown:function(e){if(e.type!="touchstart"&&!mouse.isLeft(e))return false;if(!this.withHandles)return true;for(var node=e.target;node&&node!==this.node;node=node.parentNode){if(domClass.contains(node,"dojoDndHandle"))return true;if(domClass.contains(node,"dojoDndItem")||domClass.contains(node,
"dojoDndIgnore"))break}return false}});return Source})},"dgrid/TouchScroll":function(){define(["dojo/_base/declare","dojo/on","./util/touch","./util/has-css3","put-selector/put","xstyle/css!./css/TouchScroll.css"],function(declare,on,touchUtil,has,put){var calcTimerRes=50,glideTimerRes=30,current={},previous={},glideThreshold=1,scrollbarAdjustment=8,translateRx=/^translate(?:3d)?\((-?\d+)(?:\.\d*)?(?:px)?, (-?\d+)/,matrixRx=/^matrix\(1, 0, 0, 1, (-?\d+)(?:\.\d*)?(?:px)?, (-?\d+)/,hasTransitions=has("css-transitions"),
hasTransitionEnd=has("transitionend"),hasTransforms=has("css-transforms"),hasTransforms3d=has("css-transforms3d"),cssPrefix,transitionPrefix,transformProp,translatePrefix,translateSuffix;if(hasTransforms3d){translatePrefix="translate3d(";translateSuffix=",0)"}else if(hasTransforms){translatePrefix="translate(";translateSuffix=")"}if(!hasTransitions||!translatePrefix){0&&console.warn("CSS3 features unavailable for touch scroll effects.");return function(){}}transformProp=hasTransforms3d||hasTransforms;
transformProp=transformProp===true?"transform":transformProp+"Transform";transitionPrefix=hasTransitions===true?"transition":hasTransitions+"Transition";cssPrefix=hasTransforms===true?"":"-"+hasTransforms.toLowerCase()+"-";function showScrollbars(widget,curr){var node=widget.touchNode,parentNode=node.parentNode,adjustedParentWidth=parentNode.offsetWidth-scrollbarAdjustment,adjustedParentHeight=parentNode.offsetHeight-scrollbarAdjustment,scrollWidth=curr.scrollWidth=node.scrollWidth,scrollHeight=curr.scrollHeight=
node.scrollHeight,parentWidth=curr.parentWidth=parentNode.offsetWidth,parentHeight=curr.parentHeight=parentNode.offsetHeight,scrollbarNode;if(scrollWidth>parentWidth){if(!widget._scrollbarXNode)scrollbarNode=put(parentNode,"div.touchscroll-x");scrollbarNode=widget._scrollbarXNode=widget._scrollbarXNode||put(scrollbarNode,"div.touchscroll-bar");scrollbarNode.style.width=adjustedParentWidth*adjustedParentWidth/scrollWidth+"px";scrollbarNode.style.left=node.offsetLeft+"px";put(parentNode,".touchscroll-scrollable-x");
curr.scrollableX=true}else put(parentNode,"!touchscroll-scrollable-x");if(scrollHeight>parentHeight){if(!widget._scrollbarYNode)scrollbarNode=put(parentNode,"div.touchscroll-y");scrollbarNode=widget._scrollbarYNode=widget._scrollbarYNode||put(scrollbarNode,"div.touchscroll-bar");scrollbarNode.style.height=adjustedParentHeight*adjustedParentHeight/scrollHeight+"px";scrollbarNode.style.top=node.offsetTop+"px";put(parentNode,".touchscroll-scrollable-y");curr.scrollableY=true}else put(parentNode,"!touchscroll-scrollable-y");
put(parentNode,"!touchscroll-fadeout")}function scroll(widget,options){var node=widget.touchNode,curr=current[widget.id],pos,hasX,hasY,x,y;if(typeof options!=="object"){x=options;y=arguments[2];options=arguments[3];hasX=hasY=true}else{hasX="x"in options;hasY="y"in options;if(!hasX||!hasY)pos=widget.getScrollPosition();x=hasX?options.x:pos.x;y=hasY?options.y:pos.y}node.style[transformProp]=translatePrefix+-x+"px,"+-y+"px"+translateSuffix;if(curr&&hasX&&widget._scrollbarXNode)widget._scrollbarXNode.style[transformProp]=
translatePrefix+x*curr.parentWidth/curr.scrollWidth+"px,0"+translateSuffix;if(curr&&hasY&&widget._scrollbarYNode)widget._scrollbarYNode.style[transformProp]=translatePrefix+"0,"+y*curr.parentHeight/curr.scrollHeight+"px"+translateSuffix;on.emit(widget.touchNode.parentNode,"scroll",{scrollLeft:x,scrollTop:y})}function getScrollStyle(widget){if(current[widget.id])return matrixRx.exec(window.getComputedStyle(widget.touchNode)[transformProp]);return translateRx.exec(widget.touchNode.style[transformProp])}
function resetEffects(options){var widget=this.widget,nodes=[this.node,widget._scrollbarXNode,widget._scrollbarYNode],i=nodes.length;if(this.timer){clearTimeout(this.timer);this.timer=null}if(this.transitionHandler)this.transitionHandler.remove();while(i--)if(nodes[i])nodes[i].style[transitionPrefix+"Duration"]="0";if(!options||!options.preserveScrollbars)put(this.node.parentNode,".touchscroll-fadeout");delete this.resetEffects}function ontouchstart(evt){var widget=evt.widget,node=widget.touchNode,
id=widget.id,posX=0,posY=0,touch,match,curr;if(touchUtil.countCurrentTouches(evt,node)!==widget.touchesToScroll)return;match=getScrollStyle(widget);if(match){posX=+match[1];posY=+match[2]}if(curr=current[id]){if(curr.resetEffects)curr.resetEffects({preserveScrollbars:true});node.style[transformProp]=translatePrefix+posX+"px,"+posY+"px"+translateSuffix;previous[id]=curr}touch=evt.targetTouches[0];curr=current[id]={widget:widget,node:node,startX:posX-touch.pageX,startY:posY-touch.pageY,lastX:posX,lastY:posY,
pageX:touch.pageX,pageY:touch.pageY,tickFunc:function(){calcTick(id)}};curr.timer=setTimeout(curr.tickFunc,calcTimerRes)}function ontouchmove(evt){var widget=evt.widget,id=widget.id,touchesToScroll=widget.touchesToScroll,curr=current[id],activeTouches,targetTouches,touch,nx,ny,minX,minY,i;if(!curr||(activeTouches=touchUtil.countCurrentTouches(evt,widget.touchNode))!==touchesToScroll){if(activeTouches>touchesToScroll)widget.cancelTouchScroll();return}targetTouches=evt.targetTouches;touch=targetTouches[0];
if(!curr.scrollbarsShown)if(previous[id]||Math.abs(touch.pageX-curr.pageX)>widget.scrollThreshold||Math.abs(touch.pageY-curr.pageY)>widget.scrollThreshold){showScrollbars(widget,curr);curr.scrollbarsShown=true;for(i=targetTouches.length;i--;)targetTouches[i].touchScrolled=true}if(curr.scrollbarsShown&&(curr.scrollableX||curr.scrollableY)){evt.preventDefault();nx=curr.scrollableX?curr.startX+touch.pageX:0;ny=curr.scrollableY?curr.startY+touch.pageY:0;minX=curr.scrollableX?-(curr.scrollWidth-curr.parentWidth):
0;minY=curr.scrollableY?-(curr.scrollHeight-curr.parentHeight):0;if(nx>0)nx=nx/2;else if(nx<minX)nx=minX-(minX-nx)/2;if(ny>0)ny=ny/2;else if(ny<minY)ny=minY-(minY-ny)/2;scroll(widget,-nx,-ny)}}function ontouchend(evt){var widget=evt.widget,id=widget.id,curr=current[id];if(!curr||touchUtil.countCurrentTouches(evt,widget.touchNode)!=widget.touchesToScroll-1)return;startGlide(id)}function calcTick(id){var curr=current[id],node,match,x,y;if(!curr)return;node=curr.node;match=translateRx.exec(node.style[transformProp]);
if(match){x=+match[1];y=+match[2];curr.velX=x-curr.lastX;curr.velY=y-curr.lastY;curr.lastX=x;curr.lastY=y}else curr.lastX=curr.lastY=0;curr.timer=setTimeout(curr.tickFunc,calcTimerRes)}function bounce(id,lastX,lastY){var curr=current[id],widget=curr.widget,node=curr.node,scrollbarNode,x=curr.scrollableX?Math.max(Math.min(0,lastX),-(curr.scrollWidth-curr.parentWidth)):lastX,y=curr.scrollableY?Math.max(Math.min(0,lastY),-(curr.scrollHeight-curr.parentHeight)):lastY;function end(){delete curr.transitionHandler;
curr.resetEffects();delete current[id]}delete curr.timer;if(x!=lastX||y!=lastY){curr.transitionHandler=on.once(node,hasTransitionEnd,end);node.style[transitionPrefix+"Duration"]=widget.bounceDuration+"ms";node.style[transformProp]=translatePrefix+x+"px,"+y+"px"+translateSuffix;if(x!=lastX&&curr.scrollableX){scrollbarNode=curr.widget._scrollbarXNode;scrollbarNode.style[transitionPrefix+"Duration"]=widget.bounceDuration+"ms";if(lastX>x)scrollbarNode.style[transformProp]=translatePrefix+"0,0"+translateSuffix;
else scrollbarNode.style[transformProp]=translatePrefix+(scrollbarNode.parentNode.offsetWidth-scrollbarNode.offsetWidth)+"px,0"+translateSuffix}if(y!=lastY&&curr.scrollableY){scrollbarNode=curr.widget._scrollbarYNode;scrollbarNode.style[transitionPrefix+"Duration"]=widget.bounceDuration+"ms";if(lastY>y)scrollbarNode.style[transformProp]=translatePrefix+"0,0"+translateSuffix;else scrollbarNode.style[transformProp]=translatePrefix+"0,"+(scrollbarNode.parentNode.offsetHeight-scrollbarNode.offsetHeight)+
"px"+translateSuffix}}else end()}function startGlide(id){var curr=current[id],prev=previous[id],match,posX,posY,INERTIA_ACCELERATION=1.15;delete previous[id];if(curr.timer)clearTimeout(curr.timer);curr.resetEffects=resetEffects;match=translateRx.exec(curr.node.style[transformProp]);if(match){posX=+match[1];posY=+match[2]}else posX=posY=0;if(!curr.velX&&!curr.velY||(posX>=0||posX<=-(curr.scrollWidth-curr.parentWidth))&&(posY>=0||posY<=-(curr.scrollHeight-curr.parentHeight))){bounce(id,posX,posY);return}function sameSign(a,
b){return(a.velX<=0&&b.velX<=0||a.velX>=0&&b.velX>=0)&&(a.velY<=0&&b.velY<=0||a.velY>=0&&b.velY>=0)}if(prev&&(prev.velX||prev.velY)&&sameSign(curr,prev)){curr.velX=(curr.velX+prev.velX)*INERTIA_ACCELERATION;curr.velY=(curr.velY+prev.velY)*INERTIA_ACCELERATION}curr.lastX=posX;curr.lastY=posY;curr.calcFunc=function(){calcGlide(id)};curr.timer=setTimeout(curr.calcFunc,glideTimerRes)}function calcGlide(id){var curr=current[id],node,parentNode,widget,i,nx,ny,nvx,nvy,BOUNCE_DECELERATION_AMOUNT=6;if(!curr)return;
node=curr.node;parentNode=node.parentNode;widget=curr.widget;nvx=widget.glideDecel(curr.velX);nvy=widget.glideDecel(curr.velY);if(Math.abs(nvx)>=glideThreshold||Math.abs(nvy)>=glideThreshold){nx=curr.lastX+nvx;ny=curr.lastY+nvy;if(nx>0||nx<-(curr.scrollWidth-curr.parentWidth))for(i=BOUNCE_DECELERATION_AMOUNT;i--;)nvx=widget.glideDecel(nvx);if(ny>0||ny<-(curr.scrollHeight-curr.parentHeight))for(i=BOUNCE_DECELERATION_AMOUNT;i--;)nvy=widget.glideDecel(nvy);scroll(widget,-nx,-ny);curr.lastX=nx;curr.lastY=
ny;curr.velX=nvx;curr.velY=nvy;curr.timer=setTimeout(curr.calcFunc,glideTimerRes)}else bounce(id,curr.lastX,curr.lastY)}return declare(null,{touchesToScroll:1,touchNode:null,scrollThreshold:10,bounceDuration:300,postCreate:function(){this._initTouch();this.inherited(arguments)},_initTouch:function(){var node=this.touchNode=this.touchNode||this.containerNode,widget=this,parentNode;if(!node||!node.parentNode){0&&console.warn("TouchScroll requires a nested node upon which to operate.");return}parentNode=
node.parentNode;parentNode.style.overflow="hidden";node.style[transitionPrefix+"Property"]=cssPrefix+"transform";node.style[transitionPrefix+"TimingFunction"]="cubic-bezier(0.33, 0.66, 0.66, 1)";function cancelTouchScroll(){widget.cancelTouchScroll()}function wrapHandler(func){return function(evt){evt.widget=widget;evt.cancelTouchScroll=cancelTouchScroll;func.call(this,evt)}}this._touchScrollListeners=[on(parentNode,"touchstart",wrapHandler(ontouchstart)),on(parentNode,"touchmove",wrapHandler(ontouchmove)),
on(parentNode,"touchend,touchcancel",wrapHandler(ontouchend))]},destroy:function(){var i=this._touchScrollListeners.length;while(i--)this._touchScrollListeners[i].remove();delete current[this.id];this.inherited(arguments)},scrollTo:function(options){var curr=current[this.id],touchNode=this.touchNode,parentNode=touchNode.parentNode;if(!options.preserveMomentum&&curr&&curr.resetEffects)curr.resetEffects();if(options.x)options.x=Math.max(0,Math.min(options.x,touchNode.scrollWidth-parentNode.offsetWidth));
if(options.y)options.y=Math.max(0,Math.min(options.y,touchNode.scrollHeight-parentNode.offsetHeight));scroll(this,options)},getScrollPosition:function(){var match=getScrollStyle(this);return match?{x:-match[1],y:-match[2]}:{x:0,y:0}},cancelTouchScroll:function(){var curr=current[this.id];if(!curr)return;if(curr.resetEffects)curr.resetEffects();else{if(curr.timer)clearTimeout(curr.timer);put(curr.node.parentNode,".touchscroll-fadeout")}delete current[this.id]},glideDecel:function(n){return n*0.9}})})},
"dojo/errors/RequestTimeoutError":function(){define("dojo/errors/RequestTimeoutError",["./create","./RequestError"],function(create,RequestError){return create("RequestTimeoutError",null,RequestError,{dojoType:"timeout"})})},"dojo/NodeList-dom":function(){define(["./_base/kernel","./query","./_base/array","./_base/lang","./dom-class","./dom-construct","./dom-geometry","./dom-attr","./dom-style"],function(dojo,query,array,lang,domCls,domCtr,domGeom,domAttr,domStyle){var magicGuard=function(a){return a.length==
1&&typeof a[0]=="string"};var orphan=function(node){var p=node.parentNode;if(p)p.removeChild(node)};var NodeList=query.NodeList,awc=NodeList._adaptWithCondition,aafe=NodeList._adaptAsForEach,aam=NodeList._adaptAsMap;function getSet(module){return function(node,name,value){if(arguments.length==2)return module[typeof name=="string"?"get":"set"](node,name);return module.set(node,name,value)}}lang.extend(NodeList,{_normalize:function(content,refNode){var parse=content.parse===true;if(typeof content.template==
"string"){var templateFunc=content.templateFunc||dojo.string&&dojo.string.substitute;content=templateFunc?templateFunc(content.template,content):content}var type=typeof content;if(type=="string"||type=="number"){content=domCtr.toDom(content,refNode&&refNode.ownerDocument);if(content.nodeType==11)content=lang._toArray(content.childNodes);else content=[content]}else if(!lang.isArrayLike(content))content=[content];else if(!lang.isArray(content))content=lang._toArray(content);if(parse)content._runParse=
true;return content},_cloneNode:function(node){return node.cloneNode(true)},_place:function(ary,refNode,position,useClone){if(refNode.nodeType!=1&&position=="only")return;var rNode=refNode,tempNode;var length=ary.length;for(var i=length-1;i>=0;i--){var node=useClone?this._cloneNode(ary[i]):ary[i];if(ary._runParse&&dojo.parser&&dojo.parser.parse){if(!tempNode)tempNode=rNode.ownerDocument.createElement("div");tempNode.appendChild(node);dojo.parser.parse(tempNode);node=tempNode.firstChild;while(tempNode.firstChild)tempNode.removeChild(tempNode.firstChild)}if(i==
length-1)domCtr.place(node,rNode,position);else rNode.parentNode.insertBefore(node,rNode);rNode=node}},position:aam(domGeom.position),attr:awc(getSet(domAttr),magicGuard),style:awc(getSet(domStyle),magicGuard),addClass:aafe(domCls.add),removeClass:aafe(domCls.remove),toggleClass:aafe(domCls.toggle),replaceClass:aafe(domCls.replace),empty:aafe(domCtr.empty),removeAttr:aafe(domAttr.remove),marginBox:aam(domGeom.getMarginBox),place:function(queryOrNode,position){var item=query(queryOrNode)[0];return this.forEach(function(node){domCtr.place(node,
item,position)})},orphan:function(filter){return(filter?query._filterResult(this,filter):this).forEach(orphan)},adopt:function(queryOrListOrNode,position){return query(queryOrListOrNode).place(this[0],position)._stash(this)},query:function(queryStr){if(!queryStr)return this;var ret=new NodeList;this.map(function(node){query(queryStr,node).forEach(function(subNode){if(subNode!==undefined)ret.push(subNode)})});return ret._stash(this)},filter:function(filter){var a=arguments,items=this,start=0;if(typeof filter==
"string"){items=query._filterResult(this,a[0]);if(a.length==1)return items._stash(this);start=1}return this._wrap(array.filter(items,a[start],a[start+1]),this)},addContent:function(content,position){content=this._normalize(content,this[0]);for(var i=0,node;node=this[i];i++)this._place(content,node,position,i>0);return this}});return NodeList})},"dijit/form/FilteringSelect":function(){define("dijit/form/FilteringSelect",["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],
function(declare,lang,when,MappedTextBox,ComboBoxMixin){return declare("dijit.form.FilteringSelect",[MappedTextBox,ComboBoxMixin],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&this.get("displayedValue")==""},_refreshState:function(){if(!this.searchTimer)this.inherited(arguments)},_callbackSetLabel:function(result,query,options,priorityChange){if(query&&query[this.searchAttr]!==this._lastQuery||!query&&result.length&&
this.store.getIdentity(result[0])!=this._lastQuery)return;if(!result.length)this.set("value","",priorityChange||priorityChange===undefined&&!this.focused,this.textbox.value,null);else this.set("item",result[0],priorityChange)},_openResultList:function(results,query,options){if(query[this.searchAttr]!==this._lastQuery)return;this.inherited(arguments);if(this.item===undefined)this.validate(true)},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(value,
priorityChange,displayedValue,item){if(!this._onChangeActive)priorityChange=null;if(item===undefined){if(value===null||value===""){value="";if(!lang.isString(displayedValue)){this._setDisplayedValueAttr(displayedValue||"",priorityChange);return}}var self=this;this._lastQuery=value;when(this.store.get(value),function(item){self._callbackSetLabel(item?[item]:[],undefined,undefined,priorityChange)})}else{this.valueNode.value=value;this.inherited(arguments)}},_setItemAttr:function(item,priorityChange,
displayedValue){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(label,priorityChange){if(label==null)label="";if(!this._created){if(!("displayedValue"in this.params))return;priorityChange=false}if(this.store){this.closeDropDown();var query=lang.clone(this.query);var qs=this._getDisplayQueryString(label),q;if(this.store._oldAPI)q=qs;else{q=this._patternToRegExp(qs);
q.toString=function(){return qs}}this._lastQuery=query[this.searchAttr]=q;this.textbox.value=label;this._lastDisplayedValue=label;this._set("displayedValue",label);var _this=this;var options={ignoreCase:this.ignoreCase,deep:true};lang.mixin(options,this.fetchProperties);this._fetchHandle=this.store.query(query,options);when(this._fetchHandle,function(result){_this._fetchHandle=null;_this._callbackSetLabel(result||[],query,options,priorityChange)},function(err){_this._fetchHandle=null;if(!_this._cancelingQuery)console.error("dijit.form.FilteringSelect: "+
err.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","require",
"./registry"],function(require,array,aspect,config,connect,declare,dom,domAttr,domClass,domConstruct,domGeometry,domStyle,has,kernel,lang,on,ready,Stateful,topic,win,Destroyable,_BidiMixin,registry){has.add("dijit-legacy-requires",!kernel.isAsync);0&&has.add("dojo-bidi",false);if(has("dijit-legacy-requires"))ready(0,function(){var requires=["dijit/_base/manager"];require(requires)});var tagAttrs={};function getAttrs(obj){var ret={};for(var attr in obj)ret[attr.toLowerCase()]=true;return ret}function nonEmptyAttrToDom(attr){return function(val){domAttr[val?
"set":"remove"](this.domNode,attr,val);this._set(attr,val)}}var _WidgetBase=declare("dijit._WidgetBase",[Stateful,Destroyable],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:nonEmptyAttrToDom("lang"),dir:"",_setDirAttr:nonEmptyAttrToDom("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val)},attributeMap:{},_blankGif:config.blankGif||
require.toUrl("dojo/resources/blank.gif"),_introspect:function(){var ctor=this.constructor;if(!ctor._setterAttrs){var proto=ctor.prototype,attrs=ctor._setterAttrs=[],onMap=ctor._onMap={};for(var name in proto.attributeMap)attrs.push(name);for(name in proto){if(/^on/.test(name))onMap[name.substring(2).toLowerCase()]=name;if(/^_set[A-Z](.*)Attr$/.test(name)){name=name.charAt(4).toLowerCase()+name.substr(5,name.length-9);if(!proto.attributeMap||!(name in proto.attributeMap))attrs.push(name)}}}},postscript:function(params,
srcNodeRef){this.create(params,srcNodeRef)},create:function(params,srcNodeRef){this._introspect();this.srcNodeRef=dom.byId(srcNodeRef);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&typeof this.srcNodeRef.id=="string")this.id=this.srcNodeRef.id;if(params){this.params=params;lang.mixin(this,params)}this.postMixInProperties();if(!this.id){this.id=registry.getUniqueId(this.declaredClass.replace(/\./g,"_"));if(this.params)delete this.params.id}this.ownerDocument=this.ownerDocument||
(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=win.body(this.ownerDocument);registry.add(this);this.buildRendering();var deleteSrcNodeRef;if(this.domNode){this._applyAttributes();var source=this.srcNodeRef;if(source&&source.parentNode&&this.domNode!==source){source.parentNode.replaceChild(this.domNode,source);deleteSrcNodeRef=true}this.domNode.setAttribute("widgetId",this.id)}this.postCreate();if(deleteSrcNodeRef)delete this.srcNodeRef;this._created=true},_applyAttributes:function(){var params=
{};for(var key in this.params||{})params[key]=this._get(key);array.forEach(this.constructor._setterAttrs,function(key){if(!(key in params)){var val=this._get(key);if(val)this.set(key,val)}},this);for(key in params)this.set(key,params[key])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");if(this.baseClass){var classes=this.baseClass.split(" ");if(!this.isLeftToRight())classes=classes.concat(array.map(classes,
function(name){return name+"Rtl"}));domClass.add(this.domNode,classes)}},postCreate:function(){},startup:function(){if(this._started)return;this._started=true;array.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true}})},destroyRecursive:function(preserveDom){this._beingDestroyed=true;this.destroyDescendants(preserveDom);this.destroy(preserveDom)},destroy:function(preserveDom){this._beingDestroyed=true;this.uninitialize();
function destroy(w){if(w.destroyRecursive)w.destroyRecursive(preserveDom);else if(w.destroy)w.destroy(preserveDom)}array.forEach(this._connects,lang.hitch(this,"disconnect"));array.forEach(this._supportingWidgets,destroy);if(this.domNode)array.forEach(registry.findWidgets(this.domNode,this.containerNode),destroy);this.destroyRendering(preserveDom);registry.remove(this.id);this._destroyed=true},destroyRendering:function(preserveDom){if(this.bgIframe){this.bgIframe.destroy(preserveDom);delete this.bgIframe}if(this.domNode){if(preserveDom)domAttr.remove(this.domNode,
"widgetId");else domConstruct.destroy(this.domNode);delete this.domNode}if(this.srcNodeRef){if(!preserveDom)domConstruct.destroy(this.srcNodeRef);delete this.srcNodeRef}},destroyDescendants:function(preserveDom){array.forEach(this.getChildren(),function(widget){if(widget.destroyRecursive)widget.destroyRecursive(preserveDom)})},uninitialize:function(){return false},_setStyleAttr:function(value){var mapNode=this.domNode;if(lang.isObject(value))domStyle.set(mapNode,value);else if(mapNode.style.cssText)mapNode.style.cssText+=
"; "+value;else mapNode.style.cssText=value;this._set("style",value)},_attrToDom:function(attr,value,commands){commands=arguments.length>=3?commands:this.attributeMap[attr];array.forEach(lang.isArray(commands)?commands:[commands],function(command){var mapNode=this[command.node||command||"domNode"];var type=command.type||"attribute";switch(type){case "attribute":if(lang.isFunction(value))value=lang.hitch(this,value);var attrName=command.attribute?command.attribute:/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():
attr;if(mapNode.tagName)domAttr.set(mapNode,attrName,value);else mapNode.set(attrName,value);break;case "innerText":mapNode.innerHTML="";mapNode.appendChild(this.ownerDocument.createTextNode(value));break;case "innerHTML":mapNode.innerHTML=value;break;case "class":domClass.replace(mapNode,value,this[attr]);break}},this)},get:function(name){var names=this._getAttrNames(name);return this[names.g]?this[names.g]():this._get(name)},set:function(name,value){if(typeof name==="object"){for(var x in name)this.set(x,
name[x]);return this}var names=this._getAttrNames(name),setter=this[names.s];if(lang.isFunction(setter))var result=setter.apply(this,Array.prototype.slice.call(arguments,1));else{var defaultNode=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",tag=this[defaultNode]&&this[defaultNode].tagName,attrsForTag=tag&&(tagAttrs[tag]||(tagAttrs[tag]=getAttrs(this[defaultNode]))),map=name in this.attributeMap?this.attributeMap[name]:names.s in this?this[names.s]:attrsForTag&&names.l in attrsForTag&&
typeof value!="function"||/^aria-|^data-|^role$/.test(name)?defaultNode:null;if(map!=null)this._attrToDom(name,value,map);this._set(name,value)}return result||this},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name])return apn[name];var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase()});return apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()}},_set:function(name,value){var oldValue=this[name];
this[name]=value;if(this._created&&value!==oldValue){if(this._watchCallbacks)this._watchCallbacks(name,oldValue,value);this.emit("attrmodified-"+name,{detail:{prevValue:oldValue,newValue:value}})}},_get:function(name){return this[name]},emit:function(type,eventObj,callbackArgs){eventObj=eventObj||{};if(eventObj.bubbles===undefined)eventObj.bubbles=true;if(eventObj.cancelable===undefined)eventObj.cancelable=true;if(!eventObj.detail)eventObj.detail={};eventObj.detail.widget=this;var ret,callback=this["on"+
type];if(callback)ret=callback.apply(this,callbackArgs?callbackArgs:[eventObj]);if(this._started&&!this._beingDestroyed)on.emit(this.domNode,type.toLowerCase(),eventObj);return ret},on:function(type,func){var widgetMethod=this._onMap(type);if(widgetMethod)return aspect.after(this,widgetMethod,func,true);return this.own(on(this.domNode,type,func))[0]},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=ctor._onMap={};for(var attr in ctor.prototype)if(/^on/.test(attr))map[attr.replace(/^on/,
"").toLowerCase()]=attr}return map[typeof type=="string"&&type.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?registry.findWidgets(this.containerNode):[]},getParent:function(){return registry.getEnclosingWidget(this.domNode.parentNode)},connect:function(obj,event,method){return this.own(connect.connect(obj,event,this,method))[0]},disconnect:function(handle){handle.remove()},subscribe:function(t,
method){return this.own(topic.subscribe(t,lang.hitch(this,method)))[0]},unsubscribe:function(handle){handle.remove()},isLeftToRight:function(){return this.dir?this.dir=="ltr":domGeometry.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&domStyle.get(this.domNode,"display")!="none"},placeAt:function(reference,position){var refWidget=!reference.tagName&&registry.byId(reference);if(refWidget&&refWidget.addChild&&(!position||typeof position==="number"))refWidget.addChild(this,position);
else{var ref=refWidget?refWidget.containerNode&&!/after|before|replace/.test(position||"")?refWidget.containerNode:refWidget.domNode:dom.byId(reference,this.ownerDocument);domConstruct.place(this.domNode,ref,position);if(!this._started&&(this.getParent()||{})._started)this.startup()}return this},defer:function(fcn,delay){var timer=setTimeout(lang.hitch(this,function(){if(!timer)return;timer=null;if(!this._destroyed)lang.hitch(this,fcn)()}),delay||0);return{remove:function(){if(timer){clearTimeout(timer);
timer=null}return null}}}});if(0)_WidgetBase.extend(_BidiMixin);return _WidgetBase})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(dojo,regexp){dojo.cookie=function(name,value,props){var c=document.cookie,ret;if(arguments.length==1){var matches=c.match(new RegExp("(?:^|; )"+regexp.escapeString(name)+"\x3d([^;]*)"));ret=matches?decodeURIComponent(matches[1]):undefined}else{props=props||{};var exp=props.expires;if(typeof exp=="number"){var d=new Date;d.setTime(d.getTime()+
exp*24*60*60*1E3);exp=props.expires=d}if(exp&&exp.toUTCString)props.expires=exp.toUTCString();value=encodeURIComponent(value);var updatedCookie=name+"\x3d"+value,propName;for(propName in props){updatedCookie+="; "+propName;var propValue=props[propName];if(propValue!==true)updatedCookie+="\x3d"+propValue}document.cookie=updatedCookie}return ret};dojo.cookie.isSupported=function(){if(!("cookieEnabled"in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")==
"CookiesAllowed";if(navigator.cookieEnabled)this("__djCookieTest__","",{expires:-1})}return navigator.cookieEnabled};return dojo.cookie})},"xfile/types/Types":function(){define("xfile/types/Types",["dojo/_base/lang","xide/types","xide/types/Types"],function(lang,types){types.FIELDS={SHOW_ISDIR:1602,SHOW_OWNER:1604,SHOW_MIME:1608,SHOW_SIZE:1616,SHOW_PERMISSIONS:1632,SHOW_TIME:1633};types.FILE_PANEL_LAYOUT={TREE:1,LIST:2,THUMB:3,PREVIEW:4,COVER:5,SPLIT_VERTICAL:6,SPLIT_HORIZONTAL:7};types.LAYOUT_PRESET=
{DUAL:1,SINGLE:2,BROWSER:3,PREVIEW:4,GALLERY:5};types.PANEL_OPTIONS={ALLOW_NEW_TABS:true,ALLOW_MULTI_TAB:true,ALLOW_INFO_VIEW:true,ALLOW_LOG_VIEW:true,ALLOW_CONTEXT_MENU:true,ALLOW_LAYOUT_SELECTOR:true,ALLOW_SOURCE_SELECTOR:true,ALLOW_COLUMN_RESIZE:true,ALLOW_COLUMN_REORDER:true,ALLOW_COLUMN_HIDE:true};types.LAYOUT_REGION={LEFT:"left",TOP:"top",CENTER:"center",BOTTOM:"bottom"};types.FILE_PANEL_OPTIONS_LEFT={LAYOUT:2,AUTO_OPEN:true};types.FILE_PANEL_OPTIONS_MAIN={LAYOUT:3,AUTO_OPEN:true};types.FILE_PANEL_OPTIONS_RIGHT=
{LAYOUT:3,AUTO_OPEN:true};types.FILE_GRID_COLUMNS={NAME:"name",SIZE:"size",MODIFIED:"modified"};types.ACTION_TOOLBAR_MODE={SELF:"self"};lang.mixin(types.ITEM_TYPE,{FILE:"BTFILE"});lang.mixin(types.EVENTS,{STORE_CHANGED:"storeChange",BEFORE_STORE_CHANGE:"beforeStoreChange",STORE_REFRESHED:"storeRefreshed",ON_FILE_STORE_READY:"onFileStoreReady",ON_DID_OPEN_ITEM:"onDidOpenItem",ON_SHOW_PANEL:"onShowPanel",ITEM_SELECTED:"onItemSelected",ERROR:"fileOperationError",STATUS:"fileOperationStatus",IMAGE_LOADED:"imageLoaded",
IMAGE_ERROR:"imageError",RESIZE:"resize",UPLOAD_BEGIN:"uploadBegin",UPLOAD_PROGRESS:"uploadProgress",UPLOAD_FINISH:"uploadFinish",ON_CLIPBOARD_COPY:"onClipboardCopy",ON_CLIPBOARD_PASTE:"onClipboardPaste",ON_CLIPBOARD_CUT:"onClipboardCut",ON_CONTEXT_MENU_OPEN:"onContextMenuOpen",ON_PLUGIN_LOADED:"onPluginLoaded",ON_PLUGIN_READY:"onPluginReady",ON_MAIN_VIEW_READY:"onMainViewReady2",REGISTER_EDITOR:"registerEditor",REGISTER_ACTION:"registerAction",ON_FILE_CONTENT_CHANGED:"onFileContentChanged",ON_PANEL_CLOSED:"onPanelClosed",
ON_PANEL_CREATED:"onPanelCreated",ON_COPY_BEGIN:"onCopyBegin",ON_COPY_END:"onCopyEnd",ON_DOWNLOAD_TO_BEGIN:"onDownloadToBegin",ON_DOWNLOAD_TO_END:"onDownloadToEnd",ON_DELETE_BEGIN:"onDeleteBegin",ON_DELETE_END:"onDeleteEnd",ON_MOVE_BEGIN:"onMoveBegin",ON_MOVE_END:"onMoveEnd",ON_COMPRESS_BEGIN:"onCompressBegin",ON_COMPRESS_END:"onCompressEnd",ON_SOURCE_MENU_OPEN:"onSourceMenuOpen",ON_MOUNT_DATA_READY:"onMountDataReady",ON_XFILE_READY:"onXFileReady",ON_FILE_PROPERTIES_RENDERED:"onFilePropertiesRendered"});
types.SELECTION_MODE={SINGLE:"single",MULTI:"multiple",EXTENDED:"extended"};types.OPERATION={COPY:"copy",MOVE:"move",RENAME:"rename",DELETE:"delete",OPEN:"open",EDIT:"edit",DOWNLOAD:"download",DOWNLOAD_TO:"downloadTo",INFO:"info",COMPRESS:"compress",RELOAD:"reload",PREVIEW:"preview",INSERT_IMAGE:"insertImage",COPY_PASTE:"copypaste",DND:"dnd",OPTIONS:"options",NEW_FILE:"mkfile",NEW_DIRECTORY:"mkdir",GET_CONTENT:"get",SET_CONTENT:"set",FIND:"find",CUSTOM:"custom",PERMA_LINK:"permaLink",ADD_MOUNT:"ADD_MOUNT",
REMOVE_MOUNT:"REMOVE_MOUNT",EDIT_MOUNT:"EDIT_MOUNT",PERSPECTIVE:"PERSPECTIVE"};types.OPERATION_INT={NONE:0,EDIT:1,COPY:2,MOVE:3,INFO:4,DOWNLOAD:5,COMPRESS:6,DELETE:7,RENAME:8,DND:9,COPY_PASTE:10,OPEN:11,RELOAD:12,PREVIEW:14,INSERT_IMAGE:15,NEW_FILE:16,NEW_DIRECTORY:17,UPLOAD:18,READ:19,WRITE:20,PLUGINS:21,CUSTOM:22,FIND:23,PERMA_LINK:24,ADD_MOUNT:25,REMOVE_MOUNT:26,EDIT_MOUNT:27,PERSPECTIVE:28};return types})},"xblox/model/Expression":function(){define("xblox/model/Expression",["dojo/_base/declare",
"xblox/model/ModelBase","xide/types","xide/factory"],function(declare,ModelBase,types,factory){return declare("xblox.model.Expression",[ModelBase],{id:null,context:null,variableDelimiters:{begin:"[",end:"]"},blockCallDelimiters:{begin:"{",end:"}"},expressionCache:{},parse:function(scope,expression,addVariables,runCallback,errorCallback,context){expression=this.replaceAll("''","'",expression);expression=this.replaceVariables(scope,expression);if(!this.isScript(expression)&&(this.isString(expression)||
this.isNumber(expression)))return expression;if(expression.indexOf("return")==-1)expression="return "+expression;else;addVariables=false;if(addVariables===true){var _otherVariables=scope.variablesToJavascript(null,expression);if(_otherVariables){expression=_otherVariables+expression;expression=this.replaceAll("''","'",expression)}}var parsed=this;try{expression=this.replaceAll("''","'",expression);var _function=this.expressionCache[expression];if(!_function){_function=new Function("{"+expression+
"; }");this.expressionCache[expression]=_function}parsed=_function.call(context||this.context||{})}catch(e){console.error("     invalid expression : \n"+expression,e);if(errorCallback)errorCallback("invalid expression : \n"+expression+": "+e);parsed=""+expression;return parsed}if(parsed===true)0&&console.log("        expression return true! : "+expression);if(runCallback)runCallback("Expression "+expression+" evaluates to "+parsed);return parsed},parseVariableO:function(scope,_var){var value=""+_var.value;
if(_var.title==="None")return"";try{var _otherVariables=scope.variablesToJavascript(_var,false);if(_otherVariables)value=_otherVariables+value;var _function=new Function("{"+value+"}");var _parsed=_function.call(this.context||{});if(_parsed==="undefined"||typeof _parsed==="undefined")value=""+_var.value;else if(!this.isNumber(_parsed)){value=""+_parsed;value="'"+value+"'"}else value=_parsed}catch(e){console.error("parse variable failed : "+_var.title+"\n"+value)}return value},variableFuncCache:{},
parseVariable:function(scope,_var){var value=""+_var.value;var _function=this.variableFuncCache[_var.title];if(!_function){_function=new Function("{"+value+"}");this.variableFuncCache[_var.title]=_function}var _parsed=_function.apply(this.context||{});if(_parsed==="undefined"||typeof _parsed==="undefined")value=""+_var.value;else if(!this.isNumber(_parsed)){value=""+_parsed;value="'"+value+"'"}else value=_parsed;return value},replaceVariables:function(scope,expression,_evaluate,_escape){var ocurr=
this._findOcurrences(expression,this.variableDelimiters);if(ocurr)for(var n=0;n<ocurr.length;n++){var _var=this._getVar(scope,ocurr[n]);var value=null;if(_var){value=this.getValue(_var.value);if(this.isScript(value)&&_evaluate!==false)try{var _otherVariables=scope.variablesToJavascript(_var,true);if(_otherVariables)value=_otherVariables+value;var _parsed=(new Function("{"+value+"}")).call(this.context||{});0&&console.log(" parsed variable value to : "+_parsed);if(_parsed==="undefined"||typeof _parsed===
"undefined")value=""+_var.value;else{value=_parsed;value="'"+value+"'"}}catch(e){0&&console.log(" parsed variable expression failed \n"+value,e)}else if(!this.isNumber(value))if(_escape!==false)value="'"+value+"'";else;else;}else{0&&console.log("   expression failed, no such variable :"+ocurr[n]+" ! setting to default "+"");value=""}expression=expression.replace(ocurr[n],value)}return expression},replaceBlockCalls:function(scope,expression){var ocurr=this._findOcurrences(expression,this.blockCallDelimiters);
if(ocurr)for(var n=0;n<ocurr.length;n++){var blockName=this._removeDelimiters(ocurr[n],this.blockCallDelimiters);var blockResult=scope.solveBlock(blockName).join("\n");expression=expression.replace(ocurr[n],blockResult)}return expression},_getVar:function(scope,vartext){return scope.getVariable(this._getVarName(vartext))},_getVarName:function(vartext){return this._removeDelimiters(vartext,this.variableDelimiters)},_removeDelimiters:function(text,delimiters){var text=text.replace(delimiters.begin,
"").replace(delimiters.end,"");return text},_escapeRegExp:function(string){var special=["[","]","(",")","{","}","*","+","."];for(var n=0;n<special.length;n++)string=string.replace(special[n],"\\"+special[n]);return string},_findOcurrences:function(expression,delimiters){var d={begin:this._escapeRegExp(delimiters.begin),end:this._escapeRegExp(delimiters.end)};var allExceptEnd="[^"+d.end+"]*";var patt=d.begin+"("+allExceptEnd+")"+d.end;return expression.match(new RegExp(patt,"g"))}})})},"xide/widgets/EditorToolbar":function(){define(["dojo/_base/declare",
"dijit/Toolbar","xide/factory"],function(declare,Toolbar,factory){return declare("xide.widgets.EditorToolbar",[Toolbar],{delegate:null,saveContentCB:function(thiz,res){},onFullscreen:function(ref){ref.delegate.onFullscreen()},onSave:function(ref){ref.delegate.onSave()},saveContent:function(){var value=this.aceEditor.get("value");sctx.getStyleManager().updateSheet(sctx.getSession().getUUID(),sctx.getSession().getAppId(),xapp.utils.toString(this.dataItem.path),value);sctx.getWorkflowManager().onCSSEditorChange(this.dataItem,
value)},startup:function(){this.inherited(arguments);this.wButton0=factory.createButton(this.domNode,"","toolbarButton","","Save",this.onSave,this)}})})},"dijit/MenuBarItem":function(){require({cache:{"url:dijit/templates/MenuBarItem.html":'\x3cdiv class\x3d"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel" data-dojo-attach-point\x3d"focusNode"\n\t \trole\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,textDirNode"\x3e\x3c/span\x3e\n\x3c/div\x3e\n'}});
define("dijit/MenuBarItem",["dojo/_base/declare","./MenuItem","dojo/text!./templates/MenuBarItem.html"],function(declare,MenuItem,template){var _MenuBarItemMixin=declare("dijit._MenuBarItemMixin",null,{templateString:template,_setIconClassAttr:null});var MenuBarItem=declare("dijit.MenuBarItem",[MenuItem,_MenuBarItemMixin],{});MenuBarItem._MenuBarItemMixin=_MenuBarItemMixin;return MenuBarItem})},"xblox/model/code/RunScript":function(){define("xblox/model/code/RunScript",["dojo/_base/declare","dojo/_base/lang",
"dojo/Deferred","xblox/model/Block","xide/utils"],function(declare,lang,Deferred,Block,utils){return declare("xblox.model.code.RunScript",[Block],{name:"Run Script",method:"",args:"",deferred:false,getContext:function(){if(this.scope.context&&this.scope.context.instance)return this.scope.context.instance;return null},solve:function(scope,settings,run,error){this._currentIndex=0;this._return=[];var _script=""+this.method;var thiz=this;if(_script&&_script.length){var _function=new Function("{"+_script+
"}");var _args=this.getArgs();try{var _parsed=_function.apply(this,_args||{});this._lastResult=_parsed;if(run)run("Expression "+_script+" evaluates to "+_parsed);if(_parsed!=="false"&&_parsed!==false)this.onSuccess(this,settings);else{this.onFailed(this,settings);return[]}}catch(e){if(error)error("invalid expression : \n"+_script+": "+e);this.onFailed(this,settings);return[]}}else console.error("have no script");var ret=[],items=this[this._getContainer()];if(items.length)this.runFrom(items,0,settings);
else this.onSuccess(this,settings);return ret},toText:function(){var result=this.getBlockIcon()+" "+this.name+" :: ";if(this.method)result+=this.method.substr(0,50);return result},canAdd:function(){return[]},getFields:function(){var fields=this.inherited(arguments)||this.getDefaultFields();var thiz=this;fields.push(this.utils.createCI("deferred",0,this.deferred,{group:"General",title:"Deferred",dst:"deferred"}));fields.push(this.utils.createCI("value",25,this.method,{group:"General",title:"Script",
dst:"method",delegate:{runExpression:function(val,run,error){var old=thiz.method;thiz.method=val;var _res=thiz.solve(thiz.scope,null,run,error)}}}));fields.push(this.utils.createCI("value",27,this.args,{group:"General",title:"Arguments",dst:"args"}));return fields},getBlockIcon:function(){return'\x3cspan class\x3d"fa-code"\x3e\x3c/span\x3e'},mayHaveChildren:function(parent){return this.items!=null&&this.items.length>0},getChildren:function(parent){return this.items}})})},"xide/views/ACEEditor":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","dojo/dom-class","xide/layout/ContentPane","xide/views/_EditorBase","xide/views/TextEditor","xide/utils","xide/types","xide/factory","xide/widgets/ActionSelectWidget","dijit/MenuItem","dojo/cookie"],function(declare,lang,has,domClass,ContentPane,_EditorBase,TextEditor,utils,types,factory,ActionSelectWidget,MenuItem,cookie){var _loadedModes={};var _loadedThemes={};var aceModes=["abap","actionscript","ada","apache_conf","applescript","asciidoc","assembly_x86","autohotkey",
"batchfile","c_cpp","cirru","clojure","cobol","coffee","coldfusion","csharp","css","curly","d","dart","diff","django","dockerfile","dot","ejs","erlang","forth","ftl","gherkin","gitignore","glsl","golang","groovy","haml","handlebars","haskell","haxe","html","html_ruby","ini","jack","jade","java","javascript","json","jsoniq","jsp","jsx","julia","latex","less","liquid","lisp","livescript","logiql","lsl","lua","luapage","lucene","matlab","makefile","markdown","mel","mushcode","mysql","nix","objectivec",
"ocaml","pascal","perl","pgsql","php","plain_text","powershell","prolog","protobuf","python","r","rdoc","rhtml","ruby","rust","sass","scad","scala","scheme","scss","sh","sjs","smarty","snippets","soy_template","space","sql","stylus","svg","tcl","tex","text","textile","toml","typescript","twig","vala","vbscript","velocity","verilog","vhdl","xml","xquery","yaml"];return declare("xide.views.ACEEditor",[ContentPane,_EditorBase],{closeable:true,aceEditor:null,value:null,editorOptions:null,fileName:null,
didStart:false,defaultTheme:"ambiance",autoSelect:true,iconClassNormal:null,lastSavedContent:null,cookiePrefix:"",getActiveItem:function(){return null},hasItemActions:function(){return true},getItem:function(){return{}},getEditor:function(){return this.aceEditor||this},getItemActions:function(){var actions=[],thiz=this;actions.push({title:"Reload",icon:"el-icon-refresh",disabled:false,command:"Reload",place:"last",emit:false,style:"",handler:function(){thiz.reload()}});actions.push({title:"Save (CTRL + S)",
icon:"fa-floppy-o",disabled:false,command:"Save",place:"last",emit:false,style:"",handler:function(){thiz.save()}});actions.push({title:"Increase Text Size (CTRL+)",icon:"fa-search-plus",disabled:false,command:"Plus",place:"last",emit:false,style:"",handler:function(){var _editor=thiz.aceEditor.getEditor();var size=parseInt(_editor.getFontSize(),10)||12;_editor.setFontSize(size+1)}});actions.push({title:"Decrease Text Size (CTRL-)",icon:"fa-search-minus",disabled:false,command:"Plus",place:"last",
emit:false,style:"",handler:function(){var _editor=thiz.aceEditor.getEditor();var size=parseInt(_editor.getFontSize(),10)||12;_editor.setFontSize(Math.max(size-1||1))}});var widget=utils.addWidget(ActionSelectWidget,{item:null,delegate:this,style:"float:left;",iconClass:"fa-code"},this,dojo.doc.createElement("div"),true);actions.push(widget);this._addModes(widget);widget=new ActionSelectWidget({item:null,delegate:this,style:"float:left;",iconClass:"fa-cog"},dojo.doc.createElement("div"));widget.startup();
actions.push(widget);this._addThemes(widget);return actions},reload:function(){var thiz=this;var _ready=function(content){thiz.setValue(content)};this.getContent(_ready)},save:function(){this.saveContent()},_createModeWidget:function(title,mode){var thiz=this;var widget=new MenuItem({label:title,checked:false,mode:mode,iconClass:"fa-code"});dojo.connect(widget,"onClick",function(){thiz.setMode(mode)});return widget},onContentChange:function(changed){var isTab=this.controlButton!=null;if(isTab)domClass.toggle(this.controlButton.domNode,
"unsavedContent",changed);else;},attachACE:function(value){var mode=this._getMode(this.fileName),thiz=this;var _options={region:"center",value:value,style:"margin: 0; padding: 0; position:relative;overflow: auto;height:inherit;width:inherit;text-align:left;",readOnly:false,tabSize:2,softTabs:false,wordWrap:false,showPrintMargin:false,highlightActiveLine:false,fontSize:"14px",showGutter:true,className2:"editor-ace ace_editor",className:"editor-ace ace_editor",onDidChange:function(){thiz.onContentChange(thiz.getValue()!==
thiz.lastSavedContent)}};if(this.editorOptions)_options=lang.mixin(_options,this.editorOptions);var editorPane=new TextEditor(_options,dojo.doc.createElement("div"));this.containerNode.appendChild(editorPane.domNode);editorPane.startup();this.aceEditor=editorPane;this.aceEditor.setOptions();var _cookie=this.cookiePrefix+"_ace";var settings=cookie(_cookie);if(settings)this.defaultTheme=settings;setTimeout(function(){thiz.setMode(mode);thiz.setTheme(thiz.defaultTheme);factory.publish(types.EVENTS.RESIZE,
{},this);if(thiz.autoSelect)factory.publish(types.EVENTS.ITEM_SELECTED,{owner:thiz,item:thiz.item},thiz)},10)},loadScript:function(url,attributes,readyCB){0&&console.log("ace : load "+url);var jsElm=document.createElement("script");jsElm.type="application/javascript";jsElm.src=url;jsElm.onload=function(){if(readyCB)readyCB()};document.body.appendChild(jsElm)},getThemeData:function(){return[["Chrome"],["Clouds"],["Crimson Editor"],["Dawn"],["Dreamweaver"],["Eclipse"],["GitHub"],["Solarized Light"],
["TextMate"],["Tomorrow"],["XCode"],["Kuroir"],["KatzenMilch"],["Ambiance","ambiance","dark"],["Chaos","chaos","dark"],["Clouds Midnight","clouds_midnight","dark"],["Cobalt","cobalt","dark"],["idle Fingers","idle_fingers","dark"],["krTheme","kr_theme","dark"],["Merbivore","merbivore","dark"],["Merbivore Soft","merbivore_soft","dark"],["Mono Industrial","mono_industrial","dark"],["Monokai","monokai","dark"],["Pastel on dark","pastel_on_dark","dark"],["Solarized Dark","solarized_dark","dark"],["Terminal",
"terminal","dark"],["Tomorrow Night","tomorrow_night","dark"],["Tomorrow Night Blue","tomorrow_night_blue","dark"],["Tomorrow Night Bright","tomorrow_night_bright","dark"],["Tomorrow Night 80s","tomorrow_night_eighties","dark"],["Twilight","twilight","dark"],["Vibrant Ink","vibrant_ink","dark"]]},setTheme:function(theme){var _cookie=this.cookiePrefix+"_ace";cookie(_cookie,theme);var thiz=this;if(this.ctx&&this.ctx.getResourceManager())if(!_loadedThemes[theme]){var webRoot=this.ctx.getResourceManager().getVariable(types.RESOURCE_VARIABLES.APP_URL);
if(has("debug")===true)webRoot+="/lib/ace/src-min-noconflict/";else webRoot+="/xfile/ext/ace/";var themeFile=webRoot+"/theme-"+theme+".js";this.loadScript(themeFile,null,function(){_loadedThemes[theme]=true;thiz.aceEditor.set("theme",theme)})}else thiz.aceEditor.set("theme",theme);else console.error("have no resource manager!!!")},_createThemeWidget:function(title,theme){var thiz=this;var widget=new MenuItem({label:title,checked:false,theme:theme});dojo.connect(widget,"onClick",function(){thiz.setTheme(theme)});
return widget},_addThemes:function(widget){var themes=this.getThemeData();var aceThemes=[];for(var i=0;i<themes.length;i++){var data=themes[i];var name=data[1]||data[0].replace(/ /g,"_").toLowerCase();var theme={caption:data[0],theme:name,isDark:data[2]=="dark",name:data[0],title:data[0],icon:"fa-code",disabled:false,command:"Reload",place:"last",emit:false,style:""};aceThemes.push(theme)}for(var i=0;i<aceThemes.length;i++){var theme=aceThemes[i];var themeWidget=this._createThemeWidget(theme.caption,
theme.theme,true);widget.menu.addChild(themeWidget);widget.menuItems.push(themeWidget)}},setMode:function(mode){if(this.ctx&&this.ctx.getResourceManager()){var thiz=this;if(!_loadedModes[mode]){var webRoot=this.ctx.getResourceManager().getVariable(types.RESOURCE_VARIABLES.APP_URL);if(has("debug")===true)webRoot+="/lib/ace/src-min-noconflict/";else webRoot+="/xfile/ext/ace/";var modeFile=webRoot+"/mode-"+mode+".js";this.loadScript(modeFile,null,function(){_loadedModes[mode]=true;thiz.aceEditor.set("mode",
mode)})}else 0&&console.log("mode already loaded");this.aceEditor.set("mode",mode)}else console.error("have no resource manager!")},_addModes:function(widget){var _modes=[],thiz=this;var modeOptions=[];var maxOptionsColumn=15;var firstOption=0;var max=0;for(var i=0;i<aceModes.length;i++)modeOptions.push("\x3cli\x3e\x3ca\x3e"+aceModes[i]+"\x3c/a\x3e\x3c/li\x3e");var html='\x3ctable class\x3d"options-menu ui-widget-content"\x3e\x3ctr\x3e';while(true){html+="\x3ctd\x3e\x3cul\x3e";if(modeOptions.length-
firstOption<maxOptionsColumn)max=modeOptions.length;else max=firstOption+maxOptionsColumn;var currentcolumn=modeOptions.slice(firstOption,max);for(var i=0;i<currentcolumn.length;i++)html+=currentcolumn[i];html+="\x3c/ul\x3e\x3c/td\x3e";firstOption=firstOption+maxOptionsColumn;if(firstOption>=modeOptions.length)break}html+="\x3c/tr\x3e\x3c/table\x3e";var modeWidget=new MenuItem({label:"No Title"});widget.menu.addChild(modeWidget);modeWidget.domNode.innerHTML=html;domClass.add(modeWidget.domNode,"options-menu");
domClass.add(modeWidget.domNode,"ui-widget-content");modeWidget.on("click",function(e){var newMode=e.target.text;if(newMode)thiz.setMode(newMode)})},getValue:function(){return this.aceEditor.get("value")},setValue:function(value){if(this.aceEditor)return this.aceEditor.set("value",value);else console.error("ACEEditor::setValue failed, invalid state")},_getMode:function(fileName){fileName=fileName||this.fileName;var ext="javascript";if(fileName){ext=utils.getFileExtension(fileName)||"js";if(ext===
"js"||ext==="xblox")ext="javascript";if(ext==="html"||ext==="cfhtml")ext="html";if(ext==="cp")ext="xml"}return ext},startup:function(){if(this.didStart)return;this.didStart=true;this.iconClassNormal=""+this.iconClass;this.set("iconClass","fa-spinner fa-spin");this.inherited(arguments);var thiz=this;if(this.value)this.attachACE(this.value);else this.getContent(function(content){thiz.set("iconClass",thiz.iconClassNormal);thiz.lastSavedContent=content;thiz.attachACE(content)},function(error){thiz.attachACE()});
this.on("click",function(){this.publish(types.EVENTS.ON_ITEM_SELECTED,{item:{},owner:this});if(thiz.onItemClear)thiz.onItemClear();if(thiz.onItemClick)thiz.onItemClick(null)})}})})},"dojo/_base/fx":function(){define(["./kernel","./config","./lang","../Evented","./Color","./connect","./sniff","../dom","../dom-style"],function(dojo,config,lang,Evented,Color,connect,has,dom,style){var _mixin=lang.mixin;var basefx={};var _Line=basefx._Line=function(start,end){this.start=start;this.end=end};_Line.prototype.getValue=
function(n){return(this.end-this.start)*n+this.start};var Animation=basefx.Animation=function(args){_mixin(this,args);if(lang.isArray(this.curve))this.curve=new _Line(this.curve[0],this.curve[1])};Animation.prototype=new Evented;lang.extend(Animation,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var _p=this._percent,_e=this.easing;return _e?_e(_p):_p},_fire:function(evt,args){var a=args||[];if(this[evt])if(config.debugAtAllCosts)this[evt].apply(this,a);else try{this[evt].apply(this,
a)}catch(e){console.error("exception in animation handler for:",evt);console.error(e)}return this},play:function(delay,gotoStart){var _t=this;if(_t._delayTimer)_t._clearTimer();if(gotoStart){_t._stopTimer();_t._active=_t._paused=false;_t._percent=0}else if(_t._active&&!_t._paused)return _t;_t._fire("beforeBegin",[_t.node]);var de=delay||_t.delay,_p=lang.hitch(_t,"_play",gotoStart);if(de>0){_t._delayTimer=setTimeout(_p,de);return _t}_p();return _t},_play:function(gotoStart){var _t=this;if(_t._delayTimer)_t._clearTimer();
_t._startTime=(new Date).valueOf();if(_t._paused)_t._startTime-=_t.duration*_t._percent;_t._active=true;_t._paused=false;var value=_t.curve.getValue(_t._getStep());if(!_t._percent){if(!_t._startRepeatCount)_t._startRepeatCount=_t.repeat;_t._fire("onBegin",[value])}_t._fire("onPlay",[value]);_t._cycle();return _t},pause:function(){var _t=this;if(_t._delayTimer)_t._clearTimer();_t._stopTimer();if(!_t._active)return _t;_t._paused=true;_t._fire("onPause",[_t.curve.getValue(_t._getStep())]);return _t},
gotoPercent:function(percent,andPlay){var _t=this;_t._stopTimer();_t._active=_t._paused=true;_t._percent=percent;if(andPlay)_t.play();return _t},stop:function(gotoEnd){var _t=this;if(_t._delayTimer)_t._clearTimer();if(!_t._timer)return _t;_t._stopTimer();if(gotoEnd)_t._percent=1;_t._fire("onStop",[_t.curve.getValue(_t._getStep())]);_t._active=_t._paused=false;return _t},status:function(){if(this._active)return this._paused?"paused":"playing";return"stopped"},_cycle:function(){var _t=this;if(_t._active){var curr=
(new Date).valueOf();var step=_t.duration===0?1:(curr-_t._startTime)/_t.duration;if(step>=1)step=1;_t._percent=step;if(_t.easing)step=_t.easing(step);_t._fire("onAnimate",[_t.curve.getValue(step)]);if(_t._percent<1)_t._startTimer();else{_t._active=false;if(_t.repeat>0){_t.repeat--;_t.play(null,true)}else if(_t.repeat==-1)_t.play(null,true);else if(_t._startRepeatCount){_t.repeat=_t._startRepeatCount;_t._startRepeatCount=0}_t._percent=0;_t._fire("onEnd",[_t.node]);!_t.repeat&&_t._stopTimer()}}return _t},
_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var ctr=0,timer=null,runner={run:function(){}};lang.extend(Animation,{_startTimer:function(){if(!this._timer){this._timer=connect.connect(runner,"run",this,"_cycle");ctr++}if(!timer)timer=setInterval(lang.hitch(runner,"run"),this.rate)},_stopTimer:function(){if(this._timer){connect.disconnect(this._timer);this._timer=null;ctr--}if(ctr<=0){clearInterval(timer);timer=null;ctr=0}}});var _makeFadeable=has("ie")?function(node){var ns=
node.style;if(!ns.width.length&&style.get(node,"width")=="auto")ns.width="auto"}:function(){};basefx._fade=function(args){args.node=dom.byId(args.node);var fArgs=_mixin({properties:{}},args),props=fArgs.properties.opacity={};props.start=!("start"in fArgs)?function(){return+style.get(fArgs.node,"opacity")||0}:fArgs.start;props.end=fArgs.end;var anim=basefx.animateProperty(fArgs);connect.connect(anim,"beforeBegin",lang.partial(_makeFadeable,fArgs.node));return anim};basefx.fadeIn=function(args){return basefx._fade(_mixin({end:1},
args))};basefx.fadeOut=function(args){return basefx._fade(_mixin({end:0},args))};basefx._defaultEasing=function(n){return 0.5+Math.sin((n+1.5)*Math.PI)/2};var PropLine=function(properties){this._properties=properties;for(var p in properties){var prop=properties[p];if(prop.start instanceof Color)prop.tempColor=new Color}};PropLine.prototype.getValue=function(r){var ret={};for(var p in this._properties){var prop=this._properties[p],start=prop.start;if(start instanceof Color)ret[p]=Color.blendColors(start,
prop.end,r,prop.tempColor).toCss();else if(!lang.isArray(start))ret[p]=(prop.end-start)*r+start+(p!="opacity"?prop.units||"px":0)}return ret};basefx.animateProperty=function(args){var n=args.node=dom.byId(args.node);if(!args.easing)args.easing=dojo._defaultEasing;var anim=new Animation(args);connect.connect(anim,"beforeBegin",anim,function(){var pm={};for(var p in this.properties){if(p=="width"||p=="height")this.node.display="block";var prop=this.properties[p];if(lang.isFunction(prop))prop=prop(n);
prop=pm[p]=_mixin({},lang.isObject(prop)?prop:{end:prop});if(lang.isFunction(prop.start))prop.start=prop.start(n);if(lang.isFunction(prop.end))prop.end=prop.end(n);var isColor=p.toLowerCase().indexOf("color")>=0;function getStyle(node,p){var v={height:node.offsetHeight,width:node.offsetWidth}[p];if(v!==undefined)return v;v=style.get(node,p);return p=="opacity"?+v:isColor?v:parseFloat(v)}if(!("end"in prop))prop.end=getStyle(n,p);else if(!("start"in prop))prop.start=getStyle(n,p);if(isColor){prop.start=
new Color(prop.start);prop.end=new Color(prop.end)}else prop.start=p=="opacity"?+prop.start:parseFloat(prop.start)}this.curve=new PropLine(pm)});connect.connect(anim,"onAnimate",lang.hitch(style,"set",anim.node));return anim};basefx.anim=function(node,properties,duration,easing,onEnd,delay){return basefx.animateProperty({node:node,duration:duration||Animation.prototype.duration,properties:properties,easing:easing,onEnd:onEnd}).play(delay||0)};if(1){_mixin(dojo,basefx);dojo._Animation=Animation}return basefx})},
"dojox/layout/ResizeHandle":function(){define("dojox/layout/ResizeHandle",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/event","dojo/_base/fx","dojo/_base/window","dojo/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dijit/_base/manager","dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(kernel,lang,connect,arrayUtil,eventUtil,fxBase,windowBase,fxUtil,domUtil,domClass,domGeometry,domStyle,manager,Widget,TemplatedMixin,
declare){kernel.experimental("dojox.layout.ResizeHandle");var _ResizeHelper=declare("dojox.layout._ResizeHelper",Widget,{show:function(){domStyle.set(this.domNode,"display","")},hide:function(){domStyle.set(this.domNode,"display","none")},resize:function(dim){domGeometry.setMarginBox(this.domNode,dim)}});var ResizeHandle=declare("dojox.layout.ResizeHandle",[Widget,TemplatedMixin],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,
animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:'\x3cdiv dojoAttachPoint\x3d"resizeHandle" class\x3d"dojoxResizeHandle"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e',postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=manager.byId("dojoxGlobalResizeHelper");
if(!this._resizeHelper){this._resizeHelper=(new _ResizeHelper({id:"dojoxGlobalResizeHelper"})).placeAt(windowBase.body());domClass.add(this._resizeHelper.domNode,this.activeResizeClass)}}else this.animateSizing=false;if(!this.minSize)this.minSize={w:this.minWidth,h:this.minHeight};if(this.constrainMax)this.maxSize={w:this.maxWidth,h:this.maxHeight};this._resizeX=this._resizeY=false;var addClass=lang.partial(domClass.add,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=
this._resizeY=true;addClass("dojoxResizeNW");break;case "x":this._resizeX=true;addClass("dojoxResizeW");break;case "y":this._resizeY=true;addClass("dojoxResizeN");break}},_beginSizing:function(e){if(this._isSizing)return;connect.publish(this.startTopic,[this]);this.targetWidget=manager.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:domUtil.byId(this.targetId);if(this.targetContainer)this.targetDomNode=this.targetContainer;if(!this.targetDomNode)return;if(!this.activeResize){var c=
domGeometry.position(this.targetDomNode,true);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();if(!this.isLeftToRight())this._resizeHelper.startPosition={l:c.x,t:c.y}}this._isSizing=true;this.startPoint={x:e.clientX,y:e.clientY};var style=domStyle.getComputedStyle(this.targetDomNode),borderModel=domGeometry.boxModel==="border-model",padborder=borderModel?{w:0,h:0}:domGeometry.getPadBorderExtents(this.targetDomNode,style),margin=domGeometry.getMarginExtents(this.targetDomNode,
style);this.startSize={w:domStyle.get(this.targetDomNode,"width",style),h:domStyle.get(this.targetDomNode,"height",style),pbw:padborder.w,pbh:padborder.h,mw:margin.w,mh:margin.h};if(!this.isLeftToRight()&&domStyle.get(this.targetDomNode,"position")=="absolute"){var p=domGeometry.position(this.targetDomNode,true);this.startPosition={l:p.x,t:p.y}}this._pconnects=[connect.connect(windowBase.doc,"onmousemove",this,"_updateSizing"),connect.connect(windowBase.doc,"onmouseup",this,"_endSizing")];eventUtil.stop(e)},
_updateSizing:function(e){if(this.activeResize)this._changeSizing(e);else{var tmp=this._getNewCoords(e,"border",this._resizeHelper.startPosition);if(tmp===false)return;this._resizeHelper.resize(tmp)}e.preventDefault()},_getNewCoords:function(e,box,startPosition){try{if(!e.clientX||!e.clientY)return false}catch(err){return false}this._activeResizeLastEvent=e;var dx=(this.isLeftToRight()?1:-1)*(this.startPoint.x-e.clientX),dy=this.startPoint.y-e.clientY,newW=this.startSize.w-(this._resizeX?dx:0),newH=
this.startSize.h-(this._resizeY?dy:0),r=this._checkConstraints(newW,newH);startPosition=startPosition||this.startPosition;if(startPosition&&this._resizeX){r.l=startPosition.l+dx;if(r.w!=newW)r.l+=newW-r.w;r.t=startPosition.t}switch(box){case "margin":r.w+=this.startSize.mw;r.h+=this.startSize.mh;case "border":r.w+=this.startSize.pbw;r.h+=this.startSize.pbh;break}return r},_checkConstraints:function(newW,newH){if(this.minSize){var tm=this.minSize;if(newW<tm.w)newW=tm.w;if(newH<tm.h)newH=tm.h}if(this.constrainMax&&
this.maxSize){var ms=this.maxSize;if(newW>ms.w)newW=ms.w;if(newH>ms.h)newH=ms.h}if(this.fixedAspect){var w=this.startSize.w,h=this.startSize.h,delta=w*newH-h*newW;if(delta<0)newW=newH*w/h;else if(delta>0)newH=newW*h/w}return{w:newW,h:newH}},_changeSizing:function(e){var isWidget=this.targetWidget&&lang.isFunction(this.targetWidget.resize),tmp=this._getNewCoords(e,isWidget&&"margin");if(tmp===false)return;if(isWidget)this.targetWidget.resize(tmp);else if(this.animateSizing){var anim=fxUtil[this.animateMethod]([fxBase.animateProperty({node:this.targetDomNode,
properties:{width:{start:this.startSize.w,end:tmp.w}},duration:this.animateDuration}),fxBase.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:tmp.h}},duration:this.animateDuration})]);anim.play()}else domStyle.set(this.targetDomNode,{width:tmp.w+"px",height:tmp.h+"px"});if(this.intermediateChanges)this.onResize(e)},_endSizing:function(e){arrayUtil.forEach(this._pconnects,connect.disconnect);var pub=lang.partial(connect.publish,this.endTopic,[this]);if(!this.activeResize){this._resizeHelper.hide();
this._changeSizing(e);setTimeout(pub,this.animateDuration+15)}else pub();this._isSizing=false;this.onResize(e)},onResize:function(e){}});return ResizeHandle})},"dojo/uacss":function(){define("dojo/uacss",["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(geometry,lang,ready,has,baseWindow){var html=baseWindow.doc.documentElement,ie=has("ie"),opera=has("opera"),maj=Math.floor,ff=has("ff"),boxModel=geometry.boxModel.replace(/-/,""),classes={"dj_quirks":has("quirks"),"dj_opera":opera,
"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_gecko":has("mozilla")};if(ie){classes["dj_ie"]=true;classes["dj_ie"+maj(ie)]=true;classes["dj_iequirks"]=has("quirks")}if(ff)classes["dj_ff"+maj(ff)]=true;classes["dj_"+boxModel]=true;var classStr="";for(var clz in classes)if(classes[clz])classStr+=clz+" ";html.className=lang.trim(html.className+" "+classStr);ready(90,function(){if(!geometry.isBodyLtr()){var rtlClassStr="dj_rtl dijitRtl "+classStr.replace(/ /g,
"-rtl ");html.className=lang.trim(html.className+" "+rtlClassStr+"dj_rtl dijitRtl "+classStr.replace(/ /g,"-rtl "))}});return has})},"dojo/_base/NodeList":function(){define("dojo/_base/NodeList",["./kernel","../query","./array","./html","../NodeList-dom"],function(dojo,query,array){var NodeList=query.NodeList,nlp=NodeList.prototype;nlp.connect=NodeList._adaptAsForEach(function(){return dojo.connect.apply(this,arguments)});nlp.coords=NodeList._adaptAsMap(dojo.coords);NodeList.events=["blur","focus",
"change","click","error","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","submit"];array.forEach(NodeList.events,function(evt){var _oe="on"+evt;nlp[_oe]=function(a,b){return this.connect(_oe,a,b)}});dojo.NodeList=NodeList;return NodeList})},"xwordpress/manager/FileManager":function(){define("xwordpress/manager/FileManager",["dojo/_base/declare","xfile/manager/FileManager"],function(declare,FileManager){return declare("xwordpress.manager.FileManager",
[FileManager],{serviceUrl:"../../admin.php?page\x3dxfile\x26view\x3drpc",getUploadUrl:function(){var downloadUrl=""+this.serverActionName;downloadUrl=downloadUrl.replace("view\x3drpc","view\x3dupload");downloadUrl=downloadUrl.replace("../../","./");downloadUrl+=(downloadUrl.indexOf("?")>=0?"\x26":"?")+"service\x3dXapp_FileService.upload\x26view\x3dupload";return downloadUrl}})})},"cbtree/util/IE8_Event":function(){define("cbtree/util/IE8_Event",function(){function IE8_Event(target,type,props,ieEventObject){this.target=
target;this.currentTarget=target;this.eventPhase=2;this.bubbles=!!(props&&props.bubbles);this.cancelable=!!(props&&props.cancelable);this.isTrusted=false;this.defaultPrevented=false;this.ieEventObject=ieEventObject;this.type=type;this.stopPropagation=this.stopImmediatePropagation=function(){ieEventObject.cancelBubble=true};this.preventDefault=function(){ieEventObject.returnValue=false;this.defaultPrevented=true}}return IE8_Event})},"xfile/widgets/Evented":function(){define("xfile/widgets/Evented",
["dojo/aspect","dojo/on"],function(aspect,on){function Evented(){this.on=function(type,listener){function onMethod(target,type){var ctor=target.constructor;var onMap=ctor._onMap;if(!onMap){onMap=ctor._onMap={};for(var attr in ctor.prototype)if(/^on/.test(attr))onMap[attr.replace(/^on/,"").toLowerCase()]=attr}var method=onMap[type.toLowerCase()]||"on"+type;return method}return on.parse(this,type,listener,function(target,type){return aspect.after(target,onMethod(target,type),listener,true)})};this.emit=
function(type,event){var args=[this];if(!event.type)event.type=type;args.push.apply(args,arguments);return on.emit.apply(on,args)}}return Evented})},"dijit/form/_FormWidget":function(){define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(declare,has,kernel,ready,_Widget,_CssStateMixin,_TemplatedMixin,_FormWidgetMixin){if(has("dijit-legacy-requires"))ready(0,function(){var requires=
["dijit/form/_FormValueWidget"];require(requires)});return declare("dijit.form._FormWidget",[_Widget,_TemplatedMixin,_CssStateMixin,_FormWidgetMixin],{setDisabled:function(disabled){kernel.deprecated("setDisabled("+disabled+") is deprecated. Use set('disabled',"+disabled+") instead.","","2.0");this.set("disabled",disabled)},setValue:function(value){kernel.deprecated("dijit.form._FormWidget:setValue("+value+") is deprecated.  Use set('value',"+value+") instead.","","2.0");this.set("value",value)},
getValue:function(){kernel.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!has("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})})},"xfile/views/_ItemActionMixin":function(){define("xfile/views/_ItemActionMixin",["dojo/_base/declare","xide/types","xide/utils","xfile/widgets/EditorSelector","xfile/views/EditorPluginMixin",
"dojo/i18n"],function(declare,types,utils,EditorSelector,EditorPluginMixin){return declare("xfile.views._ItemActionMixin",[EditorPluginMixin],{config:null,useElusive:false,editSelector:null,_createAction:function(operation,item,clickcb,disabled,style){var iconClass=this.toIconClassElusive(operation);var title=this.toTitle(operation);if(iconClass&&title)return{title:title,icon:iconClass,place:"last",emit:false,style:style||"",item:item,disabled:disabled,elusive:true,command:operation,handler:function(command,
item,owner){if(clickcb)clickcb(this,command,item,owner)}}},translate:function(value){if(this._messages==null||this._messages.length==0)this._setupTranslations();if(value){var _titleKey=value.toLocaleLowerCase();_titleKey=_titleKey.replace(/\s+/g,"_");if(_titleKey&&this._messages!=null){var _titleValue=this._messages[_titleKey];if(_titleValue&&_titleValue.length>0)return _titleValue}}return value||""},_setupTranslations:function(){var dstCtx=sctx||mctx;if(dstCtx&&dstCtx.getLocals)this._messages=dstCtx.getLocals("xide.widgets",
"TemplatedWidgetBase");else this._messages=[]},postMixInProperties:function(){this.inherited(arguments);this._setupTranslations()},toTitle:function(operation){switch(operation){case types.OPERATION.DELETE:return this.translate("Delete");case types.OPERATION.EDIT:return this.translate("Edit");case types.OPERATION.RENAME:return this.translate("Rename");case types.OPERATION.COPY:return this.translate("Copy");case types.OPERATION.MOVE:return this.translate("Move");case types.OPERATION.DOWNLOAD:return this.translate("Download");
case types.OPERATION.INFO:return this.translate("Info");case types.OPERATION.COMPRESS:return this.translate("Compress");case types.OPERATION.RELOAD:return this.translate("Reload");case types.OPERATION.PREVIEW:return this.translate("Preview");case types.OPERATION.INSERT_IMAGE:return this.translate("Insert");case types.OPERATION.OPTIONS:return this.translate("Options");case types.OPERATION.PERMA_LINK:return this.translate("Perma Link")}return"No Title"},toIconClassElusive:function(operation){switch(operation){case types.OPERATION.DELETE:return"el-icon-remove-circle";
case types.OPERATION.EDIT:return"el-icon-file-edit";case types.OPERATION.RENAME:return"el-icon-edit";case types.OPERATION.COPY:return"el-icon-random";case types.OPERATION.MOVE:return"el-icon-move";case types.OPERATION.DOWNLOAD:return"el-icon-download";case types.OPERATION.INFO:return"el-icon-info-sign";case types.OPERATION.COMPRESS:return"el-icon-briefcase";case types.OPERATION.RELOAD:return"el-icon-refresh";case types.OPERATION.PREVIEW:return"icon-32-preview-content";case types.OPERATION.INSERT_IMAGE:return"icon-32-insert-image";
case types.OPERATION.OPTIONS:return"el-icon-cogs";case types.OPERATION.PERMA_LINK:return"el-icon-link"}},toIconClass:function(operation){return this.toIconClassElusive(operation)},onButtonClicked:function(button){if(this.delegate&&this.delegate.onActionButton)this.delegate.onActionButton(button,button.item,button.operation,button.owner)},removeEditorsSelector:function(){if(!this.editSelector)return this.getButton(types.OPERATION.EDIT);var item,owner=null;var oldEditButton=this.getButton(types.OPERATION.EDIT);
item=oldEditButton.item;owner=oldEditButton.owner;this.buttons.remove(oldEditButton);var newEditButton=this._createButton(types.OPERATION.EDIT,null,null,true);newEditButton.item=item;newEditButton.owner=owner;dojo.place(newEditButton.domNode,this.editSelector.domNode,"after");utils.destroyWidget(this.editSelector);this.editSelector=null;return newEditButton},prepareEditorsSelector:function(editButton,editors){var editSelector=new EditorSelector({delegate:this,editors:editors},dojo.doc.createElement("div"));
dojo.place(editSelector.domNode,editButton.domNode,"after");editSelector.startup();var newEditButton=editSelector.createMenuItem("el-icon-file-edit","Open",types.OPERATION.EDIT);this.buttons.remove(editButton);this.editSelector=editSelector;return editSelector},onFileSelected:function(data){var editors=EditorPluginMixin.getEditors(data);var btnEdit=this.getButton(types.OPERATION.EDIT);if(btnEdit){if(editors){if(btnEdit instanceof dijit.MenuItem)btnEdit=this.removeEditorsSelector();if(btnEdit instanceof
xfile.widgets.ActionToolbarButton){var newEditMenu=this.prepareEditorsSelector(btnEdit,editors);utils.destroyWidget(btnEdit)}}else btnEdit=this.removeEditorsSelector(btnEdit);if(this.editSelector)this.editSelector.wButton.set("disabled",false);btnEdit.setDisabled(false)}var btnEdit=this.getButton(types.OPERATION.INSERT_IMAGE);if(btnEdit)btnEdit.setDisabled(false)},onCommonsSelected:function(data){var disable=false;if(data.read===false&&data.write===false)disable=true;var btnRename=this.getButton(types.OPERATION.RENAME);
if(btnRename)btnRename.setDisabled(disable);var btnDownload=this.getButton(types.OPERATION.DOWNLOAD);if(btnDownload)btnDownload.setDisabled(disable);var btnCopy=this.getButton(types.OPERATION.COPY);if(btnCopy)btnCopy.setDisabled(disable);var btnMove=this.getButton(types.OPERATION.MOVE);if(btnMove)btnMove.setDisabled(disable);var btnProp=this.getButton(types.OPERATION.INFO);if(btnProp)btnProp.setDisabled(disable);var btnDelete=this.getButton(types.OPERATION.DELETE);if(btnDelete)btnDelete.setDisabled(disable);
var btncompress=this.getButton(types.OPERATION.COMPRESS);if(btncompress)btncompress.setDisabled(disable);var btnReload=this.getButton(types.OPERATION.RELOAD);if(btnReload)btnReload.setDisabled(disable);var btnNewFile=this.getButton(types.OPERATION.NEW_FILE);if(btnNewFile)btnNewFile.setDisabled(disable);var btnNewDir=this.getButton(types.OPERATION.NEW_DIRECTORY);if(btnNewDir)btnNewDir.setDisabled(disable);var btnPerma=this.getButton(types.OPERATION.PERMA_LINK);if(btnPerma)btnPerma.setDisabled(false)},
clearStates:function(item,owner){for(var i=0;i<this.buttons.length;i++)try{this.buttons[i].item=item;this.buttons[i].owner=owner;if(this.buttons[i].operation===types.OPERATION.CUSTOM);else this.buttons[i].setDisabled(true)}catch(e){}},onDirectorySelected:function(data){if(this.editSelector)this.editSelector.wButton.set("disabled",true)},onItemSelected:function(data){try{if(data&&data&&data.item){var item=data.item;this.clearStates(item,data.callee);if(item.name=="."||item.name==".."){var btnNewFile=
this.getButton(types.OPERATION.NEW_FILE);if(btnNewFile)btnNewFile.setDisabled(false);var btnNewDir=this.getButton(types.OPERATION.NEW_DIRECTORY);if(btnNewDir)btnNewDir.setDisabled(false);return}this.onCommonsSelected(item);if(item.directory!=null&&item.directory===true)this.onDirectorySelected(item);else this.onFileSelected(item)}}catch(e){}},getButton:function(operation){for(var i=0;i<this.buttons.length;i++)if(this.buttons[i].operation==operation)return this.buttons[i];return null},_createDefaultItems:function(){var allowedActions=
this.config.ALLOWED_ACTIONS||{1:true,2:true,3:true,4:true,5:true,6:true,7:true,8:true,9:true,10:true,11:true,12:true,13:true,14:true,15:true,16:true,17:true};var opsInt=types.OPERATION_INT;if(allowedActions[opsInt.RELOAD])var reloadButton=this._createButton(types.OPERATION.RELOAD,null,null,true);if(allowedActions[opsInt.DELETE])var deleteButton=this._createButton(types.OPERATION.DELETE,null,null,true);if(allowedActions[opsInt.COMPRESS])var compressButton=this._createButton(types.OPERATION.COMPRESS,
null,null,true);if(allowedActions[opsInt.DOWNLOAD])var downloadButton=this._createButton(types.OPERATION.DOWNLOAD,null,null,true);if(allowedActions[opsInt.INFO])var infoButton=this._createButton(types.OPERATION.INFO,null,null,true);if(allowedActions[opsInt.RENAME])var renameButton=this._createButton(types.OPERATION.RENAME,null,null,true);if(allowedActions[opsInt.MOVE])var moveButton=this._createButton(types.OPERATION.MOVE,null,null,true);if(allowedActions[opsInt.COPY])var copyButton=this._createButton(types.OPERATION.COPY,
null,null,true);if(allowedActions[opsInt.EDIT])var editButton=this._createButton(types.OPERATION.EDIT,null,null,true);var permaButton=this._createButton(types.OPERATION.PERMA_LINK,null,null,false);this.buttons.remove(permaButton);return allowedActions},startup:function(){this.inherited(arguments);this.buttons=[];this.editors=[]}})})},"xide/views/CIActionDialog":function(){define(["dojo/_base/declare","dojo/dom-style","xide/views/ActionDialog","xide/utils","xide/views/CIView","dojo/dom-geometry"],
function(declare,domStyle,ActionDialog,utils,CIView,domGeometry){return declare("xide.views.CIActionDialog",[ActionDialog],{cis:null,cisView:null,title:"Settings",dialogClass:"CIDialogRoot",cssClass:"ui-state-default CIDialog",onOk:function(){try{if(this.delegate&&this.delegate.onOk)this.delegate.onOk(this,this.cisView.getCIS())}catch(e){console.error("Action Dialog crashed in delegate::onOk! : "+e.message)}this.hide()},fixHeight:function(){var actionBox=domGeometry.getMarginBox(this.actionBar);var box=
domGeometry.getMarginBox(this.domNode);var newHeight=box.h+actionBox.h;domStyle.set(this.domNode,{height:newHeight+"px"})},initWithCIS:function(cis){this.cisView=utils.addWidget(CIView,{delegate:this,options:{},cis:cis},this,this.containerNode,true)},startup:function(){if(this.cis)this.initWithCIS(this.cis);this.addActionButtons();this.inherited(arguments)}})})},"dojo/query":function(){define(["./_base/kernel","./has","./dom","./on","./_base/array","./_base/lang","./selector/_loader","./selector/_loader!default"],
function(dojo,has,dom,on,array,lang,loader,defaultEngine){has.add("array-extensible",function(){return lang.delegate([],{length:1}).length==1&&!has("bug-for-in-skips-shadowed")});var ap=Array.prototype,aps=ap.slice,apc=ap.concat,forEach=array.forEach;var tnl=function(a,parent,NodeListCtor){var nodeList=new (NodeListCtor||this._NodeListCtor||nl)(a);return parent?nodeList._stash(parent):nodeList};var loopBody=function(f,a,o){a=[0].concat(aps.call(a,0));o=o||dojo.global;return function(node){a[0]=node;
return f.apply(o,a)}};var adaptAsForEach=function(f,o){return function(){this.forEach(loopBody(f,arguments,o));return this}};var adaptAsMap=function(f,o){return function(){return this.map(loopBody(f,arguments,o))}};var adaptAsFilter=function(f,o){return function(){return this.filter(loopBody(f,arguments,o))}};var adaptWithCondition=function(f,g,o){return function(){var a=arguments,body=loopBody(f,a,o);if(g.call(o||dojo.global,a))return this.map(body);this.forEach(body);return this}};var NodeList=
function(array){var isNew=this instanceof nl&&has("array-extensible");if(typeof array=="number")array=Array(array);var nodeArray=array&&"length"in array?array:arguments;if(isNew||!nodeArray.sort){var target=isNew?this:[],l=target.length=nodeArray.length;for(var i=0;i<l;i++)target[i]=nodeArray[i];if(isNew)return target;nodeArray=target}lang._mixin(nodeArray,nlp);nodeArray._NodeListCtor=function(array){return nl(array)};return nodeArray};var nl=NodeList,nlp=nl.prototype=has("array-extensible")?[]:{};
nl._wrap=nlp._wrap=tnl;nl._adaptAsMap=adaptAsMap;nl._adaptAsForEach=adaptAsForEach;nl._adaptAsFilter=adaptAsFilter;nl._adaptWithCondition=adaptWithCondition;forEach(["slice","splice"],function(name){var f=ap[name];nlp[name]=function(){return this._wrap(f.apply(this,arguments),name=="slice"?this:null)}});forEach(["indexOf","lastIndexOf","every","some"],function(name){var f=array[name];nlp[name]=function(){return f.apply(dojo,[this].concat(aps.call(arguments,0)))}});lang.extend(NodeList,{constructor:nl,
_NodeListCtor:nl,toString:function(){return this.join(",")},_stash:function(parent){this._parent=parent;return this},on:function(eventName,listener){var handles=this.map(function(node){return on(node,eventName,listener)});handles.remove=function(){for(var i=0;i<handles.length;i++)handles[i].remove()};return handles},end:function(){if(this._parent)return this._parent;else return new this._NodeListCtor(0)},concat:function(item){var t=aps.call(this,0),m=array.map(arguments,function(a){return aps.call(a,
0)});return this._wrap(apc.apply(t,m),this)},map:function(func,obj){return this._wrap(array.map(this,func,obj),this)},forEach:function(callback,thisObj){forEach(this,callback,thisObj);return this},filter:function(filter){var a=arguments,items=this,start=0;if(typeof filter=="string"){items=query._filterResult(this,a[0]);if(a.length==1)return items._stash(this);start=1}return this._wrap(array.filter(items,a[start],a[start+1]),this)},instantiate:function(declaredClass,properties){var c=lang.isFunction(declaredClass)?
declaredClass:lang.getObject(declaredClass);properties=properties||{};return this.forEach(function(node){new c(properties,node)})},at:function(){var t=new this._NodeListCtor(0);forEach(arguments,function(i){if(i<0)i=this.length+i;if(this[i])t.push(this[i])},this);return t._stash(this)}});function queryForEngine(engine,NodeList){var query=function(query,root){if(typeof root=="string"){root=dom.byId(root);if(!root)return new NodeList([])}var results=typeof query=="string"?engine(query,root):query?query.orphan?
query:[query]:[];if(results.orphan)return results;return new NodeList(results)};query.matches=engine.match||function(node,selector,root){return query.filter([node],selector,root).length>0};query.filter=engine.filter||function(nodes,selector,root){return query(selector,root).filter(function(node){return array.indexOf(nodes,node)>-1})};if(typeof engine!="function"){var search=engine.search;engine=function(selector,root){return search(root||document,selector)}}return query}var query=queryForEngine(defaultEngine,
NodeList);dojo.query=queryForEngine(defaultEngine,function(array){return NodeList(array)});query.load=function(id,parentRequire,loaded){loader.load(id,parentRequire,function(engine){loaded(queryForEngine(engine,NodeList))})};dojo._filterQueryResult=query._filterResult=function(nodes,selector,root){return new NodeList(query.filter(nodes,selector,root))};dojo.NodeList=query.NodeList=NodeList;return query})},"xblox/types/Types":function(){define("xblox/types/Types",["xide/types","dojo/_base/lang"],function(types,
lang){lang.mixin(types.ITEM_TYPE,{BLOCK:"BLOCK"});lang.mixin(types.EVENTS,{ON_BLOCK_SELECTED:"onItemSelected",ON_BLOCK_UNSELECTED:"onBlockUnSelected",ON_BLOCK_EXPRESSION_FAILED:"onExpressionFailed",ON_BUILD_BLOCK_INFO_LIST:"onBuildBlockInfoList",ON_BUILD_BLOCK_INFO_LIST_END:"onBuildBlockInfoListEnd",ON_BLOCK_PROPERTY_CHANGED:"onBlockPropertyChanged",ON_SCOPE_CREATED:"onScopeCreated",ON_VARIABLE_CHANGED:"onVariableChanged"});types.BlockType={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",
BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",
Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",
UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};return types})},"xwordpress/Views":function(){define("xwordpress/Views",["dojo/_base/declare","xide/views/SettingsTreeView","xfile/views/FileTreeView","xfile/views/FileTreeView","xwordpress/views/MainView","xfile/views/FileGridView","xide/views/CodeMirrorEditor","xide/views/OkCancelDialog",
"xide/views/ACEEditor","xide/views/TextEditor","xide/layout/ContentPane","xfile/views/FileDeleteDialog","xide/views/ToggleSplitter","xide/layout/BorderContainer","xfile/layout/BorderContainer","xfile/views/RemoteEditor","xfile/views/NewItemDialog","xfile/views/EditorPluginMixin","xfile/views/SplitView","xfile/views/CKEditor","dgrid/OnDemandGrid","dgrid/Selection","dgrid/Keyboard","dgrid/extensions/ColumnResizer","put-selector/put"],function(declare){return declare("xwordpress.Views",null,{})})},"dojo/rpc/JsonService":function(){define("dojo/rpc/JsonService",
["../_base/declare","../_base/Deferred","../_base/json","../_base/lang","../_base/xhr","./RpcService"],function(declare,Deferred,json,lang,xhr,RpcService){return declare("dojo.rpc.JsonService",RpcService,{bustCache:false,contentType:"application/json-rpc",lastSubmissionId:0,callRemote:function(method,params){var deferred=new Deferred;this.bind(method,params,deferred);return deferred},bind:function(method,parameters,deferredRequestHandler,url){var def=xhr.post({url:url||this.serviceUrl,postData:this.createRequest(method,
parameters),contentType:this.contentType,timeout:this.timeout,handleAs:"json-comment-optional"});def.addCallbacks(this.resultCallback(deferredRequestHandler),this.errorCallback(deferredRequestHandler))},createRequest:function(method,params){var req={"params":params,"method":method,"id":++this.lastSubmissionId};return json.toJson(req)},parseResults:function(obj){if(lang.isObject(obj)){if("result"in obj)return obj.result;if("Result"in obj)return obj.Result;if("ResultSet"in obj)return obj.ResultSet}return obj}})})},
"dojo/fx/easing":function(){define(["../_base/lang"],function(lang){var easingFuncs={linear:function(n){return n},quadIn:function(n){return Math.pow(n,2)},quadOut:function(n){return n*(n-2)*-1},quadInOut:function(n){n=n*2;if(n<1)return Math.pow(n,2)/2;return-1*(--n*(n-2)-1)/2},cubicIn:function(n){return Math.pow(n,3)},cubicOut:function(n){return Math.pow(n-1,3)+1},cubicInOut:function(n){n=n*2;if(n<1)return Math.pow(n,3)/2;n-=2;return(Math.pow(n,3)+2)/2},quartIn:function(n){return Math.pow(n,4)},quartOut:function(n){return-1*
(Math.pow(n-1,4)-1)},quartInOut:function(n){n=n*2;if(n<1)return Math.pow(n,4)/2;n-=2;return-1/2*(Math.pow(n,4)-2)},quintIn:function(n){return Math.pow(n,5)},quintOut:function(n){return Math.pow(n-1,5)+1},quintInOut:function(n){n=n*2;if(n<1)return Math.pow(n,5)/2;n-=2;return(Math.pow(n,5)+2)/2},sineIn:function(n){return-1*Math.cos(n*(Math.PI/2))+1},sineOut:function(n){return Math.sin(n*(Math.PI/2))},sineInOut:function(n){return-1*(Math.cos(Math.PI*n)-1)/2},expoIn:function(n){return n==0?0:Math.pow(2,
10*(n-1))},expoOut:function(n){return n==1?1:-1*Math.pow(2,-10*n)+1},expoInOut:function(n){if(n==0)return 0;if(n==1)return 1;n=n*2;if(n<1)return Math.pow(2,10*(n-1))/2;--n;return(-1*Math.pow(2,-10*n)+2)/2},circIn:function(n){return-1*(Math.sqrt(1-Math.pow(n,2))-1)},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2))},circInOut:function(n){n=n*2;if(n<1)return-1/2*(Math.sqrt(1-Math.pow(n,2))-1);n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1)},backIn:function(n){var s=1.70158;return Math.pow(n,
2)*((s+1)*n-s)},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1)return Math.pow(n,2)*((s+1)*n-s)/2;n-=2;return(Math.pow(n,2)*((s+1)*n+s)+2)/2},elasticIn:function(n){if(n==0||n==1)return n;var p=0.3;var s=p/4;n=n-1;return-1*Math.pow(2,10*n)*Math.sin((n-s)*2*Math.PI/p)},elasticOut:function(n){if(n==0||n==1)return n;var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*2*Math.PI/p)+1},elasticInOut:function(n){if(n==
0)return 0;n=n*2;if(n==2)return 1;var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return-0.5*Math.pow(2,10*n)*Math.sin((n-s)*2*Math.PI/p)}n-=1;return 0.5*Math.pow(2,-10*n)*Math.sin((n-s)*2*Math.PI/p)+1},bounceIn:function(n){return 1-easingFuncs.bounceOut(1-n)},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<1/p)l=s*Math.pow(n,2);else if(n<2/p){n-=1.5/p;l=s*Math.pow(n,2)+0.75}else if(n<2.5/p){n-=2.25/p;l=s*Math.pow(n,2)+0.9375}else{n-=2.625/p;l=s*Math.pow(n,2)+0.984375}return l},bounceInOut:function(n){if(n<
0.5)return easingFuncs.bounceIn(n*2)/2;return easingFuncs.bounceOut(n*2-1)/2+0.5}};lang.setObject("dojo.fx.easing",easingFuncs);return easingFuncs})},"dojox/rpc/JsonRest":function(){define("dojox/rpc/JsonRest",["dojo","dojox","dojox/json/ref","dojox/rpc/Rest"],function(dojo,dojox){var dirtyObjects=[];var Rest=dojox.rpc.Rest;var jr;function resolveJson(service,deferred,value,defaultId){var timeStamp=deferred.ioArgs&&deferred.ioArgs.xhr&&deferred.ioArgs.xhr.getResponseHeader("Last-Modified");if(timeStamp&&
Rest._timeStamps)Rest._timeStamps[defaultId]=timeStamp;var hrefProperty=service._schema&&service._schema.hrefProperty;if(hrefProperty)dojox.json.ref.refAttribute=hrefProperty;value=value&&dojox.json.ref.resolveJson(value,{defaultId:defaultId,index:Rest._index,timeStamps:timeStamp&&Rest._timeStamps,time:timeStamp,idPrefix:service._store.allowNoTrailingSlash?service.servicePath+"/":service.servicePath.replace(/[^\/]*$/,""),idAttribute:jr.getIdAttribute(service),schemas:jr.schemas,loader:jr._loader,
idAsRef:service.idAsRef,assignAbsoluteIds:true});dojox.json.ref.refAttribute="$ref";return value}jr=dojox.rpc.JsonRest={serviceClass:dojox.rpc.Rest,conflictDateHeader:"If-Unmodified-Since",commit:function(kwArgs){kwArgs=kwArgs||{};var actions=[];var alreadyRecorded={};var savingObjects=[];for(var i=0;i<dirtyObjects.length;i++){var dirty=dirtyObjects[i];var object=dirty.object;var old=dirty.old;var append=false;if(!(kwArgs.service&&(object||old)&&(object||old).__id.indexOf(kwArgs.service.servicePath))&&
dirty.save){delete object.__isDirty;if(object)if(old){var pathParts;if(pathParts=object.__id.match(/(.*)#.*/))object=Rest._index[pathParts[1]];if(!(object.__id in alreadyRecorded)){alreadyRecorded[object.__id]=object;if(kwArgs.incrementalUpdates&&!pathParts)var incremental=(typeof kwArgs.incrementalUpdates=="function"?kwArgs.incrementalUpdates:function(){incremental={};for(var j in object)if(object.hasOwnProperty(j)){if(object[j]!==old[j])incremental[j]=object[j]}else if(old.hasOwnProperty(j))return null;
return incremental})(object,old);if(incremental)actions.push({method:"post",target:object,content:incremental});else actions.push({method:"put",target:object,content:object})}}else{var service=jr.getServiceAndId(object.__id).service;var idAttribute=jr.getIdAttribute(service);if(idAttribute in object&&!kwArgs.alwaysPostNewItems)actions.push({method:"put",target:object,content:object});else actions.push({method:"post",target:{__id:service.servicePath},content:object})}else if(old)actions.push({method:"delete",
target:old});savingObjects.push(dirty);dirtyObjects.splice(i--,1)}}dojo.connect(kwArgs,"onError",function(){if(kwArgs.revertOnError!==false){var postCommitDirtyObjects=dirtyObjects;dirtyObjects=savingObjects;var numDirty=0;jr.revert();dirtyObjects=postCommitDirtyObjects}else dojo.forEach(savingObjects,function(obj){jr.changing(obj.object,!obj.object)})});jr.sendToServer(actions,kwArgs);return actions},sendToServer:function(actions,kwArgs){var xhrSendId;var plainXhr=dojo.xhr;var left=actions.length;
var i,contentLocation;var timeStamp;var conflictDateHeader=this.conflictDateHeader;dojo.xhr=function(method,args){args.headers=args.headers||{};args.headers["Transaction"]=actions.length-1==i?"commit":"open";if(conflictDateHeader&&timeStamp)args.headers[conflictDateHeader]=timeStamp;if(contentLocation)args.headers["Content-ID"]="\x3c"+contentLocation+"\x3e";return plainXhr.apply(dojo,arguments)};for(i=0;i<actions.length;i++){var action=actions[i];dojox.rpc.JsonRest._contentId=action.content&&action.content.__id;
var isPost=action.method=="post";timeStamp=action.method=="put"&&Rest._timeStamps[action.content.__id];if(timeStamp)Rest._timeStamps[action.content.__id]=new Date+"";contentLocation=isPost&&dojox.rpc.JsonRest._contentId;var serviceAndId=jr.getServiceAndId(action.target.__id);var service=serviceAndId.service;var dfd=action.deferred=service[action.method](serviceAndId.id.replace(/#/,""),dojox.json.ref.toJson(action.content,false,service.servicePath,true));(function(object,dfd,service){dfd.addCallback(function(value){try{var newId=
dfd.ioArgs.xhr&&dfd.ioArgs.xhr.getResponseHeader("Location");if(newId){var startIndex=newId.match(/(^\w+:\/\/)/)&&newId.indexOf(service.servicePath);newId=startIndex>0?newId.substring(startIndex):(service.servicePath+newId).replace(/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,"$2$3");object.__id=newId;Rest._index[newId]=object}value=resolveJson(service,dfd,value,object&&object.__id)}catch(e){}if(!--left)if(kwArgs.onComplete)kwArgs.onComplete.call(kwArgs.scope,actions);return value})})(action.content,
dfd,service);dfd.addErrback(function(value){left=-1;kwArgs.onError.call(kwArgs.scope,value)})}dojo.xhr=plainXhr},getDirtyObjects:function(){return dirtyObjects},revert:function(service){for(var i=dirtyObjects.length;i>0;){i--;var dirty=dirtyObjects[i];var object=dirty.object;var old=dirty.old;var store=dojox.data._getStoreForItem(object||old);if(!(service&&(object||old)&&(object||old).__id.indexOf(service.servicePath))){if(object&&old){for(var j in old)if(old.hasOwnProperty(j)&&object[j]!==old[j]){if(store)store.onSet(object,
j,object[j],old[j]);object[j]=old[j]}for(j in object)if(!old.hasOwnProperty(j)){if(store)store.onSet(object,j,object[j]);delete object[j]}}else if(!old){if(store)store.onDelete(object)}else if(store)store.onNew(old);delete (object||old).__isDirty;dirtyObjects.splice(i,1)}}},changing:function(object,_deleting){if(!object.__id)return;object.__isDirty=true;for(var i=0;i<dirtyObjects.length;i++){var dirty=dirtyObjects[i];if(object==dirty.object){if(_deleting){dirty.object=false;if(!this._saveNotNeeded)dirty.save=
true}return}}var old=object instanceof Array?[]:{};for(i in object)if(object.hasOwnProperty(i))old[i]=object[i];dirtyObjects.push({object:!_deleting&&object,old:old,save:!this._saveNotNeeded})},deleteObject:function(object){this.changing(object,true)},getConstructor:function(service,schema){if(typeof service=="string"){var servicePath=service;service=new dojox.rpc.Rest(service,true);this.registerService(service,servicePath,schema)}if(service._constructor)return service._constructor;service._constructor=
function(data){var self=this;var args=arguments;var properties;var initializeCalled;function addDefaults(schema){if(schema){addDefaults(schema["extends"]);properties=schema.properties;for(var i in properties){var propDef=properties[i];if(propDef&&typeof propDef=="object"&&"default"in propDef)self[i]=propDef["default"]}}if(schema&&schema.prototype&&schema.prototype.initialize){initializeCalled=true;schema.prototype.initialize.apply(self,args)}}addDefaults(service._schema);if(!initializeCalled&&data&&
typeof data=="object")dojo.mixin(self,data);var idAttribute=jr.getIdAttribute(service);Rest._index[this.__id=this.__clientId=service.servicePath+(this[idAttribute]||Math.random().toString(16).substring(2,14)+"@"+(dojox.rpc.Client&&dojox.rpc.Client.clientId||"client"))]=this;if(dojox.json.schema&&properties)dojox.json.schema.mustBeValid(dojox.json.schema.validate(this,service._schema));dirtyObjects.push({object:this,save:true})};return dojo.mixin(service._constructor,service._schema,{load:service})},
fetch:function(absoluteId){var serviceAndId=jr.getServiceAndId(absoluteId);return this.byId(serviceAndId.service,serviceAndId.id)},getIdAttribute:function(service){var schema=service._schema;var idAttr;if(schema)if(!(idAttr=schema._idAttr))for(var i in schema.properties)if(schema.properties[i].identity||schema.properties[i].link=="self")schema._idAttr=idAttr=i;return idAttr||"id"},getServiceAndId:function(absoluteId){var serviceName="";for(var service in jr.services)if(absoluteId.substring(0,service.length)==
service&&service.length>=serviceName.length)serviceName=service;if(serviceName)return{service:jr.services[serviceName],id:absoluteId.substring(serviceName.length)};var parts=absoluteId.match(/^(.*\/)([^\/]*)$/);return{service:new jr.serviceClass(parts[1],true),id:parts[2]}},services:{},schemas:{},registerService:function(service,servicePath,schema){servicePath=service.servicePath=servicePath||service.servicePath;service._schema=jr.schemas[servicePath]=schema||service._schema||{};jr.services[servicePath]=
service},byId:function(service,id){var deferred,result=Rest._index[(service.servicePath||"")+id];if(result&&!result._loadObject){deferred=new dojo.Deferred;deferred.callback(result);return deferred}return this.query(service,id)},query:function(service,id,args){var deferred=service(id,args);deferred.addCallback(function(result){if(result.nodeType&&result.cloneNode)return result;return resolveJson(service,deferred,result,typeof id!="string"||args&&(args.start||args.count)?undefined:id)});return deferred},
_loader:function(callback){var serviceAndId=jr.getServiceAndId(this.__id);var self=this;jr.query(serviceAndId.service,serviceAndId.id).addBoth(function(result){if(result==self){delete result.$ref;delete result._loadObject}else self._loadObject=function(callback){callback(result)};callback(result)})},isDirty:function(item,store){if(!item){if(store)return dojo.some(dirtyObjects,function(dirty){return dojox.data._getStoreForItem(dirty.object||dirty.old)==store});return!!dirtyObjects.length}return item.__isDirty}};
return dojox.rpc.JsonRest})},"xblox/views/BlockTreeView":function(){define("xblox/views/BlockTreeView",["dojo/_base/declare","dojo/dom-class","dijit/Tree","xide/views/BeanView","xide/views/BeanTreeView","xide/factory","xide/types","dojo/store/Memory","dojo/store/Observable","dijit/tree/ObjectStoreModel","dijit/tree/dndSource"],function(declare,domClass,Tree,BeanView,BeanTreeView,factory,types,Memory,Observable,ObjectStoreModel,dndSource){return declare("xblox.views.BlockTreeView",[BeanView,BeanTreeView],
{model:null,store:null,tree:null,currentItem:null,pMenu:null,pMenuContextItem:null,currentInsertionNode:null,newItemData:null,didLoad:false,selectable:false,rootLabel:"",reCreateStore:true,beanType:null,hasItemActions:function(){return false},onReloaded:function(){this.initWidgets()},_createTreeStore:function(blockData){var data={items:blockData,identifier:"name",label:"name"};return Observable(new Memory({data:data,getChildren:function(object){return object.items},mayHaveChildren:function(parent){return parent.items!=
null&&parent.items.length>0}}))},initWidgets:function(){dojo.empty(this.containerNode);var items=[];items=factory.getAllBlocks(null,this,null,null);factory.publish(types.EVENTS.ON_BUILD_BLOCK_INFO_LIST_END,{items:items});this.store=this._createTreeStore(items);var SharedDndGridSource=declare([dndSource],{onDrop:function(sourceSource,nodes,copy){0&&console.log("drp",sourceSource);0&&console.log("drp2",nodes)}});var root={name:"Root",items:items};var model=new ObjectStoreModel({store:this.store,root:root,
mayHaveChildren:function(parent){return parent.items!=null&&parent.items.length>0}});var itemTreeCheckItemAcceptance=function(node,source,position){return true};var collectionTreeCheckItemAcceptance=function(node,source,position){return false};var dndAccept=function(source,nodes){return true};var tree=(new Tree({showRoot:false,model:model,dndController:SharedDndGridSource,checkAcceptance:dndAccept,checkItemAcceptance:itemTreeCheckItemAcceptance,dragThreshold:8,betweenThreshold:5,getIconClass:function(item,
opened){var iclass=!item||this.model.mayHaveChildren(item)?opened?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf";if(item&&item.iconClass!=null)return item.iconClass;return iclass},persist:false})).placeAt(this.containerNode);tree.startup();domClass.add(tree.domNode,"ui-widget");domClass.add(tree.domNode,"ui-state-default");this.resize()},startup:function(){if(this.didLoad)return;this.inherited(arguments);this.initWidgets();this.didLoad=true}})})},"dojo/request/util":function(){define("dojo/request/util",
["exports","../errors/RequestError","../errors/CancelError","../Deferred","../io-query","../_base/array","../_base/lang"],function(exports,RequestError,CancelError,Deferred,ioQuery,array,lang){exports.deepCopy=function deepCopy(target,source){for(var name in source){var tval=target[name],sval=source[name];if(tval!==sval)if(tval&&typeof tval==="object"&&sval&&typeof sval==="object")exports.deepCopy(tval,sval);else target[name]=sval}return target};exports.deepCreate=function deepCreate(source,properties){properties=
properties||{};var target=lang.delegate(source),name,value;for(name in source){value=source[name];if(value&&typeof value==="object")target[name]=exports.deepCreate(value,properties[name])}return exports.deepCopy(target,properties)};var freeze=Object.freeze||function(obj){return obj};function okHandler(response){return freeze(response)}exports.deferred=function deferred(response,cancel,isValid,isReady,handleResponse,last){var def=new Deferred(function(reason){cancel&&cancel(def,response);if(!reason||
!(reason instanceof RequestError)&&!(reason instanceof CancelError))return new CancelError("Request canceled",response);return reason});def.response=response;def.isValid=isValid;def.isReady=isReady;def.handleResponse=handleResponse;function errHandler(error){error.response=response;throw error;}var responsePromise=def.then(okHandler).otherwise(errHandler);if(exports.notify)responsePromise.then(lang.hitch(exports.notify,"emit","load"),lang.hitch(exports.notify,"emit","error"));var dataPromise=responsePromise.then(function(response){return response.data||
response.text});var promise=freeze(lang.delegate(dataPromise,{response:responsePromise}));if(last)def.then(function(response){last.call(def,response)},function(error){last.call(def,response,error)});def.promise=promise;def.then=promise.then;return def};exports.addCommonMethods=function addCommonMethods(provider,methods){array.forEach(methods||["GET","POST","PUT","DELETE"],function(method){provider[(method==="DELETE"?"DEL":method).toLowerCase()]=function(url,options){options=lang.delegate(options||
{});options.method=method;return provider(url,options)}})};exports.parseArgs=function parseArgs(url,options,skipData){var data=options.data,query=options.query;if(data&&!skipData)if(typeof data==="object")options.data=ioQuery.objectToQuery(data);if(query){if(typeof query==="object")query=ioQuery.objectToQuery(query);if(options.preventCache)query+=(query?"\x26":"")+"request.preventCache\x3d"+ +new Date}else if(options.preventCache)query="request.preventCache\x3d"+ +new Date;if(url&&query)url+=(~url.indexOf("?")?
"\x26":"?")+query;return{url:url,options:options,getHeader:function(headerName){return null}}};exports.checkStatus=function(stat){stat=stat||0;return stat>=200&&stat<300||stat===304||stat===1223||!stat}})},"xide/factory/Events":function(){define(["xide/factory","dojo/_base/connect","dojo/_base/lang"],function(factory,connect,lang){var _debug=false;factory.publish=function(keys,data,callee){var msgStruct=data?lang.isString(data)?{message:data}:data:{};var eventKeys=keys;if(!lang.isArray(keys))eventKeys=
[keys];msgStruct=lang.mixin(msgStruct,{callee:callee||arguments.callee});for(var i=0;i<eventKeys.length;i++){var eventKey=eventKeys[i];if(_debug)0&&console.log("publish "+eventKey+" from : "+(callee?callee.id:""),msgStruct);connect.publish(eventKey,msgStruct)}};factory.subscribe=function(keys,cb,owner){owner=owner||arguments.callee;var eventKeys=keys;if(!lang.isArray(keys))eventKeys=[keys];var events=[];for(var i=0;i<eventKeys.length;i++){var eventKey=eventKeys[i];if(owner!=null)events.push(dojo.subscribe(eventKey,
lang.hitch(owner,cb)));else events.push(connect.subscribe(eventKey,cb))}return events};return factory})},"dijit/form/NumberSpinner":function(){define("dijit/form/NumberSpinner",["dojo/_base/declare","dojo/keys","./_Spinner","./NumberTextBox"],function(declare,keys,_Spinner,NumberTextBox){return declare("dijit.form.NumberSpinner",[_Spinner,NumberTextBox.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(val,delta){var tc=this.constraints,v=isNaN(val),gotMax=!isNaN(tc.max),
gotMin=!isNaN(tc.min);if(v&&delta!=0)val=delta>0?gotMin?tc.min:gotMax?tc.max:0:gotMax?this.constraints.max:gotMin?tc.min:0;var newval=val+delta;if(v||isNaN(newval))return val;if(gotMax&&newval>tc.max)newval=tc.max;if(gotMin&&newval<tc.min)newval=tc.min;return newval},_onKeyDown:function(e){if(this.disabled||this.readOnly)return;if((e.keyCode==keys.HOME||e.keyCode==keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var value=this.constraints[e.keyCode==keys.HOME?"min":
"max"];if(typeof value=="number")this._setValueAttr(value,false);e.stopPropagation();e.preventDefault()}}})})},"dijit/MenuItem":function(){require({cache:{"url:dijit/templates/MenuItem.html":'\x3ctr class\x3d"dijitReset dijitMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n\t\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,textDirNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n\t\x3ctd class\x3d"dijitReset dijitMenuArrowCell" role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"arrowWrapper" style\x3d"visibility: hidden"\x3e\n\t\t\t\x3cspan class\x3d"dijitInline dijitIcon dijitMenuExpand_ el-icon-caret-right" style\x3d"font-size: 8px"\x3e\x3c/span\x3e\n\t\t\t\x3cspan class\x3d"dijitMenuExpandA11y"\x3e+\x3c/span\x3e\n\t\t\x3c/span\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n'}});
define("dijit/MenuItem",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(declare,dom,domAttr,domClass,kernel,has,lang,_Widget,_TemplatedMixin,_Contained,_CssStateMixin,template){var MenuItem=declare("dijit.MenuItem"+(0?"_NoBidi":""),[_Widget,_TemplatedMixin,_Contained,_CssStateMixin],{templateString:template,baseClass:"dijitMenuItem",
label:"",_setLabelAttr:function(val){this._set("label",val);var shortcutKey="";var text;var ndx=val.search(/{\S}/);if(ndx>=0){shortcutKey=val.charAt(ndx+1);var prefix=val.substr(0,ndx);var suffix=val.substr(ndx+3);text=prefix+shortcutKey+suffix;val=prefix+'\x3cspan class\x3d"dijitMenuItemShortcutKey"\x3e'+shortcutKey+"\x3c/span\x3e"+suffix}else text=val;this.domNode.setAttribute("aria-label",text+" "+this.accelKey);this.containerNode.innerHTML=val;this._set("shortcutKey",shortcutKey)},iconClass:"dijitNoIcon",
_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(source){if(source&&!("label"in this.params))this._set("label",source.innerHTML)},buildRendering:function(){this.inherited(arguments);var label=this.id+"_text";domAttr.set(this.containerNode,"id",label);if(this.accelKeyNode)domAttr.set(this.accelKeyNode,"id",this.id+"_accel");dom.setSelectable(this.domNode,false)},onClick:function(){},focus:function(){try{if(has("ie")==8)this.containerNode.focus();this.focusNode.focus()}catch(e){}},
_onFocus:function(){this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(selected){domClass.toggle(this.domNode,"dijitMenuItemSelected",selected);domClass.toggle(this.domNode,"ui-state-focus",selected)},setLabel:function(content){kernel.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",content)},setDisabled:function(disabled){kernel.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.",
"","2.0");this.set("disabled",disabled)},_setDisabledAttr:function(value){this.focusNode.setAttribute("aria-disabled",value?"true":"false");this._set("disabled",value)},_setAccelKeyAttr:function(value){if(this.accelKeyNode){this.accelKeyNode.style.display=value?"":"none";this.accelKeyNode.innerHTML=value;domAttr.set(this.containerNode,"colSpan",value?"1":"2")}this._set("accelKey",value)}});if(0)MenuItem=declare("dijit.MenuItem",MenuItem,{_setLabelAttr:function(val){this.inherited(arguments);if(this.textDir===
"auto")this.applyTextDir(this.textDirNode)}});return MenuItem})},"dijit/_AttachMixin":function(){define("dijit/_AttachMixin",["require","dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","dojo/mouse","dojo/on","dojo/touch","./_WidgetBase"],function(require,array,connect,declare,lang,mouse,on,touch,_WidgetBase){var synthEvents=lang.delegate(touch,{"mouseenter":mouse.enter,"mouseleave":mouse.leave,"keypress":connect._keypress});var a11yclick;var _AttachMixin=declare("dijit._AttachMixin",
null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(rootNode){var node=rootNode;while(true)if(node.nodeType==1&&(this._processTemplateNode(node,function(n,p){return n.getAttribute(p)},this._attach)||this.searchContainerNode)&&node.firstChild)node=node.firstChild;else{if(node==rootNode)return;while(!node.nextSibling){node=
node.parentNode;if(node==rootNode)return}node=node.nextSibling}},_processTemplateNode:function(baseNode,getAttrFunc,attachFunc){var ret=true;var _attachScope=this.attachScope||this,attachPoint=getAttrFunc(baseNode,"dojoAttachPoint")||getAttrFunc(baseNode,"data-dojo-attach-point");if(attachPoint){var point,points=attachPoint.split(/\s*,\s*/);while(point=points.shift()){if(lang.isArray(_attachScope[point]))_attachScope[point].push(baseNode);else _attachScope[point]=baseNode;ret=point!="containerNode";
this._attachPoints.push(point)}}var attachEvent=getAttrFunc(baseNode,"dojoAttachEvent")||getAttrFunc(baseNode,"data-dojo-attach-event");if(attachEvent){var event,events=attachEvent.split(/\s*,\s*/);var trim=lang.trim;while(event=events.shift())if(event){var thisFunc=null;if(event.indexOf(":")!=-1){var funcNameArr=event.split(":");event=trim(funcNameArr[0]);thisFunc=trim(funcNameArr[1])}else event=trim(event);if(!thisFunc)thisFunc=event;this._attachEvents.push(attachFunc(baseNode,event,lang.hitch(_attachScope,
thisFunc)))}}return ret},_attach:function(node,type,func){type=type.replace(/^on/,"").toLowerCase();if(type=="dijitclick")type=a11yclick||(a11yclick=require("./a11yclick"));else type=synthEvents[type]||type;return on(node,type,func)},_detachTemplateNodes:function(){var _attachScope=this.attachScope||this;array.forEach(this._attachPoints,function(point){delete _attachScope[point]});this._attachPoints=[];array.forEach(this._attachEvents,function(handle){handle.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});lang.extend(_WidgetBase,{dojoAttachEvent:"",dojoAttachPoint:""});return _AttachMixin})},"dgrid/extensions/ColumnHider":function(){define(["dojo/_base/declare","dojo/has","dojo/on","../util/misc","put-selector/put","dojo/i18n!./nls/columnHider","dojo/has!debug?xstyle/css!../css/extensions/ColumnHider.css"],function(declare,has,listen,miscUtil,put,i18n){var activeGrid,bodyListener,hasIE=has("ie"),hasIEQuirks=hasIE&&has("quirks"),forAttr=hasIE<8||hasIEQuirks?"htmlFor":"for";
function getColumnIdFromCheckbox(cb,grid){return cb.id.substr(grid.id.length+18)}return declare(null,{hiderMenuNode:null,hiderToggleNode:null,i18nColumnHider:i18n,_hiderMenuOpened:false,_columnHiderRules:null,_columnHiderCheckboxes:null,_renderHiderMenuEntries:function(){var subRows=this.subRows,first=true,srLength,cLength,sr,c;delete this._columnHiderFirstCheckbox;for(sr=0,srLength=subRows.length;sr<srLength;sr++)for(c=0,cLength=subRows[sr].length;c<cLength;c++){this._renderHiderMenuEntry(subRows[sr][c]);
if(first){first=false;this._columnHiderFirstCheckbox=this._columnHiderCheckboxes[subRows[sr][c].id]}}},_renderHiderMenuEntry:function(col){var id=col.id,replacedId=miscUtil.escapeCssIdentifier(id,"-"),div,checkId,checkbox,label;if(col.hidden){col.hidden=false;this._hideColumn(id);col.hidden=true}if(col.unhidable)return;div=put("div.dgrid-hider-menu-row");checkId=this.domNode.id+"-hider-menu-check-"+replacedId;checkbox=this._columnHiderCheckboxes[id]=put(div,"input.dgrid-hider-menu-check.hider-menu-check-"+
replacedId+"[type\x3dcheckbox]");checkbox.id=checkId;label=put(div,"label.dgrid-hider-menu-label.hider-menu-label-"+replacedId+"["+forAttr+"\x3d"+checkId+"]",col.label||col.field||"");put(this.hiderMenuNode,div);if(!col.hidden)checkbox.checked=true},renderHeader:function(){var grid=this,hiderMenuNode=this.hiderMenuNode,hiderToggleNode=this.hiderToggleNode,id;function stopPropagation(event){event.stopPropagation()}this.inherited(arguments);if(!hiderMenuNode){hiderToggleNode=this.hiderToggleNode=put(this.domNode,
"button.ui-icon.dgrid-hider-toggle[type\x3dbutton]");this._listeners.push(listen(hiderToggleNode,"click",function(e){grid._toggleColumnHiderMenu(e)}));hiderMenuNode=this.hiderMenuNode=put("div.dgrid-hider-menu[role\x3ddialog][aria-label\x3d"+this.i18nColumnHider.popupLabel+"]");hiderMenuNode.id=this.id+"-hider-menu";this._listeners.push(listen(hiderMenuNode,"keyup",function(e){var charOrCode=e.charCode||e.keyCode;if(charOrCode===27){grid._toggleColumnHiderMenu(e);hiderToggleNode.focus()}}));hiderMenuNode.style.display=
"none";put(this.domNode,hiderMenuNode);this._listeners.push(listen(hiderMenuNode,".dgrid-hider-menu-check:"+(hasIE<9||hasIEQuirks?"click":"change"),function(e){grid._updateColumnHiddenState(getColumnIdFromCheckbox(e.target,grid),!e.target.checked)}));this._listeners.push(listen(hiderMenuNode,"mousedown",stopPropagation),listen(hiderToggleNode,"mousedown",stopPropagation));if(!bodyListener){bodyListener=listen.pausable(document,"mousedown",function(e){activeGrid&&activeGrid._toggleColumnHiderMenu(e)});
bodyListener.pause()}}else{for(id in this._columnHiderRules)this._columnHiderRules[id].remove();hiderMenuNode.innerHTML=""}this._columnHiderCheckboxes={};this._columnHiderRules={};this._renderHiderMenuEntries()},destroy:function(){this.inherited(arguments);for(var id in this._columnHiderRules)this._columnHiderRules[id].remove()},left:function(cell,steps){return this.right(cell,-steps)},right:function(cell,steps){if(!cell.element)cell=this.cell(cell);var nextCell=this.inherited(arguments),prevCell=
cell;while(nextCell.column.hidden){nextCell=this.inherited(arguments,[nextCell,steps>0?1:-1]);if(prevCell.element===nextCell.element)return cell;prevCell=nextCell}return nextCell},isColumnHidden:function(id){return!!this._columnHiderRules[id]},_toggleColumnHiderMenu:function(){var hidden=this._hiderMenuOpened,hiderMenuNode=this.hiderMenuNode,domNode=this.domNode,firstCheckbox;hiderMenuNode.style.display=hidden?"none":"";if(hidden)hiderMenuNode.style.height="";else{if(hiderMenuNode.offsetHeight>domNode.offsetHeight-
12)hiderMenuNode.style.height=domNode.offsetHeight-12+"px";(firstCheckbox=this._columnHiderFirstCheckbox)&&firstCheckbox.focus()}bodyListener[hidden?"pause":"resume"]();activeGrid=hidden?null:this;this._hiderMenuOpened=!hidden},_hideColumn:function(id){var grid=this,selectorPrefix="#"+miscUtil.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-",tableRule;if(this._columnHiderRules[id])return;this._columnHiderRules[id]=miscUtil.addCssRule(selectorPrefix+miscUtil.escapeCssIdentifier(id,"-"),"display: none;");
if(has("ie")===8&&!has("quirks")){tableRule=miscUtil.addCssRule(".dgrid-row-table","display: inline-table;");window.setTimeout(function(){tableRule.remove();grid.resize()},0)}},_showColumn:function(id){if(this._columnHiderRules[id]){this._columnHiderRules[id].remove();delete this._columnHiderRules[id]}},_updateColumnHiddenState:function(id,hidden){this[hidden?"_hideColumn":"_showColumn"](id);this.columns[id].hidden=hidden;listen.emit(this.domNode,"dgrid-columnstatechange",{grid:this,column:this.columns[id],
hidden:hidden,bubbles:true});this.resize()},toggleColumnHiddenState:function(id,hidden){if(typeof hidden==="undefined")hidden=!this._columnHiderRules[id];this._updateColumnHiddenState(id,hidden);this._columnHiderCheckboxes[id].checked=!hidden}})})},"xwordpress/Imports/DojoRPCImports":function(){define("xwordpress/Imports/DojoRPCImports",["dojo/_base/declare","dojo/_base/xhr","dojo/io/script","dojox/rpc/Service","dojox/data/ServiceStore","dojox/rpc/Rest","dojo/rpc/JsonService","dojo/io/iframe","dojox/data/JsonRestStore",
"dojox/rpc/JsonRPC","dojo/data/ItemFileWriteStore","dojo/store/Memory","dojo/store/Observable"],function(declare,xhr,script,Service,ServiceStore,Rest,JonService,iframe,JsonRestStore,JsonRPC,ItemFileWriteStore,Memory,Observable){return declare("xwordpress.DojoRPCImports",null,{constructor:function(){}})})},"xide/utils/StringUtils":function(){define(["dojo/_base/lang","xide/utils","xide/types","dojo/json"],function(lang,utils,types,json){utils.contains=function(arr,val){for(var i=0;i<arr.length;i++)if(arr[i]===
val)return i;return-1};utils.getObjectKeyByValue=function(obj,val){if(obj&&val)for(var prop in obj)if(obj.hasOwnProperty(prop))if(obj[prop]===val)return prop;return null};utils.removeURLParameter=function(url,parameter){var urlparts=url.split("?");if(urlparts.length>=2){var prefix=encodeURIComponent(parameter)+"\x3d";var pars=urlparts[1].split(/[&;]/g);for(var i=pars.length;i-- >0;)if(pars[i].lastIndexOf(prefix,0)!==-1)pars.splice(i,1);url=urlparts[0]+"?"+pars.join("\x26");return url}else return url};
utils.replaceUrlParam=function(url,paramName,paramValue){var pattern=new RegExp("("+paramName+"\x3d).*?(\x26|$)");var newUrl=url.replace(pattern,"$1"+paramValue+"$2");if(newUrl==url)newUrl=newUrl+(newUrl.indexOf("?")>0?"\x26":"?")+paramName+"\x3d"+paramValue;return newUrl};utils.buildPath=function(mount,path,encode){var _mount=""+mount;_mount=utils.replaceAll("/","",mount);var _path=""+path;_path=_path.replace("./","/").replace(/^\/|\/$/g,"");var _res=_mount+"://"+_path;if(encode===true)return encodeURIComponent(_res);
return _res};utils.isImage=function(string){return string.toLowerCase().match(/\.(jpeg|jpg|gif|png)$/)!=null};utils.hasFlag3=function(field,enumValue){var _enumUp=1<<enumValue;var _res=_enumUp&field;return 1<<enumValue&field?true:false};utils.cleanUrl=function(string){if(string){string=string.replace("//","/");string=string.replace("./","/");string=string.replace("http:/","http://");string=string.replace("./","/");string=string.replace("XApp-portletxasweb","XApp-portlet/xasweb");string=string.replace("XApp-portletutils",
"XApp-portlet/utils");string=string.replace("/XApp-portlet/CMAC/","/CMAC/");string=string.replace("////","/");string=string.replace("///","/");return string}return string};utils.getJson=function(inData,validOnly){try{return lang.isString(inData)?json.parse(inData,false):validOnly===true?null:inData}catch(e){console.error("error parsing json data "+inData+" error \x3d "+e)}return null};utils.replaceAll=function(find,replace,str){if(!str);return str?str.split(find).join(replace):""};utils.isValidString=
function(input){return input!=null&&input.length!=null&&input.length>0&&input!="undefined"};utils.substituteString=function(template,obj){return template.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(match,key){return obj[key]})};utils.capitalize=function(word){return word.substring(0,1).toUpperCase()+word.substring(1)};utils.vsprintf=function(format,args){return utils.sprintf.apply(this,[format].concat(args))};utils.sprintf=function(){var regex=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g;
var a=arguments,i=0,format=a[i++];var pad=function(str,len,chr,leftJustify){if(!chr)chr=" ";var padding=str.length>=len?"":Array(1+len-str.length>>>0).join(chr);return leftJustify?str+padding:padding+str};var justify=function(value,prefix,leftJustify,minWidth,zeroPad,customPadChar){var diff=minWidth-value.length;if(diff>0)if(leftJustify||!zeroPad)value=pad(value,minWidth,customPadChar,leftJustify);else value=value.slice(0,prefix.length)+pad("",diff,"0",true)+value.slice(prefix.length);return value};
var formatBaseX=function(value,base,prefix,leftJustify,minWidth,precision,zeroPad){var number=value>>>0;prefix=prefix&&number&&{2:"0b",8:"0",16:"0x"}[base]||"";value=prefix+pad(number.toString(base),precision||0,"0",false);return justify(value,prefix,leftJustify,minWidth,zeroPad)};var formatString=function(value,leftJustify,minWidth,precision,zeroPad,customPadChar){if(precision!=null)value=value.slice(0,precision);return justify(value,"",leftJustify,minWidth,zeroPad,customPadChar)};var doFormat=function(substring,
valueIndex,flags,minWidth,_,precision,type){var number;var prefix;var method;var textTransform;var value;if(substring==="%%")return"%";var leftJustify=false,positivePrefix="",zeroPad=false,prefixBaseX=false,customPadChar=" ";var flagsl=flags.length;for(var j=0;flags&&j<flagsl;j++)switch(flags.charAt(j)){case " ":positivePrefix=" ";break;case "+":positivePrefix="+";break;case "-":leftJustify=true;break;case "'":customPadChar=flags.charAt(j+1);break;case "0":zeroPad=true;break;case "#":prefixBaseX=
true;break}if(!minWidth)minWidth=0;else if(minWidth==="*")minWidth=+a[i++];else if(minWidth.charAt(0)=="*")minWidth=+a[minWidth.slice(1,-1)];else minWidth=+minWidth;if(minWidth<0){minWidth=-minWidth;leftJustify=true}if(!isFinite(minWidth))throw new Error("sprintf: (minimum-)width must be finite");if(!precision)precision="fFeE".indexOf(type)>-1?6:type==="d"?0:undefined;else if(precision==="*")precision=+a[i++];else if(precision.charAt(0)=="*")precision=+a[precision.slice(1,-1)];else precision=+precision;
value=valueIndex?a[valueIndex.slice(0,-1)]:a[i++];switch(type){case "s":return formatString(String(value),leftJustify,minWidth,precision,zeroPad,customPadChar);case "c":return formatString(String.fromCharCode(+value),leftJustify,minWidth,precision,zeroPad);case "b":return formatBaseX(value,2,prefixBaseX,leftJustify,minWidth,precision,zeroPad);case "o":return formatBaseX(value,8,prefixBaseX,leftJustify,minWidth,precision,zeroPad);case "x":return formatBaseX(value,16,prefixBaseX,leftJustify,minWidth,
precision,zeroPad);case "X":return formatBaseX(value,16,prefixBaseX,leftJustify,minWidth,precision,zeroPad).toUpperCase();case "u":return formatBaseX(value,10,prefixBaseX,leftJustify,minWidth,precision,zeroPad);case "i":case "d":number=+value||0;number=Math.round(number-number%1);prefix=number<0?"-":positivePrefix;value=prefix+pad(String(Math.abs(number)),precision,"0",false);return justify(value,prefix,leftJustify,minWidth,zeroPad);case "e":case "E":case "f":case "F":case "g":case "G":number=+value;
prefix=number<0?"-":positivePrefix;method=["toExponential","toFixed","toPrecision"]["efg".indexOf(type.toLowerCase())];textTransform=["toString","toUpperCase"]["eEfFgG".indexOf(type)%2];value=prefix+Math.abs(number)[method](precision);return justify(value,prefix,leftJustify,minWidth,zeroPad)[textTransform]();default:return substring}};return format.replace(regex,doFormat)};utils.cleanString=function(str){if(!str)return null;str=str.replace(/[\r]/g,"").replace(/[\b]/g,"").replace(/[\f]/g,"").replace(/[\n]/g,
"").replace(/\\/g,"");return str};utils.normalizePath=function(str){if(!str)return null;str=utils.cleanString(str);str=str.replace("./","");str=str.replace("/.","");str=str.replace(/([^:]\/)\/+/g,"$1");return str};utils.getMimeTable=function(){return{"mid":"midi.png","txt":"txt2.png","sql":"txt2.png","js":"javascript.png","gif":"image.png","jpg":"image.png","html":"html.png","htm":"html.png","rar":"archive.png","gz":"zip.png","tgz":"archive.png","z":"archive.png","ra":"video.png","ram":"video.png",
"rm":"video.png","pl":"source_pl.png","zip":"zip.png","wav":"sound.png","php":"php.png","php3":"php.png","phtml":"php.png","exe":"exe.png","bmp":"image.png","png":"image.png","css":"css.png","mp3":"sound.png","m4a":"sound.png","aac":"sound.png","xls":"spreadsheet.png","xlsx":"spreadsheet.png","ods":"spreadsheet.png","sxc":"spreadsheet.png","csv":"spreadsheet.png","tsv":"spreadsheet.png","doc":"word.png","docx":"word.png","odt":"word.png","swx":"word.png","rtf":"word.png","ppt":"presentation.png",
"pps":"presentation.png","odp":"presentation.png","sxi":"presentation.png","pdf":"pdf.png","mov":"video.png","avi":"video.png","mpg":"video.png","mpeg":"video.png","mp4":"video.png","m4v":"video.png","ogv":"video.png","webm":"video.png","wmv":"video.png","swf":"flash.png","flv":"flash.png","tiff":"image.png","tif":"image.png","svg":"image.png","psd":"image.png","ers":"horo.png"}};utils.getMimeTable2=function(){return{"mid":"fa-file-audio-o","txt":"fa-file-text-o","sql":"fa-cube","js":"fa-cube","gif":"fa-file-picture-o",
"jpg":"fa-file-picture-o","html":"fa-cube","htm":"fa-cube","rar":"fa-file-zip-o","gz":"fa-file-zip-o","tgz":"fa-file-zip-o","z":"fa-file-zip-o","ra":"fa-file-movie-o","ram":"fa-file-movie-o","rm":"fa-file-movie-o","pl":"source_pl.png","zip":"fa-file-zip-o","wav":"fa-file-audio-o","php":"fa-cube","php3":"fa-cube","phtml":"fa-cube","exe":"fa-file-o","bmp":"fa-file-picture-o","png":"fa-file-picture-o","css":"fa-cube","mp3":"fa-file-audio-o","m4a":"fa-file-audio-o","aac":"fa-file-audio-o","xls":"fa-file-excel-o",
"xlsx":"fa-file-excel-o","ods":"fa-file-excel-o","sxc":"fa-file-excel-o","csv":"fa-file-excel-o","tsv":"fa-file-excel-o","doc":"fa-file-word-o","docx":"fa-file-word-o","odt":"fa-file-word-o","swx":"fa-file-word-o","rtf":"fa-file-word-o","ppt":"fa-file-powerpoint-o","pps":"fa-file-powerpoint-o","odp":"fa-file-powerpoint-o","sxi":"fa-file-powerpoint-o","pdf":"fa-file-pdf-o","mov":"fa-file-movie-o","avi":"fa-file-movie-o","mpg":"fa-file-movie-o","mpeg":"fa-file-movie-o","mp4":"fa-file-movie-o","m4v":"fa-file-movie-o",
"ogv":"fa-file-movie-o","webm":"fa-file-movie-o","wmv":"fa-file-movie-o","swf":"fa-file-movie-o","flv":"fa-file-movie-o","tiff":"fa-file-picture-o","tif":"fa-file-picture-o","svg":"fa-file-picture-o","psd":"fa-file-picture-o","ers":"horo.png"}};utils.getIconTable=function(){return{"mid":"midi.png","txt":"txt2.png","sql":"txt2.png","js":"javascript.png","gif":"image.png","jpg":"image.png","html":"html.png","htm":"html.png","rar":"archive.png","gz":"zip.png","tgz":"archive.png","z":"archive.png","ra":"video.png",
"ram":"video.png","rm":"video.png","pl":"source_pl.png","zip":"zip.png","wav":"sound.png","php":"php.png","php3":"php.png","phtml":"php.png","exe":"exe.png","bmp":"image.png","png":"image.png","css":"css.png","mp3":"sound.png","m4a":"sound.png","aac":"sound.png","xls":"spreadsheet.png","xlsx":"spreadsheet.png","ods":"spreadsheet.png","sxc":"spreadsheet.png","csv":"spreadsheet.png","tsv":"spreadsheet.png","doc":"word.png","docx":"word.png","odt":"word.png","swx":"word.png","rtf":"word.png","ppt":"presentation.png",
"pps":"presentation.png","odp":"presentation.png","sxi":"presentation.png","pdf":"pdf.png","mov":"video.png","avi":"video.png","mpg":"video.png","mpeg":"video.png","mp4":"video.png","m4v":"video.png","ogv":"video.png","webm":"video.png","wmv":"video.png","swf":"flash.png","flv":"flash.png","tiff":"image.png","tif":"image.png","svg":"image.png","psd":"image.png","ers":"horo.png"}};utils.urlDecode=function(string,overwrite){if(!string||!string.length)return{};var obj={};var pairs=string.split("\x26");
var pair,name,value;for(var i=0,len=pairs.length;i<len;i++){pair=pairs[i].split("\x3d");name=decodeURIComponent(pair[0]);value=decodeURIComponent(pair[1]);if(value!=null&&value==="true")value=true;else if(value==="false")value=false;if(overwrite!==true)if(typeof obj[name]=="undefined")obj[name]=value;else if(typeof obj[name]=="string"){obj[name]=[obj[name]];obj[name].push(value)}else obj[name].push(value);else obj[name]=value}return obj};utils.getUrlArgs=function(string){var args={};var query=string.substr(string.indexOf("?")+
1)||location.search.substring(1);var pairs=query.split("\x26");for(var i=0;i<pairs.length;i++){var pos=pairs[i].indexOf("\x3d");var name=pairs[i].substring(0,pos);var value=pairs[i].substring(pos+1);value=decodeURIComponent(value);args[name]=value}return args};utils.getIcon=function(fileName){if(!fileName)return"txt2.png";var extension=utils.getFileExtension(fileName);if(extension){var mime=utils.getMimeTable();if(mime[extension]!=null)return mime[extension]}return"txt2.png"};utils.getIconClass=function(fileName){if(!fileName)return"fa-file-o";
var extension=utils.getFileExtension(fileName);if(types.customMimeIcons[extension])return types.customMimeIcons[extension];if(extension){var mime=utils.getMimeTable2();if(mime[extension]!=null)return mime[extension]}return"fa-file-o"};utils.getFileExtension=function(fileName){if(!fileName||fileName=="")return"";var split=utils.getBaseName(fileName).split(".");if(split.length>1)return split[split.length-1].toLowerCase();return""};utils.getBaseName=function(fileName){if(fileName==null)return null;var separator=
"/";if(fileName.indexOf("\\")!=-1)separator="\\";return fileName.substr(fileName.lastIndexOf(separator)+1,fileName.length)};utils.createUUID=function(){var S4=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()};utils.strip_tags=function(input,allowed){allowed=(((allowed||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,commentsAndPhpTags=/\x3c!--[\s\S]*?--\x3e|<\?(?:php)?[\s\S]*?\?>/gi;
return input.replace(commentsAndPhpTags,"").replace(tags,function($0,$1){return allowed.indexOf("\x3c"+$1.toLowerCase()+"\x3e")>-1?$0:""})};return utils})},"xblox/manager/BlockManagerUI":function(){define("xblox/manager/BlockManagerUI",["dojo/_base/declare","xide/types","xide/utils","xide/factory","xblox/views/BlockEditDialog","xblox/views/BlockTreeView","dojo/dom-class","xide/manager/BeanManager","xide/views/CIViewMixin"],function(declare,types,utils,factory,BlockEditDialog,BlockTreeView,domClass,
BeanManager,CIViewMixin){return declare("xblox.manager.BlockManagerUI",[BeanManager],{blockTreeView:null,targetTop:null,targetBottom:null,currentCIView:null,lastSelectedTopTabTitle:null,updatePalette:true,_contextChanged:false,editBlock:function(item,changedCB){if(!item.canEdit())return;var title="Edit ",thiz=this;if(item.title)title+=item.title;else if(item.name)title+=item.name;try{var actionDialog=new BlockEditDialog({item:item,title:title,style:"width:400px",resizeable:true,delegate:{onOk:function(dlg,
data){if(changedCB)changedCB(item);thiz.publish(types.EVENTS.ON_BLOCK_PROPERTY_CHANGED,{item:item});thiz.onBlockSelected({item:item,owner:this.currentCIView})}}})}catch(e){}actionDialog.show();actionDialog.resize()},onCIUpdate:function(evt){if(!evt._processedBMUI)evt._processedBMUI=true;else return;if(evt["owner"]&&evt.owner.source&&evt.owner.source.delegate&&evt.owner.item&&evt.owner.delegate===this){var cis=evt.owner.getCIS();var item=evt.owner.item;var options=utils.toOptions(cis);for(var i=0;i<
options.length;i++){var option=options[i];var field=option.dst;if(field!=null&&item[field]!=null){if(option.active!=null&&option.active===false&&option.changed===false)continue;if(item[option.dst]!=option.value||item[option.dst]!==option.value){if(item.onChangeField)item.onChangeField(option.dst,option.value,cis,evt["owner"]);item[option.dst]=option.value}}}this.publish(types.EVENTS.ON_BLOCK_PROPERTY_CHANGED,{item:item});evt.owner.source.delegate.save()}},destroyWidgets:function(){},onActionContextChanged:function(evt){0&&
console.log("context changed!",evt);if(evt&&evt.beanType==="BLOCK"){0&&console.log("a block! ");this.blockTreeView=null;this.targetTop=null;this.targetBottom=null;this.currentCIView=null;var main=this.ctx.getApplication().mainView;if(main)main._openRight()}else if(evt&&evt.beanType!=="BLOCK"){0&&console.log("not a block, clear");this.blockTreeView=null;this.targetTop=null;this.targetBottom=null;this.currentCIView=null}},shouldChangeActionContext:function(item){return!!(!item||!item.scope)},onReady:function(){this.subscribe(types.EVENTS.ON_CI_UPDATE,
this.onCIUpdate);this.subscribe(types.EVENTS.ON_ACTION_CONTEXT_CHANGED,this.onActionContextChanged);var thiz=this;setTimeout(function(){factory.subscribe(types.EVENTS.ON_BLOCK_SELECTED,thiz.onBlockSelected,thiz)},1200)},onBlockSelected:function(evt){if(!evt.item||!evt.item.scope||evt.item.beanType!=="BLOCK")return;try{var block=evt.item;if(!block)return;if(!this.targetTop){this.targetTop=this.getRightTopTarget(true,true);domClass.add(this.targetTop.domNode,"CIDialog")}if(!this.targetTop){console.error("target top invalid");
return}if(!this.targetTop){this.targetTop=this.getRightTopTarget(true,true);domClass.add(this.targetTop.domNode,"CIDialog")}if(!this.targetTop)return;if(this.targetTop.selectedChildWidget)this.lastSelectedTopTabTitle=this.targetTop.selectedChildWidget.title;if(this.currentCIView&&this.currentCIView.tabs)try{for(var i=0;i<this.currentCIView.tabs.length;i++)this.targetTop.removeChild(this.currentCIView.tabs[i])}catch(e){console.error("clear failed")}if(!block.getFields){0&&console.log("have no fields",
block);return}var cis=block.getFields();for(var i=0;i<cis.length;i++)cis[i].vertical=true;var ciView=new CIViewMixin({tabContainer:this.targetTop,delegate:this,viewStyle:"padding:0px;",autoSelectLast:true,item:block,source:evt.callee,options:{groupOrder:{"General":0,"Advanced":1,"Description":2}},cis:cis});ciView.initWithCIS(cis);this.currentCIView=ciView;if(block.onFieldsRendered)block.onFieldsRendered(block,cis);var containers=this.targetTop.getChildren();var descriptionView=null;for(var i=0;i<
containers.length;i++){containers[i].parentContainer=this.targetTop;if(containers[i].title==="Description")descriptionView=containers[i];if(this.targetTop.selectedChildWidget.title!==this.lastSelectedTopTabTitle)if(containers[i].title===this.lastSelectedTopTabTitle)this.targetTop.selectChild(containers[i])}if(!this.targetBottom)this.targetBottom=this.getRightBottomTarget(true,false);if(descriptionView&&this.targetBottom){this.targetBottom.destroyDescendants(false);this.currentCIView.tabs.remove(descriptionView);
descriptionView.parentContainer.removeChild(descriptionView);this.targetBottom.addChild(descriptionView);var main=this.getLayoutRightMain(false,false);main.resize()}if(this.blockTreeView);else{var main=this.ctx.getApplication().mainView;if(main)main._openRight();this.blockTreeView=this.createBlockTreeView(this.targetTop,"New")}}catch(e){console.error("publish ON_BLOCK_SELECTED failed "+e)}},createBlockTreeView:function(where,title,extraBlocks){try{var treeView=utils.addWidget(BlockTreeView,{title:title||
"Blocks",style:"padding:0px"},this,where,true);return treeView}catch(e){debugger}}})})},"xblox/model/variables/VariableAssignmentBlock":function(){define("xblox/model/variables/VariableAssignmentBlock",["dojo/_base/declare","xblox/model/Block","xide/utils","xide/types","xide/factory"],function(declare,Block,utils,types,factory){return declare("xblox.model.variables.VariableAssignmentBlock",[Block],{variable:null,value:null,name:"Set Variable",toText:function(){var res=this.getBlockIcon("C")+this.name+
" "+this.variable+" to "+this.value;return res},solve:function(scope,settings){if(this.variable&&this.value){this.onRun(this,settings);var _variable=scope.getVariable(this.variable);if(!_variable){console.error("     no such variable : "+this.variable);return[]}if(this.isScript(this.value)){_variable.value=scope.parseExpression(this.value);_variable.value=this.replaceAll("'","",_variable.value)}else _variable.value=this.value;0&&console.log(this.variable+" is now "+_variable.value);factory.publish(types.EVENTS.ON_DRIVER_VARIABLE_CHANGED,
{item:_variable,scope:this.scope,save:false,block:this});return[]}},canAdd:function(){return null},getFields:function(){var fields=this.inherited(arguments);var thiz=this;fields.push(this.utils.createCI("Variable",3,this.variable,{group:"General",options:this.scope.getVariablesAsOptions(),dst:"variable"}));fields.push(this.utils.createCI("value",25,this.value,{group:"General",title:"Value",dst:"value",delegate:{runExpression:function(val,run,error){return thiz.scope.expressionModel.parse(thiz.scope,
val,false,run,error)}}}));return fields}})})},"dojo/ready":function(){define("dojo/ready",["./_base/kernel","./has","require","./domReady","./_base/lang"],function(dojo,has,require,domReady,lang){var isDomReady=0,requestCompleteSignal,loadQ=[],onLoadRecursiveGuard=0,handleDomReady=function(){isDomReady=1;dojo._postLoad=dojo.config.afterOnLoad=true;if(loadQ.length)requestCompleteSignal(onLoad)},onLoad=function(){if(isDomReady&&!onLoadRecursiveGuard&&loadQ.length){onLoadRecursiveGuard=1;var f=loadQ.shift();
try{f()}finally{onLoadRecursiveGuard=0}onLoadRecursiveGuard=0;if(loadQ.length)requestCompleteSignal(onLoad)}};require.on("idle",onLoad);requestCompleteSignal=function(){if(require.idle())onLoad()};var ready=dojo.ready=dojo.addOnLoad=function(priority,context,callback){var hitchArgs=lang._toArray(arguments);if(typeof priority!="number"){callback=context;context=priority;priority=1E3}else hitchArgs.shift();callback=callback?lang.hitch.apply(dojo,hitchArgs):function(){context()};callback.priority=priority;
for(var i=0;i<loadQ.length&&priority>=loadQ[i].priority;i++);loadQ.splice(i,0,callback);requestCompleteSignal()};1||has.add("dojo-config-addOnLoad",1);if(1){var dca=dojo.config.addOnLoad;if(dca)ready[lang.isArray(dca)?"apply":"call"](dojo,dca)}if(0&&dojo.config.parseOnLoad&&!dojo.isAsync)ready(99,function(){if(!dojo.parser){dojo.deprecated("Add explicit require(['dojo/parser']);","","2.0");require(["dojo/parser"])}});if(1)domReady(handleDomReady);else handleDomReady();return ready})},"xfile/manager/ScriptManager":function(){define("xfile/manager/ScriptManager",
["dojo/_base/declare","xide/manager/ManagerBase","xide/utils","xide/types","xide/views/ACEEditor","xfile/views/EditorPluginMixin"],function(declare,ManagerBase,utils,types,ACEEditor,EditorPluginMixin){return declare("xfile.manager.ScriptManager",[ManagerBase,EditorPluginMixin],{scriptFrame:null,scriptRoot:null,frameUrl:null,appendTo:"topTabs",ace:true,onEditorClose:function(editor){var parent=editor.parentContainer||dijit.byId(this.appendTo);if(!parent);if(parent){parent.removeChild(editor);dijit.registry.remove(editor.id)}this.publish(types.EVENTS.ON_PANEL_CLOSED,
{});if(this.ctx.getPanelManager())this.ctx.getPanelManager().onClosedPanel(editor)},setFileContent:function(path,content,ready){this.ctx.getFileManager().setContent(path,content,ready)},getFileContent:function(path,ready){this.ctx.getFileManager().getContent(path,ready)},openFile:function(item,root,owner){var id="cmeditor"+item.path+""+item.name;var _existing=dijit.registry.byId(id);if(_existing){dijit.registry.remove(id);_existing.destroyRecursive();utils.destroyWidget(id)}var thiz=this;if(!root)if(this.ctx&&
this.ctx.mainView&&this.ctx.mainView.getNewAlternateTarget)root=this.ctx.mainView.getNewAlternateTarget();if(!root){console.error("have no attachment parent!");return}return utils.addWidget(ACEEditor,{dataItem:item,filePath:item.path,config:this.config,delegate:this,owner:owner,parentContainer:root,style:"padding:0px;",store:this.store,storeDelegate:{getContent:function(onSuccess){thiz.ctx.getFileManager().getContent(item.mount,item.path,onSuccess)},saveContent:function(value,onSuccess,onError){thiz.ctx.getFileManager().setContent(item.mount,
item.path,value,onSuccess)}},title:utils.toString(item.name),closable:true,onClose:function(){thiz.onEditorClose(this)}},this,root,true)},onFileClicked:function(item){var editors=EditorPluginMixin.getEditors(item);var id="cmeditor"+item.path+""+item.name;var _existing=dijit.registry.byId(id);if(_existing)if(_existing.parentContainer){_existing.parentContainer.selectChild(_existing);return}else{dijit.registry.remove(id);_existing.destroyRecursive();utils.destroyWidget(id)}var thiz=this;var root=dijit.byId(this.appendTo);
if(!root)if(this.ctx&&this.ctx.mainView&&this.ctx.mainView.getNewAlternateTarget)root=this.ctx.mainView.getNewAlternateTarget();if(!root){console.error("have no attachment parent!");return}var editor=utils.addWidget(ACEEditor,{dataItem:item,filePath:item.path,config:this.config,delegate:this,parentContainer:root,store:this.store,style:"padding:0px;",iconClass:"el-icon-pencil",ctx:this.ctx,storeDelegate:{getContent:function(onSuccess){thiz.ctx.getFileManager().getContent(item.mount,item.path,onSuccess)},
saveContent:function(value,onSuccess,onError){thiz.ctx.getFileManager().setContent(item.mount,item.path,value,onSuccess)}},title:utils.toString(item.name),closable:true,fileName:item.path,onClose:function(){thiz.onEditorClose(this)}},this,root,true);root.resize();return editor},init:function(){this.inherited(arguments)}})})},"xide/widgets/_CSSMixin":function(){define(["dojo/_base/declare","dojo/dom-class","xide/utils"],function(declare,domClass,utils){return declare("xide.widgets._CSSMixin",null,
{doCSSClass:function(node){if(this.cssClass)if(this.cssClass.indexOf(" ")==-1)domClass.add(node||this.containerNode||this.domNode,this.cssClass);else{var _cssNames=this.cssClass.split(" ");for(var i=0;i<_cssNames.length;i++)domClass.add(node||this.containerNode||this.domNode,_cssNames[i])}},buildRendering:function(){this.inherited(arguments);this.doCSSClass()},doCSSOperations:function(cssOperations,startSearchNode){if(cssOperations)for(var i=0;i<cssOperations.length;i++){var cssItem=cssOperations[i];
var cssOp=cssItem["op"]||"add";var cssClasses=cssItem.cssClass;var nodes=utils.find(cssItem.selector,startSearchNode||this.domNode,false);if(nodes&&nodes.length>0)for(var j=0;j<nodes.length;j++)if(cssClasses.indexOf(" ")==-1)domClass[cssOp](nodes[j],cssClasses);else{var _cssNames=cssClasses.split(" ");for(var k=0;k<_cssNames.length;k++)domClass[cssOp](nodes[j],_cssNames[k])}}}})})},"xide/widgets/ScriptWidget":function(){define(["dojo/_base/declare","dojo/on","xide/widgets/WidgetBase","xide/views/TextEditor",
"dojo/keys","xide/utils"],function(declare,on,WidgetBase,TextEditor,keys,utils){return declare("xide.widgets.ScriptWidget",[WidgetBase],{didLoad:false,minHeight:"300px",editorHeight:"470px",jsonEditorHeight:"270px",aceEditorHeight:"200px",aceEditorOptions:null,aceEditor:null,aceNode:null,templateString:"\x3cdiv class\x3d'jsonEditorWidgetContainer' style\x3d'width: 100%;height:300px'\x3e"+"\x3cdiv valign\x3d'middle' class\x3d'aceEditorWidget' data-dojo-attach-point\x3d'aceNode' style\x3d'height:100%;padding: 0px;'\x3e\x3c/div\x3e"+
"\x3c/div\x3e",editor:null,getValue:function(){if(this.aceEditor)return this.aceEditor.get("value");return this.inherited(arguments)},resize:function(){this.inherited(arguments);if(this.aceEditor)this.aceEditor.resize()},ctlrKeyDown:false,onKeyUp:function(evt){switch(evt.keyCode){case keys.ALT:case keys.CTRL:this.ctlrKeyDown=false;break}},onKey:function(evt){switch(evt.keyCode){case keys.META:case keys.ALT:case keys.SHIFT:case keys.CTRL:this.ctlrKeyDown=true;setTimeout(function(){thiz.ctlrKeyDown=
false},2E3);break}var thiz=this;if(evt.type&&evt.type=="keyup")return this.onKeyUp(evt);var charOrCode=evt.charCode||evt.keyCode;if(this.ctlrKeyDown&&charOrCode===83){evt.preventDefault();if(this.delegate&&this.delegate.onSave)this.delegate.onSave(this.userData,this.getValue())}},setupEventHandlers:function(){var thiz=this;on(this.aceNode,"keydown",function(event){thiz.onKey(event)})},setValue:function(value){this.userData=utils.setCIValueByField(this.userData,"value",value)},_onACEUpdate:function(){var _newValue=
this.getValue();this.setValue(_newValue);this.changed=true;if(this.userData)this.userData.changed=true},_createACEEditor:function(parentNode){var _options={region:"center",value:this.getValue(),style:"margin: 0; padding: 0; position:relative;overflow: auto;height:inherit;width:inherit;",mode:"javascript",readOnly:false,tabSize:2,softTabs:false,wordWrap:false,showPrintMargin:false,highlightActiveLine:false,fontSize:"13px",showGutter:true,className:"editor-ace ace_editor ace-codebox-dark ace_dark"};
var editorPane=new TextEditor(_options,dojo.doc.createElement("div"));this.aceNode.appendChild(editorPane.domNode);editorPane.startup();this.aceEditor=editorPane;this.aceEditor.setOptions();var editor=this.aceEditor.getEditor();var thiz=this;editor.on("change",function(){thiz._onACEUpdate()});editor.on("blur",function(){thiz.setActive(false)});editor.on("focus",function(){thiz.setActive(true)})},getAceNode:function(){},startup:function(){this.inherited(arguments);try{if(!this.aceEditor)this._createACEEditor(this.aceNode)}catch(e){console.error("constructing json editor widget failed : "+
e.message)}this.setupEventHandlers()}})})},"dijit/DropDownMenu":function(){require({cache:{"url:dijit/templates/Menu.html":'\x3ctable class\x3d"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role\x3d"menu" tabIndex\x3d"${tabIndex}"\n\t   cellspacing\x3d"0"\x3e\n\t\x3ctbody class\x3d"dijitReset" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/tbody\x3e\n\x3c/table\x3e\n'}});define("dijit/DropDownMenu",["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin",
"./_MenuBase"],function(declare,keys,template,_OnDijitClickMixin,_MenuBase){return declare("dijit.DropDownMenu",[_MenuBase,_OnDijitClickMixin],{templateString:template,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev()},_onDownArrow:function(){this.focusNext()},_onRightArrow:function(evt){this._moveToPopup(evt);evt.stopPropagation();evt.preventDefault()},_onLeftArrow:function(){if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(false);else{evt.stopPropagation();
evt.preventDefault()}}})})},"dojo/mouse":function(){define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(dojo,on,has,dom,win){has.add("dom-quirks",win.doc&&win.doc.compatMode=="BackCompat");has.add("events-mouseenter",win.doc&&"onmouseenter"in win.doc.createElement("div"));has.add("events-mousewheel",win.doc&&"onmousewheel"in win.doc);var mouseButtons;if(has("dom-quirks")&&has("ie")||!has("dom-addeventlistener"))mouseButtons={LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,
button){return e.button&button},isLeft:function(e){return e.button&1},isMiddle:function(e){return e.button&4},isRight:function(e){return e.button&2}};else mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,button){return e.button==button},isLeft:function(e){return e.button==0},isMiddle:function(e){return e.button==1},isRight:function(e){return e.button==2}};dojo.mouseButtons=mouseButtons;function eventHandler(type,selectHandler){var handler=function(node,listener){return on(node,type,function(evt){if(selectHandler)return selectHandler(evt,
listener);if(!dom.isDescendant(evt.relatedTarget,node))return listener.call(this,evt)})};handler.bubble=function(select){return eventHandler(type,function(evt,listener){var target=select(evt.target);var relatedTarget=evt.relatedTarget;if(target&&target!=(relatedTarget&&relatedTarget.nodeType==1&&select(relatedTarget)))return listener.call(target,evt)})};return handler}var wheel;if(has("events-mousewheel"))wheel="mousewheel";else wheel=function(node,listener){return on(node,"DOMMouseScroll",function(evt){evt.wheelDelta=
-evt.detail;listener.call(this,evt)})};return{_eventHandler:eventHandler,enter:eventHandler("mouseover"),leave:eventHandler("mouseout"),wheel:wheel,isLeft:mouseButtons.isLeft,isMiddle:mouseButtons.isMiddle,isRight:mouseButtons.isRight}})},"xide/factory/Views":function(){define(["xide/factory","dojo/_base/window","xide/utils","xide/types","xide/layout/TabContainer","xide/layout/ContentPane","dojox/widget/Standby"],function(factory,win,utils,types,TabContainer,ContentPane){factory.showStandBy=function(show){var splash=
document.getElementById("loadingWrapper");if(show){if(splash)splash.style.display="inline-block"}else if(splash)splash.style.display="none";return null};factory.createTabbedSettingsView=function(CIS,parent,showAllTab){var tabContainer=new dijit.layout.TabContainer({tabStrip:true,tabPosition:"left-h",splitter:true,style:"min-width:450px;","className":"ui-widget-content"});parent.domNode.appendChild(tabContainer.domNode);tabContainer.startup();var widgetTabMap={};var widgetGroups=[];if(showAllTab){var dstTabContainerAll=
widgetTabMap[types.WidgetGroup.All];if(dstTabContainerAll==null){dstTabContainerAll=new ContentPane({title:"All",style:"padding:5px;",closeable:false,onShow:function(){}});widgetTabMap[types.WidgetGroup.All]=dstTabContainerAll;dstTabContainerAll.startup();tabContainer.addChild(dstTabContainerAll)}}var widgetGroup=null;for(var i=0;i<CIS.length;i++){var ci=CIS[i];var groupTitle=utils.toString(ci["group"])||null;if(groupTitle==="-1")groupTitle=null;if(groupTitle==null){widgetGroup=utils.getWidgetGroup(ci);
if(widgetGroup==types.WidgetGroup.Hidden)continue;groupTitle=utils.getWidgetGroupTitle(widgetGroup)}else widgetGroup=groupTitle;var dstTabContainer=widgetTabMap[widgetGroup];if(dstTabContainer==null){widgetGroups.push(widgetGroup);dstTabContainer=new ContentPane({title:groupTitle,preload:false,closeable:false,adjustChildsToWidth:true});widgetTabMap[widgetGroup]=dstTabContainer}}widgetGroups.sort(function(a,b){return a-b});for(var wgi=0;wgi<widgetGroups.length;wgi++){widgetGroup=widgetGroups[wgi];
var container=widgetTabMap[widgetGroup];container.startup();tabContainer.addChild(container)}tabContainer["widgetTabMap"]=widgetTabMap;return tabContainer}})},"dgrid/extensions/_DnD-touch-autoscroll":function(){define(["dojo/aspect","dojo/dom-geometry","dojo/dnd/autoscroll","../List"],function(aspect,domGeometry,autoscroll,List){var original=autoscroll.autoScrollNodes,instances,findEnclosing;instances={};aspect.after(List.prototype,"postCreate",function(r){var id=this.id;if(instances[id])0&&console.warn("dgrid instance registered with duplicate id '"+
id+"'");instances[id]=this;return r});aspect.after(List.prototype,"destroy",function(r){delete instances[this.id];return r});findEnclosing=function(node){var id,instance;while(node){if((id=node.id)&&(instance=instances[id]))return instance;node=node.parentNode}};autoscroll.autoScrollNodes=function(evt){var node=evt.target,list=findEnclosing(node),pos,nodeX,nodeY,thresholdX,thresholdY,dx,dy,oldScroll,newScroll;if(list){node=list.touchNode.parentNode;pos=domGeometry.position(node,true);nodeX=evt.pageX-
pos.x;nodeY=evt.pageY-pos.y;thresholdX=Math.min(autoscroll.H_TRIGGER_AUTOSCROLL,pos.w/2);thresholdY=Math.min(autoscroll.V_TRIGGER_AUTOSCROLL,pos.h/2);if(nodeX<thresholdX)dx=-thresholdX;else if(nodeX>pos.w-thresholdX)dx=thresholdX;if(nodeY<thresholdY)dy=-thresholdY;else if(nodeY>pos.h-thresholdY)dy=thresholdY;if(dx||dy){oldScroll=list.getScrollPosition();newScroll={};if(dx)newScroll.x=oldScroll.x+dx;if(dy)newScroll.y=oldScroll.y+dy;list.scrollTo(newScroll);return}}original.call(this,evt)};return autoscroll})},
"xblox/model/logic/CaseBlock":function(){define("xblox/model/logic/CaseBlock",["dojo/_base/declare","xblox/model/Block"],function(declare,Block){return declare("xblox.model.logic.CaseBlock",[Block],{comparator:null,expression:null,items:null,name:"Case",toText:function(){var _comparator=""+this.comparator;if(_comparator=="\x3d\x3d")_comparator="";return this.getBlockIcon("I")+this.name+" "+_comparator+(this.expression!=null?" "+this.expression:"")},canAdd:function(){return[]},solve:function(scope,
switchBlock,settings){var switchVarValue=scope.getVariable(switchBlock.variable).value;var compResult=scope.parseExpression("'"+switchVarValue+"'"+this.comparator+this.expression);if(compResult===true){this.onSuccess(this,settings);return this._solve(scope,settings)}else{this.onFailed(this,settings);return false}},getChildren:function(parent){return this.items},getFields:function(){var fields=this.inherited(arguments);fields=fields.concat(this.inherited(arguments));fields.push(this.utils.createCI("Expression",
13,this.expression,{group:"General",title:"Expression",dst:"expression"}));fields.push(this.utils.createCI("Comparator",13,this.comparator,{group:"General",title:"Comparator",dst:"comparator"}));return fields}})})},"xide/widgets/ActionToolbarMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","xide/types","xide/factory","xide/widgets/ActionToolbarButton","xide/utils","dojo/i18n","dojo/i18n!./nls/TemplatedWidgetBase"],function(declare,lang,domClass,types,factory,ActionToolbarButton,
utils){return declare("xide.widgets.ActionToolbarMixin",null,{config:null,useElusive:true,editSelector:null,currentItem:null,owner:null,getCurrentItem:function(){return this.currentItem},translate:function(value){if(this._messages==null||this._messages.length==0)this._setupTranslations();if(value){var _titleKey=value.toLocaleLowerCase();_titleKey=_titleKey.replace(/\s+/g,"_");if(_titleKey&&this._messages!=null){var _titleValue=this._messages[_titleKey];if(_titleValue&&_titleValue.length>0)return _titleValue}}return value||
""},_setupTranslations:function(){var dstCtx=this.ctx;if(dstCtx&&dstCtx.getLocals)this._messages=dstCtx.getLocals("xide.widgets","TemplatedWidgetBase");else this._messages=[]},postMixInProperties:function(){this.inherited(arguments);this._setupTranslations()},toTitle:function(operation){switch(operation){case types.OPERATION.DELETE:return this.translate("Delete");case types.OPERATION.EDIT:return this.translate("Edit");case types.OPERATION.RENAME:return this.translate("Rename");case types.OPERATION.COPY:return this.translate("Copy");
case types.OPERATION.MOVE:return this.translate("Move");case types.OPERATION.DOWNLOAD:return this.translate("Download");case types.OPERATION.INFO:return this.translate("Info");case types.OPERATION.COMPRESS:return this.translate("Compress");case types.OPERATION.RELOAD:return this.translate("Reload");case types.OPERATION.PREVIEW:return this.translate("Preview");case types.OPERATION.INSERT_IMAGE:return this.translate("Insert");case types.OPERATION.OPTIONS:return this.translate("Options");case types.OPERATION.PERMA_LINK:return this.translate("Perma Link")}return"No Title"},
toIconClassElusive:function(operation){switch(operation){case types.OPERATION.DELETE:return"el-icon-remove-circle";case types.OPERATION.EDIT:return"el-icon-file-edit";case types.OPERATION.RENAME:return"el-icon-edit";case types.OPERATION.COPY:return"el-icon-random";case types.OPERATION.MOVE:return"el-icon-move";case types.OPERATION.DOWNLOAD:return"el-icon-download";case types.OPERATION.INFO:return"el-icon-info-sign";case types.OPERATION.COMPRESS:return"el-icon-briefcase";case types.OPERATION.RELOAD:return"el-icon-refresh";
case types.OPERATION.PREVIEW:return"icon-32-preview-content";case types.OPERATION.INSERT_IMAGE:return"icon-32-insert-image";case types.OPERATION.OPTIONS:return"el-icon-cogs";case types.OPERATION.PERMA_LINK:return"el-icon-link"}},toIconClass:function(operation){if(this.useElusive)return this.toIconClassElusive(operation);switch(operation){case types.OPERATION.DELETE:return"icon-32-remove";case types.OPERATION.EDIT:return"icon-32-edit";case types.OPERATION.RENAME:return"icon-32-edit";case types.OPERATION.COPY:return"icon-32-copy";
case types.OPERATION.MOVE:return"icon-32-move";case types.OPERATION.DOWNLOAD:return"icon-32-download";case types.OPERATION.INFO:return"icon-32-info";case types.OPERATION.COMPRESS:return"icon-32-compress";case types.OPERATION.RELOAD:return"icon-32-reload";case types.OPERATION.PREVIEW:return"icon-32-preview-content";case types.OPERATION.INSERT_IMAGE:return"icon-32-insert-image"}},onButtonClicked:function(button){if(this.delegate&&this.delegate.onActionButton)this.delegate.onActionButton(button,button.item,
button.operation,button.owner)},removeEditorsSelector:function(){if(!this.editSelector)return this.getButton(types.OPERATION.EDIT);var item,owner=null;var oldEditButton=this.getButton(types.OPERATION.EDIT);item=oldEditButton.item;owner=oldEditButton.owner;this.buttons.remove(oldEditButton);var newEditButton=this._createButton(types.OPERATION.EDIT,null,null,true);newEditButton.item=item;newEditButton.owner=owner;dojo.place(newEditButton.domNode,this.editSelector.domNode,"after");utils.destroyWidget(this.editSelector);
this.editSelector=null;return newEditButton},prepareEditorsSelector:function(editButton,editors){var editSelector=new EditorSelector({delegate:this,editors:editors},dojo.doc.createElement("div"));dojo.place(editSelector.domNode,editButton.domNode,"after");editSelector.startup();var newEditButton=editSelector.createMenuItem("el-icon-file-edit","Open",types.OPERATION.EDIT);this.buttons.remove(editButton);this.editSelector=editSelector;return editSelector},onFileSelected:function(data){var editors=EditorPluginMixin.getEditors(data);
var btnEdit=this.getButton(types.OPERATION.EDIT);if(btnEdit){if(editors){if(btnEdit instanceof dijit.MenuItem)btnEdit=this.removeEditorsSelector();if(btnEdit instanceof xfile.widgets.ActionToolbarButton){var newEditMenu=this.prepareEditorsSelector(btnEdit,editors);utils.destroyWidget(btnEdit)}}else btnEdit=this.removeEditorsSelector(btnEdit);if(this.editSelector)this.editSelector.wButton.set("disabled",false);btnEdit.setDisabled(false)}else;var btnEdit=this.getButton(types.OPERATION.INSERT_IMAGE);
if(btnEdit)btnEdit.setDisabled(false)},onCommonsSelected:function(data){var disable=false;if(data.read===false&&data.write===false)disable=true;var btnRename=this.getButton(types.OPERATION.RENAME);if(btnRename)btnRename.setDisabled(disable);var btnDownload=this.getButton(types.OPERATION.DOWNLOAD);if(btnDownload)btnDownload.setDisabled(disable);var btnCopy=this.getButton(types.OPERATION.COPY);if(btnCopy)btnCopy.setDisabled(disable);var btnMove=this.getButton(types.OPERATION.MOVE);if(btnMove)btnMove.setDisabled(disable);
var btnProp=this.getButton(types.OPERATION.INFO);if(btnProp)btnProp.setDisabled(disable);var btnDelete=this.getButton(types.OPERATION.DELETE);if(btnDelete)btnDelete.setDisabled(disable);var btncompress=this.getButton(types.OPERATION.COMPRESS);if(btncompress)btncompress.setDisabled(disable);var btnReload=this.getButton(types.OPERATION.RELOAD);if(btnReload)btnReload.setDisabled(disable);var btnNewFile=this.getButton(types.OPERATION.NEW_FILE);if(btnNewFile)btnNewFile.setDisabled(disable);var btnNewDir=
this.getButton(types.OPERATION.NEW_DIRECTORY);if(btnNewDir)btnNewDir.setDisabled(disable);var btnPerma=this.getButton(types.OPERATION.PERMA_LINK);if(btnPerma)btnPerma.setDisabled(false)},clearStates:function(item,owner){return;for(var i=0;i<this.buttons.length;i++)try{this.buttons[i].item=item;this.buttons[i].owner=owner;if(this.buttons[i].operation===types.OPERATION.CUSTOM);else this.buttons[i].setDisabled(true)}catch(e){}},onDirectorySelected:function(data){if(this.editSelector)this.editSelector.wButton.set("disabled",
true)},onItemSelected:function(data){try{if(data&&data.item){var item=data.item;this.clearStates(item,data.caller);if(item.name=="."||item.name==".."){var btnNewFile=this.getButton(types.OPERATION.NEW_FILE);if(btnNewFile)btnNewFile.setDisabled(false);var btnNewDir=this.getButton(types.OPERATION.NEW_DIRECTORY);if(btnNewDir)btnNewDir.setDisabled(false);return}this.onCommonsSelected(item);if(item.directory!=null&&item.directory===true)this.onDirectorySelected(item);else this.onFileSelected(item)}}catch(e){}},
getButton:function(operation){for(var i=0;i<this.buttons.length;i++)if(this.buttons[i].operation==operation)return this.buttons[i];return null},_createDefaultItems:function(){this.config={};if(!this.buttons)this.buttons=[];var allowedActions=this.config.ALLOWED_ACTIONS||{1:true,2:true,3:true,4:true,5:true,6:true,7:true,8:true,9:true,10:true,11:true,12:true,13:true,14:true,15:true,16:true,17:true};var defaultState=false;var opsInt=types.OPERATION_INT;if(allowedActions[opsInt.RELOAD])var reloadButton=
this._createButton(types.OPERATION.RELOAD,null,null,defaultState);if(allowedActions[opsInt.DELETE])var deleteButton=this._createButton(types.OPERATION.DELETE,null,null,defaultState);if(allowedActions[opsInt.COMPRESS])var compressButton=this._createButton(types.OPERATION.COMPRESS,null,null,defaultState);if(allowedActions[opsInt.DOWNLOAD])var downloadButton=this._createButton(types.OPERATION.DOWNLOAD,null,null,defaultState);if(allowedActions[opsInt.INFO])var infoButton=this._createButton(types.OPERATION.INFO,
null,null,defaultState);if(allowedActions[opsInt.RENAME])var renameButton=this._createButton(types.OPERATION.RENAME,null,null,defaultState);if(allowedActions[opsInt.MOVE])var moveButton=this._createButton(types.OPERATION.MOVE,null,null,true);if(allowedActions[opsInt.COPY])var copyButton=this._createButton(types.OPERATION.COPY,null,null,true);if(allowedActions[opsInt.EDIT])var editButton=this._createButton(types.OPERATION.EDIT,null,null,true);return allowedActions},_createButton:function(operation,
item,clickcb,disabled){var iconClass=this.toIconClass(operation);var title=this.toTitle(operation);if(iconClass&&title){var button=new ActionToolbarButton({title:title,iconClass:iconClass,operation:operation,item:item,disabled:disabled},dojo.doc.createElement("div"));this.parentContainer.appendChild(button.domNode);dojo.place(button.domNode,this.parentContainer,"first");button.startup();this.buttons.push(button);var thiz=this;button.domNode.onclick=function(){thiz.onButtonClicked(button)};if(this.useElusive){domClass.remove(button.iconNode,
"dijitReset");domClass.add(button.iconNode,"actionToolbarButtonElusive")}return button}},_createButtonEx:function(command,title,iconClass,item,clickcb,disabled,owner,place,emit,style,label,extraClass,action){if(iconClass&&title){var _buttonProto=ActionToolbarButton;var _buttonArgs={title:title,iconClass:iconClass,operation:command,item:item,disabled:disabled,style:style!=null?style:"float:right;",label:label||""};if(action){if(action.widgetClass)_buttonProto=utils.getObject(action.widgetClass,_buttonProto);
if(action.widgetArgs)lang.mixin(_buttonArgs,action.widgetArgs)}var button=utils.addWidget(_buttonProto,_buttonArgs,this,this.containerNode,false);if(place!==null)dojo.place(button.domNode,this.containerNode,place);button.startup();this.buttons.push(button);if(label!=null&&label.length>0){button.showLabel=true;button.set("label",label)}if(clickcb)try{button.on("click",function(evt){evt.preventDefault();if(owner!=null)clickcb(command,item,owner,button);else clickcb(command,item,owner,button)})}catch(e){console.error("error in action handler! "+
e)}if(extraClass)domClass.add(button.domNode,extraClass);if(this.useElusive){domClass.remove(button.iconNode,"dijitReset");domClass.add(button.iconNode,"actionToolbarButtonElusive")}return button}},onViewChanged:function(){},clear:function(){for(var i in this.buttons){var button=this.buttons[i];utils.destroyWidget(button)}this.buttons=[]},addActions:function(actions,owner,items){this.owner=owner;for(var i=0;i<actions.length;i++){var action=actions[i];if(action.domNode){this.containerNode.appendChild(action.domNode);
if(action.place!==null)dojo.place(action.domNode,this.containerNode,action.place);this.buttons.push(action)}else{var newEditButton=this._createButtonEx(action["command"],action["title"],action["icon"],items,action["handler"],action["disabled"]||false,owner,action["place"],action["emit"],action["style"],action["label"],action["extraClass"],action);if(action["elusive"]===true)domClass.remove(newEditButton.iconNode,"dijitReset")}}},startup:function(){var thiz=this;this.inherited(arguments);this.buttons=
[];this.editors=[];this.currentItem={};factory.subscribe(types.EVENTS.ON_VIEW_SHOW,this.onViewChanged,this)}})})},"xblox/model/server/RunServerMethod":function(){define("xblox/model/server/RunServerMethod",["dojo/_base/declare","xblox/model/server/ServerBlock","xide/utils"],function(declare,ServerBlock,utils){return declare("xblox.model.server.RunServerMethod",[ServerBlock],{description:"Runs a JSON-RPC-2.0 method on the server",name:"Run Server Method",method:"XShell::run",args:"",deferred:true,
defaultServiceClass:"XShell",defaultServiceMethod:"run",onMethodChanged:function(newMethod,cis){this.method=newMethod;if(!utils.isValidString(this.args)){var newServerParams=this.getServerParams();if(newServerParams)this._updateArgs(newServerParams,cis)}},_getArgs:function(){var _args=utils.getJson(this.args);var result=[];if(_args){var isSMD=false;if(_args&&_args[0]["optional"]!=null)isSMD=true;if(isSMD)for(var i=0;i<_args.length;i++){var _arg=_args[i];var _variableValue=_arg.value;var isBase64=
_arg.name.indexOf("Base64")!=-1;if(isBase64)_variableValue=this.getService().base64_encode(_variableValue);if(_arg.value!=="notset")if(_arg.value.indexOf("[")!=-1&&_arg.value.indexOf("]")!=-1){_variableValue=this.scope.expressionModel.replaceVariables(this.scope,_arg.value,false,false);if(_arg.name.indexOf("Base64")!=-1)_variableValue=this.getService().base64_encode(_variableValue);result.push(_variableValue)}else result.push(_variableValue||_arg["default"]);else result.push(_arg["default"]||_variableValue)}else;
}else;return result},_updateArgs:function(params,cis){var argumentWidget=this.utils.getCIWidgetByName(cis,"args");if(argumentWidget){var _string=JSON.stringify(params);argumentWidget.editBox.set("value",_string);this.args=_string}},getServerParams:function(){var service=this.getService();var params=service.getParameterMap(this.getServiceClass(),this.getServiceMethod());if(params)for(var i=0;i<params.length;i++){var param=params[i];param.value="notset"}return params},solve:function(scope,settings,
run,error){this._return=[];this._lastResult=null;var thiz=this;var ret=[];if(!this.isInValidState()){this.onFailed(this,settings);return ret}var _args=this._getArgs();var _cbSuccess=function(response){thiz._lastResult=thiz.utils.getJson(response)||[response];thiz.resolved(thiz._lastResult);thiz.onSuccess(thiz,settings)};var _cbError=function(response){thiz._lastResult=thiz.utils.getJson(response)||[response];thiz.resolved(thiz._lastResult);thiz.onFailed(thiz,settings)};this.onRun(this,settings);this.getService().callMethodEx(this.getServiceClass(),
this.getServiceMethod(),_args,_cbSuccess,_cbError);return ret},toText:function(){var result=this.getBlockIcon()+" "+this.name+" :: ";if(this.method)result+=this.method.substr(0,50);return result},canAdd:function(){return[]},getFields:function(){var fields=this.getDefaultFields();var thiz=this;fields.push(this.utils.createCI("value",25,this.method,{group:"General",title:"Method",dst:"method",description:"This should be in the format : MyServerClass::myMethod",delegate:{runExpression:function(val,run,
error){var old=thiz.method;thiz.method=val;var _res=thiz.solve(thiz.scope,null,run,error)}}}));fields=fields.concat(this.getServerDefaultFields());return fields},getBlockIcon:function(){return'\x3cspan class\x3d"fa-plug"\x3e\x3c/span\x3e'},mayHaveChildren:function(parent){return this.items!=null&&this.items.length>0},getChildren:function(parent){return this.items},onChangeField:function(field,newValue,cis){if(field==="method")this.onMethodChanged(newValue,cis)},isInValidState:function(){return this.getService()!=
null},getService:function(){return this.scope.getService()},getServiceClass:function(){return this.method.split("::")[0]||this.defaultServiceClass},getServiceMethod:function(){return this.method.split("::")[1]||this.defaultServiceMethod},hasMethod:function(method){return this.isInValidState()&&this.getService()[this.getServiceClass()]!=null&&this.getService()[this.getServiceClass()][this.getServiceMethod()]!=null},hasServerClass:function(_class){return this.isInValidState()&&this.getService()[this.getServiceClass()]!=
null},getServerFunction:function(){if(this.isInValidState()&&this.getServiceClass()&&this.getServiceMethod())return this.getService()[this.getServiceClass()][this.getServiceMethod()];return null}})})},"dojo/aspect":function(){define("dojo/aspect",[],function(){var undefined,nextId=0;function advise(dispatcher,type,advice,receiveArguments){var previous=dispatcher[type];var around=type=="around";var signal;if(around){var advised=advice(function(){return previous.advice(this,arguments)});signal={remove:function(){signal.cancelled=
true},advice:function(target,args){return signal.cancelled?previous.advice(target,args):advised.apply(target,args)}}}else signal={remove:function(){var previous=signal.previous;var next=signal.next;if(!next&&!previous)delete dispatcher[type];else{if(previous)previous.next=next;else dispatcher[type]=next;if(next)next.previous=previous}},id:nextId++,advice:advice,receiveArguments:receiveArguments};if(previous&&!around)if(type=="after"){while(previous.next&&(previous=previous.next));previous.next=signal;
signal.previous=previous}else{if(type=="before"){dispatcher[type]=signal;signal.next=previous;previous.previous=signal}}else dispatcher[type]=signal;return signal}function aspect(type){return function(target,methodName,advice,receiveArguments){var existing=target[methodName],dispatcher;if(!existing||existing.target!=target){target[methodName]=dispatcher=function(){var executionId=nextId;var args=arguments;var before=dispatcher.before;while(before){args=before.advice.apply(this,args)||args;before=
before.next}if(dispatcher.around)var results=dispatcher.around.advice(this,args);var after=dispatcher.after;while(after&&after.id<executionId){if(after.receiveArguments){if(!after||!after.advice||!after.advice.apply);var newResults=after.advice.apply(this,args);results=newResults===undefined?results:newResults}else results=after.advice.call(this,results,args);after=after.next}return results};if(existing)dispatcher.around={advice:function(target,args){return existing.apply(target,args)}};dispatcher.target=
target}var results=advise(dispatcher||existing,type,advice,receiveArguments);advice=null;return results}}var after=aspect("after");var before=aspect("before");var around=aspect("around");return{before:before,around:around,after:after}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(dojo,lang,has){if(!1)return has;dojo._name="browser";lang.mixin(dojo,{isBrowser:true,isFF:has("ff"),isIE:has("ie"),isKhtml:has("khtml"),isWebKit:has("webkit"),isMozilla:has("mozilla"),
isMoz:has("mozilla"),isOpera:has("opera"),isSafari:has("safari"),isChrome:has("chrome"),isMac:has("mac"),isIos:has("ios"),isAndroid:has("android"),isWii:has("wii"),isQuirks:has("quirks"),isAir:has("air")});dojo.locale=dojo.locale||(has("ie")?navigator.userLanguage:navigator.language).toLowerCase();return has})},"xwordpress/Managers":function(){define("xwordpress/Managers",["dojo/_base/declare","xide/manager/Context","xide/manager/Application","xide/manager/CIStoreDelegate","xide/manager/WorkflowManager",
"xide/manager/SettingsManager","xide/manager/ManagerBase","xwordpress/manager/WorkflowManager","xwordpress/manager/FileManager","xwordpress/manager/Context","xfile/manager/Context","xfile/manager/ScriptManager","xfile/manager/FileManager","xfile/manager/PanelManagerBase","xfile/manager/PanelManager","xfile/manager/NotificationManager","xfile/manager/ClipboardManager","xide/manager/PluginManager","xfile/manager/LogManager"],function(declare){return declare("xwordpress.Managers",null,{})})},"xfile/widgets/ProgressItem":function(){define("xfile/widgets/ProgressItem",
["dojo/_base/declare","xide/widgets/TemplatedWidgetBase","xide/widgets/_CSSMixin","xide/utils","xide/factory"],function(declare,TemplatedWidgetBase,CSSMixin,EventedMixin,utils,factory){return declare("xfile.widgets.ProgressItem",[TemplatedWidgetBase,CSSMixin],{baseClass:"fileActionProgress actionMessage",backgroundClass:"imageBackground",tag:"div",root:null,templateString:"\x3cdiv\x3e\x3cspan data-dojo-attach-point\x3d'spinner' class\x3d'fa-spinner fa-spin'\x3e\x3c/span\x3e\x3cspan class\x3d'fileActionProgressLabel'\x3e${!message}\x3c/span\x3e\x3cspan class\x3d'fileActionProgressLabel' data-dojo-attach-point\x3d'endMessage'\x3e\x3c/span\x3e\x3cdiv data-dojo-attach-point\x3d'root' class\x3d'fileActionItem'\x3e\x3c/div\x3e\x3c/div\x3e",
item:null,spinner:null,endMessage:null,message:"",terminatorItem:null,topics:null,autoDestroy:false,terminatorMessage:null,onFinish:function(data){utils.destroyWidget(this.spinner);this.endMessage.innerHTML=": "+this.translate("done");var thiz=this;if(this.autoDestroy)setTimeout(function(){utils.destroyWidget(thiz)},5E3)},onEnd:function(data){if(data&&data&&data.terminatorItem)if(data.terminatorItem==this.terminatorItem)this.onFinish()},startup:function(){this.inherited(arguments);if(this.terminatorMessage)this.subscribe(this.terminatorMessage,
this.onEnd)}})})},"xblox/model/events/OnKey":function(){define("xblox/model/events/OnKey",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/Deferred","xblox/model/Block","xide/utils","xide/types","xide/mixins/EventedMixin","xblox/model/Referenced","xblox/model/Contains","xblox/model/events/OnEvent","dijit/registry","dojo/on"],function(declare,lang,array,Deferred,Block,utils,types,EventedMixin,Referenced,Contains,OnEvent,registry,on){return declare("xblox.model.events.OnKey",[Block,
EventedMixin,Referenced,Contains],{name:"On Key",event:"",reference:"",references:null,description:"Triggers when a keyboard sequence has been entered",listeners:null,toText:function(){var result=this.getBlockIcon()+" "+this.name+" :: ";if(this.event)result+=this.event;return result},canAdd:function(){return[]},getFields:function(){var fields=this.inherited(arguments)||this.getDefaultFields();fields.push(this.utils.createCI("Keyboard Sequence",types.ECIType.STRING,this.event,{group:"General",dst:"event",
value:this.event,intermediateChanges:false}));fields.push(this.utils.createCI("Object/Widget",types.ECIType.WIDGET_REFERENCE,this.reference,{group:"General",dst:"reference",value:this.reference}));return fields},getBlockIcon:function(){return'\x3cspan class\x3d"fa-keyboard-o"\x3e\x3c/span\x3e'},onEvent:function(evt){this._lastResult=evt;this.solve(this.scope,this._lastRunSettings)},_addListerner:function(keys,handler,obj){if(this.listeners==null)this.listeners=[];0&&console.log("register listener");
var my_defaults={is_unordered:true,prevent_repeat:false,prevent_default:false,on_keyup:function(e){0&&console.log("up")},on_keydown:function(e){0&&console.log("down")},on_release:function(e){0&&console.log("release")}};var listener=null;listener=new window.keypress.Listener(obj,my_defaults);listener.simple_combo(keys,function(e){0&&console.log("combo activated "+keys,arguments);if(handler)handler(arguments)});this.listeners.push(listener)},_subscribe:function(keys,handler,obj){if(!keys)return;if(obj&&
obj.domNode)obj=obj.domNode;this._addListerner(keys,handler,obj)},_registerEvent:function(evt){if(!evt||!evt.length)return;var objects=this.resolveReference(this.deserialize(this.reference));var thiz=this;if(objects&&objects.length)for(var i=0;i<objects.length;i++){var obj=objects[i];if(obj&&obj.id){var _widget=registry.byId(obj.id);_widget=null;if(_widget&&_widget.on){var _event=this.event.replace("on","");0&&console.log("found widget : "+obj.id+" will register event "+_event);var _handle=_widget.on(_event,
lang.hitch(this,function(e){0&&console.log("event triggered : "+thiz.event);thiz.onEvent(e)}));this._events.push(_handle)}else this._subscribe(evt,function(){thiz.onEvent(arguments)},obj)}else this._subscribe(evt,function(){thiz.onEvent(arguments)},obj)}else this._subscribe(evt,function(){thiz.onEvent(arguments)})},onLoad:function(){this._onLoaded=true;if(this.event&&this.event.length&&this.enabled)this._registerEvent(this.event)},destroy:function(){this.inherited(arguments)},updateEventSelector:function(objects,
cis){var options=[];if(!objects||!objects.length)options=this.scope.getEventsAsOptions(this.event);else{options=[{label:"onclick",value:"onclick"},{label:"ondblclick",value:"ondblclick"},{label:"onmousedown",value:"onmousedown"},{label:"onmouseup",value:"onmouseup"},{label:"onmouseover",value:"onmouseover"},{label:"onmousemove",value:"onmousemove"},{label:"onmouseout",value:"onmouseout"},{label:"onkeypress",value:"onkeypress"},{label:"onkeydown",value:"onkeydown"},{label:"onkeyup",value:"onkeyup"},
{label:"onfocus",value:"onfocus"},{label:"onblur",value:"onblur"},{label:"onchange",value:"onchange"}];for(var i=0;i<options.length;i++){var obj=options[i];if(obj.value===this.event){obj.selected=true;break}}}for(var i=0;i<cis.length;i++){var ci=cis[i];if(ci["widget"]&&ci["widget"].title==="Event"){var widget=ci["_widget"];widget.nativeWidget.set("options",options);widget.nativeWidget.reset();widget.nativeWidget.set("value",this.event);this.publish(types.EVENTS.RESIZE,{});break}}},onReferenceChanged:function(newValue,
cis){this._destroy();this.reference=newValue;var objects=this.resolveReference(this.deserialize(newValue));this._registerEvent(this.event)},onChangeField:function(field,newValue,cis){if(field=="event"){this._destroy();if(this._onLoaded){this.event=newValue;this._registerEvent(newValue)}}if(field=="reference")this.onReferenceChanged(newValue,cis);this.inherited(arguments)},activate:function(){this._destroy();this._registerEvent(this.event)},deactivate:function(){this._destroy()},_destroy:function(){if(this.listeners)for(var i=
0;i<this.listeners.length;i++){var obj=this.listeners[i];obj.stop_listening();var combos=obj.get_registered_combos();if(combos)obj.unregister_many(combos);obj.reset();0&&console.log("did destroy listener")}this.listeners=[]},onFieldsRendered:function(block,cis){}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(declare,QueryResults,SimpleQueryEngine){var base=null;return declare("dojo.store.Memory",base,{constructor:function(options){for(var i in options)this[i]=
options[i];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:SimpleQueryEngine,get:function(id){return this.data[this.index[id]]},getIdentity:function(object){return object[this.idProperty]},put:function(object,options){var data=this.data,index=this.index,idProperty=this.idProperty;var id=object[idProperty]=options&&"id"in options?options.id:idProperty in object?object[idProperty]:Math.random();if(id in index){if(options&&options.overwrite===false)throw new Error("Object already exists");
data[index[id]]=object}else index[id]=data.push(object)-1;return id},add:function(object,options){(options=options||{}).overwrite=false;return this.put(object,options)},remove:function(id){var index=this.index;var data=this.data;if(id in index){data.splice(index[id],1);this.setData(data);return true}},query:function(query,options){return QueryResults(this.queryEngine(query,options)(this.data))},setData:function(data){if(data.items){this.idProperty=data.identifier;data=this.data=data.items}else this.data=
data;this.index={};for(var i=0,l=data.length;i<l;i++)this.index[data[i][this.idProperty]]=i}})})},"dojox/data/JsonRestStore":function(){define("dojox/data/JsonRestStore",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojox/rpc/Rest","dojox/rpc/JsonRest","dojox/json/schema","dojox/data/ServiceStore"],function(lang,declare,connect,rpcRest,rpcJsonRest,jsonSchema,ServiceStore){var rpc=lang.getObject("dojox.rpc",true);var JsonRestStore=declare("dojox.data.JsonRestStore",ServiceStore,{constructor:function(options){connect.connect(rpcRest._index,
"onUpdate",this,function(obj,attrName,oldValue,newValue){var prefix=this.service.servicePath;if(!obj.__id)0&&console.log("no id on updated object ",obj);else if(obj.__id.substring(0,prefix.length)==prefix)this.onSet(obj,attrName,oldValue,newValue)});this.idAttribute=this.idAttribute||"id";if(typeof options.target=="string"){options.target=options.target.match(/\/$/)||this.allowNoTrailingSlash?options.target:options.target+"/";if(!this.service)this.service=rpcJsonRest.services[options.target]||rpcRest(options.target,
true)}rpcJsonRest.registerService(this.service,options.target,this.schema);this.schema=this.service._schema=this.schema||this.service._schema||{};this.service._store=this;this.service.idAsRef=this.idAsRef;this.schema._idAttr=this.idAttribute;var constructor=rpcJsonRest.getConstructor(this.service);var self=this;this._constructor=function(data){constructor.call(this,data);self.onNew(this)};this._constructor.prototype=constructor.prototype;this._index=rpcRest._index},loadReferencedSchema:true,idAsRef:false,
referenceIntegrity:true,target:"",allowNoTrailingSlash:false,newItem:function(data,parentInfo){data=new this._constructor(data);if(parentInfo){var values=this.getValue(parentInfo.parent,parentInfo.attribute,[]);values=values.concat([data]);data.__parent=values;this.setValue(parentInfo.parent,parentInfo.attribute,values)}return data},deleteItem:function(item){var checked=[];var store=dataExtCfg._getStoreForItem(item)||this;if(this.referenceIntegrity){rpcJsonRest._saveNotNeeded=true;var index=rpcRest._index;
var fixReferences=function(parent){var toSplice;checked.push(parent);parent.__checked=1;for(var i in parent)if(i.substring(0,2)!="__"){var value=parent[i];if(value==item){if(parent!=index)if(parent instanceof Array)(toSplice=toSplice||[]).push(i);else(dataExtCfg._getStoreForItem(parent)||store).unsetAttribute(parent,i)}else if(typeof value=="object"&&value){if(!value.__checked)fixReferences(value);if(typeof value.__checked=="object"&&parent!=index)(dataExtCfg._getStoreForItem(parent)||store).setValue(parent,
i,value.__checked)}}if(toSplice){i=toSplice.length;parent=parent.__checked=parent.concat();while(i--)parent.splice(toSplice[i],1);return parent}return null};fixReferences(index);rpcJsonRest._saveNotNeeded=false;var i=0;while(checked[i])delete checked[i++].__checked}rpcJsonRest.deleteObject(item);store.onDelete(item)},changing:function(item,_deleting){rpcJsonRest.changing(item,_deleting)},cancelChanging:function(object){if(!object.__id)return;dirtyObjects=dirty=rpcJsonRest.getDirtyObjects();for(var i=
0;i<dirtyObjects.length;i++){var dirty=dirtyObjects[i];if(object==dirty.object){dirtyObjects.splice(i,1);return}}},setValue:function(item,attribute,value){var old=item[attribute];var store=item.__id?dataExtCfg._getStoreForItem(item):this;if(jsonSchema&&store.schema&&store.schema.properties)jsonSchema.mustBeValid(jsonSchema.checkPropertyChange(value,store.schema.properties[attribute]));if(attribute==store.idAttribute)throw new Error("Can not change the identity attribute for an item");store.changing(item);
item[attribute]=value;if(value&&!value.__parent)value.__parent=item;store.onSet(item,attribute,old,value)},setValues:function(item,attribute,values){if(!lang.isArray(values))throw new Error("setValues expects to be passed an Array object as its value");this.setValue(item,attribute,values)},unsetAttribute:function(item,attribute){this.changing(item);var old=item[attribute];delete item[attribute];this.onSet(item,attribute,old,undefined)},save:function(kwArgs){if(!(kwArgs&&kwArgs.global))(kwArgs=kwArgs||
{}).service=this.service;if("syncMode"in kwArgs?kwArgs.syncMode:this.syncMode)rpc._sync=true;var actions=rpcJsonRest.commit(kwArgs);this.serverVersion=this._updates&&this._updates.length;return actions},revert:function(kwArgs){rpcJsonRest.revert(!(kwArgs&&kwArgs.global)&&this.service)},isDirty:function(item){return rpcJsonRest.isDirty(item,this)},isItem:function(item,anyStore){return item&&item.__id&&(anyStore||this.service==rpcJsonRest.getServiceAndId(item.__id).service)},_doQuery:function(args){var query=
typeof args.queryStr=="string"?args.queryStr:args.query;var deferred=rpcJsonRest.query(this.service,query,args);var self=this;if(this.loadReferencedSchema)deferred.addCallback(function(result){var contentType=deferred.ioArgs&&deferred.ioArgs.xhr&&deferred.ioArgs.xhr.getResponseHeader("Content-Type");var schemaRef=contentType&&contentType.match(/definedby\s*=\s*([^;]*)/);if(contentType&&!schemaRef){schemaRef=deferred.ioArgs.xhr.getResponseHeader("Link");schemaRef=schemaRef&&schemaRef.match(/<([^>]*)>;\s*rel="?definedby"?/)}schemaRef=
schemaRef&&schemaRef[1];if(schemaRef){var serviceAndId=rpcJsonRest.getServiceAndId((self.target+schemaRef).replace(/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,"$2$3"));var schemaDeferred=rpcJsonRest.byId(serviceAndId.service,serviceAndId.id);schemaDeferred.addCallbacks(function(newSchema){lang.mixin(self.schema,newSchema);return result},function(error){console.error(error);return result});return schemaDeferred}return undefined});return deferred},_processResults:function(results,deferred){var count=
results.length;return{totalCount:deferred.fullLength||(deferred.request.count==count?(deferred.request.start||0)+count*2:count),items:results}},getConstructor:function(){return this._constructor},getIdentity:function(item){var id=item.__clientId||item.__id;if(!id)return id;var prefix=this.service.servicePath.replace(/[^\/]*$/,"");return id.substring(0,prefix.length)!=prefix?id:id.substring(prefix.length)},fetchItemByIdentity:function(args){var id=args.identity;var store=this;if(id.toString().match(/^(\w*:)?\//)){var serviceAndId=
rpcJsonRest.getServiceAndId(id);store=serviceAndId.service._store;args.identity=serviceAndId.id}args._prefix=store.service.servicePath.replace(/[^\/]*$/,"");return store.inherited(arguments)},onSet:function(){},onNew:function(){},onDelete:function(){},getFeatures:function(){var features=this.inherited(arguments);features["dojo.data.api.Write"]=true;features["dojo.data.api.Notification"]=true;return features},getParent:function(item){return item&&item.__parent}});JsonRestStore.getStore=function(options,
Class){if(typeof options.target=="string"){options.target=options.target.match(/\/$/)||options.allowNoTrailingSlash?options.target:options.target+"/";var store=(rpcJsonRest.services[options.target]||{})._store;if(store)return store}return new (Class||JsonRestStore)(options)};var dataExtCfg=lang.getObject("dojox.data",true);dataExtCfg._getStoreForItem=function(item){if(item.__id){var serviceAndId=rpcJsonRest.getServiceAndId(item.__id);if(serviceAndId&&serviceAndId.service._store)return serviceAndId.service._store;
else{var servicePath=item.__id.toString().match(/.*\//)[0];return new JsonRestStore({target:servicePath})}}return null};var jsonRefConfig=lang.getObject("dojox.json.ref",true);jsonRefConfig._useRefs=true;return JsonRestStore})},"dgrid/OnDemandList":function(){define(["./List","./_StoreMixin","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/dom","dojo/on","./util/misc","put-selector/put"],function(List,_StoreMixin,declare,lang,Deferred,dom,listen,miscUtil,put){return declare([List,
_StoreMixin],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:miscUtil.defaultDelay,keepScrollPosition:false,rowHeight:22,postCreate:function(){this.inherited(arguments);var self=this;listen(this.bodyNode,"scroll",miscUtil[this.pagingMethod](function(event){self._processScroll(event)},null,this.pagingDelay))},renderQuery:function(query,preloadNode,options){var self=this,preload={query:query,count:0,
node:preloadNode,options:options},priorPreload=this.preload,results;if(!preloadNode){var topPreload={node:put(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,query:query,next:preload,options:options};topPreload.node.style.height="0";preload.node=preloadNode=put(this.contentNode,"div.dgrid-preload");preload.previous=topPreload}preloadNode.rowIndex=this.minRowsPerPage;if(priorPreload){if((preload.next=priorPreload.next)&&preloadNode.offsetTop>=priorPreload.node.offsetTop)preload.previous=
priorPreload;else{preload.next=priorPreload;preload.previous=priorPreload.previous}preload.previous.next=preload;preload.next.previous=preload}else this.preload=preload;var loadingNode=put(preloadNode,"-div.dgrid-loading"),innerNode=put(loadingNode,"div.dgrid-below");innerNode.innerHTML=this.loadingMessage;function errback(err){put(loadingNode,"!");if(err){if(self._refreshDeferred){self._refreshDeferred.reject(err);delete self._refreshDeferred}throw err;}}options=lang.mixin(this.get("queryOptions"),
options,{start:0,count:this.minRowsPerPage},"level"in query?{queryLevel:query.level}:null);this._trackError(function(){return results=query(options)});if(typeof results==="undefined"){errback();return}Deferred.when(self.renderArray(results,preloadNode,options),function(trs){var total=typeof results.total==="undefined"?results.length:results.total;return Deferred.when(total,function(total){var trCount=trs.length,parentNode=preloadNode.parentNode,noDataNode=self.noDataNode;put(loadingNode,"!");if(!("queryLevel"in
options))self._total=total;if(total===0){if(noDataNode){put(noDataNode,"!");delete self.noDataNode}self.noDataNode=noDataNode=put("div.dgrid-no-data");parentNode.insertBefore(noDataNode,self._getFirstRowSibling(parentNode));noDataNode.innerHTML=self.noDataMessage}var height=0;for(var i=0;i<trCount;i++)height+=self._calcRowHeight(trs[i]);if(trCount&&height)self.rowHeight=height/trCount;total-=trCount;preload.count=total;preloadNode.rowIndex=trCount;if(total)preloadNode.style.height=Math.min(total*
self.rowHeight,self.maxEmptySpace)+"px";else{preloadNode.style.display="none";options.count++}if(self._previousScrollPosition){self.scrollTo(self._previousScrollPosition);delete self._previousScrollPosition}self._processScroll();if(self._refreshDeferred){self._refreshDeferred.resolve(results);delete self._refreshDeferred}return trs},errback)},errback);return results},refresh:function(options){var self=this,keep=options&&options.keepScrollPosition,dfd,results;if(typeof keep==="undefined")keep=this.keepScrollPosition;
if(keep)this._previousScrollPosition=this.getScrollPosition();this.inherited(arguments);if(this.store){dfd=this._refreshDeferred=new Deferred;results=self.renderQuery(function(queryOptions){return self.store.query(self.query,queryOptions)});if(typeof results==="undefined")dfd.reject();return dfd.then(function(results){setTimeout(function(){listen.emit(self.domNode,"dgrid-refresh-complete",{bubbles:true,cancelable:false,grid:self,results:results})},0);delete self._refreshDeferred;return results},function(err){delete self._refreshDeferred;
throw err;})}},resize:function(){this.inherited(arguments);this._processScroll()},_getFirstRowSibling:function(container){return container.lastChild},_calcRowHeight:function(rowElement){var sibling=rowElement.previousSibling;if(sibling&&!/\bdgrid-preload\b/.test(sibling.className))return rowElement.offsetTop-sibling.offsetTop;return rowElement.offsetHeight},lastScrollTop:0,_processScroll:function(evt){var grid=this,scrollNode=grid.bodyNode,visibleTop=evt&&evt.scrollTop||this.getScrollPosition().y,
visibleBottom=scrollNode.offsetHeight+visibleTop,priorPreload,preloadNode,preload=grid.preload,lastScrollTop=grid.lastScrollTop,requestBuffer=grid.bufferRows*grid.rowHeight,searchBuffer=requestBuffer-grid.rowHeight,refreshDfd,lastResults,lastRows,preloadSearchNext=true;var mungeAmount=1;grid.lastScrollTop=visibleTop;function removeDistantNodes(preload,distanceOff,traversal,below){var farOffRemoval=grid.farOffRemoval,preloadNode=preload.node;if(distanceOff>2*farOffRemoval){var row,nextRow=preloadNode[traversal];
var reclaimedHeight=0;var count=0;var toDelete=[];while(row=nextRow){var rowHeight=grid._calcRowHeight(row);if(reclaimedHeight+rowHeight+farOffRemoval>distanceOff||nextRow.className.indexOf("dgrid-row")<0&&nextRow.className.indexOf("dgrid-loading")<0)break;var nextRow=row[traversal];reclaimedHeight+=rowHeight;count+=row.count||1;grid.removeRow(row,true);toDelete.push(row)}preload.count+=count;if(below){preloadNode.rowIndex-=count;adjustHeight(preload)}else preloadNode.style.height=preloadNode.offsetHeight+
reclaimedHeight+"px";var trashBin=put("div",toDelete);setTimeout(function(){put(trashBin,"!")},1)}}function adjustHeight(preload,noMax){preload.node.style.height=Math.min(preload.count*grid.rowHeight,noMax?Infinity:grid.maxEmptySpace)+"px"}function traversePreload(preload,moveNext){do preload=moveNext?preload.next:preload.previous;while(preload&&!preload.node.offsetWidth);return preload}while(preload&&!preload.node.offsetWidth)preload=preload.previous;while(preload&&preload!=priorPreload){priorPreload=
grid.preload;grid.preload=preload;preloadNode=preload.node;var preloadTop=preloadNode.offsetTop;var preloadHeight;if(visibleBottom+mungeAmount+searchBuffer<preloadTop)preload=traversePreload(preload,preloadSearchNext=false);else if(visibleTop-mungeAmount-searchBuffer>preloadTop+(preloadHeight=preloadNode.offsetHeight))preload=traversePreload(preload,preloadSearchNext=true);else{var offset=((preloadNode.rowIndex?visibleTop-requestBuffer:visibleBottom)-preloadTop)/grid.rowHeight;var count=(visibleBottom-
visibleTop+2*requestBuffer)/grid.rowHeight;var momentum=Math.max(Math.min((visibleTop-lastScrollTop)*grid.rowHeight,grid.maxRowsPerPage/2),grid.maxRowsPerPage/-2);count+=Math.min(Math.abs(momentum),10);if(preloadNode.rowIndex==0)offset-=count;offset=Math.max(offset,0);if(offset<10&&offset>0&&count+offset<grid.maxRowsPerPage){count+=Math.max(0,offset);offset=0}count=Math.min(Math.max(count,grid.minRowsPerPage),grid.maxRowsPerPage,preload.count);if(count==0){preload=traversePreload(preload,preloadSearchNext);
continue}count=Math.ceil(count);offset=Math.min(Math.floor(offset),preload.count-count);var options=lang.mixin(grid.get("queryOptions"),preload.options);preload.count-=count;var beforeNode=preloadNode,keepScrollTo,queryRowsOverlap=grid.queryRowsOverlap,below=preloadNode.rowIndex>0&&preload;if(below){var previous=preload.previous;if(previous){removeDistantNodes(previous,visibleTop-(previous.node.offsetTop+previous.node.offsetHeight),"nextSibling");if(offset>0&&previous.node==preloadNode.previousSibling){offset=
Math.min(preload.count,offset);preload.previous.count+=offset;adjustHeight(preload.previous,true);preloadNode.rowIndex+=offset;queryRowsOverlap=0}else count+=offset;preload.count-=offset}options.start=preloadNode.rowIndex-queryRowsOverlap;options.count=Math.min(count+queryRowsOverlap,grid.maxRowsPerPage);preloadNode.rowIndex=options.start+options.count}else{if(preload.next){removeDistantNodes(preload.next,preload.next.node.offsetTop-visibleBottom,"previousSibling",true);var beforeNode=preloadNode.nextSibling;
if(beforeNode==preload.next.node){preload.next.count+=preload.count-offset;preload.next.node.rowIndex=offset+count;adjustHeight(preload.next);preload.count=offset;queryRowsOverlap=0}else keepScrollTo=true}options.start=preload.count;options.count=Math.min(count+queryRowsOverlap,grid.maxRowsPerPage)}if(keepScrollTo&&beforeNode&&beforeNode.offsetWidth)keepScrollTo=beforeNode.offsetTop;adjustHeight(preload);if("level"in preload.query)options.queryLevel=preload.query.level;if(!("queryLevel"in options)&&
(options.start>grid._total||options.count<0))continue;var loadingNode=put(beforeNode,"-div.dgrid-loading[style\x3dheight:"+count*grid.rowHeight+"px]"),innerNode=put(loadingNode,"div.dgrid-"+(below?"below":"above"));innerNode.innerHTML=grid.loadingMessage;loadingNode.count=count;var results=preload.query(options),trackedResults=grid._trackError(function(){return results});if(trackedResults===undefined){put(loadingNode,"!");return}(function(loadingNode,below,keepScrollTo,results){lastRows=Deferred.when(grid.renderArray(results,
loadingNode,options),function(rows){lastResults=results;beforeNode=loadingNode.nextSibling;put(loadingNode,"!");if(keepScrollTo&&beforeNode&&beforeNode.offsetWidth){var pos=grid.getScrollPosition();grid.scrollTo({x:pos.x,y:pos.y+beforeNode.offsetTop-keepScrollTo,preserveMomentum:true})}Deferred.when(results.total||results.length,function(total){if(!("queryLevel"in options))grid._total=total;if(below){below.count=total-below.node.rowIndex;if(below.count===0)options.count++;adjustHeight(below)}});grid._processScroll();
return rows},function(e){put(loadingNode,"!");throw e;})}).call(this,loadingNode,below,keepScrollTo,results);preload=preload.previous}}if(lastRows&&(refreshDfd=this._refreshDeferred)){delete this._refreshDeferred;Deferred.when(lastRows,function(){refreshDfd.resolve(lastResults)})}},removeRow:function(rowElement,justCleanup){function chooseIndex(index1,index2){return index1!=null?index1:index2}if(rowElement){var previousNode=rowElement.previousSibling,nextNode=rowElement.nextSibling,prevIndex=previousNode&&
chooseIndex(previousNode.observerIndex,previousNode.previousObserverIndex),nextIndex=nextNode&&chooseIndex(nextNode.observerIndex,nextNode.nextObserverIndex),thisIndex=rowElement.observerIndex;rowElement.observerIndex=undefined;if(justCleanup){rowElement.nextObserverIndex=nextIndex;rowElement.previousObserverIndex=prevIndex}if(this.cleanEmptyObservers&&thisIndex>-1&&thisIndex!==prevIndex&&thisIndex!==nextIndex){var observers=this.observers;var observer=observers[thisIndex];if(observer){if(!justCleanup){var rows=
observer.rows;for(var i=0;i<rows.length;i++)if(rows[i]!=rowElement&&dom.isDescendant(rows[i],this.domNode))return this.inherited(arguments)}observer.cancel();this._numObservers--;observers[thisIndex]=0}}}this.inherited(arguments)}})})},"dojo/hccss":function(){define(["require","./_base/config","./dom-class","./dom-style","./has","./ready","./_base/window"],function(require,config,domClass,domStyle,has,ready,win){has.add("highcontrast",function(){var div=win.doc.createElement("div");div.style.cssText=
"border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url("+(config.blankGif||require.toUrl("./resources/blank.gif"))+");";win.body().appendChild(div);var cs=domStyle.getComputedStyle(div),bkImg=cs.backgroundImage,hc=cs.borderTopColor==cs.borderRightColor||bkImg&&(bkImg=="none"||bkImg=="url(invalid-url:)");if(has("ie")<=8)div.outerHTML="";else win.body().removeChild(div);return hc});ready(90,function(){if(has("highcontrast"))domClass.add(win.body(),
"dj_a11y")});return has})},"dojo/request/iframe":function(){define(["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window"],function(module,require,watch,util,handlers,lang,ioQuery,query,has,dom,domConstruct,win){var mid=module.id.replace(/[\/\.\-]/g,"_"),onload=mid+"_onload";if(!win.global[onload])win.global[onload]=function(){var dfd=iframe._currentDfd;if(!dfd){iframe._fireNextRequest();return}var response=
dfd.response,options=response.options,formNode=dom.byId(options.form)||dfd._tmpForm;if(formNode){var toClean=dfd._contentToClean;for(var i=0;i<toClean.length;i++){var key=toClean[i];for(var j=0;j<formNode.childNodes.length;j++){var childNode=formNode.childNodes[j];if(childNode.name===key){domConstruct.destroy(childNode);break}}}dfd._originalAction&&formNode.setAttribute("action",dfd._originalAction);if(dfd._originalMethod){formNode.setAttribute("method",dfd._originalMethod);formNode.method=dfd._originalMethod}if(dfd._originalTarget){formNode.setAttribute("target",
dfd._originalTarget);formNode.target=dfd._originalTarget}}if(dfd._tmpForm){domConstruct.destroy(dfd._tmpForm);delete dfd._tmpForm}dfd._finished=true};function create(name,onloadstr,uri){if(win.global[name])return win.global[name];if(win.global.frames[name])return win.global.frames[name];if(!uri){if(has("config-useXDomain")&&!has("config-dojoBlankHtmlUrl"))0&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl"+
" to the path on your domain to blank.html");uri=has("config-dojoBlankHtmlUrl")||require.toUrl("dojo/resources/blank.html")}var frame=domConstruct.place('\x3ciframe id\x3d"'+name+'" name\x3d"'+name+'" src\x3d"'+uri+'" onload\x3d"'+onloadstr+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',win.body());win.global[name]=frame;return frame}function setSrc(_iframe,src,replace){var frame=win.global.frames[_iframe.name];if(frame.contentWindow)frame=
frame.contentWindow;try{if(!replace)frame.location=src;else frame.location.replace(src)}catch(e){0&&console.log("dojo/request/iframe.setSrc: ",e)}}function doc(iframeNode){if(iframeNode.contentDocument)return iframeNode.contentDocument;var name=iframeNode.name;if(name){var iframes=win.doc.getElementsByTagName("iframe");if(iframeNode.document&&iframes[name].contentWindow&&iframes[name].contentWindow.document)return iframes[name].contentWindow.document;else if(win.doc.frames[name]&&win.doc.frames[name].document)return win.doc.frames[name].document}return null}
function createForm(){return domConstruct.create("form",{name:mid+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},win.body())}function fireNextRequest(){var dfd;try{if(iframe._currentDfd||!iframe._dfdQueue.length)return;do dfd=iframe._currentDfd=iframe._dfdQueue.shift();while(dfd&&(dfd.canceled||dfd.isCanceled&&dfd.isCanceled())&&iframe._dfdQueue.length);if(!dfd||dfd.canceled||dfd.isCanceled&&dfd.isCanceled()){iframe._currentDfd=null;return}var response=dfd.response,options=response.options,
c2c=dfd._contentToClean=[],formNode=dom.byId(options.form),notify=util.notify,data=options.data||null,queryStr;if(!dfd._legacy&&options.method==="POST"&&!formNode)formNode=dfd._tmpForm=createForm();else if(options.method==="GET"&&formNode&&response.url.indexOf("?")>-1){queryStr=response.url.slice(response.url.indexOf("?")+1);data=lang.mixin(ioQuery.queryToObject(queryStr),data)}if(formNode){if(!dfd._legacy){var parentNode=formNode;do parentNode=parentNode.parentNode;while(parentNode!==win.doc.documentElement);
if(!parentNode){formNode.style.position="absolute";formNode.style.left="-1000px";formNode.style.top="-1000px";win.body().appendChild(formNode)}if(!formNode.name)formNode.name=mid+"_form"}if(data){var createInput=function(name,value){domConstruct.create("input",{type:"hidden",name:name,value:value},formNode);c2c.push(name)};for(var x in data){var val=data[x];if(lang.isArray(val)&&val.length>1)for(var i=0;i<val.length;i++)createInput(x,val[i]);else if(!formNode[x])createInput(x,val);else formNode[x].value=
val}}var actionNode=formNode.getAttributeNode("action"),methodNode=formNode.getAttributeNode("method"),targetNode=formNode.getAttributeNode("target");if(response.url){dfd._originalAction=actionNode?actionNode.value:null;if(actionNode)actionNode.value=response.url;else formNode.setAttribute("action",response.url)}if(!dfd._legacy){dfd._originalMethod=methodNode?methodNode.value:null;if(methodNode)methodNode.value=options.method;else formNode.setAttribute("method",options.method)}else if(!methodNode||
!methodNode.value)if(mthdNode)mthdNode.value=options.method;else fn.setAttribute("method",options.method);dfd._originalTarget=targetNode?targetNode.value:null;if(targetNode)targetNode.value=iframe._iframeName;else formNode.setAttribute("target",iframe._iframeName);formNode.target=iframe._iframeName;notify&&notify.emit("send",response,dfd.promise.cancel);iframe._notifyStart(response);formNode.submit()}else{var extra="";if(response.options.data){extra=response.options.data;if(typeof extra!=="string")extra=
ioQuery.objectToQuery(extra)}var tmpUrl=response.url+(response.url.indexOf("?")>-1?"\x26":"?")+extra;notify&&notify.emit("send",response,dfd.promise.cancel);iframe._notifyStart(response);iframe.setSrc(iframe._frame,tmpUrl,true)}}catch(e){dfd.reject(e)}}function isValid(response){return!this.isFulfilled()}function isReady(response){return!!this._finished}function handleResponse(response,error){if(!error)try{var options=response.options,doc=iframe.doc(iframe._frame),handleAs=options.handleAs;if(handleAs!==
"html"){if(handleAs==="xml")if(doc.documentElement.tagName.toLowerCase()==="html"){query("a",doc.documentElement).orphan();var xmlText=doc.documentElement.innerText;xmlText=xmlText.replace(/>\s+</g,"\x3e\x3c");response.text=lang.trim(xmlText)}else response.data=doc;else response.text=doc.getElementsByTagName("textarea")[0].value;handlers(response)}else response.data=doc}catch(e){error=e}if(error)this.reject(error);else if(this._finished)this.resolve(response);else this.reject(new Error("Invalid dojo/request/iframe request state"))}
function last(response){this._callNext()}var defaultOptions={method:"POST"};function iframe(url,options,returnDeferred){var response=util.parseArgs(url,util.deepCreate(defaultOptions,options),true);url=response.url;options=response.options;if(options.method!=="GET"&&options.method!=="POST")throw new Error(options.method+" not supported by dojo/request/iframe");if(!iframe._frame)iframe._frame=iframe.create(iframe._iframeName,onload+"();");var dfd=util.deferred(response,null,isValid,isReady,handleResponse,
last);dfd._callNext=function(){if(!this._calledNext){this._calledNext=true;iframe._currentDfd=null;iframe._fireNextRequest()}};dfd._legacy=returnDeferred;iframe._dfdQueue.push(dfd);iframe._fireNextRequest();watch(dfd);return returnDeferred?dfd:dfd.promise}iframe.create=create;iframe.doc=doc;iframe.setSrc=setSrc;iframe._iframeName=mid+"_IoIframe";iframe._notifyStart=function(){};iframe._dfdQueue=[];iframe._currentDfd=null;iframe._fireNextRequest=fireNextRequest;util.addCommonMethods(iframe,["GET",
"POST"]);return iframe})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./has"],function(aspect,dojo,has){if(1){var major=window.ScriptEngineMajorVersion;has.add("jscript",major&&major()+ScriptEngineMinorVersion()/10);has.add("event-orientationchange",has("touch")&&!has("android"));has.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation)}var on=function(target,type,listener,dontFix){if(typeof target.on==
"function"&&typeof type!="function")return target.on(type,listener);return on.parse(target,type,listener,addListener,dontFix,this)};on.pausable=function(target,type,listener,dontFix){var paused;var signal=on(target,type,function(){if(!paused)return listener.apply(this,arguments)},dontFix);signal.pause=function(){paused=true};signal.resume=function(){paused=false};return signal};on.once=function(target,type,listener,dontFix){var signal=on(target,type,function(){signal.remove();return listener.apply(this,
arguments)});return signal};on.parse=function(target,type,listener,addListener,dontFix,matchesTarget){if(type.call)return type.call(matchesTarget,target,listener);if(type.indexOf(",")>-1){var events=type.split(/\s*,\s*/);var handles=[];var i=0;var eventName;while(eventName=events[i++])handles.push(addListener(target,eventName,listener,dontFix,matchesTarget));handles.remove=function(){for(var i=0;i<handles.length;i++)handles[i].remove()};return handles}return addListener(target,type,listener,dontFix,
matchesTarget)};var touchEvents=/^touch/;function addListener(target,type,listener,dontFix,matchesTarget){var selector=type.match(/(.*):(.*)/);if(selector){type=selector[2];selector=selector[1];return on.selector(selector,type).call(matchesTarget,target,listener)}if(has("touch")){if(touchEvents.test(type))listener=fixTouchListener(listener);if(!has("event-orientationchange")&&type=="orientationchange"){type="resize";target=window;listener=fixTouchListener(listener)}}if(addStopImmediate)listener=addStopImmediate(listener);
if(target.addEventListener){var capture=type in captures,adjustedType=capture?captures[type]:type;target.addEventListener(adjustedType,listener,capture);return{remove:function(){target.removeEventListener(adjustedType,listener,capture)}}}type="on"+type;if(fixAttach&&target.attachEvent)return fixAttach(target,type,listener);throw new Error("Target must be an event emitter");}on.selector=function(selector,eventType,children){return function(target,listener){var matchesTarget=typeof selector=="function"?
{matches:selector}:this,bubble=eventType.bubble;function select(eventTarget){matchesTarget=matchesTarget&&matchesTarget.matches?matchesTarget:dojo.query;while(!matchesTarget.matches(eventTarget,selector,target))if(eventTarget==target||children===false||!(eventTarget=eventTarget.parentNode)||eventTarget.nodeType!=1)return;return eventTarget}if(bubble)return on(target,bubble(select),listener);return on(target,eventType,function(event){var eventTarget=select(event.target);return eventTarget&&listener.call(eventTarget,
event)})}};function syntheticPreventDefault(){this.cancelable=false}function syntheticStopPropagation(){this.bubbles=false}var slice=[].slice,syntheticDispatch=on.emit=function(target,type,event){var args=slice.call(arguments,2);var method="on"+type;if("parentNode"in target){var newEvent=args[0]={};for(var i in event)newEvent[i]=event[i];newEvent.preventDefault=syntheticPreventDefault;newEvent.stopPropagation=syntheticStopPropagation;newEvent.target=target;newEvent.type=type;event=newEvent}do target[method]&&
target[method].apply(target,args);while(event&&event.bubbles&&(target=target.parentNode));return event&&event.cancelable&&event};var captures={};if(!has("event-stopimmediatepropagation")){var stopImmediatePropagation=function(){this.immediatelyStopped=true;this.modified=true};var addStopImmediate=function(listener){return function(event){if(!event.immediatelyStopped){event.stopImmediatePropagation=stopImmediatePropagation;return listener.apply(this,arguments)}}}}if(has("dom-addeventlistener")){captures=
{focusin:"focus",focusout:"blur"};on.emit=function(target,type,event){if(target.dispatchEvent&&document.createEvent){var nativeEvent=target.ownerDocument.createEvent("HTMLEvents");nativeEvent.initEvent(type,!!event.bubbles,!!event.cancelable);for(var i in event){var value=event[i];if(!(i in nativeEvent))nativeEvent[i]=event[i]}return target.dispatchEvent(nativeEvent)&&nativeEvent}return syntheticDispatch.apply(on,arguments)}}else{on._fixEvent=function(evt,sender){if(!evt){var w=sender&&(sender.ownerDocument||
sender.document||sender).parentWindow||window;evt=w.event}if(!evt)return evt;if(lastEvent&&evt.type==lastEvent.type)evt=lastEvent;if(!evt.target){evt.target=evt.srcElement;evt.currentTarget=sender||evt.srcElement;if(evt.type=="mouseover")evt.relatedTarget=evt.fromElement;if(evt.type=="mouseout")evt.relatedTarget=evt.toElement;if(!evt.stopPropagation){evt.stopPropagation=stopPropagation;evt.preventDefault=preventDefault}switch(evt.type){case "keypress":var c="charCode"in evt?evt.charCode:evt.keyCode;
if(c==10){c=0;evt.keyCode=13}else if(c==13||c==27)c=0;else if(c==3)c=99;evt.charCode=c;_setKeyChar(evt);break}}return evt};var lastEvent,IESignal=function(handle){this.handle=handle};IESignal.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var fixListener=function(listener){return function(evt){evt=on._fixEvent(evt,this);var result=listener.call(this,evt);if(evt.modified){if(!lastEvent)setTimeout(function(){lastEvent=null});lastEvent=evt}return result}};var fixAttach=function(target,
type,listener){listener=fixListener(listener);if(((target.ownerDocument?target.ownerDocument.parentWindow:target.parentWindow||target.window||window)!=top||has("jscript")<5.8)&&!has("config-_allow_leaks")){if(typeof _dojoIEListeners_=="undefined")_dojoIEListeners_=[];var emiter=target[type];if(!emiter||!emiter.listeners){var oldListener=emiter;emiter=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
emiter.listeners=[];target[type]=emiter;emiter.global=this;if(oldListener)emiter.listeners.push(_dojoIEListeners_.push(oldListener)-1)}var handle;emiter.listeners.push(handle=emiter.global._dojoIEListeners_.push(listener)-1);return new IESignal(handle)}return aspect.after(target,type,listener,true)};var _setKeyChar=function(evt){evt.keyChar=evt.charCode?String.fromCharCode(evt.charCode):"";evt.charOrCode=evt.keyChar||evt.keyCode};var stopPropagation=function(){this.cancelBubble=true};var preventDefault=
on._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(e){}this.defaultPrevented=true;this.returnValue=false}}if(has("touch")){var Event=function(){};var windowOrientation=window.orientation;var fixTouchListener=function(listener){return function(originalEvent){var event=originalEvent.corrected;if(!event){var type=originalEvent.type;try{delete originalEvent.type}catch(e){}if(originalEvent.type){Event.prototype=originalEvent;var event=new Event;event.preventDefault=
function(){originalEvent.preventDefault()};event.stopPropagation=function(){originalEvent.stopPropagation()}}else{event=originalEvent;event.type=type}originalEvent.corrected=event;if(type=="resize"){if(windowOrientation==window.orientation)return null;windowOrientation=window.orientation;event.type="orientationchange";return listener.call(this,event)}if(!("rotation"in event)){event.rotation=0;event.scale=1}var firstChangeTouch=event.changedTouches[0];for(var i in firstChangeTouch){delete event[i];
event[i]=firstChangeTouch[i]}}return listener.call(this,event)}}}return on})},"dojo/errors/create":function(){define(["../_base/lang"],function(lang){return function(name,ctor,base,props){base=base||Error;var ErrorCtor=function(message){if(base===Error){if(Error.captureStackTrace)Error.captureStackTrace(this,ErrorCtor);var err=Error.call(this,message),prop;for(prop in err)if(err.hasOwnProperty(prop))this[prop]=err[prop];this.message=message;this.stack=err.stack}else base.apply(this,arguments);if(ctor)ctor.apply(this,
arguments)};ErrorCtor.prototype=lang.delegate(base.prototype,props);ErrorCtor.prototype.name=name;ErrorCtor.prototype.constructor=ErrorCtor;return ErrorCtor}})},"dijit/form/_ListBase":function(){define("dijit/form/_ListBase",["dojo/_base/declare","dojo/on","dojo/window"],function(declare,on,winUtils){return declare("dijit.form._ListBase",null,{selected:null,_listConnect:function(eventType,callbackFuncName){var self=this;return self.own(on(self.containerNode,on.selector(function(eventTarget,selector,
target){return eventTarget.parentNode==target},eventType),function(evt){evt.preventDefault();self[callbackFuncName](evt,this)}))},selectFirstNode:function(){var first=this.containerNode.firstChild;while(first&&first.style.display=="none")first=first.nextSibling;this._setSelectedAttr(first)},selectLastNode:function(){var last=this.containerNode.lastChild;while(last&&last.style.display=="none")last=last.previousSibling;this._setSelectedAttr(last)},selectNextNode:function(){var selectedNode=this.selected;
if(!selectedNode)this.selectFirstNode();else{var next=selectedNode.nextSibling;while(next&&next.style.display=="none")next=next.nextSibling;if(!next)this.selectFirstNode();else this._setSelectedAttr(next)}},selectPreviousNode:function(){var selectedNode=this.selected;if(!selectedNode)this.selectLastNode();else{var prev=selectedNode.previousSibling;while(prev&&prev.style.display=="none")prev=prev.previousSibling;if(!prev)this.selectLastNode();else this._setSelectedAttr(prev)}},_setSelectedAttr:function(node){if(this.selected!=
node){var selectedNode=this.selected;if(selectedNode)this.onDeselect(selectedNode);if(node){winUtils.scrollIntoView(node);this.onSelect(node)}this._set("selected",node)}else if(node)this.onSelect(node)}})})},"dgrid/util/has-css3":function(){define(["dojo/has"],function(has){var cssPrefixes=["ms","O","Moz","Webkit"];function testStyle(element,property){var style=element.style,i;if(property in style)return true;property=property.slice(0,1).toUpperCase()+property.slice(1);for(i=cssPrefixes.length;i--;)if(cssPrefixes[i]+
property in style)return cssPrefixes[i];return false}has.add("css-transitions",function(global,doc,element){return testStyle(element,"transitionProperty")});has.add("css-transforms",function(global,doc,element){return testStyle(element,"transform")});has.add("css-transforms3d",function(global,doc,element){return testStyle(element,"perspective")});has.add("transitionend",function(){var tpfx=has("css-transitions");if(!tpfx)return false;if(tpfx===true)return"transitionend";return{ms:"MSTransitionEnd",
O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[tpfx]});return has})},"xblox/model/server/ServerBlock":function(){define("xblox/model/server/ServerBlock",["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","xblox/model/Block","xide/utils"],function(declare,lang,Deferred,Block,utils){return declare("xblox.model.server.ServerBlock",[Block],{name:"Run Server Block",method:"XShell::run",args:"",deferred:true,defaultServiceClass:"XShell",defaultServiceMethod:"run",onReloaded:function(){var service=
this.getService();var params=service.getParameterMap(this.getServiceClass(),this.getServiceMethod());0&&console.log("params",params);var cwd="root://test";var cmd="ls";var fun=this.getServerFunction(),thiz=this;if(fun){var _cb=function(response){0&&console.log("hello from server",response)};var _value=service.base64_encode(cmd);service.callMethodEx(this.getServiceClass(),"run",["sh",_value,cwd],_cb)}},solve:function(scope,settings,run,error){this._currentIndex=0;this._return=[];var _script=""+this.method;
var thiz=this;if(_script&&_script.length){var _function=new Function("{"+_script+"}");var _args=this.getArgs();try{var _parsed=_function.apply(this,_args||{});this._lastResult=_parsed;if(run)run("Expression "+_script+" evaluates to "+_parsed);if(_parsed!=="false"&&_parsed!==false)this.onSuccess(this,settings);else{this.onFailed(this,settings);return[]}}catch(e){if(error)error("invalid expression : \n"+_script+": "+e);this.onFailed(this,settings);return[]}}else console.error("have no script");var ret=
[],items=this[this._getContainer()];if(items.length)this.runFrom(items,0,settings);else this.onSuccess(this,settings);return ret},toText:function(){var result=this.getBlockIcon()+" "+this.name+" :: ";if(this.method)result+=this.method.substr(0,50);return result},canAdd:function(){return[]},getServerDefaultFields:function(target){var fields=target||[];fields.push(this.utils.createCI("args",27,this.args,{group:"General",title:"Arguments",dst:"args"}));return fields},getFields:function(){var fields=
this.inherited(arguments)||this.getDefaultFields();var thiz=this;return fields},getBlockIcon:function(){return'\x3cspan class\x3d"fa-plug"\x3e\x3c/span\x3e'},mayHaveChildren:function(parent){return this.items!=null&&this.items.length>0},getChildren:function(parent){return this.items},isInValidState:function(){return this.getService()!=null},getService:function(){return this.scope.getService()},getServiceClass:function(){return this.method.split("::")[0]||this.defaultServiceClass},getServiceMethod:function(){return this.method.split("::")[1]||
this.defaultServiceMethod},hasMethod:function(method){return this.isInValidState()&&this.getService()[this.getServiceClass()]!=null&&this.getService()[this.getServiceClass()][this.getServiceMethod()]!=null},hasServerClass:function(_class){return this.isInValidState()&&this.getService()[this.getServiceClass()]!=null},getServerFunction:function(){if(this.isInValidState()&&this.getServiceClass()&&this.getServiceMethod())return this.getService()[this.getServiceClass()][this.getServiceMethod()];return null}})})},
"xide/manager/ClipboardManager":function(){define(["dojo/_base/declare","xide/types","xide/manager/ManagerBase"],function(declare,types,ManagerBase){return declare([ManagerBase],{currentCopySelection:null,currentCutSelection:null,onPaste:function(data){var selection=this.currentCopySelection||this.currentCutSelection;var owner=data?data?data.owner?data.owner:null:null:null;var isCopy=this.currentCopySelection!=null;if(selection&&owner){var dst=null;if(owner.delegate&&owner.panelDelegate&&owner.panelDelegate.getCurrentPathItem)dst=
owner.panelDelegate.getCurrentPathItem();var path=owner.panelDelegate.getCurrentPath();if(path&&owner&&owner.store)dst=owner.store.getItemByPath(null,path);if(dst){var delegate=owner.panelManager?owner.panelManager:null;if(delegate)if(isCopy)delegate.copyItems(null,selection,dst,null,true);else{delegate.moveItems(null,selection,dst,null,true);this.currentCutSelection=null;this.currentCopySelection=null}}}},onCopy:function(data){var selection=data.items;if(selection)this.currentCopySelection=selection;
this.currentCutSelection=null},onCut:function(data){var selection=data?data?data.items?data.items:null:null:null;if(selection)this.currentCutSelection=selection;this.currentCopySelection=null},init:function(){this.subscribe(types.EVENTS.ON_CLIPBOARD_COPY,this.onCopy);this.subscribe(types.EVENTS.ON_CLIPBOARD_PASTE,this.onPaste);this.subscribe(types.EVENTS.ON_CLIPBOARD_CUT,this.onCut)}})})},"dojox/rpc/Rest":function(){define("dojox/rpc/Rest",["dojo","dojox"],function(dojo,dojox){dojo.getObject("rpc.Rest",
true,dojox);if(dojox.rpc&&dojox.rpc.transportRegistry)dojox.rpc.transportRegistry.register("REST",function(str){return str=="REST"},{getExecutor:function(func,method,svc){return new dojox.rpc.Rest(method.name,(method.contentType||svc._smd.contentType||"").match(/json|javascript/),null,function(id,args){var request=svc._getRequest(method,[id]);request.url=request.target+(request.data?"?"+request.data:"");if(args&&(args.start>=0||args.count>=0)){request.headers=request.headers||{};request.headers.Range=
"items\x3d"+(args.start||"0")+"-"+("count"in args&&args.count!=Infinity?args.count+(args.start||0)-1:"")}return request})}});var drr;function index(deferred,service,range,id){deferred.addCallback(function(result){if(deferred.ioArgs.xhr&&range){range=deferred.ioArgs.xhr.getResponseHeader("Content-Range");deferred.fullLength=range&&(range=range.match(/\/(.*)/))&&parseInt(range[1])}return result});return deferred}drr=dojox.rpc.Rest=function(path,isJson,schema,getRequest){var service;service=function(id,
args){return drr._get(service,id,args)};service.isJson=isJson;service._schema=schema;service.cache={serialize:isJson?(dojox.json&&dojox.json.ref||dojo).toJson:function(result){return result}};service._getRequest=getRequest||function(id,args){if(dojo.isObject(id)){id=dojo.objectToQuery(id);id=id?"?"+id:""}if(args&&args.sort&&!args.queryStr){id+=(id?"\x26":"?")+"sort(";for(var i=0;i<args.sort.length;i++){var sort=args.sort[i];id+=(i>0?",":"")+(sort.descending?"-":"+")+encodeURIComponent(sort.attribute)}id+=
")"}var request={url:path+(id==null?"":id),handleAs:isJson?"json":"text",contentType:isJson?"application/json":"text/plain",sync:dojox.rpc._sync,headers:{Accept:isJson?"application/json,application/javascript":"*/*"}};if(args&&(args.start>=0||args.count>=0))request.headers.Range="items\x3d"+(args.start||"0")+"-"+("count"in args&&args.count!=Infinity?args.count+(args.start||0)-1:"");dojox.rpc._sync=false;return request};function makeRest(name){service[name]=function(id,content){return drr._change(name,
service,id,content)}}makeRest("put");makeRest("post");makeRest("delete");service.servicePath=path;return service};drr._index={};drr._timeStamps={};drr._change=function(method,service,id,content){var request=service._getRequest(id);request[method+"Data"]=content;return index(dojo.xhr(method.toUpperCase(),request,true),service)};drr._get=function(service,id,args){args=args||{};return index(dojo.xhrGet(service._getRequest(id,args)),service,args.start>=0||args.count>=0,id)};return drr})},"dijit/typematic":function(){define("dijit/typematic",
["dojo/_base/array","dojo/_base/connect","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(array,connect,kernel,lang,on,has,dijit){var typematic=dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);this._timer=setTimeout(lang.hitch(this,
"_fireEventAndReload"),this._currentTimeout)},trigger:function(evt,_this,node,callback,obj,subsequentDelay,initialDelay,minDelay){if(obj!=this._obj){this.stop();this._initialDelay=initialDelay||500;this._subsequentDelay=subsequentDelay||0.9;this._minDelay=minDelay||10;this._obj=obj;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=lang.hitch(_this,callback);this._evt={faux:true};for(var attr in evt)if(attr!="layerX"&&attr!="layerY"){var v=evt[attr];if(typeof v!="function"&&typeof v!=
"undefined")this._evt[attr]=v}this._fireEventAndReload()}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null}},addKeyListener:function(node,keyObject,_this,callback,subsequentDelay,initialDelay,minDelay){var type="keyCode"in keyObject?"keydown":"charCode"in keyObject?"keypress":connect._keypress,attr="keyCode"in keyObject?"keyCode":"charCode"in keyObject?"charCode":"charOrCode";var handles=[on(node,type,
lang.hitch(this,function(evt){if(evt[attr]==keyObject[attr]&&(keyObject.ctrlKey===undefined||keyObject.ctrlKey==evt.ctrlKey)&&(keyObject.altKey===undefined||keyObject.altKey==evt.altKey)&&(keyObject.metaKey===undefined||keyObject.metaKey==(evt.metaKey||false))&&(keyObject.shiftKey===undefined||keyObject.shiftKey==evt.shiftKey)){evt.stopPropagation();evt.preventDefault();typematic.trigger(evt,_this,node,callback,keyObject,subsequentDelay,initialDelay,minDelay)}else if(typematic._obj==keyObject)typematic.stop()})),
on(node,"keyup",lang.hitch(this,function(){if(typematic._obj==keyObject)typematic.stop()}))];return{remove:function(){array.forEach(handles,function(h){h.remove()})}}},addMouseListener:function(node,_this,callback,subsequentDelay,initialDelay,minDelay){var handles=[on(node,"mousedown",lang.hitch(this,function(evt){evt.preventDefault();typematic.trigger(evt,_this,node,callback,node,subsequentDelay,initialDelay,minDelay)})),on(node,"mouseup",lang.hitch(this,function(evt){if(this._obj)evt.preventDefault();
typematic.stop()})),on(node,"mouseout",lang.hitch(this,function(evt){if(this._obj)evt.preventDefault();typematic.stop()})),on(node,"dblclick",lang.hitch(this,function(evt){evt.preventDefault();if(has("ie")<9){typematic.trigger(evt,_this,node,callback,node,subsequentDelay,initialDelay,minDelay);setTimeout(lang.hitch(this,typematic.stop),50)}}))];return{remove:function(){array.forEach(handles,function(h){h.remove()})}}},addListener:function(mouseNode,keyNode,keyObject,_this,callback,subsequentDelay,
initialDelay,minDelay){var handles=[this.addKeyListener(keyNode,keyObject,_this,callback,subsequentDelay,initialDelay,minDelay),this.addMouseListener(mouseNode,_this,callback,subsequentDelay,initialDelay,minDelay)];return{remove:function(){array.forEach(handles,function(h){h.remove()})}}}};return typematic})},"dijit/_editor/plugins/FontChoice":function(){define("dijit/_editor/plugins/FontChoice",["require","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/i18n","dojo/_base/lang",
"dojo/store/Memory","../../registry","../../_Widget","../../_TemplatedMixin","../../_WidgetsInTemplateMixin","../../form/FilteringSelect","../_Plugin","../range","dojo/i18n!../nls/FontChoice"],function(require,array,declare,domConstruct,i18n,lang,MemoryStore,registry,_Widget,_TemplatedMixin,_WidgetsInTemplateMixin,FilteringSelect,_Plugin,rangeapi){var _FontDropDown=declare("dijit._editor.plugins._FontDropDown",[_Widget,_TemplatedMixin,_WidgetsInTemplateMixin],{label:"",plainText:false,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e"+
"\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e"+"\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' "+'data-dojo-props\x3d\'labelType:"html", labelAttr:"label", searchAttr:"name"\' '+"tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e"+"\x3c/span\x3e",contextRequire:require,postMixInProperties:function(){this.inherited(arguments);this.strings=i18n.getLocalization("dijit._editor","FontChoice");
this.label=this.strings[this.command];this.id=registry.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new MemoryStore({idProperty:"value",data:array.map(this.values,function(value){var name=this.strings[value]||value;return{label:this.getLabel(value,name),name:name,value:value}},this)}));this.select.set("value","",false);this.disabled=this.select.get("disabled")},_setValueAttr:function(value,
priorityChange){priorityChange=priorityChange!==false;this.select.set("value",array.indexOf(this.values,value)<0?"":value,priorityChange);if(!priorityChange)this.select._lastValueReported=null},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(value){this._set("disabled",value);this.select.set("disabled",value)}});var _FontNameDropDown=declare("dijit._editor.plugins._FontNameDropDown",_FontDropDown,{generic:false,command:"fontName",
postMixInProperties:function(){if(!this.values)this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"];this.inherited(arguments)},getLabel:function(value,name){if(this.plainText)return name;else return"\x3cdiv style\x3d'font-family: "+value+"'\x3e"+name+"\x3c/div\x3e"},_setValueAttr:function(value,priorityChange){priorityChange=priorityChange!==false;if(this.generic){var map={"Arial":"sans-serif","Helvetica":"sans-serif",
"Myriad":"sans-serif","Times":"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive","Courier":"monospace","Courier New":"monospace","Papyrus":"fantasy","Estrangelo Edessa":"cursive","Gabriola":"fantasy"};value=map[value]||value}this.inherited(arguments,[value,priorityChange])}});var _FontSizeDropDown=declare("dijit._editor.plugins._FontSizeDropDown",_FontDropDown,{command:"fontSize",values:[1,2,3,4,5,6,7],getLabel:function(value,name){if(this.plainText)return name;
else return"\x3cfont size\x3d"+value+"'\x3e"+name+"\x3c/font\x3e"},_setValueAttr:function(value,priorityChange){priorityChange=priorityChange!==false;if(value.indexOf&&value.indexOf("px")!=-1){var pixels=parseInt(value,10);value={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[pixels]||value}this.inherited(arguments,[value,priorityChange])}});var _FormatBlockDropDown=declare("dijit._editor.plugins._FormatBlockDropDown",_FontDropDown,{command:"formatBlock",values:["noFormat","p","h1","h2","h3","pre"],postCreate:function(){this.inherited(arguments);
this.set("value","noFormat",false)},getLabel:function(value,name){if(this.plainText||value=="noFormat")return name;else return"\x3c"+value+"\x3e"+name+"\x3c/"+value+"\x3e"},_execCommand:function(editor,command,choice){if(choice==="noFormat"){var start;var end;var sel=rangeapi.getSelection(editor.window);if(sel&&sel.rangeCount>0){var range=sel.getRangeAt(0);var node,tag;if(range){start=range.startContainer;end=range.endContainer;while(start&&start!==editor.editNode&&start!==editor.document.body&&start.nodeType!==
1)start=start.parentNode;while(end&&end!==editor.editNode&&end!==editor.document.body&&end.nodeType!==1)end=end.parentNode;var processChildren=lang.hitch(this,function(node,ary){if(node.childNodes&&node.childNodes.length){var i;for(i=0;i<node.childNodes.length;i++){var c=node.childNodes[i];if(c.nodeType==1)if(editor.selection.inSelection(c)){var tag=c.tagName?c.tagName.toLowerCase():"";if(array.indexOf(this.values,tag)!==-1)ary.push(c);processChildren(c,ary)}}}});var unformatNodes=lang.hitch(this,
function(nodes){if(nodes&&nodes.length){editor.beginEditing();while(nodes.length)this._removeFormat(editor,nodes.pop());editor.endEditing()}});var clearNodes=[];if(start==end){var block;node=start;while(node&&node!==editor.editNode&&node!==editor.document.body){if(node.nodeType==1){tag=node.tagName?node.tagName.toLowerCase():"";if(array.indexOf(this.values,tag)!==-1){block=node;break}}node=node.parentNode}processChildren(start,clearNodes);if(block)clearNodes=[block].concat(clearNodes);unformatNodes(clearNodes)}else{node=
start;while(editor.selection.inSelection(node)){if(node.nodeType==1){tag=node.tagName?node.tagName.toLowerCase():"";if(array.indexOf(this.values,tag)!==-1)clearNodes.push(node);processChildren(node,clearNodes)}node=node.nextSibling}unformatNodes(clearNodes)}editor.onDisplayChanged()}}}else editor.execCommand(command,choice)},_removeFormat:function(editor,node){if(editor.customUndo){while(node.firstChild)domConstruct.place(node.firstChild,node,"before");node.parentNode.removeChild(node)}else{editor.selection.selectElementChildren(node);
var html=editor.selection.getSelectedHtml();editor.selection.selectElement(node);editor.execCommand("inserthtml",html||"")}}});var FontChoice=declare("dijit._editor.plugins.FontChoice",_Plugin,{useDefaultCommand:false,_initButton:function(){var clazz={fontName:_FontNameDropDown,fontSize:_FontSizeDropDown,formatBlock:_FormatBlockDropDown}[this.command],params=this.params;if(this.params.custom)params.values=this.params.custom;var editor=this.editor;this.button=new clazz(lang.delegate({dir:editor.dir,
lang:editor.lang},params));this.own(this.button.select.on("change",lang.hitch(this,function(choice){if(this.editor.focused)this.editor.focus();if(this.command=="fontName"&&choice.indexOf(" ")!=-1)choice="'"+choice+"'";if(this.button._execCommand)this.button._execCommand(this.editor,this.command,choice);else this.editor.execCommand(this.command,choice)})))},updateState:function(){var _e=this.editor;var _c=this.command;if(!_e||!_e.isLoaded||!_c.length)return;if(this.button){var disabled=this.get("disabled");
this.button.set("disabled",disabled);if(disabled)return;var value;try{value=_e.queryCommandValue(_c)||""}catch(e){value=""}var quoted=lang.isString(value)&&value.match(/'([^']*)'/);if(quoted)value=quoted[1];if(_c==="formatBlock")if(!value||value=="p"){value=null;var elem;var sel=rangeapi.getSelection(this.editor.window);if(sel&&sel.rangeCount>0){var range=sel.getRangeAt(0);if(range)elem=range.endContainer}while(elem&&elem!==_e.editNode&&elem!==_e.document){var tg=elem.tagName?elem.tagName.toLowerCase():
"";if(tg&&array.indexOf(this.button.values,tg)>-1){value=tg;break}elem=elem.parentNode}if(!value)value="noFormat"}else if(array.indexOf(this.button.values,value)<0)value="noFormat";if(value!==this.button.get("value"))this.button.set("value",value,false)}}});array.forEach(["fontName","fontSize","formatBlock"],function(name){_Plugin.registry[name]=function(args){return new FontChoice({command:name,plainText:args.plainText})}});FontChoice._FontDropDown=_FontDropDown;FontChoice._FontNameDropDown=_FontNameDropDown;
FontChoice._FontSizeDropDown=_FontSizeDropDown;FontChoice._FormatBlockDropDown=_FormatBlockDropDown;return FontChoice})},"dgrid/List":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/dom","dojo/on","dojo/has","./util/misc","dojo/has!touch?./TouchScroll","xstyle/has-class","put-selector/put","dojo/_base/sniff"],function(kernel,declare,dom,listen,has,miscUtil,TouchScroll,hasClass,put){hasClass("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var oddClass=
"dgrid-row-odd",evenClass="dgrid-row-even",scrollbarWidth,scrollbarHeight;function byId(id){return document.getElementById(id)}function cleanupTestElement(element){element.className="";document.body.removeChild(element)}function getScrollbarSize(element,dimension){put(document.body,element,".dgrid-scrollbar-measure");var size=element["offset"+dimension]-element["client"+dimension];cleanupTestElement(element);return size}has.add("dom-scrollbar-width",function(global,doc,element){return getScrollbarSize(element,
"Width")});has.add("dom-scrollbar-height",function(global,doc,element){return getScrollbarSize(element,"Height")});has.add("dom-rtl-scrollbar-left",function(global,doc,element){var div=put("div"),isLeft;put(document.body,element,".dgrid-scrollbar-measure[dir\x3drtl]");put(element,div);isLeft=!!has("ie")||!!has("trident")||div.offsetLeft>=has("dom-scrollbar-width");cleanupTestElement(element);put(div,"!");element.removeAttribute("dir");return isLeft});var autogen=0;function generateId(){return"dgrid_"+
autogen++}var spaceRx=/ +/g;function setClass(cls){var putClass=cls?"."+cls.replace(spaceRx,"."):"";if(this._class)putClass="!"+this._class.replace(spaceRx,"!")+putClass;put(this.domNode,putClass);this._class=cls}function getClass(){return this._class}var winResizeHandler=has("ie")<7&&!has("quirks")?function(){var root,w,h,dims;if(!this._started)return;root=document.documentElement;w=root.clientWidth;h=root.clientHeight;dims=this._prevWinDims||[];if(dims[0]!==w||dims[1]!==h){this.resize();this._prevWinDims=
[w,h]}}:function(){if(this._started)this.resize()};function desktopGetScrollPosition(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}}function desktopScrollTo(options){if(typeof options.x!=="undefined")this.bodyNode.scrollLeft=options.x;if(typeof options.y!=="undefined")this.bodyNode.scrollTop=options.y}return declare(has("touch")?TouchScroll:null,{tabableHeader:false,showHeader:false,showFooter:false,maintainOddEven:true,cleanAddedRules:true,useTouchScroll:!has("dom-scrollbar-width"),
addUiClasses:true,cleanEmptyObservers:true,highlightDuration:250,postscript:function(params,srcNodeRef){var grid=this;(this._Row=function(id,object,element){this.id=id;this.data=object;this.element=element}).prototype.remove=function(){grid.removeRow(this.element)};if(srcNodeRef)this.srcNodeRef=srcNodeRef=srcNodeRef.nodeType?srcNodeRef:byId(srcNodeRef);this.create(params,srcNodeRef)},listType:"list",create:function(params,srcNodeRef){var domNode=this.domNode=srcNodeRef||put("div"),cls;if(params){this.params=
params;declare.safeMixin(this,params);cls=params["class"]||params.className||domNode.className;this._sort=params.sort||[];delete this.sort}else this._sort=[];this.observers=[];this._numObservers=0;this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=domNode.id=domNode.id||this.id||generateId();this.buildRendering();if(cls)setClass.call(this,cls);this.postCreate();delete this.srcNodeRef;if(this.domNode.offsetHeight)this.startup()},buildRendering:function(){var domNode=
this.domNode,addUiClasses=this.addUiClasses,self=this,headerNode,spacerNode,bodyNode,footerNode,isRTL;isRTL=this.isRTL=(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase()=="rtl";domNode.className="";put(domNode,"[role\x3dgrid].dgrid.dgrid-"+this.listType+(addUiClasses?".ui-widget":""));headerNode=this.headerNode=put(domNode,"div.dgrid-header.dgrid-header-row"+(addUiClasses?".ui-widget-header":"")+(this.showHeader?"":".dgrid-header-hidden"));if(has("quirks")||
has("ie")<8)spacerNode=put(domNode,"div.dgrid-spacer");bodyNode=this.bodyNode=put(domNode,"div.dgrid-scroller");if(has("ff"))bodyNode.tabIndex=-1;this.headerScrollNode=put(domNode,"div.dgrid-header.dgrid-header-scroll.dgrid-scrollbar-width"+(addUiClasses?".ui-widget-header":""));footerNode=this.footerNode=put("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));put(domNode,footerNode);if(isRTL)domNode.className+=" dgrid-rtl"+(has("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":"");listen(bodyNode,
"scroll",function(event){if(self.showHeader)headerNode.scrollLeft=event.scrollLeft||bodyNode.scrollLeft;event.stopPropagation();listen.emit(domNode,"scroll",{scrollTarget:bodyNode})});this.configStructure();this.renderHeader();addUiClasses=false;this.contentNode=this.touchNode=put(this.bodyNode,"div.dgrid-content"+(addUiClasses?".ui-widget-content":""));this._listeners.push(this._resizeHandle=listen(window,"resize",miscUtil.throttleDelayed(winResizeHandler,this)))},postCreate:has("touch")?function(){if(this.useTouchScroll)this.inherited(arguments)}:
function(){},startup:function(){if(this._started)return;this.inherited(arguments);this._started=true;this.resize();this.set("sort",this._sort)},configStructure:function(){},resize:function(){var bodyNode=this.bodyNode,headerNode=this.headerNode,footerNode=this.footerNode,headerHeight=headerNode.offsetHeight,footerHeight=this.showFooter?footerNode.offsetHeight:0,quirks=has("quirks")||has("ie")<7;this.headerScrollNode.style.height=bodyNode.style.marginTop=headerHeight+"px";bodyNode.style.marginBottom=
footerHeight+"px";if(quirks){bodyNode.style.height="";bodyNode.style.height=Math.max(this.domNode.offsetHeight-headerHeight-footerHeight,0)+"px";if(footerHeight){footerNode.style.bottom="1px";setTimeout(function(){footerNode.style.bottom=""},0)}}if(!scrollbarWidth){scrollbarWidth=has("dom-scrollbar-width");scrollbarHeight=has("dom-scrollbar-height");if(has("ie")){scrollbarWidth++;scrollbarHeight++}miscUtil.addCssRule(".dgrid-scrollbar-width","width: "+scrollbarWidth+"px");miscUtil.addCssRule(".dgrid-scrollbar-height",
"height: "+scrollbarHeight+"px");if(scrollbarWidth!=17&&!quirks){miscUtil.addCssRule(".dgrid-header-row","right: "+scrollbarWidth+"px");miscUtil.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+scrollbarWidth+"px")}}if(quirks){headerNode.style.width=bodyNode.clientWidth+"px";setTimeout(function(){headerNode.scrollLeft=bodyNode.scrollLeft},0)}},addCssRule:function(selector,css){var rule=miscUtil.addCssRule(selector,css);if(this.cleanAddedRules)this._listeners.push(rule);return rule},on:function(eventType,
listener){var signal=listen(this.domNode,eventType,listener);if(!has("dom-addeventlistener"))this._listeners.push(signal);return signal},cleanup:function(){var observers=this.observers,i;for(i in this._rowIdToObject)if(this._rowIdToObject[i]!=this.columns){var rowElement=byId(i);if(rowElement)this.removeRow(rowElement,true)}for(i=0;i<observers.length;i++){var observer=observers[i];observer&&observer.cancel()}this.observers=[];this._numObservers=0;this.preload=null},destroy:function(){if(this._listeners){for(var i=
this._listeners.length;i--;)this._listeners[i].remove();delete this._listeners}this._started=false;this.cleanup();put(this.domNode,"!");if(this.useTouchScroll)this.inherited(arguments)},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},newRow:function(object,parentNode,beforeNode,i,options){if(parentNode){var row=this.insertRow(object,parentNode,beforeNode,i,options);put(row,".dgrid-highlight"+(this.addUiClasses?".ui-state-highlight":
""));setTimeout(function(){put(row,"!dgrid-highlight!ui-state-highlight")},this.highlightDuration);return row}},adjustRowIndices:function(firstRow){var next=firstRow;var rowIndex=next.rowIndex;if(rowIndex>-1){do if(next.rowIndex>-1){if(this.maintainOddEven)if((next.className+" ").indexOf("dgrid-row ")>-1)put(next,"."+(rowIndex%2==1?oddClass:evenClass)+"!"+(rowIndex%2==0?oddClass:evenClass));next.rowIndex=rowIndex++}while((next=next.nextSibling)&&next.rowIndex!=rowIndex)}},renderArray:function(results,
beforeNode,options){options=options||{};var self=this,start=options.start||0,observers=this.observers,rows,container,observerIndex;if(!beforeNode)this._lastCollection=results;if(results.observe){self._numObservers++;var observer=results.observe(function(object,from,to){var row,firstRow,nextNode,parentNode;function advanceNext(){nextNode=(nextNode.connected||nextNode).nextSibling}if(from>-1&&rows[from]){row=rows.splice(from,1)[0];if(row.parentNode==container){firstRow=row.nextSibling;if(firstRow)if(from!=
to)firstRow.rowIndex--;self.removeRow(row)}options.count--;if(self._processScroll)self._processScroll()}if(to>-1){if(rows.length)if(to===0){nextNode=rows[to];nextNode=nextNode&&correctElement(nextNode)}else{nextNode=rows[to-1];if(nextNode){nextNode=correctElement(nextNode);advanceNext()}}else nextNode=self._getFirstRowSibling&&self._getFirstRowSibling(container);if(row&&nextNode&&row.id===nextNode.id)advanceNext();if(nextNode&&!nextNode.parentNode)nextNode=byId(nextNode.id);parentNode=beforeNode&&
beforeNode.parentNode||nextNode&&nextNode.parentNode||self.contentNode;row=self.newRow(object,parentNode,nextNode,options.start+to,options);if(row){row.observerIndex=observerIndex;rows.splice(to,0,row);if(!firstRow||to<from){var previous=row.previousSibling;firstRow=!previous||previous.rowIndex+1==row.rowIndex||row.rowIndex==0?row:previous}}options.count++}if(from===0)overlapRows(1,1);else if(from===results.length-(to===-1?0:1))overlapRows(0,0);from!=to&&firstRow&&self.adjustRowIndices(firstRow);
self._onNotification(rows,object,from,to)},true);observerIndex=observers.push(observer)-1}var rowsFragment=document.createDocumentFragment(),lastRow;function overlapRows(){var sides=arguments;if(observerIndex>-1)for(var i=0;i<sides.length;i++){var top=sides[i];var lastRow=rows[top?0:rows.length-1];lastRow=lastRow&&correctElement(lastRow);if(lastRow){var row=lastRow[top?"previousSibling":"nextSibling"];if(row)row=self.row(row);if(row&&row.element!=lastRow){var method=top?"unshift":"push";results[method](row.data);
rows[method](row.element);options.count++}}}}function correctElement(row){if(!dom.isDescendant(row,self.domNode)&&byId(row.id))return self.row(row.id.slice(self.id.length+5)).element;return row}function mapEach(object){lastRow=self.insertRow(object,rowsFragment,null,start++,options);lastRow.observerIndex=observerIndex;return lastRow}function whenError(error){if(typeof observerIndex!=="undefined"){observers[observerIndex].cancel();observers[observerIndex]=0;self._numObservers--}if(error)throw error;
}var originalRows;function whenDone(resolvedRows){originalRows=resolvedRows.slice(0);container=beforeNode?beforeNode.parentNode:self.contentNode;if(container&&container.parentNode&&(container!==self.contentNode||resolvedRows.length)){container.insertBefore(rowsFragment,beforeNode||null);lastRow=resolvedRows[resolvedRows.length-1];lastRow&&self.adjustRowIndices(lastRow)}else if(observers[observerIndex]&&self.cleanEmptyObservers)whenError();rows=resolvedRows;if(observer)observer.rows=rows}if(results.map){rows=
results.map(mapEach,console.error);if(rows.then)return results.then(function(resultsArray){results=resultsArray;return rows.then(function(resolvedRows){whenDone(resolvedRows);overlapRows(1,1,0,0);return originalRows})})}else{rows=[];for(var i=0,l=results.length;i<l;i++)rows[i]=mapEach(results[i])}whenDone(rows);overlapRows(1,1,0,0);return originalRows},_onNotification:function(rows,object,from,to){},renderHeader:function(){},_autoId:0,insertRow:function(object,parent,beforeNode,i,options){var parentId=
options.parentId,id=this.id+"-row-"+(parentId?parentId+"-":"")+(this.store&&this.store.getIdentity?this.store.getIdentity(object):this._autoId++),row=byId(id),previousRow=row&&row.previousSibling;if(row){if(row===beforeNode)beforeNode=(beforeNode.connected||beforeNode).nextSibling;this.removeRow(row)}row=this.renderRow(object,options);row.className=(row.className||"")+" dgrid-row "+(i%2==1?oddClass:evenClass)+(this.addUiClasses?" ui-state-default":"");this._rowIdToObject[row.id=id]=object;parent.insertBefore(row,
beforeNode||null);if(previousRow)this.adjustRowIndices(previousRow);row.rowIndex=i;return row},renderRow:function(value,options){return put("div",""+value)},removeRow:function(rowElement,justCleanup){rowElement=rowElement.element||rowElement;delete this._rowIdToObject[rowElement.id];if(!justCleanup)put(rowElement,"!")},row:function(target){var id;if(!target)return null;if(target instanceof this._Row)return target;if(target.target&&target.target.nodeType)target=target.target;if(target.nodeType){var object;
do{var rowId=target.id;if(object=this._rowIdToObject[rowId])return new this._Row(rowId.substring(this.id.length+5),object,target);target=target.parentNode}while(target&&target!=this.domNode);return}if(typeof target=="object")id=this.store.getIdentity(target);else{id=target;target=this._rowIdToObject[this.id+"-row-"+id]}return new this._Row(id,target,byId(this.id+"-row-"+id))},cell:function(target){return{row:this.row(target)}},_move:function(item,steps,targetClass,visible){var nextSibling,current,
element;element=current=item.element;steps=steps||1;do if(nextSibling=current[steps<0?"previousSibling":"nextSibling"]){do{current=nextSibling;if(current&&(current.className+" ").indexOf(targetClass+" ")>-1){element=current;steps+=steps<0?1:-1;break}}while(nextSibling=(!visible||!current.hidden)&&current[steps<0?"lastChild":"firstChild"])}else{current=current.parentNode;if(!current||current===this.bodyNode||current===this.headerNode)break}while(steps);return element},up:function(row,steps,visible){if(!row.element)row=
this.row(row);return this.row(this._move(row,-(steps||1),"dgrid-row",visible))},down:function(row,steps,visible){if(!row.element)row=this.row(row);return this.row(this._move(row,steps||1,"dgrid-row",visible))},scrollTo:has("touch")?function(options){return this.useTouchScroll?this.inherited(arguments):desktopScrollTo.call(this,options)}:desktopScrollTo,getScrollPosition:has("touch")?function(){return this.useTouchScroll?this.inherited(arguments):desktopGetScrollPosition.call(this)}:desktopGetScrollPosition,
get:function(name){var fn="_get"+name.charAt(0).toUpperCase()+name.slice(1);if(typeof this[fn]==="function")return this[fn].apply(this,[].slice.call(arguments,1));if(!1&&typeof this[fn+"Attr"]==="function")0&&console.warn("dgrid: Use "+fn+" instead of "+fn+"Attr for getting "+name);return this[name]},set:function(name,value){if(typeof name==="object")for(var k in name)this.set(k,name[k]);else{var fn="_set"+name.charAt(0).toUpperCase()+name.slice(1);if(typeof this[fn]==="function")this[fn].apply(this,
[].slice.call(arguments,1));else{if(!1&&typeof this[fn+"Attr"]==="function")0&&console.warn("dgrid: Use "+fn+" instead of "+fn+"Attr for setting "+name);this[name]=value}}return this},_getClass:getClass,_setClass:setClass,_getClassName:getClass,_setClassName:setClass,_setSort:function(property,descending){this._sort=typeof property!="string"?property:[{attribute:property,descending:descending}];this.refresh();if(this._lastCollection){if(property.length){if(typeof property!="string"){descending=property[0].descending;
property=property[0].attribute}this._lastCollection.sort(function(a,b){var aVal=a[property],bVal=b[property];if(aVal===undefined)aVal="";if(bVal===undefined)bVal="";return aVal==bVal?0:aVal>bVal==!descending?1:-1})}this.renderArray(this._lastCollection)}},sort:function(property,descending){kernel.deprecated("sort(...)",'use set("sort", ...) instead',"dgrid 0.4");this.set("sort",property,descending)},_getSort:function(){return this._sort},_setShowHeader:function(show){var headerNode=this.headerNode;
this.showHeader=show;put(headerNode,(show?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();if(show)headerNode.scrollLeft=this.getScrollPosition().x},setShowHeader:function(show){kernel.deprecated("setShowHeader(...)",'use set("showHeader", ...) instead',"dgrid 0.4");this.set("showHeader",show)},_setShowFooter:function(show){this.showFooter=show;put(this.footerNode,(show?"!":".")+"dgrid-footer-hidden");this.resize()}})})},"dojo/dnd/move":function(){define(["../_base/declare","../dom-geometry",
"../dom-style","./common","./Mover","./Moveable"],function(declare,domGeom,domStyle,dnd,Mover,Moveable){var constrainedMoveable=declare("dojo.dnd.move.constrainedMoveable",Moveable,{constraints:function(){},within:false,constructor:function(node,params){if(!params)params={};this.constraints=params.constraints;this.within=params.within},onFirstMove:function(mover){var c=this.constraintBox=this.constraints.call(this,mover);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=domGeom.getMarginSize(mover.node);
c.r-=mb.w;c.b-=mb.h}},onMove:function(mover,leftTop){var c=this.constraintBox,s=mover.node.style;this.onMoving(mover,leftTop);leftTop.l=leftTop.l<c.l?c.l:c.r<leftTop.l?c.r:leftTop.l;leftTop.t=leftTop.t<c.t?c.t:c.b<leftTop.t?c.b:leftTop.t;s.left=leftTop.l+"px";s.top=leftTop.t+"px";this.onMoved(mover,leftTop)}});var boxConstrainedMoveable=declare("dojo.dnd.move.boxConstrainedMoveable",constrainedMoveable,{box:{},constructor:function(node,params){var box=params&&params.box;this.constraints=function(){return box}}});
var parentConstrainedMoveable=declare("dojo.dnd.move.parentConstrainedMoveable",constrainedMoveable,{area:"content",constructor:function(node,params){var area=params&&params.area;this.constraints=function(){var n=this.node.parentNode,s=domStyle.getComputedStyle(n),mb=domGeom.getMarginBox(n,s);if(area=="margin")return mb;var t=domGeom.getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border")return mb;t=domGeom.getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area==
"padding")return mb;t=domGeom.getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb}}});return{constrainedMoveable:constrainedMoveable,boxConstrainedMoveable:boxConstrainedMoveable,parentConstrainedMoveable:parentConstrainedMoveable}})},"xide/widgets/_WidgetPickerMixin":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-construct","xide/utils"],function(declare,domClass,domConstruct,utils){var outlineVisible=false;var boxModelVisible=false;var outlineElements={};var isIE=
false;var isIEStantandMode=false;var offlineFragment=null;var boxModel,boxModelStyle,boxMargin,boxMarginStyle,boxBorder,boxBorderStyle,boxPadding,boxPaddingStyle,boxContent,boxContentStyle;var outline={"fbOutlineT":"fbHorizontalLine","fbOutlineL":"fbVerticalLine","fbOutlineB":"fbHorizontalLine","fbOutlineR":"fbVerticalLine"};var outlineStyle={fbHorizontalLine:"background: #00d706;height: 2px;",fbVerticalLine:"background: #00d706;width: 2px;"};var resetStyle="margin:0; padding:0; border:0; position:absolute; overflow:hidden; display:block;";
var offscreenStyle=resetStyle+"top:-1234px; left:-1234px;";var inspectStyle=resetStyle+"z-index: 2147483500;";var inspectModelOpacity=isIE?"filter:alpha(opacity\x3d80);":"opacity:0.8;";var inspectModelStyle=inspectStyle+inspectModelOpacity;var inspectMarginStyle=inspectStyle+"background: #EDFF64; height:100%; width:100%;";var inspectBorderStyle=inspectStyle+"background: #666;";var inspectPaddingStyle=inspectStyle+"background: SlateBlue;";var inspectContentStyle=inspectStyle+"background: SkyBlue;";
var createBoxModelInspector=function createBoxModelInspector(){boxModel=domConstruct.create("div");boxModel.id="fbBoxModel";boxModel.firebugIgnore=true;boxModelStyle=boxModel.style;boxModelStyle.cssText=inspectModelStyle;boxMargin=domConstruct.create("div");boxMargin.id="fbBoxMargin";boxMarginStyle=boxMargin.style;boxMarginStyle.cssText=inspectMarginStyle;boxModel.appendChild(boxMargin);boxBorder=domConstruct.create("div");boxBorder.id="fbBoxBorder";boxBorderStyle=boxBorder.style;boxBorderStyle.cssText=
inspectBorderStyle;boxModel.appendChild(boxBorder);boxPadding=domConstruct.create("div");boxPadding.id="fbBoxPadding";boxPaddingStyle=boxPadding.style;boxPaddingStyle.cssText=inspectPaddingStyle;boxModel.appendChild(boxPadding);boxContent=domConstruct.create("div");boxContent.id="fbBoxContent";boxContentStyle=boxContent.style;boxContentStyle.cssText=inspectContentStyle;boxModel.appendChild(boxContent);offlineFragment.appendChild(boxModel)};var createOutlineInspector=function createOutlineInspector(){for(var name in outline){var el=
outlineElements[name]=domConstruct.create("div");el.id=name;el.firebugIgnore=true;el.style.cssText=inspectStyle+outlineStyle[outline[name]];offlineFragment.appendChild(el)}};var destroyBoxModelInspector=function destroyBoxModelInspector(){boxModel.parentNode.removeChild(boxModel)};var destroyOutlineInspector=function destroyOutlineInspector(){for(var name in outline){var el=outlineElements[name];el.parentNode.removeChild(el)}};return declare("xide.widgets._WidgetPickerMixin",null,{_inspectFrame:null,
_isInspecting:false,_lastInspecting:0,inspectorMask:{},shouldShowOutline:function(el){},getWindowSize:function(){var width=0,height=0,el;if(typeof this.window.innerWidth=="number"){width=this.window.innerWidth;height=this.window.innerHeight}else if((el=this.document.documentElement)&&(el.clientHeight||el.clientWidth)){width=el.clientWidth;height=el.clientHeight}else if((el=this.document.body)&&(el.clientHeight||el.clientWidth)){width=el.clientWidth;height=el.clientHeight}return{width:width,height:height}},
addEvent:function(object,name,handler,useCapture){if(object.addEventListener)object.addEventListener(name,handler,useCapture);else object.attachEvent("on"+name,handler)},removeEvent:function(object,name,handler,useCapture){try{if(object.removeEventListener)object.removeEventListener(name,handler,useCapture);else object.detachEvent("on"+name,handler)}catch(e){}},getWindowScrollSize:function(){var width=0,height=0,el,isIEQuiksMode=false;if(!isIEQuiksMode&&(el=this.document.documentElement)&&(el.scrollHeight||
el.scrollWidth)){width=el.scrollWidth;height=el.scrollHeight}if((el=this.document.body)&&(el.scrollHeight||el.scrollWidth)&&(el.scrollWidth>width||el.scrollHeight>height)){width=el.scrollWidth;height=el.scrollHeight}return{width:width,height:height}},getElementFromPoint:function(x,y){var shouldFixElementFromPoint=false;if(shouldFixElementFromPoint){var scroll=this.getWindowScrollPosition();return this.document.elementFromPoint(x+scroll.left,y+scroll.top)}else return this.document.elementFromPoint(x,
y)},getWindowScrollPosition:function(){var top=0,left=0,el;if(typeof this.window.pageYOffset=="number"){top=this.window.pageYOffset;left=this.window.pageXOffset}else if((el=this.document.body)&&(el.scrollTop||el.scrollLeft)){top=el.scrollTop;left=el.scrollLeft}else if((el=this.document.documentElement)&&(el.scrollTop||el.scrollLeft)){top=el.scrollTop;left=el.scrollLeft}return{top:top,left:left}},getElementPosition:function(el){var left=0;var top=0;do{left+=el.offsetLeft;top+=el.offsetTop}while(el=
el.offsetParent);return{left:left,top:top}},getElementBox:function(el){var result={};if(el.getBoundingClientRect){var rect=el.getBoundingClientRect();var offset=0;var scroll=this.getWindowScrollPosition();result.top=Math.round(rect.top-offset+scroll.top);result.left=Math.round(rect.left-offset+scroll.left);result.height=Math.round(rect.bottom-rect.top);result.width=Math.round(rect.right-rect.left)}else{var position=this.getElementPosition(el);result.top=position.top;result.left=position.left;result.height=
el.offsetHeight;result.width=el.offsetWidth}return result},hideBoxModel:function(){if(!boxModelVisible)return;offlineFragment.appendChild(boxModel);boxModelVisible=false},hideOutline:function(){if(!outlineVisible)return;for(var name in outline)offlineFragment.appendChild(outlineElements[name]);outlineVisible=false},showOutline:function(){if(outlineVisible)return;if(boxModelVisible)this.hideBoxModel();for(var name in outline)this.document.getElementsByTagName("body")[0].appendChild(outlineElements[name]);
outlineVisible=true},getCSSAutoMarginBox:function(el){if(isIE&&" meta title input script link a ".indexOf(" "+el.nodeName.toLowerCase()+" ")!=-1)return{top:0,left:0,bottom:0,right:0};if(isIE&&" h1 h2 h3 h4 h5 h6 h7 ul p ".indexOf(" "+el.nodeName.toLowerCase()+" ")==-1)return{top:0,left:0,bottom:0,right:0};var offsetTop=0;if(false&&isIEStantandMode){var scrollSize=this.getWindowScrollSize();offsetTop=scrollSize.height}var box=this.document.createElement("div");box.style.cssText="margin:0; padding:1px; border: 0; visibility: hidden;";
var clone=el.cloneNode(false);var text=this.document.createTextNode("\x26nbsp;");clone.appendChild(text);box.appendChild(clone);this.document.body.appendChild(box);var marginTop=clone.offsetTop-box.offsetTop-1;var marginBottom=box.offsetHeight-clone.offsetHeight-2-marginTop;var marginLeft=clone.offsetLeft-box.offsetLeft-1;var marginRight=box.offsetWidth-clone.offsetWidth-2-marginLeft;this.document.body.removeChild(box);return{top:marginTop+offsetTop,left:marginLeft,bottom:marginBottom-offsetTop,right:marginRight}},
getMeasurementInPixels:function(el,name){if(!el)return null;var m=this.getMeasurement(el,name);var value=m.value;var unit=m.unit;if(unit=="px")return value;else if(unit=="pt")return this.pointsToPixels(name,value);else if(unit=="em")return this.emToPixels(el,value);else if(unit=="%")return this.percentToPixels(el,value);else if(unit=="ex")return this.exToPixels(el,value)},getMeasurementBox:function(el,name){var result=[];var sufixes=name=="border"?["TopWidth","LeftWidth","BottomWidth","RightWidth"]:
["Top","Left","Bottom","Right"];if(isIE){var propName,cssValue;var autoMargin=null;for(var i=0,sufix;sufix=sufixes[i];i++){propName=name+sufix;cssValue=el.currentStyle[propName]||el.style[propName];if(cssValue=="auto"){if(!autoMargin)autoMargin=this.getCSSAutoMarginBox(el);result[i]=autoMargin[sufix.toLowerCase()]}else result[i]=this.getMeasurementInPixels(el,propName)}}else for(var i=0,sufix;sufix=sufixes[i];i++)result[i]=this.getMeasurementInPixels(el,name+sufix);return{top:result[0],left:result[1],
bottom:result[2],right:result[3]}},drawBoxModel:function(el){if(!el||!el.parentNode)return;var box=this.getElementBox(el);var windowSize=this.getWindowSize();var scrollPosition=this.getWindowScrollPosition();var offsetHeight=0;if(box.top>scrollPosition.top+windowSize.height-offsetHeight||box.left>scrollPosition.left+windowSize.width||scrollPosition.top>box.top+box.height||scrollPosition.left>box.left+box.width)return;var top=box.top;var left=box.left;var height=box.height;var width=box.width;var margin=
Firebug.browser.getMeasurementBox(el,"margin");var padding=Firebug.browser.getMeasurementBox(el,"padding");var border=Firebug.browser.getMeasurementBox(el,"border");boxModelStyle.top=top-margin.top+"px";boxModelStyle.left=left-margin.left+"px";boxModelStyle.height=height+margin.top+margin.bottom+"px";boxModelStyle.width=width+margin.left+margin.right+"px";boxBorderStyle.top=margin.top+"px";boxBorderStyle.left=margin.left+"px";boxBorderStyle.height=height+"px";boxBorderStyle.width=width+"px";boxPaddingStyle.top=
margin.top+border.top+"px";boxPaddingStyle.left=margin.left+border.left+"px";boxPaddingStyle.height=height-border.top-border.bottom+"px";boxPaddingStyle.width=width-border.left-border.right+"px";boxContentStyle.top=margin.top+border.top+padding.top+"px";boxContentStyle.left=margin.left+border.left+padding.left+"px";boxContentStyle.height=height-border.top-padding.top-padding.bottom-border.bottom+"px";boxContentStyle.width=width-border.left-padding.left-padding.right-border.right+"px";if(!boxModelVisible)this.showBoxModel()},
drawOutline:function(el){var border=2;var scrollbarSize=17;var windowSize=this.getWindowSize();var scrollSize=this.getWindowScrollSize();var scrollPosition=this.getWindowScrollPosition();var box=this.getElementBox(el);var top=box.top;var left=box.left;var height=box.height;var width=box.width;var isIE=false;var freeHorizontalSpace=scrollPosition.left+windowSize.width-left-width-(!isIE&&scrollSize.height>windowSize.height?scrollbarSize:0);var freeVerticalSpace=scrollPosition.top+windowSize.height-
top-height-(!isIE&&scrollSize.width>windowSize.width?scrollbarSize:0);var numVerticalBorders=freeVerticalSpace>0?2:1;var o=outlineElements;var style;style=o.fbOutlineT.style;style.top=top-border+"px";style.left=left+"px";style.height=border+"px";style.width=width+"px";style=o.fbOutlineL.style;style.top=top-border+"px";style.left=left-border+"px";style.height=height+numVerticalBorders*border+"px";style.width=border+"px";style=o.fbOutlineB.style;if(freeVerticalSpace>0){style.top=top+height+"px";style.left=
left+"px";style.width=width+"px"}else{style.top=-2*border+"px";style.left=-2*border+"px";style.width=border+"px"}style=o.fbOutlineR.style;if(freeHorizontalSpace>0){style.top=top-border+"px";style.left=left+width+"px";style.height=height+numVerticalBorders*border+"px";style.width=(freeHorizontalSpace<border?freeHorizontalSpace:border)+"px"}else{style.top=-2*border+"px";style.left=-2*border+"px";style.height=border+"px";style.width=border+"px"}if(!outlineVisible)this.showOutline()},onInspecting:function(e){if((new Date).getTime()-
this._lastInspecting>30){this._inspectFrame.style.display="none";var targ=this.getElementFromPoint(e.clientX,e.clientY);this._inspectFrame.style.display="block";var id=targ.id;if(id&&/^fbOutline\w$/.test(id))return;if(id=="FirebugUI")return;while(targ.nodeType!=1)targ=targ.parentNode;if(targ.nodeName.toLowerCase()=="body")return;if(this.isPickable)if(this.isPickable(targ))this.drawOutline(targ);else return;else this.drawOutline(targ);this._lastInspecting=(new Date).getTime()}},destroyInspectorFrame:function(){if(this._inspectFrame){this.document.getElementsByTagName("body")[0].removeChild(this._inspectFrame);
this._inspectFrame=null}},stopInspecting:function(){this._isInspecting=false;if(outlineVisible)this.hideOutline();this.removeEvent(this._inspectFrame,"mousemove",this.onInspecting);this.removeEvent(this._inspectFrame,"mousedown",this.onInspectingClick);this.destroyInspectorFrame()},onInspectingClick:function(e){this._inspectFrame.style.display="none";var targ=this.getElementFromPoint(e.clientX,e.clientY);this._inspectFrame.style.display="block";var id=targ.id;if(id&&/^fbOutline\w$/.test(id))return;
if(id=="FirebugUI")return;while(targ.nodeType!=1)targ=targ.parentNode;if(this.onNodePicked)this.onNodePicked(targ);this.stopInspecting();this._destroy()},_destroy:function(){destroyBoxModelInspector();destroyOutlineInspector();offlineFragment=null},_createInspectorFrame:function(){var resetStyle="margin:0; padding:0; border:0; position:absolute; overflow:hidden; display:block;";var inspectFrameStyle=resetStyle+"z-index: 2147483550; top:0; left:0;";this._inspectFrame=domConstruct.create("div",{});
this._inspectFrame.style.cssText=inspectFrameStyle;document.getElementsByTagName("body")[0].appendChild(this._inspectFrame);var size=this.getWindowScrollSize();var thiz=this;this._inspectFrame.style.width=size.width+"px";this._inspectFrame.style.height=size.height+"px";this.addEvent(this._inspectFrame,"mousemove",function(e){thiz.onInspecting(e)});this.addEvent(this._inspectFrame,"mousedown",function(e){thiz.onInspectingClick(e)})},initInspector:function(){offlineFragment=document.createDocumentFragment();
createBoxModelInspector();createOutlineInspector()},startInspecting:function(){this._isInspecting=true;this.window=window;this.document=document;this.initInspector();this._createInspectorFrame()},_pick:function(){try{this.startInspecting()}catch(e){console.error("inspector crash!")}}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(tracer,has,lang,arrayUtil){function logError(error,rejection,deferred){var stack="";if(error&&error.stack)stack+=
error.stack;if(rejection&&rejection.stack)stack+="\n    ----------------------------------------\n    rejected"+rejection.stack.split("\n").slice(1).join("\n").replace(/^\s+/," ");if(deferred&&deferred.stack)stack+="\n    ----------------------------------------\n"+deferred.stack;console.error(error,stack)}function reportRejections(error,handled,rejection,deferred){if(!handled)logError(error,rejection,deferred)}var errors=[];var activeTimeout=false;var unhandledWait=1E3;function trackUnhandledRejections(error,
handled,rejection,deferred){if(handled)arrayUtil.some(errors,function(obj,ix){if(obj.error===error){errors.splice(ix,1);return true}});else if(!arrayUtil.some(errors,function(obj){return obj.error===error}))errors.push({error:error,rejection:rejection,deferred:deferred,timestamp:(new Date).getTime()});if(!activeTimeout)activeTimeout=setTimeout(logRejected,unhandledWait)}function logRejected(){var now=(new Date).getTime();var reportBefore=now-unhandledWait;errors=arrayUtil.filter(errors,function(obj){if(obj.timestamp<
reportBefore){logError(obj.error,obj.rejection,obj.deferred);return false}return true});if(errors.length)activeTimeout=setTimeout(logRejected,errors[0].timestamp+unhandledWait-now);else activeTimeout=false}return function(Deferred){var usage=has("config-useDeferredInstrumentation");if(usage){tracer.on("resolved",lang.hitch(console,"log","resolved"));tracer.on("rejected",lang.hitch(console,"log","rejected"));tracer.on("progress",lang.hitch(console,"log","progress"));var args=[];if(typeof usage==="string"){args=
usage.split(",");usage=args.shift()}if(usage==="report-rejections")Deferred.instrumentRejected=reportRejections;else if(usage==="report-unhandled-rejections"||usage===true||usage===1){Deferred.instrumentRejected=trackUnhandledRejections;unhandledWait=parseInt(args[0],10)||unhandledWait}else throw new Error("Unsupported instrumentation usage \x3c"+usage+"\x3e");}}})},"cbtree/data/util/filter":function(){define("cbtree/data/util/filter",["dojo/_base/lang"],function(lang){var filter={};filter.patternToRegExp=
function(pattern,ignoreCase){if(pattern.charAt(0)=="("&&pattern.charAt(pattern.length-1)==")")var rxp=pattern.substr(1,pattern.length-2);else{var rxp="^";var c=null;for(var i=0;i<pattern.length;i++){c=pattern.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=pattern.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c}}rxp+="$"}if(ignoreCase)return new RegExp(rxp,
"mi");else return new RegExp(rxp,"m")};return filter})},"dojo/_base/connect":function(){define(["./kernel","../on","../topic","../aspect","./event","../mouse","./sniff","./lang","../keys"],function(dojo,on,hub,aspect,eventModule,mouse,has,lang){has.add("events-keypress-typed",function(){var testKeyEvent={charCode:0};try{testKeyEvent=document.createEvent("KeyboardEvent");(testKeyEvent.initKeyboardEvent||testKeyEvent.initKeyEvent).call(testKeyEvent,"keypress",true,true,null,false,false,false,false,
9,3)}catch(e){}return testKeyEvent.charCode==0&&!has("opera")});function connect_(obj,event,context,method,dontFix){method=lang.hitch(context,method);if(!obj||!(obj.addEventListener||obj.attachEvent))return aspect.after(obj||dojo.global,event,method,true);if(typeof event=="string"&&event.substring(0,2)=="on")event=event.substring(2);if(!obj)obj=dojo.global;if(!dontFix)switch(event){case "keypress":event=keypress;break;case "mouseenter":event=mouse.enter;break;case "mouseleave":event=mouse.leave;break}return on(obj,
event,method,dontFix)}var _punctMap={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113};var evtCopyKey=has("mac")?"metaKey":"ctrlKey";var _synthesizeEvent=function(evt,props){var faux=lang.mixin({},evt,props);setKeyChar(faux);faux.preventDefault=function(){evt.preventDefault()};faux.stopPropagation=function(){evt.stopPropagation()};return faux};function setKeyChar(evt){evt.keyChar=evt.charCode?String.fromCharCode(evt.charCode):"";evt.charOrCode=evt.keyChar||
evt.keyCode}var keypress;if(has("events-keypress-typed")){var _trySetKeyCode=function(e,code){try{return e.keyCode=code}catch(e){return 0}};keypress=function(object,listener){var keydownSignal=on(object,"keydown",function(evt){var k=evt.keyCode;var unprintable=k!=13&&k!=32&&(k!=27||!has("ie"))&&(k<48||k>90)&&(k<96||k>111)&&(k<186||k>192)&&(k<219||k>222)&&k!=229;if(unprintable||evt.ctrlKey){var c=unprintable?0:k;if(evt.ctrlKey)if(k==3||k==13)return listener.call(evt.currentTarget,evt);else if(c>95&&
c<106)c-=48;else if(!evt.shiftKey&&c>=65&&c<=90)c+=32;else c=_punctMap[c]||c;var faux=_synthesizeEvent(evt,{type:"keypress",faux:true,charCode:c});listener.call(evt.currentTarget,faux);if(has("ie"))_trySetKeyCode(evt,faux.keyCode)}});var keypressSignal=on(object,"keypress",function(evt){var c=evt.charCode;c=c>=32?c:0;evt=_synthesizeEvent(evt,{charCode:c,faux:true});return listener.call(this,evt)});return{remove:function(){keydownSignal.remove();keypressSignal.remove()}}}}else if(has("opera"))keypress=
function(object,listener){return on(object,"keypress",function(evt){var c=evt.which;if(c==3)c=99;c=c<32&&!evt.shiftKey?0:c;if(evt.ctrlKey&&!evt.shiftKey&&c>=65&&c<=90)c+=32;return listener.call(this,_synthesizeEvent(evt,{charCode:c}))})};else keypress=function(object,listener){return on(object,"keypress",function(evt){setKeyChar(evt);return listener.call(this,evt)})};var connect={_keypress:keypress,connect:function(obj,event,context,method,dontFix){var a=arguments,args=[],i=0;args.push(typeof a[0]==
"string"?null:a[i++],a[i++]);var a1=a[i+1];args.push(typeof a1=="string"||typeof a1=="function"?a[i++]:null,a[i++]);for(var l=a.length;i<l;i++)args.push(a[i]);return connect_.apply(this,args)},disconnect:function(handle){if(handle)handle.remove()},subscribe:function(topic,context,method){return hub.subscribe(topic,lang.hitch(context,method))},publish:function(topic,args){return hub.publish.apply(hub,[topic].concat(args))},connectPublisher:function(topic,obj,event){var pf=function(){connect.publish(topic,
arguments)};return event?connect.connect(obj,event,pf):connect.connect(obj,pf)},isCopyKey:function(e){return e[evtCopyKey]}};connect.unsubscribe=connect.disconnect;1&&lang.mixin(dojo,connect);return connect})},"dojo/io/iframe":function(){define("dojo/io/iframe",["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(config,json,kernel,lang,xhr,has,win,
dom,domConstruct,query,require,aspect,_iframe){kernel.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var mid=_iframe._iframeName;mid=mid.substring(0,mid.lastIndexOf("_"));var iframe=lang.delegate(_iframe,{create:function(){return iframe._frame=_iframe.create.apply(_iframe,arguments)},get:null,post:null,send:function(args){var rDfd;var dfd=xhr._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel()},function(dfd){var value=null,ioArgs=dfd.ioArgs;try{var handleAs=ioArgs.handleAs;if(handleAs===
"xml"||handleAs==="html")value=rDfd.response.data;else{value=rDfd.response.text;if(handleAs==="json")value=json.fromJson(value);else if(handleAs==="javascript")value=kernel.eval(value)}}catch(e){value=e}return value},function(error,dfd){dfd.ioArgs._hasError=true;return error});var ioArgs=dfd.ioArgs;var method="GET",form=dom.byId(args.form);if(args.method&&args.method.toUpperCase()==="POST"&&form)method="POST";var options={method:method,handleAs:args.handleAs==="json"||args.handleAs==="javascript"?
"text":args.handleAs,form:args.form,query:form?null:args.content,data:form?args.content:null,timeout:args.timeout,ioArgs:ioArgs};if(options.method)options.method=options.method.toUpperCase();if(config.ioPublish&&kernel.publish&&ioArgs.args.ioPublish!==false)var start=aspect.after(_iframe,"_notifyStart",function(data){if(data.options.ioArgs===ioArgs){start.remove();xhr._ioNotifyStart(dfd)}},true);rDfd=_iframe(ioArgs.url,options,true);ioArgs._callNext=rDfd._callNext;rDfd.then(function(){dfd.resolve(dfd)}).otherwise(function(error){dfd.ioArgs.error=
error;dfd.reject(error)});return dfd},_iframeOnload:win.global[mid+"_onload"]});lang.setObject("dojo.io.iframe",iframe);return iframe})},"xblox/model/logic/SwitchBlock":function(){define("xblox/model/logic/SwitchBlock",["dojo/_base/declare","xblox/model/Block","xblox/model/logic/CaseBlock"],function(declare,Block,CaseBlock){return declare("xblox.model.SwitchBlock",[Block],{variable:"PowerState",items:null,name:"Switch",toText:function(){return this.getBlockIcon("H")+this.name+" "+this.variable},canAdd:function(){return[]},
solve:function(scope,settings){var anyCase=false;var ret=[];this.onSuccess(this,settings);for(var n=0;n<this.items.length;n++){var block=this.items[n];if(block.declaredClass==="xblox.model.logic.CaseBlock"){var caseret;caseret=block.solve(scope,this,settings);if(caseret!=false){anyCase=true;this.addToEnd(ret,caseret);break}else;}}if(!anyCase)for(var n=0;n<this.items.length;n++){var block=this.items[n];if(!(block.declaredClass=="xblox.model.logic.CaseBlock"))this.addToEnd(ret,block.solve(scope))}return ret},
init:function(){},getChildren:function(parent){return this.items},postCreate:function(){this.add(CaseBlock,{comparator:"\x3d\x3d",expression:"ON",group:null});this.add(CaseBlock,{comparator:"\x3d\x3d",expression:"Standby",group:null})}})})},"xfile/views/UploadMixin":function(){define("xfile/views/UploadMixin",["dojo/_base/declare","xide/widgets/_CSSMixin"],function(declare,_CSSMixin){return declare("xfiles.views.UploadMixin",[_CSSMixin],{cssClass:"uploadFilesList droparea dropareaHover",buildRendering:function(){this.inherited(arguments)},
dragEnter:function(e){e.preventDefault()},dragLeave:function(e){},dragOver:function(e){e.preventDefault()},drop:function(e){var dt=e.dataTransfer;if(dt){var files=dt.files;if(files&&files.length){e.preventDefault();if(this.delegate&&this.delegate.onBrowserFilesDropped)this.delegate.onBrowserFilesDropped(this,files);else 0&&console.warn("upload failed, invalid state : have no delegate or delegate::onBrowserFilesDropped doesnt exists")}else try{var url=e.dataTransfer.getData("text/plain");if(url&&url.length)this.delegate.onBrowserUrlDropped(this,
url);0&&console.log("dropped url "+url)}catch(err){console.error("dropping url failed "+err)}}},initDND:function(){var thiz=this;window.addEventListener("dragenter",function(e){thiz.dragEnter(e)},true);window.addEventListener("dragleave",function(e){thiz.dragLeave(e)},true);var dstNode=this.containerNode||this.domNode;if(dstNode){dstNode.addEventListener("dragover",function(e){thiz.dragOver(e)},false);dstNode.addEventListener("drop",function(e){e.preventDefault();thiz.drop(e)},false)}else console.error("have not drop destination")},
startup:function(){try{}catch(e){console.error("Upload Mixing startup failed : "+e.message)}this.initDND()}})})},"xblox/model/Referenced":function(){define("xblox/model/Referenced",["dojo/_base/declare","xide/mixins/ReferenceMixin"],function(declare,ReferenceMixin){return declare("xblox.model.Referenced",[ReferenceMixin],{reference:null,deserialize:function(value){if(!value||value.length==0)return{};try{return dojo.fromJson(value)}catch(e){return{}}},referencesToNodes:function(reference){var objects=
this.resolveReference(this.deserialize(reference||this.reference))}})})},"xblox/model/code/CallMethod":function(){define("xblox/model/code/CallMethod",["dojo/_base/declare","xblox/model/Block","xide/utils"],function(declare,Block,utils){return declare("xblox.model.code.CallMethod",[Block],{name:"Call Method",method:"",args:"",getContext:function(){if(this.scope.context&&this.scope.context.instance)return this.scope.context.instance;return null},_getArg:function(val){var _float=parseFloat(val);if(!isNaN(_float))return _float;
else{if(val==="true"||val==="false")return utils.toBoolean(val);return val}return val},_getArgs:function(){var result=utils.getJson(this.args);if(result!=null&&this.isArray(result))return result;if(this.isString(this.args)){var result=[];if(this.args.indexOf(",")!==-1){var _splitted=this.args.split(",");for(var i=0;i<_splitted.length;i++){var _float=parseFloat(_splitted[i]);if(!isNaN(_float))result.push(_float);else if(_splitted[i]==="true"||_splitted[i]==="false")result.push(utils.toBoolean(_splitted[i]));
else result.push(_splitted[i])}return result}else return[this._getArg(this.args)]}return null},solve:function(scope,settings){var context=this.getContext();if(context&&context[this.method]!=null){var res=[];var _fn=context[this.method];try{var _args=this._getArgs();var _res=_fn.apply(context,_args||[]);res=_res;this.onSuccess(this,settings);return res}catch(e){console.error("call method failed");this.onFailed(this,settings)}}else{this.onFailed(this,settings);return[]}return[]},toText:function(){var result=
this.getBlockIcon()+" "+this.name+" ";if(this.method)result+=this.method.substr(0,20);return result},getFields:function(){var fields=this.inherited(arguments);fields.push(this.utils.createCI("value",13,this.method,{group:"General",title:"Method",dst:"method"}));fields.push(this.utils.createCI("value",27,this.args,{group:"General",title:"Arguments",dst:"args"}));return fields},getBlockIcon:function(){return'\x3cspan class\x3d"fa-caret-square-o-right"\x3e\x3c/span\x3e'}})})},"dijit/form/_FormSelectWidget":function(){define("dijit/form/_FormSelectWidget",
["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(array,Deferred,aspect,sorter,declare,dom,domClass,kernel,lang,query,when,QueryResults,_FormValueWidget){var _FormSelectWidget=declare("dijit.form._FormSelectWidget",_FormValueWidget,{multiple:false,options:null,store:null,query:null,queryOptions:null,
labelAttr:"",onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,onLoadDeferred:null,getOptions:function(valueOrIdx){var opts=this.options||[];if(valueOrIdx==null)return opts;if(lang.isArray(valueOrIdx))return array.map(valueOrIdx,"return this.getOptions(item);",this);if(lang.isString(valueOrIdx))valueOrIdx={value:valueOrIdx};if(lang.isObject(valueOrIdx))if(!array.some(opts,function(option,idx){for(var a in valueOrIdx)if(!(a in option)||option[a]!=valueOrIdx[a])return false;valueOrIdx=idx;return true}))valueOrIdx=
-1;if(valueOrIdx>=0&&valueOrIdx<opts.length)return opts[valueOrIdx];return null},addOption:function(option){array.forEach([].concat(option),function(i){if(i&&lang.isObject(i))this.options.push(i)},this);this._loadChildren()},removeOption:function(valueOrIdx){var oldOpts=this.getOptions([].concat(valueOrIdx));array.forEach(oldOpts,function(option){if(option){this.options=array.filter(this.options,function(node){return node.value!==option.value||node.label!==option.label});this._removeOptionItem(option)}},
this);this._loadChildren()},updateOption:function(newOption){array.forEach([].concat(newOption),function(i){var oldOpt=this.getOptions({value:i.value}),k;if(oldOpt)for(k in i)oldOpt[k]=i[k]},this);this._loadChildren()},setStore:function(store,selectedValue,fetchArgs){var oStore=this.store;fetchArgs=fetchArgs||{};if(oStore!==store){var h;while(h=this._notifyConnections.pop())h.remove();if(!store.get){lang.mixin(store,{_oldAPI:true,get:function(id){var deferred=new Deferred;this.fetchItemByIdentity({identity:id,
onItem:function(object){deferred.resolve(object)},onError:function(error){deferred.reject(error)}});return deferred.promise},query:function(query,options){var deferred=new Deferred(function(){if(fetchHandle.abort)fetchHandle.abort()});deferred.total=new Deferred;var fetchHandle=this.fetch(lang.mixin({query:query,onBegin:function(count){deferred.total.resolve(count)},onComplete:function(results){deferred.resolve(results)},onError:function(error){deferred.reject(error)}},options));return new QueryResults(deferred)}});
if(store.getFeatures()["dojo.data.api.Notification"])this._notifyConnections=[aspect.after(store,"onNew",lang.hitch(this,"_onNewItem"),true),aspect.after(store,"onDelete",lang.hitch(this,"_onDeleteItem"),true),aspect.after(store,"onSet",lang.hitch(this,"_onSetItem"),true)]}this._set("store",store)}if(this.options&&this.options.length)this.removeOption(this.options);if(this._queryRes&&this._queryRes.close)this._queryRes.close();if(fetchArgs.query){this._set("query",fetchArgs.query);this._set("queryOptions",
fetchArgs.queryOptions)}if(store){this._loadingStore=true;this.onLoadDeferred=new Deferred;this._queryRes=store.query(this.query,this.queryOptions);when(this._queryRes,lang.hitch(this,function(items){if(this.sortByLabel&&!fetchArgs.sort&&items.length)if(store.getValue)items.sort(sorter.createSortFunction([{attribute:store.getLabelAttributes(items[0])[0]}],store));else{var labelAttr=this.labelAttr;items.sort(function(a,b){return a[labelAttr]>b[labelAttr]?1:b[labelAttr]>a[labelAttr]?-1:0})}if(fetchArgs.onFetch)items=
fetchArgs.onFetch.call(this,items,fetchArgs);array.forEach(items,function(i){this._addOptionForItem(i)},this);if(this._queryRes.observe)this._queryRes.observe(lang.hitch(this,function(object,deletedFrom,insertedInto){if(deletedFrom==insertedInto)this._onSetItem(object);else{if(deletedFrom!=-1)this._onDeleteItem(object);if(insertedInto!=-1)this._onNewItem(object)}}),true);this._loadingStore=false;this.set("value","_pendingValue"in this?this._pendingValue:selectedValue);delete this._pendingValue;if(!this.loadChildrenOnOpen)this._loadChildren();
else this._pseudoLoadChildren(items);this.onLoadDeferred.resolve(true);this.onSetStore()}),function(err){console.error("dijit.form.Select: "+err.toString());this.onLoadDeferred.reject(err)})}return oStore},_setValueAttr:function(newValue,priorityChange){if(!this._onChangeActive)priorityChange=null;if(this._loadingStore){this._pendingValue=newValue;return}if(newValue==null)return;if(lang.isArray(newValue))newValue=array.map(newValue,function(value){return lang.isObject(value)?value:{value:value}});
else if(lang.isObject(newValue))newValue=[newValue];else newValue=[{value:newValue}];newValue=array.filter(this.getOptions(newValue),function(i){return i&&i.value});var opts=this.getOptions()||[];if(!this.multiple&&(!newValue[0]||!newValue[0].value)&&!!opts.length)newValue[0]=opts[0];array.forEach(opts,function(opt){opt.selected=array.some(newValue,function(v){return v.value===opt.value})});var val=array.map(newValue,function(opt){return opt.value});if(typeof val=="undefined"||typeof val[0]=="undefined")return;
var disp=array.map(newValue,function(opt){return opt.label});this._setDisplay(this.multiple?disp:disp[0]);this.inherited(arguments,[this.multiple?val:val[0],priorityChange]);this._updateSelection()},_getDisplayedValueAttr:function(){var ret=array.map([].concat(this.get("selectedOptions")),function(v){if(v&&"label"in v)return v.label;else if(v)return v.value;return null},this);return this.multiple?ret:ret[0]},_setDisplayedValueAttr:function(label){this.set("value",this.getOptions(typeof label=="string"?
{label:label}:label))},_loadChildren:function(){if(this._loadingStore)return;array.forEach(this._getChildren(),function(child){child.destroyRecursive()});array.forEach(this.options,this._addOptionItem,this);this._updateSelection()},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var val=[].concat(this.value);if(val&&val[0]){var self=this;array.forEach(this._getChildren(),function(child){var isSelected=array.some(val,function(v){return child.option&&v===
child.option.value});if(isSelected&&!self.multiple)self.focusedChild=child;domClass.toggle(child.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),isSelected);child.domNode.setAttribute("aria-selected",isSelected?"true":"false")},this)}},_getValueFromOpts:function(){var opts=this.getOptions()||[];if(!this.multiple&&opts.length){var opt=array.filter(opts,function(i){return i.selected})[0];if(opt&&opt.value)return opt.value;else{opts[0].selected=true;return opts[0].value}}else if(this.multiple)return array.map(array.filter(opts,
function(i){return i.selected}),function(i){return i.value})||[];return""},_onNewItem:function(item,parentInfo){if(!parentInfo||!parentInfo.parent)this._addOptionForItem(item)},_onDeleteItem:function(item){var store=this.store;this.removeOption({value:store.getIdentity(item)})},_onSetItem:function(item){this.updateOption(this._getOptionObjForItem(item))},_getOptionObjForItem:function(item){var store=this.store,label=this.labelAttr&&this.labelAttr in item?item[this.labelAttr]:store.getLabel(item),
value=label?store.getIdentity(item):null;return{value:value,label:label,item:item}},_addOptionForItem:function(item){var store=this.store;if(store.isItemLoaded&&!store.isItemLoaded(item)){store.loadItem({item:item,onItem:function(i){this._addOptionForItem(i)},scope:this});return}var newOpt=this._getOptionObjForItem(item);this.addOption(newOpt)},constructor:function(params){this._oValue=(params||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,
false)},_fillContent:function(){if(!this.options)this.options=this.srcNodeRef?query("\x3e *",this.srcNodeRef).map(function(node){if(node.getAttribute("type")==="separator")return{value:"",label:"",selected:false,disabled:false};return{value:node.getAttribute("data-"+kernel._scopeName+"-value")||node.getAttribute("value"),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false}},this):[];if(!this.value)this._set("value",this._getValueFromOpts());
else if(this.multiple&&typeof this.value=="string")this._set("value",this.value.split(","))},postCreate:function(){this.inherited(arguments);aspect.after(this,"onChange",lang.hitch(this,"_updateSelection"));var store=this.store;if(store&&(store.getIdentity||store.getFeatures()["dojo.data.api.Identity"])){this.store=null;this.setStore(store,this._oValue)}},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){var h;while(h=this._notifyConnections.pop())h.remove();if(this._queryRes&&
this._queryRes.close)this._queryRes.close();this.inherited(arguments)},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:true})},_pseudoLoadChildren:function(){},onSetStore:function(){}});return _FormSelectWidget})},"dijit/form/_ComboBoxMenu":function(){define("dijit/form/_ComboBoxMenu",["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase",
"../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(declare,domClass,domStyle,keys,_WidgetBase,_TemplatedMixin,_ComboBoxMenuMixin,_ListMouseMixin){return declare("dijit.form._ComboBoxMenu",[_WidgetBase,_TemplatedMixin,_ListMouseMixin,_ComboBoxMenuMixin],{templateString:"\x3cdiv class\x3d'dijitReset dijitMenu' data-dojo-attach-point\x3d'containerNode' style\x3d'overflow: auto; overflow-x: hidden;' role\x3d'listbox'\x3e"+"\x3cdiv class\x3d'dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point\x3d'previousButton' role\x3d'option'\x3e\x3c/div\x3e"+
"\x3cdiv class\x3d'dijitMenuItem dijitMenuNextButton' data-dojo-attach-point\x3d'nextButton' role\x3d'option'\x3e\x3c/div\x3e"+"\x3c/div\x3e",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);if(!this.isLeftToRight()){domClass.add(this.previousButton,"dijitMenuItemRtl");domClass.add(this.nextButton,"dijitMenuItemRtl")}this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var item=this.ownerDocument.createElement("div");item.className="dijitReset dijitMenuItem"+
(this.isLeftToRight()?"":" dijitMenuItemRtl");item.setAttribute("role","option");return item},onHover:function(node){domClass.add(node,"dijitMenuItemHover")},onUnhover:function(node){domClass.remove(node,"dijitMenuItemHover")},onSelect:function(node){domClass.add(node,"dijitMenuItemSelected")},onDeselect:function(node){domClass.remove(node,"dijitMenuItemSelected")},_page:function(up){var scrollamount=0;var oldscroll=this.domNode.scrollTop;var height=domStyle.get(this.domNode,"height");if(!this.getHighlightedOption())this.selectNextNode();
while(scrollamount<height){var highlighted_option=this.getHighlightedOption();if(up){if(!highlighted_option.previousSibling||highlighted_option.previousSibling.style.display=="none")break;this.selectPreviousNode()}else{if(!highlighted_option.nextSibling||highlighted_option.nextSibling.style.display=="none")break;this.selectNextNode()}var newscroll=this.domNode.scrollTop;scrollamount+=(newscroll-oldscroll)*(up?-1:1);oldscroll=newscroll}},handleKey:function(evt){switch(evt.keyCode){case keys.DOWN_ARROW:this.selectNextNode();
return false;case keys.PAGE_DOWN:this._page(false);return false;case keys.UP_ARROW:this.selectPreviousNode();return false;case keys.PAGE_UP:this._page(true);return false;default:return true}}})})},"dijit/layout/_TabContainerBase":function(){require({cache:{"url:dijit/layout/templates/TabContainer.html":'\x3cdiv class\x3d"dijitTabContainer"\x3e\n\t\x3cdiv class\x3d"dijitTabListWrapper" data-dojo-attach-point\x3d"tablistNode"\x3e\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"tablistSpacer" class\x3d"dijitTabSpacer ${baseClass}-spacer"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTabPaneWrapper ${baseClass}-container" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\x3c/div\x3e\n'}});
define("dijit/layout/_TabContainerBase",["dojo/text!./templates/TabContainer.html","./StackContainer","./utils","../_TemplatedMixin","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(template,StackContainer,layoutUtils,_TemplatedMixin,declare,domClass,domGeometry,domStyle){return declare("dijit.layout._TabContainerBase",[StackContainer,_TemplatedMixin],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:template,postMixInProperties:function(){this.baseClass+=
this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&domStyle.set(this.srcNodeRef,"visibility","hidden");this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);if(!this.doLayout)domClass.add(this.domNode,"dijitTabContainerNoLayout");if(this.nested){domClass.add(this.domNode,"dijitTabContainerNested");domClass.add(this.tablist.containerNode,"dijitTabContainerTabListNested");
domClass.add(this.tablistSpacer,"dijitTabContainerSpacerNested");domClass.add(this.containerNode,"dijitTabPaneWrapperNested")}else domClass.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"))},_setupChild:function(tab){domClass.add(tab.domNode,"dijitTabPane");this.inherited(arguments)},startup:function(){if(this._started)return;this.tablist.startup();this.inherited(arguments)},layout:function(){if(!this._contentBox||typeof this._contentBox.l=="undefined")return;var sc=this.selectedChildWidget;
if(this.doLayout){var titleAlign=this.tabPosition.replace(/-h/,"");this.tablist.layoutAlign=titleAlign;var children=[this.tablist,{domNode:this.tablistSpacer,layoutAlign:titleAlign},{domNode:this.containerNode,layoutAlign:"client"}];layoutUtils.layoutChildren(this.domNode,this._contentBox,children);this._containerContentBox=layoutUtils.marginBox2contentBox(this.containerNode,children[2]);if(sc&&sc.resize)sc.resize(this._containerContentBox)}else{if(this.tablist.resize){var s=this.tablist.domNode.style;
s.width="0";var width=domGeometry.getContentBox(this.domNode).w;s.width="";this.tablist.resize({w:width})}if(sc&&sc.resize)sc.resize()}},destroy:function(preserveDom){if(this.tablist)this.tablist.destroy(preserveDom);this.inherited(arguments)}})})},"xide/widgets/ActionSelectWidget":function(){define(["dojo/_base/declare","dojo/dom-class","xide/widgets/TemplatedWidgetBase","dijit/MenuItem","dojo/aspect"],function(declare,domClass,TemplatedWidgetBase,MenuItem,aspect){return declare("xide.widgets.ActionSelectWidget",
[TemplatedWidgetBase],{wButton:null,wThumb:null,wList:null,wTree:null,layout:null,menu:null,_didCreateDefaultItems:false,addJQueryClasses:true,menuItems:null,iconClass:"fa-code",templateString:"\x3cdiv\x3e"+"\x3cdiv class\x3d'' data-dojo-type\x3d'dijit.form.DropDownButton' data-dojo-props\x3d\"iconClass:'${!iconClass}'\" data-dojo-attach-point\x3d'wButton'\x3e"+"\x3cspan\x3e\x3c/span\x3e"+"\x3cdiv data-dojo-attach-point\x3d'menu' data-dojo-type\x3d'dijit.Menu' style\x3d'display: none;'\x3e"+"\x3c/div\x3e"+
"\x3c/div\x3e"+"\x3c/div\x3e",_patchMenu:function(widget){aspect.after(widget,"onOpen",function(){var dst=this._popupWrapper;if(dst)domClass.add(dst,"ui-menu ui-widget ui-widget-content")})},open:function(){this.wButton.domNode.focus();this.wButton.openDropDown();if(this.firstItem)this.firstItem.focus()},_defaultItems:function(){return[]},onMenuItemClick:function(menuItem){if(menuItem.item.handler){menuItem.item.handler();return}try{this.delegate.addItem(menuItem)}catch(e){debugger}},fixButton:function(button){if(button&&
button.iconNode){domClass.add(button.domNode,"ui-menu-item");domClass.remove(button.iconNode,"dijitReset");domClass.add(button.iconNode,"actionToolbarButtonElusive")}},_addHandler:function(menuItem,item){var thiz=this;dojo.connect(menuItem,"onClick",function(){thiz.onMenuItemClick(menuItem)})},createMenuItem:function(itemData,index){var icon=itemData.icon||itemData.iconClass||"fa-cloud";var subItems=itemData.items;var thiz=this;if(subItems&&subItems.length>0){var pSubMenu=new dijit.Menu({parentMenu:this.menu});
this._patchMenu(pSubMenu);for(var i=0;i<subItems.length;i++){var subItem=new MenuItem({item:subItems[i],iconClass:subItems[i].iconClass,label:subItems[i].name,owner:itemData});pSubMenu.addChild(subItem);this._addHandler(subItem,subItems[i])}this.menu.addChild(new dijit.PopupMenuItem({label:itemData.label||itemData.name,popup:pSubMenu,iconClass:icon}));return pSubMenu}else{var menuItem=new MenuItem({item:itemData,iconClass:icon,label:itemData.label||itemData.name});this.menu.addChild(menuItem);dojo.connect(menuItem,
"onClick",function(){thiz.onMenuItemClick(menuItem)});this.fixButton(menuItem);return menuItem}},_createDefaultItems:function(){this.menuItems=[];this.firstItem=null;var actions=[];for(var i=0;i<actions.length;i++){var menuItem=this.createMenuItem(actions[i],i+1);if(!this.firstItem)this.firstItem=menuItem;this.menuItems.push(menuItem)}this._didCreateDefaultItems=true},onOpen:function(){if(!this._didCreateDefaultItems)this._createDefaultItems()},startup:function(){if(this._started)return;this.menuItems=
[];try{this.inherited(arguments);if(!this._didCreateDefaultItems)this._createDefaultItems();if(this.addJQueryClasses)domClass.add(this.menu.containerNode,"ui-menu ui-widget ui-widget-content ui-corner-all");this.fixButton(this.wButton);this._patchMenu(this.menu)}catch(e){debugger}}})})},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin",
"./_KeyNavMixin"],function(array,declare,domAttr,kernel,keys,lang,registry,_Container,_FocusMixin,_KeyNavMixin){return declare("dijit._KeyNavContainer",[_FocusMixin,_KeyNavMixin,_Container],{connectKeyNavHandlers:function(prevKeyCodes,nextKeyCodes){var keyCodes=this._keyNavCodes={};var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");array.forEach(prevKeyCodes,function(code){keyCodes[code]=prev});array.forEach(nextKeyCodes,function(code){keyCodes[code]=next});keyCodes[keys.HOME]=
lang.hitch(this,"focusFirstChild");keyCodes[keys.END]=lang.hitch(this,"focusLastChild")},startupKeyNavChildren:function(){kernel.deprecated("startupKeyNavChildren() call no longer needed","","2.0")},startup:function(){this.inherited(arguments);array.forEach(this.getChildren(),lang.hitch(this,"_startupChild"))},addChild:function(widget,insertIndex){this.inherited(arguments);this._startupChild(widget)},_startupChild:function(widget){widget.set("tabIndex","-1")},_getFirst:function(){var children=this.getChildren();
return children.length?children[0]:null},_getLast:function(){var children=this.getChildren();return children.length?children[children.length-1]:null},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true)},childSelector:function(node){var node=registry.byNode(node);return node&&node.getParent()==this}})})},"xide/manager/SettingsManager":function(){define(["dojo/_base/declare",
"./ServerActionBase","xide/utils","xide/manager/ManagerBase"],function(declare,ServerActionBase,utils,ManagerBase){return declare("xide.manager.SettingsManager",[ManagerBase,ServerActionBase],{serviceClass:"XApp_Store",settingsStore:null,settingsDataAll:null,section:"settings",getStore:function(){return this.settingsStore},_createStore:function(data){var storeData={identifier:"id",items:data};this.settingsStore=new dojo.data.ItemFileWriteStore({data:storeData,hierarchical:false})},onSettingsReceived:function(data){this.settingsDataAll=
data;if(!data){console.error("have no settings data!");this._createStore([]);return}var _a=data[""+this.section];this._createStore(_a)},replace:function(path,query,operation,newValue,readyCB){var thiz=this;var defered=this.serviceObject[this.serviceClass].set(this.store,path||".",query,operation,newValue);var cb=function(res){if(readyCB)readyCB(res)};defered.addCallback(cb)},read:function(section,path,query,readyCB){try{this.callMethodEx(this.serviceClass,"get",[section,path,query],readyCB,false)}catch(e){}},
has:function(section,path,query,data,readyCB){},update:function(section,path,query,data,decode,readyCB){try{this.callMethodEx(this.serviceClass,"update",[section||this.section,path,query,data,decode],readyCB,false)}catch(e){}},write:function(section,path,query,data,decode,readyCB){try{var itemLocal=utils.queryStoreEx(this.settingsStore,{id:data.id},true,true);if(itemLocal)return this.update(section,path,{id:data.id},data.data,decode,readyCB);else return this.callMethodEx(this.serviceClass,"set",[section||
this.section,path,query,data,decode],readyCB,false)}catch(e){}},init:function(){var thiz=this;var _cb=function(data){thiz.onSettingsReceived(data)};this.read(this.section,".",null,_cb)}})})},"dijit/form/DataList":function(){define("dijit/form/DataList",["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(declare,dom,lang,query,MemoryStore,registry){function toItem(option){return{id:option.value,value:option.value,name:lang.trim(option.innerText||
option.textContent||"")}}return declare("dijit.form.DataList",MemoryStore,{constructor:function(params,srcNodeRef){this.domNode=dom.byId(srcNodeRef);lang.mixin(this,params);if(this.id)registry.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:query("option",this.domNode).map(toItem)}])},destroy:function(){registry.remove(this.id)},fetchSelectedItem:function(){var option=query("\x3e option[selected]",this.domNode)[0]||query("\x3e option",this.domNode)[0];return option&&toItem(option)}})})},
"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip"\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\n\x3e\x3c/div\x3e\n'}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(array,declare,fx,dom,domClass,domGeometry,domStyle,lang,mouse,on,has,manager,place,_Widget,_TemplatedMixin,BackgroundIframe,template,dijit){var MasterTooltip=declare("dijit._MasterTooltip",[_Widget,_TemplatedMixin],{duration:manager.defaultDuration,templateString:template,
postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new BackgroundIframe(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")})},show:function(innerHTML,aroundNode,position,rtl,textDir){if(this.aroundNode&&this.aroundNode===aroundNode&&this.containerNode.innerHTML==innerHTML)return;if(this.fadeOut.status()==
"playing"){this._onDeck=arguments;return}this.containerNode.innerHTML=innerHTML;if(textDir)this.set("textDir",textDir);this.containerNode.align=rtl?"right":"left";var pos=place.around(this.domNode,aroundNode,position&&position.length?position:Tooltip.defaultPosition,!rtl,lang.hitch(this,"orient"));var aroundNodeCoords=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=aroundNodeCoords.y+(aroundNodeCoords.h-this.connectorNode.offsetHeight>>
1)-pos.y+"px";this.connectorNode.style.left=""}else if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M")this.connectorNode.style.left=aroundNodeCoords.x+(aroundNodeCoords.w-this.connectorNode.offsetWidth>>1)-pos.x+"px";else{this.connectorNode.style.left="";this.connectorNode.style.top=""}domStyle.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=aroundNode},orient:function(node,aroundCorner,tooltipCorner,spaceAvailable,aroundNodeCoords){this.connectorNode.style.top=
"";var heightAvailable=spaceAvailable.h,widthAvailable=spaceAvailable.w;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[aroundCorner+"-"+tooltipCorner];this.domNode.style.width=
"auto";var size=domGeometry.position(this.domNode);if(has("ie")==9)size.w+=2;var width=Math.min(Math.max(widthAvailable,1),size.w);domGeometry.setMarginBox(this.domNode,{w:width});if(tooltipCorner.charAt(0)=="B"&&aroundCorner.charAt(0)=="B"){var bb=domGeometry.position(node);var tooltipConnectorHeight=this.connectorNode.offsetHeight;if(bb.h>heightAvailable){var aroundNodePlacement=heightAvailable-(aroundNodeCoords.h+tooltipConnectorHeight>>1);this.connectorNode.style.top=aroundNodePlacement+"px";
this.connectorNode.style.bottom=""}else{this.connectorNode.style.bottom=Math.min(Math.max(aroundNodeCoords.h/2-tooltipConnectorHeight/2,0),bb.h-tooltipConnectorHeight)+"px";this.connectorNode.style.top=""}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom=""}return Math.max(0,size.w-widthAvailable)},_onShow:function(){if(has("ie"))this.domNode.style.filter=""},hide:function(aroundNode){if(this._onDeck&&this._onDeck[1]==aroundNode)this._onDeck=null;else if(this.aroundNode===aroundNode){this.fadeIn.stop();
this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play()}else;},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null}}});if(0)MasterTooltip.extend({_setAutoTextDir:function(node){this.applyTextDir(node);array.forEach(node.children,function(child){this._setAutoTextDir(child)},this)},_setTextDirAttr:function(textDir){this._set("textDir",textDir);if(textDir=="auto")this._setAutoTextDir(this.containerNode);
else this.containerNode.dir=this.textDir}});dijit.showTooltip=function(innerHTML,aroundNode,position,rtl,textDir){if(position)position=array.map(position,function(val){return{after:"after-centered",before:"before-centered"}[val]||val});if(!Tooltip._masterTT)dijit._masterTT=Tooltip._masterTT=new MasterTooltip;return Tooltip._masterTT.show(innerHTML,aroundNode,position,rtl,textDir)};dijit.hideTooltip=function(aroundNode){return Tooltip._masterTT&&Tooltip._masterTT.hide(aroundNode)};var Tooltip=declare("dijit.Tooltip",
_Widget,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(newId){array.forEach(this._connections||[],function(nested){array.forEach(nested,function(handle){handle.remove()})},this);this._connectIds=array.filter(lang.isArrayLike(newId)?newId:newId?[newId]:[],function(id){return dom.byId(id,this.ownerDocument)},this);this._connections=array.map(this._connectIds,function(id){var node=dom.byId(id,this.ownerDocument),selector=this.selector,delegatedEvent=selector?
function(eventType){return on.selector(selector,eventType)}:function(eventType){return eventType},self=this;return[on(node,delegatedEvent(mouse.enter),function(){self._onHover(this)}),on(node,delegatedEvent("focusin"),function(){self._onHover(this)}),on(node,delegatedEvent(mouse.leave),lang.hitch(self,"_onUnHover")),on(node,delegatedEvent("focusout"),lang.hitch(self,"_onUnHover"))]},this);this._set("connectId",newId)},addTarget:function(node){var id=node.id||node;if(array.indexOf(this._connectIds,
id)==-1)this.set("connectId",this._connectIds.concat(id))},removeTarget:function(node){var id=node.id||node,idx=array.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds)}},buildRendering:function(){this.inherited(arguments);domClass.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var ids=this.connectId;array.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this)},getContent:function(node){return this.label||
this.domNode.innerHTML},_onHover:function(target){if(!this._showTimer)this._showTimer=this.defer(function(){this.open(target)},this.showDelay)},_onUnHover:function(){if(this._showTimer){this._showTimer.remove();delete this._showTimer}this.close()},open:function(target){if(this._showTimer){this._showTimer.remove();delete this._showTimer}var content=this.getContent(target);if(!content)return;Tooltip.show(content,target,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=target;this.onShow(target,
this.position)},close:function(){if(this._connectNode){Tooltip.hide(this._connectNode);delete this._connectNode;this.onHide()}if(this._showTimer){this._showTimer.remove();delete this._showTimer}},onShow:function(){},onHide:function(){},destroy:function(){this.close();array.forEach(this._connections||[],function(nested){array.forEach(nested,function(handle){handle.remove()})},this);this.inherited(arguments)}});Tooltip._MasterTooltip=MasterTooltip;Tooltip.show=dijit.showTooltip;Tooltip.hide=dijit.hideTooltip;
Tooltip.defaultPosition=["after-centered","before-centered"];return Tooltip})},"xwordpress/manager/WorkflowManager":function(){define("xwordpress/manager/WorkflowManager",["dojo/_base/declare","xide/utils","xide/types","xide/manager/WorkflowManager","xwordpress/views/MainView"],function(declare,utils,types,WorkflowManager,MainView){return declare("xwordpress.manager.WorkflowManager",[WorkflowManager],{init:function(){this.adjustWP()},adjustWP:function(){var footer=dojo.byId("wpfooter");if(footer)utils.destroyWidget(footer);
var collapse=dojo.byId("collapse-button");var thiz=this;if(collapse)dojo.connect(collapse,"click",function(){setTimeout(function(){thiz.publish(types.EVENTS.RESIZE,{});thiz.ctx.application.repaint()},200)})},initWidgets:function(config){this.inherited(arguments);xfile.getContext().fileManager=this.ctx.getFileManager();xfile.getContext().scriptManager=this.ctx.getScriptManager();xfile.getContext().scriptManager.config=config;xfile.getContext().fileManager.config=config;this.adjustWP();if(!this.mainView){var parentNode=
dojo.byId(config.ROOT_NODE||"xFileRoot");if(parentNode){this.mainView=new MainView({ctx:this.ctx,config:config,panelManager:this.ctx.getPanelManager(),persistent:true},parentNode);this.mainView.startup();this.ctx.mainView=this.mainView;this.ctx.getPanelManager().rootView=this.mainView;this.mainView.initWithConfig(config)}}}})})},"dijit/PopupMenuItem":function(){define("dijit/PopupMenuItem",["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],
function(declare,domStyle,lang,query,pm,registry,MenuItem){return declare("dijit.PopupMenuItem",MenuItem,{_fillContent:function(){if(this.srcNodeRef){var nodes=query("*",this.srcNodeRef);this.inherited(arguments,[nodes[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(params,focus){var popup=this.popup;pm.open(lang.delegate(params,{popup:this.popup,around:this.domNode}));if(focus&&popup.focus)popup.focus()},_closePopup:function(){pm.close(this.popup);this.popup.parentMenu=null},startup:function(){if(this._started)return;
this.inherited(arguments);if(!this.popup){var node=query("[widgetId]",this.dropDownContainer)[0];this.popup=registry.byNode(node)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper)domStyle.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")},destroyDescendants:function(preserveDom){if(this.popup){if(!this.popup._destroyed)this.popup.destroyRecursive(preserveDom);delete this.popup}this.inherited(arguments)}})})},
"dijit/main":function(){define("dijit/main",["dojo/_base/kernel"],function(dojo){return dojo.dijit})},"dijit/layout/ContentPane":function(){define("dijit/layout/ContentPane",["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/i18n!../nls/loading","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/_base/xhr","dojo/i18n","dojo/when"],function(kernel,lang,_Widget,
_Container,_ContentPaneResizeMixin,string,html,nlsLoading,array,declare,Deferred,dom,domAttr,domConstruct,xhr,i18n,when){return declare("dijit.layout.ContentPane",[_Widget,_Container,_ContentPaneResizeMixin],{href:"",content:"",extractContent:false,parseOnLoad:true,parserScope:kernel._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",
errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:true,template:false,markupFactory:function(params,node,ctor){var self=new ctor(params,node);return!self.href&&self._contentSetter&&self._contentSetter.parseDeferred&&!self._contentSetter.parseDeferred.isFulfilled()?self._contentSetter.parseDeferred.then(function(){return self}):
self},create:function(params,srcNodeRef){if((!params||!params.template)&&srcNodeRef&&!("href"in params)&&!("content"in params)){srcNodeRef=dom.byId(srcNodeRef);var df=srcNodeRef.ownerDocument.createDocumentFragment();while(srcNodeRef.firstChild)df.appendChild(srcNodeRef.firstChild);params=lang.delegate(params,{content:df})}this.inherited(arguments,[params,srcNodeRef])},postMixInProperties:function(){this.inherited(arguments);var messages=i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=
string.substitute(this.loadingMessage,messages);this.errorMessage=string.substitute(this.errorMessage,messages)},buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode;this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);if(this._contentSetter)array.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true}},this)},_startChildren:function(){array.forEach(this.getChildren(),
function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true}});if(this._contentSetter)array.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true}},this)},setHref:function(href){kernel.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",href)},_setHrefAttr:function(href){this.cancel();
this.onLoadDeferred=new Deferred(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._set("href",href);if(this.preload||this._created&&this._isShown())this._load();else this._hrefChanged=true;return this.onLoadDeferred},setContent:function(data){kernel.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",data)},_setContentAttr:function(data){this._set("href","");this.cancel();this.onLoadDeferred=
new Deferred(lang.hitch(this,"cancel"));if(this._created)this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._setContent(data||"");this._isDownloaded=false;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){if(this._xhrDfd&&this._xhrDfd.fired==-1)this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(preserveDom){if(this._beingDestroyed)return;
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href)if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new Deferred(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),true);var self=this;var getArgs={preventCache:this.preventCache||this.refreshOnShow,
url:this.href,handleAs:"text"};if(lang.isObject(this.ioArgs))lang.mixin(getArgs,this.ioArgs);var hand=this._xhrDfd=(this.ioMethod||xhr.get)(getArgs),returnedHtml;hand.then(function(html){returnedHtml=html;try{self._isDownloaded=true;return self._setContent(html,false)}catch(err){self._onError("Content",err)}},function(err){if(!hand.canceled)self._onError("Download",err);delete self._xhrDfd;return err}).then(function(){self.onDownloadEnd();delete self._xhrDfd;return returnedHtml});delete this._hrefChanged},
_onLoadHandler:function(data){this._set("isLoaded",true);try{this.onLoadDeferred.resolve(data)}catch(e){console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message)}},_onUnloadHandler:function(){this._set("isLoaded",false);try{this.onUnload()}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message)}},destroyDescendants:function(preserveDom){if(this.isLoaded)this._onUnloadHandler();var setter=this._contentSetter;array.forEach(this.getChildren(),
function(widget){if(widget.destroyRecursive)widget.destroyRecursive(preserveDom);else if(widget.destroy)widget.destroy(preserveDom);widget._destroyed=true});if(setter){array.forEach(setter.parseResults,function(widget){if(!widget._destroyed){if(widget.destroyRecursive)widget.destroyRecursive(preserveDom);else if(widget.destroy)widget.destroy(preserveDom);widget._destroyed=true}});delete setter.parseResults}if(!preserveDom)domConstruct.empty(this.containerNode);delete this._singleChild},_setContent:function(cont,
isFakeContent){this.destroyDescendants();var setter=this._contentSetter;if(!(setter&&setter instanceof html._ContentSetter))setter=this._contentSetter=new html._ContentSetter({node:this.containerNode,_onError:lang.hitch(this,this._onError),onContentError:lang.hitch(this,function(e){var errMess=this.onContentError(e);try{this.containerNode.innerHTML=errMess}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e)}})});var setterParams=lang.mixin({cleanContent:this.cleanContent,
extractContent:this.extractContent,parseContent:!cont.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});var p=setter.set(lang.isObject(cont)&&cont.domNode?cont.domNode:cont,setterParams);var self=this;return when(p&&p.then?p:setter.parseDeferred,function(){delete self._contentSetterParams;if(!isFakeContent){if(self._started){self._startChildren();self._scheduleLayout()}self._onLoadHandler(cont)}})},
_onError:function(type,err,consoleText){this.onLoadDeferred.reject(err);var errText=this["on"+type+"Error"].call(this,err);if(consoleText)console.error(consoleText,err);else if(errText)this._setContent(errText,true)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"xblox/widgets/BlockGridRowEditor":function(){define("xblox/widgets/BlockGridRowEditor",
["dojo/_base/declare","dojo/dom-class","dojo/dom-construct","xide/types","dijit/_Widget","xide/widgets/TemplatedWidgetBase","xide/widgets/ToolTipMixin","xide/mixins/ReloadMixin","xide/mixins/EventedMixin"],function(declare,domClass,domConstruct,types,_Widget,TemplatedWidgetBase,ToolTipMixin,ReloadMixin,EventedMixin){return declare("xblox.widgets.BlockGridRowEditor",[_Widget,TemplatedWidgetBase,EventedMixin,ReloadMixin,ToolTipMixin],{_didRenderBlock:false,containerNode:null,debug:true,highlightDelay:200,
_isHighLighting:false,textNode:null,getRootId:function(){return this.id},getTooltipNode:function(){return this.containerNode},templateString:"\x3cdiv data-dojo-attach-point\x3d'root' class\x3d'' style\x3d''\x3e"+"\x3cdiv data-dojo-attach-point\x3d'containerNode'\x3eno set\x3c/div\x3e"+"\x3c/div\x3e",set:function(what,value){this.inherited(arguments)},get:function(what){return this.inherited(arguments)},renderBlock:function(block){var text="render block : "+block.declaredClass;if(!this.containerNode)return;
dojo.empty(this.containerNode);var blockText="";if(block.toText){blockText=block.toText();var textItem=domConstruct.create("span",{innerHTML:blockText});this.containerNode.appendChild(textItem);this.textNode=textItem;if(block.enabled==false)domClass.add(textItem,"disabledBlock")}if(this.debug);},onReloaded:function(){this._didRenderBlock=false;if(this.containerNode)dojo.empty(this.containerNode);this.renderBlock(this.object)},onRunBlock:function(evt){if(this._isHighLighting);this._isHighLighting=
true;try{if(evt&&evt.callee==this.object&&this.root){domClass.remove(this.root,"failedBlock");domClass.remove(this.root,"activeBlock");domClass.remove(this.root,"successBlock");var thiz=this;domClass.add(this.root,"activeBlock");setTimeout(function(){domClass.remove(thiz.root,"activeBlock");thiz._isHighLighting=false},this.highlightDelay)}}catch(e){}},onRunBlockFailed:function(evt){if(this._isHighLighting);this._isHighLighting=true;try{if(evt&&evt.callee==this.object&&this.root){domClass.remove(this.root,
"failedBlock");domClass.remove(this.root,"activeBlock");domClass.remove(this.root,"successBlock");var thiz=this;domClass.add(this.root,"failedBlock");setTimeout(function(){domClass.remove(thiz.root,"failedBlock");thiz._isHighLighting=false},this.highlightDelay)}}catch(e){}},onRunBlockSuccess:function(evt){if(this._isHighLighting);this._isHighLighting=true;try{if(evt&&evt.callee==this.object&&this.root){domClass.remove(this.root,"failedBlock");domClass.remove(this.root,"activeBlock");domClass.remove(this.root,
"successBlock");var thiz=this;domClass.add(this.root,"successBlock");setTimeout(function(){domClass.remove(thiz.root,"successBlock");thiz._isHighLighting=false},this.highlightDelay)}}catch(e){}},startup:function(){this.inherited(arguments);if(!this._didRenderBlock)if(this.object){this.renderBlock(this.object);this.initToolTip(this.object.description)}else console.error("have no object!!!");this._didRenderBlock=true;this.initReload();this.subscribe(types.EVENTS.ON_RUN_BLOCK,this.onRunBlock);this.subscribe(types.EVENTS.ON_RUN_BLOCK_FAILED,
this.onRunBlockFailed);this.subscribe(types.EVENTS.ON_RUN_BLOCK_SUCCESS,this.onRunBlockSuccess)}})})},"xfile/views/FileGridKeyboard":function(){define("xfile/views/FileGridKeyboard",["dojo/_base/declare","dojo/aspect","dojo/on","dojo/_base/lang","dojo/has","put-selector/put","dojo/_base/Deferred","dojo/_base/sniff"],function(declare,aspect,on,lang,has,put,Deferred){var delegatingInputTypes={checkbox:1,radio:1,button:1},hasGridCellClass=/\bdgrid-cell\b/,hasGridRowClass=/\bdgrid-row\b/;has.add("dom-contains",
function(global,doc,element){return!!element.contains});function contains(parent,node){if(has("dom-contains"))return parent.contains(node);else return parent.compareDocumentPosition(node)&8}var Keyboard=declare(null,{left:function(cell,steps){if(!cell.element)cell=this.cell(cell);if(cell&&cell.row)cell=cell.row;var nextNode=this.cell(this._move(cell,-(steps||1),"dgrid-row"));return nextNode},right:function(cell,steps){if(!cell.element)cell=this.cell(cell);if(cell&&cell.row)cell=cell.row;var nextNode=
this.cell(this._move(cell,steps||1,"dgrid-row"));return nextNode},pageSkip:10,tabIndex:0,currentRows:null,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);if(!this.keyMap)this.keyMap=lang.mixin({},Keyboard.defaultKeyMap);if(!this.headerKeyMap)this.headerKeyMap=lang.mixin({},Keyboard.defaultHeaderKeyMap)},postCreate:function(){this.inherited(arguments);var grid=this;this.currentRows=[];function handledEvent(event){var target=event.target;return target.type&&(!delegatingInputTypes[target.type]||
event.keyCode==32)}function enableNavigation(areaNode){var cellNavigation=grid.cellNavigation,isFocusableClass=cellNavigation?hasGridCellClass:hasGridRowClass,isHeader=areaNode===grid.headerNode,initialNode=areaNode;function initHeader(){if(grid._focusedHeaderNode)grid._focusedHeaderNode.tabIndex=-1;if(grid.showHeader){grid._focusedHeaderNode=initialNode=cellNavigation?grid.headerNode.getElementsByTagName("th")[0]:grid.headerNode;if(initialNode)initialNode.tabIndex=grid.tabIndex}}if(isHeader){initHeader();
aspect.after(grid,"renderHeader",initHeader,true)}else aspect.after(grid,"renderArray",function(ret){return Deferred.when(ret,function(ret){var focusedNode=grid._focusedNode||initialNode;if(isFocusableClass.test(focusedNode.className)&&contains(areaNode,focusedNode))return ret;for(var i=0,elements=areaNode.getElementsByTagName("*"),element;element=elements[i];++i)if(isFocusableClass.test(element.className)){focusedNode=grid._focusedNode=element;break}focusedNode.tabIndex=grid.tabIndex;return ret})});
grid._listeners.push(on(areaNode,"mousedown",function(event){if(!handledEvent(event))grid._focusOnNode(event.target,isHeader,event)}));grid._listeners.push(on(areaNode,"keydown",function(event){if(event.metaKey||event.altKey)return;var handler=grid[isHeader?"headerKeyMap":"keyMap"][event.keyCode];if(handler&&!handledEvent(event))handler.call(grid,event)}))}if(this.tabableHeader){enableNavigation(this.headerNode);on(this.headerNode,"dgrid-cellfocusin",function(){grid.scrollTo({x:this.scrollLeft})})}enableNavigation(this.contentNode)},
removeRow:function(rowElement){if(!this._focusedNode)return this.inherited(arguments);var self=this,isActive=document.activeElement===this._focusedNode,focusedTarget=this[this.cellNavigation?"cell":"row"](this._focusedNode),focusedRow=focusedTarget.row||focusedTarget,sibling;rowElement=rowElement.element||rowElement;if(rowElement===focusedRow.element){sibling=this.down(focusedRow,true);if(!sibling||sibling.element===rowElement)sibling=this.up(focusedRow,true);this._removedFocus={active:isActive,rowId:focusedRow.id,
columnId:focusedTarget.column&&focusedTarget.column.id,siblingId:!sibling||sibling.element===rowElement?undefined:sibling.id};setTimeout(function(){if(self._removedFocus)self._restoreFocus(focusedRow.id)},0);this._focusedNode=null}this.inherited(arguments)},onStoreChange:function(){this.currentRows=[]},insertRow:function(object){var rowElement=this.inherited(arguments);if(object&&rowElement)this.currentRows.push({data:object,element:rowElement});if(this._removedFocus&&!this._removedFocus.wait)this._restoreFocus(rowElement);
return rowElement},_restoreFocus:function(row){var focusInfo=this._removedFocus,newTarget;row=row&&this.row(row);newTarget=row&&row.element&&row.id===focusInfo.rowId?row:typeof focusInfo.siblingId!=="undefined"&&this.row(focusInfo.siblingId);if(newTarget&&newTarget.element){if(!newTarget.element.parentNode.parentNode){focusInfo.wait=true;return}newTarget=typeof focusInfo.columnId!=="undefined"?this.cell(newTarget,focusInfo.columnId):newTarget;if(focusInfo.active)this.focus(newTarget);else{put(newTarget.element,
".dgrid-focus");newTarget.element.tabIndex=this.tabIndex}}delete this._removedFocus},addKeyHandler:function(key,callback,isHeader){return aspect.after(this[isHeader?"headerKeyMap":"keyMap"],key,callback,true)},_focusOnNode:function(element,isHeader,event){var focusedNodeProperty="_focused"+(isHeader?"Header":"")+"Node",focusedNode=this[focusedNodeProperty],cellOrRowType=this.cellNavigation?"cell":"row",cell=this[cellOrRowType](element),inputs,input,numInputs,inputFocused,i;element=cell&&cell.element;
if(!element)return;if(this.cellNavigation){inputs=element.getElementsByTagName("input");for(i=0,numInputs=inputs.length;i<numInputs;i++){input=inputs[i];if((input.tabIndex!=-1||"lastValue"in input)&&!input.disabled){if(has("ie")<8)input.style.position="relative";input.focus();if(has("ie")<8)input.style.position="";inputFocused=true;break}}}event=lang.mixin({grid:this},event);if(event.type)event.parentType=event.type;if(!event.bubbles)event.bubbles=true;if(focusedNode){put(focusedNode,"!dgrid-focus[!tabIndex]");
if(has("ie")<8)focusedNode.style.position="";event[cellOrRowType]=this[cellOrRowType](focusedNode);on.emit(element,"dgrid-cellfocusout",event)}focusedNode=this[focusedNodeProperty]=element;event[cellOrRowType]=cell;if(!inputFocused){if(has("ie")<8)element.style.position="relative";element.tabIndex=this.tabIndex;element.focus()}put(element,".dgrid-focus");on.emit(focusedNode,"dgrid-cellfocusin",event)},focusHeader:function(element){this._focusOnNode(element||this._focusedHeaderNode,true)},focus:function(element){this._focusOnNode(element||
this._focusedNode,false)}});var moveFocusVertical=Keyboard.moveFocusVertical=function(event,steps){var cellNavigation=this.cellNavigation,target=this[cellNavigation?"cell":"row"](event),columnId=cellNavigation&&target.column.id,next=this.down(this._focusedNode,steps,true);if(cellNavigation)next=this.cell(next,columnId);this._focusOnNode(next,false,event);event.preventDefault()};var moveFocusUp=Keyboard.moveFocusUp=function(event){moveFocusVertical.call(this,event,-1)};var moveFocusDown=Keyboard.moveFocusDown=
function(event){moveFocusVertical.call(this,event,1)};var moveFocusPageUp=Keyboard.moveFocusPageUp=function(event){moveFocusVertical.call(this,event,-this.pageSkip)};var moveFocusPageDown=Keyboard.moveFocusPageDown=function(event){moveFocusVertical.call(this,event,this.pageSkip)};var moveFocusHorizontal=Keyboard.moveFocusHorizontal=function(event,steps){var isHeader=!this.row(event);var currentNode=this["_focused"+(isHeader?"Header":"")+"Node"];var nextNode=this.right(currentNode,steps);if(nextNode&&
nextNode.row)nextNode=nextNode.row;this._focusOnNode(nextNode,isHeader,event);event.preventDefault()};var moveFocusLeft=Keyboard.moveFocusLeft=function(event){moveFocusHorizontal.call(this,event,-1)};var moveFocusRight=Keyboard.moveFocusRight=function(event){moveFocusHorizontal.call(this,event,1)};var moveHeaderFocusEnd=Keyboard.moveHeaderFocusEnd=function(event,scrollToBeginning){var nodes;if(this.cellNavigation){nodes=this.headerNode.getElementsByTagName("th");this._focusOnNode(nodes[scrollToBeginning?
0:nodes.length-1],true,event)}event.preventDefault()};var moveHeaderFocusHome=Keyboard.moveHeaderFocusHome=function(event){moveHeaderFocusEnd.call(this,event,true)};var moveFocusEnd=Keyboard.moveFocusEnd=function(event,scrollToTop){var self=this,cellNavigation=this.cellNavigation,contentNode=this.contentNode,contentPos=scrollToTop?0:contentNode.scrollHeight,scrollPos=contentNode.scrollTop+contentPos,endChild=contentNode[scrollToTop?"firstChild":"lastChild"],hasPreload=endChild.className.indexOf("dgrid-preload")>
-1,endTarget=hasPreload?endChild[(scrollToTop?"next":"previous")+"Sibling"]:endChild,endPos=endTarget.offsetTop+(scrollToTop?0:endTarget.offsetHeight),handle;if(hasPreload){while(endTarget&&endTarget.className.indexOf("dgrid-row")<0)endTarget=endTarget[(scrollToTop?"next":"previous")+"Sibling"];if(!endTarget)return}if(!hasPreload||endChild.offsetHeight<1){if(cellNavigation)endTarget=this.cell(endTarget,this.cell(event).column.id);this._focusOnNode(endTarget,false,event)}else{if(!has("dom-addeventlistener"))event=
lang.mixin({},event);handle=aspect.after(this,"renderArray",function(rows){handle.remove();return Deferred.when(rows,function(rows){var target=rows[scrollToTop?0:rows.length-1];if(cellNavigation)target=self.cell(target,self.cell(event).column.id);self._focusOnNode(target,false,event)})})}if(scrollPos===endPos)event.preventDefault()};var moveFocusHome=Keyboard.moveFocusHome=function(event){moveFocusEnd.call(this,event,true)};function preventDefault(event){event.preventDefault()}Keyboard.defaultKeyMap=
{32:preventDefault,33:moveFocusPageUp,34:moveFocusPageDown,35:moveFocusEnd,36:moveFocusHome,37:moveFocusLeft,38:moveFocusUp,39:moveFocusRight,40:moveFocusDown};Keyboard.defaultHeaderKeyMap={32:preventDefault,35:moveHeaderFocusEnd,36:moveHeaderFocusHome,37:moveFocusLeft,39:moveFocusRight};return Keyboard})},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(array,aspect,declare,
lang,parser){return declare("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var node=this.domNode;if(this.containerNode&&!this.searchContainerNode)this.containerNode.stopParser=true;parser.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(lang.hitch(this,
function(widgets){this._startupWidgets=widgets;for(var i=0;i<widgets.length;i++)this._processTemplateNode(widgets[i],function(n,p){return n[p]},function(widget,type,callback){if(type in widget)return aspect.after(widget,type,callback,true);else return widget.on(type,callback,true)});if(this.containerNode&&this.containerNode.stopParser)delete this.containerNode.stopParser}));if(!this._startupWidgets)throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+
"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(baseNode,getAttrFunc,attachFunc){if(getAttrFunc(baseNode,"dojoType")||getAttrFunc(baseNode,"data-dojo-type"))return true;return this.inherited(arguments)},startup:function(){array.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup)w.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"xide/views/KeyboardHandlerLight":function(){define(["dojo/_base/declare",
"dojo/keys","dojo/has"],function(declare,keys,has){return declare("xide.views.KeyboardHandlerLight",null,{ctlrKeyDown:false,onKeyUp:function(evt){switch(evt.keyCode){case keys.META:case keys.ALT:case keys.CTRL:this.ctlrKeyDown=false;break}},onKey:function(evt){var thiz=this;if(evt.type&&evt.type=="keyup")return this.onKeyUp(evt);if(evt.keyCode==keys.ENTER){if(evt.target&&evt.target.className&&(evt.target.className.indexOf("ace")!=-1||evt.target.className.indexOf("jsoneditor-value")!=-1||evt.target.className.indexOf("jsoneditor-value")!=
-1||evt.target.className.indexOf("dgrid-cell")!=-1||evt.target.className.indexOf("dgrid-row")!=-1))return;try{if(this.onOk){evt.preventDefault();this.onOk(null)}}catch(e){console.error("maeh, onOK : triggered onOK on action-dialog enter!")}}else if(this.onNormalKey)this.onNormalKey()}})})},"dijit/_HasDropDown":function(){define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang",
"dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(declare,Deferred,dom,domAttr,domClass,domGeometry,domStyle,has,keys,lang,on,touch,registry,focus,popup,_FocusMixin){return declare("dijit._HasDropDown",_FocusMixin,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly)return;
e.preventDefault();this._docHandler=this.own(on(this.ownerDocument,touch.release,lang.hitch(this,"_onDropDownMouseUp")))[0];this.toggleDropDown()},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this._docHandler.remove();this._docHandler=null}var dropDown=this.dropDown,overMenu=false;if(e&&this._opened){var c=domGeometry.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!overMenu)if(domClass.contains(t,"dijitPopup"))overMenu=
true;else t=t.parentNode;if(overMenu){t=e.target;if(dropDown.onItemClick){var menuItem;while(t&&!(menuItem=registry.byNode(t)))t=t.parentNode;if(menuItem&&menuItem.onClick&&menuItem.getParent)menuItem.getParent().onItemClick(menuItem,e)}return}}}if(this._opened){if(dropDown.focus&&dropDown.autoFocus!==false)this._focusDropDownTimer=this.defer(function(){dropDown.focus();delete this._focusDropDownTimer})}else if(this.focus)this.defer("focus")},_onDropDownClick:function(e){if(this._stopClickEvents){e.stopPropagation();
e.preventDefault()}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var defaultPos={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";domClass.add(this._arrowWrapperNode||this._buttonNode,"dijit"+defaultPos+
"ArrowButton")},postCreate:function(){this.inherited(arguments);var keyboardEventNode=this.focusNode||this.domNode;this.own(on(this._buttonNode,touch.press,lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(keyboardEventNode,"keydown",lang.hitch(this,"_onKey")),on(keyboardEventNode,"keyup",lang.hitch(this,"_onKeyUp")))},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed)this.dropDown.destroyRecursive();delete this.dropDown}this.inherited(arguments)},
_onKey:function(e){if(this.disabled||this.readOnly)return;var d=this.dropDown,target=e.target;if(d&&this._opened&&d.handleKey)if(d.handleKey(e)===false){e.stopPropagation();e.preventDefault();return}if(d&&this._opened&&e.keyCode==keys.ESCAPE){this.closeDropDown();e.stopPropagation();e.preventDefault()}else if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||(e.keyCode==keys.ENTER||e.keyCode==keys.SPACE)&&((target.tagName||"").toLowerCase()!=="input"||target.type&&target.type.toLowerCase()!=="text"))){this._toggleOnKeyUp=
true;e.stopPropagation();e.preventDefault()}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus)this.defer(lang.hitch(d,"focus"),1)}},_onBlur:function(){this.closeDropDown(false);this.inherited(arguments)},isLoaded:function(){return true},loadDropDown:function(loadCallback){loadCallback()},loadAndOpenDropDown:function(){var d=new Deferred,afterLoad=lang.hitch(this,function(){this.openDropDown();d.resolve(this.dropDown)});
if(!this.isLoaded())this.loadDropDown(afterLoad);else afterLoad();return d},toggleDropDown:function(){if(this.disabled||this.readOnly)return;if(!this._opened)this.loadAndOpenDropDown();else this.closeDropDown()},openDropDown:function(){var dropDown=this.dropDown,ddNode=dropDown.domNode,aroundNode=this._aroundNode||this.domNode,self=this;var retVal=popup.open({parent:this,popup:dropDown,around:aroundNode,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){self.closeDropDown(true)},
onCancel:function(){self.closeDropDown(true)},onClose:function(){domAttr.set(self._popupStateNode,"popupActive",false);domClass.remove(self._popupStateNode,"dijitHasDropDownOpen");self._set("_opened",false)}});if(this.forceWidth||this.autoWidth&&aroundNode.offsetWidth>dropDown._popupWrapper.offsetWidth){var resizeArgs={w:aroundNode.offsetWidth-(dropDown._popupWrapper.offsetWidth-dropDown.domNode.offsetWidth)};if(lang.isFunction(dropDown.resize))dropDown.resize(resizeArgs);else domGeometry.setMarginBox(ddNode,
resizeArgs)}domAttr.set(this._popupStateNode,"popupActive","true");domClass.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",true);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",dropDown.id);if(ddNode.getAttribute("role")!=="presentation"&&!ddNode.getAttribute("aria-labelledby"))ddNode.setAttribute("aria-labelledby",this.id);return retVal},closeDropDown:function(focus){if(this._focusDropDownTimer){this._focusDropDownTimer.remove();
delete this._focusDropDownTimer}if(this._opened){this._popupStateNode.setAttribute("aria-expanded","false");if(focus)this.focus();popup.close(this.dropDown);this._opened=false}}})})},"xide/views/TitlePane":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/fx","dijit/TitlePane","xide/widgets/_ResizeMixin","xide/widgets/_CSSMixin","dojo/text!./templates/TitlePane.html"],function(declare,domClass,fx,TitlePane,_ResizeMixin,_CSSMixin,Template){return declare("xfile.views.TitlePane",[TitlePane,
_ResizeMixin,_CSSMixin],{templateString:Template,toggle:function(){this._setOpenAttr(!this.open,true);if(this.open){domClass.remove(this.arrowNode,"el-icon-caret-right");domClass.add(this.arrowNode,"el-icon-caret-down")}else{domClass.remove(this.arrowNode,"el-icon-caret-down");domClass.add(this.arrowNode,"el-icon-caret-right")}},startup:function(){this.inherited(arguments);var hideNode=this.hideNode,wipeNode=this.wipeNode;var thiz=this;this._wipeIn=fx.wipeIn({node:wipeNode,duration:this.duration,
beforeBegin:function(){hideNode.style.display=""},onEnd:function(){thiz.onResized()}});this._wipeOut=fx.wipeOut({node:wipeNode,duration:this.duration,onEnd:function(){hideNode.style.display="none";thiz.onResized()}});this.doCSSOperations([{cssClass:"actionTogglePaneHeader ui-accordion-header ui-helper-reset ui-state-default ui-accordion-icons ui-corner-all",op:"add",selector:".dijitTitlePaneTitle"},{cssClass:"dijitTitlePaneTitle",op:"remove",selector:".dijitTitlePaneTitle"}]);if(this.open){domClass.remove(this.arrowNode,
"el-icon-caret-right");domClass.add(this.arrowNode,"el-icon-caret-down")}}})})},"xblox/views/BlocksGridDndSource":function(){define("xblox/views/BlocksGridDndSource",["dojo/_base/declare","dojo/dnd/Source","dojo/_base/Deferred","dojo/dnd/Manager","dojo/_base/NodeList","dojo/topic","dojo/has"],function(declare,Source,Deferred,DnDManager,NodeList,topic,has){var blockGridDndSource=declare(Source,{grid:null,hover:true,onDndCancel:function(){this.inherited(arguments);this.hover=false;if(this.targetAnchor)this._removeItemClass(this.targetAnchor,
"Hover")},onDndSourceOver:function(source){if(this!==source){this.mouseDown=false;if(this.targetAnchor)this._unmarkTargetAnchor()}else if(this.isDragging){var m=DnDManager.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)))}},_markTargetAnchorOn:function(hover){if(this.current==this.targetAnchor&&this.hover==hover)return;if(this.targetAnchor)this._removeItemClass(this.targetAnchor,this.hover?"Hover":"");this.hover=hover;if(this.targetAnchor)this._addItemClass(this.targetAnchor,
this.hover?"Hover":"")},_unmarkTargetAnchorOn:function(){if(!this.targetAnchor)return;this._removeItemClass(this.targetAnchor,"Hover");this.targetAnchor=null;this.targetBox=null;this.hover=false},getObject:function(node){var grid=this.grid;return grid.store.get(node.id.slice(grid.id.length+5))},_legalMouseDown:function(evt){var legal=this.inherited(arguments);return legal&&evt.target!=this.grid.bodyNode},onDrop:function(sourceSource,nodes,copy){if(this.targetAnchor)this._removeItemClass(this.targetAnchor,
"Hover");var targetSource=this,targetRow=this._targetAnchor=this.targetAnchor,grid=this.grid,store=grid.store;if(!this.before&&targetRow)targetRow=targetRow.nextSibling;targetRow=targetRow&&grid.row(targetRow);Deferred.when(targetRow&&store.get(targetRow.id),function(target){if(targetSource!=sourceSource)targetSource.onDropExternal(sourceSource,nodes,copy,target);else targetSource.onDropInternal(nodes,copy,target)})},onDropInternal:function(nodes,copy,targetItem){var store=this.grid.store,targetSource=
this,grid=this.grid,anchor=targetSource._targetAnchor,targetRow;if(anchor)targetRow=this.before?anchor.previousSibling:anchor.nextSibling;if(!copy&&(targetRow===nodes[0]||!targetItem&&grid.down(grid.row(nodes[0])).element==nodes[0]))return;nodes.forEach(function(node){Deferred.when(targetSource.getObject(node),function(object){store[copy&&store.copy?"copy":"put"](object,{before:targetItem})})})},onDropExternal:function(sourceSource,nodes,copy,targetItem){var store=this.grid.store,sourceGrid=sourceSource.grid;
nodes.forEach(function(node,i){Deferred.when(sourceSource.getObject(node),function(object){if(!copy)if(sourceGrid)Deferred.when(sourceGrid.store.getIdentity(object),function(id){!i&&sourceSource.selectNone();sourceSource.delItem(node.id);sourceGrid.store.remove(id)});else sourceSource.deleteSelectedNodes();store[store.copy?"copy":"put"](object,{before:targetItem})})})},onDndStart:function(source,nodes,copy){this.inherited(arguments);if(source==this){if(this.grid.cancelTouchScroll)this.grid.cancelTouchScroll();
DnDManager.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px"}},onMouseDown:function(evt){if(has("touch")&&this.isDragging&&touchUtil.countCurrentTouches(evt,this.grid.touchNode)>1){topic.publish("/dnd/cancel");DnDManager.manager().stopDrag()}else this.inherited(arguments)},onMouseMove:function(evt){if(!has("touch")||touchUtil.countCurrentTouches(evt,this.grid.touchNode)<=1)this.inherited(arguments)},checkAcceptance:function(source,nodes){return source.getObject&&Source.prototype.checkAcceptance.apply(this,
arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var t=new NodeList,id;for(id in this.grid.selection)t.push(this._selectedNodes[id]);return t},_markTargetAnchor:function(before){if(this.current==this.targetAnchor&&this.before==before)return;if(this.targetAnchor)this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=this.current;this.targetBox=null;this.before=before;if(this.targetAnchor)this._addItemClass(this.targetAnchor,
this.before?"Before":"After")}});return blockGridDndSource})},"xblox/manager/ClipboardManager":function(){define("xblox/manager/ClipboardManager",["dojo/_base/declare","xide/types","xide/manager/ClipboardManager"],function(declare,types,ClipboardManager){return declare([ClipboardManager],{currentCopySelection:null,currentCutSelection:null,onPaste:function(data){if(data.didPaste)return;data.didPaste=true;var selection=this.currentCopySelection||this.currentCutSelection;var isCopy=this.currentCopySelection!=
null;if(selection&&data.type===types.ITEM_TYPE.BLOCK&&data.callee&&data.callee.paste)data.callee.paste(selection,data.callee,isCopy)},onCopy:function(data){var selection=data.items;if(selection&&data.type===types.ITEM_TYPE.BLOCK)this.currentCopySelection=selection;this.currentCutSelection=null},onCut:function(data){var selection=data?data?data.items?data.items:null:null:null;if(selection&&data.type===types.ITEM_TYPE.BLOCK)this.currentCutSelection=selection;this.currentCopySelection=null}})})},"dojo/_base/event":function(){define("dojo/_base/event",
["./kernel","../on","../has","../dom-geometry"],function(dojo,on,has,dom){if(on._fixEvent){var fixEvent=on._fixEvent;on._fixEvent=function(evt,se){evt=fixEvent(evt,se);if(evt)dom.normalizeEvent(evt);return evt}}var ret={fix:function(evt,sender){if(on._fixEvent)return on._fixEvent(evt,sender);return evt},stop:function(evt){if(has("dom-addeventlistener")||evt&&evt.preventDefault){evt.preventDefault();evt.stopPropagation()}else{evt=evt||window.event;evt.cancelBubble=true;on._preventDefault.call(evt)}}};
if(1){dojo.fixEvent=ret.fix;dojo.stopEvent=ret.stop}return ret})},"url:dijit/form/templates/DropDownBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}"\n\trole\x3d"combobox"\n\taria-haspopup\x3d"true"\n\tdata-dojo-attach-point\x3d"_popupStateNode"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point\x3d"_buttonNode" role\x3d"presentation"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitArrowButtonInner" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"button presentation" aria-hidden\x3d"true"\n\t\t\t${_buttonInputDisabled}\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' ${!nameAttrSetting} type\x3d"text" autocomplete\x3d"off"\n\t\t\tdata-dojo-attach-point\x3d"textbox,focusNode" role\x3d"textbox"\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n',
"xfile/views/_MainViewMixin":function(){define("xfile/views/_MainViewMixin",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","xide/types","xide/factory","xide/utils","xide/layout/ContentPane","xide/widgets/ActionToolbar"],function(declare,lang,domClass,types,factory,utils,ContentPane,ActionToolbar){return declare("xfile.views._MainViewMixin",null,{globalPanelMixin:{},clear:function(){utils.destroyWidget(this.centerTabContainer,true,this);if(this.centerPanel)utils.destroyWidget(this.centerPanel,
true,this);if(this.leftPanel)utils.destroyWidget(this.leftPanel,true,this);if(this.actionToolbar)utils.destroyWidget(this.actionToolbar,true,this);if(this.bottomTabContainer)utils.destroyWidget(this.bottomTabContainer,true,this);this._contextChanged=true;if(this.layoutTop)dojo.empty(this.layoutTop.containerNode);if(this.layoutCenter)dojo.empty(this.layoutCenter.containerNode)},_createToolbar:function(displayMode,config,container){if(displayMode=="self"){this.toolbar=utils.addWidget(ActionToolbar,
{delegate:this},this,container,true);domClass.add(this.toolbar.domNode,"ui-state-default")}},_createLogItem:function(item,message,parent,terminatorMessage){if(this.ctx.logManager){var _message={message:message,level:"info",type:"File Operation",terminatorItem:item,terminatorMessage:terminatorMessage,showProgress:false,details:item};try{this.publish(types.EVENTS.ON_SERVER_LOG_MESSAGE,_message)}catch(e){}}},onDeleteBegin:function(data){var items=data.items;var message=this.translate("removing")+" "+
items.length+" "+this.translate("items");this._createLogItem(items,message,null,types.EVENTS.ON_DELETE_END)},onMoveBegin:function(data){var items=data.src;var message=this.translate("moving")+" "+items.length+" "+this.translate("items")+" "+this.translate("to")+" "+data.dst;this._createLogItem(items,message,null,types.EVENTS.ON_MOVE_END)},onCompressBegin:function(data){var items=data.src;var message=this.translate("compressing")+" "+items.length+" "+this.translate("items");this._createLogItem(items,
message,null,types.EVENTS.ON_COMPRESS_END)},onDownloadToBegin:function(data){0&&console.log("remote download begins");var message=this.translate("Downloading")+" "+data.url+" to "+data.dstPath;this._createLogItem(data.dst,message,null,types.EVENTS.ON_DOWNLOAD_TO_END)},onCopyBegin:function(data){var items=data.src;var message=this.translate("copying")+" "+items.length+" "+this.translate("items")+" "+this.translate("to")+" "+data.dst;this._createLogItem(items,message,null,types.EVENTS.ON_COPY_END)},
onUploadBegin:function(data){var item=data.item;if(this.ctx.logManager){var _message={message:"Uploading "+item.name,level:"info",type:"File Operation",terminatorItem:item,terminatorMessage:types.EVENTS.UPLOAD_FINISH,showProgress:true,progressMessage:types.EVENTS.UPLOAD_PROGRESS,progressFailedMessage:types.EVENTS.UPLOAD_FAILED};try{this.publish(types.EVENTS.ON_SERVER_LOG_MESSAGE,_message)}catch(e){debugger}}},updateItemActions:function(items,owner,actions,where){if(this.toolbar&&this.toolbar.getCurrentItem()!=
items){this.toolbar.clear();if(actions&&actions.length>0)this.toolbar.addActions(actions,owner,items)}},onActionContextChanged:function(evt){this._contextChanged=true},onItemSelected:function(evt,clear){if(!this.isMyBeanContext(evt))return;var item=evt.item;if(this.breadCrumb&&evt.item&&evt.callee&&evt.callee.delegate)if(item&&item.path&&item.directory===true){if(this.breadCrumb.store!=item._S){this.breadCrumb.store=item._S;this.breadCrumb._clearTrail()}if(item._S.isItemLoaded(item))this.breadCrumb.setTrail(item.path);
this.breadCrumb.owner=evt.callee.delegate}var owner=evt["owner"]||evt["view"];if(owner&&owner["hasItemActions"]!=null&&owner.hasItemActions()===true){var actions=owner.getItemActions();this.updateItemActions(owner.getItem(),owner,actions)}if(this.config.PANEL_OPTIONS.ALLOW_INFO_VIEW&&this.config.FILE_PANEL_OPTIONS_RIGHT&&this.config.FILE_PANEL_OPTIONS_RIGHT.AUTO_OPEN){if(this._contextChanged){clear=true;this._contextChanged=false}else clear=false;if(item&&item._S){var container=this.getRightTopTarget(clear,
false);this.getPanelManager().openProperties(item,container,false)}}},onViewShow:function(evt){if(!this.isMyBeanContext(evt))return;try{var view=evt["view"];if(view&&view["hasItemActions"]!=null&&view.hasItemActions()===true){evt["owner"]=view;this.onItemSelected(evt)}}catch(e){console.error("on view show error"+e)}},shouldChangeActionContext:function(item){if(item&&!item._S)return true;return false},registerBeanEvents:function(){var thiz=this;if(this.onActionContextChanged)this.subscribe(types.EVENTS.ON_ACTION_CONTEXT_CHANGED,
this.onActionContextChanged);this.subscribe(types.EVENTS.ITEM_SELECTED,function(data){var clear=thiz.shouldChangeActionContext(data.item);if(clear)thiz._contextChanged=true;thiz.onItemSelected(data,clear)},this);if(this.onShowPanel)this.subscribe(types.EVENTS.ON_SHOW_PANEL,this.onShowPanel,this);this.subscribe(types.EVENTS.ON_VIEW_SHOW,this.onViewShow)},registerFileOperationEvents:function(){factory.subscribe(types.EVENTS.UPLOAD_BEGIN,this.onUploadBegin,this);factory.subscribe(types.EVENTS.ON_COPY_BEGIN,
this.onCopyBegin,this);factory.subscribe(types.EVENTS.ON_DELETE_BEGIN,this.onDeleteBegin,this);factory.subscribe(types.EVENTS.ON_MOVE_BEGIN,this.onMoveBegin,this);factory.subscribe(types.EVENTS.ON_COMPRESS_BEGIN,this.onCompressBegin,this);factory.subscribe(types.EVENTS.ON_DOWNLOAD_TO_BEGIN,this.onDownloadToBegin,this)},_resizeContainer:function(container,name){try{if(container&&container.domNode)container.resize();else;}catch(e){}},getPanelManager:function(){return this.panelManager},getCookiePrefix:function(forSuffix){return(this.beanContextName||
"")+"_"+forSuffix},isMyBeanContext:function(evtData){return!(evtData.beanContextName&&this.beanContextName&&evtData.beanContextName!==this.beanContextName)},createPanel:function(panelOptions,dstContainer,cookiePrefix,region,mixins){mixins=mixins||{};lang.mixin(mixins,this.globalPanelMixin);mixins.owner=this;mixins.beanContextName=this.beanContextName;if(panelOptions.AUTO_OPEN||panelOptions.AUTO_OPEN==null){var panel=this.getPanelManager().openUrl(this.config.START_PATH,dstContainer,this.config,this.getCookiePrefix(cookiePrefix),
region,this.defaultStore,this.defaultStoreOptions,mixins);panel.owner=this;return panel}},_prepareLayout:function(config){var thiz=this;if(config.LAYOUT_PRESET==types.LAYOUT_PRESET.SINGLE||config.LAYOUT_PRESET==types.LAYOUT_PRESET.PREVIEW||config.LAYOUT_PRESET==types.LAYOUT_PRESET.GALLERY){this.layoutMain.removeChild(this.layoutLeft);this.layoutLeft=null}if(config.LAYOUT_PRESET==types.LAYOUT_PRESET.DUAL||config.LAYOUT_PRESET==types.LAYOUT_PRESET.BROWSER)if(this.layoutLeft==null){this.layoutLeft=new ContentPane({className:"layoutLeft filePanelLayoutcontainer",
region:"leading",splitter:true},dojo.doc.createElement("div"));this.layoutMain.addChild(this.layoutLeft)}if(config.PANEL_OPTIONS!=null&&config.PANEL_OPTIONS.ALLOW_INFO_VIEW===false){this.layoutMain.removeChild(this.layoutRight);this.layoutRight=null}if(config.PANEL_OPTIONS!=null&&(config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===false||config.PANEL_OPTIONS.ALLOW_BREADCRUMBS===0)&&(config.ACTION_TOOLBAR_MODE==null||config.ACTION_TOOLBAR_MODE!="self")){this.layoutMain.removeChild(this.layoutTop);this.layoutTop=
null}else if(this.layoutTop._splitterWidget){utils.destroyWidget(this.layoutTop._splitterWidget);this.layoutTop._splitterWidget=null}if(config.PANEL_OPTIONS!=null&&config.PANEL_OPTIONS.ALLOW_LOG_VIEW===false)this.layoutMain.removeChild(this.layoutBottom);else if(this.layoutBottom._splitterWidget){this.layoutBottom._splitterWidget.fullSize="150px";this.layoutBottom._splitterWidget.collapsedSize=null;if(!this.bottomTabContainer){this.bottomTabContainer=this._createBottomTabContainer();var logManager=
this.ctx.getLogManager();if(logManager)this.logPanel=logManager.openLogView(this.bottomTabContainer);else{this.logPanel=utils.addWidget(ContentPane,{className:"bottomTabLog ui-widget-content",title:"Log",style:"padding:0;",parentContainer:this.bottomTabContainer},null,this.bottomTabContainer,true);setTimeout(function(){thiz.logPanel.getItemActions()},2E3)}}}},_createPanels:function(config,parseUrl){var panelMixin={startPath:null};if(parseUrl!==false){var urlParams=utils.getUrlArgs(location.href);
if(urlParams["open"]){var _path=urlParams["open"];_path=utils.replaceAll("@","/",_path);panelMixin.startPath="./"+_path}}var hasMainOptions=config.FILE_PANEL_OPTIONS_MAIN!=null;if(config.LAYOUT_PRESET==types.LAYOUT_PRESET.DUAL){this.leftPanel=this.createPanel(config.FILE_PANEL_OPTIONS_LEFT,this.layoutLeft,types.LAYOUT_REGION.LEFT,types.LAYOUT_REGION.LEFT);this.centerPanel=this.createPanel(config.FILE_PANEL_OPTIONS_MAIN,this.layoutCenter,types.LAYOUT_REGION.CENTER,types.LAYOUT_REGION.CENTER,panelMixin);
this.leftPanel.currentPanels.push(this.centerPanel);this.leftPanel.activePanel=this.centerPanel;this.centerPanel.currentPanels.push(this.leftPanel)}else if(config.LAYOUT_PRESET==types.LAYOUT_PRESET.SINGLE&&hasMainOptions){this.centerPanel=this.createPanel(config.FILE_PANEL_OPTIONS_MAIN,this.layoutCenter,types.LAYOUT_REGION.CENTER,types.LAYOUT_REGION.CENTER,panelMixin);if(this.leftPanel){this.leftPanel.currentPanels.push(this.centerPanel);this.leftPanel.activePanel=this.centerPanel}this.centerPanel.closeable=
false}else if((config.LAYOUT_PRESET==types.LAYOUT_PRESET.PREVIEW||config.LAYOUT_PRESET==types.LAYOUT_PRESET.GALLERY)&&hasMainOptions){var leftLayoutMode=config.LAYOUT_PRESET==types.LAYOUT_PRESET.PREVIEW?types.FILE_PANEL_LAYOUT.PREVIEW:types.FILE_PANEL_LAYOUT.COVER;this.centerPanel=this.createPanel(config.FILE_PANEL_OPTIONS_MAIN,this.layoutCenter,types.LAYOUT_REGION.CENTER,types.LAYOUT_REGION.CENTER,{startLayout:types.FILE_PANEL_LAYOUT.SPLIT_HORIZONTAL,panelMixin:panelMixin,startPath:panelMixin.startPath});
var splitView=this.centerPanel.currentSplitView;var left=splitView.leftPanel;var center=splitView.centerPanel;left.onLayoutModeChanged(leftLayoutMode);center.onLayoutModeChanged(types.FILE_PANEL_LAYOUT.THUMB)}else if(config.LAYOUT_PRESET==types.LAYOUT_PRESET.BROWSER&&config.FILE_PANEL_OPTIONS_MAIN!=null){this.leftPanel=this.createPanel(config.FILE_PANEL_OPTIONS_LEFT,this.layoutLeft,types.LAYOUT_REGION.LEFT,types.LAYOUT_REGION.LEFT,{startLayout:1,panelMixin:panelMixin,startPath:panelMixin.startPath});
this.centerPanel=this.createPanel(config.FILE_PANEL_OPTIONS_MAIN,this.layoutCenter,types.LAYOUT_REGION.CENTER,types.LAYOUT_REGION.CENTER,{startLayout:3,panelMixin:panelMixin,startPath:panelMixin.startPath});this.leftPanel.activePanel=this.centerPanel;this.leftPanel.onLayoutModeChanged(types.FILE_PANEL_LAYOUT.TREE);this.centerPanel.onLayoutModeChanged(types.FILE_PANEL_LAYOUT.THUMB)}setTimeout(function(){this.resize();this.publish(types.EVENTS.RESIZE,{},this)}.bind(this),1E3)}})})},"dojo/_base/html":function(){define("dojo/_base/html",
["./kernel","../dom","../dom-style","../dom-attr","../dom-prop","../dom-class","../dom-construct","../dom-geometry"],function(dojo,dom,style,attr,prop,cls,ctr,geom){dojo.byId=dom.byId;dojo.isDescendant=dom.isDescendant;dojo.setSelectable=dom.setSelectable;dojo.getAttr=attr.get;dojo.setAttr=attr.set;dojo.hasAttr=attr.has;dojo.removeAttr=attr.remove;dojo.getNodeProp=attr.getNodeProp;dojo.attr=function(node,name,value){if(arguments.length==2)return attr[typeof name=="string"?"get":"set"](node,name);
return attr.set(node,name,value)};dojo.hasClass=cls.contains;dojo.addClass=cls.add;dojo.removeClass=cls.remove;dojo.toggleClass=cls.toggle;dojo.replaceClass=cls.replace;dojo._toDom=dojo.toDom=ctr.toDom;dojo.place=ctr.place;dojo.create=ctr.create;dojo.empty=function(node){ctr.empty(node)};dojo._destroyElement=dojo.destroy=function(node){ctr.destroy(node)};dojo._getPadExtents=dojo.getPadExtents=geom.getPadExtents;dojo._getBorderExtents=dojo.getBorderExtents=geom.getBorderExtents;dojo._getPadBorderExtents=
dojo.getPadBorderExtents=geom.getPadBorderExtents;dojo._getMarginExtents=dojo.getMarginExtents=geom.getMarginExtents;dojo._getMarginSize=dojo.getMarginSize=geom.getMarginSize;dojo._getMarginBox=dojo.getMarginBox=geom.getMarginBox;dojo.setMarginBox=geom.setMarginBox;dojo._getContentBox=dojo.getContentBox=geom.getContentBox;dojo.setContentSize=geom.setContentSize;dojo._isBodyLtr=dojo.isBodyLtr=geom.isBodyLtr;dojo._docScroll=dojo.docScroll=geom.docScroll;dojo._getIeDocumentElementOffset=dojo.getIeDocumentElementOffset=
geom.getIeDocumentElementOffset;dojo._fixIeBiDiScrollLeft=dojo.fixIeBiDiScrollLeft=geom.fixIeBiDiScrollLeft;dojo.position=geom.position;dojo.marginBox=function marginBox(node,box){return box?geom.setMarginBox(node,box):geom.getMarginBox(node)};dojo.contentBox=function contentBox(node,box){return box?geom.setContentSize(node,box):geom.getContentBox(node)};dojo.coords=function(node,includeScroll){dojo.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");node=dom.byId(node);var s=style.getComputedStyle(node),
mb=geom.getMarginBox(node,s);var abs=geom.position(node,includeScroll);mb.x=abs.x;mb.y=abs.y;return mb};dojo.getProp=prop.get;dojo.setProp=prop.set;dojo.prop=function(node,name,value){if(arguments.length==2)return prop[typeof name=="string"?"get":"set"](node,name);return prop.set(node,name,value)};dojo.getStyle=style.get;dojo.setStyle=style.set;dojo.getComputedStyle=style.getComputedStyle;dojo.__toPixelValue=dojo.toPixelValue=style.toPixelValue;dojo.style=function(node,name,value){switch(arguments.length){case 1:return style.get(node);
case 2:return style[typeof name=="string"?"get":"set"](node,name)}return style.set(node,name,value)};return dojo})},"xide/widgets/_InsertionMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","xide/utils"],function(declare,lang,domConstruct,utils){return declare("xide.widgets._InsertionMixin",null,{data:null,delegate:null,didInserts:false,doInsert:function(data){if(!data)return;var dstNode=utils.find(data.query,this.domNode)||this.domNode;if(dstNode){var widgetNS=
data.widgetClass||"xide.widgets.TemplatedWidgetBase";var widgetClz=dojo.getObject(widgetNS);if(widgetNS=="xide.layout.ContentPane");if(widgetClz){var wData=null;if(this.dataItem&&data.insertDataRef!=null&&this.dataItem[data.insertDataRef]!=null)wData=dojo.isString(this.dataItem[data.insertDataRef])?dojo.fromJson(this.dataItem[data.insertDataRef]):this.dataItem[data.insertDataRef];var insert=data.insert||"\x3cdiv\x3e\x3c/div\x3e";insert=utils.cleanString(insert);var ctrArgs={templateString:insert,
dataItem:wData,title:wData?wData.title?wData.title:wData.title:null,className:data.className||""};if(data.mixin!=null){if(dojo.isString(data.mixin))data.mixin=utils.cleanString(data.mixin);data.mixin=dojo.isString(data.mixin)?dojo.fromJson(data.mixin):data.mixin;if(data.mixin){if(widgetNS==="xide.layout.ContentPane")if(utils.isValidString(insert)&&!data.mixin.innerHTML&&!data.mixin.content)data.mixin.content=insert;lang.mixin(ctrArgs,data.mixin)}}widget=null;widgetParent=null;var widgetParent=domConstruct.create("div");
var widget=new widgetClz(ctrArgs,widgetParent);if(widget._addCssClasses&&widget.domNode)widget._addCssClasses(widget.cssClass,widget.domNode);dojo.place(widget.domNode,dstNode,data.place||"after");widget.startup();return widget}}else console.error("have no dstNode")},doInserts:function(data){if(this.didInserts)return;if(data)for(var i=0;i<data.length;i++)this.doInsert(data[i]);this.didInserts=true}})})},"xfile/views/CKEditor":function(){define("xfile/views/CKEditor",["dojo/_base/array","dojo/_base/declare",
"dojo/_base/html","dojo/on","dojo/_base/lang","dojo/dom-geometry","xide/widgets/TemplatedWidgetBase","xide/utils"],function(array,declare,html,on,lang,domGeometry,TemplatedWidgetBase,utils){return declare("xfile.views.CKEditor",[TemplatedWidgetBase],{wFloatingPane:null,closeable:true,moduleView:null,didStartup:false,ckEditorRoot:null,ckEditor:null,editorControlsRoot:null,btnSave:null,title:null,dataItem:null,content:null,titleWidget:null,dataRef:null,sourceType:null,dataName:null,saveButton:true,
titleEdit:true,editorContent:null,path:null,removePlugins:null,skin:"kama",mount:"root",loadContent:function(filePath){var thiz=this;var _cb=function(content){thiz.ckEditor.setData(content,"");thiz.ckEditor.focus();setTimeout(function(){thiz.ckEditor.focus()},2E3)};this.delegate.getFileContent(this.mount,filePath,_cb)},setContent:function(content){if(this.ckEditor)this.ckEditor.setData(content)},getContent:function(){if(this.ckEditor)return this.ckEditor.getData();return null},templateString:"\x3cdiv class\x3d'ckEditorRoot' data-dojo-type\x3d'dijit.layout.ContentPane' title\x3d'${!title}' data-dojo-attach-point\x3d'wFloatingPane' style\x3d'height: 97%;padding: 0px'\x3e"+
"\x3cdiv data-dojo-type\x3d'dijit.layout.ContentPane' style\x3d'height: 99%'\x3e"+"\x3cdiv data-dojo-attach-point\x3d'ckEditorRoot' style\x3d'height: 99%'\x3e\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e",createEditorControls:function(){},onHide:function(){},onClose:function(){this.ckEditor.destroy();utils.destroyWidget(this.ckEditor);utils.destroyWidget(this);this.inherited(arguments)},destroy:function(){},attachCKEditor:function(){var thiz=this;this.ckEditorRoot.id=this.id+"_Editor";var rootId=this.ckEditorRoot.id;
this.ckEditor=CKEDITOR.replace(rootId,{removePlugins:this.removePlugins!=null?this.removePlugins:"docprops,colordialog,div,link,scayt,showblocks,specialchar,devtools,pastefromword,pastetext,iframe,iframedialog,liststyle,wsc,styles,find,smiley,source,styles,fonts,table,tableresize,templates,flash,iframe,image,link,forms,div,pagebreak,styles,xml,scayt,showblocks,uicolor",startupFocus:true,height:"100%",on:{instanceReady:function(ev){this.focus()}}});if(this.content!=null)this.ckEditor.setData(this.content,
"");else if(this.path)this.loadContent(this.path);this.ckEditor.focus();setTimeout(function(){thiz.ckEditor.focus()},2E3)},saveContentCB:function(thiz,res){},saveContent:function(){var refId=utils.toInt(this.dataItem.uid);var content=this.ckEditor.getData();if(sctx&&sctx.getContentManager&&sctx.getContentManager())var newId=sctx.getContentManager().saveContent(this,this.saveContentCB,refId,content,"Content",this.titleWidget.value)},startup:function(){if(this.didStartup)return;this.set("closable",
true);this.inherited(arguments);this.didStartup=true;this.attachCKEditor()}})})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(has,config,require,module){var i,p,dijit={},dojox={},dojo={config:config,global:this,dijit:dijit,dojox:dojox};var scopeMap={dojo:["dojo",dojo],dijit:["dijit",dijit],dojox:["dojox",dojox]},packageMap=require.map&&require.map[module.id.match(/[^\/]+/)[0]],item;for(p in packageMap)if(scopeMap[p])scopeMap[p][0]=packageMap[p];else scopeMap[p]=
[packageMap[p],{}];for(p in scopeMap){item=scopeMap[p];item[1]._scopeName=item[0];if(!config.noGlobals)this[item[0]]=item[1]}dojo.scopeMap=scopeMap;dojo.baseUrl=dojo.config.baseUrl=require.baseUrl;dojo.isAsync=!1||require.async;dojo.locale=config.locale;var rev="$Rev$".match(/\d+/);dojo.version={major:1,minor:8,patch:3,flag:"",revision:rev?+rev[0]:NaN,toString:function(){var v=dojo.version;return v.major+"."+v.minor+"."+v.patch+v.flag+" ("+v.revision+")"}};1||has.add("extend-dojo",1);Function("d",
"d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(dojo);if(0)dojo.exit=function(exitcode){quit(exitcode)};else dojo.exit=function(){};1||has.add("dojo-guarantee-console",1);if(1){typeof console!="undefined"||(console={});var cn=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];var tn;i=0;while(tn=cn[i++])if(!console[tn])(function(){var tcn=tn+"";console[tcn]="log"in
console?function(){var a=Array.apply({},arguments);a.unshift(tcn+":");console["log"](a.join(" "))}:function(){};console[tcn]._fake=true})()}has.add("dojo-debug-messages",!!config.isDebug);dojo.deprecated=dojo.experimental=function(){};if(has("dojo-debug-messages")){dojo.deprecated=function(behaviour,extra,removal){var message="DEPRECATED: "+behaviour;if(extra)message+=" "+extra;if(removal)message+=" -- will be removed in version: "+removal;0&&console.warn(message)};dojo.experimental=function(moduleName,
extra){var message="EXPERIMENTAL: "+moduleName+" -- APIs subject to change without notice.";if(extra)message+=" "+extra;0&&console.warn(message)}}1||has.add("dojo-modulePaths",1);if(1)if(config.modulePaths){dojo.deprecated("dojo.modulePaths","use paths configuration");var paths={};for(p in config.modulePaths)paths[p.replace(/\./g,"/")]=config.modulePaths[p];require({paths:paths})}1||has.add("dojo-moduleUrl",1);if(1)dojo.moduleUrl=function(module,url){dojo.deprecated("dojo.moduleUrl()","use require.toUrl",
"2.0");var result=null;if(module)result=require.toUrl(module.replace(/\./g,"/")+(url?"/"+url:"")+"/*.*").replace(/\/\*\.\*/,"")+(url?"":"/");return result};dojo._hasResource={};return dojo})},"xide/widgets/FlagsWidget":function(){define(["dojo/_base/declare","xide/widgets/_CSSMixin","xide/widgets/TemplatedWidgetBase","xide/factory","xide/utils"],function(declare,_CSSMixin,TemplatedWidgetBase,factory,utils){return declare("xide.widgets.FlagsWidget",[TemplatedWidgetBase,_CSSMixin],{data:null,cssClass:"xasWidget xasFlagsWidget",
title:"NoTitle",value:0,minHeight:"25px;",checkboxRoot:null,lineBreak:false,flagClass:"",checkboxes:null,single:false,templateString:"\x3cdiv\x3e\x3ctable border\x3d'0' cellpadding\x3d'0px' width\x3d'100%'  class\x3d''\x3e"+"\x3ctbody align\x3d'left'\x3e"+"\x3ctr valign\x3d'top' style\x3d''\x3e"+"\x3ctd valign\x3d'top' data-dojo-attach-point\x3d'checkboxRoot' class\x3d'''\x3e\x3c/td\x3e"+"\x3c/tr\x3e"+"\x3c/tbody\x3e"+"\x3c/table\x3e"+"\x3c/div\x3e",widgetChanged:function(dst,widget){dst.checkSettings()},
_onFlagChange:function(flagWidget){if(this.single){this.setValue(0);for(var i=0;i<this.checkboxes.length;i++)if(this.checkboxes[i]!=flagWidget)this.checkboxes[i].set("checked",false)}var widgetValue=flagWidget.get("value");var userVal=this.getValue();if(widgetValue===false)userVal=utils.disableFlag(userVal,flagWidget.value);else userVal+=1<<flagWidget.value;this.setValue(userVal);if(this.onFlagChanged)this.onFlagChanged(userVal)},isChecked:function(val,itemVal){return utils.hasFlag3(val,itemVal)},
initWithData:function(items,_val){var thiz=this;this.checkboxes=[];var cb=function(delegate,widget){thiz._onFlagChange(widget)};for(var i=0;i<items.length;i++){var _checked=this.isChecked(_val,items[i].value);var _flag=factory.createCheckBox(this.checkboxRoot,"margin-left:3px;margin-top:2px;",items[i].label,items[i].value,cb,this,_checked,items[i].description,this.flagClass);this.checkboxes.push(_flag);_flag["bitValue"]=items[i].value;if(this.lineBreak){var br=dojo.doc.createElement("br");this.checkboxRoot.appendChild(br)}}},
enableAll:function(){},setupListeners:function(){},startup:function(){if(this._started)return;this.inherited(arguments);if(this.data)this.initWithData(this.data,this.value)}})})},"xide/views/OkCancelDialog":function(){define(["dojo/_base/declare","dojo/on","xide/views/Dialog","xide/utils","xide/widgets/_InsertionMixin","xfile/views/KeyboardHandler"],function(declare,on,Dialog,utils,InsertionMixin,KeyboardHandler){return declare("xide.views.OkCancelDialog",[Dialog,InsertionMixin,KeyboardHandler],{data:null,
model:null,uuid:null,appIdentifier:null,platform:null,widgets:null,delegate:null,helpNodes:null,currentWidget:null,currentDataItem:null,didLoad:false,contentPane:null,store:null,tree:null,treeData:null,serviceObject:null,currentTreeNode:null,currentTreeDataItem:null,contentType:0,isContentSourceDialog:false,migrationView:null,doTitleCI:true,doIconCI:true,doDataSourceCI:false,props:null,shareUrl:null,inserts:null,openItem:function(){this.onOk()},postMixInProperties:function(){this.inherited(arguments);
var ctxo=sctx;if(mctx&&sctx.getLocals)ctxo=mctx;if(ctxo&&ctxo.getLocals)this._messages=ctxo.getLocals("dijit","common")},onOk:function(){if(this.delegate&&this.delegate.onOk)this.delegate.onOk(this);try{this.hide()}catch(e){}},onCancel:function(){if(this.delegate&&this.delegate.onCancel)this.delegate.onCancel(this);try{this.hide()}catch(e){}},addActionButtons:function(){var buttonDiv=dojo.create("div",{className:"dijitDialogPaneActionBar",style:"bottom: 0;left: 0;margin: 10px -8px 0;position: absolute;width: 100%;"});
var thiz=this;this.domNode.appendChild(buttonDiv);var buttonOk=new dijit.form.Button({innerHTML:"Ok",tabIndex:0,onClick:function(){thiz.onOk()}});buttonDiv.appendChild(buttonOk.domNode);buttonOk.startup();var buttonCancel=new dijit.form.Button({innerHTML:"Cancel",tabIndex:1,onClick:function(){thiz.onCancel();thiz.hide();thiz.destroyRecursive()}});buttonDiv.appendChild(buttonCancel.domNode);buttonCancel.startup()},addTemplate:function(template){},initWidgets:function(){this.contentPane=new dijit.layout.ContentPane({region:"center",
preventCache:true,style:"padding:0px",className:"okCancelDialogContentPane"},dojo.doc.createElement("div"));var thiz=this;setTimeout(function(){thiz.contentPane.resize()},2E3);this.containerNode.appendChild(this.contentPane.domNode);this.contentPane.startup();if(this.inserts)this.doInserts(this.inserts);this.addActionButtons()},startup:function(){this.inherited(arguments);if(this.didLoad)return;this.initWidgets();this.didLoad=true;var thiz=this;on(this.domNode,"keydown",function(event){thiz.onKey(event)})}})})},
"xfile/manager/MountManager":function(){define("xfile/manager/MountManager",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","xide/manager/ResourceManager","xide/mixins/ReloadMixin","xide/mixins/EventedMixin","xide/types","dojo/aspect","xide/utils","xide/views/CIActionDialog","xfile/views/FileDeleteDialog"],function(declare,lang,domClass,ResourceManager,ReloadMixin,EventedMixin,types,aspect,utils,CIActionDialog,FileDeleteDialog){return declare("xfile.manager.MountManager",[ResourceManager,
EventedMixin,ReloadMixin],{serviceClass:"XApp_Resource_Service",mountData:null,didReload:false,editMount:function(mount){if(!mount)return;if(mount.type==="FILE_PROXY")this.registerLocalMount(mount);else if(mount.type==="REMOTE_FILE_PROXY"){if(mount.adapter==="Ftp")this.registerFTP(mount);if(mount.adapter==="Sftp")this.registerSFTP(mount);if(mount.adapter==="Dropbox")this.registerDropbox(mount);if(mount.adapter==="Webdav")this.registerWebDav(mount)}},removeMount:function(mount){if(!mount)return;var thiz=
this;var onOk=function(){var _cb=function(){thiz.ls(function(data){thiz.onMountDataReady(data)})};thiz.removeResource(mount,false,_cb)};var dlg=new FileDeleteDialog({title:"Remove "+mount.name,config:this.config,delegate:{onOk:function(){onOk()}},ctx:this.ctx,titleBarClass:"ui-state-error",inserts:[{query:".dijitDialogPaneContent",insert:'\x3cdiv\x3e\x3cspan class\x3d"fileManagerDialogText"\x3eDo you really want to remove this item'+"?\x3c/span\x3e\x3c/div\x3e",place:"first"}]});domClass.add(dlg.domNode,
"fileOperationDialog");dlg.show();dlg.addActionButtons();dlg.fixHeight();dlg.resize();setTimeout(function(){dlg.resize()},1E3)},getMounts:function(){return this.mountData},_patchMenu:function(widget){var thiz=this;aspect.after(widget,"onOpen",function(){if(this._popupWrapper&&this._popupWrapper){var dst=this._popupWrapper;domClass.add(dst,"ui-menu ui-widget ui-widget-content")}})},_onDialogOk:function(dlg,data,mount){var options=utils.toOptions(data);var thiz=this;var isUpdate=mount.name!=null;var resourceObject=
{"class":"cmx.types.Resource","enabled":true};for(var i=0;i<options.length;i++){var option=options[i];if(option.user==null)resourceObject[option.name]=option.value;else{if(!resourceObject.config)resourceObject.config={};resourceObject.config[option.name]=option.value}}var label=""+resourceObject.label;resourceObject.name=mount.name||label.toLowerCase();if(resourceObject.type==="FILE_PROXY")resourceObject.path=""+resourceObject.path+"";else if(resourceObject.type==="REMOTE_FILE_PROXY")resourceObject.path=
resourceObject.name+"://";var _cb=function(){thiz.ls(function(data){thiz.onMountDataReady(data)})};if(!isUpdate)this.createResource(resourceObject,false,_cb);else this.updateResource(resourceObject,false,_cb)},registerLocalMount:function(mount){var name=mount?mount.name:"";var path=mount?mount.path:"";var thiz=this;var actionDialog=new CIActionDialog({title:name?"Edit Mount "+name:"New Local Mount",style:"max-width:400px",delegate:{onOk:function(dlg,data){thiz._onDialogOk(dlg,data,mount)}},cis:[xide.utils.createCI("label",
13,"",{group:"Common",title:"Name",value:name}),xide.utils.createCI("path",13,"",{group:"Common",title:"Path",value:path}),xide.utils.createCI("type",13,"",{visible:false,value:"FILE_PROXY"})]});actionDialog.show()},registerFTP:function(mount){mount=mount||{};var config=mount.config||{};var thiz=this;var actionDialog=new CIActionDialog({title:mount.name?"Edit Ftp "+mount.name:"New Ftp",style:"max-width:400px",delegate:{onOk:function(dlg,data){thiz._onDialogOk(dlg,data,mount)}},cis:[xide.utils.createCI("label",
13,"",{group:"Common",title:"Name",value:mount.name}),xide.utils.createCI("root",13,"",{group:"Ftp",title:"Start Path",value:config.root,user:{config:true}}),xide.utils.createCI("adapter",13,"",{visible:false,value:"Ftp"}),xide.utils.createCI("host",13,"",{group:"Ftp",title:"Host",user:{config:true},value:config.host}),xide.utils.createCI("username",13,"",{group:"Ftp",title:"User",user:{config:true},value:config.username}),xide.utils.createCI("password",13,"",{group:"Ftp",title:"Password",user:{config:true},
value:config.password}),xide.utils.createCI("passive",0,"",{group:"Ftp",title:"Passive",user:{config:true},value:config.passive}),xide.utils.createCI("ssl",0,"",{group:"Ftp",title:"SSL",user:{config:true},value:config.ssl!=null?config.ssl:false}),xide.utils.createCI("port",13,"",{group:"Ftp",title:"Port",user:{config:true},value:config.port!=null?config.port:21}),xide.utils.createCI("type",13,"",{visible:false,value:"REMOTE_FILE_PROXY"})]});actionDialog.show()},registerSFTP:function(mount){mount=
mount||{};var config=mount.config||{};var thiz=this;var actionDialog=new CIActionDialog({title:mount.name?"Edit Ftp "+mount.name:"New Ftp",style:"max-width:400px",delegate:{onOk:function(dlg,data){thiz._onDialogOk(dlg,data,mount)}},cis:[xide.utils.createCI("label",13,"",{group:"Common",title:"Name",value:mount.name}),xide.utils.createCI("root",13,"",{group:"SFtp",title:"Start Path",value:config.root,user:{config:true}}),xide.utils.createCI("adapter",13,"",{visible:false,value:"Sftp"}),xide.utils.createCI("host",
13,"",{group:"SFtp",title:"Host",user:{config:true},value:config.host}),xide.utils.createCI("username",13,"",{group:"SFtp",title:"User",user:{config:true},value:config.username}),xide.utils.createCI("password",13,"",{group:"SFtp",title:"Password",user:{config:true},value:config.password}),xide.utils.createCI("port",13,"",{group:"SFtp",title:"Port",user:{config:true},value:config.port!=null?config.port:22}),xide.utils.createCI("type",13,"",{visible:false,value:"REMOTE_FILE_PROXY"})]});actionDialog.show()},
registerDropbox:function(mount){var thiz=this;var actionDialog=new CIActionDialog({title:"New Dropbox",style:"max-width:400px",delegate:{onOk:function(dlg,data){thiz._onDialogOk(dlg,data,mount)}},cis:[xide.utils.createCI("label",13,"",{group:"Common",title:"Name",value:"Dropbox1"}),xide.utils.createCI("pathPrefix",13,"",{group:"Common",title:"Start Path",user:{config:true}}),xide.utils.createCI("adapter",13,"",{visible:false,value:"Dropbox"}),xide.utils.createCI("token",13,"",{group:"Dropbox",title:"Token",
user:{config:true},value:"h16UVItP7qQAAAAAAAAABP3qmBJFOHj3fA5ffKyaHH-j7HCLvFOceZxhENV0sy24"}),xide.utils.createCI("appname",13,"",{group:"Dropbox",title:"App Name",user:{config:true},value:"xapp_local"}),xide.utils.createCI("type",13,"",{visible:false,value:"REMOTE_FILE_PROXY"})]});actionDialog.show()},registerWebDav:function(){var thiz=this;var actionDialog=new CIActionDialog({title:"New Webdav",style:"max-width:400px",delegate:{onOk:function(dlg,data){thiz._onDialogOk(dlg,data)}},cis:[xide.utils.createCI("label",
13,"",{group:"Common",title:"name"}),xide.utils.createCI("pathPrefix",13,"",{group:"Common",title:"Start Path"}),xide.utils.createCI("adapter",13,"",{visible:false,value:"WebDav"}),xide.utils.createCI("host",13,"",{group:"WebDav",title:"Host"}),xide.utils.createCI("baseUri",13,"",{group:"WebDav",title:"Base URI"}),xide.utils.createCI("userName",13,"",{group:"WebDav",title:"User Name"}),xide.utils.createCI("password",13,"",{group:"WebDav",title:"Password"}),xide.utils.createCI("type",13,"",{visible:false,
value:"REMOTE_FILE_PROXY"})]});actionDialog.show()},onSourceMenuOpened:function(evt){var menu=evt["menu"];if(this.config.ALLOWED_ACTIONS[types.OPERATION_INT.ADD_MOUNT])if(!menu["mountMenu"]){var pSubMenu=new dijit.Menu({parentMenu:menu});this._patchMenu(pSubMenu);var local=new dijit.MenuItem({label:"Local",onClick:lang.hitch(this,"registerLocalMount"),"iconClass":"el-icon-folder-open"});pSubMenu.addChild(local);var db=new dijit.MenuItem({label:"Dropbox",onClick:lang.hitch(this,"registerDropbox"),
"iconClass":"fa-dropbox"});pSubMenu.addChild(db);var webdav=new dijit.MenuItem({label:"WEB DAV",onClick:lang.hitch(this,"registerWebDav"),"iconClass":"fa-cloud"});pSubMenu.addChild(webdav);var ftp=new dijit.MenuItem({label:"FTP",onClick:lang.hitch(this,"registerFTP"),"iconClass":"fa-cloud"});pSubMenu.addChild(ftp);var sftp=new dijit.MenuItem({label:"SFTP",onClick:lang.hitch(this,"registerSFTP"),"iconClass":"fa-cloud"});pSubMenu.addChild(sftp);menu.addChild(new dijit.PopupMenuItem({label:"Add",popup:pSubMenu,
iconClass:"el-icon-plus"}));menu["mountMenu"]=pSubMenu}},onReloaded:function(){0&&console.log("mount manager reloaded")},onMountDataReady:function(data){this.mountData=data;this.publish(types.EVENTS.ON_MOUNT_DATA_READY,{data:data});var thiz=this;setTimeout(function(){thiz.publish(types.EVENTS.ON_MOUNT_DATA_READY,{data:data})},4E3)},check:function(){if(!this.serviceObject)this._initService()},init:function(){if(this.ctx.getFileManager())this.serviceObject=this.ctx.getFileManager().serviceObject;this.inherited(arguments);
this.initReload();var thiz=this;this.ls(function(data){thiz.onMountDataReady(data)});try{this.subscribe(types.EVENTS.ON_SOURCE_MENU_OPEN,this.onSourceMenuOpened)}catch(e){debugger}},createResource:function(resource,test,readyCB){return this.callMethodEx(null,"createResource",[resource,test],readyCB,true)},removeResource:function(resource,test,readyCB){return this.callMethodEx(null,"removeResource",[resource,true],readyCB,true)},updateResource:function(resource,test,readyCB){return this.callMethodEx(null,
"updateResource",[resource,true],readyCB,true)},ls:function(readyCB){var thiz=this;var _cb=function(data){thiz.mountData=data;if(readyCB)readyCB(data)};return this.callMethod("ls",null,_cb,false)}})})},"dijit/tree/dndSource":function(){define("dijit/tree/dndSource",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/_base/lang","dojo/on","dojo/touch","dojo/topic","dojo/dnd/Manager","./_dndSelector"],function(array,connect,declare,domClass,domGeometry,
lang,on,touch,topic,DNDManager,_dndSelector){var dndSource=declare("dijit.tree.dndSource",_dndSelector,{isSource:true,accept:["text","treeNode"],copyOnly:false,dragThreshold:5,betweenThreshold:0,generateText:true,constructor:function(tree,params){if(!params)params={};lang.mixin(this,params);var type=params.accept instanceof Array?params.accept:["text","treeNode"];this.accept=null;if(type.length){this.accept={};for(var i=0;i<type.length;++i)this.accept[type[i]]=1}this.isDragging=false;this.mouseDown=
false;this.targetAnchor=null;this.targetBox=null;this.dropPosition="";this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource)domClass.add(this.node,"dojoDndSource");this.targetState="";if(this.accept)domClass.add(this.node,"dojoDndTarget");this.topics=[topic.subscribe("/dnd/source/over",lang.hitch(this,"onDndSourceOver")),topic.subscribe("/dnd/start",lang.hitch(this,"onDndStart")),topic.subscribe("/dnd/drop",lang.hitch(this,"onDndDrop")),topic.subscribe("/dnd/cancel",lang.hitch(this,"onDndCancel"))]},
checkAcceptance:function(){return true},copyState:function(keyPressed){return this.copyOnly||keyPressed},destroy:function(){this.inherited(arguments);var h;while(h=this.topics.pop())h.remove();this.targetAnchor=null},_onDragMouse:function(e,firstTime){var m=DNDManager.manager(),oldTarget=this.targetAnchor,newTarget=this.current,oldDropPosition=this.dropPosition;var newDropPosition="Over";if(newTarget&&this.betweenThreshold>0){if(!this.targetBox||oldTarget!=newTarget)this.targetBox=domGeometry.position(newTarget.rowNode,
true);if(e.pageY-this.targetBox.y<=this.betweenThreshold)newDropPosition="Before";else if(e.pageY-this.targetBox.y>=this.targetBox.h-this.betweenThreshold)newDropPosition="After"}if(firstTime||newTarget!=oldTarget||newDropPosition!=oldDropPosition){if(oldTarget)this._removeItemClass(oldTarget.rowNode,oldDropPosition);if(newTarget)this._addItemClass(newTarget.rowNode,newDropPosition);if(!newTarget)m.canDrop(false);else if(newTarget==this.tree.rootNode&&newDropPosition!="Over")m.canDrop(false);else{var sameId=
false;if(m.source==this)for(var dragId in this.selection){var dragNode=this.selection[dragId];if(dragNode.item===newTarget.item){sameId=true;break}}if(sameId)m.canDrop(false);else if(this.checkItemAcceptance(newTarget.rowNode,m.source,newDropPosition.toLowerCase())&&!this._isParentChildDrop(m.source,newTarget.rowNode))m.canDrop(true);else m.canDrop(false)}this.targetAnchor=newTarget;this.dropPosition=newDropPosition}},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled")return;
this.inherited(arguments);var m=DNDManager.manager();if(this.isDragging)this._onDragMouse(e);else if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>=this.dragThreshold||Math.abs(e.pageY-this._lastY)>=this.dragThreshold)){var nodes=this.getSelectedTreeNodes();if(nodes.length){if(nodes.length>1){var seen=this.selection,i=0,r=[],n,p;nextitem:while(n=nodes[i++]){for(p=n.getParent();p&&p!==this.tree;p=p.getParent())if(seen[p.id])continue nextitem;r.push(n)}nodes=r}nodes=array.map(nodes,
function(n){return n.domNode});m.startDrag(this,nodes,this.copyState(connect.isCopyKey(e)));this._onDragMouse(e,true)}}},onMouseDown:function(e){this.mouseDown=true;this.mouseButton=e.button;this._lastX=e.pageX;this._lastY=e.pageY;this.inherited(arguments)},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;this.inherited(arguments)}},onMouseOut:function(){this.inherited(arguments);this._unmarkTargetAnchor()},checkItemAcceptance:function(){return true},onDndSourceOver:function(source){if(this!=
source){this.mouseDown=false;this._unmarkTargetAnchor()}else if(this.isDragging){var m=DNDManager.manager();m.canDrop(false)}},onDndStart:function(source,nodes,copy){if(this.isSource)this._changeState("Source",this==source?copy?"Copied":"Moved":"");var accepted=this.checkAcceptance(source,nodes);this._changeState("Target",accepted?"":"Disabled");if(this==source)DNDManager.manager().overSource(this);this.isDragging=true},itemCreator:function(nodes){return array.map(nodes,function(node){return{"id":node.id,
"name":node.textContent||node.innerText||""}})},onDndDrop:function(source,nodes,copy){if(this.containerState=="Over"){var tree=this.tree,model=tree.model,target=this.targetAnchor;this.isDragging=false;var newParentItem;var insertIndex;var before;newParentItem=target&&target.item||tree.item;if(this.dropPosition=="Before"||this.dropPosition=="After"){newParentItem=target.getParent()&&target.getParent().item||tree.item;insertIndex=target.getIndexInParent();if(this.dropPosition=="After"){insertIndex=
target.getIndexInParent()+1;before=target.getNextSibling()&&target.getNextSibling().item}else before=target.item}else newParentItem=target&&target.item||tree.item;var newItemsParams;array.forEach(nodes,function(node,idx){var sourceItem=source.getItem(node.id);if(array.indexOf(sourceItem.type,"treeNode")!=-1)var childTreeNode=sourceItem.data,childItem=childTreeNode.item,oldParentItem=childTreeNode.getParent().item;if(source==this){if(typeof insertIndex=="number")if(newParentItem==oldParentItem&&childTreeNode.getIndexInParent()<
insertIndex)insertIndex-=1;model.pasteItem(childItem,oldParentItem,newParentItem,copy,insertIndex,before)}else if(model.isItem(childItem))model.pasteItem(childItem,oldParentItem,newParentItem,copy,insertIndex,before);else{if(!newItemsParams)newItemsParams=this.itemCreator(nodes,target.rowNode,source);model.newItem(newItemsParams[idx],newParentItem,insertIndex,before)}},this);this.tree._expandNode(target)}this.onDndCancel()},onDndCancel:function(){this._unmarkTargetAnchor();this.isDragging=false;this.mouseDown=
false;delete this.mouseButton;this._changeState("Source","");this._changeState("Target","")},onOverEvent:function(){this.inherited(arguments);DNDManager.manager().overSource(this)},onOutEvent:function(){this._unmarkTargetAnchor();var m=DNDManager.manager();if(this.isDragging)m.canDrop(false);m.outSource(this);this.inherited(arguments)},_isParentChildDrop:function(source,targetRow){if(!source.tree||source.tree!=this.tree)return false;var root=source.tree.domNode;var ids=source.selection;var node=targetRow.parentNode;
while(node!=root&&!ids[node.id])node=node.parentNode;return node.id&&ids[node.id]},_unmarkTargetAnchor:function(){if(!this.targetAnchor)return;this._removeItemClass(this.targetAnchor.rowNode,this.dropPosition);this.targetAnchor=null;this.targetBox=null;this.dropPosition=null},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved")}});return dndSource})},"xfile/views/FilePanel":function(){define("xfile/views/FilePanel",["dojo/_base/declare","dojo/dom-class","dojo/_base/lang",
"xide/layout/ContentPane","../widgets/LayoutSelector","../widgets/SourceSelector","xfile/factory","xide/types","./KeyboardHandler","./MouseHandler","./FilePanelPreview","dojo/cookie","dojo/json","xfile/views/History","dijit/form/FilteringSelect","xide/factory","xide/utils","xide/views/_ProgressIndicatorMixin","./FilePreview","./FileCoverView","xfile/views/SplitView","dojo/dom-geometry","dojo/dom-style","dijit/layout/_LayoutWidget"],function(declare,domClass,lang,ContentPane,LayoutSelector,SourceSelector,
factory,types,KeyboardHandler,MouseHandler,FilePanelPreview,cookie,json,History,FilteringSelect,wfactory,utils,_ProgressIndicatorMixin,FilePreview,FileCoverView,SplitView,domGeometry,domStyle,_LayoutWidget){return declare("xfiles/views/FilePanel",[ContentPane,_LayoutWidget,KeyboardHandler,MouseHandler,History,FilePanelPreview,_ProgressIndicatorMixin],{config:null,treeView:null,lazy:false,url:null,layoutSelector:null,sourceSelector:null,toolbar:null,store:null,model:null,currentView:null,activeItem:null,
isCompact:true,cookiePrefix:"left",currentLayoutMode:1,currentEditors:null,currentPanels:null,currentPreview:null,activePanel:null,allowFiles:true,clipboardManager:null,ignoreShow:false,_visible:false,sources:null,isDialog:false,isPicker:false,titlePrefix:"",titleSuffix:"",showStore:false,startPath:null,startLayout:null,panelMixin:null,iconClass:"fa-folder",destroy:function(){this.inherited(arguments);this.emptyCurrentView()},resize:function(){if(!this.domNode||!this.domNode.parentNode)return;this.inherited(arguments);
this.domNode.scrollTop=0;var parentBox=domGeometry.getMarginBox(this.domNode.parentNode);var dstHeight=parentBox.h;var toolbarBox=null;if(this.toolbar){toolbarBox=domGeometry.getMarginBox(this.toolbar.domNode);dstHeight-=toolbarBox.h}dstHeight-=10;if(!this.currentView)return;if(dstHeight>0&&this.currentView)domStyle.set(this.currentView.domNode,{height:dstHeight+"px"});if(this.currentView.resize)this.currentView.resize();if(this.currentView.onResize)this.currentView.onResize()},onPreview:function(){var item=
this.activeItem||this.findActiveItem();if(!item||item.directory!=null){0&&console.log("open preview failed, have no item to open!");return}this.doPreview(item)},getImageUrl:function(item,cache,params){if(this.delegate&&this.delegate.getImageUrl)return this.delegate.getImageUrl(item,cache,params);return null},getSources:function(){var sources=this.sources;if(this.delegate&&this.delegate.getSources)sources=this.delegate.getSources()||sources;return sources},getPermaLink:function(){var parent=this.getCurrentParent();
if(parent&&parent.path)return encodeURIComponent(parent.path);return null},restoreFocus:function(){if(this.currentView&&this.currentView.restoreFocus)this.currentView.restoreFocus()},setStaticData:function(data){if(this.currentView&&this.setStaticData)this.currentView.setStaticData(data)},onFind:function(){this.delegate.onFind(this.currentView,this.getCurrentParent(),this.store,this)},onTreeClicked:function(item){var nextTab=this.findTab();if(nextTab&&nextTab.currentView&&nextTab.currentView.openItem){nextTab.currentView.autoFocus=
false;nextTab.currentView.openItem(item);setTimeout(function(){nextTab.currentView.autoFocus=true},500)}},onClipBoardCopy:function(){var selection=this.getSelection();if(selection){var struct={items:selection};this.publish(types.EVENTS.ON_CLIPBOARD_COPY,struct,this)}},onClipBoardPaste:function(){this.publish(types.EVENTS.ON_CLIPBOARD_PASTE,{owner:this},this)},onClipBoardCut:function(){var selection=this.getSelection();if(selection){var struct={items:selection};this.publish(types.EVENTS.ON_CLIPBOARD_CUT,
struct,this)}},onBrowserFilesDropped:function(srcView,files){if(this.delegate&&this.delegate.onBrowserFilesDropped)this.delegate.onBrowserFilesDropped(this,files)},onBrowserUrlDropped:function(srcView,url){if(this.delegate&&this.delegate.onBrowserUrlDropped)this.delegate.onBrowserUrlDropped(this,url)},getShowingPanel:function(){if(this.activePanel)return this.activePanel;return null},findTab:function(evt){var activePanel=this.getShowingPanel();if(activePanel)return activePanel;if(this.owner)return this.owner;
return null},onTab:function(evt){if(this.delegate&&this.delegate.onTab){this.delegate.onTab(this);return}var nextTab=this.findTab();if(nextTab&&nextTab.currentView)if(nextTab.getActiveItem&&nextTab.getActiveItem()&&nextTab.currentView.focusItem){nextTab.currentView.focusItem(nextTab.getActiveItem(),false);return}else if(nextTab.currentView.focusFirstItem){nextTab.currentView.focusFirstItem();return}else console.error("have no tab item");else console.error("have no tab view");console.error("on tab failed! no active item!")},
onDidGoBack:function(item){this.updateFocus(item)},updateFocus:function(item){if(item)if(this.currentView&&this.currentView.focusItem)this.currentView.focusItem(item,true)},getActiveItem:function(){return this.activeItem},onBack:function(){if(this.currentView&&this.currentView.onBack)var backItem=this.currentView.onBack()},findActiveItem:function(){var item=null;if(this.activePanel)item=this.activePanel.getActiveItem();if(item)return item;if(this.owner)if(this.owner.currentView&&this.owner.currentView.getActiveItem&&
this.owner.currentView.getActiveItem())return this.owner.currentView.getActiveItem();if(this.currentView&&this.currentView.getActiveItem&&this.currentView.getActiveItem())item=this.currentView.getActiveItem();if(item)return item;else if(this.activeItem)item=this.activeItem;return null},getCurrentParent:function(){var result=null;if(this.currentView&&this.currentView.getCurrentParent())result=this.currentView.getCurrentParent();return result},getCopyDestination:function(){var item=this.findActiveItem();
if(item)if(item.directory!=null&&item.directory===true)return item;else{var parent=this.store.getParents(item,true);if(parent&&parent.length==1)item=parent[0]}return item},getSelection:function(item){var items=null;if(!item&&this.currentView&&this.currentView.getCurrentSelection(true)){items=this.currentView.getCurrentSelection(true);return items}else if(!item&&this.currentView&&this.currentView.getActiveItem())item=this.currentView.getActiveItem();return item},copyItem:function(item,inSel,inDst,
silent){var dstItem=inDst||this.getCopyDestination();var selection=inSel||this.getSelection(item);if(selection)if(lang.isArray(selection)){this.delegate.copyItems(this.currentView,selection,dstItem,this.store,silent);return}else this.delegate.copyItems(this.currentView,[selection],dstItem,silent)},moveItem:function(item,inSel,inDst,silent){var dstItem=inDst||this.getCopyDestination();var selection=inSel||this.getSelection(item);if(selection)if(lang.isArray(selection)){this.delegate.moveItems(this.currentView,
selection,dstItem,this.store,silent);return}else this.delegate.moveItems(this.currentView,[selection],dstItem,silent);return},mkdir:function(){var dst=this.getCurrentParent();if(dst)this.delegate.newItem(this,this.getSelection(null),dst,this.store,false,types.OPERATION.NEW_DIRECTORY)},mkfile:function(){var dst=this.getCurrentParent();if(dst)this.delegate.newItem(this,this.getSelection(null),dst,this.store,false,types.OPERATION.NEW_FILE)},deleteItem:function(item){var selection=this.getSelection(item);
var currentPathItem=this.getCurrentPathItem();if(selection){if(lang.isArray(selection));else{if(selection!=null&&(selection.isBack===true||selection.path==="."))return;selection=[selection]}this.delegate.deleteItems(this.currentView,selection,currentPathItem,this.store)}},loadPreferences:function(){if(this.allowLayoutCookies===false)return{layoutMode:types.FILE_PANEL_LAYOUT.LIST};var _cookie=this.cookiePrefix+"_"+this.region+"_layout_settings";var settings=cookie(_cookie);settings=settings?json.parse(settings):
{};if(settings.layoutMode==null)settings.layoutMode=types.FILE_PANEL_LAYOUT.LIST;return settings},onPreferencesChanged:function(mode){if(this.allowLayoutCookies===false)return{layoutMode:this.config.layoutMode};var _cookie=this.cookiePrefix+"_"+this.region+"_layout_settings";var settings=cookie();settings=settings?json.parse(settings):{};settings.layoutMode=mode||this.config.layoutMode;cookie(_cookie,json.stringify(settings));return settings},openMenu:function(){if(this.layoutSelector)this.layoutSelector.open()},
openSourceMenu:function(){if(this.sourceSelector)this.sourceSelector.open()},onRename:function(){if(this.currentView&&this.currentView.contextMenuHandler){var contextMenuHandler=this.currentView.contextMenuHandler;if(contextMenuHandler.onRename)contextMenuHandler.onRename(this)}},onPanelClosed:function(panel){this.currentPanels.remove(panel)},onFileClosed:function(editor){this.currentEditors.remove(editor)},closeItem:function(item){var idx=this.currentEditors.length-1;if(idx<0)idx=0;if(idx<=this.currentEditors.length){var lastEditor=
this.currentEditors[idx];if(lastEditor){this.currentEditors.remove(lastEditor);this.delegate.closeFile(lastEditor,this.activeItem,this)}}},openItemAlternate:function(item){item=item||this.activeItem;if(item&&item.directory!=null&&item.directory===true){var newPanel=this.delegate.openItemAlternate(item,this);if(newPanel)this.currentPanels.push(newPanel)}},getTitle:function(titleIn){var _t=""+titleIn;if(this.showStore&&this.store)_t=this.store.basePath+"://"+_t;return this.titlePrefix+_t+this.titleSuffix},
onDidOpenItem:function(item,wasBack){if(item&&item.path){if(!item._S.isItemLoaded(item))this.showStandBy(this.domNode,true,5E3);var newTitle=""+item.path;if(wasBack){var parents=item._S.getParents(item);if(parents&&parents.length==1)newTitle=parents[0].path;else newTitle=item.mount+"://"}var urlChunks=newTitle.split("/");if(urlChunks&&urlChunks.length>=1)newTitle=urlChunks[urlChunks.length-1];if(item.directory===true)this.set("title",this.getTitle(newTitle));var struct={store:this.store,item:item,
panel:this};this.publish(types.EVENTS.ON_DID_OPEN_ITEM,struct,this)}},openItem:function(item,params){if(item&&lang.isArray(item)&&item.length==1)item=item[0];item=item||this.activeItem;if(!item){0&&console.warn("have no item ! "+this.id);item=this.currentView.lastSelectedItem;if(item)this.activeItem=item}else if(this.currentView.lastSelectedItem!=this.activeItem)this.activeItem=item=this.currentView.lastSelectedItem;var wasBackItem=item&&(item.isBack===true||item.name==="..");if(item&&item.directory==
null&&this.delegate.openFile){var editor=this.delegate.openFile(item,null,params);if(editor){this.currentEditors.push(editor);return}}if(this.currentView&&this.currentView.openItem){this.currentView.openItem(item);this.onDidOpenItem(item,wasBackItem);if(this.currentView.onResize)this.currentView.onResize()}},openUrl:function(url){if(this.currentView&&this.currentView.doQuery){var res=this.currentView.doQuery(url,true);if(res)if(res.length>0)this.openItem(res[0]);else this.openItem(res)}},editMount:function(mount){if(this.delegate&&
this.delegate.editMount)this.delegate.editMount(mount)},removeMount:function(mount){if(this.delegate&&this.delegate.removeMount)this.delegate.removeMount(mount)},changeRoot:function(url){try{this.showStandBy(this.domNode,true,4E3);var newStore=this.delegate.onChangeRoot(this,url);this.store=newStore;if(!newStore.isNew())this.onStoreReady({store:newStore});this.publish(types.EVENTS.RESIZE,{},this)}catch(e){debugger}},emptyCurrentView:function(){if(this.treeView){utils.destroyWidget(this.treeView);
this.treeView=null}if(this.gridView){utils.destroyWidget(this.gridView);this.gridView=null}if(this.currentPreview){utils.destroyWidget(this.currentPreview);this.currentPreview=null}if(this.currentSplitView){utils.destroyWidget(this.currentSplitView);this.currentSplitView=null}this.currentView=null;this.resize()},setActiveItem:function(item){this.activeItem=item},getCurrentPath:function(){var item=null;if(this.currentView&&this.currentView.getActiveItem())item=this.currentView.getActiveItem();else if(this.activeItem)item=
this.activeItem;if(item)if(item.directory!=null&&item.directory===true)return item.path;else{var parent=this.store.getParents(item,true);if(parent&&parent.length==1)item=parent[0]}if(item)return item.path;return"./"},getCurrentPathItem:function(){var item=this.getCurrentParent();if(item)return item;if(!item&&this.currentView&&this.currentView.backItem)item=this.currentView.backItem;else if(this.currentView&&this.currentView.getActiveItem())item=this.currentView.getActiveItem();else if(this.activeItem)item=
this.activeItem;if(item)if(item.directory!=null&&item.directory===true)return item;else{var parent=this.store.getParents(item,true);if(parent&&parent.length==1)item=parent[0]}return item},beforeStoreChange:function(){var cView=this.currentView?this.currentView:null;if(cView){var parent=this.getCopyDestination();var thiz=this;if(parent){var struct={store:thiz.store,dst:{path:parent?parent.path:"./"},operation:types.OPERATION.COMPRESS};this.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,thiz)}else;
}else;},onLayoutModeChangedAfter:function(mode){var thiz=this;switch(mode){case types.FILE_PANEL_LAYOUT.TREE:case types.FILE_PANEL_LAYOUT.THUMB:case types.FILE_PANEL_LAYOUT.LIST:case types.FILE_PANEL_LAYOUT.PREVIEW:case types.FILE_PANEL_LAYOUT.COVER:if(!this.sourceSelector&&this.config.PANEL_OPTIONS.ALLOW_SOURCE_SELECTOR){this._createSourceSelector(this.toolbar.domNode);dojo.place(this.sourceSelector.domNode,this.toolbar.domNode,"last")}break;case types.FILE_PANEL_LAYOUT.SPLIT_HORIZONTAL:case types.FILE_PANEL_LAYOUT.SPLIT_VERTICAL:if(this.sourceSelector){utils.destroyWidget(this.sourceSelector);
this.sourceSelector=null}break}this.resize()},onLayoutModeChanged:function(mode){this.config.layoutMode=mode||types.FILE_PANEL_LAYOUT.LIST;var nextView=null,thiz=this,ctrArgs=null;this.beforeStoreChange();this.emptyCurrentView();var currentPath=this.getCurrentPath();var currentPathItem=this.getCurrentPathItem();var restoreItem=currentPath;if(currentPath)restoreItem=this.store.getItemByPath(null,currentPath);this.currentLayoutMode=mode;this.onPreferencesChanged(mode);domClass.remove(this.domNode,"fileGridTree");
domClass.remove(this.domNode,"fileGridList");domClass.remove(this.domNode,"fileGridThumb");switch(mode){case types.FILE_PANEL_LAYOUT.TREE:nextView=this._createTreeView();domClass.add(this.domNode,"fileGridTree");break;case types.FILE_PANEL_LAYOUT.THUMB:nextView=this.gridView=this._createGridView(types.FILE_PANEL_LAYOUT.THUMB);if(currentPathItem)setTimeout(function(){thiz.gridView.activeItem=restoreItem;thiz.gridView.updateGrid(restoreItem)},200);domClass.add(this.domNode,"fileGridThumb");break;case types.FILE_PANEL_LAYOUT.LIST:nextView=
this.gridView=this._createGridView(types.FILE_PANEL_LAYOUT.LIST);if(currentPathItem)setTimeout(function(){thiz.gridView.activeItem=restoreItem;thiz.gridView.updateGrid(restoreItem)},0);domClass.add(this.domNode,"fileGridList");break;case types.FILE_PANEL_LAYOUT.PREVIEW:nextView=utils.addWidget(FilePreview,{config:this.config,owner:this.owner},this.delegate,this.containerNode,true);this.currentPreview=nextView;break;case types.FILE_PANEL_LAYOUT.COVER:nextView=utils.addWidget(FileCoverView,{config:this.config},
this,this.containerNode,true);this.currentPreview=nextView;nextView.openItem(currentPathItem);break;case types.FILE_PANEL_LAYOUT.SPLIT_VERTICAL:ctrArgs={ctx:this.ctx,config:this.config,store:this.store,delegate:this.delegate,defaultStore:this.defaultStore,defaultStoreOptions:this.defaultStoreOptions,region:this.region,owner:this.owner};if(this.panelMixin)ctrArgs.panelMixin=this.panelMixin;nextView=utils.addWidget(SplitView,ctrArgs,this.delegate,this.containerNode,true);this.currentSplitView=nextView;
break;case types.FILE_PANEL_LAYOUT.SPLIT_HORIZONTAL:ctrArgs={ctx:this.ctx,config:this.config,store:this.store,delegate:this.delegate,defaultStore:this.defaultStore,defaultStoreOptions:this.defaultStoreOptions,mode:"horizontal",region:this.region,owner:this.owner};if(this.panelMixin)ctrArgs.panelMixin=this.panelMixin;nextView=utils.addWidget(SplitView,ctrArgs,this.delegate,this.containerNode,true);this.currentSplitView=nextView;break}this.currentView=nextView;this.onLayoutModeChangedAfter(mode)},isVisible:function(){return this._visible},
onHide:function(){this._visible=false},onShow:function(){this._visible=true;if(this.ignoreShow){this.ignoreShow=false;return}if(this.lazy){this.initWidgets();this.lazy=false;this.set("title",this.titlePrefix+this.url+this.titleSuffix);this.delegate.onShowPanel(this,true);return}if(this.delegate.onShowPanel)this.delegate.onShowPanel(this,false);var struct={store:this.store,panel:this};this.publish(types.EVENTS.ON_SHOW_PANEL,struct,this);this.publish(types.EVENTS.ON_VIEW_SHOW,{view:this.currentView})},
onPanelShow:function(panel){if(this.ignoreShow){this.ignoreShow=false;return}this.activePanel=panel},onOpenProperties:function(item){if(this.delegate&&this.delegate.openProperties)this.delegate.openProperties(item)},onClose:function(){this.publish(types.EVENTS.ON_PANEL_CLOSED,{panel:this},this)},_createLayoutSelector:function(where,layout){this.layoutSelector=new LayoutSelector({delegate:this,className:"fileLayoutSelector",layout:layout,config:this.config});where.appendChild(this.layoutSelector.domNode);
this.layoutSelector.startup()},_createSourceSelector:function(where){this.sourceSelector=new SourceSelector({delegate:this,className:"sourceSelector",config:this.config});where.appendChild(this.sourceSelector.domNode);this.sourceSelector.startup()},_createTreeView:function(){if(!this.model)this.model=factory.createModel(this.store);this.treeView=factory.createTreeView("Files",this.config,this.containerNode,this,this.ctx,this.store,this.model);this.currentView=this.treeView;return this.treeView},onGridKey:function(evt){if(this.onKey)this.onKey(evt);
if(this.currentView)this.currentView.ctlrKeyDown=this.ctlrKeyDown},onGridKeyUp:function(evt){if(this.onKeyUp)this.onKeyUp(evt);if(this.currentView)this.currentView.ctlrKeyDown=this.ctlrKeyDown},onGridMouseDouble:function(evt){if(this.onMouseEventDouble)this.onMouseEventDouble(evt)},onGridMouse:function(evt){if(this.onMouseEvent)this.onMouseEvent(evt)},onItemSelected:function(item){this.setActiveItem(item)},_createGridView:function(layoutMode,parent){this.config.layoutMode=layoutMode;var columns={};
if(this.isCompact){this.config.keyboardDelegate=this;this.config.mouseDelegate=this;this.config.hasTrail=false;this.config.hasControls=false;this.config.clipboardManager=this.clipboardManager;if(!this.config.columnFlags){columns[types.FILE_GRID_COLUMNS.NAME]=true;columns[types.FILE_GRID_COLUMNS.SIZE]=this.allowFiles;columns[types.FILE_GRID_COLUMNS.MODIFIED]=false;this.config.columnFlags=columns}this.config.allowFiles=this.allowFiles}else if(!this.config.columnFlags){columns[types.FILE_GRID_COLUMNS.NAME]=
true;columns[types.FILE_GRID_COLUMNS.SIZE]=true;columns[types.FILE_GRID_COLUMNS.MODIFIED]=true;this.config.columnFlags=columns}if(layoutMode==types.FILE_PANEL_LAYOUT.THUMB)this.config.columnFlags[types.FILE_GRID_COLUMNS.SIZE]=false;this.gridView=factory.createGidView("Files",this.config,parent||this.containerNode,this,this.ctx,this.store,this.model,this.isCompact?"fileGridViewCompact fileGridView":"fileGridViewLarge fileGridView");this.gridView.delegate=this;this.currentView=this.gridView;if(this.gridView.onResize)this.gridView.onResize();
return this.gridView},_createFilteringSelect:function(node){this.filterSelect=new FilteringSelect({id:"stateSelect",name:"state",value:"CA",required:false,store:this.store,searchAttr:"path"},dojo.doc.createElement("div"));node.appendChild(this.filterSelect.domNode);this.filterSelect.startup()},onReload:function(panel,button){var cView=panel?panel.currentView?panel.currentView:null:null;if(panel&&cView&&panel.getCurrentPathItem){var parent=panel.getCurrentPathItem();if(!parent)parent={path:"./"};var thiz=
panel;if(parent){var struct={store:thiz.store,dst:{path:parent?parent.path:"./"},operation:types.OPERATION.RELOAD};thiz.publish(types.EVENTS.BEFORE_STORE_CHANGE,struct,thiz);setTimeout(function(){thiz.publish(types.EVENTS.STORE_CHANGED,struct,thiz);if(cView.onReload)cView.onReload(struct)},100)}else console.error("onReload::have no parent")}else console.error("onReload::have no current view")},_addReloadButton:function(parent){this.reloadButton=wfactory.createToolbarButton(parent,"el-icon-refresh",
"fileReloadButton","","",this.onReload,this);domClass.remove(this.reloadButton.iconNode,"dijitReset");domClass.add(this.reloadButton.iconNode,"actionToolbarButtonElusive");return this.reloadButton},initWidgets:function(data){var thiz=this;var hadToolbarItem=false;if(!this.toolbar){this.toolbar=new dijit.Toolbar({style:"padding:0 !important;"},dojo.doc.createElement("div"));this.containerNode.appendChild(this.toolbar.domNode);this.toolbar.startup();domClass.add(this.toolbar.domNode,"fileViewToolbarTop ui-state-default");
if(this.config.ALLOWED_ACTIONS.RELOAD==null)this.config.ALLOWED_ACTIONS.RELOAD=true;if(this.config.ALLOWED_ACTIONS.RELOAD){this._addReloadButton(this.toolbar.domNode);hadToolbarItem=true}}var _prefs=this.loadPreferences();if(!this.layoutSelector&&this.config.PANEL_OPTIONS.ALLOW_LAYOUT_SELECTOR){thiz._createLayoutSelector(this.toolbar.domNode,_prefs.layoutMode);hadToolbarItem=true}if(!this.sourceSelector&&this.config.PANEL_OPTIONS.ALLOW_SOURCE_SELECTOR){thiz._createSourceSelector(this.toolbar.domNode);
dojo.place(this.sourceSelector.domNode,this.toolbar.domNode,"last");hadToolbarItem=true}if(!hadToolbarItem){utils.destroyWidget(this.toolbar);this.toolbar=null}if(this.startLayout)this.onLayoutModeChanged(this.startLayout);else if(_prefs!=null&&_prefs.layoutMode!=null)this.onLayoutModeChanged(_prefs.layoutMode);else{if(!this.treeView)this._createTreeView();setTimeout(function(){thiz.resize();thiz.treeView.resize();thiz.parentContainer.resize()},500)}},onItemLoaded:function(item){this.showStandBy(this.domNode,
false)},onStoreReady:function(evt){this.showStandBy(this.domNode,false);if(this.currentLayoutMode==types.FILE_PANEL_LAYOUT.SPLIT_VERTICAL||this.currentLayoutMode==types.FILE_PANEL_LAYOUT.SPLIT_HORIZONTAL)return;var thiz=this;if(evt.store===this.store)setTimeout(function(){var _prefs=thiz.loadPreferences();thiz.onLayoutModeChanged(_prefs.layoutMode);thiz.publish(types.EVENTS.RESIZE,{},this);if(thiz.startPath)switch(thiz.currentLayoutMode){case types.FILE_PANEL_LAYOUT.PREVIEW:case types.FILE_PANEL_LAYOUT.COVER:case types.FILE_PANEL_LAYOUT.SPLIT_HORIZONTAL:case types.FILE_PANEL_LAYOUT.SPLIT_VERTICAL:break;
default:thiz.goTo(thiz.startPath)}},100)},goTo:function(path){var thiz=this;var store=this.store;var _readyCB=function(item){thiz.openItem(item)};setTimeout(function(){store.getItem(path,true,_readyCB)},500)},startup:function(){this.inherited(arguments);this.initHistory();this.set("iconClass","fa-folder");this.currentEditors=[];if(!this.currentPanels)this.currentPanels=[];if(!this.lazy){this.initWidgets();if(this.startPath){switch(this.currentLayoutMode){case types.FILE_PANEL_LAYOUT.PREVIEW:case types.FILE_PANEL_LAYOUT.COVER:case types.FILE_PANEL_LAYOUT.TREE:case types.FILE_PANEL_LAYOUT.SPLIT_HORIZONTAL:case types.FILE_PANEL_LAYOUT.SPLIT_VERTICAL:break;
default:this.goTo(this.startPath)}this.startPath=null}}this.subscribe(types.EVENTS.ON_FILE_STORE_READY,this.onStoreReady);this.subscribe(types.EVENTS.ITEM_SELECTED,this.updatePreview)}})})},"dijit/form/_CheckBoxMixin":function(){define("dijit/form/_CheckBoxMixin",["dojo/_base/declare","dojo/dom-attr"],function(declare,domAttr){return declare("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:false,_aria_attr:"aria-checked",_setReadOnlyAttr:function(value){this._set("readOnly",value);
domAttr.set(this.focusNode,"readOnly",value)},_setLabelAttr:undefined,_getSubmitValue:function(value){return value==null||value===""?"on":value},_setValueAttr:function(newValue){newValue=this._getSubmitValue(newValue);this._set("value",newValue);domAttr.set(this.focusNode,"value",newValue)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));domAttr.set(this.focusNode,"value",this.value)},_onClick:function(e){if(this.readOnly){e.stopPropagation();
e.preventDefault();return false}return this.inherited(arguments)}})})},"xide/widgets/Button":function(){define(["dojo/_base/declare","dojo/dom-class","dijit/form/Button","./_CSSMixin"],function(declare,domClass,Button,CSSMixin){return declare("xide.widgets.Button",[Button,CSSMixin],{currentItem:null,buttons:null,iconClass:"",title:"title",disabled:false,iconNode:null,linkNode:null,setDisabled:function(disabled){this.set("disabled",disabled)},postMixInProperties:function(){this.inherited(arguments)},
startup:function(){this.inherited(arguments);domClass.remove(this.iconNode,"dijitReset");this.setDisabled(this.disabled)}})})},"dojo/html":function(){define("dojo/html",["./_base/kernel","./_base/lang","./_base/array","./_base/declare","./dom","./dom-construct","./parser"],function(kernel,lang,darray,declare,dom,domConstruct,parser){var html={};lang.setObject("dojo.html",html);var idCounter=0;html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,
"")};html._emptyNode=domConstruct.empty;html._setNodeContent=function(node,cont){domConstruct.empty(node);if(cont){if(typeof cont=="string")cont=domConstruct.toDom(cont,node.ownerDocument);if(!cont.nodeType&&lang.isArrayLike(cont))for(var startlen=cont.length,i=0;i<cont.length;i=startlen==cont.length?i+1:0)domConstruct.place(cont[i],node,"last");else domConstruct.place(cont,node,"last")}return node};html._ContentSetter=declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,
extractContent:false,parseContent:false,parserScope:kernel._scopeName,startup:true,constructor:function(params,node){lang.mixin(this,params||{});node=this.node=dom.byId(this.node||node);if(!this.id)this.id=["Setter",node?node.id||node.tagName:"",idCounter++].join("_")},set:function(cont,params){if(undefined!==cont)this.content=cont;if(params)this._mixin(params);this.onBegin();this.setContent();var ret=this.onEnd();if(ret&&ret.then)return ret;else return this.node},setContent:function(){var node=this.node;
if(!node)throw new Error(this.declaredClass+": setContent given no node");try{node=html._setNodeContent(node,this.content)}catch(e){var errMess=this.onContentError(e);try{node.innerHTML=errMess}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e)}}this.node=node},empty:function(){if(this.parseDeferred){if(!this.parseDeferred.isResolved())this.parseDeferred.cancel();delete this.parseDeferred}if(this.parseResults&&this.parseResults.length){darray.forEach(this.parseResults,
function(w){if(w.destroy)w.destroy()});delete this.parseResults}domConstruct.empty(this.node)},onBegin:function(){var cont=this.content;if(lang.isString(cont)){if(this.cleanContent)cont=html._secureForInnerHtml(cont);if(this.extractContent){var match=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(match)cont=match[1]}}this.empty();this.content=cont;return this.node},onEnd:function(){if(this.parseContent)this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;
delete this.node;delete this.content},onContentError:function(err){return"Error occurred setting content: "+err},onExecError:function(err){return"Error occurred executing scripts: "+err},_mixin:function(params){var empty={},key;for(key in params){if(key in empty)continue;this[key]=params[key]}},_parse:function(){var rootNode=this.node;try{var inherited={};darray.forEach(["dir","lang","textDir"],function(name){if(this[name])inherited[name]=this[name]},this);var self=this;this.parseDeferred=parser.parse({rootNode:rootNode,
noStart:!this.startup,inherited:inherited,scope:this.parserScope}).then(function(results){return self.parseResults=results})}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(type,err,consoleText){var errText=this["on"+type+"Error"].call(this,err);if(consoleText)console.error(consoleText,err);else if(errText)html._setNodeContent(this.node,errText,true)}});html.set=function(node,cont,params){if(undefined==cont){0&&console.warn("dojo.html.set: no cont argument provided, using empty string");
cont=""}if(!params)return html._setNodeContent(node,cont,true);else{var op=new html._ContentSetter(lang.mixin(params,{content:cont,node:node}));return op.set()}};return html})},"dojox/math/BigInteger-ext":function(){define("dojox/math/BigInteger-ext",["dojo","dojox","dojox/math/BigInteger"],function(dojo,dojox){dojo.experimental("dojox.math.BigInteger-ext");var BigInteger=dojox.math.BigInteger,nbi=BigInteger._nbi,nbv=BigInteger._nbv,nbits=BigInteger._nbits,Montgomery=BigInteger._Montgomery;function bnClone(){var r=
nbi();this._copyTo(r);return r}function bnIntValue(){if(this.s<0)if(this.t==1)return this[0]-this._DV;else{if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this._DB)-1)<<this._DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(r){return Math.floor(Math.LN2*this._DB/Math.log(r))}function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||
this.t==1&&this[0]<=0)return 0;else return 1}function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||b<2||b>36)return"0";var cs=this._chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r="";this._divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y._divRemTo(d,y,z)}return z.intValue().toString(b)+r}function bnpFromRadix(s,b){this._fromInt(0);if(b==null)b=10;var cs=this._chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=
intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0)mi=true;continue}w=b*w+x;if(++j>=cs){this._dMultiply(d);this._dAddOffset(w,0);j=0;w=0}}if(j>0){this._dMultiply(Math.pow(b,j));this._dAddOffset(w,0)}if(mi)BigInteger.ZERO._subTo(this,this)}function bnpFromNumber(a,b,c){if("number"==typeof b)if(a<2)this._fromInt(1);else{this._fromNumber(a,c);if(!this.testBit(a-1))this._bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);if(this._isEven())this._dAddOffset(1,0);while(!this.isProbablePrime(b)){this._dAddOffset(2,
0);if(this.bitLength()>a)this._subTo(BigInteger.ONE.shiftLeft(a-1),this)}}else{var x=[],t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0)x[0]&=(1<<t)-1;else x[0]=0;this._fromString(x,256)}}function bnToByteArray(){var i=this.t,r=[];r[0]=this.s;var p=this._DB-i*this._DB%8,d,k=0;if(i-- >0){if(p<this._DB&&(d=this[i]>>p)!=(this.s&this._DM)>>p)r[k++]=d|this.s<<this._DB-p;while(i>=0){if(p<8){d=(this[i]&(1<<p)-1)<<8-p;d|=this[--i]>>(p+=this._DB-8)}else{d=this[i]>>(p-=8)&255;if(p<=0){p+=this._DB;--i}}if((d&
128)!=0)d|=-256;if(k==0&&(this.s&128)!=(d&128))++k;if(k>0||d!=this.s)r[k++]=d}}return r}function bnEquals(a){return this.compareTo(a)==0}function bnMin(a){return this.compareTo(a)<0?this:a}function bnMax(a){return this.compareTo(a)>0?this:a}function bnpBitwiseTo(a,op,r){var i,f,m=Math.min(a.t,this.t);for(i=0;i<m;++i)r[i]=op(this[i],a[i]);if(a.t<this.t){f=a.s&this._DM;for(i=m;i<this.t;++i)r[i]=op(this[i],f);r.t=this.t}else{f=this.s&this._DM;for(i=m;i<a.t;++i)r[i]=op(f,a[i]);r.t=a.t}r.s=op(this.s,a.s);
r._clamp()}function op_and(x,y){return x&y}function bnAnd(a){var r=nbi();this._bitwiseTo(a,op_and,r);return r}function op_or(x,y){return x|y}function bnOr(a){var r=nbi();this._bitwiseTo(a,op_or,r);return r}function op_xor(x,y){return x^y}function bnXor(a){var r=nbi();this._bitwiseTo(a,op_xor,r);return r}function op_andnot(x,y){return x&~y}function bnAndNot(a){var r=nbi();this._bitwiseTo(a,op_andnot,r);return r}function bnNot(){var r=nbi();for(var i=0;i<this.t;++i)r[i]=this._DM&~this[i];r.t=this.t;
r.s=~this.s;return r}function bnShiftLeft(n){var r=nbi();if(n<0)this._rShiftTo(-n,r);else this._lShiftTo(n,r);return r}function bnShiftRight(n){var r=nbi();if(n<0)this._lShiftTo(-n,r);else this._rShiftTo(n,r);return r}function lbit(x){if(x==0)return-1;var r=0;if((x&65535)==0){x>>=16;r+=16}if((x&255)==0){x>>=8;r+=8}if((x&15)==0){x>>=4;r+=4}if((x&3)==0){x>>=2;r+=2}if((x&1)==0)++r;return r}function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)if(this[i]!=0)return i*this._DB+lbit(this[i]);if(this.s<0)return this.t*
this._DB;return-1}function cbit(x){var r=0;while(x!=0){x&=x-1;++r}return r}function bnBitCount(){var r=0,x=this.s&this._DM;for(var i=0;i<this.t;++i)r+=cbit(this[i]^x);return r}function bnTestBit(n){var j=Math.floor(n/this._DB);if(j>=this.t)return this.s!=0;return(this[j]&1<<n%this._DB)!=0}function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);this._bitwiseTo(r,op,r);return r}function bnSetBit(n){return this._changeBit(n,op_or)}function bnClearBit(n){return this._changeBit(n,op_andnot)}function bnFlipBit(n){return this._changeBit(n,
op_xor)}function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]+a[i];r[i++]=c&this._DM;c>>=this._DB}if(a.t<this.t){c+=a.s;while(i<this.t){c+=this[i];r[i++]=c&this._DM;c>>=this._DB}c+=this.s}else{c+=this.s;while(i<a.t){c+=a[i];r[i++]=c&this._DM;c>>=this._DB}c+=a.s}r.s=c<0?-1:0;if(c>0)r[i++]=c;else if(c<-1)r[i++]=this._DV+c;r.t=i;r._clamp()}function bnAdd(a){var r=nbi();this._addTo(a,r);return r}function bnSubtract(a){var r=nbi();this._subTo(a,r);return r}function bnMultiply(a){var r=
nbi();this._multiplyTo(a,r);return r}function bnDivide(a){var r=nbi();this._divRemTo(a,r,null);return r}function bnRemainder(a){var r=nbi();this._divRemTo(a,null,r);return r}function bnDivideAndRemainder(a){var q=nbi(),r=nbi();this._divRemTo(a,q,r);return[q,r]}function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this._clamp()}function bnpDAddOffset(n,w){while(this.t<=w)this[this.t++]=0;this[w]+=n;while(this[w]>=this._DV){this[w]-=this._DV;if(++w>=this.t)this[this.t++]=0;++this[w]}}
function NullExp(){}function nNop(x){return x}function nMulTo(x,y,r){x._multiplyTo(y,r)}function nSqrTo(x,r){x._squareTo(r)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(e){return this._exp(e,new NullExp)}function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n);r.s=0;r.t=i;while(i>0)r[--i]=0;var j;for(j=r.t-this.t;i<j;++i)r[i+this.t]=this.am(0,a[i],r,i,0,this.t);for(j=Math.min(a.t,n);i<j;++i)this.am(0,
a[i],r,i,0,n-i);r._clamp()}function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;r.s=0;while(--i>=0)r[i]=0;for(i=Math.max(n-this.t,0);i<a.t;++i)r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n);r._clamp();r._drShiftTo(1,r)}function Barrett(m){this.r2=nbi();this.q3=nbi();BigInteger.ONE._dlShiftTo(2*m.t,this.r2);this.mu=this.r2.divide(m);this.m=m}function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);else if(x.compareTo(this.m)<0)return x;else{var r=nbi();x._copyTo(r);this.reduce(r);
return r}}function barrettRevert(x){return x}function barrettReduce(x){x._drShiftTo(this.m.t-1,this.r2);if(x.t>this.m.t+1){x.t=this.m.t+1;x._clamp()}this.mu._multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m._multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(x.compareTo(this.r2)<0)x._dAddOffset(1,this.m.t+1);x._subTo(this.r2,x);while(x.compareTo(this.m)>=0)x._subTo(this.m,x)}function barrettSqrTo(x,r){x._squareTo(r);this.reduce(r)}function barrettMulTo(x,y,r){x._multiplyTo(y,r);this.reduce(r)}Barrett.prototype.convert=
barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z;if(i<=0)return r;else if(i<18)k=1;else if(i<48)k=3;else if(i<144)k=4;else if(i<768)k=5;else k=6;if(i<8)z=new Classic(m);else if(m._isEven())z=new Barrett(m);else z=new Montgomery(m);var g=[],n=3,k1=k-1,km=(1<<k)-1;g[1]=z.convert(this);if(k>1){var g2=nbi();z.sqrTo(g[1],g2);while(n<=
km){g[n]=nbi();z.mulTo(g2,g[n-2],g[n]);n+=2}}var j=e.t-1,w,is1=true,r2=nbi(),t;i=nbits(e[j])-1;while(j>=0){if(i>=k1)w=e[j]>>i-k1&km;else{w=(e[j]&(1<<i+1)-1)<<k1-i;if(j>0)w|=e[j-1]>>this._DB+i-k1}n=k;while((w&1)==0){w>>=1;--n}if((i-=n)<0){i+=this._DB;--j}if(is1){g[w]._copyTo(r);is1=false}else{while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2}if(n>0)z.sqrTo(r,r2);else{t=r;r=r2;r2=t}z.mulTo(r2,g[w],r)}while(j>=0&&(e[j]&1<<i)==0){z.sqrTo(r,r2);t=r;r=r2;r2=t;if(--i<0){i=this._DB-1;--j}}}return z.revert(r)}function bnGCD(a){var x=
this.s<0?this.negate():this.clone();var y=a.s<0?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0)return x;if(i<g)g=i;if(g>0){x._rShiftTo(g,x);y._rShiftTo(g,y)}while(x.signum()>0){if((i=x.getLowestSetBit())>0)x._rShiftTo(i,x);if((i=y.getLowestSetBit())>0)y._rShiftTo(i,y);if(x.compareTo(y)>=0){x._subTo(y,x);x._rShiftTo(1,x)}else{y._subTo(x,y);y._rShiftTo(1,y)}}if(g>0)y._lShiftTo(g,y);return y}function bnpModInt(n){if(n<=0)return 0;var d=
this._DV%n,r=this.s<0?n-1:0;if(this.t>0)if(d==0)r=this[0]%n;else for(var i=this.t-1;i>=0;--i)r=(d*r+this[i])%n;return r}function bnModInverse(m){var ac=m._isEven();if(this._isEven()&&ac||m.signum()==0)return BigInteger.ZERO;var u=m.clone(),v=this.clone();var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);while(u.signum()!=0){while(u._isEven()){u._rShiftTo(1,u);if(ac){if(!a._isEven()||!b._isEven()){a._addTo(this,a);b._subTo(m,b)}a._rShiftTo(1,a)}else if(!b._isEven())b._subTo(m,b);b._rShiftTo(1,b)}while(v._isEven()){v._rShiftTo(1,
v);if(ac){if(!c._isEven()||!d._isEven()){c._addTo(this,c);d._subTo(m,d)}c._rShiftTo(1,c)}else if(!d._isEven())d._subTo(m,d);d._rShiftTo(1,d)}if(u.compareTo(v)>=0){u._subTo(v,u);if(ac)a._subTo(c,a);b._subTo(d,b)}else{v._subTo(u,v);if(ac)c._subTo(a,c);d._subTo(b,d)}}if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(d.compareTo(m)>=0)return d.subtract(m);if(d.signum()<0)d._addTo(m,d);else return d;if(d.signum()<0)return d.add(m);else return d}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,
41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var i,x=this.abs();if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)if(x[0]==
lowprimes[i])return true;return false}if(x._isEven())return false;i=1;while(i<lowprimes.length){var m=lowprimes[i],j=i+1;while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++];m=x._modInt(m);while(i<j)if(m%lowprimes[i++]==0)return false}return x._millerRabin(t)}function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0)return false;var r=n1.shiftRight(k);t=t+1>>1;if(t>lowprimes.length)t=lowprimes.length;var a=nbi();for(var i=0;i<t;++i){a._fromInt(lowprimes[i]);
var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1;while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this);if(y.compareTo(BigInteger.ONE)==0)return false}if(y.compareTo(n1)!=0)return false}}return true}dojo.extend(BigInteger,{_chunkSize:bnpChunkSize,_toRadix:bnpToRadix,_fromRadix:bnpFromRadix,_fromNumber:bnpFromNumber,_bitwiseTo:bnpBitwiseTo,_changeBit:bnpChangeBit,_addTo:bnpAddTo,_dMultiply:bnpDMultiply,_dAddOffset:bnpDAddOffset,_multiplyLowerTo:bnpMultiplyLowerTo,
_multiplyUpperTo:bnpMultiplyUpperTo,_modInt:bnpModInt,_millerRabin:bnpMillerRabin,clone:bnClone,intValue:bnIntValue,byteValue:bnByteValue,shortValue:bnShortValue,signum:bnSigNum,toByteArray:bnToByteArray,equals:bnEquals,min:bnMin,max:bnMax,and:bnAnd,or:bnOr,xor:bnXor,andNot:bnAndNot,not:bnNot,shiftLeft:bnShiftLeft,shiftRight:bnShiftRight,getLowestSetBit:bnGetLowestSetBit,bitCount:bnBitCount,testBit:bnTestBit,setBit:bnSetBit,clearBit:bnClearBit,flipBit:bnFlipBit,add:bnAdd,subtract:bnSubtract,multiply:bnMultiply,
divide:bnDivide,remainder:bnRemainder,divideAndRemainder:bnDivideAndRemainder,modPow:bnModPow,modInverse:bnModInverse,pow:bnPow,gcd:bnGCD,isProbablePrime:bnIsProbablePrime});return dojox.math.BigInteger})},"url:dijit/templates/MenuBar.html":'\x3cdiv class\x3d"dijitMenuBar dijitMenuPassive" data-dojo-attach-point\x3d"containerNode" role\x3d"menubar" tabIndex\x3d"${tabIndex}"\n\t \x3e\x3c/div\x3e\n',"xide/widgets/_HTMLTemplateMixin":function(){define(["dojo/_base/declare","dojox/xml/parser","dojo/dom-attr",
"dojo/_base/lang"],function(declare,xmlParser,domAttr,lang){return declare("xide.widgets._HTMLTemplateMixin",null,{setMixins:function(htmlTemplate){var isWrapped=false;var xml=xmlParser.parse(htmlTemplate||this.templateString);if(xml&&xml.firstChild&&xml.firstChild.attributes&&xml.firstChild.attributes.length==1){isWrapped=true;var dataAttriubte=domAttr.get(xml.firstChild,"data-dojo-props");if(dataAttriubte)try{var jsonData=dojo.fromJson("{"+dataAttriubte+"}");if(jsonData)lang.mixin(this,jsonData)}catch(e){console.error("couldnt parse template")}}if(isWrapped==
false)this.templateString="\x3cdiv\x3e"+this.templateString+"\x3c/div\x3e"},parseHTMLTemplate:function(data){if(data&&data.htmlTemplate){if(data.htmlTemplate.indexOf("htm")==-1)this.templateString=data.htmlTemplate;else this.templateString=this._getHTMLTemplate(data.htmlTemplate);this.setMixins(this.templateString)}},_getHTMLTemplate:function(fileName){var prefix="";if(this.taskPool.taskInfo)prefix+=ctx.getApplication().getTaskMediaFolder(this.taskPool.taskInfo.path);var path=prefix+fileName;return this._getText(path)},
_getText:function(url){var result;var def=dojo.xhrGet({url:url,sync:true,handleAs:"text",load:function(text){result=text}});return""+result+""}})})},"dojo/dom-style":function(){define("dojo/dom-style",["./sniff","./dom"],function(has,dom){var getComputedStyle,style={};if(has("webkit"))getComputedStyle=function(node){var s;if(node.nodeType==1){var dv=node.ownerDocument.defaultView;s=dv.getComputedStyle(node,null);if(!s&&node.style){node.style.display="";s=dv.getComputedStyle(node,null)}}return s||
{}};else if(has("ie")&&(has("ie")<9||has("quirks")))getComputedStyle=function(node){return node.nodeType==1&&node.currentStyle?node.currentStyle:{}};else getComputedStyle=function(node){if(!node){console.error("have no node");return{}}if(!node.ownerDocument){console.error("have no ownerDocument");return{}}if(!node.ownerDocument.defaultView){console.error("have no defaultView");return{}}return node.nodeType==1?node.ownerDocument.defaultView.getComputedStyle(node,null):{}};style.getComputedStyle=getComputedStyle;
var toPixel;if(!has("ie"))toPixel=function(element,value){return parseFloat(value)||0};else toPixel=function(element,avalue){if(!avalue)return 0;if(avalue=="medium")return 4;if(avalue.slice&&avalue.slice(-2)=="px")return parseFloat(avalue);var s=element.style,rs=element.runtimeStyle,cs=element.currentStyle,sLeft=s.left,rsLeft=rs.left;rs.left=cs.left;try{s.left=avalue;avalue=s.pixelLeft}catch(e){avalue=0}s.left=sLeft;rs.left=rsLeft;return avalue};style.toPixelValue=toPixel;var astr="DXImageTransform.Microsoft.Alpha";
var af=function(n,f){try{return n.filters.item(astr)}catch(e){return f?{}:null}};var _getOpacity=has("ie")<9||has("ie")<10&&has("quirks")?function(node){try{return af(node).Opacity/100}catch(e){return 1}}:function(node){return getComputedStyle(node).opacity};var _setOpacity=has("ie")<9||has("ie")<10&&has("quirks")?function(node,opacity){var ov=opacity*100,opaque=opacity==1;node.style.zoom=opaque?"":1;if(!af(node)){if(opaque)return opacity;node.style.filter+=" progid:"+astr+"(Opacity\x3d"+ov+")"}else af(node,
1).Opacity=ov;af(node,1).Enabled=!opaque;if(node.tagName.toLowerCase()=="tr")for(var td=node.firstChild;td;td=td.nextSibling)if(td.tagName.toLowerCase()=="td")_setOpacity(td,opacity);return opacity}:function(node,opacity){return node.style.opacity=opacity};var _pixelNamesCache={left:true,top:true};var _pixelRegExp=/margin|padding|width|height|max|min|offset/;function _toStyleValue(node,type,value){type=type.toLowerCase();if(has("ie")){if(value=="auto"){if(type=="height")return node.offsetHeight;if(type==
"width")return node.offsetWidth}if(type=="fontweight")switch(value){case 700:return"bold";case 400:default:return"normal"}}if(!(type in _pixelNamesCache))_pixelNamesCache[type]=_pixelRegExp.test(type);return _pixelNamesCache[type]?toPixel(node,value):value}var _floatStyle=has("ie")?"styleFloat":"cssFloat",_floatAliases={"cssFloat":_floatStyle,"styleFloat":_floatStyle,"float":_floatStyle};style.get=function getStyle(node,name){var n=dom.byId(node),l=arguments.length,op=name=="opacity";if(l==2&&op)return _getOpacity(n);
name=_floatAliases[name]||name;var s=style.getComputedStyle(n);return l==1?s:_toStyleValue(n,name,s[name]||n.style[name])};style.set=function setStyle(node,name,value){var n=dom.byId(node),l=arguments.length,op=name=="opacity";name=_floatAliases[name]||name;if(l==3)return op?_setOpacity(n,value):n.style[name]=value;for(var x in name)style.set(node,x,name[x]);return style.getComputedStyle(n)};return style})},"url:xide/views/templates/TitlePane.html":'\x3cdiv\x3e\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode_ el-icon-caret-right" role\x3d"presentation"\x3e\x3c/span\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"dojox/layout/ToggleSplitter":function(){define("dojox/layout/ToggleSplitter",["dojo","dijit","dijit/layout/BorderContainer"],function(dojo,dijit){dojo.experimental("dojox.layout.ToggleSplitter");var ToggleSplitter=dojo.declare("dojox.layout.ToggleSplitter",dijit.layout._Splitter,{container:null,child:null,region:null,state:"full",_closedSize:"0",baseClass:"dojoxToggleSplitter",templateString:'\x3cdiv class\x3d"dijitSplitter dojoxToggleSplitter" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse"\x3e'+
'\x3cdiv dojoAttachPoint\x3d"toggleNode" class\x3d"dijitSplitterThumb dojoxToggleSplitterIcon" tabIndex\x3d"0" role\x3d"separator" '+'dojoAttachEvent\x3d"onmousedown:_onToggleNodeMouseDown,onclick:_toggle,onmouseenter:_onToggleNodeMouseMove,onmouseleave:_onToggleNodeMouseMove,onfocus:_onToggleNodeMouseMove,onblur:_onToggleNodeMouseMove"\x3e'+'\x3cspan class\x3d"dojoxToggleSplitterA11y" dojoAttachPoint\x3d"a11yText"\x3e\x3c/span\x3e\x3c/div\x3e'+"\x3c/div\x3e",postCreate:function(){this.inherited(arguments);
var region=this.region;dojo.addClass(this.domNode,this.baseClass+region.charAt(0).toUpperCase()+region.substring(1))},startup:function(){this.inherited(arguments);var parentPane=this.child,paneNode=this.child.domNode,intPaneSize=dojo.style(paneNode,this.horizontal?"height":"width");this.domNode.setAttribute("aria-controls",paneNode.id);dojo.forEach(["toggleSplitterState","toggleSplitterFullSize","toggleSplitterCollapsedSize"],function(name){var pname=name.substring("toggleSplitter".length);pname=
pname.charAt(0).toLowerCase()+pname.substring(1);if(name in this.child)this[pname]=this.child[name]},this);if(!this.fullSize)this.fullSize=this.state=="full"?intPaneSize+"px":"75px";this._openStyleProps=this._getStyleProps(paneNode,"full");this._started=true;this.set("state",this.state);return this},_onKeyPress:function(evt){if(this.state=="full")this.inherited(arguments);if(evt.charCode==dojo.keys.SPACE||evt.keyCode==dojo.keys.ENTER){this._toggle(evt);dojo.stopEvent(evt)}},_onToggleNodeMouseDown:function(evt){dojo.stopEvent(evt);
this.toggleNode.focus()},_startDrag:function(e){if(this.state=="full")this.inherited(arguments)},_stopDrag:function(e){this.inherited(arguments);this.toggleNode.blur()},_toggle:function(evt){var state;switch(this.state){case "full":state=this.collapsedSize?"collapsed":"closed";break;case "collapsed":state="closed";break;default:state="full"}this.set("state",state)},_onToggleNodeMouseMove:function(evt){var baseClass=this.baseClass,toggleNode=this.toggleNode,on=this.state=="full"||this.state=="collapsed",
leave=evt.type=="mouseout"||evt.type=="blur";dojo.toggleClass(toggleNode,baseClass+"IconOpen",leave&&on);dojo.toggleClass(toggleNode,baseClass+"IconOpenHover",!leave&&on);dojo.toggleClass(toggleNode,baseClass+"IconClosed",leave&&!on);dojo.toggleClass(toggleNode,baseClass+"IconClosedHover",!leave&&!on)},_handleOnChange:function(preState){var paneNode=this.child.domNode,openProps,paneStyle,dim=this.horizontal?"height":"width";if(this.state=="full"){var styleProps=dojo.mixin({display:"block",overflow:"auto",
visibility:"visible"},this._openStyleProps);styleProps[dim]=this._openStyleProps&&this._openStyleProps[dim]?this._openStyleProps[dim]:this.fullSize;dojo.style(this.domNode,"cursor","");dojo.style(paneNode,styleProps)}else if(this.state=="collapsed"){paneStyle=dojo.getComputedStyle(paneNode);openProps=this._getStyleProps(paneNode,"full",paneStyle);this._openStyleProps=openProps;dojo.style(this.domNode,"cursor","auto");dojo.style(paneNode,dim,this.collapsedSize)}else{if(!this.collapsedSize){paneStyle=
dojo.getComputedStyle(paneNode);openProps=this._getStyleProps(paneNode,"full",paneStyle);this._openStyleProps=openProps}var closedProps=this._getStyleProps(paneNode,"closed",paneStyle);dojo.style(this.domNode,"cursor","auto");dojo.style(paneNode,closedProps)}this._setStateClass();if(this.container._started)this.container._layoutChildren(this.region)},_getStyleProps:function(paneNode,state,paneStyle){if(!paneStyle)paneStyle=dojo.getComputedStyle(paneNode);var styleProps={},dim=this.horizontal?"height":
"width";styleProps["overflow"]=state!="closed"?paneStyle["overflow"]:"hidden";styleProps["visibility"]=state!="closed"?paneStyle["visibility"]:"hidden";styleProps[dim]=state!="closed"?paneNode.style[dim]||paneStyle[dim]:this._closedSize;var edgeNames=["Top","Right","Bottom","Left"];dojo.forEach(["padding","margin","border"],function(pname){for(var i=0;i<edgeNames.length;i++){var fullName=pname+edgeNames[i];if(pname=="border")fullName+="Width";if(undefined!==paneStyle[fullName])styleProps[fullName]=
state!="closed"?paneStyle[fullName]:0}});return styleProps},_setStateClass:function(){var arrow="\x26#9652",region=this.region.toLowerCase(),baseClass=this.baseClass,toggleNode=this.toggleNode,on=this.state=="full"||this.state=="collapsed",focused=this.focused;dojo.toggleClass(toggleNode,baseClass+"IconOpen",on&&!focused);dojo.toggleClass(toggleNode,baseClass+"IconClosed",!on&&!focused);dojo.toggleClass(toggleNode,baseClass+"IconOpenHover",on&&focused);dojo.toggleClass(toggleNode,baseClass+"IconClosedHover",
!on&&focused);if(region=="top"&&on||region=="bottom"&&!on)arrow="\x26#9650";else if(region=="top"&&!on||region=="bottom"&&on)arrow="\x26#9660";else if(region=="right"&&on||region=="left"&&!on)arrow="\x26#9654";else if(region=="right"&&!on||region=="left"&&on)arrow="\x26#9664";this.a11yText.innerHTML=arrow},_setStateAttr:function(state){if(!this._started)return;var preState=this.state;this.state=state;this._handleOnChange(preState);var evtName;switch(state){case "full":this.domNode.setAttribute("aria-expanded",
true);evtName="onOpen";break;case "collapsed":this.domNode.setAttribute("aria-expanded",true);evtName="onCollapsed";break;default:this.domNode.setAttribute("aria-expanded",false);evtName="onClosed"}this[evtName](this.child)},onOpen:function(pane){},onCollapsed:function(pane){},onClosed:function(pane){}});dojo.extend(dijit._Widget,{toggleSplitterState:"full",toggleSplitterFullSize:"",toggleSplitterCollapsedSize:""});return ToggleSplitter})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang",
"./_base/array","dojo/when"],function(declare,lang,array,when){return declare("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name])return apn[name];return apn[name]={s:"_"+name+"Setter",g:"_"+name+"Getter"}},postscript:function(params){if(params)this.set(params)},_get:function(name,names){return typeof this[names.g]==="function"?this[names.g]():this[name]},get:function(name){return this._get(name,this._getAttrNames(name))},set:function(name,
value){if(typeof name==="object"){for(var x in name)if(name.hasOwnProperty(x)&&x!="_watchCallbacks")this.set(x,name[x]);return this}var names=this._getAttrNames(name),oldValue=this._get(name,names),setter=this[names.s],result;if(typeof setter==="function")result=setter.apply(this,Array.prototype.slice.call(arguments,1));else this[name]=value;if(this._watchCallbacks){var self=this;when(result,function(){self._watchCallbacks(name,oldValue,value)})}return this},_changeAttrValue:function(name,value){var oldValue=
this.get(name);this[name]=value;if(this._watchCallbacks)this._watchCallbacks(name,oldValue,value);return this},watch:function(name,callback){var callbacks=this._watchCallbacks;if(!callbacks){var self=this;callbacks=this._watchCallbacks=function(name,oldValue,value,ignoreCatchall){var notify=function(propertyCallbacks){if(propertyCallbacks){propertyCallbacks=propertyCallbacks.slice();for(var i=0,l=propertyCallbacks.length;i<l;i++)propertyCallbacks[i].call(self,name,oldValue,value)}};notify(callbacks["_"+
name]);if(!ignoreCatchall)notify(callbacks["*"])}}if(!callback&&typeof name==="function"){callback=name;name="*"}else name="_"+name;var propertyCallbacks=callbacks[name];if(typeof propertyCallbacks!=="object")propertyCallbacks=callbacks[name]=[];propertyCallbacks.push(callback);var handle={};handle.unwatch=handle.remove=function(){var index=array.indexOf(propertyCallbacks,callback);if(index>-1)propertyCallbacks.splice(index,1)};return handle}})})},"dojo/selector/lite":function(){define(["../has",
"../_base/kernel"],function(has,dojo){var testDiv=document.createElement("div");var matchesSelector=testDiv.matchesSelector||testDiv.webkitMatchesSelector||testDiv.mozMatchesSelector||testDiv.msMatchesSelector||testDiv.oMatchesSelector;var querySelectorAll=testDiv.querySelectorAll;var unionSplit=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g;has.add("dom-matches-selector",!!matchesSelector);has.add("dom-qsa",!!querySelectorAll);var liteEngine=function(selector,root){if(combine&&selector.indexOf(",")>
-1)return combine(selector,root);var doc=root?root.ownerDocument||root:dojo.doc||document,match=(querySelectorAll?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(selector);root=root||doc;if(match){if(match[2]){var found=dojo.byId?dojo.byId(match[2]):doc.getElementById(match[2]);if(!found||match[1]&&match[1]!=found.tagName.toLowerCase())return[];if(root!=doc){var parent=found;while(parent!=root){parent=parent.parentNode;if(!parent)return[]}}return match[3]?
liteEngine(match[3],found):[found]}if(match[3]&&root.getElementsByClassName)return root.getElementsByClassName(match[4]);var found;if(match[5]){found=root.getElementsByTagName(match[5]);if(match[4]||match[6])selector=(match[4]||"")+match[6];else return found}}if(querySelectorAll)if(root.nodeType===1&&root.nodeName.toLowerCase()!=="object")return useRoot(root,selector,root.querySelectorAll);else return root.querySelectorAll(selector);else if(!found)found=root.getElementsByTagName("*");var results=
[];for(var i=0,l=found.length;i<l;i++){var node=found[i];if(node.nodeType==1&&jsMatchesSelector(node,selector,root))results.push(node)}return results};var useRoot=function(context,query,method){var oldContext=context,old=context.getAttribute("id"),nid=old||"__dojo__",hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);if(relativeHierarchySelector&&!hasParent)return[];if(!old)context.setAttribute("id",nid);else nid=nid.replace(/'/g,"\\$\x26");if(relativeHierarchySelector&&
hasParent)context=context.parentNode;var selectors=query.match(unionSplit);for(var i=0;i<selectors.length;i++)selectors[i]="[id\x3d'"+nid+"'] "+selectors[i];query=selectors.join(",");try{return method.call(context,query)}finally{if(!old)oldContext.removeAttribute("id")}};if(!has("dom-matches-selector"))var jsMatchesSelector=function(){var caseFix=testDiv.tagName=="div"?"toLowerCase":"toUpperCase";var selectorTypes={"":function(tagName){tagName=tagName[caseFix]();return function(node){return node.tagName==
tagName}},".":function(className){var classNameSpaced=" "+className+" ";return function(node){return node.className.indexOf(className)>-1&&(" "+node.className+" ").indexOf(classNameSpaced)>-1}},"#":function(id){return function(node){return node.id==id}}};var attrComparators={"^\x3d":function(attrValue,value){return attrValue.indexOf(value)==0},"*\x3d":function(attrValue,value){return attrValue.indexOf(value)>-1},"$\x3d":function(attrValue,value){return attrValue.substring(attrValue.length-value.length,
attrValue.length)==value},"~\x3d":function(attrValue,value){return(" "+attrValue+" ").indexOf(" "+value+" ")>-1},"|\x3d":function(attrValue,value){return(attrValue+"-").indexOf(value+"-")==0},"\x3d":function(attrValue,value){return attrValue==value},"":function(attrValue,value){return true}};function attr(name,value,type){var firstChar=value.charAt(0);if(firstChar=='"'||firstChar=="'")value=value.slice(1,-1);value=value.replace(/\\/g,"");var comparator=attrComparators[type||""];return function(node){var attrValue=
node.getAttribute(name);return attrValue&&comparator(attrValue,value)}}function ancestor(matcher){return function(node,root){while((node=node.parentNode)!=root)if(matcher(node,root))return true}}function parent(matcher){return function(node,root){node=node.parentNode;return matcher?node!=root&&matcher(node,root):node==root}}var cache={};function and(matcher,next){return matcher?function(node,root){return next(node)&&matcher(node,root)}:next}return function(node,selector,root){var matcher=cache[selector];
if(!matcher){if(selector.replace(/(?:\s*([> ])\s*)|(#|\.)?((?:\\.|[\w-])+)|\[\s*([\w-]+)\s*(.?=)?\s*("(?:\\.|[^"])+"|'(?:\\.|[^'])+'|(?:\\.|[^\]])*)\s*\]/g,function(t,combinator,type,value,attrName,attrType,attrValue){if(value)matcher=and(matcher,selectorTypes[type||""](value.replace(/\\/g,"")));else if(combinator)matcher=(combinator==" "?ancestor:parent)(matcher);else if(attrName)matcher=and(matcher,attr(attrName,attrValue,attrType));return""}))throw new Error("Syntax error in query");if(!matcher)return true;
cache[selector]=matcher}return matcher(node,root)}}();if(!has("dom-qsa"))var combine=function(selector,root){var selectors=selector.match(unionSplit);var indexed=[];for(var i=0;i<selectors.length;i++){selector=new String(selectors[i].replace(/\s*$/,""));selector.indexOf=escape;var results=liteEngine(selector,root);for(var j=0,l=results.length;j<l;j++){var node=results[j];indexed[node.sourceIndex]=node}}var totalResults=[];for(i in indexed)totalResults.push(indexed[i]);return totalResults};liteEngine.match=
matchesSelector?function(node,selector,root){if(root&&root.nodeType!=9)return useRoot(root,selector,function(query){return matchesSelector.call(node,query)});return matchesSelector.call(node,selector)}:jsMatchesSelector;return liteEngine})},"xfile/views/ToggleSplitter":function(){define("xfile/views/ToggleSplitter",["dojo","dijit","xide/types","xide/mixins/EventedMixin"],function(dojo,dijit,types,EventedMixin){var ToggleSplitter=dojo.declare("xfile.views.ToggleSplitter",[dijit.layout._Splitter,EventedMixin],
{container:null,child:null,region:null,state:"full",_closedSize:"0",delegate:null,baseClass:"dojoxToggleSplitter",templateString:'\x3cdiv class\x3d"dijitSplitter dojoxToggleSplitter" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse"\x3e'+'\x3cdiv dojoAttachPoint\x3d"toggleNode" class\x3d"dijitSplitterThumb dojoxToggleSplitterIcon" tabIndex\x3d"0" role\x3d"separator" '+'dojoAttachEvent\x3d"onmousedown:_onToggleNodeMouseDown,onclick:_toggle,onmouseenter:_onToggleNodeMouseMove,onmouseleave:_onToggleNodeMouseMove,onfocus:_onToggleNodeMouseMove,onblur:_onToggleNodeMouseMove"\x3e'+
'\x3cspan class\x3d"dojoxToggleSplitterA11y" dojoAttachPoint\x3d"a11yText"\x3e\x3c/span\x3e\x3c/div\x3e'+"\x3c/div\x3e",postMixInProperties:function(){this.inherited(arguments);if(this.container&&this.container.cookieName)this._cookieName=this.container.cookieName+"_"+this.region},postCreate:function(){this.inherited(arguments);var region=this.region;dojo.addClass(this.domNode,this.baseClass+region.charAt(0).toUpperCase()+region.substring(1))},startup:function(){this.inherited(arguments);var parentPane=
this.child,paneNode=this.child.domNode,intPaneSize=dojo.style(paneNode,this.horizontal?"height":"width");this.domNode.setAttribute("aria-controls",paneNode.id);dojo.forEach(["toggleSplitterState","toggleSplitterFullSize","toggleSplitterCollapsedSize"],function(name){var pname=name.substring("toggleSplitter".length);pname=pname.charAt(0).toLowerCase()+pname.substring(1);if(name in this.child)this[pname]=this.child[name]},this);if(!this.fullSize)this.fullSize=this.state=="full"?intPaneSize+"px":"75px";
this._openStyleProps=this._getStyleProps(paneNode,"full");this._started=true;this.set("state",this.state);return this},_onKeyPress:function(evt){if(this.state=="full")this.inherited(arguments);if(evt.charCode==dojo.keys.SPACE||evt.keyCode==dojo.keys.ENTER)this._toggle(evt)},_onToggleNodeMouseDown:function(evt){dojo.stopEvent(evt);this.toggleNode.focus()},_startDrag:function(e){if(this.state=="full")this.inherited(arguments)},_stopDrag:function(e){this.inherited(arguments);this.toggleNode.blur();this.publish(types.EVENTS.RESIZE,
{},this)},_toggleEx:function(evt,state){var state;switch(this.state){case "full":state=this.collapsedSize?"collapsed":"closed";break;case "collapsed":state="closed";break;default:state="full"}this.set("state",state);var thiz=this;setTimeout(function(){if(thiz.delegate&&thiz.delegate.onChangeToggleSplitterState)thiz.delegate.onChangeToggleSplitterState(thiz,state)},100)},_toggle:function(evt){try{this._toggleEx(evt)}catch(e){}this.publish(types.EVENTS.RESIZE,{},this)},_onToggleNodeMouseMove:function(evt){var baseClass=
this.baseClass,toggleNode=this.toggleNode,on=this.state=="full"||this.state=="collapsed",leave=evt.type=="mouseout"||evt.type=="blur";dojo.toggleClass(toggleNode,baseClass+"IconOpen",leave&&on);dojo.toggleClass(toggleNode,baseClass+"IconOpenHover",!leave&&on);dojo.toggleClass(toggleNode,baseClass+"IconClosed",leave&&!on);dojo.toggleClass(toggleNode,baseClass+"IconClosedHover",!leave&&!on)},_handleOnChange:function(preState){var paneNode=this.child.domNode,openProps,paneStyle,dim=this.horizontal?"height":
"width";if(this.state=="full"){var styleProps=dojo.mixin({display:"block",overflow:"auto",visibility:"visible"},this._openStyleProps);styleProps[dim]=this._openStyleProps&&this._openStyleProps[dim]?this._openStyleProps[dim]:this.fullSize;dojo.style(this.domNode,"cursor","");dojo.style(paneNode,styleProps)}else if(this.state=="collapsed"){paneStyle=dojo.getComputedStyle(paneNode);openProps=this._getStyleProps(paneNode,"full",paneStyle);this._openStyleProps=openProps;dojo.style(this.domNode,"cursor",
"auto");dojo.style(paneNode,dim,this.collapsedSize)}else{if(!this.collapsedSize){paneStyle=dojo.getComputedStyle(paneNode);openProps=this._getStyleProps(paneNode,"full",paneStyle);this._openStyleProps=openProps}var closedProps=this._getStyleProps(paneNode,"closed",paneStyle);dojo.style(this.domNode,"cursor","auto");dojo.style(paneNode,closedProps)}this._setStateClass();if(this.container._started)this.container._layoutChildren(this.region)},_getStyleProps:function(paneNode,state,paneStyle){if(!paneStyle)paneStyle=
dojo.getComputedStyle(paneNode);var styleProps={},dim=this.horizontal?"height":"width";styleProps["overflow"]=state!="closed"?paneStyle["overflow"]:"hidden";styleProps["visibility"]=state!="closed"?paneStyle["visibility"]:"hidden";styleProps[dim]=state!="closed"?paneNode.style[dim]||paneStyle[dim]:this._closedSize;var edgeNames=["Top","Right","Bottom","Left"];dojo.forEach(["padding","margin","border"],function(pname){for(var i=0;i<edgeNames.length;i++){var fullName=pname+edgeNames[i];if(pname=="border")fullName+=
"Width";if(undefined!==paneStyle[fullName])styleProps[fullName]=state!="closed"?paneStyle[fullName]:0}});return styleProps},_setStateClass:function(){var arrow="\x26#9652",region=this.region.toLowerCase(),baseClass=this.baseClass,toggleNode=this.toggleNode,on=this.state=="full"||this.state=="collapsed",focused=this.focused;dojo.toggleClass(toggleNode,baseClass+"IconOpen",on&&!focused);dojo.toggleClass(toggleNode,baseClass+"IconClosed",!on&&!focused);dojo.toggleClass(toggleNode,baseClass+"IconOpenHover",
on&&focused);dojo.toggleClass(toggleNode,baseClass+"IconClosedHover",!on&&focused);if(region=="top"&&on||region=="bottom"&&!on)arrow="\x26#9650";else if(region=="top"&&!on||region=="bottom"&&on)arrow="\x26#9660";else if(region=="right"&&on||region=="left"&&!on)arrow="\x26#9654";else if(region=="right"&&!on||region=="left"&&on)arrow="\x26#9664";this.a11yText.innerHTML=arrow},_setStateAttr:function(state){if(!this._started)return;var preState=this.state;this.state=state;this._handleOnChange(preState);
var evtName;switch(state){case "full":this.domNode.setAttribute("aria-expanded",true);evtName="onOpen";break;case "collapsed":this.domNode.setAttribute("aria-expanded",true);evtName="onCollapsed";break;default:this.domNode.setAttribute("aria-expanded",false);evtName="onClosed"}this[evtName](this.child)},onOpen:function(pane){},onCollapsed:function(pane){},onClosed:function(pane){}});dojo.extend(dijit._Widget,{toggleSplitterState:"full",toggleSplitterFullSize:"",toggleSplitterCollapsedSize:""});return ToggleSplitter})},
"dijit/layout/LayoutContainer":function(){define("dijit/layout/LayoutContainer",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","../_WidgetBase","./_LayoutWidget","./utils"],function(array,declare,domClass,domStyle,kernel,lang,_WidgetBase,_LayoutWidget,layoutUtils){var LayoutContainer=declare("dijit.layout.LayoutContainer",_LayoutWidget,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){if(this._started)return;array.forEach(this.getChildren(),
this._setupChild,this);this.inherited(arguments)},_setupChild:function(child){this.inherited(arguments);var region=child.region;if(region){domClass.add(child.domNode,this.baseClass+"Pane");var ltr=this.isLeftToRight();if(region=="leading")region=ltr?"left":"right";if(region=="trailing")region=ltr?"right":"left";child.region=region}},_getOrderedChildren:function(){var wrappers=array.map(this.getChildren(),function(child,idx){return{pane:child,weight:[child.region=="center"?Infinity:0,child.layoutPriority,
(this.design=="sidebar"?1:-1)*(/top|bottom/.test(child.region)?1:-1),idx]}},this);wrappers.sort(function(a,b){var aw=a.weight,bw=b.weight;for(var i=0;i<aw.length;i++)if(aw[i]!=bw[i])return aw[i]-bw[i];return 0});return array.map(wrappers,function(w){return w.pane})},layout:function(){layoutUtils.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren())},addChild:function(child,insertIndex){this.inherited(arguments);if(this._started)this.layout()},removeChild:function(child){this.inherited(arguments);
if(this._started)this.layout();domClass.remove(child.domNode,this.baseClass+"Pane");domStyle.set(child.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});domStyle.set(child.domNode,/top|bottom/.test(child.region)?"width":"height","auto")}});LayoutContainer.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};lang.extend(_WidgetBase,LayoutContainer.ChildWidgetProperties);return LayoutContainer})},"dojo/dnd/autoscroll":function(){define(["../_base/lang","../sniff",
"../_base/window","../dom-geometry","../dom-style","../window"],function(lang,has,win,domGeom,domStyle,winUtils){var exports={};lang.setObject("dojo.dnd.autoscroll",exports);exports.getViewport=winUtils.getBox;exports.V_TRIGGER_AUTOSCROLL=32;exports.H_TRIGGER_AUTOSCROLL=32;exports.V_AUTOSCROLL_VALUE=16;exports.H_AUTOSCROLL_VALUE=16;var viewport,doc=win.doc,maxScrollTop=Infinity,maxScrollLeft=Infinity;exports.autoScrollStart=function(d){doc=d;viewport=winUtils.getBox(doc);var html=win.body(doc).parentNode;
maxScrollTop=Math.max(html.scrollHeight-viewport.h,0);maxScrollLeft=Math.max(html.scrollWidth-viewport.w,0)};exports.autoScroll=function(e){var v=viewport||winUtils.getBox(doc),html=win.body(doc).parentNode,dx=0,dy=0;if(e.clientX<exports.H_TRIGGER_AUTOSCROLL)dx=-exports.H_AUTOSCROLL_VALUE;else if(e.clientX>v.w-exports.H_TRIGGER_AUTOSCROLL)dx=Math.min(exports.H_AUTOSCROLL_VALUE,maxScrollLeft-html.scrollLeft);if(e.clientY<exports.V_TRIGGER_AUTOSCROLL)dy=-exports.V_AUTOSCROLL_VALUE;else if(e.clientY>
v.h-exports.V_TRIGGER_AUTOSCROLL)dy=Math.min(exports.V_AUTOSCROLL_VALUE,maxScrollTop-html.scrollTop);window.scrollBy(dx,dy)};exports._validNodes={"div":1,"p":1,"td":1};exports._validOverflow={"auto":1,"scroll":1};exports.autoScrollNodes=function(e){var b,t,w,h,rx,ry,dx=0,dy=0,oldLeft,oldTop;for(var n=e.target;n;){if(n.nodeType==1&&n.tagName.toLowerCase()in exports._validNodes){var s=domStyle.getComputedStyle(n),overflow=s.overflow.toLowerCase()in exports._validOverflow,overflowX=s.overflowX.toLowerCase()in
exports._validOverflow,overflowY=s.overflowY.toLowerCase()in exports._validOverflow;if(overflow||overflowX||overflowY){b=domGeom.getContentBox(n,s);t=domGeom.position(n,true)}if(overflow||overflowX){w=Math.min(exports.H_TRIGGER_AUTOSCROLL,b.w/2);rx=e.pageX-t.x;if(has("webkit")||has("opera"))rx+=win.body().scrollLeft;dx=0;if(rx>0&&rx<b.w){if(rx<w)dx=-w;else if(rx>b.w-w)dx=w;oldLeft=n.scrollLeft;n.scrollLeft=n.scrollLeft+dx}}if(overflow||overflowY){h=Math.min(exports.V_TRIGGER_AUTOSCROLL,b.h/2);ry=
e.pageY-t.y;if(has("webkit")||has("opera"))ry+=win.body().scrollTop;dy=0;if(ry>0&&ry<b.h){if(ry<h)dy=-h;else if(ry>b.h-h)dy=h;oldTop=n.scrollTop;n.scrollTop=n.scrollTop+dy}}if(dx||dy)return}try{n=n.parentNode}catch(x){n=null}}exports.autoScroll(e)};return exports})},"xide/views/BeanTreeView":function(){define(["dojo/_base/declare","xide/types","xide/utils"],function(declare,types,utils){return declare("xide/views/BeanTreeView",null,{itemSelectEvent:"",itemGroupSelectEvent:"",lastSelectedTreeNode:null,
delegate:{getItemActions:function(){return[]}},getMetaValue:function(item,title){var meta=utils.toObject(item["user"]);if(meta)return utils.getCIInputValueByName(meta,title);return null},isGroup:function(item){if(item)return utils.toBoolean(item.isDir)===true;else return false},getItemActions:function(){return this.delegate.getItemActions()},hasItemActions:function(){return this.delegate.hasItemActions()},getItem:function(){if(this.delegate&&this.delegate.getItem)return this.delegate.getItem();return null},
onItemClear:function(){if(this.lastSelectedTreeNode){this.lastSelectedTreeNode.setSelected(false);this.lastSelectedTreeNode=null}},onTreeClicked:function(item,nodeWidget){this.lastSelectedTreeNode=nodeWidget;this.inherited(arguments);this.onItemClick(item)},onItemClick:function(item){if(!item)return;this.delegate.setCurrentItem(item);if(item)if(utils.toBoolean(item.isDir)!==true)this.delegate.openItemSettings(item);this.publish([this.isGroup(item)?this.itemGroupSelectEvent:this.itemSelectEvent,types.EVENTS.ON_ITEM_SELECTED],
{item:item,owner:this})},reload:function(store){utils.destroyWidget(this.tree);this.tree=null;this.model=null;this.store=store;this.initWidgets()}})})},"xide/layout/ContentPane":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-style","dijit/layout/ContentPane","dijit/registry","dojo/dom-geometry","xide/widgets/_CSSMixin","xide/widgets/_PermaMixin","xide/views/_ProgressIndicatorMixin","xide/types","xide/mixins/EventedMixin","xide/mixins/ReloadMixin"],function(array,declare,domStyle,
ContentPane,registry,domGeometry,CSSMixin,_PermaMixin,_ProgressIndicatorMixin,types,EventedMixin,ReloadMixin){return declare("xide.layout.ContentPane",[ContentPane,CSSMixin,_PermaMixin,_ProgressIndicatorMixin,EventedMixin,ReloadMixin],{cssClass:"layoutContainer",region:"center",closable:false,adjustChildsToWidth:false,destroy:function(){this.inherited(arguments)},onClose:function(){if(this.parentContainer)this.parentContainer.removeChild(this);this.publish(types.EVENTS.ON_PANEL_CLOSED,{});this.inherited(arguments)},
sameWidth:function(){var max=0;var children=this.containerNode.children;for(var i=0;i<children.length;i++){var child=children[i];if(!child.style)continue;domStyle.set(child,{width:"auto"});var box=domGeometry.getContentBox(child);if(box.w>max)max=box.w}max-=15;for(var i=0;i<children.length;i++){var child=children[i];if(!child.style)continue;domStyle.set(child,{width:max+"px"})}},postMixInProperties:function(){this.inherited(arguments)},buildRendering:function(){this.inherited(arguments)},onResize:function(){if(this.adjustChildsToWidth)this.sameWidth();
array.forEach(registry.findWidgets(this.containerNode),function(child){if(child.onResize)child.onResize()})},onShow:function(){this.inherited(arguments);this.resize();if(this.adjustChildsToWidth)this.sameWidth();if(this.onResize)this.onResize();this.publish(types.EVENTS.ON_VIEW_SHOW,{view:this})},startup:function(){this.inherited(arguments);if(this.onResize)this.subscribe(types.EVENTS.RESIZE,this.onResize);this.initReload()}})})},"xblox/model/Statement":function(){define("xblox/model/Statement",["dojo/_base/declare",
"./Block"],function(declare,Block){return declare("xblox.model.Statement",[Block],{toText:function(){return this.name},getChildren:function(){return this.items}})})},"dijit/layout/utils":function(){define("dijit/layout/utils",["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","../main"],function(array,domClass,domGeometry,domStyle,lang,dijit){var layout=lang.getObject("layout",true,dijit);layout.marginBox2contentBox=function(node,mb){var cs=domStyle.getComputedStyle(node);
var me=domGeometry.getMarginExtents(node,cs);var pb=domGeometry.getPadBorderExtents(node,cs);return{l:domStyle.toPixelValue(node,cs.paddingLeft),t:domStyle.toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)}};function capitalize(word){return word.substring(0,1).toUpperCase()+word.substring(1)}function size(widget,dim){var newSize=widget.resize?widget.resize(dim):domGeometry.setMarginBox(widget.domNode,dim);if(newSize)lang.mixin(widget,newSize);else{lang.mixin(widget,domGeometry.getMarginBox(widget.domNode));
lang.mixin(widget,dim)}}layout.layoutChildren=function(container,dim,children,changedRegionId,changedRegionSize){dim=lang.mixin({},dim);domClass.add(container,"dijitLayoutContainer");children=array.filter(children,function(item){return item.region!="center"&&item.layoutAlign!="client"}).concat(array.filter(children,function(item){return item.region=="center"||item.layoutAlign=="client"}));array.forEach(children,function(child){var elm=child.domNode,pos=child.region||child.layoutAlign;if(!pos)throw new Error("No region setting for "+
child.id);var elmStyle=elm.style;elmStyle.left=dim.l+"px";elmStyle.top=dim.t+"px";elmStyle.position="absolute";domClass.add(elm,"dijitAlign"+capitalize(pos));var sizeSetting={};if(changedRegionId&&changedRegionId==child.id)sizeSetting[child.region=="top"||child.region=="bottom"?"h":"w"]=changedRegionSize;if(pos=="top"||pos=="bottom"){sizeSetting.w=dim.w;size(child,sizeSetting);dim.h-=child.h;if(pos=="top")dim.t+=child.h;else elmStyle.top=dim.t+dim.h+"px"}else if(pos=="left"||pos=="right"){sizeSetting.h=
dim.h;size(child,sizeSetting);dim.w-=child.w;if(pos=="left")dim.l+=child.w;else elmStyle.left=dim.l+dim.w+"px"}else if(pos=="client"||pos=="center")size(child,dim)})};return{marginBox2contentBox:layout.marginBox2contentBox,layoutChildren:layout.layoutChildren}})},"dijit/ProgressBar":function(){require({cache:{"url:dijit/templates/ProgressBar.html":'\x3cdiv class\x3d"dijitProgressBar dijitProgressBarEmpty" role\x3d"progressbar"\n\t\x3e\x3cdiv  data-dojo-attach-point\x3d"internalProgress" class\x3d"dijitProgressBarFull"\n\t\t\x3e\x3cdiv class\x3d"dijitProgressBarTile" role\x3d"presentation"\x3e\x3c/div\n\t\t\x3e\x3cspan style\x3d"visibility:hidden"\x3e\x26#160;\x3c/span\n\t\x3e\x3c/div\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"labelNode" class\x3d"dijitProgressBarLabel" id\x3d"${id}_label"\x3e\x3c/div\n\t\x3e\x3cspan data-dojo-attach-point\x3d"indeterminateHighContrastImage"\n\t\t   class\x3d"dijitInline dijitProgressBarIndeterminateHighContrastImage"\x3e\x3c/span\n\x3e\x3c/div\x3e\n'}});
define("dijit/ProgressBar",["require","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/number","./_Widget","./_TemplatedMixin","dojo/text!./templates/ProgressBar.html"],function(require,declare,domClass,lang,number,_Widget,_TemplatedMixin,template){return declare("dijit.ProgressBar",[_Widget,_TemplatedMixin],{progress:"0",value:"",maximum:100,places:0,indeterminate:false,label:"",name:"",templateString:template,_indeterminateHighContrastImagePath:require.toUrl("./themes/a11y/indeterminate_progress.gif"),
postMixInProperties:function(){this.inherited(arguments);if(!(this.params&&"value"in this.params))this.value=this.indeterminate?Infinity:this.progress},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update()},_setDirAttr:function(val){domClass.toggle(this.domNode,"dijitProgressBarRtl",val=="rtl");this.inherited(arguments)},update:function(attributes){lang.mixin(this,attributes||{});
var tip=this.internalProgress,ap=this.domNode;var percent=1;if(this.indeterminate)ap.removeAttribute("aria-valuenow");else{if(String(this.progress).indexOf("%")!=-1){percent=Math.min(parseFloat(this.progress)/100,1);this.progress=percent*this.maximum}else{this.progress=Math.min(this.progress,this.maximum);percent=this.maximum?this.progress/this.maximum:0}ap.setAttribute("aria-valuenow",this.progress)}ap.setAttribute("aria-labelledby",this.labelNode.id);ap.setAttribute("aria-valuemin",0);ap.setAttribute("aria-valuemax",
this.maximum);this.labelNode.innerHTML=this.report(percent);domClass.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);tip.style.width=percent*100+"%";this.onChange()},_setValueAttr:function(v){this._set("value",v);if(v==Infinity)this.update({indeterminate:true});else this.update({indeterminate:false,progress:v})},_setLabelAttr:function(label){this._set("label",label);this.update()},_setIndeterminateAttr:function(indeterminate){this._set("indeterminate",indeterminate);this.update()},
report:function(percent){return this.label?this.label:this.indeterminate?"\x26#160;":number.format(percent,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})})},"dojo/has":function(){define(["require","module"],function(require,module){var has=require.has||function(){};if(!1){var isBrowser=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location==location&&window.document==document,global=this,doc=isBrowser&&document,element=
doc&&doc.createElement("DiV"),cache=module.config&&module.config()||{};has=function(name){return typeof cache[name]=="function"?cache[name]=cache[name](global,doc,element):cache[name]};has.cache=cache;has.add=function(name,test,now,force){(typeof cache[name]=="undefined"||force)&&(cache[name]=test);return now&&has(name)};1||has.add("host-browser",isBrowser);1||has.add("dom",isBrowser);1||has.add("dojo-dom-ready-api",1);1||has.add("dojo-sniff",1)}if(1){has.add("dom-addeventlistener",!!document.addEventListener);
has.add("touch","ontouchstart"in document);has.add("device-width",screen.availWidth||innerWidth);var form=document.createElement("form");has.add("dom-attributes-explicit",form.attributes.length==0);has.add("dom-attributes-specified-flag",form.attributes.length>0&&form.attributes.length<40)}has.clearElement=function(element){element.innerHTML="";return element};has.normalize=function(id,toAbsMid){var tokens=id.match(/[\?:]|[^:\?]*/g),i=0,get=function(skip){var term=tokens[i++];if(term==":")return 0;
else{if(tokens[i++]=="?")if(!skip&&has(term))return get();else{get(true);return get(skip)}return term||0}};id=get();return id&&toAbsMid(id)};has.load=function(id,parentRequire,loaded){if(id)parentRequire([id],loaded);else loaded()};return has})},"xfile/views/FileGridView":function(){define("xfile/views/FileGridView",["dojo/_base/declare","dojo/_base/lang","xide/types","xide/utils","./FileView","./_KeyNavMixin","./FileGridViewRendering","./FileGridViewUtils","./FileGridViewDND","dojo/store/Memory",
"dojo/store/Observable"],function(declare,lang,types,utils,FileView,_KeyNavMixin,FileGridViewRendering,FileGridViewUtils,FileGridViewDND,Memory,Observable){return declare("xfiles.views.FileGridView",[FileView,_KeyNavMixin,FileGridViewRendering,FileGridViewUtils,FileGridViewDND],{fileStoreUrl:null,sortFields:null,queryOptions:null,layoutFiles:null,trail:null,theme:"/default/",themeRoot:null,listButton:null,galleryButton:null,lastSelectedRowItem:null,currentLayoutClass:"table",hasControls:true,hasTrail:true,
config:null,allowFiles:true,parentItem:null,nextFocusItem:null,nextFocusItemForce:null,selectedItem:null,lastSelectedItem:null,selectedItems:null,focusedChildNode:null,focusedChildNodeNext:null,restoreItem:null,editContext:null,prevFocusNode:null,isForcedFocus:false,staticStore:null,isStoreRefresh:false,autoHeight:true,restoreFocus:function(){this.onContainerFocus()},setStaticData:function(data){var storeData={items:data,identifier:"path",label:"name"};var store=Observable(Memory({data:storeData}));
store.getParents=function(item){return[{path:".",directory:"."}]};this.staticStore=store;this.store=store;this.onGridRefreshed=function(){};this.setQuery=function(){};try{this._createGrid(store,data.length>20)}catch(e){}},onContainerFocus:function(){var thiz=this;setTimeout(function(){thiz.onFocusRootNode()},1)},_getValidItem:function(nodes){for(var i=0;i<nodes.length;i++){var row=this.grid.row(nodes[i]);if(row&&row.data&&row.data.name!==".")return row.data}return null},getFirstItem:function(){var innerNodes=
utils.find(".dgrid-row",this.grid.domNode,false);if(innerNodes)if(innerNodes.length>1){var item=this._getValidItem(innerNodes);if(item)return item}return null},focusFirstItem:function(){if(this._getFirst){var first=this._getFirst();if(first){this.focusItem(first,false);this.grid._focusNode=first;this.grid.focus(first)}else console.error("focusFirstItem:failed")}},onFocusRootNode:function(){if(this.prevFocusNode){this.isForcedFocus=true;this.focusItem(this.prevFocusNode,false);this.grid._focusNode=
this.prevFocusNode;this.grid.focus(this.prevFocusNode);this.isForcedFocus=false}else this.focusFirstItem()},onSorted:function(){var thiz=this;if(this.grid._sortClick==null||this.grid._sortClick==false)return;return;setTimeout(function(){thiz.onGridRefreshed()},100)},onKeyboardSearch:function(item,evt,searchString,numMatches){if(item&&item.data)this.focusItem(item.data,false)},openItemBackup:function(item){if(item&&item.directory==null)return;if(this.activeItem)if(this.activeItem.isBack===true){this._restoreItem(this.activeItem);
this.activeItem.isBack=false;if(item==this.activeItem){var parent=this.getParentItem(item);if(parent){this.delegate.onHistoryBack(this.delegate.cookiePrefix,item);this.activeItem=parent;this.updateGrid(parent);return}}}this.activeItem=item;if(item){if(this.delegate.onHistoryForward)this.delegate.onHistoryForward(this.delegate.cookiePrefix,item);this.nextFocusItem=null;this.updateGrid(item)}},openItem:function(item){if(this.editing)return;if(item==null)return;if(item&&item.directory==null)return;var thiz=
this;var itemToCheck=this.activeItem;if(itemToCheck)if(itemToCheck[this.id]&&itemToCheck[this.id].isBack===true){this._restoreItem(itemToCheck);itemToCheck[this.id]["isBack"]=false;if(item==itemToCheck){var parent=this.getParentItem(item);if(parent){this.delegate.onHistoryBack(this.delegate.cookiePrefix,item);this.activeItem=parent;this.updateGrid(parent);return}}}this.activeItem=item;if(item){if(this.grid.onStoreChange)this.grid.onStoreChange();if(this.delegate.onHistoryForward)this.delegate.onHistoryForward(this.delegate.cookiePrefix,
item);this.nextFocusItem=null;this.updateGrid(item)}},setQueryEx:function(path){this.grid.setQuery({path:this.pathToRegex(path),directory:!this.allowFiles},this.getQueryOptions());var thiz=this;thiz.onGridRefreshed()},setQuery:function(path){var thiz=this;thiz.setQueryEx(path)},onGridRefreshed:function(){var newRow=null;if(this.activeItem!=null){this._restoreItem(this.activeItem);newRow=this.addBackRow(this.activeItem)}var thiz=this;try{if(this.grid.focus&&this.nextFocusItemForceNode&&this.nextFocusItemForce)setTimeout(function(){thiz.focusItem(thiz.nextFocusItemForce,
false);thiz.grid.focus(thiz.nextFocusItemForceNode);thiz.focusItem(thiz.nextFocusItemForce,false);thiz.nextFocusItemForceNode=null;thiz.nextFocusItemForce=null},400);else if(this.autoFocus)if(this.nextFocusItem)this.focusItem(this.nextFocusItem,false);else if(this.grid.focus&&newRow)this.grid.focus(newRow)}catch(e){console.error("onGridFreshed::focus : went wrong!")}var thiz=this;setTimeout(function(){thiz.publish(types.EVENTS.IMAGE_LOADED,{})},100);this.grid.resize()},addBackRow:function(item){if(!item){console.error("addback : hae no item");
return}if(item.path&&item.path==".")return;var element=this.grid.contentNode;var firstRow=this.grid.contentNode.children[1];this._restoreItem(item);item[this.id]["isBack"]=true;item[this.id]["prevName"]=item.name;item.prevName=""+item.name;item.name="..";var newRow=this.grid.newRow(item,element,firstRow,0,{parentId:item.path});if(newRow){var innerNode=utils.find(".dgrid-cell",newRow,true);if(innerNode){this.backItem=item;return innerNode}}return newRow},updateGrid:function(item,setPrev){if(item&&
lang.isString(item))item=this.store.getItemByPath(null,item);if(item&&setPrev!==false){var parent=this.store.getParents(item,true);if(parent&&parent.length==1)this.prevItem=parent[0]}var thiz=this;var _updateGrid=function(item){thiz.updateGrid(item,false);thiz.grid.resize()};if(!this.store.isItemLoaded)return;if(!this.store.isItemLoaded(item))this.store.loadItem({item:item,onItem:_updateGrid});else{if(this.delegate&&this.delegate.onItemLoaded)this.delegate.onItemLoaded();this.setQuery(this.store.getValue(item,
"path"))}},doInitialQuery:function(url){var query={path:url||"."};var queryOptions={deep:true,ignoreCase:false,sort:[{attribute:"directory",descending:true,ignoreCase:false},{attribute:"name",descending:false,ignoreCase:false}],storeOnly:true};this.store.query(query,queryOptions)},onSelected:function(rowIndex){var item=this.grid.getItem(rowIndex);if(item.directory)this.delegate.updateGrid(item)},onItemChanged:function(item,operation){this.grid.refresh();this.grid.setStore(this.store)},getActiveItem:function(){return this.activeItem},
doQuery:function(url,single){var query={path:url||"."};var queryOptions={single:single||false,deep:true,ignoreCase:false,sort:[{attribute:"directory",descending:true,ignoreCase:false},{attribute:"name",descending:false,ignoreCase:false}],storeOnly:true};return this.store.query(query,queryOptions)},onKeyEvent:function(evt){if(this.keyboardDelegate)this.keyboardDelegate.onGridKey(evt)},onMouseEvent:function(evt){if(this.mouseDelegate)this.mouseDelegate.onGridMouse(evt)},onMouseDoubleClickEvent:function(evt){if(this.mouseDelegate)this.mouseDelegate.onGridMouseDouble(evt)},
onClose:function(){this.delegate.gridView=null;this.inherited(arguments);var parent=dijit.byId("topTabs");if(parent)parent.removeChild(this)},getCurrentSelection:function(viaCSS){if(viaCSS===true){var res=[];var rows=utils.find(".dgrid-selected",this.grid.domNode,false);for(var i=0;i<rows.length;i++){var row=this.grid.row(rows[i]);if(row!=null&&row.data!=null&&row.data.name!=null&&row.data.name!="."&&row.data.name!="..")res.push(row.data)}if(res.length>0)return res;else return null}return this.selectedItems},
onGridFilesSelected:function(items,node){this.selectedItems=[];for(var i=0;i<items.length;i++){var item=items[i];if(i==0){this.lastSelectedItem=item.data;this.lastSelectedItemNode=item.element}var itemData=item.data;if(item&&itemData){if(item.data=="..")continue;this.selectedItems.push(itemData)}}},onGridFileSelected:function(item,node){var thiz=this;if(!item.dragSource)item.dragSource=true;this.lastSelectedItem=item;this.lastSelectedItemNode=node;this.selectedItem=item;this.selectedItems=null;this.activeItem=
item;item.beanType=types.ITEM_TYPE.FILE;var struct={store:this.store,item:item,view:this,beanContextName:this.config.beanContextName};this.publish(types.EVENTS.ITEM_SELECTED,struct,this);var innerNode=utils.find(".dgrid-cell",node,true);if(innerNode){this.focusedChildNode=innerNode;this.focusedChildNode["data"]=item}if(this.delegate.onItemSelected)this.delegate.onItemSelected(item);if(this.lastSelectedRowItem!=null&&item==this.lastSelectedRowItem&&this.delegate.onFileClicked)this.delegate.onFileClicked(item);
if(node)node.focus()},beforeStoreChange:function(data){var restoreItem=this.getRestoreItem();if(restoreItem)this.restoreItem=restoreItem;if(data&&data.operation)switch(data.operation){case types.OPERATION.COPY:if(this.lastSelectedItem&&this.lastSelectedItemNode){this.nextFocusItemForce=this.lastSelectedItem;this.nextFocusItemForceNode=this.lastSelectedItemNode}break;case types.OPERATION.DELETE:var nextFocusItem=this.findRestoreFocusItem();if(nextFocusItem&&nextFocusItem.data){this.nextFocusItemForce=
nextFocusItem.data;this.nextFocusItemForceNode=nextFocusItem}break}},onResize:function(){this.grid.resize()},storeRefreshed:function(data){var thiz=this;thiz._restoreItem(thiz.activeItem);thiz._restoreItem(thiz.backItem);thiz.backItem=null;thiz.activeItem=null;thiz.isStoreRefresh=true;thiz.openItem(thiz.restoreItem)},startup:function(){if(this.didLoad)return;this.inherited(arguments);this.didLoad=true;this.subscribe(types.EVENTS.STORE_REFRESHED,this.storeRefreshed,this);this.subscribe(types.EVENTS.BEFORE_STORE_CHANGE,
this.beforeStoreChange,this);this.subscribe(types.EVENTS.RESIZE,this.onResize,this)}})})},"xblox/model/loops/WhileBlock":function(){define("xblox/model/loops/WhileBlock",["dojo/_base/declare","xblox/model/Block","xblox/model/variables/Variable"],function(declare,Block,Variable){return declare("xblox.model.loops.WhileBlock",Block,{condition:null,items:null,loopLimit:200,name:"While",wait:500,currentIndex:0,canAdd:function(){return[]},_solve:function(scope,settings){var ret=[];for(var n=0;n<this.items.length;n++)this.addToEnd(ret,
this.items[n].solve(scope,settings));return ret},doStep:function(settings){if(this.currentIndex<this.loopLimit){var ret=[];var _cond=this._checkCondition(this.scope);if(_cond){this.onSuccess(this,settings);var thiz=this;this.addToEnd(ret,this._solve(this.scope,settings));this.currentIndex++;setTimeout(function(){thiz.doStep(settings)},this.wait)}else this.onFailed(this,settings)}},solve:function(scope,settings){var iterations=0;var ret=[];if(this.wait>0){this.currentIndex=0;this.doStep(settings);
return[]}while(this._checkCondition(scope)&&iterations<this.loopLimit){this.addToEnd(ret,this._solve(scope));iterations++}return ret},toText:function(){return this.getBlockIcon("G")+this.name+" "+this.condition},_checkCondition:function(scope){return scope.parseExpression(this.condition)},mayHaveChildren:function(parent){return this.items!=null&&this.items.length>0},getChildren:function(parent){var result=[];if(this.items)result=result.concat(this.items);return result},getFields:function(){var thiz=
this;var fields=this.inherited(arguments);fields.push(this.utils.createCI("condition",25,this.condition,{group:"General",title:"Expression",dst:"condition",delegate:{runExpression:function(val,run,error){return thiz.scope.expressionModel.parse(thiz.scope,val,false,run,error)}}}));fields.push(this.utils.createCI("wait",13,this.wait,{group:"General",title:"Wait",dst:"wait"}));return fields}})})},"xide/manager/Application":function(){define(["dojo/_base/declare","./ManagerBase","dojo/dom-geometry","xide/factory",
"xide/types"],function(declare,ManagerBase,domGeometry,factory,types){return declare("xide.manager.Application",[ManagerBase],{resizeToNode:function(parent){if(parent!=null){var parentO=dojo.byId(parent);if(parentO){var size=domGeometry.getMarginBox(parentO);var dstHeight=size.h;dstHeight-=20;var mainContainer=dijit.registry.byId("main");if(mainContainer){mainContainer.containerNode.style.height=dstHeight+"px";mainContainer.resize();setTimeout(function(){mainContainer.resize()},300)}}}},repaint:function(){if(!this.mainView)return;
var winSize=dojo.window.getBox();var dstHeight=winSize.h;dstHeight-=15;var mainContainer=this.mainView.layoutMain;if(mainContainer){mainContainer.containerNode.style.height=dstHeight+"px";mainContainer.resize();setTimeout(function(){mainContainer.resize()},300)}},init:function(){var thiz=this;var resizeCB=function(){thiz.repaint()};dojo.connect(window,dojo.global.onorientationchange!==undefined?"onorientationchange":"onresize",this,function(){factory.publish(types.EVENTS.RESIZE,{},thiz);setTimeout(function(){resizeCB()},
500)})}})})},"url:cbtree/templates/TrailBarItem.html":'\x3cdiv class\x3d"dijitReset dijitInline dijitMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"/\x3e\n\t\x3cspan data-dojo-attach-point\x3d"containerNode"\x3e\x3c/span\x3e\n\x3c/div\x3e\n',"xfile/widgets/SourceSelector":function(){define("xfile/widgets/SourceSelector",["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/html","dojo/dom-class","dojo/on","xide/widgets/TemplatedWidgetBase","xfile/types/Types","xide/factory","dijit/MenuItem","dijit/MenuSeparator","dojo/aspect"],function(declare,lang,html,domClass,on,TemplatedWidgetBase,types,factory,MenuItem,MenuSeparator,aspect){return declare("xfile.widgets.SourceSelector",[TemplatedWidgetBase],{wButton:null,wThumb:null,wList:null,wTree:null,layout:null,menu:null,_didCreateDefaultItems:false,addJQueryClasses:true,menuItems:null,firstItem:null,
templateString:"\x3cdiv\x3e\x3cdiv class\x3d'sourceSelector' data-dojo-type\x3d'dijit.form.DropDownButton' data-dojo-props\x3d\"iconClass:'el-icon-hdd'\" data-dojo-attach-point\x3d'wButton'\x3e"+"\x3cspan\x3e\x3c/span\x3e"+"\x3cdiv data-dojo-attach-point\x3d'menu' data-dojo-type\x3d'dijit.Menu' style\x3d'display: none;'\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e"+"\x3c/div\x3e",_patchMenu:function(widget){aspect.after(widget,"onOpen",function(){factory.publish(types.EVENTS.ON_SOURCE_MENU_OPEN,{menu:widget})})},
open:function(){this.wButton.domNode.focus();this.wButton.openDropDown();if(this.firstItem)this.firstItem.focus()},postMixInProperties:function(){this.inherited(arguments)},_defaultItems:function(){var items=[];items.push({name:"Root",path:"root",owner:this.delegate,iconClass:"fa-cloud"});return items},onMenuItemClick:function(menuItem){try{this.wButton.closeDropDown();var thiz=this;setTimeout(function(){thiz.delegate.changeRoot(menuItem.item.path)},300)}catch(e){debugger}},fixButton:function(button){if(button&&
button.iconNode){domClass.add(button.domNode,"ui-menu-item");domClass.remove(button.iconNode,"dijitReset");domClass.add(button.iconNode,"actionToolbarButtonElusive")}},editMount:function(mount){if(this.delegate&&this.delegate.editMount)this.delegate.editMount(mount)},removeMount:function(mount){if(this.delegate&&this.delegate.removeMount)this.delegate.removeMount(mount)},addActions:function(menuItem,edit,remove){if(!edit&&!remove)return;var pSubMenu=new dijit.Menu({parentMenu:menuItem});if(edit){var local=
new dijit.MenuItem({label:"Edit",onClick:lang.hitch(this,"editMount"),"iconClass":"el-icon-file-edit"});pSubMenu.addChild(local)}if(remove){var db=new dijit.MenuItem({label:"Remove",onClick:lang.hitch(this,"removeMount"),"iconClass":"el-icon-remove-circle"});pSubMenu.addChild(db)}menu.addChild(new dijit.PopupMenuItem({label:"Add",popup:pSubMenu,iconClass:"el-icon-plus"}))},createMenuItem:function(itemData,edit,remove){var thiz=this;if(!edit&&!remove){var icon=itemData.icon||itemData.iconClass||"fa-cloud";
var item=new MenuItem({item:itemData,iconClass:icon,label:itemData.label||itemData.name});this.menu.addChild(item);dojo.connect(item,"onClick",function(){thiz.onMenuItemClick(item)});this.fixButton(item);return item}var pSubMenu=new dijit.Menu({parentMenu:this.menu});if(edit){var edit=new dijit.MenuItem({label:"Edit","iconClass":"el-icon-file-edit"});dojo.connect(edit,"onClick",function(){thiz.editMount(itemData)});pSubMenu.addChild(edit)}if(remove){var remove=new dijit.MenuItem({label:"Remove","iconClass":"el-icon-remove-circle"});
dojo.connect(remove,"onClick",function(){thiz.removeMount(itemData)});pSubMenu.addChild(remove)}var icon=itemData.icon||itemData.iconClass||"fa-cloud";var item=new dijit.PopupMenuItem({item:itemData,iconClass:icon,label:itemData.label||itemData.name,popup:pSubMenu});this.menu.addChild(item);dojo.connect(item,"onClick",function(){thiz.onMenuItemClick(item)});item.domNode["onclick"]=function(){thiz.onMenuItemClick(item)};this.fixButton(item);return item},_createDefaultItems:function(mounts){this.menuItems=
[];this.firstItem=null;var items=mounts||this.delegate.getSources()||this._defaultItems();for(var i=0;i<items.length;i++){var item=this.createMenuItem(items[i],this.config.ALLOWED_ACTIONS[types.OPERATION_INT.EDIT_MOUNT],this.config.ALLOWED_ACTIONS[types.OPERATION_INT.REMOVE_MOUNT]);if(!this.firstItem)this.firstItem=item;this.menuItems.push(item)}this.menu.addChild(new MenuSeparator);this._didCreateDefaultItems=true},onOpen:function(){if(!this._didCreateDefaultItems)this._createDefaultItems()},onMountDataReady:function(evt){var menuItems=
this.menu.getChildren();for(var i=0;i<menuItems.length;i++)this.menu.removeChild(menuItems[i]);this.menu["mountMenu"]=null;var items=evt["data"];this._createDefaultItems(items)},startup:function(){this.inherited(arguments);if(!this._didCreateDefaultItems)this._createDefaultItems();if(this.addJQueryClasses)domClass.add(this.menu.containerNode,"ui-menu ui-widget ui-widget-content ui-corner-all");this.fixButton(this.wButton);this._patchMenu(this.menu);this.subscribe(types.EVENTS.ON_MOUNT_DATA_READY,
this.onMountDataReady)}})})},"xfile/widgets/Toaster":function(){define("xfile/widgets/Toaster",["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/fx","dojo/dom-style","dojo/dom-class","dojo/dom-geometry","dijit/registry","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/BackgroundIframe","dojo/fx","dojo/has","dojo/_base/window","dojo/window"],function(declare,lang,connect,baseFx,domStyle,domClass,domGeometry,registry,WidgetBase,_TemplatedMixin,BackgroundIframe,coreFx,has,baseWindow,
window){lang.getObject("dojox.widget",true);var capitalize=function(w){return w.substring(0,1).toUpperCase()+w.substring(1)};return declare("xfile.widgets.Toaster",[WidgetBase,_TemplatedMixin],{templateString:'\x3cdiv class\x3d"dijitToasterClip" dojoAttachPoint\x3d"clipNode"\x3e\x3cdiv class\x3d"dijitToasterContainer" dojoAttachPoint\x3d"containerNode" dojoAttachEvent\x3d"onclick:onSelect"\x3e\x3cdiv class\x3d"dijitToasterContent" dojoAttachPoint\x3d"contentNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
messageTopic:"",messageTypes:{MESSAGE:"message",WARNING:"warning",ERROR:"error",FATAL:"fatal",UPLOAD_BEGIN:"uploadBegin"},defaultType:"message",positionDirection:"br-up",positionDirectionTypes:["br-up","br-left","bl-up","bl-right","tr-down","tr-left","tl-down","tl-right"],duration:2E3,slideDuration:500,separator:"\x3chr/\x3e",postCreate:function(){this.inherited(arguments);this.hide();baseWindow.body().appendChild(this.domNode);if(this.messageTopic)connect.subscribe(this.messageTopic,this,"_handleMessage")},
updateSize:function(){},getItemsHeight:function(){if(!this.items)this.items=[];var h=0;for(var i=0;i<this.items.length;i++)h+=this.items[i].lastH;return h},items:null,_handleMessage:function(message){if(message.type=="uploadBegin");else if(lang.isString(message))this.setContent(message);else this.setContent(message.message,message.type,message.duration)},setContent:function(message,messageType,duration){duration=duration||this.duration;if(this.slideAnim){if(this.slideAnim.status()!="playing")this.slideAnim.stop();
if(this.slideAnim.status()=="playing"||this.fadeAnim&&this.fadeAnim.status()=="playing"){setTimeout(lang.hitch(this,function(){this.setContent(message,messageType,duration)}),50);return}}for(var type in this.messageTypes)domClass.remove(this.containerNode,"dijitToaster"+capitalize(this.messageTypes[type]));domStyle.set(this.containerNode,"opacity",1);this._setContent(message);domClass.add(this.containerNode,"dijitToaster"+capitalize(messageType||this.defaultType));domClass.add(this.containerNode,
"ui-corner-all");domClass.remove(this.containerNode,"ui-state-highlight");domClass.remove(this.containerNode,"ui-state-error");if(messageType=="message")domClass.add(this.containerNode,"ui-state-highlight");if(messageType=="error")domClass.add(this.containerNode,"ui-state-error");this.show();var nodeSize=domGeometry.getMarginBox(this.containerNode);this._cancelHideTimer();if(this.isVisible){this._placeClip();if(!this._stickyMessage)this._setHideTimer(duration)}else{var style=this.containerNode.style;
var pd=this.positionDirection;if(pd.indexOf("-up")>=0){style.left=0+"px";style.top=nodeSize.h+10+"px"}else if(pd.indexOf("-left")>=0){style.left=nodeSize.w+10+"px";style.top=0+"px"}else if(pd.indexOf("-right")>=0){style.left=0-nodeSize.w-10+"px";style.top=0+"px"}else if(pd.indexOf("-down")>=0){style.left=0+"px";style.top=0-nodeSize.h-10+"px"}else throw new Error(this.id+".positionDirection is invalid: "+pd);this.slideAnim=coreFx.slideTo({node:this.containerNode,top:0,left:0,duration:this.slideDuration});
this.connect(this.slideAnim,"onEnd",function(nodes,anim){this.fadeAnim=baseFx.fadeOut({node:this.containerNode,duration:1E3});this.connect(this.fadeAnim,"onEnd",function(evt){this.isVisible=false;this.hide()});this._setHideTimer(duration);this.connect(this,"onSelect",function(evt){this._cancelHideTimer();this._stickyMessage=false;this.fadeAnim.play()});this.isVisible=true});this.slideAnim.play()}},_setContent:function(message){if(lang.isFunction(message)){message(this);return}if(message&&this.isVisible)message=
this.contentNode.innerHTML+this.separator+message;this.contentNode.innerHTML=message},_cancelHideTimer:function(){if(this._hideTimer){clearTimeout(this._hideTimer);this._hideTimer=null}},_setHideTimer:function(duration){this._cancelHideTimer();if(duration>0){this._cancelHideTimer();this._hideTimer=setTimeout(lang.hitch(this,function(evt){if(this.bgIframe&&this.bgIframe.iframe)this.bgIframe.iframe.style.display="none";this._hideTimer=null;this._stickyMessage=false;this.fadeAnim.play()}),duration)}else this._stickyMessage=
true},_placeClip:function(){var view=window.getBox();var nodeSize=domGeometry.getMarginBox(this.containerNode);var style=this.clipNode.style;style.height=nodeSize.h+"px";style.width=nodeSize.w+"px";var pd=this.positionDirection;if(pd.match(/^t/))style.top=view.t+"px";else if(pd.match(/^b/))style.top=view.h-nodeSize.h-2+view.t+"px";if(pd.match(/^[tb]r-/))style.left=view.w-nodeSize.w-1-view.l+"px";else if(pd.match(/^[tb]l-/))style.left=0+"px";else if(pd.match(/^[tb]c-/))style.left=Math.round((view.w-
nodeSize.w-1-view.l)/2)+"px";style.clip="rect(0px, "+nodeSize.w+"px, "+nodeSize.h+"px, 0px)";if(has("ie")){if(!this.bgIframe){this.clipNode.id=registry.getUniqueId("dojox_widget_Toaster_clipNode");this.bgIframe=new BackgroundIframe(this.clipNode)}var iframe=this.bgIframe.iframe;if(iframe)iframe.style.display="block"}},onSelect:function(e){},show:function(){domStyle.set(this.domNode,"display","block");this._placeClip();if(!this._scrollConnected)this._scrollConnected=connect.connect(window,"onscroll",
this,this._placeClip)},hide:function(){domStyle.set(this.domNode,"display","none");if(this._scrollConnected){connect.disconnect(this._scrollConnected);this._scrollConnected=false}domStyle.set(this.containerNode,"opacity",1)}})})},"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\n\t\x3c/td\x3e\n\x3c/tr\x3e\n',
"xide/types/Types":function(){define(["xide/types","dojo/_base/json","dojo/_base/kernel"],function(types,json,dojo){if(types["customTypes"]==null)types["customTypes"]={};if(types["customEnumerations"]==null)types["customEnumerations"]={};if(types["widgetMappings"]==null)types["widgetMappings"]={};if(types["customMimeIcons"]==null)types["customMimeIcons"]={};types.registerCustomMimeIconExtension=function(type,map){types["customMimeIcons"][type]=map};types.resolveType=function(type){if(types["customTypes"][type])return types["customTypes"][type];
return null};types.registerType=function(type,map){types["customTypes"][type]=map};types.registerWidgetMapping=function(type,map){types["widgetMappings"][type]=map};types.registerEnumeration=function(type,map){types["customEnumerations"][type]=map};types.resolveEnumeration=function(type){if(types["customEnumerations"][type])return types["customEnumerations"][type];return null};types.resolveWidgetMapping=function(type){if(types["widgetMappings"][type])return types["widgetMappings"][type];return null};
types.ECIType={BOOL:0,BOX:1,COLOUR:2,ENUMERATION:3,FILE:4,FLAGS:5,FLOAT:6,INTEGER:7,MATRIX:8,OBJECT:9,REFERENCE:10,QUATERNION:11,RECTANGLE:12,STRING:13,UNKNOWN:-1,VECTOR:14,VECTOR2D:15,VECTOR4D:16,ICON:17,IMAGE:18,BANNER:19,LOGO:20,STRUCTURE:21,BANNER2:22,ICON_SET:23,SCRIPT:24,EXPRESSION:25,RICHTEXT:26,ARGUMENT:27,JSON_DATA:28,EXPRESSION_EDITOR:29,WIDGET_REFERENCE:30,DOM_PROPERTIES:31,END:31};types.ITEM_TYPE={FILE:"BTFILE",WIDGET:"WIDGET",BLOCK:"BLOCK"};types.WIDGET_REFERENCE_MODE={BY_ID:"byid",BY_CLASS:"byclass",
BY_CSS:"bycss",BY_EXPRESSION:"expression"};types.VIEW_SPLIT_MODE={DESIGN:1,SOURCE:2,SPLIT_VERTICAL:6,SPLIT_HORIZONTAL:7};types.PROTOCOL={TCP:"tcp",UDP:"udp",SERIAL:"serial"};types.RESOURCE_VARIABLES={APP_URL:"APP_URL",SITE_URL:"SITE_URL"};types.SOCKET_SERVER_COMMANDS={SIGNAL_MANAGER:"Manager_command",SIGNAL_DEVICE:"Device_command",SIGNAL_RESPONSE:"WebSocket_response",MANAGER_TEST:"Manager_Test",MANAGER_CLOSE_ALL:"Close_All_Connections",MANAGER_STATUS:"status",MANAGER_START_DRIVER:"startDriver",MANAGER_STOP_DRIVER:"stopDriver",
DEVICE_SEND:"Device_Send"};types.WidgetGroup={All:0,General:1,Visual:2,Module:3,Content:4,Hidden:5,Facebook:6,Twitter:7,Google:8,Apple:9,FourSquare:10,BitLy:11,Tablet:12,Unknown:13,System:14};types.EVENTS={ON_RUN_BLOCK:"onRunBlock",ON_RUN_BLOCK_FAILED:"onRunBlockFailed",ON_RUN_BLOCK_SUCCESS:"onRunBlockSuccess",ON_BLOCK_SELECTED:"onItemSelected",ON_BLOCK_UNSELECTED:"onBlockUnSelected",ON_FILE_CHANGED:"fileChanged",ON_NODE_SERVICE_STORE_READY:"onNodeServiceStoreReady",ON_CREATED_MANAGER:"onCreatedManager",
ON_CI_UPDATE:"onCIUpdate",ON_CREATED_WIDGET:"onWidgetCreated",ON_WIDGET_READY:"onWidgetReady",ON_MAIN_VIEW_READY:"onMainViewReady",ON_MAIN_MENU_READY:"onMainMenuReady",ON_MAIN_MENU_OPEN:"onMainMenuOpen",ON_VIEW_REMOVED:"onViewRemoved",ON_VIEW_SHOW:"onViewShow",ON_VIEW_ADDED:"onViewAdded",ON_ITEM_SELECTED:"onItemSelected",ON_ACTION_CHANGE_CONTEXT:"onChangeActionContext",ON_ACTION_CONTEXT_CHANGED:"onActionContextChanged",ON_CONTAINER_ADDED:"onContainerAdded",ON_CONTAINER_REMOVED:"onContainerRemoved",
ON_CONTAINER_REPLACED:"onContainerReplaced",ON_CONTAINER_SPLIT:"onContainerSplit",ON_CLIPBOARD_COPY:"onClipboardCopy",ON_CLIPBOARD_PASTE:"onClipboardPaste",ON_CLIPBOARD_CUT:"onClipboardCut",ON_MODULE_RELOADED:"onModuleReloaded",RESIZE:"resize",ERROR:"onError",STATUS:"onStatus",STORE_CHANGED:"storeChange",BEFORE_STORE_CHANGE:"beforeStoreChange",STORE_REFRESHED:"storeRefreshed",ON_FILE_STORE_READY:"onFileStoreReady",ON_DID_OPEN_ITEM:"onDidOpenItem",ON_SHOW_PANEL:"onShowPanel",ITEM_SELECTED:"itemSelected",
IMAGE_LOADED:"imageLoaded",IMAGE_ERROR:"imageError",UPLOAD_BEGIN:"uploadBegin",UPLOAD_PROGRESS:"uploadProgress",UPLOAD_FINISH:"uploadFinish",UPLOAD_FAILED:"uploadFailed",ON_CONTEXT_MENU_OPEN:"onContextMenuOpen",ON_PLUGIN_LOADED:"onPluginLoaded",ON_PLUGIN_READY:"onPluginReady",REGISTER_EDITOR:"registerEditor",REGISTER_ACTION:"registerAction",ON_FILE_CONTENT_CHANGED:"onFileContentChanged",ON_PANEL_CLOSED:"onPanelClosed",ON_PANEL_CREATED:"onPanelCreated",ON_COPY_BEGIN:"onCopyBegin",ON_COPY_END:"onCopyEnd",
ON_DELETE_BEGIN:"onDeleteBegin",ON_DELETE_END:"onDeleteEnd",ON_MOVE_BEGIN:"onMoveBegin",ON_MOVE_END:"onMoveEnd",ON_CHANGED_CONTENT:"onChangedContent",ON_COMPRESS_BEGIN:"onCompressBegin",ON_COMPRESS_END:"onCompressEnd",ON_CREATE_EDITOR_BEGIN:"onCreateEditorBegin",ON_CREATE_EDITOR_END:"onCreateEditorEnd",ON_EXPRESSION_EDITOR_ADD_FUNCTIONS:"onExpressionEditorAddFunctions",WIDGET_PROPERTIES_RENDERED:"OnWidgetPropertiesRendered",WIDGET_PROPERTY_RENDERED:"OnWidgetPropertyRendered",ON_SERVER_LOG_MESSAGE:"onServerLogMessage",
ON_GET_LOADER_PACKAGES:"onGetLoaderPackages",ON_VISUAL_EDITOR_SAVE:"onVisualEditorSave"};types.SERVICE_STATUS={OFFLINE:"offline",ONLINE:"online",TIMEOUT:"timeout"};types.MAIN_MENU_KEYS={VIEWS:"views",FILES:"files",LOG:"log"};types.WidgetGroupTitle={General:"General",Visual:"Visual",Module:"Modules",Content:"Content",Facebook:"Facebook",Twitter:"Twitter",Google:"Google",Apple:"Apple",Others:"Misc",FourSquare:"Foursquare",Bitly:"Bitly",Tablet:"Tablet",Unknown:"Unknown",System:"System"};dojo.fromJson=
function(js){var res=null;var didFail=false;try{res=eval("("+js+")")}catch(e){didFail=true}if(didFail){js=js.substring(js.indexOf("{"),js.lastIndexOf("}")+1);try{res=eval("("+js+")")}catch(e){console.error("error in json parsing! "+js);throw new Error(js);}}return res};return types})},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(focus,_WidgetBase,declare,lang){lang.extend(_WidgetBase,{focused:false,onFocus:function(){},
onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return declare("dijit._FocusMixin",null,{_focusManager:focus})})},"xfile/layout/BorderContainer":function(){define("xfile/layout/BorderContainer",["dojo/_base/array","dojo/_base/declare","dojo/_base/html","dojo/on","dojo/_base/lang","dijit/layout/BorderContainer","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dijit/layout/utils"],function(array,declare,html,on,lang,BorderContainer,domClass,domGeometry,
domStyle,layoutUtils){return dojo.declare("xfile.layout.BorderContainer",[BorderContainer],{splitter:false,cssClass:"borderContainer",persist:true,_splitterClass:"xfile.views.ToggleSplitter",cookieName:null,postMixInProperties:function(){this.inherited(arguments);if(this.cookieName||this.container)this._cookieName=this.cookieName||this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);domClass.add(this.domNode,this.cssClass)},_layoutChildren:function(changedChildId,
changedChildSize){if(!this._borderBox||!this._borderBox.h)return;var childrenAndSplitters=[];array.forEach(this._getOrderedChildren(),function(pane){childrenAndSplitters.push(pane);if(pane._splitterWidget)childrenAndSplitters.push(pane._splitterWidget)});if(!this.editor)return;if(this.editor.l==5)this.editor.l=0;if(this.editor.t==5)this.editor.t=0;if(this.editor.w==10)this.editor.w=0;var dim={l:this.editor.l,t:this.editor.t,w:this._borderBox.w-this.editor.w,h:this._borderBox.h-this.editor.h};var editor=
this.editor;var region=editor.region;layoutUtils.layoutChildren(this.domNode,dim,childrenAndSplitters,changedChildId,changedChildSize)}})})},"dijit/form/ValidationTextBox":function(){require({cache:{"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n'}});
define("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(declare,kernel,i18n,TextBox,Tooltip,template){var ValidationTextBox;return ValidationTextBox=declare("dijit.form.ValidationTextBox",TextBox,{templateString:template,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",
regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(attr,value){if(value!=ValidationTextBox.prototype[attr]){kernel.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+attr+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");this.set("pattern",value)}},_setRegExpGenAttr:function(newFcn){this._deprecateRegExp("regExpGen",newFcn);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(value){this._deprecateRegExp("regExp",value)},_setValueAttr:function(){this.inherited(arguments);
this._refreshState()},validator:function(value,constraints){return(new RegExp("^(?:"+this._computeRegexp(constraints)+")"+(this.required?"":"?")+"$")).test(value)&&(!this.required||!this._isEmpty(value))&&(this._isEmpty(value)||this.parse(value,constraints)!==undefined)},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0},isValid:function(){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(value){return(this.trim?/^\s*$/:/^$/).test(value)},getErrorMessage:function(){var invalid=
this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;var missing=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?invalid:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?missing:invalid},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:true,validate:function(isFocused){var message="";var isValid=this.disabled||this.isValid(isFocused);if(isValid)this._maskValidSubsetError=
true;var isEmpty=this._isEmpty(this.textbox.value);var isValidSubset=!isValid&&isFocused&&this._isValidSubset();this._set("state",isValid?"":((!this._hasBeenBlurred||isFocused)&&isEmpty||isValidSubset)&&(this._maskValidSubsetError||isValidSubset&&!this._hasBeenBlurred&&isFocused)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid",isValid?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=isFocused&&isValidSubset;message=this.getErrorMessage(isFocused)}else if(this.state==
"Incomplete"){message=this.getPromptMessage(isFocused);this._maskValidSubsetError=!this._hasBeenBlurred||isFocused}else if(isEmpty)message=this.getPromptMessage(isFocused);this.set("message",message);return isValid},displayMessage:function(message){if(message&&this.focused)Tooltip.show(message,this.domNode,this.tooltipPosition,!this.isLeftToRight());else Tooltip.hide(this.domNode)},_refreshState:function(){if(this._created)this.validate(this.focused);this.inherited(arguments)},constructor:function(params){this.constraints=
{};this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(constraints){if(!constraints.locale&&this.lang)constraints.locale=this.lang;this._set("constraints",constraints);this._refreshState()},_setPatternAttr:function(pattern){this._set("pattern",pattern)},_computeRegexp:function(constraints){var p=this.pattern;if(typeof p=="function")p=p.call(this,constraints);if(p!=this._lastRegExp){var partialre="";this._lastRegExp=
p;if(p!=".*")p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":partialre+=re;break;case ")":partialre+="|$)";break;default:partialre+="(?:"+re+"|$)";break}});try{"".search(partialre)}catch(e){partialre=this.pattern;0&&console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+partialre+")$"}return p},postMixInProperties:function(){this.inherited(arguments);
this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(value){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(value){this._set("required",value);this.focusNode.setAttribute("aria-required",value);this._refreshState()},_setMessageAttr:function(message){this._set("message",message);this.displayMessage(message)},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");
this.inherited(arguments)}})})},"dojo/errors/CancelError":function(){define(["./create"],function(create){return create("CancelError",null,null,{dojoType:"cancel"})})},"xide/widgets/ActionToolbarButton":function(){define(["dojo/_base/declare","dijit/form/Button"],function(declare,Button){return declare("xide.widgets.ActionToolbarButton",[Button],{currentItem:null,buttons:null,iconClass:"",title:"title",disabled:false,iconNode:null,linkNode:null,label:null,setDisabled:function(disabled){this.set("disabled",
disabled)},postMixInProperties:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.setDisabled(this.disabled)}})})},"dojox/mdnd/AreaManager":function(){define("dojox/mdnd/AreaManager",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/window","dojo/_base/array","dojo/_base/sniff","dojo/_base/lang","dojo/query","dojo/topic","dojo/dom-class","dojo/dom-geometry","dojo/dom-construct","dijit/registry","dijit/_Widget","./Moveable","dojox/mdnd/AutoScroll"],
function(dojo,declare,connect,win,array,sniff,lang,query,topic,domClass,geom,domConstruct,registry,_Widget,Moveable,AutoScroll){var am=declare("dojox.mdnd.AreaManager",null,{autoRefresh:true,areaClass:"dojoxDndArea",dragHandleClass:"dojoxDragHandle",constructor:function(){this._areaList=[];this.resizeHandler=connect.connect(dojo.global,"onresize",this,function(){this._dropMode.updateAreas(this._areaList)});this._oldIndexArea=this._currentIndexArea=this._oldDropIndex=this._currentDropIndex=this._sourceIndexArea=
this._sourceDropIndex=-1},init:function(){this.registerByClass()},registerByNode:function(area,notInitAreas){var index=this._getIndexArea(area);if(area&&index==-1){var acceptType=area.getAttribute("accept");var accept=acceptType?acceptType.split(/\s*,\s*/):["text"];var obj={"node":area,"items":[],"coords":{},"margin":null,"accept":accept,"initItems":false};array.forEach(this._getChildren(area),function(item){this._setMarginArea(obj,item);obj.items.push(this._addMoveableItem(item))},this);this._areaList=
this._dropMode.addArea(this._areaList,obj);if(!notInitAreas)this._dropMode.updateAreas(this._areaList);connect.publish("/dojox/mdnd/manager/register",[area])}},registerByClass:function(){query("."+this.areaClass).forEach(function(area){this.registerByNode(area,true)},this);this._dropMode.updateAreas(this._areaList)},unregister:function(area){var index=this._getIndexArea(area);if(index!=-1){array.forEach(this._areaList[index].items,function(item){this._deleteMoveableItem(item)},this);this._areaList.splice(index,
1);this._dropMode.updateAreas(this._areaList);return true}return false},_addMoveableItem:function(node){node.setAttribute("tabIndex","0");var handle=this._searchDragHandle(node);var moveable=new Moveable({"handle":handle,"skip":true},node);domClass.add(handle||node,"dragHandle");var type=node.getAttribute("dndType");var item={"item":moveable,"type":type?type.split(/\s*,\s*/):["text"],"handlers":[connect.connect(moveable,"onDragStart",this,"onDragStart")]};if(registry&&registry.byNode){var widget=
registry.byNode(node);if(widget){item.type=widget.dndType?widget.dndType.split(/\s*,\s*/):["text"];item.handlers.push(connect.connect(widget,"uninitialize",this,function(){this.removeDragItem(node.parentNode,moveable.node)}))}}return item},_deleteMoveableItem:function(objItem){array.forEach(objItem.handlers,function(handler){connect.disconnect(handler)});var node=objItem.item.node,handle=this._searchDragHandle(node);domClass.remove(handle||node,"dragHandle");objItem.item.destroy()},_getIndexArea:function(area){if(area)for(var i=
0;i<this._areaList.length;i++)if(this._areaList[i].node===area)return i;return-1},_searchDragHandle:function(node){if(node){var cssArray=this.dragHandleClass.split(" "),length=cssArray.length,queryCss="";array.forEach(cssArray,function(css,i){queryCss+="."+css;if(i!=length-1)queryCss+=", "});return query(queryCss,node)[0]}},addDragItem:function(area,node,index,notCheckParent){var add=true;if(!notCheckParent)add=area&&node&&(node.parentNode===null||node.parentNode&&node.parentNode.nodeType!==1);if(add){var indexArea=
this._getIndexArea(area);if(indexArea!==-1){var item=this._addMoveableItem(node),items=this._areaList[indexArea].items;if(0<=index&&index<items.length){var firstListChild=items.slice(0,index),lastListChild=items.slice(index,items.length);firstListChild[firstListChild.length]=item;this._areaList[indexArea].items=firstListChild.concat(lastListChild);area.insertBefore(node,items[index].item.node)}else{this._areaList[indexArea].items.push(item);area.appendChild(node)}this._setMarginArea(this._areaList[indexArea],
node);this._areaList[indexArea].initItems=false;return true}}return false},removeDragItem:function(area,node){var index=this._getIndexArea(area);if(area&&index!==-1){var items=this._areaList[index].items;for(var j=0;j<items.length;j++)if(items[j].item.node===node){this._deleteMoveableItem(items[j]);items.splice(j,1);return area.removeChild(node)}}return null},_getChildren:function(area){var children=[];array.forEach(area.childNodes,function(child){if(child.nodeType==1)if(registry&&registry.byNode){var widget=
registry.byNode(child);if(widget){if(!widget.dragRestriction)children.push(child)}else children.push(child)}else children.push(child)});return children},_setMarginArea:function(area,node){if(area&&area.margin===null&&node)area.margin=geom.getMarginExtents(node)},findCurrentIndexArea:function(coords,size){this._oldIndexArea=this._currentIndexArea;this._currentIndexArea=this._dropMode.getTargetArea(this._areaList,coords,this._currentIndexArea);if(this._currentIndexArea!=this._oldIndexArea){if(this._oldIndexArea!=
-1)this.onDragExit(coords,size);if(this._currentIndexArea!=-1)this.onDragEnter(coords,size)}return this._currentIndexArea},_isAccepted:function(type,accept){this._accept=false;for(var i=0;i<accept.length;++i)for(var j=0;j<type.length;++j)if(type[j]==accept[i]){this._accept=true;break}},onDragStart:function(node,coords,size){if(this.autoRefresh)this._dropMode.updateAreas(this._areaList);var _html=sniff("webkit")?dojo.body():dojo.body().parentNode;if(!this._cover){this._cover=domConstruct.create("div",
{"class":"dndCover"});this._cover2=lang.clone(this._cover);domClass.add(this._cover2,"dndCover2")}var h=_html.scrollHeight+"px";this._cover.style.height=this._cover2.style.height=h;dojo.body().appendChild(this._cover);dojo.body().appendChild(this._cover2);this._dragStartHandler=connect.connect(node.ownerDocument,"ondragstart",dojo,"stopEvent");this._sourceIndexArea=this._lastValidIndexArea=this._currentIndexArea=this._getIndexArea(node.parentNode);var sourceArea=this._areaList[this._sourceIndexArea];
var children=sourceArea.items;for(var i=0;i<children.length;i++)if(children[i].item.node==node){this._dragItem=children[i];this._dragItem.handlers.push(connect.connect(this._dragItem.item,"onDrag",this,"onDrag"));this._dragItem.handlers.push(connect.connect(this._dragItem.item,"onDragEnd",this,"onDrop"));children.splice(i,1);this._currentDropIndex=this._sourceDropIndex=i;break}var nodeRef=null;if(this._sourceDropIndex!==sourceArea.items.length)nodeRef=sourceArea.items[this._sourceDropIndex].item.node;
if(sniff("ie")>7)this._eventsIE7=[connect.connect(this._cover,"onmouseover",dojo,"stopEvent"),connect.connect(this._cover,"onmouseout",dojo,"stopEvent"),connect.connect(this._cover,"onmouseenter",dojo,"stopEvent"),connect.connect(this._cover,"onmouseleave",dojo,"stopEvent")];var s=node.style;s.left=coords.x+"px";s.top=coords.y+"px";if(s.position=="relative"||s.position=="")s.position="absolute";this._cover.appendChild(node);this._dropIndicator.place(sourceArea.node,nodeRef,size);domClass.add(node,
"dragNode");this._accept=true;connect.publish("/dojox/mdnd/drag/start",[node,sourceArea,this._sourceDropIndex])},onDragEnter:function(coords,size){if(this._currentIndexArea===this._sourceIndexArea)this._accept=true;else this._isAccepted(this._dragItem.type,this._areaList[this._currentIndexArea].accept)},onDragExit:function(coords,size){this._accept=false},onDrag:function(node,coords,size,mousePosition){var coordinates=this._dropMode.getDragPoint(coords,size,mousePosition);this.findCurrentIndexArea(coordinates,
size);if(this._currentIndexArea!==-1&&this._accept)this.placeDropIndicator(coordinates,size)},placeDropIndicator:function(coords,size){this._oldDropIndex=this._currentDropIndex;var area=this._areaList[this._currentIndexArea];if(!area.initItems)this._dropMode.initItems(area);this._currentDropIndex=this._dropMode.getDropIndex(area,coords);if(!(this._currentIndexArea===this._oldIndexArea&&this._oldDropIndex===this._currentDropIndex))this._placeDropIndicator(size);return this._currentDropIndex},_placeDropIndicator:function(size){var oldArea=
this._areaList[this._lastValidIndexArea];var currentArea=this._areaList[this._currentIndexArea];this._dropMode.refreshItems(oldArea,this._oldDropIndex,size,false);var node=null;if(this._currentDropIndex!=-1)node=currentArea.items[this._currentDropIndex].item.node;this._dropIndicator.place(currentArea.node,node);this._lastValidIndexArea=this._currentIndexArea;this._dropMode.refreshItems(currentArea,this._currentDropIndex,size,true)},onDropCancel:function(){if(!this._accept){var index=this._getIndexArea(this._dropIndicator.node.parentNode);
if(index!=-1)this._currentIndexArea=index;else this._currentIndexArea=0}},onDrop:function(node){this.onDropCancel();var targetArea=this._areaList[this._currentIndexArea];domClass.remove(node,"dragNode");var style=node.style;style.position="relative";style.left="0";style.top="0";style.width="auto";if(targetArea.node==this._dropIndicator.node.parentNode)targetArea.node.insertBefore(node,this._dropIndicator.node);else{targetArea.node.appendChild(node);this._currentDropIndex=targetArea.items.length}var indexChild=
this._currentDropIndex;if(indexChild==-1)indexChild=targetArea.items.length;var children=targetArea.items;var firstListArea=children.slice(0,indexChild);var lastListArea=children.slice(indexChild,children.length);firstListArea[firstListArea.length]=this._dragItem;targetArea.items=firstListArea.concat(lastListArea);this._setMarginArea(targetArea,node);array.forEach(this._areaList,function(obj){obj.initItems=false});connect.disconnect(this._dragItem.handlers.pop());connect.disconnect(this._dragItem.handlers.pop());
this._resetAfterDrop();if(this._cover){dojo.body().removeChild(this._cover);dojo.body().removeChild(this._cover2)}connect.publish("/dojox/mdnd/drop",[node,targetArea,indexChild])},_resetAfterDrop:function(){this._accept=false;this._dragItem=null;this._currentDropIndex=-1;this._currentIndexArea=-1;this._oldDropIndex=-1;this._sourceIndexArea=-1;this._sourceDropIndex=-1;this._dropIndicator.remove();if(this._dragStartHandler)connect.disconnect(this._dragStartHandler);if(sniff("ie")>7)array.forEach(this._eventsIE7,
connect.disconnect)},destroy:function(){while(this._areaList.length>0)if(!this.unregister(this._areaList[0].node))throw new Error("Error while destroying AreaManager");connect.disconnect(this.resizeHandler);this._dropIndicator.destroy();this._dropMode.destroy();if(AutoScroll.autoScroll)AutoScroll.autoScroll.destroy();if(this.refreshListener)connect.unsubscribe(this.refreshListener);if(this._cover){domConstruct.destroy(this._cover);domConstruct.destroy(this._cover2);delete this._cover;delete this._cover2}}});
if(_Widget)lang.extend(_Widget,{dndType:"text"});am._areaManager=null;am.areaManager=function(){if(!am._areaManager)am._areaManager=new am;return am._areaManager};return am})},"url:dijit/layout/templates/ScrollingTabController.html":'\x3cdiv class\x3d"dijitTabListContainer-${tabPosition}" style\x3d"visibility:hidden"\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerMenuButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_menuBtn"\n\t\t data-dojo-props\x3d"containerId: \'${containerId}\', iconClass: \'dijitTabStripMenuIcon\',\n\t\t\t\t\tdropDownPosition: [\'below-alt\', \'above-alt\']"\n\t\t data-dojo-attach-point\x3d"_menuBtn" showLabel\x3d"false" title\x3d""\x3e\x26#9660;\x3c/div\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_leftBtn"\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideLeftIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point\x3d"_leftBtn" data-dojo-attach-event\x3d"onClick: doSlideLeft"\x3e\x26#9664;\x3c/div\x3e\n\t\x3cdiv data-dojo-type\x3d"dijit.layout._ScrollingTabControllerButton"\n\t\t class\x3d"tabStripButton-${tabPosition}"\n\t\t id\x3d"${id}_rightBtn"\n\t\t data-dojo-props\x3d"iconClass:\'dijitTabStripSlideRightIcon\', showLabel:false, title:\'\'"\n\t\t data-dojo-attach-point\x3d"_rightBtn" data-dojo-attach-event\x3d"onClick: doSlideRight"\x3e\x26#9654;\x3c/div\x3e\n\t\x3cdiv class\x3d\'dijitTabListWrapper ui-state-default\' data-dojo-attach-point\x3d\'tablistWrapper\'\x3e\n\t\t\x3cdiv role\x3d\'tablist\' data-dojo-attach-event\x3d\'onkeydown:onkeydown\'\n\t\t\t data-dojo-attach-point\x3d\'containerNode\' class\x3d\'nowrapTabStrip \'\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',
"url:dijit/form/templates/HorizontalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown, onkeyup:_onKeyUp"\n\trole\x3d"presentation"\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\x3e\x3c/tr\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\n\t\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitSliderBarContainerH" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event\x3d"press:_onBarClick"\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\n\t\t\t\t\t\x3e\x3c/div\n\t\t\t\t\x3e\x3c/div\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c/div\n\t\t\t\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\n\t\t\x3e\x3c/td\n\t\x3e\x3c/tr\n\t\x3e\x3ctr class\x3d"dijitReset"\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\n\t\x3e\x3c/tr\n\x3e\x3c/table\x3e\n',
"dijit/form/NumberTextBox":function(){define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(declare,lang,number,RangeBoundTextBox){var NumberTextBoxMixin=declare("dijit.form.NumberTextBoxMixin",null,{pattern:number.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:number.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(constraints){var places=typeof constraints.places==
"number"?constraints.places:0;if(places)places++;if(typeof constraints.max!="number")constraints.max=9*Math.pow(10,15-places);if(typeof constraints.min!="number")constraints.min=-9*Math.pow(10,15-places);this.inherited(arguments,[constraints]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value))this.set("value",this.value)},_onFocus:function(){if(this.disabled)return;var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var formattedValue=this.format(val,this.constraints);if(formattedValue!==
undefined)this.textbox.value=formattedValue}this.inherited(arguments)},format:function(value,constraints){var formattedValue=String(value);if(typeof value!="number")return formattedValue;if(isNaN(value))return"";if(!("rangeCheck"in this&&this.rangeCheck(value,constraints))&&constraints.exponent!==false&&/\de[-+]?\d/i.test(formattedValue))return formattedValue;if(this.editOptions&&this.focused)constraints=lang.mixin({},constraints,this.editOptions);return this._formatter(value,constraints)},_parser:number.parse,
parse:function(value,constraints){var v=this._parser(value,lang.mixin({},constraints,this.editOptions&&this.focused?this.editOptions:{}));if(this.editOptions&&this.focused&&isNaN(v))v=this._parser(value,constraints);return v},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v},filter:function(value){return value==null||value===""?NaN:this.inherited(arguments)},serialize:function(value,options){return typeof value!="number"||isNaN(value)?"":this.inherited(arguments)},
_setBlurValue:function(){var val=lang.hitch(lang.delegate(this,{focused:true}),"get")("value");this._setValueAttr(val,true)},_setValueAttr:function(value,priorityChange,formattedValue){if(value!==undefined&&formattedValue===undefined){formattedValue=String(value);if(typeof value=="number")if(isNaN(value))formattedValue="";else{if("rangeCheck"in this&&this.rangeCheck(value,this.constraints)||this.constraints.exponent===false||!/\de[-+]?\d/i.test(formattedValue))formattedValue=undefined}else if(!value){formattedValue=
"";value=NaN}else value=undefined}this.inherited(arguments,[value,priorityChange,formattedValue])},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!=="")if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+number._realNumberRegexp(lang.delegate(this.constraints))+"$")).test(this.textbox.value)){var n=Number(this.textbox.value);return isNaN(n)?undefined:n}else return undefined;else return v},isValid:function(isFocused){if(!this.focused||
this._isEmpty(this.textbox.value))return this.inherited(arguments);else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints))if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value))return true;else return this.inherited(arguments);else return false}}});var NumberTextBox=declare("dijit.form.NumberTextBox",[RangeBoundTextBox,NumberTextBoxMixin],{baseClass:"dijitTextBox dijitNumberTextBox"});NumberTextBox.Mixin=NumberTextBoxMixin;return NumberTextBox})},"dojo/_base/url":function(){define(["./kernel"],
function(dojo){var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),_Url=function(){var n=null,_a=arguments,uri=[_a[0]];for(var i=1;i<_a.length;i++){if(!_a[i])continue;var relobj=new _Url(_a[i]+""),uriobj=new _Url(uri[0]+"");if(relobj.path==""&&!relobj.scheme&&!relobj.authority&&!relobj.query){if(relobj.fragment!=n)uriobj.fragment=relobj.fragment;relobj=uriobj}else if(!relobj.scheme){relobj.scheme=
uriobj.scheme;if(!relobj.authority){relobj.authority=uriobj.authority;if(relobj.path.charAt(0)!="/"){var path=uriobj.path.substring(0,uriobj.path.lastIndexOf("/")+1)+relobj.path;var segs=path.split("/");for(var j=0;j<segs.length;j++)if(segs[j]==".")if(j==segs.length-1)segs[j]="";else{segs.splice(j,1);j--}else if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!="..")if(j==segs.length-1){segs.splice(j,1);segs[j-1]=""}else{segs.splice(j-1,2);j-=2}relobj.path=segs.join("/")}}}uri=[];if(relobj.scheme)uri.push(relobj.scheme,
":");if(relobj.authority)uri.push("//",relobj.authority);uri.push(relobj.path);if(relobj.query)uri.push("?",relobj.query);if(relobj.fragment)uri.push("#",relobj.fragment)}this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n}};_Url.prototype.toString=
function(){return this.uri};return dojo._Url=_Url})},"dijit/form/_ComboBoxMenuMixin":function(){define("dijit/form/_ComboBoxMenuMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(array,declare,domAttr,has,i18n){var ComboBoxMenuMixin=declare("dijit.form._ComboBoxMenuMixin"+(0?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=i18n.getLocalization("dijit.form","ComboBox",
this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"]},_setValueAttr:function(value){this._set("value",value);this.onChange(value)},onClick:function(node){if(node==this.previousButton){this._setSelectedAttr(null);this.onPage(-1)}else if(node==this.nextButton){this._setSelectedAttr(null);this.onPage(1)}else this.onChange(node)},onChange:function(){},onPage:function(){},
onClose:function(){this._setSelectedAttr(null)},_createOption:function(item,labelFunc){var menuitem=this._createMenuItem();var labelObject=labelFunc(item);if(labelObject.html)menuitem.innerHTML=labelObject.label;else menuitem.appendChild(menuitem.ownerDocument.createTextNode(labelObject.label));if(menuitem.innerHTML=="")menuitem.innerHTML="\x26#160;";return menuitem},createOptions:function(results,options,labelFunc){this.items=results;this.previousButton.style.display=options.start==0?"none":"";domAttr.set(this.previousButton,
"id",this.id+"_prev");array.forEach(results,function(item,i){var menuitem=this._createOption(item,labelFunc);menuitem.setAttribute("item",i);domAttr.set(menuitem,"id",this.id+i);this.nextButton.parentNode.insertBefore(menuitem,this.nextButton)},this);var displayMore=false;if(results.total&&!results.total.then&&results.total!=-1)if(options.start+options.count<results.total)displayMore=true;else{if(options.start+options.count>results.total&&options.count==results.length)displayMore=true}else if(options.count==
results.length)displayMore=true;this.nextButton.style.display=displayMore?"":"none";domAttr.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){var container=this.containerNode;while(container.childNodes.length>2)container.removeChild(container.childNodes[container.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==
this.previousButton)this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.nextButton)this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}});if(0)ComboBoxMenuMixin=declare("dijit.form._ComboBoxMenuMixin",ComboBoxMenuMixin,{_createOption:function(){var menuitem=this.inherited(arguments);this.applyTextDir(menuitem);return menuitem}});return ComboBoxMenuMixin})},"put-selector/put":function(){(function(define){var forDocument,
fragmentFasterHeuristic=/[-+,> ]/;define("put-selector/put",[],forDocument=function(doc,newFragmentFasterHeuristic){fragmentFasterHeuristic=newFragmentFasterHeuristic||fragmentFasterHeuristic;var selectorParse=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,undefined,namespaceIndex,namespaces=false,doc=doc||document,ieCreateElement=typeof doc.createElement=="object";function insertTextNode(element,text){element.appendChild(doc.createTextNode(text))}function put(topReferenceElement){var fragment,
lastSelectorArg,nextSibling,referenceElement,current,args=arguments,returnValue=args[0];function insertLastElement(){if(current&&referenceElement&&current!=referenceElement)(referenceElement==topReferenceElement&&(fragment||(fragment=fragmentFasterHeuristic.test(argument)&&doc.createDocumentFragment()))?fragment:referenceElement).insertBefore(current,nextSibling||null)}for(var i=0;i<args.length;i++){var argument=args[i];if(typeof argument=="object"){lastSelectorArg=false;if(argument instanceof Array){current=
doc.createDocumentFragment();for(var key=0;key<argument.length;key++)current.appendChild(put(argument[key]));argument=current}if(argument.nodeType){current=argument;insertLastElement();referenceElement=argument;nextSibling=0}else for(var key in argument)current[key]=argument[key]}else if(lastSelectorArg){lastSelectorArg=false;insertTextNode(current,argument)}else{if(i<1)topReferenceElement=null;lastSelectorArg=true;if(argument==null){console.error("put argument error");return}var leftoverCharacters=
argument.replace(selectorParse,function(t,combinator,prefix,value,attrName,attrValue){if(combinator){insertLastElement();if(combinator=="-"||combinator=="+"){referenceElement=(nextSibling=current||referenceElement).parentNode;current=null;if(combinator=="+")nextSibling=nextSibling.nextSibling}else{if(combinator=="\x3c")referenceElement=current=(current||referenceElement).parentNode;else{if(combinator==",")referenceElement=topReferenceElement;else if(current)referenceElement=current;current=null}nextSibling=
0}if(current)referenceElement=current}var tag=!prefix&&value;if(tag||!current&&(prefix||attrName))if(tag=="$")insertTextNode(referenceElement,args[++i]);else{tag=tag||put.defaultTag;var ieInputName=ieCreateElement&&args[i+1]&&args[i+1].name;if(ieInputName)tag="\x3c"+tag+' name\x3d"'+ieInputName+'"\x3e';current=namespaces&&~(namespaceIndex=tag.indexOf("|"))?doc.createElementNS(namespaces[tag.slice(0,namespaceIndex)],tag.slice(namespaceIndex+1)):doc.createElement(tag)}if(prefix){if(value=="$")value=
args[++i];if(prefix=="#")current.id=value;else{var currentClassName=current.className;var removed=currentClassName&&(" "+currentClassName+" ").replace(" "+value+" "," ");if(prefix==".")current.className=currentClassName?(removed+value).substring(1):value;else if(argument=="!"){var parentNode;if(ieCreateElement)put("div",current,"\x3c").innerHTML="";else if(parentNode=current.parentNode)parentNode.removeChild(current)}else{removed=removed.substring(1,removed.length-1);if(removed!=currentClassName)current.className=
removed}}}if(attrName){if(attrValue=="$")attrValue=args[++i];if(attrName=="style")current.style.cssText=attrValue;else{var method=attrName.charAt(0)=="!"?(attrName=attrName.substring(1))&&"removeAttribute":"setAttribute";attrValue=attrValue===""?attrName:attrValue;namespaces&&~(namespaceIndex=attrName.indexOf("|"))?current[method+"NS"](namespaces[attrName.slice(0,namespaceIndex)],attrName.slice(namespaceIndex+1),attrValue):current[method](attrName,attrValue)}}return""});if(leftoverCharacters)throw new SyntaxError("Unexpected char "+
leftoverCharacters+" in "+argument);insertLastElement();referenceElement=returnValue=current||referenceElement}}if(topReferenceElement&&fragment)topReferenceElement.appendChild(fragment);return returnValue}put.addNamespace=function(name,uri){if(doc.createElementNS)(namespaces||(namespaces={}))[name]=uri;else doc.namespaces.add(name,uri)};put.defaultTag="div";put.forDocument=forDocument;return put})})(function(id,deps,factory){factory=factory||deps;if(typeof define==="function")define([],function(){return factory()});
else if(typeof window=="undefined")require("./node-html")(module,factory);else put=factory()})},"dojo/selector/_loader":function(){define(["../has","require"],function(has,require){var testDiv=document.createElement("div");has.add("dom-qsa2.1",!!testDiv.querySelectorAll);has.add("dom-qsa3",function(){try{testDiv.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e";return testDiv.querySelectorAll(".TEST:empty").length==1}catch(e){}});var fullEngine;var acme="./acme",lite="./lite";return{load:function(id,
parentRequire,loaded,config){var req=require;id=id=="default"?has("config-selectorEngine")||"css3":id;id=id=="css2"||id=="lite"?lite:id=="css2.1"?has("dom-qsa2.1")?lite:acme:id=="css3"?has("dom-qsa3")?lite:acme:id=="acme"?acme:(req=parentRequire)&&id;if(id.charAt(id.length-1)=="?"){id=id.substring(0,id.length-1);var optionalLoad=true}if(optionalLoad&&(has("dom-compliant-qsa")||fullEngine))return loaded(fullEngine);req([id],function(engine){if(id!="./lite")fullEngine=engine;loaded(engine)})}}})},"dijit/Tree":function(){require({cache:{"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\n\t\t\x3c/span\n\t\x3e\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n'}});define("dijit/Tree",
["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/cookie","dojo/_base/declare","dojo/Deferred","dojo/promise/all","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/errors/create","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","dojo/touch","dojo/when","./a11yclick","./focus","./registry","./_base/manager","./_Widget","./_TemplatedMixin","./_Container","./_Contained","./_CssStateMixin","./_KeyNavMixin","dojo/text!./templates/TreeNode.html",
"dojo/text!./templates/Tree.html","./tree/TreeStoreModel","./tree/ForestStoreModel","./tree/_dndSelector","dojo/query!css2"],function(array,aspect,connect,cookie,declare,Deferred,all,dom,domClass,domGeometry,domStyle,createError,fxUtils,has,kernel,keys,lang,on,topic,touch,when,a11yclick,focus,registry,manager,_Widget,_TemplatedMixin,_Container,_Contained,_CssStateMixin,_KeyNavMixin,treeNodeTemplate,treeTemplate,TreeStoreModel,ForestStoreModel,_dndSelector){function shimmedPromise(d){return lang.delegate(d.promise||
d,{addCallback:function(callback){this.then(callback)},addErrback:function(errback){this.otherwise(errback)}})}var TreeNode=declare("dijit._TreeNode",[_Widget,_TemplatedMixin,_Container,_Contained,_CssStateMixin],{item:null,isTreeNode:true,label:"",_setLabelAttr:function(val){this.labelNode[this.labelType=="html"?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=val;this._set("label",val)},labelType:"text",isExpandable:null,isExpanded:false,state:"NotLoaded",templateString:treeNodeTemplate,
baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable)this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(false)},_setIndentAttr:function(indent){var pixels=Math.max(indent,0)*this.tree._nodePixelIndent+"px";domStyle.set(this.domNode,"backgroundPosition",pixels+" 0px");
domStyle.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",pixels);array.forEach(this.getChildren(),function(child){child.set("indent",indent+1)});this._set("indent",indent)},markProcessing:function(){this.state="Loading";this._setExpando(true)},unmarkProcessing:function(){this._setExpando(false)},_updateItemClasses:function(item){var tree=this.tree,model=tree.model;if(tree._v10Compat&&item===model.root)item=null;this._applyClassAndStyle(item,"icon","Icon");this._applyClassAndStyle(item,
"label","Label");this._applyClassAndStyle(item,"row","Row");this.tree._startPaint(true)},_applyClassAndStyle:function(item,lower,upper){var clsName="_"+lower+"Class";var nodeName=lower+"Node";var oldCls=this[clsName];this[clsName]=this.tree["get"+upper+"Class"](item,this.isExpanded);domClass.replace(this[nodeName],this[clsName]||"",oldCls||"");domStyle.set(this[nodeName],this.tree["get"+upper+"Style"](item,this.isExpanded)||{})},_updateLayout:function(){var parent=this.getParent();if(!parent||!parent.rowNode||
parent.rowNode.style.display=="none")domClass.add(this.domNode,"dijitTreeIsRoot");else domClass.toggle(this.domNode,"dijitTreeIsLast",!this.getNextSibling())},_setExpando:function(processing){var styles=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],_a11yStates=["*","-","+","*"],idx=processing?0:this.isExpandable?this.isExpanded?1:2:3;if(this.expandoNode){domClass.replace(this.expandoNode,styles[idx],styles);this.expandoNodeText.innerHTML=_a11yStates[idx]}else console.error("have no expando node !")},
expand:function(){if(this._expandDeferred)return shimmedPromise(this._expandDeferred);if(this._collapseDeferred){this._collapseDeferred.cancel();delete this._collapseDeferred}this.isExpanded=true;this.labelNode.setAttribute("aria-expanded","true");if(this.tree.showRoot||this!==this.tree.rootNode)this.containerNode.setAttribute("role","group");domClass.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode&&this.tree.showRoot)this.tree.domNode.setAttribute("aria-expanded",
"true");var wipeIn=fxUtils.wipeIn({node:this.containerNode,duration:manager.defaultDuration});var def=this._expandDeferred=new Deferred(function(){wipeIn.stop()});aspect.after(wipeIn,"onEnd",function(){def.resolve(true)},true);wipeIn.play();return shimmedPromise(def)},collapse:function(){if(this._collapseDeferred)return shimmedPromise(this._collapseDeferred);if(this._expandDeferred){this._expandDeferred.cancel();delete this._expandDeferred}this.isExpanded=false;this.labelNode.setAttribute("aria-expanded",
"false");if(this==this.tree.rootNode&&this.tree.showRoot)this.tree.domNode.setAttribute("aria-expanded","false");domClass.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var wipeOut=fxUtils.wipeOut({node:this.containerNode,duration:manager.defaultDuration});var def=this._collapseDeferred=new Deferred(function(){wipeOut.stop()});aspect.after(wipeOut,"onEnd",function(){def.resolve(true)},true);wipeOut.play();return shimmedPromise(def)},indent:0,
setChildItems:function(items){var tree=this.tree,model=tree.model,defs=[];var oldChildren=this.getChildren();array.forEach(oldChildren,function(child){_Container.prototype.removeChild.call(this,child)},this);this.defer(function(){array.forEach(oldChildren,function(node){if(!node._destroyed&&!node.getParent()){tree.dndController.removeTreeNode(node);function remove(node){var id=model.getIdentity(node.item),ary=tree._itemNodesMap[id];if(ary.length==1)delete tree._itemNodesMap[id];else{var index=array.indexOf(ary,
node);if(index!=-1)ary.splice(index,1)}array.forEach(node.getChildren(),remove)}remove(node);if(tree.persist){var destroyedPath=array.map(node.getTreePath(),function(item){return tree.model.getIdentity(item)}).join("/");for(var path in tree._openedNodes)if(path.substr(0,destroyedPath.length)==destroyedPath)delete tree._openedNodes[path];tree._saveExpandedNodes()}node.destroyRecursive()}})});this.state="Loaded";if(items&&items.length>0){this.isExpandable=true;array.forEach(items,function(item){var id=
model.getIdentity(item),existingNodes=tree._itemNodesMap[id],node;if(existingNodes)for(var i=0;i<existingNodes.length;i++)if(existingNodes[i]&&!existingNodes[i].getParent()){node=existingNodes[i];node.set("indent",this.indent+1);break}if(!node){node=this.tree._createTreeNode({item:item,tree:tree,isExpandable:model.mayHaveChildren(item),label:tree.getLabel(item),labelType:tree.model&&tree.model.labelType||"text",tooltip:tree.getTooltip(item),ownerDocument:tree.ownerDocument,dir:tree.dir,lang:tree.lang,
textDir:tree.textDir,indent:this.indent+1});if(existingNodes)existingNodes.push(node);else tree._itemNodesMap[id]=[node]}this.addChild(node);if(this.tree.autoExpand||this.tree._state(node))defs.push(tree._expandNode(node))},this);array.forEach(this.getChildren(),function(child){child._updateLayout()})}else this.isExpandable=false;if(this._setExpando)this._setExpando(false);this._updateItemClasses(this.item);var def=all(defs);this.tree._startPaint(def);return shimmedPromise(def)},getTreePath:function(){var node=
this;var path=[];while(node&&node!==this.tree.rootNode){path.unshift(node.item);node=node.getParent()}path.unshift(this.tree.rootNode.item);return path},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(node){this.inherited(arguments);var children=this.getChildren();if(children.length==0){this.isExpandable=false;this.collapse()}array.forEach(children,function(child){child._updateLayout()})},makeExpandable:function(){this.isExpandable=true;this._setExpando(false)},
setSelected:function(selected){this.labelNode.setAttribute("aria-selected",selected?"true":"false");domClass.toggle(this.rowNode,"dijitTreeRowSelected",selected)},focus:function(){focus.focus(this.focusNode)}});if(0)TreeNode.extend({_setTextDirAttr:function(textDir){if(textDir&&(this.textDir!=textDir||!this._created)){this._set("textDir",textDir);this.applyTextDir(this.labelNode);array.forEach(this.getChildren(),function(childNode){childNode.set("textDir",textDir)},this)}}});var Tree=declare("dijit.Tree",
[_Widget,_KeyNavMixin,_TemplatedMixin,_CssStateMixin],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:treeTemplate,persist:false,autoExpand:false,dndController:_dndSelector,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,
checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(topicName,message){topic.publish(this.id,lang.mixin({tree:this,event:topicName},message||{}))},postMixInProperties:function(){this.tree=this;if(this.autoExpand)this.persist=false;this._itemNodesMap={};if(!this.cookieName&&this.id)this.cookieName=this.id+"SaveStateCookie";this.expandChildrenDeferred=new Deferred;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},
postCreate:function(){this._initState();var self=this;this.own(on(this.containerNode,on.selector(".dijitTreeNode",touch.enter),function(evt){self._onNodeMouseEnter(registry.byNode(this),evt)}),on(this.containerNode,on.selector(".dijitTreeNode",touch.leave),function(evt){self._onNodeMouseLeave(registry.byNode(this),evt)}),on(this.containerNode,a11yclick,function(evt){var node=registry.getEnclosingWidget(evt.target);if(node.isInstanceOf(TreeNode))self._onClick(node,evt)}),on(this.containerNode,on.selector(".dijitTreeNode",
"dblclick"),function(evt){self._onDblClick(registry.byNode(this),evt)}));if(!this.model)this._store2model();this.own(aspect.after(this.model,"onChange",lang.hitch(this,"_onItemChange"),true),aspect.after(this.model,"onChildrenChange",lang.hitch(this,"_onItemChildrenChange"),true),aspect.after(this.model,"onDelete",lang.hitch(this,"_onItemDelete"),true));this.inherited(arguments);if(this.dndController){if(lang.isString(this.dndController))this.dndController=lang.getObject(this.dndController);var params=
{};for(var i=0;i<this.dndParams.length;i++)if(this[this.dndParams[i]])params[this.dndParams[i]]=this[this.dndParams[i]];this.dndController=new this.dndController(this,params)}this._load();this.onLoadDeferred=shimmedPromise(this.pendingCommandsPromise);this.onLoadDeferred.then(lang.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=true;kernel.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var modelParams={id:this.id+"_ForestStoreModel",store:this.store,
query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren)modelParams.mayHaveChildren=lang.hitch(this,"mayHaveChildren");if(this.params.getItemChildren)modelParams.getChildren=lang.hitch(this,function(item,onComplete,onError){this.getItemChildren(this._v10Compat&&item===this.model.root?null:item,onComplete,onError)});this.model=new ForestStoreModel(modelParams);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(lang.hitch(this,function(item){var rn=
this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});if(!this.showRoot){rn.rowNode.style.display="none";this.domNode.setAttribute("role","presentation");this.domNode.removeAttribute("aria-expanded");this.domNode.removeAttribute("aria-multiselectable");if(this["aria-label"]){rn.containerNode.setAttribute("aria-label",this["aria-label"]);this.domNode.removeAttribute("aria-label")}else if(this["aria-labelledby"]){rn.containerNode.setAttribute("aria-labelledby",
this["aria-labelledby"]);this.domNode.removeAttribute("aria-labelledby")}rn.labelNode.setAttribute("role","presentation");rn.containerNode.setAttribute("role","tree");rn.containerNode.setAttribute("aria-expanded","true");rn.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular)}else{this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular);this.rootLoadingIndicator.style.display="none"}this.containerNode.appendChild(rn.domNode);var identity=this.model.getIdentity(item);
if(this._itemNodesMap[identity])this._itemNodesMap[identity].push(rn);else this._itemNodesMap[identity]=[rn];rn._updateLayout();this._expandNode(rn).then(lang.hitch(this,function(){this.rootLoadingIndicator.style.display="none";this.expandChildrenDeferred.resolve(true)}))}),lang.hitch(this,function(err){console.error(this,": error loading root: ",err)}))},getNodesByItem:function(item){if(!item)return[];var identity=lang.isString(item)?item:this.model.getIdentity(item);return[].concat(this._itemNodesMap[identity])},
_setSelectedItemAttr:function(item){this.set("selectedItems",[item])},_setSelectedItemsAttr:function(items){var tree=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(lang.hitch(this,function(){var identities=array.map(items,function(item){return!item||lang.isString(item)?item:tree.model.getIdentity(item)});var nodes=[];array.forEach(identities,function(id){nodes=nodes.concat(tree._itemNodesMap[id]||[])});this.set("selectedNodes",nodes)}))},_setPathAttr:function(path){if(path.length)return shimmedPromise(this.set("paths",
[path]).then(function(paths){return paths[0]}));else return shimmedPromise(this.set("paths",[]).then(function(paths){return paths[0]}))},_setPathsAttr:function(paths){var tree=this;function selectPath(path,nodes){var nextPath=path.shift();var nextNode=array.filter(nodes,function(node){return node.getIdentity()==nextPath})[0];if(!!nextNode)if(path.length)return tree._expandNode(nextNode).then(function(){return selectPath(path,nextNode.getChildren())});else return nextNode;else throw new Tree.PathError("Could not expand path at "+
nextPath);}return shimmedPromise(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return all(array.map(paths,function(path){path=array.map(path,function(item){return lang.isString(item)?item:tree.model.getIdentity(item)});if(path.length)return selectPath(path,[tree.rootNode]);else throw new Tree.PathError("Empty path");}))}).then(function setNodes(newNodes){tree.set("selectedNodes",newNodes);return tree.paths}))},_setSelectedNodeAttr:function(node){this.set("selectedNodes",
[node])},_setSelectedNodesAttr:function(nodes){this.dndController.setSelection(nodes)},expandAll:function(){var _this=this;function expand(node){return _this._expandNode(node).then(function(){var childBranches=array.filter(node.getChildren()||[],function(node){return node.isExpandable});return all(array.map(childBranches,expand))})}return shimmedPromise(expand(this.rootNode))},collapseAll:function(){var _this=this;function collapse(node){var childBranches=array.filter(node.getChildren()||[],function(node){return node.isExpandable}),
defs=all(array.map(childBranches,collapse));if(!node.isExpanded||node==_this.rootNode&&!_this.showRoot)return defs;else return defs.then(function(){return _this._collapseNode(node)})}return shimmedPromise(collapse(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(item){return this.model.getLabel(item)},getIconClass:function(item,opened){return!item||this.model.mayHaveChildren(item)?opened?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},
getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(evt,node){var nextNode=this._getNext(node);if(nextNode&&nextNode.isTreeNode)this.focusNode(nextNode)},_onUpArrow:function(evt,node){var previousSibling=node.getPreviousSibling();if(previousSibling){node=previousSibling;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var children=node.getChildren();node=children[children.length-1]}}else{var parent=
node.getParent();if(!(!this.showRoot&&parent===this.rootNode))node=parent}if(node&&node.isTreeNode)this.focusNode(node)},_onRightArrow:function(evt,node){if(node.isExpandable&&!node.isExpanded)this._expandNode(node);else if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode)this.focusNode(node)}},_onLeftArrow:function(evt,node){if(node.isExpandable&&node.isExpanded)this._collapseNode(node);else{var parent=node.getParent();if(parent&&parent.isTreeNode&&!(!this.showRoot&&parent===
this.rootNode))this.focusNode(parent)}},focusLastChild:function(){var node=this._getLast();if(node&&node.isTreeNode)this.focusNode(node)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){var node=this.rootNode;while(node.isExpanded){var c=node.getChildren();if(!c.length)break;node=c[c.length-1]}return node},_getNext:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren())return node.getChildren()[0];else{while(node&&node.isTreeNode){var returnNode=
node.getNextSibling();if(returnNode)return returnNode;node=node.getParent()}return null}},childSelector:".dijitTreeRow",isExpandoNode:function(node,widget){return dom.isDescendant(node,widget.expandoNode)||dom.isDescendant(node,widget.expandoNodeText)},_onClick:function(nodeWidget,e){var domElement=e.target,isExpandoClick=this.isExpandoNode(domElement,nodeWidget);if(this.openOnClick&&nodeWidget.isExpandable||isExpandoClick){if(nodeWidget.isExpandable)this._onExpandoClick({node:nodeWidget})}else{this._publish("execute",
{item:nodeWidget.item,node:nodeWidget,evt:e});this.onClick(nodeWidget.item,nodeWidget,e);this.focusNode(nodeWidget)}e.stopPropagation();e.preventDefault()},_onDblClick:function(nodeWidget,e){var domElement=e.target,isExpandoClick=domElement==nodeWidget.expandoNode||domElement==nodeWidget.expandoNodeText;if(this.openOnDblClick&&nodeWidget.isExpandable||isExpandoClick){if(nodeWidget.isExpandable)this._onExpandoClick({node:nodeWidget})}else{this._publish("execute",{item:nodeWidget.item,node:nodeWidget,
evt:e});this.onDblClick(nodeWidget.item,nodeWidget,e);this.focusNode(nodeWidget)}e.stopPropagation();e.preventDefault()},_onExpandoClick:function(message){var node=message.node;this.focusNode(node);if(node.isExpanded)this._collapseNode(node);else this._expandNode(node)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(node){kernel.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(node)},
_getRootOrFirstNode:function(){kernel.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(node){if(node._expandNodeDeferred)delete node._expandNodeDeferred;if(node.state=="Loading")return;if(node.isExpanded){var ret=node.collapse();this.onClose(node.item,node);this._state(node,false);this._startPaint(ret);return ret}},_expandNode:function(node){if(node._expandNodeDeferred)return node._expandNodeDeferred;
var model=this.model,item=node.item,_this=this;if(!node._loadDeferred){node.markProcessing();node._loadDeferred=new Deferred;model.getChildren(item,function(items){node.unmarkProcessing();node.setChildItems(items).then(function(){node._loadDeferred.resolve(items)})},function(err){console.error(_this,": error loading "+node.label+" children: ",err);node._loadDeferred.reject(err)})}var def=node._loadDeferred.then(lang.hitch(this,function(){var def2=node.expand();this.onOpen(node.item,node);this._state(node,
true);return def2}));this._startPaint(def);return def},focusNode:function(node){this.focusChild(node)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(item){var model=this.model,identity=model.getIdentity(item),nodes=this._itemNodesMap[identity];if(nodes){var label=this.getLabel(item),tooltip=this.getTooltip(item);array.forEach(nodes,function(node){node.set({item:item,label:label,tooltip:tooltip});node._updateItemClasses(item)})}},_onItemChildrenChange:function(parent,
newChildrenList){var model=this.model,identity=model.getIdentity(parent),parentNodes=this._itemNodesMap[identity];if(parentNodes)array.forEach(parentNodes,function(parentNode){parentNode.setChildItems(newChildrenList)})},_onItemDelete:function(item){var model=this.model,identity=model.getIdentity(item),nodes=this._itemNodesMap[identity];if(nodes){array.forEach(nodes,function(node){this.dndController.removeTreeNode(node);var parent=node.getParent();if(parent)parent.removeChild(node);node.destroyRecursive()},
this);delete this._itemNodesMap[identity]}},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var oreo=cookie(this.cookieName);if(oreo)array.forEach(oreo.split(","),function(item){this._openedNodes[item]=true},this)}},_state:function(node,expanded){if(!this.persist)return false;var path=array.map(node.getTreePath(),function(item){return this.model.getIdentity(item)},this).join("/");if(arguments.length===1)return this._openedNodes[path];else{if(expanded)this._openedNodes[path]=
true;else delete this._openedNodes[path];this._saveExpandedNodes()}},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var ary=[];for(var id in this._openedNodes)ary.push(id);cookie(this.cookieName,ary.join(","),{expires:365})}},destroy:function(){if(this._curSearch){this._curSearch.timer.remove();delete this._curSearch}if(this.rootNode)this.rootNode.destroyRecursive();if(this.dndController&&!lang.isString(this.dndController))this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},
destroyRecursive:function(){this.destroy()},resize:function(changeSize){if(changeSize)domGeometry.setMarginBox(this.domNode,changeSize);this._nodePixelIndent=domGeometry.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(lang.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(p){this._outstandingPaintOperations++;if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();
delete this._adjustWidthsTimer}var oc=lang.hitch(this,function(){this._outstandingPaintOperations--;if(this._outstandingPaintOperations<=0&&!this._adjustWidthsTimer&&this._started)this._adjustWidthsTimer=this.defer("_adjustWidths")});when(p,oc,oc)},_adjustWidths:function(){if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer}this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(args){return new TreeNode(args)},
focus:function(){if(this.lastFocusedChild)this.focusNode(this.lastFocusedChild);else this.focusFirstChild()}});if(0)Tree.extend({_setTextDirAttr:function(textDir){if(textDir&&this.textDir!=textDir){this._set("textDir",textDir);this.rootNode.set("textDir",textDir)}}});Tree.PathError=createError("TreePathError");Tree._TreeNode=TreeNode;return Tree})},"xide/widgets/_ResizeMixin":function(){define(["dojo/_base/declare","xide/factory","xide/types"],function(declare,factory,types){return declare("xide.widgets._ResizeMixin",
null,{delayResized:500,onResized:function(){this.inherited(arguments);var thiz=this;if(thiz.delegate&&this.delegate.onResized)thiz.delegate.onResized(thiz);setTimeout(function(){if(thiz.delegate&&thiz.delegate.onResized)thiz.delegate.onResized(thiz)},this.delayResized);factory.publish(types.EVENTS.RESIZE,{view:this},this)}})})},"dijit/form/Button":function(){require({cache:{"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\n\t\t\t\tid\x3d"${id}_label"\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\n\t\t\t\x3e\x3c/span\n\t\t\x3e\x3c/span\n\t\x3e\x3c/span\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\n\t\ttabIndex\x3d"-1" role\x3d"presentation" data-dojo-attach-point\x3d"valueNode"\n/\x3e\x3c/span\x3e\n'}});
define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(require,declare,domClass,has,kernel,lang,ready,_FormWidget,_ButtonMixin,template){if(has("dijit-legacy-requires"))ready(0,function(){var requires=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];require(requires)});var Button=declare("dijit.form.Button"+
(0?"_NoBidi":""),[_FormWidget,_ButtonMixin],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:template,_setValueAttr:"valueNode",_setNameAttr:function(name){if(this.valueNode)this.valueNode.setAttribute("name",name)},_fillContent:function(source){if(source&&(!this.params||!("label"in this.params))){var sourceLabel=lang.trim(source.innerHTML);if(sourceLabel)this.label=sourceLabel}},_setShowLabelAttr:function(val){if(this.containerNode)domClass.toggle(this.containerNode,
"dijitDisplayNone",!val);this._set("showLabel",val)},setLabel:function(content){kernel.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",content)},_setLabelAttr:function(content){this.inherited(arguments);if(!this.showLabel&&!("title"in this.params))this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"")}});if(0)Button=declare("dijit.form.Button",Button,{_setLabelAttr:function(content){this.inherited(arguments);
if(this.titleNode.title)this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(textDir){if(this._created&&this.textDir!=textDir){this._set("textDir",textDir);this._setLabelAttr(this.label)}}});return Button})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(dojo,lang,on){var win=window;var unload={addOnWindowUnload:function(obj,functionName){if(!dojo.windowUnloaded)on(win,"unload",dojo.windowUnloaded=function(){});on(win,"unload",lang.hitch(obj,
functionName))},addOnUnload:function(obj,functionName){on(win,"beforeunload",lang.hitch(obj,functionName))}};dojo.addOnWindowUnload=unload.addOnWindowUnload;dojo.addOnUnload=unload.addOnUnload;return unload})},"xlog/manager/LogManager":function(){define(["dojo/_base/declare","dojo/_base/lang","xide/manager/ServerActionBase","xide/manager/BeanManager","dojox/encoding/digests/MD5","xide/types","xide/utils","dojo/cookie","dojo/json","dojo/store/Memory","dojo/store/Observable","xlog/views/LogView","xide/mixins/ReloadMixin"],
function(declare,lang,ServerActionBase,BeanManager,MD5,types,utils,cookie,json,Memory,Observable,LogView,ReloadMixin){return declare("xide.manager.LogManager",[ServerActionBase,BeanManager,ReloadMixin],{serviceClass:"XIDE_Log_Service",cookiePrefix:"logging",singleton:true,serviceView:null,clients:null,beanNamespace:"logging",views:null,getViewId:function(item){var data={info:item.info};return this.beanNamespace+MD5(JSON.stringify(data),1)},loadPreferences:function(){var _cookie=this.cookiePrefix+
"_debug_settings";var settings=cookie(_cookie);settings=settings?json.parse(settings):{};return settings},savePreferences:function(settings){var _cookie=this.cookiePrefix+"_debug_settings";cookie(_cookie,json.stringify(settings))},clear:function(){this.store.setData({identifier:"id",label:"level",items:[],sort:"time"});for(var i=0;i<this.views.length;i++)this.views[i].grid.set("store",this.store)},getViewTarget:function(){var mainView=this.ctx.getApplication().mainView;return mainView.getNewAlternateTarget()},
getStore:function(){return this.store},isValid:function(){return this.store!=null},_buildLoggingMessage:function(msg){var item={id:utils.createUUID(),level:msg.level,message:msg.message,host:"",data:msg.data||{},time:msg.time||(new Date).getTime(),type:"",show:true,showDevice:true};if(msg.type)item.type=msg.type;if(msg.device&&msg.device.host)item.host=msg.device.host+":"+msg.device.port;if(msg.deviceMessage)item.message=item.message+":"+msg.deviceMessage;item.ori=msg;return item},initStore:function(data){var sdata=
{identifier:"id",label:"level",items:[],sort:"time"};if(data.length==0)data=[];for(var i=0;i<data.length;i++){var item=data[i];sdata.items.push(this._buildLoggingMessage(item))}this.store=Observable(Memory({data:sdata}));return this.store},createLoggingView:function(store,where,silent){var parent=where||this.getViewTarget();try{return utils.addWidget(LogView,{delegate:this,store:store,title:"Log",closable:true,style:"padding:0px",silent:silent},this,parent,true)}catch(e){console.error(e)}},updateViews:function(store){for(var i=
0;i<this.views.length;i++){var view=this.views[i];view.update(store)}},openLogView:function(target,silent){if(!this.isValid())this.initStore([]);var logView=this.createLoggingView(this.store,target,silent);this.views.push(logView);return logView},addLoggingMessage:function(msg){var item={id:utils.createUUID(),level:msg.level,message:msg.message,host:msg.host||"",data:msg.data||{},time:msg.time||(new Date).getTime(),type:msg.type||"",show:true,showDevice:true,terminatorItem:msg.item,terminatorMessage:msg.terminatorMessage,
showProgress:msg.showProgress,progressMessage:msg.progressMessage,progressFailedMessage:msg.progressFailedMessage,details:msg.details};if(msg.data){if(msg.data.type)item.type=msg.data.type;if(msg.data.device&&msg.data.device.host)item.host=msg.data.device.host+":"+msg.data.device.port;if(msg.data.deviceMessage)item.message=item.message+":"+msg.data.deviceMessage}if(!this.isValid())this.initStore([]);try{this.getStore().put(item)}catch(e){console.error("adding log message to store failed "+e)}this.updateViews(this.getStore())},
onServerLogMessage:function(evt){this.addLoggingMessage(evt);this.updateViews()},onMainViewReady:function(){},init:function(){this.inherited(arguments);this.subscribe(types.EVENTS.ON_MAIN_MENU_OPEN,this.onMainMenuOpen);this.subscribe(types.EVENTS.ON_MAIN_VIEW_READY,this.onMainViewReady);this.subscribe(types.EVENTS.ON_SERVER_LOG_MESSAGE,this.onServerLogMessage);this.views=[]},onStoreReloaded:function(rawData){for(var i=0;i<this.views.length;i++){var view=this.views[i];view.reload(this.store);view.update()}},
reload:function(){var thiz=this;this.currentItem=null;this.ls(function(data){thiz.onStoreReloaded(data)})},onMainMenuOpen:function(evt){var menu=evt["menu"];if(!menu["logMenuItem"]&&menu["name"]==types.MAIN_MENU_KEYS.VIEWS){menu["logMenuItem"]=new dijit.MenuItem({label:"Log",onClick:lang.hitch(this,"openLogView")});menu.addChild(menu["logMenuItem"])}},ls:function(readyCB,errorCB){var thiz=this;var _cb=function(data){thiz.rawData=data;if(lang.isString(data))data=utils.getJson(data);thiz.initStore(data);
if(readyCB)readyCB(data)};return this.callMethodEx(null,"ls",["unset"],_cb,true)}})})},"xfile/views/KeyboardHandler":function(){define("xfile/views/KeyboardHandler",["dojo/_base/declare","dojo/keys","dojo/has"],function(declare,keys,has){return declare("xfiles.views.KeyboardDelegate",null,{ctlrKeyDown:false,onKeyUp:function(evt){switch(evt.keyCode){case keys.META:case keys.SHIFT:case keys.ALT:case keys.CTRL:this.ctlrKeyDown=false;break}},onKey:function(evt){var thiz=this;if(evt.type&&evt.type=="keyup")return this.onKeyUp(evt);
var vKey=86,cKey=67,cutKey=88;if(evt.keyCode==keys.ENTER)if(this.ctlrKeyDown){if(this.openItemAlternate){evt.preventDefault();this.openItemAlternate(null)}}else{if(this.openItem){this.openItem(null);evt.preventDefault()}}else switch(evt.keyCode){case keys.META:case keys.ALT:case keys.SHIFT:case keys.CTRL:this.ctlrKeyDown=true;setTimeout(function(){thiz.ctlrKeyDown=false},2E3);break;case keys.SPACE:if(this.onPreview){evt.preventDefault();this.onPreview()}break;case keys.F1:if(this.openSourceMenu){evt.preventDefault();
this.openSourceMenu()}break;case keys.F2:if(this.onRename){evt.preventDefault();this.onRename()}break;case keys.TAB:if(this.onTab){this.onTab(evt);evt.preventDefault()}break;case keys.BACKSPACE:var doBack=true;if(has("chrome")&&this.ctlrKeyDown==false)doBack=false;if(doBack)if(this.onBack){evt.preventDefault();this.onBack()}break;case keys.F5:if(this.copyItem){evt.preventDefault();this.copyItem()}break;case keys.F6:if(this.moveItem){evt.preventDefault();this.moveItem()}break;case keys.F7:if(this.mkdir){evt.preventDefault();
this.mkdir()}break;case keys.F9:if(this.mkfile){evt.preventDefault();this.mkfile()}break;case keys.F8:case keys.DELETE:if(this.deleteItem){evt.preventDefault();this.deleteItem()}break;case 70:if(this.ctlrKeyDown&&this.onFind){evt.preventDefault();this.onFind()}break;case keys.F4:case 87:if(this.ctlrKeyDown&&this.closeItem){evt.preventDefault();this.closeItem();if(has("chrome"))this.onClose()}break;case cKey:if(this.ctlrKeyDown&&this.onClipBoardCopy)this.onClipBoardCopy();break;case vKey:if(this.ctlrKeyDown&&
this.onClipBoardPaste)this.onClipBoardPaste();break;case cutKey:if(this.ctlrKeyDown&&this.onClipBoardCut)this.onClipBoardCut();break}}})})},"xwordpress/run":function(){require({packages:["dojo","dijit","dojox",{name:"xapp",location:"xapp",packageMap:{}},{name:"xas",location:"xas",packageMap:{}},{name:"xwordpress",location:"xwordpress",packageMap:{}},{name:"cbtree",location:"cbtree",packageMap:{}},{name:"xappconnect",location:"xappconnect",packageMap:{}},{name:"xide",location:"xide",packageMap:{}},
{name:"dgrid",location:"dgrid",packageMap:{}},{name:"put-selector",location:"put-selector",packageMap:{}},{name:"xstyle",location:"xstyle",packageMap:{}},{name:"dcl",location:"dcl",packageMap:{}},{name:"xlog",location:"xlog",packageMap:{}},{name:"xfile",location:"xfile",packageMap:{}},{name:"xblox",location:"xblox",packageMap:{}},"xwordpress"],cache:{}},["xwordpress"])},"dojo/parser":function(){define(["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./_base/html","./_base/window",
"./_base/url","./_base/json","./aspect","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(require,dojo,dlang,darray,config,dhtml,dwindow,_Url,djson,aspect,dates,Deferred,has,query,don,ready){JSCOMPILER_PRESERVE(new Date("X"));var extendCnt=0;aspect.after(dlang,"extend",function(){extendCnt++},true);function getNameMap(ctor){var map=ctor._nameCaseMap,proto=ctor.prototype;if(!map||map._extendCnt<extendCnt){map=ctor._nameCaseMap={};for(var name in proto){if(name.charAt(0)==="_")continue;
map[name.toLowerCase()]=name}map._extendCnt=extendCnt}return map}var _ctorMap={};function getCtor(types){var ts=types.join();if(!_ctorMap[ts]){var mixins=[];for(var i=0,l=types.length;i<l;i++){var t=types[i];mixins[mixins.length]=_ctorMap[t]=_ctorMap[t]||dlang.getObject(t)||~t.indexOf("/")&&require(t)}var ctor=mixins.shift();_ctorMap[ts]=mixins.length?ctor.createSubclass?ctor.createSubclass(mixins):ctor.extend.apply(ctor,mixins):ctor}return _ctorMap[ts]}var parser={_clearCache:function(){extendCnt++;
_ctorMap={}},_functionFromScript:function(script,attrData){var preamble="",suffix="",argsStr=script.getAttribute(attrData+"args")||script.getAttribute("args"),withStr=script.getAttribute("with");var fnArgs=(argsStr||"").split(/\s*,\s*/);if(withStr&&withStr.length)darray.forEach(withStr.split(/\s*,\s*/),function(part){preamble+="with("+part+"){";suffix+="}"});return new Function(fnArgs,preamble+script.innerHTML+suffix)},instantiate:function(nodes,mixin,options){mixin=mixin||{};options=options||{};
var dojoType=(options.scope||dojo._scopeName)+"Type",attrData="data-"+(options.scope||dojo._scopeName)+"-",dataDojoType=attrData+"type",dataDojoMixins=attrData+"mixins";var list=[];darray.forEach(nodes,function(node){var type=dojoType in mixin?mixin[dojoType]:node.getAttribute(dataDojoType)||node.getAttribute(dojoType);if(type){var mixinsValue=node.getAttribute(dataDojoMixins),types=mixinsValue?[type].concat(mixinsValue.split(/\s*,\s*/)):[type];list.push({node:node,types:types})}});return this._instantiate(list,
mixin,options)},_instantiate:function(nodes,mixin,options){var thelist=darray.map(nodes,function(obj){var ctor=obj.ctor||getCtor(obj.types);if(!ctor)throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");return this.construct(ctor,obj.node,mixin,options,obj.scripts,obj.inherited)},this);if(!mixin._started&&!options.noStart)darray.forEach(thelist,function(instance){if(typeof instance.startup==="function"&&!instance._started)instance.startup()});return thelist},construct:function(ctor,
node,mixin,options,scripts,inherited){var proto=ctor&&ctor.prototype;options=options||{};var params={};if(options.defaults)dlang.mixin(params,options.defaults);if(inherited)dlang.mixin(params,inherited);var attributes;if(has("dom-attributes-explicit"))attributes=node.attributes;else if(has("dom-attributes-specified-flag"))attributes=darray.filter(node.attributes,function(a){return a.specified});else{var clone=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false),attrs=clone.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,
"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");attributes=darray.map(attrs.split(/\s+/),function(name){var lcName=name.toLowerCase();return{name:name,value:node.nodeName=="LI"&&name=="value"||lcName=="enctype"?node.getAttribute(lcName):node.getAttributeNode(lcName).value}})}var scope=options.scope||dojo._scopeName,attrData="data-"+scope+"-",hash={};if(scope!=="dojo"){hash[attrData+"props"]="data-dojo-props";hash[attrData+"type"]="data-dojo-type";hash[attrData+"mixins"]="data-dojo-mixins";
hash[scope+"type"]="dojoType";hash[attrData+"id"]="data-dojo-id"}var i=0,item,funcAttrs=[],jsname,extra;while(item=attributes[i++]){var name=item.name,lcName=name.toLowerCase(),value=item.value;switch(hash[lcName]||lcName){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":extra=value;break;case "data-dojo-id":case "jsid":jsname=value;break;case "data-dojo-attach-point":case "dojoattachpoint":params.dojoAttachPoint=value;break;case "data-dojo-attach-event":case "dojoattachevent":params.dojoAttachEvent=
value;break;case "class":params["class"]=node.className;break;case "style":params["style"]=node.style&&node.style.cssText;break;default:if(!(name in proto)){var map=getNameMap(ctor);name=map[lcName]||name}if(name in proto)switch(typeof proto[name]){case "string":params[name]=value;break;case "number":params[name]=value.length?Number(value):NaN;break;case "boolean":params[name]=value.toLowerCase()!="false";break;case "function":if(value===""||value.search(/[^\w\.]+/i)!=-1)params[name]=new Function(value);
else params[name]=dlang.getObject(value,false)||new Function(value);funcAttrs.push(name);break;default:var pVal=proto[name];params[name]=pVal&&"length"in pVal?value?value.split(/\s*,\s*/):[]:pVal instanceof Date?value==""?new Date(""):value=="now"?new Date:dates.fromISOString(value):pVal instanceof _Url?dojo.baseUrl+value:djson.fromJson(value)}else params[name]=value}}for(var j=0;j<funcAttrs.length;j++){var lcfname=funcAttrs[j].toLowerCase();node.removeAttribute(lcfname);node[lcfname]=null}if(extra)try{extra=
djson.fromJson.call(options.propsThis,"{"+extra+"}");dlang.mixin(params,extra)}catch(e){throw new Error(e.toString()+" in data-dojo-props\x3d'"+extra+"'");}dlang.mixin(params,mixin);if(!scripts)scripts=ctor&&(ctor._noScript||proto._noScript)?[]:query("\x3e script[type^\x3d'dojo/']",node);var aspects=[],calls=[],watches=[],ons=[];if(scripts)for(i=0;i<scripts.length;i++){var script=scripts[i];node.removeChild(script);var event=script.getAttribute(attrData+"event")||script.getAttribute("event"),prop=
script.getAttribute(attrData+"prop"),method=script.getAttribute(attrData+"method"),advice=script.getAttribute(attrData+"advice"),scriptType=script.getAttribute("type"),nf=this._functionFromScript(script,attrData);if(event)if(scriptType=="dojo/connect")aspects.push({method:event,func:nf});else if(scriptType=="dojo/on")ons.push({event:event,func:nf});else params[event]=nf;else if(scriptType=="dojo/aspect")aspects.push({method:method,advice:advice,func:nf});else if(scriptType=="dojo/watch")watches.push({prop:prop,
func:nf});else calls.push(nf)}var markupFactory=ctor.markupFactory||proto.markupFactory;var instance=markupFactory?markupFactory(params,node,ctor):new ctor(params,node);if(jsname)dlang.setObject(jsname,instance);for(i=0;i<aspects.length;i++)aspect[aspects[i].advice||"after"](instance,aspects[i].method,dlang.hitch(instance,aspects[i].func),true);for(i=0;i<calls.length;i++)calls[i].call(instance);for(i=0;i<watches.length;i++)instance.watch(watches[i].prop,watches[i].func);for(i=0;i<ons.length;i++)don(instance,
ons[i].event,ons[i].func);return instance},scan:function(root,options){var list=[],mids=[],midsHash={};var dojoType=(options.scope||dojo._scopeName)+"Type",attrData="data-"+(options.scope||dojo._scopeName)+"-",dataDojoType=attrData+"type",dataDojoTextDir=attrData+"textdir",dataDojoMixins=attrData+"mixins";var node=root.firstChild;var inherited=options.inherited;if(!inherited){function findAncestorAttr(node,attr){return node.getAttribute&&node.getAttribute(attr)||node.parentNode&&findAncestorAttr(node.parentNode,
attr)}inherited={dir:findAncestorAttr(root,"dir"),lang:findAncestorAttr(root,"lang"),textDir:findAncestorAttr(root,dataDojoTextDir)};for(var key in inherited)if(!inherited[key])delete inherited[key]}var parent={inherited:inherited};var scripts;var scriptsOnly;function getEffective(parent){if(!parent.inherited){parent.inherited={};var node=parent.node,grandparent=getEffective(parent.parent);var inherited={dir:node.getAttribute("dir")||grandparent.dir,lang:node.getAttribute("lang")||grandparent.lang,
textDir:node.getAttribute(dataDojoTextDir)||grandparent.textDir};for(var key in inherited)if(inherited[key])parent.inherited[key]=inherited[key]}return parent.inherited}while(true){if(!node){if(!parent||!parent.node)break;node=parent.node.nextSibling;scriptsOnly=false;parent=parent.parent;scripts=parent.scripts;continue}if(node.nodeType!=1){node=node.nextSibling;continue}if(scripts&&node.nodeName.toLowerCase()=="script"){type=node.getAttribute("type");if(type&&/^dojo\/\w/i.test(type))scripts.push(node);
node=node.nextSibling;continue}if(scriptsOnly){node=node.nextSibling;continue}var type=node.getAttribute(dataDojoType)||node.getAttribute(dojoType);var firstChild=node.firstChild;if(!type&&(!firstChild||firstChild.nodeType==3&&!firstChild.nextSibling)){node=node.nextSibling;continue}var current;var ctor=null;if(type){var mixinsValue=node.getAttribute(dataDojoMixins),types=mixinsValue?[type].concat(mixinsValue.split(/\s*,\s*/)):[type];try{ctor=getCtor(types)}catch(e){}if(!ctor)darray.forEach(types,
function(t){if(~t.indexOf("/")&&!midsHash[t]){midsHash[t]=true;mids[mids.length]=t}});var childScripts=ctor&&!ctor.prototype._noScript?[]:null;current={types:types,ctor:ctor,parent:parent,node:node,scripts:childScripts};current.inherited=getEffective(current);list.push(current)}else current={node:node,scripts:scripts,parent:parent};node=firstChild;scripts=childScripts;scriptsOnly=ctor&&ctor.prototype.stopParser&&!options.template;parent=current}var d=new Deferred;if(mids.length){if(has("dojo-debug-messages"))0&&
console.warn("WARNING: Modules being Auto-Required: "+mids.join(", "));require(mids,function(){d.resolve(darray.filter(list,function(widget){if(!widget.ctor)try{widget.ctor=getCtor(widget.types)}catch(e){}var parent=widget.parent;while(parent&&!parent.types)parent=parent.parent;var proto=widget.ctor&&widget.ctor.prototype;widget.instantiateChildren=!(proto&&proto.stopParser&&!options.template);widget.instantiate=!parent||parent.instantiate&&parent.instantiateChildren;return widget.instantiate}))})}else d.resolve(list);
return d.promise},_require:function(script){var hash=djson.fromJson("{"+script.innerHTML+"}"),vars=[],mids=[],d=new Deferred;for(var name in hash){vars.push(name);mids.push(hash[name])}require(mids,function(){for(var i=0;i<vars.length;i++)dlang.setObject(vars[i],arguments[i]);d.resolve(arguments)});return d.promise},_scanAmd:function(root){var deferred=new Deferred,promise=deferred.promise;deferred.resolve(true);var self=this;query("script[type\x3d'dojo/require']",root).forEach(function(node){promise=
promise.then(function(){return self._require(node)});node.parentNode.removeChild(node)});return promise},parse:function(rootNode,options){var root;if(!options&&rootNode&&rootNode.rootNode){options=rootNode;root=options.rootNode}else if(rootNode&&dlang.isObject(rootNode)&&!("nodeType"in rootNode))options=rootNode;else root=rootNode;root=root?dhtml.byId(root):dwindow.body();options=options||{};var mixin=options.template?{template:true}:{},instances=[],self=this;var p=this._scanAmd(root,options).then(function(){return self.scan(root,
options)}).then(function(parsedNodes){return instances=instances.concat(self._instantiate(parsedNodes,mixin,options))}).otherwise(function(e){console.error("dojo/parser::parse() error",e);throw e;});dlang.mixin(instances,p);return instances}};if(1)dojo.parser=parser;if(config.parseOnLoad)ready(100,parser,"parse");return parser})},"xfile/factory/model":function(){define("xfile/factory/model",["xide/types","xfile/factory","dojo/_base/lang"],function(types,factory,lang){factory.createStore=function(url,
mount,cache,options,config){var store=new types.config.FILES_STORE_PROTO({url:url,serviceUrl:url||"./index.php?view\x3drpc\x26option\x3dcom_xappcommander",serviceClass:types.config.FILES_STORE_SERVICE_CLASS,singleton:true,cache:cache||false,options:options||[],basePath:mount||config.defaultStoreName||"root",config:config});if(!mount||!config.defaultStoreName)console.error("tried to construct files store with no mount ! mount"+mount+" defaultStoreName \x3d "+config.defaultStoreName);store.config=config;
store.initStore();return store};factory.createModel=function(store,rootLabel,iconAttr,queryOptions){var model=new types.config.FILES_MODEL_PROTO({store:store,rootLabel:rootLabel||"My Files",iconAttr:iconAttr||"icon",checkedRoot:true,query:{directory:true},checkedStrict:false,queryOptions:queryOptions||{ignoreCase:false,sort:[{attribute:"directory",descending:true,ignoreCase:false},{attribute:"name",descending:false,ignoreCase:false}]},labelAttr:"name"});return model};return factory})},"dojo/cldr/nls/en/number":function(){define({"group":",",
"percentSign":"%","exponential":"E","scientificFormat":"#E0","percentFormat":"#,##0%","list":";","infinity":"\u221e","minusSign":"-","decimal":".","nan":"NaN","perMille":"\u2030","decimalFormat":"#,##0.###","currencyFormat":"\u00a4#,##0.00;(\u00a4#,##0.00)","plusSign":"+","decimalFormat-long":"000 trillion","decimalFormat-short":"000T"})},"url:dijit/templates/MenuBarItem.html":'\x3cdiv class\x3d"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel" data-dojo-attach-point\x3d"focusNode"\n\t \trole\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3cspan data-dojo-attach-point\x3d"containerNode,textDirNode"\x3e\x3c/span\x3e\n\x3c/div\x3e\n',
"dijit/Toolbar":function(){define("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(require,declare,has,keys,ready,_Widget,_KeyNavContainer,_TemplatedMixin){if(has("dijit-legacy-requires"))ready(0,function(){var requires=["dijit/ToolbarSeparator"];require(requires)});return declare("dijit.Toolbar",[_Widget,_TemplatedMixin,_KeyNavContainer],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e'+
"\x3c/div\x3e",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[keys.LEFT_ARROW]:[keys.RIGHT_ARROW],this.isLeftToRight()?[keys.RIGHT_ARROW]:[keys.LEFT_ARROW])}})})},"dojox/data/ServiceStore":function(){define("dojox/data/ServiceStore",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array"],function(declare,lang,array){return declare("dojox.data.ServiceStore",lang.getObject("dojox.data.ClientFilter",0)||null,{service:null,
constructor:function(options){this.byId=this.fetchItemByIdentity;this._index={};if(options)lang.mixin(this,options);this.idAttribute=options&&options.idAttribute||this.schema&&this.schema._idAttr},schema:null,idAttribute:"id",labelAttribute:"label",syncMode:false,estimateCountFactor:1,getSchema:function(){return this.schema},loadLazyValues:true,getValue:function(item,property,defaultValue){var value=item[property];return value||(property in item?value:item._loadObject?(dojox.rpc._sync=true)&&arguments.callee.call(this,
dojox.data.ServiceStore.prototype.loadItem({item:item})||{},property,defaultValue):defaultValue)},getValues:function(item,property){var val=this.getValue(item,property);return val instanceof Array?val:val===undefined?[]:[val]},getAttributes:function(item){var res=[];for(var i in item)if(item.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_"))res.push(i);return res},hasAttribute:function(item,attribute){return attribute in item},containsValue:function(item,attribute,value){return array.indexOf(this.getValues(item,
attribute),value)>-1},isItem:function(item){return typeof item=="object"&&item&&!(item instanceof Date)},isItemLoaded:function(item){return item&&!item._loadObject},loadItem:function(args){var item;if(args.item._loadObject)args.item._loadObject(function(result){item=result;delete item._loadObject;var func=result instanceof Error?args.onError:args.onItem;if(func)func.call(args.scope,result)});else if(args.onItem)args.onItem.call(args.scope,args.item);return item},_currentId:0,_processResults:function(results,
deferred){if(results&&typeof results=="object"){var id=results.__id;if(!id){if(this.idAttribute)id=results[this.idAttribute];else id=this._currentId++;if(id!==undefined){var existingObj=this._index[id];if(existingObj){for(var j in existingObj)delete existingObj[j];results=lang.mixin(existingObj,results)}results.__id=id;this._index[id]=results}}for(var i in results)results[i]=this._processResults(results[i],deferred).items;var count=results.length}return{totalCount:deferred.request.count==count?(deferred.request.start||
0)+count*this.estimateCountFactor:count,items:results}},close:function(request){return request&&request.abort&&request.abort()},fetch:function(args){args=args||{};if("syncMode"in args?args.syncMode:this.syncMode)dojox.rpc._sync=true;var self=this;var scope=args.scope||self;var defResult=this.cachingFetch?this.cachingFetch(args):this._doQuery(args);defResult.request=args;defResult.addCallback(function(results){if(args.clientFetch)results=self.clientSideFetch({query:args.clientFetch,sort:args.sort,
start:args.start,count:args.count},results);var resultSet=self._processResults(results,defResult);results=args.results=resultSet.items;if(args.onBegin)args.onBegin.call(scope,resultSet.totalCount,args);if(args.onItem)for(var i=0;i<results.length;i++)args.onItem.call(scope,results[i],args);if(args.onComplete)args.onComplete.call(scope,args.onItem?null:results,args);return results});defResult.addErrback(args.onError&&function(err){return args.onError.call(scope,err,args)});args.abort=function(){defResult.cancel()};
args.store=this;return args},_doQuery:function(args){var query=typeof args.queryStr=="string"?args.queryStr:args.query;return this.service(query)},getFeatures:function(){return{"dojo.data.api.Read":true,"dojo.data.api.Identity":true,"dojo.data.api.Schema":this.schema}},getLabel:function(item){return this.getValue(item,this.labelAttribute)},getLabelAttributes:function(item){return[this.labelAttribute]},getIdentity:function(item){return item.__id},getIdentityAttributes:function(item){return[this.idAttribute]},
fetchItemByIdentity:function(args){var item=this._index[(args._prefix||"")+args.identity];if(item)if(item._loadObject){args.item=item;return this.loadItem(args)}else{if(args.onItem)args.onItem.call(args.scope,item)}else return this.fetch({query:args.identity,onComplete:args.onItem,onError:args.onError,scope:args.scope}).results;return item}})})},"xide/bean/Grouped":function(){define(["dojo/_base/declare"],function(declare){return declare("xide/bean/Grouped",null,{_currentGroup:null,setCurrentGroup:function(group){this._currentGroup=
group},getItemActions:function(){return this._getGroupActions()},_getGroupActions:function(){var actions=[];actions.push({title:"New Group",icon:"el-icon-folder",place:"last",emit:false,style:"",handler:function(command,item,owner){}});if(this._currentGroup!=null)actions.push({title:"Delete Group",icon:"el-icon-remove-circle",disabled:false,command:"Delete",place:"last",emit:false,style:"",handler:function(){}});return actions}})})},"dojox/fx/flip":function(){define("dojox/fx/flip",["dojo/_base/kernel",
"dojo/_base/html","dojo/dom","dojo/dom-construct","dojo/dom-geometry","dojo/_base/connect","dojo/_base/Color","dojo/_base/sniff","dojo/_base/lang","dojo/_base/window","dojo/_base/fx","dojo/fx","./_base"],function(kernel,htmlUtil,dom,domConstruct,domGeom,connectUtil,Color,has,lang,winUtil,baseFx,coreFx,fxExt){kernel.experimental("dojox.fx.flip");var borderConst="border",widthConst="Width",heightConst="Height",topConst="Top",rightConst="Right",leftConst="Left",bottomConst="Bottom";fxExt.flip=function(args){var helperNode=
domConstruct.create("div"),node=args.node=dom.byId(args.node),s=node.style,dims=null,hs=null,pn=null,lightColor=args.lightColor||"#dddddd",darkColor=args.darkColor||"#555555",bgColor=htmlUtil.style(node,"backgroundColor"),endColor=args.endColor||bgColor,staticProps={},anims=[],duration=args.duration?args.duration/2:250,dir=args.dir||"left",pConst=0.9,transparentColor="transparent",whichAnim=args.whichAnim,axis=args.axis||"center",depth=args.depth;var convertColor=function(color){return(new Color(color)).toHex()===
"#000000"?"#000001":color};if(has("ie")<7){endColor=convertColor(endColor);lightColor=convertColor(lightColor);darkColor=convertColor(darkColor);bgColor=convertColor(bgColor);transparentColor="black";helperNode.style.filter="chroma(color\x3d'#000000')"}var init=function(n){return function(){var ret=htmlUtil.coords(n,true);dims={top:ret.y,left:ret.x,width:ret.w,height:ret.h}}}(node);init();hs={position:"absolute",top:dims["top"]+"px",left:dims["left"]+"px",height:"0",width:"0",zIndex:args.zIndex||
s.zIndex||0,border:"0 solid "+transparentColor,fontSize:"0",visibility:"hidden"};var props=[{},{top:dims["top"],left:dims["left"]}];var dynProperties={left:[leftConst,rightConst,topConst,bottomConst,widthConst,heightConst,"end"+heightConst+"Min",leftConst,"end"+heightConst+"Max"],right:[rightConst,leftConst,topConst,bottomConst,widthConst,heightConst,"end"+heightConst+"Min",leftConst,"end"+heightConst+"Max"],top:[topConst,bottomConst,leftConst,rightConst,heightConst,widthConst,"end"+widthConst+"Min",
topConst,"end"+widthConst+"Max"],bottom:[bottomConst,topConst,leftConst,rightConst,heightConst,widthConst,"end"+widthConst+"Min",topConst,"end"+widthConst+"Max"]};pn=dynProperties[dir];if(typeof depth!="undefined"){depth=Math.max(0,Math.min(1,depth))/2;pConst=0.4+(0.5-depth)}else pConst=Math.min(0.9,Math.max(0.4,dims[pn[5].toLowerCase()]/dims[pn[4].toLowerCase()]));var p0=props[0];for(var i=4;i<6;i++)if(axis=="center"||axis=="cube"){dims["end"+pn[i]+"Min"]=dims[pn[i].toLowerCase()]*pConst;dims["end"+
pn[i]+"Max"]=dims[pn[i].toLowerCase()]/pConst}else if(axis=="shortside"){dims["end"+pn[i]+"Min"]=dims[pn[i].toLowerCase()];dims["end"+pn[i]+"Max"]=dims[pn[i].toLowerCase()]/pConst}else if(axis=="longside"){dims["end"+pn[i]+"Min"]=dims[pn[i].toLowerCase()]*pConst;dims["end"+pn[i]+"Max"]=dims[pn[i].toLowerCase()]}if(axis=="center")p0[pn[2].toLowerCase()]=dims[pn[2].toLowerCase()]-(dims[pn[8]]-dims[pn[6]])/4;else if(axis=="shortside")p0[pn[2].toLowerCase()]=dims[pn[2].toLowerCase()]-(dims[pn[8]]-dims[pn[6]])/
2;staticProps[pn[5].toLowerCase()]=dims[pn[5].toLowerCase()]+"px";staticProps[pn[4].toLowerCase()]="0";staticProps[borderConst+pn[1]+widthConst]=dims[pn[4].toLowerCase()]+"px";staticProps[borderConst+pn[1]+"Color"]=bgColor;p0[borderConst+pn[1]+widthConst]=0;p0[borderConst+pn[1]+"Color"]=darkColor;p0[borderConst+pn[2]+widthConst]=p0[borderConst+pn[3]+widthConst]=axis!="cube"?(dims["end"+pn[5]+"Max"]-dims["end"+pn[5]+"Min"])/2:dims[pn[6]]/2;p0[pn[7].toLowerCase()]=dims[pn[7].toLowerCase()]+dims[pn[4].toLowerCase()]/
2+(args.shift||0);p0[pn[5].toLowerCase()]=dims[pn[6]];var p1=props[1];p1[borderConst+pn[0]+"Color"]={start:lightColor,end:endColor};p1[borderConst+pn[0]+widthConst]=dims[pn[4].toLowerCase()];p1[borderConst+pn[2]+widthConst]=0;p1[borderConst+pn[3]+widthConst]=0;p1[pn[5].toLowerCase()]={start:dims[pn[6]],end:dims[pn[5].toLowerCase()]};lang.mixin(hs,staticProps);htmlUtil.style(helperNode,hs);winUtil.body().appendChild(helperNode);var finalize=function(){domConstruct.destroy(helperNode);s.backgroundColor=
endColor;s.visibility="visible"};if(whichAnim=="last"){for(i in p0)p0[i]={start:p0[i]};p0[borderConst+pn[1]+"Color"]={start:darkColor,end:endColor};p1=p0}if(!whichAnim||whichAnim=="first")anims.push(baseFx.animateProperty({node:helperNode,duration:duration,properties:p0}));if(!whichAnim||whichAnim=="last")anims.push(baseFx.animateProperty({node:helperNode,duration:duration,properties:p1,onEnd:finalize}));connectUtil.connect(anims[0],"play",function(){helperNode.style.visibility="visible";s.visibility=
"hidden"});return coreFx.chain(anims)};fxExt.flipCube=function(args){var anims=[],mb=domGeom.getMarginBox(args.node),shiftX=mb.w/2,shiftY=mb.h/2,dims={top:{pName:"height",args:[{whichAnim:"first",dir:"top",shift:-shiftY},{whichAnim:"last",dir:"bottom",shift:shiftY}]},right:{pName:"width",args:[{whichAnim:"first",dir:"right",shift:shiftX},{whichAnim:"last",dir:"left",shift:-shiftX}]},bottom:{pName:"height",args:[{whichAnim:"first",dir:"bottom",shift:shiftY},{whichAnim:"last",dir:"top",shift:-shiftY}]},
left:{pName:"width",args:[{whichAnim:"first",dir:"left",shift:-shiftX},{whichAnim:"last",dir:"right",shift:shiftX}]}};var d=dims[args.dir||"left"],p=d.args;args.duration=args.duration?args.duration*2:500;args.depth=0.8;args.axis="cube";for(var i=p.length-1;i>=0;i--){lang.mixin(args,p[i]);anims.push(fxExt.flip(args))}return coreFx.combine(anims)};fxExt.flipPage=function(args){var n=args.node,coords=htmlUtil.coords(n,true),x=coords.x,y=coords.y,w=coords.w,h=coords.h,bgColor=htmlUtil.style(n,"backgroundColor"),
lightColor=args.lightColor||"#dddddd",darkColor=args.darkColor,helperNode=domConstruct.create("div"),anims=[],hn=[],dir=args.dir||"right",pn={left:["left","right","x","w"],top:["top","bottom","y","h"],right:["left","left","x","w"],bottom:["top","top","y","h"]},shiftMultiplier={right:[1,-1],left:[-1,1],top:[-1,1],bottom:[1,-1]};htmlUtil.style(helperNode,{position:"absolute",width:w+"px",height:h+"px",top:y+"px",left:x+"px",visibility:"hidden"});var hs=[];for(var i=0;i<2;i++){var r=i%2,d=r?pn[dir][1]:
dir,wa=r?"last":"first",endColor=r?bgColor:lightColor,startColor=r?endColor:args.startColor||n.style.backgroundColor;hn[i]=lang.clone(helperNode);var finalize=function(x){return function(){domConstruct.destroy(hn[x])}}(i);winUtil.body().appendChild(hn[i]);hs[i]={backgroundColor:r?startColor:bgColor};hs[i][pn[dir][0]]=coords[pn[dir][2]]+shiftMultiplier[dir][0]*i*coords[pn[dir][3]]+"px";htmlUtil.style(hn[i],hs[i]);anims.push(dojox.fx.flip({node:hn[i],dir:d,axis:"shortside",depth:args.depth,duration:args.duration/
2,shift:shiftMultiplier[dir][i]*coords[pn[dir][3]]/2,darkColor:darkColor,lightColor:lightColor,whichAnim:wa,endColor:endColor}));connectUtil.connect(anims[i],"onEnd",finalize)}return coreFx.chain(anims)};fxExt.flipGrid=function(args){var rows=args.rows||4,cols=args.cols||4,anims=[],helperNode=domConstruct.create("div"),n=args.node,coords=htmlUtil.coords(n,true),x=coords.x,y=coords.y,nw=coords.w,nh=coords.h,w=coords.w/cols,h=coords.h/rows,cAnims=[];htmlUtil.style(helperNode,{position:"absolute",width:w+
"px",height:h+"px",backgroundColor:htmlUtil.style(n,"backgroundColor")});for(var i=0;i<rows;i++){var r=i%2,d=r?"right":"left",signum=r?1:-1;var cn=lang.clone(n);htmlUtil.style(cn,{position:"absolute",width:nw+"px",height:nh+"px",top:y+"px",left:x+"px",clip:"rect("+i*h+"px,"+nw+"px,"+nh+"px,0)"});winUtil.body().appendChild(cn);anims[i]=[];for(var j=0;j<cols;j++){var hn=lang.clone(helperNode),l=r?j:cols-(j+1);var adjustClip=function(xn,yCounter,xCounter){return function(){if(!(yCounter%2))htmlUtil.style(xn,
{clip:"rect("+yCounter*h+"px,"+(nw-(xCounter+1)*w)+"px,"+(yCounter+1)*h+"px,0px)"});else htmlUtil.style(xn,{clip:"rect("+yCounter*h+"px,"+nw+"px,"+(yCounter+1)*h+"px,"+(xCounter+1)*w+"px)"})}}(cn,i,j);winUtil.body().appendChild(hn);htmlUtil.style(hn,{left:x+l*w+"px",top:y+i*h+"px",visibility:"hidden"});var a=dojox.fx.flipPage({node:hn,dir:d,duration:args.duration||900,shift:signum*w/2,depth:0.2,darkColor:args.darkColor,lightColor:args.lightColor,startColor:args.startColor||args.node.style.backgroundColor}),
removeHelper=function(xn){return function(){domConstruct.destroy(xn)}}(hn);connectUtil.connect(a,"play",this,adjustClip);connectUtil.connect(a,"play",this,removeHelper);anims[i].push(a)}cAnims.push(coreFx.chain(anims[i]))}connectUtil.connect(cAnims[0],"play",function(){htmlUtil.style(n,{visibility:"hidden"})});return coreFx.combine(cAnims)};return fxExt})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(array,Deferred,when){var some=array.some;return function all(objectOrArray){var object,
array;if(objectOrArray instanceof Array)array=objectOrArray;else if(objectOrArray&&typeof objectOrArray==="object")object=objectOrArray;var results;var keyLookup=[];if(object){array=[];for(var key in object)if(Object.hasOwnProperty.call(object,key)){keyLookup.push(key);array.push(object[key])}results={}}else if(array)results=[];if(!array||!array.length)return(new Deferred).resolve(results);var deferred=new Deferred;deferred.promise.always(function(){results=keyLookup=null});var waiting=array.length;
some(array,function(valueOrPromise,index){if(!object)keyLookup.push(index);when(valueOrPromise,function(value){if(!deferred.isFulfilled()){results[keyLookup[index]]=value;if(--waiting===0)deferred.resolve(results)}},deferred.reject);return deferred.isFulfilled()});return deferred.promise}})},"xfile/widgets/ActionToolbarMixin":function(){define("xfile/widgets/ActionToolbarMixin",["dojo/_base/declare","dojo/_base/html","dojo/dom-class","dojo/on","xide/types","xide/factory","xide/utils","xfile/widgets/ActionToolbar",
"xfile/widgets/ActionToolbarButtonEmbedded","xfile/widgets/NewItemSelector","xfile/widgets/EditorSelector","xfile/views/EditorPluginMixin","xfile/widgets/PerspectiveSelector","dojo/i18n","dojo/i18n!./nls/TemplatedWidgetBase"],function(declare,html,domClass,on,types,factory,utils,ActionToolbar,ActionToolbarButton,NewItemSelector,EditorSelector,EditorPluginMixin,PerspectiveSelector){return declare("xfile.widgets.ActionToolbarMixin",[EditorPluginMixin],{config:null,useElusive:false,editSelector:null,
translate:function(value){if(this._messages==null||this._messages.length==0)this._setupTranslations();if(value){var _titleKey=value.toLocaleLowerCase();_titleKey=_titleKey.replace(/\s+/g,"_");if(_titleKey&&this._messages!=null){var _titleValue=this._messages[_titleKey];if(_titleValue&&_titleValue.length>0)return _titleValue}}return value||""},_setupTranslations:function(){var dstCtx=sctx||mctx;if(dstCtx&&dstCtx.getLocals)this._messages=dstCtx.getLocals("xide.widgets","TemplatedWidgetBase");else this._messages=
[]},postMixInProperties:function(){this.inherited(arguments);this._setupTranslations()},toTitle:function(operation){switch(operation){case types.OPERATION.DELETE:return this.translate("Delete");case types.OPERATION.EDIT:return this.translate("Edit");case types.OPERATION.RENAME:return this.translate("Rename");case types.OPERATION.COPY:return this.translate("Copy");case types.OPERATION.MOVE:return this.translate("Move");case types.OPERATION.DOWNLOAD:return this.translate("Download");case types.OPERATION.INFO:return this.translate("Info");
case types.OPERATION.COMPRESS:return this.translate("Compress");case types.OPERATION.RELOAD:return this.translate("Reload");case types.OPERATION.PREVIEW:return this.translate("Preview");case types.OPERATION.INSERT_IMAGE:return this.translate("Insert");case types.OPERATION.OPTIONS:return this.translate("Options");case types.OPERATION.PERMA_LINK:return this.translate("Perma Link")}return"No Title"},toIconClassElusive:function(operation){switch(operation){case types.OPERATION.DELETE:return"el-icon-remove-circle";
case types.OPERATION.EDIT:return"el-icon-file-edit";case types.OPERATION.RENAME:return"el-icon-edit";case types.OPERATION.COPY:return"el-icon-random";case types.OPERATION.MOVE:return"el-icon-move";case types.OPERATION.DOWNLOAD:return"el-icon-download";case types.OPERATION.INFO:return"el-icon-info-sign";case types.OPERATION.COMPRESS:return"el-icon-briefcase";case types.OPERATION.RELOAD:return"el-icon-refresh";case types.OPERATION.PREVIEW:return"icon-32-preview-content";case types.OPERATION.INSERT_IMAGE:return"icon-32-insert-image";
case types.OPERATION.OPTIONS:return"el-icon-cogs";case types.OPERATION.PERMA_LINK:return"el-icon-link"}},toIconClass:function(operation){return this.toIconClassElusive(operation)},onButtonClicked:function(button){if(this.delegate&&this.delegate.onActionButton)this.delegate.onActionButton(button,button.item,button.operation,button.owner)},removeEditorsSelector:function(){if(!this.editSelector)return this.getButton(types.OPERATION.EDIT);var item,owner=null;var oldEditButton=this.getButton(types.OPERATION.EDIT);
item=oldEditButton.item;owner=oldEditButton.owner;this.buttons.remove(oldEditButton);var newEditButton=this._createButton(types.OPERATION.EDIT,null,null,true);newEditButton.item=item;newEditButton.owner=owner;dojo.place(newEditButton.domNode,this.editSelector.domNode,"after");utils.destroyWidget(this.editSelector);this.editSelector=null;return newEditButton},prepareEditorsSelector:function(editButton,editors){var editSelector=new EditorSelector({delegate:this,editors:editors},dojo.doc.createElement("div"));
dojo.place(editSelector.domNode,editButton.domNode,"after");editSelector.startup();var newEditButton=editSelector.createMenuItem("el-icon-file-edit","Open",types.OPERATION.EDIT);this.buttons.remove(editButton);this.editSelector=editSelector;return editSelector},onFileSelected:function(data){var editors=EditorPluginMixin.getEditors(data);var btnEdit=this.getButton(types.OPERATION.EDIT);if(btnEdit){if(editors){if(btnEdit instanceof dijit.MenuItem)btnEdit=this.removeEditorsSelector();if(btnEdit instanceof
xfile.widgets.ActionToolbarButton){var newEditMenu=this.prepareEditorsSelector(btnEdit,editors);utils.destroyWidget(btnEdit)}}else btnEdit=this.removeEditorsSelector(btnEdit);if(this.editSelector)this.editSelector.wButton.set("disabled",false);btnEdit.setDisabled(false)}else;var btnEdit=this.getButton(types.OPERATION.INSERT_IMAGE);if(btnEdit)btnEdit.setDisabled(false)},onCommonsSelected:function(data){var disable=false;if(data.read===false&&data.write===false)disable=true;var btnRename=this.getButton(types.OPERATION.RENAME);
if(btnRename)btnRename.setDisabled(disable);var btnDownload=this.getButton(types.OPERATION.DOWNLOAD);if(btnDownload)btnDownload.setDisabled(disable);var btnCopy=this.getButton(types.OPERATION.COPY);if(btnCopy)btnCopy.setDisabled(disable);var btnMove=this.getButton(types.OPERATION.MOVE);if(btnMove)btnMove.setDisabled(disable);var btnProp=this.getButton(types.OPERATION.INFO);if(btnProp)btnProp.setDisabled(disable);var btnDelete=this.getButton(types.OPERATION.DELETE);if(btnDelete)btnDelete.setDisabled(disable);
var btncompress=this.getButton(types.OPERATION.COMPRESS);if(btncompress)btncompress.setDisabled(disable);var btnReload=this.getButton(types.OPERATION.RELOAD);if(btnReload)btnReload.setDisabled(disable);var btnNewFile=this.getButton(types.OPERATION.NEW_FILE);if(btnNewFile)btnNewFile.setDisabled(disable);var btnNewDir=this.getButton(types.OPERATION.NEW_DIRECTORY);if(btnNewDir)btnNewDir.setDisabled(disable);var btnPerma=this.getButton(types.OPERATION.PERMA_LINK);if(btnPerma)btnPerma.setDisabled(false)},
clearStates:function(item,owner){for(var i=0;i<this.buttons.length;i++)try{this.buttons[i].item=item;this.buttons[i].owner=owner;if(this.buttons[i].operation===types.OPERATION.CUSTOM);else this.buttons[i].setDisabled(true)}catch(e){}},onDirectorySelected:function(data){if(this.editSelector)this.editSelector.wButton.set("disabled",true)},onItemSelected:function(data){try{if(data&&data&&data.item){var item=data.item;this.clearStates(item,data.callee);if(item.name=="."||item.name==".."){var btnNewFile=
this.getButton(types.OPERATION.NEW_FILE);if(btnNewFile)btnNewFile.setDisabled(false);var btnNewDir=this.getButton(types.OPERATION.NEW_DIRECTORY);if(btnNewDir)btnNewDir.setDisabled(false);return}this.onCommonsSelected(item);if(item.directory!=null&&item.directory===true)this.onDirectorySelected(item);else this.onFileSelected(item)}}catch(e){}},getButton:function(operation){for(var i=0;i<this.buttons.length;i++)if(this.buttons[i].operation==operation)return this.buttons[i];return null},_createDefaultItems:function(){try{this._createPerspectiveSelector()}catch(e){debugger}var allowedActions=
this.config.ALLOWED_ACTIONS||{1:true,2:true,3:true,4:true,5:true,6:true,7:true,8:true,9:true,10:true,11:true,12:true,13:true,14:true,15:true,16:true,17:true};var opsInt=types.OPERATION_INT;if(allowedActions[opsInt.RELOAD])var reloadButton=this._createButton(types.OPERATION.RELOAD,null,null,true);if(allowedActions[opsInt.DELETE])var deleteButton=this._createButton(types.OPERATION.DELETE,null,null,true);if(allowedActions[opsInt.COMPRESS])var compressButton=this._createButton(types.OPERATION.COMPRESS,
null,null,true);if(allowedActions[opsInt.DOWNLOAD])var downloadButton=this._createButton(types.OPERATION.DOWNLOAD,null,null,true);if(allowedActions[opsInt.INFO])var infoButton=this._createButton(types.OPERATION.INFO,null,null,true);if(allowedActions[opsInt.RENAME])var renameButton=this._createButton(types.OPERATION.RENAME,null,null,true);if(allowedActions[opsInt.MOVE])var moveButton=this._createButton(types.OPERATION.MOVE,null,null,true);if(allowedActions[opsInt.COPY])var copyButton=this._createButton(types.OPERATION.COPY,
null,null,true);if(allowedActions[opsInt.EDIT])var editButton=this._createButton(types.OPERATION.EDIT,null,null,true);var permaButton=this._createButton(types.OPERATION.PERMA_LINK,null,null,false);this.buttons.remove(permaButton);return allowedActions},_createPerspectiveSelector:function(){var button=new PerspectiveSelector({title:"Perspective",iconClass:"el-icon-website",operation:types.OPERATION.PERSPECTIVE,disabled:false,delegate:this.delegate},dojo.doc.createElement("div"));this.containerNode.appendChild(button.domNode);
button.startup()},startup:function(){this.inherited(arguments);this.buttons=[];this.editors=[];var thiz=this;this._createDefaultItems();factory.subscribe(types.EVENTS.ITEM_SELECTED,function(data){thiz.onItemSelected(data)},this)}})})},"dijit/form/_Spinner":function(){require({cache:{"url:dijit/form/templates/Spinner.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\n\tid\x3d"widget_${id}" role\x3d"presentation"\n\t\x3e\x3cdiv class\x3d"dijitReset dijitButtonNode dijitSpinnerButtonContainer"\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitSpinnerButtonInner" type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t/\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\tdata-dojo-attach-point\x3d"upArrowNode"\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9650; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/\x3e\x3c/div\n\t\t\x3e\x3c/div\n\t\t\x3e\x3cdiv class\x3d"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\tdata-dojo-attach-point\x3d"downArrowNode"\n\t\t\t\x3e\x3cdiv class\x3d"dijitArrowButtonInner"\n\t\t\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField" value\x3d"\x26#9660; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/\x3e\x3c/div\n\t\t\x3e\x3c/div\n\t\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\n\t/\x3e\x3c/div\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\n\t\t\x3e\x3cinput class\x3d\'dijitReset dijitInputInner\' data-dojo-attach-point\x3d"textbox,focusNode" type\x3d"${type}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown"\n\t\t\trole\x3d"spinbutton" autocomplete\x3d"off" ${!nameAttrSetting}\n\t/\x3e\x3c/div\n\x3e\x3c/div\x3e\n'}});
define("dijit/form/_Spinner",["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/mouse","dojo/on","../typematic","./RangeBoundTextBox","dojo/text!./templates/Spinner.html","./_TextBoxMixin"],function(declare,keys,lang,has,mouse,on,typematic,RangeBoundTextBox,template,_TextBoxMixin){return declare("dijit.form._Spinner",RangeBoundTextBox,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:template,baseClass:"dijitTextBox dijitSpinner",
cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val){return val},_arrowPressed:function(nodePressed,direction,increment){if(this.disabled||this.readOnly)return;this._setValueAttr(this.adjust(this.get("value"),direction*increment),false);_TextBoxMixin.selectInputText(this.textbox,this.textbox.value.length)},_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(count,node,evt){var inc=this.smallDelta;if(node==this.textbox){var key=
evt.keyCode;inc=key==keys.PAGE_UP||key==keys.PAGE_DOWN?this.largeDelta:this.smallDelta;node=key==keys.UP_ARROW||key==keys.PAGE_UP?this.upArrowNode:this.downArrowNode}if(count==-1)this._arrowReleased(node);else this._arrowPressed(node,node==this.upArrowNode?1:-1,inc)},_wheelTimer:null,_mouseWheeled:function(evt){evt.stopPropagation();evt.preventDefault();var wheelDelta=evt.wheelDelta/120;if(Math.floor(wheelDelta)!=wheelDelta)wheelDelta=evt.wheelDelta>0?1:-1;var scrollAmount=evt.detail?evt.detail*-1:
wheelDelta;if(scrollAmount!==0){var node=this[scrollAmount>0?"upArrowNode":"downArrowNode"];this._arrowPressed(node,scrollAmount,this.smallDelta);if(this._wheelTimer)this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(node)},50)}},_setConstraintsAttr:function(constraints){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined)this.focusNode.setAttribute("aria-valuemin",this.constraints.min);else this.focusNode.removeAttribute("aria-valuemin");
if(this.constraints.max!==undefined)this.focusNode.setAttribute("aria-valuemax",this.constraints.max);else this.focusNode.removeAttribute("aria-valuemax")}},_setValueAttr:function(value,priorityChange){this.focusNode.setAttribute("aria-valuenow",value);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,mouse.wheel,lang.hitch(this,"_mouseWheeled")),typematic.addListener(this.upArrowNode,this.textbox,{keyCode:keys.UP_ARROW,ctrlKey:false,altKey:false,
shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),typematic.addListener(this.downArrowNode,this.textbox,{keyCode:keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),typematic.addListener(this.upArrowNode,this.textbox,{keyCode:keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",
this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),typematic.addListener(this.downArrowNode,this.textbox,{keyCode:keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},"xfile/widgets/BreadCrumb":function(){require({cache:{"url:xfile/widgets/templates/TrailBarItem.html":'\x3cdiv class\x3d"dijitInline dijitMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n\t\x3cspan src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitIcon dijitMenuItemIcon  el-icon-chevron-right" data-dojo-attach-point\x3d"iconNode"/\x3e\n\t\x3cspan data-dojo-attach-point\x3d"containerNode"\x3e\x3c/span\x3e\n\x3c/div\x3e\n'}});
define("xfile/widgets/BreadCrumb",["dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dijit/MenuBar","dijit/MenuItem","dijit/MenuBarItem","dijit/DropDownMenu","dijit/registry","dojo/text!./templates/TrailBarItem.html","./Evented"],function(array,declare,event,lang,MenuBar,MenuItem,MenuBarItem,DropDownMenu,registry,TrailBarItemTemplate,Evented){var DirectoryItem=declare([MenuItem],{iconClass:"",templateString:TrailBarItemTemplate,popup:null,constructor:function(args){this.popup=
new DropDownMenu({})}});var BreadCrumb=declare([MenuBarItem,Evented],{trail:null,item:null,moduleName:"cbTree/stores/BreadCrumb",constructor:function(args){this.trail=args.trail;this.item=args.item;if(this.trail&&this.item){var store=this.trail.store;var item=this.item;this.label=store.getLabel(item);if(this.label==".."&&item.prevName)this.label=""+item.prevName;this.path=store.getValue(item,"path");if(this.item.directory){this.tag=new DirectoryItem;store.fetchChildren({item:item,query:{directory:true},
queryOptions:{storeOnly:true},onComplete:this._dropDownMenu,scope:this})}}else throw new Error(this.moduleName+"::constructor(): Both trail and item are required arguments.");},_addToTrail:function(){this.trail.addChild(this);this.trail.addChild(this.tag)},_dropDownMenu:function(items){var popupMenu=this.tag.popup;var menuItem;array.forEach(items,function(item){menuItem=new MenuItem({label:item.name,iconClass:this.trail._dirIconClass,onClick:lang.hitch(this,this.onClick)});menuItem.item=item;popupMenu.addChild(menuItem)},
this)},postCreate:function(){this._addToTrail()},onClick:function(evt){var menuItem=registry.getEnclosingWidget(evt.target);this.trail.onClick(menuItem.item,menuItem,evt);event.stop(evt)}});var CrumbTrail=declare([MenuBar,Evented],{store:null,moduleName:"cbTree/stores/CrumbTrail",_dirIconClass:"dijitIcon dijitFolderClosed",constructor:function(args){this._customIcon=false;this._crumbs={};this.store=args.store||null;if(this.store){this._setTrailAttr(".");if(args.cssBaseClass)if(args.cssBaseClass!==
"fileIcon")this._dirIconClass=args.cssBaseClass+" "+args.cssBaseClass+"Collapsed";else this._dirIconClass="fileIcon fileIconDIR fileIconDIRCollapsed"}else throw new Error(this.moduleName+"::constructor(): store argument is required.");},_addBreadCrumb:function(item){if(item){var identity=this.store.getIdentity(item);var breadCrumb=this._crumbs[identity];if(!breadCrumb){breadCrumb=new BreadCrumb({trail:this,item:item});this._crumbs[identity]=breadCrumb}else breadCrumb._addToTrail()}},_clearTrail:function(){var children=
this.getChildren();var i;for(i=0;i<children.length;i++)this.removeChild(children[i])},_setTrailAttr:function(path){var store=this.store;var self=this;if(path&&lang.isString(path)){var segm=path.split("/");var identity="",i;this._clearTrail();for(i=0;i<segm.length;i++){identity=identity+segm[i];store.fetchItemByIdentity({identity:identity,queryOptions:{storeOnly:true},onItem:self._addBreadCrumb,scope:this});identity=identity+"/"}}else throw new Error(this.moduleName+"::_setTrailAttr(): invalid path argument.");
return true},setTrail:function(path){return this._setTrailAttr(path)},onClick:function(){debugger}});return CrumbTrail})},"xfile/views/FilePanelPreview":function(){define("xfile/views/FilePanelPreview",["dojo/_base/declare","xide/types","xide/factory","xide/utils","xide/views/ACEEditor","xide/mixins/EventedMixin"],function(declare,types,factory,utils,ACEEditor,EventedMixin){var delegate=null;var preview=null;var plugins=[function(ql){var mimes=["image/jpeg","image/png","image/gif"],preview=ql.preview;
$.each(navigator.mimeTypes,function(i,o){var mime=o.type;if(mime.indexOf("image/")===0&&$.inArray(mime,mimes))mimes.push(mime)});factory.subscribe(types.EVENTS.ITEM_SELECTED,function(e){if(!e.item._S)return;var file=delegate.getImageUrl(e.item),img,item=e.item;var _ql=ql;var _p=preview;if(!_ql._open)return;if($.inArray(e.item.mime,mimes)!==-1){var a=preview;a.empty();var title=dojo.query(".elfinder-quicklook-title")[0];title.innerHTML=item.path;img=$("\x3cimg/\x3e").hide().appendTo(preview).load(function(){setTimeout(function(){var prop=
(img.width()/img.height()).toFixed(2);preview.bind("changesize",function(){var pw=parseInt(preview.width()),ph=parseInt(preview.height()),w,h;if(pw<300){pw=448;ph=300}if(prop<(pw/ph).toFixed(2)){h=ph;w=Math.floor(h*prop)}else{w=pw;h=Math.floor(w/prop)}img.width(w).height(h).css("margin-top",h<ph?Math.floor((ph-h)/2):0)}).trigger("changesize");ql.hideinfo();img.fadeIn(10)},10)}).attr("src",file)}})},function(ql){var mimes=["text/html","application/xhtml+xml"],preview=ql.preview,fm=ql.fm;preview.bind("update",
function(e){var file=e.file,jqxhr;if($.inArray(file.mime,mimes)!==-1){e.stopImmediatePropagation();preview.one("change",function(){jqxhr.state()=="pending"&&jqxhr.reject()});jqxhr=fm.request({data:{cmd:"get",target:file.hash,current:file.phash},preventDefault:true}).done(function(data){ql.hideinfo();doc=$('\x3ciframe class\x3d"elfinder-quicklook-preview-html"/\x3e').appendTo(preview)[0].contentWindow.document;doc.open();doc.write(data.content);doc.close()})}})},function(ql){var fm=ql.fm,preview=ql.preview;
var mimes=["application/x-empty","application/javascript","application/xhtml+xml","audio/x-mp3-playlist","application/x-web-config","application/docbook+xml","application/x-php","application/x-perl","application/x-awk","application/x-config","application/x-csh","application/xml","application/x-empty","text/html","text/x-c","text/x-php","text/plain","text/x-c++","text/x-lisp"];factory.subscribe(types.EVENTS.ITEM_SELECTED,function(e){if(!e||!e.item||!e.item._S)return;var file=delegate.getImageUrl(e.item);
var img;var item=e.item;var a=preview;var _ql=ql;if($.inArray(e.item.mime,mimes)!==-1){if(!_ql._open)return;var title=dojo.query(".elfinder-quicklook-title")[0];title.innerHTML=item.path;var a=preview;a.empty();var editor=utils.addWidget(ACEEditor,{dataItem:item,filePath:item.path,config:_ql.handler.config,delegate:_ql.handler.ctx.getScriptManager(),style:"padding:0px;height:inherit !important",iconClass:"",storeDelegate:{getContent:function(onSuccess){_ql.handler.ctx.getFileManager().getContent(item.mount,
item.path,onSuccess,false)},saveContent:function(value,onSuccess,onError){_ql.handler.ctx.getFileManager().setContent(item.mount,item.path,value,onSuccess)}},title:"No Title",closable:true,fileName:item.path,ctx:_ql.handler.ctx,editorOptions:{readOnly:true,showGutter:false,autoFocus:false},onClose:function(){}},_ql.handler,preview[0],true);preview.bind("changesize",function(){var pw=parseInt(preview.width());var ph=parseInt(preview.height());editor.resize()}).trigger("changesize");setTimeout(function(){editor.resize()},
100)}})},function(ql){var fm=ql.fm,mime="application/pdf",preview=ql.preview,active=false;active=false;var isActive=false;if(isActive)active=true;else $.each(navigator.plugins,function(i,plugins){$.each(plugins,function(i,plugin){if(plugin.type==mime)return!(active=true)})});active&&preview.bind("update",function(e){var file=e.file,node;if(file.mime==mime){e.stopImmediatePropagation();preview.one("change",function(){node.unbind("load").remove()});node=$('\x3ciframe class\x3d"elfinder-quicklook-preview-pdf"/\x3e').hide().appendTo(preview).load(function(){ql.hideinfo();
node.show()}).attr("src",fm.url(file.hash))}})},function(ql){var fm=ql.fm,mime="application/x-shockwave-flash",preview=ql.preview,active=false;$.each(navigator.plugins,function(i,plugins){$.each(plugins,function(i,plugin){if(plugin.type==mime)return!(active=true)})});active&&preview.bind("update",function(e){var file=e.file,node;if(file.mime==mime){e.stopImmediatePropagation();ql.hideinfo();preview.append(node=$('\x3cembed class\x3d"elfinder-quicklook-preview-flash" pluginspage\x3d"http://www.macromedia.com/go/getflashplayer" src\x3d"'+
fm.url(file.hash)+'" quality\x3d"high" type\x3d"application/x-shockwave-flash" /\x3e'))}})},function(ql){var preview=ql.preview,autoplay=!!ql.options["autoplay"],mimes={"audio/mpeg":"mp3","audio/mpeg3":"mp3","audio/mp3":"mp3","audio/x-mpeg3":"mp3","audio/x-mp3":"mp3","audio/x-wav":"wav","audio/wav":"wav","audio/x-m4a":"m4a","audio/aac":"m4a","audio/mp4":"m4a","audio/x-mp4":"m4a","audio/ogg":"ogg"},node;preview.bind("update",function(e){var file=e.file,type=mimes[file.mime];if(ql.support.audio[type]){e.stopImmediatePropagation();
node=$('\x3caudio class\x3d"elfinder-quicklook-preview-audio" controls preload\x3d"auto" autobuffer\x3e\x3csource src\x3d"'+ql.fm.url(file.hash)+'" /\x3e\x3c/audio\x3e').appendTo(preview);autoplay&&node[0].play()}}).bind("change",function(){if(node&&node.parent().length){node[0].pause();node.remove();node=null}})},function(ql){var preview=ql.preview,autoplay=!!ql.options["autoplay"],mimes=["video/mp4","video/x-m4v","video/ogg","application/ogg","video/webm"],node;factory.subscribe(types.EVENTS.ITEM_SELECTED,
function(e){if(!e.item._S)return;var file=delegate.getImageUrl(e.item);var img=null,item=e.item;var a=preview;var _ql=ql;var title=dojo.query(".elfinder-quicklook-title")[0];title.innerHTML=item.path;if(!_ql._open)return;if($.inArray(e.item.mime,mimes)!==-1){a.empty();ql.hideinfo();node=$('\x3cvideo class\x3d"elfinder-quicklook-preview-video" controls preload\x3d"auto" autobuffer\x3e\x3csource src\x3d"'+file+'" /\x3e\x3c/video\x3e').appendTo(preview);autoplay&&node[0].play()}});preview.bind("update",
function(e){0&&console.log("preview : "+preview.opened())})},function(ql){var preview=ql.preview,mimes=[],node;$.each(navigator.plugins,function(i,plugins){$.each(plugins,function(i,plugin){(plugin.type.indexOf("audio/")===0||plugin.type.indexOf("video/")===0)&&mimes.push(plugin.type)})});preview.bind("update",function(e){var file=e.file,mime=file.mime,video;if($.inArray(file.mime,mimes)!==-1){e.stopImmediatePropagation();(video=mime.indexOf("video/")===0)&&ql.hideinfo();node=$('\x3cembed src\x3d"'+
ql.fm.url(file.hash)+'" type\x3d"'+mime+'" class\x3d"elfinder-quicklook-preview-'+(video?"video":"audio")+'"/\x3e').appendTo(preview)}}).bind("change",function(){if(node&&node.parent().length){node.remove();node=null}})}];preview=function(){var self=this,fm=self.fm,closed=0,animated=1,opened=2,state=closed,navicon="elfinder-quicklook-navbar-icon",fullscreen="elfinder-quicklook-fullscreen",navtrigger=function(code){$(document).trigger($.Event("keydown",{keyCode:code,ctrlKey:false,shiftKey:false,altKey:false,
metaKey:false}))},closedCss=function(node){return{opacity:0,width:20,height:20,top:0,left:0}},openedCss=function(){var win=$(window);return{opacity:1,width:width,height:height,top:parseInt((win.height()-height)/2+win.scrollTop()),left:parseInt((win.width()-width)/2+win.scrollLeft())}},support=function(codec){var media=document.createElement(codec.substr(0,codec.indexOf("/"))),value=false;try{value=media.canPlayType&&media.canPlayType(codec)}catch(e){}return value&&value!==""&&value!="no"},width,height,
parent,cwd,title=$('\x3cdiv class\x3d"elfinder-quicklook-title"/\x3e'),icon=$("\x3cdiv/\x3e"),info=$('\x3cdiv class\x3d"elfinder-quicklook-info"/\x3e'),fsicon=$('\x3cdiv class\x3d"'+navicon+" "+navicon+'-fullscreen"/\x3e').mousedown(function(e){var win=self.window,full=win.is("."+fullscreen),scroll="scroll.elfinder-finder",$window=$(window);e.stopPropagation();if(full){win.css(win.data("position")).unbind("mousemove");$window.unbind(scroll).trigger(self.resize).unbind(self.resize);navbar.unbind("mouseenter").unbind("mousemove")}else{win.data("position",
{left:win.css("left"),top:win.css("top"),width:win.width(),height:win.height()}).css({width:"100%",height:"100%"});$(window).bind(scroll,function(){win.css({left:parseInt($(window).scrollLeft())+"px",top:parseInt($(window).scrollTop())+"px"})}).bind(self.resize,function(e){self.preview.trigger("changesize")}).trigger(scroll).trigger(self.resize);win.bind("mousemove",function(e){navbar.stop(true,true).show().delay(3E3).fadeOut("slow")}).mousemove();navbar.mouseenter(function(){navbar.stop(true,true).show()}).mousemove(function(e){e.stopPropagation()})}navbar.attr("style",
"").draggable(full?"destroy":{});win.toggleClass(fullscreen);$(this).toggleClass(navicon+"-fullscreen-off");if(!parent)parent=$("#xFileRoot");$.fn.resizable&&parent.add(win).resizable(full?"enable":"disable").removeClass("ui-state-disabled")}),navbar=$('\x3cdiv class\x3d"elfinder-quicklook-navbar"/\x3e').append($('\x3cdiv class\x3d"'+navicon+" "+navicon+'-prev"/\x3e').mousedown(function(){navtrigger(37)})).append(fsicon).append($('\x3cdiv class\x3d"'+navicon+" "+navicon+'-next"/\x3e').mousedown(function(){navtrigger(39)})).append('\x3cdiv class\x3d"elfinder-quicklook-navbar-separator"/\x3e').append($('\x3cdiv class\x3d"'+
navicon+" "+navicon+'-close"/\x3e').mousedown(function(){self.window.trigger("close")}));this.resize="resize.elfinder-finder";this.info=$('\x3cdiv class\x3d"elfinder-quicklook-info-wrapper"/\x3e').append(icon).append(info);this.preview=$('\x3cdiv class\x3d"elfinder-quicklook-preview ui-helper-clearfix"/\x3e').bind("change",function(e){self.info.attr("style","").hide();icon.removeAttr("class").attr("style","");info.html("")}).bind("update",function(e){var fm=self.fm,preview=self.preview,file=e.file,
tpl='\x3cdiv class\x3d"elfinder-quicklook-info-data"\x3e{value}\x3c/div\x3e',tmb;if(file){!file.read&&e.stopImmediatePropagation();self.window.data("hash",file.hash);self.preview.unbind("changesize").trigger("change").children().remove();self.info.delay(100).fadeIn(10)}else e.stopImmediatePropagation()});this.window=$('\x3cdiv class\x3d"ui-helper-reset ui-widget elfinder-quicklook" style\x3d"position:absolute"/\x3e').click(function(e){e.stopPropagation()}).append($('\x3cdiv class\x3d"elfinder-quicklook-titlebar"/\x3e').append(title).append($('\x3cspan class\x3d"el-icon-remove-sign" style\x3d"margin-left: 4px; color: white; font-size: 16px; text-align: center; position: absolute; left: 0px; top: 2px;"/\x3e').mousedown(function(e){e.stopPropagation();
self.window.trigger("close")}))).append(this.preview.add(navbar)).append(self.info.hide()).draggable({handle:"div.elfinder-quicklook-titlebar"}).bind("open",function(e){self._open=true;var win=self.window,file=self.value,node;if(self.closed()&&file&&(node=cwd.find("#"+file.hash)).length){navbar.attr("style","");state=animated;node.trigger("scrolltoview");win.css(closedCss(node)).show().animate(openedCss(),550,function(){state=opened;self.update(1,self.value)})}}).bind("close",function(e){var win=
self.window,preview=self.preview.trigger("change"),file=self.value,node={},close=function(){self._open=false;state=closed;win.hide();preview.children().remove();self.update(0,self.value)};if(self.opened()){state=animated;win.is("."+fullscreen)&&fsicon.mousedown();node.length?win.animate(closedCss(node),500,close):close()}});this.update=function(state){this._open=state};this.alwaysEnabled=true;this.value=null;this.handlers={select:function(){this.update(void 0,this.fm.selectedFiles()[0])},error:function(){self.window.is(":visible")&&
self.window.data("hash","").trigger("close")},"searchshow searchhide":function(){this.opened()&&this.window.trigger("close")}};this.shortcuts=[{pattern:"space"}];this.support={audio:{ogg:support('audio/ogg; codecs\x3d"vorbis"'),mp3:support("audio/mpeg;"),wav:support('audio/wav; codecs\x3d"1"'),m4a:support("audio/x-m4a;")||support("audio/aac;")},video:{ogg:support('video/ogg; codecs\x3d"theora"'),webm:support('video/webm; codecs\x3d"vp8, vorbis"'),mp4:support('video/mp4; codecs\x3d"avc1.42E01E"')||
support('video/mp4; codecs\x3d"avc1.42E01E, mp4a.40.2"')}};this.closed=function(){return state==closed};this.opened=function(){return state==opened};this.bind=function(event,callback){var i;if(typeof callback=="function"){event=(""+event).toLowerCase().split(/\s+/);for(i=0;i<event.length;i++){if(listeners[event[i]]===void 0)listeners[event[i]]=[];listeners[event[i]].push(callback)}}return this};this.one=function(event,callback){var self=this,h=$.proxy(callback,function(event){setTimeout(function(){self.unbind(event.type,
h)},3);return callback.apply(this,arguments)});return this.bind(event,h)};this.open=function(e){var win=self.window,file=self.value,node;this._open=true;if(self.closed()){navbar.attr("style","");this._open=true;state=animated;win.css(closedCss(node)).show().animate(openedCss(),550,function(){state=opened;self.update(1,self.value)})}};this.close=function(e){self.handler.lastItemPreviewItem=null;this._open=false;var win=self.window,preview=self.preview.trigger("change"),file=self.value,node={},close=
function(){state=closed;win.hide();preview.children().remove();self.update(0,self.value)};if(self.opened()){state=animated;win.is("."+fullscreen)&&fsicon.mousedown();node.length?win.animate(closedCss(node),500,close):close()}};this.init=function(){this.options={autoplay:true,jplayer:"extensions/jplayer",ui:"button"};var o=this.options,win=this.window,preview=this.preview,i,p;width=o.width>0?parseInt(o.width):450;height=o.height>0?parseInt(o.height):300;win.appendTo("body").zIndex(2E4);$(document).keydown(function(e){e.keyCode==
27&&self.opened()&&win.trigger("close")});if($.fn.resizable)win.resizable({handles:"se",minWidth:350,minHeight:120,resize:function(){preview.trigger("changesize")}});$.each(plugins||[],function(i,plugin){if(typeof plugin=="function")new plugin(self)});preview.bind("update",function(){self.info.show()})};this.getstate=function(){return this.fm.selected().length==1?state==opened?1:0:-1};this.exec=function(){this.enabled()&&this.window.trigger(this.opened()?"close":"open")};this.hideinfo=function(){this.info.stop(true).hide()}};
return declare("xfiles.views.FilePanelPreview",[EventedMixin],{_preview:null,lastItemPreviewItem:null,destroy:function(){this.inherited(arguments)},updatePreview:function(item){try{if(!this._preview||!item||item.directory!=null)return;var preview=this._preview.preview;if(preview)preview.trigger($.Event("update",{file:item.item.path}));var thiz=this;if(this.lastItemPreviewItem!=item.item)this.lastItemPreviewItem=item.item}catch(e){}},doPreview:function(item){delegate=this.delegate;var thiz=this;try{if(this._preview){if(this._preview.opened()){this._preview.close();
return}this._preview._open=true;this._preview.open();setTimeout(function(){factory.publish(types.EVENTS.ITEM_SELECTED,{item:item},thiz)},100);return}var _prev=new preview;_prev.init();_prev.parent=dojo.byId("root");_prev.open();this._preview=_prev;this._preview.handler=this;setTimeout(function(){factory.publish(types.EVENTS.ITEM_SELECTED,{item:item},thiz)},200)}catch(e){}}})})},"xblox/model/variables/VariableSwitch":function(){define("xblox/model/variables/VariableSwitch",["dojo/_base/declare","xblox/model/logic/SwitchBlock"],
function(declare,SwitchBlock){return declare("xblox.model.variables.VariableSwitch",[SwitchBlock],{name:"Switch on Variable",toText:function(){return this.getBlockIcon("H")+this.name+" "+this.variable},getFields:function(){var fields=[this.utils.createCI("Variable",3,this.variable,{group:"General",options:this.scope.getVariablesAsOptions(),dst:"variable"})];fields=fields.concat(this.inherited(arguments));return fields}})})},"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\n\t\x3e\x3c/span\n\x3e\x3c/span\x3e\n',
"xide/utils/_LogMixin":function(){define(["dojo/_base/declare","xide/utils"],function(declare,utils){return declare("xide.utils._LogMixin",null,{debug_conf:null,initLogger:function(debug_config){this.debug_conf=debug_config},log:function(msg,msg_context){if(!msg_context)msg_context=this._debugContext()["main"];if(this.showDebugMsg(msg_context))0&&console.log(msg)},showDebugMsg:function(msg_context){if(this.debug_conf!=null)if(this.debug_conf["all"])return true;else if(this.debug_conf[msg_context])return true;
else return false;else{0&&console.log("No debug config, showing all.");this.debug_conf={"all":true};return true}}})})},"xide/utils/StoreUtils":function(){define(["xide/utils"],function(utils){utils.toString=function(d){if(d!=null){if(!dojo.isArray(d))return""+d;if(d&&d.length==1&&d[0]==null)return null;return""+(d[0]!=null?d[0]:d)}return null};utils.toBoolean=function(data){var resInt=false;if(data!=null){var _dataStr=data[0]?data[0]:data;if(_dataStr!=null)resInt=!!(_dataStr===true||_dataStr==="true"||
_dataStr==="1")}return resInt};utils.toObject=function(data){if(data!=null){var _obj=data[0]?data[0]:data;return _obj}return null};utils.toInt=function(data){var resInt=-1;if(data!=null){var _dataStr=data.length>1?data:data[0]?data[0]:data;if(_dataStr!=null)try{resInt=parseInt(_dataStr)}catch(e){}}return resInt};utils.deleteStoreItemById=function(store,itemIdAsString){var found=false;store.fetch({query:{id:itemIdAsString},queryOptions:{"deep":true},onComplete:function(items){for(var i=0;i<items.length;i++){var item=
items[i];store.deleteItem(item);store.save();found=true;break}}});return found};utils.getStoreItemByName=function(store,id){var res=null;store.fetch({query:{name:id},queryOptions:{"deep":true},onComplete:function(items){res=items.length>0?items[0]:null}});return res};utils.getStoreItemById=function(store,id){return utils.queryStoreEx(store,{id:id})};utils.getAppDataElementByIdAndType=function(store,id,type){return utils.queryStore(store,{uid:id,type:type})};utils.getElementsByType=function(store,
type){return utils.queryStoreEx(store,{type:type})};utils.queryStoreEx=function(store,query,nullEmpty,single){if(store instanceof dojo.store.Memory)return utils.queryMemoryStoreEx(store,query);var res=null;store.fetch({query:query,queryOptions:{"deep":true},onComplete:function(items){res=items}});if(nullEmpty!=null&&nullEmpty===true)if(res&&res.length==0)return null;if(single===true)if(res&&res.length==1)return res[0];return res};utils.queryStore=function(store,query,nullEmpty){if(store instanceof
dojo.store.Memory)return utils.queryMemoryStoreSingle(store,query);var res=utils.queryStoreEx(store,query);if(res&&res.length==1)return res[0];if(nullEmpty!=null&&nullEmpty===true)if(res&&res.length==0)return null;return res};utils.queryMemoryStoreEx=function(store,query){var result=[];store.query(query).forEach(function(entry){result.push(entry)});return result};utils.queryMemoryStoreSingle=function(store,query){var result=utils.queryMemoryStoreEx(store,query);if(result.length==1)return result[0];
return result};return utils})},"dijit/TooltipDialog":function(){require({cache:{"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\n\t\t\x3cdiv class\x3d"dijitTooltipContents dijitTooltipFocusNode" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\t\x3c/div\x3e\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\n\x3c/div\x3e\n'}});
define("dijit/TooltipDialog",["dojo/_base/declare","dojo/dom-class","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./focus","./layout/ContentPane","./_DialogMixin","./form/_FormMixin","./_TemplatedMixin","dojo/text!./templates/TooltipDialog.html","./main"],function(declare,domClass,has,keys,lang,on,focus,ContentPane,_DialogMixin,_FormMixin,_TemplatedMixin,template,dijit){var TooltipDialog=declare("dijit.TooltipDialog",[ContentPane,_TemplatedMixin,_FormMixin,_DialogMixin],{title:"",doLayout:false,
autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:template,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(on(this.containerNode,"keydown",lang.hitch(this,"_onKey")))},orient:function(node,aroundCorner,tooltipCorner){var newC={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft",
"BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[aroundCorner+"-"+tooltipCorner];domClass.replace(this.domNode,newC,this._currentOrientClass||"");this._currentOrientClass=newC},focus:function(){this._getFocusItems(this.containerNode);
focus.focus(this._firstFocusItem)},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);var aroundNodeCoords=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=aroundNodeCoords.y+(aroundNodeCoords.h-this.connectorNode.offsetHeight>>1)-pos.y+"px";this.connectorNode.style.left=""}else if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M")this.connectorNode.style.left=aroundNodeCoords.x+(aroundNodeCoords.w-this.connectorNode.offsetWidth>>
1)-pos.x+"px";this._onShow()},onClose:function(){this.onHide()},_onKey:function(evt){if(evt.keyCode==keys.ESCAPE){this.defer("onCancel");evt.stopPropagation();evt.preventDefault()}else if(evt.keyCode==keys.TAB){var node=evt.target;this._getFocusItems(this.containerNode);if(this._firstFocusItem==this._lastFocusItem){evt.stopPropagation();evt.preventDefault()}else if(node==this._firstFocusItem&&evt.shiftKey){focus.focus(this._lastFocusItem);evt.stopPropagation();evt.preventDefault()}else if(node==this._lastFocusItem&&
!evt.shiftKey){focus.focus(this._firstFocusItem);evt.stopPropagation();evt.preventDefault()}else evt.stopPropagation()}}});if(0)TooltipDialog.extend({_setTitleAttr:function(title){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,title):title;this._set("title",title)},_setTextDirAttr:function(textDir){if(!this._created||this.textDir!=textDir){this._set("textDir",textDir);if(this.textDir&&this.title)this.containerNode.title=this.enforceTextDirWithUcc(null,
this.title)}}});return TooltipDialog})},"*now":function(r){r(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});(function(){var require=this.require;require({cache:{}});!require.async&&require(["dojo"]);require.boot&&require.apply(null,require.boot)})();
//@ sourceMappingURL=dojo.js.map