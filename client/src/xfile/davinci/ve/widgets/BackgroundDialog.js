//>>built
require({cache:{"url:davinci/ve/widgets/templates/BackgroundDialog.html":"\x3cdiv class\x3d\"backgroundDialog\" style\x3d\"position:relative\" dojoAttachPoint\x3d\"_fileDialog\"\x3e\n\t\x3cstyle type\x3d\"text/css\"\x3e\n\t\t.backgroundDialog {\n\t\t\twidth:31em;\n\t\t}\n\t\t.bgdTopDiv {\n\t\t\tmargin-top: 4px;\n\t\t\tpadding-left: .75em;\n\t\t}\n\t\t.bgdTopTable {\n\t\t\twidth:100%;\n\t\t\tborder-collapse:collapse;\n\t\t}\n\t\t.bgdTopLabel, .bgdTopField, .bgdTopPreview {\n\t\t\twidth:1px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdTopLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right:6px;\n\t\t}\n\t\t.bgdTopTable .dijitSelect .dijitButtonContents {\n\t\t\twidth:8em;\n\t\t}\n\t\t.bgdTopTable .dijitTextBox {\n\t\t\twidth: 9.8em;\n\t\t}\n\t\t.bgdPreview {\n\t\t\tdisplay:inline-block;\n\t\t\twidth: 6em;\n\t\t\theight: 2.8em;\n\t\t\tmargin-left:12px;\n\t\t\tborder:1px solid gray;\n\t\t\tvertical-align: middle;\n\t\t}\n\t\t.bgdOptionsDiv {\n\t\t\tmargin:0.3em 0em 1em 1em;\n\t\t}\n\t\t.bgdOptionsDiv \x3e table {\n\t\t\twidth:27em;\n\t\t}\n\t\t.bgdSection {\n\t\t\tbackground-color:#d8d8d8;\n\t\t}\n\t\tdiv.bgdSection, .bgdSection td, .bgdSection.bgdUrlSectionLabel {\n\t\t\tpadding:2px 5px;\n\t\t}\n\t\t.bgdBeforeStopsLabel {\n\t\t\theight:6px;\n\t\t}\n\t\t.bgdStopsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterStopsLabel {\n\t\t\theight:0px;\n\t\t}\n\t\t.bgdBeforeOptionsLabel {\n\t\t\theight:16px;\n\t\t}\n\t\t.bgdOptionsLabel {\n\t\t\tmargin-top:1em;\n\t\t}\n\t\t.bgdAfterOptionsLabel {\n\t\t\theight:4px;\n\t\t}\n\t\t.bgdCol1 {\n\t\t\twidth:10px;\n\t\t}\n\t\t.bgdPlusMinusButtons {\n\t\t\twhite-space:nowrap;\n\t\t\twidth:51px;\n\t\t}\n\t\t.bgdOptionsDiv th {\n\t\t\ttext-align:center;\n\t\t\tfont-style:italic;\n\t\t}\n\t\t.bgdOptsLabel {\n\t\t\ttext-align:right;\n\t\t\tpadding-right: 6px;\n\t\t\twhite-space:nowrap;\n\t\t}\n\t\t.bgdColor.dijitTextBox {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdPosition.dijitTextBox {\n\t\t\twidth:5em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitTextBox {\n\t\t\twidth:10.6em;\n\t\t}\n\t\t.bgdStopColorTD .dijitTextBox {\n\t\t\twidth:14em;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect {\n\t\t\tmargin:0;\n\t\t}\n\t\t.bgdOptionsDiv .dijitSelect .dijitButtonContents {\n\t\t\twidth:9em;\n\t\t}\n\t\t.bgdUrlContainerOuter {\n\t\t\tmargin-top:1em;\n\t\t\tmargin-left:1em;\n\t\t}\n\t\t.bgdUrlContainerInner {\n\t\t\tmargin:0 1em;\n\t\t}\n\t\t.bgdUrlSectionLabel {\n\t\t\tmargin:1em 0 .25em;\n\t\t}\n\t\t.bgdFileTreeContainer {\n\t\t\tmargin: 0 0 0 3px;\n\t\t\tborder: 1px solid #26A;\n\t\t}\n\t\t.bgdFileTreeContainer .dijitTree {\n\t\t\theight:125px;\n\t\t}\t\t\n\t\t.backgroundDialog .fileNameRow  {\n\t\t\tmargin:8px 0 .4em;\n\t\t}\n\t\t.backgroundDialog .fileNameRow label {\n\t\t\tvertical-align:middle;\n\t\t\tmargin-right:4px;\n\t\t}\n\t\t.backgroundDialog .fileNameRow .dijitTextBox {\n\t\t\twidth:16em;\n\t\t}\n\t\t.bgdOptionsDiv .bgdOtherRow .dijitTextBox {\n\t\t\twidth:15em;\n\t\t}\n\t\t\n\t\x3c/style\x3e\n\n\t\x3cdiv class\x3d\"dijitDialogPaneContentArea\"\x3e\n\t\t\x3cdiv class\x3d'bgdTopDiv'\x3e\n\t\t\t\x3ctable class\x3d'bgdTopTable'\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundColor}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdColorCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd rowspan\x3d'2' class\x3d'bgdTopPreview' style\x3d'border-collapse:collapse'\x3e\x3cspan class\x3d'bgdPreview'\x3e\x3c/span\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopLabel'\x3e\x3clabel class\x3d'bgdTypeDivTypeLabel'\x3e${veNLS.bgdBackgroundImageType}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopField'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d'dijit.form.Select' value\x3d'linear' dojoAttachPoint\x3d'bgdTypeSelect'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\x3c!-- FIXME: Add plain text type-in box if unrecognized syntax --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdTopExpando'\x3e\x26nbsp;\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\t\n\t\t\x3cdiv class\x3d\"bgdUrlContainerOuter bgdImageOptRow\"\x3e\n\t\t\t\x3cdiv class\x3d\"bgdSection bgdOptionsLabel\"\x3e${veNLS.bgdImageUrl}\x3c/div\x3e\n\t\t\t\x3cdiv class\x3d\"bgdUrlContainerInner\"\x3e\n\t\t\t\t\x3cdiv class\x3d'fileNameRow'\x3e\n\t\t\t\t\t\x3ctd class\x3d\"fileDialogLabelCell\"\x3e\n\t\t\t\t\t\x3clabel\x3e${veNLS.bgdUrl}\x3c/label\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\t\x3ctd\x3e\n\t\t\t\t\t\x3cdiv dojoType\x3d'davinci.ui.widgets.FileFieldDialog' dojoAttachPoint\x3d\"_filePicker\"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d\"bgdOptionsDiv\"\x3e\n\t\t\t\x3ctable\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdBeforeStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdSection bgdStopsLabel\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdColorStops}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdAfterStopsLabel\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d'bgdGradOptRow bgdStopRow'\x3e\n\t\t\t\t\t\x3cth\x3e\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\x3cth\x3e${veNLS.bgdColor}\x3c/th\x3e\x3cth\x3e${veNLS.bgdPosition}\x3c/th\x3e\x3cth\x3e\x3c/th\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3c!--  gradient stop rows added dynamically --\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdBeforeOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdSection bgdOptionsLabel bgdOptionsLabelRow\"\x3e\n\t\t\t\t\t\x3ctd colspan\x3d\"5\"\x3e${veNLS.bgdOptions}\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdAfterOptionsLabel bgdOptionsLabelRow\"\x3e\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdLinearOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdAngle}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdLinearAngleCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdPosition2}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialPosCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdShapeRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdShape}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialShapeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdExtentRow\" class\x3d\"bgdGradOptRow bgdRadialOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdExtent}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRadialExtentCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdRepeatRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundRepeat}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdRepeatCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdPositionRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundPosition}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdPositionCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdSizeRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e${veNLS.bgdBackgroundSize}\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\x3c!-- FIXME: regExp, invalidMessage --\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdSizeCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOriginRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundOrigin}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdOriginCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdClipRow\" class\x3d\"bgdImageOptRow\"\x3e\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundClip}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3cselect dojoType\x3d\"dijit.form.ComboBox\" dojoAttachPoint\x3d'bgdClipCB'\x3e\n\t\t\t\t\t\t\t\x3c!--  values added dynamically --\x3e\n\t\t\t\t\t\t\x3c/select\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\t\t\t\x3c/tr\x3e\n\t\t\t\t\x3ctr dojoAttachPoint\x3d\"bgdOtherTypeInRow\" class\x3d\"bgdOtherRow\"\x3e\t\n\t\n\t\t\t\t\t\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd class\x3d'bgdOptsLabel'\x3e\x3clabel\x3e${veNLS.bgdBackgroundImageValue}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\t\t\x3ctd colspan\x3d'3'\x3e\n\t\t\t\t\t\t\x3ctextarea dojoType\x3d\"dijit.form.Textarea\" dojoAttachPoint\x3d'bgdOtherTA'\x3e\x3c/textarea\x3e\n\t\t\t\t\t\x3c/td\x3e\n\t\n\t\t\t\t\x3c/tr\x3e\n\t\n\t\t\t\x3c/table\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\n\t\x3cdiv class\x3d\"dijitDialogPaneActionBar\"\x3e\n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachPoint\x3d\"_okButton\" dojoAttachEvent\x3d'onClick:okButton' label\x3d'${buttonOk}' class\x3d\"maqPrimaryButton\" type\x3d\"submit\"\x3e\x3c/span\x3e \n\t\t\x3cspan dojoType\x3d'dijit.form.Button' dojoAttachEvent\x3d'onClick:cancelButton' label\x3d'${buttonCancel}' class\x3d\"maqSecondaryButton\"/\x3e\x3c/span\x3e \n\t\x3c/div\x3e\t\t\n\x3c/div\x3e\n"}});
define("davinci/ve/widgets/BackgroundDialog","dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin davinci/Runtime davinci/ve/widgets/MutableStore davinci/ve/widgets/ColorStore dojo/text!./templates/BackgroundDialog.html davinci/ve/utils/CssUtils dojo/i18n!davinci/ve/nls/ve dojo/i18n!dijit/nls/common davinci/ve/utils/URLRewrite davinci/model/Path dijit/form/Button davinci/ve/widgets/ColorPicker davinci/ve/widgets/ColorPickerFlat dijit/form/Textarea davinci/ui/widgets/FileFieldDialog".split(" "),
function(s,t,u,v,w,m,q,x,l,n,y,p,z){var r=function(d,c){var b=w.getUserWorkspaceUrl();c=(new z(d)).getParentPath().append(c).toString();return val="url('"+b+c+"')"};BackgroundDialog=s("davinci.ve.widgets.BackgroundDialog",[t,u,v],{templateString:x,widgetsInTemplate:!0,_filePicker:null,context:null,veNLS:n,stopRowTemplate:"\x3ctr class\x3d'bgdGradOptRow bgdStopRow' style\x3d'display:none;'\x3e\x3ctd class\x3d'bgdCol1'\x3e\x3c/td\x3e\x3ctd class\x3d'bgdOptsLabel bdgStopLabel'\x3e"+n.bgdTemplate+"\x3c/td\x3e\x3ctd class\x3d'bgdStopColorTD'\x3e\x3cselect class\x3d'bgdColor' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect class\x3d'bgdPosition' dojoType\x3d'dijit.form.ComboBox'\x3e\x3c/select\x3e\x3c/td\x3e\x3ctd class\x3d'bgdPlusMinusButtons'\x3e\x3cspan class\x3d'bgdPlusButton' dojoType\x3d'dijit.form.Button'\x3e+\x3c/span\x3e\x3cspan class\x3d'bgdMinusButton' dojoType\x3d'dijit.form.Button'\x3e-\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e",
postMixInProperties:function(){this.inherited(arguments);dojo.mixin(this,y)},postCreate:function(){this.inherited(arguments);var d=this.langObj=n;this.stoppos_store=new m({values:"0% 100% 10% 20% 30% 40% 50% 60% 70% 80% 90%".split(" ")});var c=davinci.ve._BackgroundWidgets;this._statics=["",davinci.ve.widgets.ColorPicker.divider,d.colorPicker,d.removeValue];var b=[{value:this._statics[0]}];b.push({value:this._statics[2],action:"_colorpicker"});b.push({value:this._statics[3],action:"_removevalue"});
b.push({value:this._statics[1],action:"_donothing"});b.push({value:"transparent"});b.push({value:"black"});b.push({value:"white"});b.push({value:"red"});b.push({value:"green"});b.push({value:"blue"});var e=[];this._bgcolor_action={};var g=[];this._stops_action={};for(var h=0;h<b.length;h++)e.push(b[h].value),b[h].action&&(this._bgcolor_action[b[h].value]=b[h].action),""!=b[h].value&&"_removevalue"!=b[h].action&&(g.push(b[h].value),b[h].action&&(this._stops_action[b[h].value]=b[h].action));this._bgcolor_store=
new q({values:e,noncolors:this._statics});this._stops_store=new q({values:g,noncolors:this._statics});var b=c["background-image"].comboBox.get("value"),a,f;"string"==typeof b&&0<b.length?(a=l.parseBackgroundImage(b),f=a.type):a={};this.bgddata=a;this.bgdOtherTA.set("value",b);var k=[];"emptystring url linear radial none other".split(" ").forEach(function(a){k.push({value:a,label:d["bgdType_"+a]})});this.bgdTypeSelect.addOption(k);this._updateBackgroundImageType(f);this.connect(this.bgdTypeSelect,
"onChange",dojo.hitch(this,function(){var a=this.bgdTypeSelect.get("value");this._updateBackgroundImageType(a);this._onFieldChanged()}));b=c["background-color"].comboBox.get("value");f=this.bgdColorCB;f.set("store",this._bgcolor_store);f.set("value",b);a.backgroundColor=b;this.connect(this.bgdColorCB,"onChange",dojo.hitch(this,function(a){this._onChangeColor(a,this.bgdColorCB,this._bgcolor_action)}));c["background-color"].bgdWidget=this.bgdColorCB;f=c["background-repeat"].comboBox;b=f.get("value");
e=this.bgdRepeatCB;e.set("store",f.store);e.set("regExp","repeat|repeat-x|repeat-y|no-repeat");e.set("value",b);a.backgroundRepeat=b;this.connect(this.bgdRepeatCB,"onChange",dojo.hitch(this,function(){a.backgroundRepeat=this.bgdRepeatCB.get("value");this._onFieldChanged()}));c["background-repeat"].bgdWidget=this.bgdRepeatCB;f=c["background-position"].comboBox;b=f.get("value");e=this.bgdPositionCB;e.set("store",f.store);e.set("regExp","auto|contain|cover|"+l.regstr_posn);e.set("value",b);a.backgroundPosition=
b;this.connect(this.bgdPositionCB,"onChange",dojo.hitch(this,function(){a.backgroundPosition=this.bgdPositionCB.get("value");this._onFieldChanged()}));c["background-position"].bgdWidget=this.bgdPositionCB;f=c["background-size"].comboBox;b=f.get("value");e=this.bgdSizeCB;e.set("store",f.store);e.set("regExp","auto|contain|cover|"+l.regstr_len_or_pct);e.set("value",b);a.backgroundSize=b;this.connect(this.bgdSizeCB,"onChange",dojo.hitch(this,function(){a.backgroundSize=this.bgdSizeCB.get("value");this._onFieldChanged()}));
c["background-size"].bgdWidget=this.bgdSizeCB;f=c["background-origin"].comboBox;b=f.get("value");e=this.bgdOriginCB;e.set("store",f.store);e.set("regExp","border-box|padding-box|content-box");e.set("value",b);a.backgroundOrigin=b;this.connect(this.bgdOriginCB,"onChange",dojo.hitch(this,function(){a.backgroundOrigin=this.bgdOriginCB.get("value");this._onFieldChanged()}));c["background-origin"].bgdWidget=this.bgdOriginCB;f=c["background-clip"].comboBox;b=f.get("value");e=this.bgdClipCB;e.set("store",
f.store);e.set("regExp","border-box|padding-box|content-box");e.set("value",b);a.backgroundClip=b;this.connect(this.bgdClipCB,"onChange",dojo.hitch(this,function(){a.backgroundClip=this.bgdClipCB.get("value");this._onFieldChanged()}));c["background-clip"].bgdWidget=this.bgdClipCB;c=new m({values:"to bottom;to top;to right;to left;45deg;-45deg".split(";")});this.bgdLinearAngleCB.set("store",c);this.bgdLinearAngleCB.set("regExp",l.regstr_angle);this.bgdLinearAngleCB.set("value",a&&a.angle?a.angle:"to bottom");
this.connect(this.bgdLinearAngleCB,"onChange",dojo.hitch(this,function(){a.angle=this.bgdLinearAngleCB.get("value");this._onFieldChanged()}));c=new m({values:"center;left top;center center;right bottom;0% 0%;0px 0px".split(";")});this.bgdRadialPosCB.set("store",c);this.bgdRadialPosCB.set("regExp",l.regstr_posn);this.bgdRadialPosCB.set("value",a&&a.posn?a.posn:"center");this.connect(this.bgdRadialPosCB,"onChange",dojo.hitch(this,function(){a.posn=this.bgdRadialPosCB.get("value");this._onFieldChanged()}));
c=new m({values:["circle","ellipse"]});this.bgdRadialShapeCB.set("store",c);this.bgdRadialShapeCB.set("regExp",l.regstr_shape);this.bgdRadialShapeCB.set("value",a&&a.shape?a.shape:"circle");this.connect(this.bgdRadialShapeCB,"onChange",dojo.hitch(this,function(){a.shape=this.bgdRadialShapeCB.get("value");this._onFieldChanged()}));c=new m({values:["farthest-corner","farthest-side","closest-corner","closest-side"]});this.bgdRadialExtentCB.set("store",c);this.bgdRadialExtentCB.set("regExp",l.regstr_extent);
this.bgdRadialExtentCB.set("value",a&&a.extent?a.extent:"farthest-corner");this.connect(this.bgdRadialExtentCB,"onChange",dojo.hitch(this,function(){a.extent=this.bgdRadialExtentCB.get("value");this._onFieldChanged()}));this._initializeStops(a&&a.stops&&2<=a.stops.length?a.stops:[{color:"white",pos:"0%"},{color:"black",pos:"100%"}])},startup:function(){this.inherited(arguments);var d=this.bgddata&&this.bgddata.url?this.bgddata.url:"";this._filePicker.set("value",d);this.bgddata.url=d;this.connect(this._filePicker,
"onChange",dojo.hitch(this,function(){var c=this._filePicker.get("value");this.bgddata.url=c;this._onFieldChanged()}))},_updateBackgroundImageType:function(d){var c=this.domNode;if(!d||!("none"==d||"url"==d||"linear"==d||"radial"==d||"other"==d))d="emptystring";this.bgddata.type=d;this.bgdTypeSelect.set("value",d);var b=dojo.query(".bgdOptionsLabelRow",c),e=dojo.query(".bgdImageOptRow",c),g=dojo.query(".bgdGradOptRow",c),h=dojo.query(".bgdLinearOptRow",c),a=dojo.query(".bgdRadialOptRow",c),c=dojo.query(".bgdOtherRow",
c);"url"==d?(e.concat(b).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),g.concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"linear"==d?(g.concat(b).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),e.concat(a).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"radial"==d?(g.concat(b).forEach(function(a){dojo.removeClass(a,"dijitHidden")}),e.concat(h).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})):"other"==d?(c.forEach(function(a){dojo.removeClass(a,
"dijitHidden")}),e.concat(g).concat(b).forEach(function(a){dojo.addClass(a,"dijitHidden")})):e.concat(g).concat(b).concat(c).forEach(function(a){dojo.addClass(a,"dijitHidden")})},_initializeStops:function(d){var c=this.langObj;d||(d=this.bgddata.stops);for(var b=this.bgdTypeSelect.get("value"),e=dojo.query(".bgdStopRow",this.domNode),g=e.length-1;0<g;g--){var h=e[g],a=dojo.query(".bgdColor",h),a=dijit.byNode(a[0]);a.destroyRecursive();a=dojo.query(".bgdPosition",h);a=dijit.byNode(a[0]);a.destroyRecursive();
dojo.destroy(h)}g=e[0];e=g.parentNode;h=g.nextSibling;for(g=0;g<d.length;g++){var f=d[g],k=dojo.create("tr",{className:"bgdGradOptRow bgdStopRow"});k.innerHTML=this.stopRowTemplate;"linear"!=b&&"radial"!=b&&dojo.addClass(k,"dijitHidden");e.insertBefore(k,h);dojo.parser.parse(k);dojo.query(".bdgStopLabel",k)[0].innerHTML=this.langObj.bgdStop+" #"+(g+1)+":";a=dojo.query(".bgdColor",k);a=dijit.byNode(a[0]);a.set("store",this._stops_store);a.set("regExp",l.regstr_stop_color);a.set("value",f.color);this.connect(a,
"onChange",dojo.hitch(this,function(a,b){this._onChangeColor(b,a,this._stops_action)},a));a=dojo.query(".bgdPosition",k);a=dijit.byNode(a[0]);a.set("store",this.stoppos_store);f="string"==typeof f.pos&&0<f.pos.length?f.pos:0==g?"0%":"100%";a.set("regExp",l.regstr_stop_pos);a.set("value",f);this.connect(a,"onChange",dojo.hitch(this,function(){this._updateDataStructureStops();this._onFieldChanged()}));a=dojo.query(".bgdPlusButton",k)[0];a=dijit.byNode(a);a.set("title",c.bgdAddStop);this.connect(a,"onClick",
dojo.hitch(this,function(a){var b=this.bgddata.stops[a];this.bgddata.stops.splice(a+1,0,{color:b.color,pos:b.pos});this._initializeStops()},g));f=dojo.query(".bgdMinusButton",k)[0];f=dijit.byNode(f);f.set("title",c.bgdRemoveStop);this.connect(f,"onClick",dojo.hitch(this,function(a){this.bgddata.stops.splice(a,1);this._initializeStops()},g));k=dojo.query(".bgdMinusButton",this.domNode);for(a=0;a<k.length;a++)f=k[a],f=dijit.byNode(f),2>=d.length?f.set("disabled",!0):f.set("disabled",!1)}this._updateDataStructureStops()},
_onFieldChanged:function(){this._updateDialogValidity();this._updateBackgroundPreview()},_setBaseLocationAttr:function(d){this._baseLocation=d;this._filePicker.set("baseLocation",d)},_updateDialogValidity:function(){var d=this.bgddata;if(d&&d.type){var c=this.domNode,d=d.type,b=[],e=!0;"url"==d?b=dojo.query(".bgdImageOptRow",c):"linear"==d?b=dojo.query(".bgdStopRow",c).concat(dojo.query(".bgdLinearOptRow",c)):"radial"==d&&(b=dojo.query(".bgdStopRow",c).concat(dojo.query(".bgdRadialOptRow",c)));b.forEach(function(b){dojo.query("[widgetid]",
b).forEach(function(b){"function"==typeof b.isValid&&!b.isValid()&&(e=!1)})});this.bdgValid=e;this._okButton.set("disabled",!e)}},_updateBackgroundPreview:function(){function d(a,c){var d=e[c];"string"==typeof d&&0<d.length&&(b+=";"+a+":"+d)}var c=dojo.query(".bgdPreview",this.domNode)[0],b="",e=this.bgddata;d("background-color","backgroundColor");d("background-repeat","backgroundRepeat");d("background-position","backgroundPosition");d("background-size","backgroundSize");d("background-origin","backgroundOrigin");
d("background-clip","backgroundClip");for(var g=l.buildBackgroundImage(this.bgddata),h=0;h<g.length;h++){var a=g[h];if(p.containsUrl(a)&&!p.isAbsolute(a)&&this.context){var f=p.getUrl(a);f&&(a=r(this._baseLocation,f))}b+=";background-image:"+a}c.setAttribute("style",b);this.bgdOtherTA.set("value",g[g.length-1])},_updateDataStructureStops:function(){var d=this.bgddata;d.stops=[];for(var c=dojo.query(".bgdStopRow",this.domNode),b=1;b<c.length;b++){var e=c[b],g=dojo.query(".bgdColor",e),g=dijit.byNode(g[0]),
e=dojo.query(".bgdPosition",e),e=dijit.byNode(e[0]);d.stops.push({color:g.get("value"),pos:e.get("value")})}},_setValueAttr:function(d){d&&this._colorPickerTargetWidget.set("value",d)},_onChangeColor:function(d,c,b){if(d=b[d])if("_removevalue"==d?c.set("value",""):c.set("value",c._currentcolorvalue),"_colorpicker"==d){d=new davinci.ve.widgets.ColorPickerFlat({});b=c.get("value");var e=this.isLeftToRight();this._colorPickerTargetWidget=c;davinci.ve.widgets.ColorPickerFlat.show(d,b,this,e)}c._currentcolorvalue=
c.get("value");this.bgddata.backgroundColor=this.bgdColorCB.get("value");this._updateDataStructureStops();this._onFieldChanged()},okButton:function(){},cancelButton:function(){this.onClose()}});BackgroundDialog.getCSSForWorkspaceURL=r;return BackgroundDialog});
//# sourceMappingURL=BackgroundDialog.js.map