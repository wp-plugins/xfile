//>>built
require({cache:{"url:davinci/ui/templates/NewProject.html":'\x3cdiv\x3e\n\t\x3cdiv class\x3d"dijitDialogPaneContentArea"\x3e\n\t\t\x3ctable class\x3d"NewProjectDialogTable"\x3e\n\t\t\x3ctr\x3e\n\t\t\t\x3ctd class\x3d"NewProjectDialogLabel"\x3e\x3clabel for\x3d"new-project-name"\x3e${newProjectName}\x3c/label\x3e\x3c/td\x3e\n\t\t\t\x3ctd\x3e\n\t\t\t\t\x3cinput class\x3d\'templateInput\' id\x3d"new-project-name" data-dojo-type\x3d"dijit.form.ValidationTextBox" type\x3d\'text\' dojoAttachPoint\x3d"_projectName"\x3e\n\t\t\t\x3c/td\x3e\n\t\t\t\x3ctd\x3e\x3cdiv dojoAttachPoint\x3d\'_error4\'\x3e\x3c/div\x3e\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\t\x3ctr\x3e\n\t\t\t\x3ctd colspan\x3d"2" class\x3d"NewProjectUseTemplateCell"\x3e\n\t\t\t\t\x3cinput type\x3d"checkbox" dojoAttachPoint\x3d"_useProjectTemplate" id\x3d"new-project-template"\x3e\n\t\t\t\t\x3clabel class\x3d"NewProjectDialogLabel NewProjectUseTemplateLabel" for\x3d"new-project-template"\x3e${newProjectUseProjectTemplate}\x3c/label\x3e\n\t\t\t\t\x3cselect class\x3d"NewProjectTemplateSelect" dojoType\x3d"dijit.form.Select" dojoAttachPoint\x3d"projectTemplates" dojoAttachEvent\x3d"onChange: _onChangeTemplate"\x3e\n\t\t\t\t\t\x3c!-- Menu created dynamically --\x3e\n\t\t\t\t\x3c/select\x3e\n\t\t\t\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\t\x3ctr\x3e\n\t\t\t\x3ctd colspan\x3d"2" class\x3d"NewProjectCloneExistingCell"\x3e\n\t\t\t\t\x3cinput type\x3d"checkbox" dojoAttachPoint\x3d"_cloneExistingProject" id\x3d"new-project-clone"\x3e\n\t\t\t\t\x3clabel class\x3d"NewProjectDialogLabel" for\x3d"new-project-clone"\x3e${newProjectCloneExistingProject}\x3c/label\x3e\n\t\t\t\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\t\x3ctr\x3e\n\t\t\t\x3ctd colspan\x3d"2" class\x3d"NewProjectEclipseSupportCell"\x3e\n\t\t\t\t\x3cinput type\x3d"checkbox" dojoAttachPoint\x3d"_eclipseSupport" id\x3d"new-project-eclipse"\x3e\n\t\t\t\t\x3clabel class\x3d"NewProjectDialogLabel" for\x3d"new-project-eclipse"\x3e${newProjectEclipseSupport}\x3c/label\x3e\n\t\t\t\x3c/td\x3e\n\t\t\x3c/tr\x3e\n\t\t\x3c/table\x3e\n\t\x3c/div\x3e\n\n\t\x3cdiv class\x3d"dijitDialogPaneActionBar"\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachPoint\x3d"_okButton" dojoAttachEvent\x3d\'onClick:okButton\' label\x3d\'${create}\' class\x3d"maqPrimaryButton" type\x3d"submit" disabled\x3e\x3c/button\x3e\n\t\t\x3cbutton dojoType\x3d\'dijit.form.Button\' dojoAttachEvent\x3d\'onClick:cancelButton\' label\x3d\'${buttonCancel}\' class\x3d"maqSecondaryButton"\x3e\x3c/button\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n'}});
define("davinci/ui/NewProject","dojo/_base/declare dojo/_base/lang dojo/on dojo/aspect dojo/Deferred dojo/dom-attr dijit/_Templated dijit/_Widget davinci/library system/resource davinci/workbench/Preferences davinci/Runtime davinci/Workbench davinci/ui/ProjectTemplates dojo/i18n!davinci/ui/nls/ui dojo/i18n!dijit/nls/common dojo/text!./templates/NewProject.html dijit/form/Button dijit/form/RadioButton dijit/form/ValidationTextBox".split(" "),function(k,e,g,l,m,f,n,p,w,d,q,x,h,r,s,t,u){return k([p,
n],{widgetsInTemplate:!0,templateString:u,_okButton:null,_projectName:null,_eclipseSupport:null,_projectTemplate:"_none_",_regex:/^[\w\-\.\_]+$/,_postCreateDeferred:null,constructor:function(){this._postCreateDeferred=new m;d.listProjects(function(a){function v(a){var b="0000";0<=a&&15>=a?b="000"+a.toString(16):16<=a&&255>=a?b="00"+a.toString(16):256<=a&&4095>=a?b="0"+a.toString(16):4096<=a&&65535>=a&&(b=a.toString(16));return b}this._allCurrentProjectNames=[];for(var b="",c=0;c<a.length;c++){for(var f=
a[c].name,b=b+"(?!^",d=0;d<f.length;d++)var e=f.charCodeAt(d),b=b+("\\u"+v(e));b+="$)"}b+="^[\\w\\-\\.\\_]+$";this._regex=RegExp(b);this._postCreateDeferred.then(function(){this._projectName.set("regExp",b)}.bind(this))}.bind(this))},postMixInProperties:function(){e.mixin(this,s);e.mixin(this,t);d.listProjects(this.setProjects.bind(this));this.inherited(arguments)},setProjects:function(a){this._projects={};a.forEach(function(a){a&&(this._projects[a.name]=!0)},this)},postCreate:function(){this.inherited(arguments);
g(this._projectName,"keyup",this._checkValid.bind(this));this.projectTemplates.addOption([]);this._useProjectTemplate.disabled=!0;r.getIncremental(1E3,function(a,d,b){this._updateTemplates(a);return!1}.bind(this));this.projectTemplates.set("maxHeight",200);this._projectName.set("regExp","^[\\w\\-\\.\\_]+$");g(this._useProjectTemplate,"change",function(){this.projectTemplates.set("disabled",!this._useProjectTemplate.checked)}.bind(this));this.projectTemplates.set("disabled",!this._useProjectTemplate.checked);
l.around(this._projectName,"_isValidSubset",function(a){return function(){return!1}});this._postCreateDeferred.resolve()},_updateTemplates:function(a){var d=[];if(0<a.length){for(var b=0;b<a.length;b++){var c=a[b];c.folder&&c.name&&d.push({value:c.folder,label:(c.authorEmail?'\x3cspan class\x3d"NewProjectTemplateAuthor"\x3e\x26nbsp;\x26nbsp;(Author: '+c.authorEmail+")\x3c/span\x3e":"")+'\x3cspan class\x3d"NewProjectTemplateName"\x3e'+c.name+"\x3c/span\x3e"})}this._useProjectTemplate.disabled=!1}else this._useProjectTemplate.disabled=
!0;this.projectTemplates.addOption(d);this.projectTemplates.set("disabled",!this._useProjectTemplate.checked)},_checkValid:function(){if(!this._projects)return!1;var a=this._projectName.isValid();this._okButton.set("disabled",!a)},okButton:function(){var a=this._projectName.get("value"),e=f.get(this._cloneExistingProject,"checked")?h.getProject():"",b=this._getEclipseProjectAttr(),c=f.get(this._useProjectTemplate,"checked")?this.projectTemplates.get("value"):"";d.createProject({newProjectName:a,projectTemplateName:c,
projectToClone:e,eclipseSupport:b}).then(function(){b&&q.savePreferences("davinci.ui.ProjectPrefs",a,{webContentFolder:"WebContent",themeFolder:"WebContent/themes",widgetFolder:"WebContent/lib/custom"});h.loadProject(a)})},_getEclipseProjectAttr:function(){return f.get(this._eclipseSupport,"checked")},_getValueAttr:function(){return this.value},_onChangeTemplate:function(a){this._projectTemplate=a},cancelButton:function(){this.cancel=!0;this.onClose()},onClose:function(){}})});
//# sourceMappingURL=NewProject.js.map