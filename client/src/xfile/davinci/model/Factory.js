//>>built
define("davinci/model/Factory",["../html/CSSFile","../js/JSFile","../html/HTMLFile","system/resource"],function(h,k,g,l){var d=[],c=[],f={getModel:function(a){var b=a.url;if(!b)return null;for(var e=0;e<c.length;e++)if(c[e].url==b)return d[e]++,this.incrementImports(c[e]),c[e];if(/\.html?$/i.test(b)||/\.cfhtml?$/i.test(b))return f.newHTML(a);if(/\.css$/i.test(b))return f.newCSS(a);if(/\.js$/i.test(b))return f.newJS(a)},closeModel:function(a){a=a.url;if(!a)return null;for(var b=0;b<c.length;b++)c[b].url==
a&&(d[b]--,0===d[b]&&(c.splice(b,1),d.splice(b,1)))},newHTML:function(a){a=new g(a.url);c.push(a);d[c.length-1]=1;return a},newCSS:function(a){a=new h(a);c.push(a);d[c.length-1]=1;return a},newJS:function(a){a=new k(a);c.push(a);d[c.length-1]=1;return a},getNewFromResource:function(a){a=a.extension;if(!a)return new g;switch(a){case "html":return new g;case "css":return new h;case "js":case "json":return new k;default:return new g}},incrementImports:function(a){var b={visit:function(a){if("CSSImport"==
a.elementType){a=a.cssFile.url;for(var b=0;b<c.length;b++)c[b].url==a&&d[b]++}return!1}};a&&a.visit(b)},log:function(){for(var a=0;a<c.length;a++);}};require(["dojo/_base/connect"],function(a){a.subscribe("davinci/model/closeModel",f,f.closeModel)});return f});
//# sourceMappingURL=Factory.js.map