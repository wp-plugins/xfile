//>>built
define("davinci/ve/actions/ReplaceAction","dojo/_base/declare dojo/dom-style davinci/ve/actions/ContextAction davinci/commands/CompoundCommand davinci/ve/commands/AddCommand davinci/ve/commands/MoveCommand davinci/ve/tools/CreateTool davinci/ve/widget davinci/ve/utils/GeomUtils".split(" "),function(e,h,k,l,m,n,p,q,r){return e("davinci.ve.actions.ReplaceAction",[k],{run:function(a,s){if((a=this.fixupContext(a))&&"davinci.ve.Context"===a.declaredClass){var c=this._normalizeSelection(a);if(this.selectionSameParent(c)){var g=
[],e={type:s,context:a};if(0<c.length){var f=new l;dojo.forEach(c,function(b){var d,c=b.getData({identify:!1});if(c&&(c.context=a,dojo.withDoc(a.getDocument(),function(){d=q.createWidget(e)},this),d&&(f.add(new m(d,b.getParent(),void 0)),p.prototype.checkAddToCurrentState(f,d),g.push(d),"absolute"==(b&&b.domNode?h.get(b.domNode,"position"):null))))b=r.getMarginBoxPageCoords(b.domNode),b.l+=25,f.add(new n(d,b.l,b.t,void 0,void 0,void 0,!0))});a.getCommandStack().execute(f);dojo.forEach(g,function(b,
c){a.select(b,0<c)},this)}}}},isEnabled:function(a){a=(a=this.fixupContext(a))&&a.getSelection?a.getSelection():[];return 0===a.length?!1:this.selectionSameParent(a)},shouldShow:function(a){return(a=(a=this.fixupContext(a))?a.editor:null)&&"davinci.ve.PageEditor"==a.declaredClass},selectionSameParent:function(a){if(0===a.length)return!1;for(var e=a[0].getParent(),c=0;c<a.length;c++)if(a[c].getParent()!=e)return!1;return!0}})});
//# sourceMappingURL=ReplaceAction.js.map