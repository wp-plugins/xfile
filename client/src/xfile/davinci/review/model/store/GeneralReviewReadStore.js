//>>built
define("davinci/review/model/store/GeneralReviewReadStore",["dojo/_base/declare"],function(d){return d("davinci.review.model.store.GeneralReviewReadStore",null,{constructor:function(a){dojo.mixin(this,a);this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._loadedItems=[]},getFeatures:function(){return this._features},getIdentity:function(a){return a.getPath()},fetchItemByIdentity:function(a){var b;if(a.identity&&this.isItemLoaded(a.identity))dojo.some(this._loadedItems,function(c){if(a.identity==
this.getIdentity(c))return b=c,!0},this),b&&a.onItem&&a.onItem.call(a.scope?a.scope:dojo.global,b);else throw Error("GeneralReviewReadStore: The item cannot be found or it is not loaded!");},getValue:function(a,b,c){a=this.getValues(a,b);if(0<a.length)return a[0]},getValues:function(a,b){var c=[];a[b]&&(0<=a[b].length?c=c.concat(a[b]):c.push(a[b]));return c},isItem:function(a){if("string"==typeof a)return dojo.some(this._loadedItems,function(b){if(a==this.getIdentity(b))return!0},this);if(a)return"undefined"!=
typeof a.r&&a.r===this},isItemLoaded:function(a){var b=this.isItem(a);b&&"object"==typeof a&&(b=a.isLoaded);return b},loadItem:function(a){var b=a.item;if(b){var c=this;b.getChildren(function(e){var d=a.scope?a.scope:dojo.global;c._loadedItems=c._loadedItems.concat(e);b.children=e;b.isLoaded=!0;dojo.forEach(e,function(a){a.r=c});a.onItem&&a.onItem.call(d,b)},!0)}},fetch:function(a){if(a.onComplete){var b=a.scope?a.scope:dojo.global;this.root.r=this;this._loadedItems.push(this.root);this.loadItem({item:this.root});
a.onComplete.call(b,[this.root])}return a},close:function(a){this._loadedItems.length=0},getLabel:function(a){throw Error("GeneralReviewReadStore: getLabel method is abstract!");},hasAttribute:function(a,b){return this.isItem(a)&&("children"==b?"Folder"==a.elementType:typeof a[b])}})});
//# sourceMappingURL=GeneralReviewReadStore.js.map