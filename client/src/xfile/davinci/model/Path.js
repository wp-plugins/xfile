//>>built
define("davinci/model/Path",["dojo/_base/declare"],function(k){"undefined"===typeof davinci.model&&(davinci.model={});"undefined"===typeof davinci.model.Path&&(davinci.model.Path={});var d=k("davinci.model.Path",null,{constructor:function(a,b,c){a=a||".";"string"==typeof a?(this.path=a,this.getSegments()):(this.segments=a,this.hasLeading=b,this.hasTrailing=c)},endsWith:function(a){var b=dojo.clone(this.segments);for(a=(new d(a)).getSegments();0<a.length&&0<b.length;)if(a.pop()!=b.pop())return!1;return!0},
getExtension:function(){this.extension||(this.extension=this.path.substr(this.path.lastIndexOf(".")+1));return this.extension},segment:function(a){var b=this.getSegments();return b.length<a?null:b[a]},getSegments:function(){if(!this.segments){var a=this.path;this.segments=a.split("/");"/"==a.charAt(0)&&(this.hasLeading=!0);"/"==a.charAt(a.length-1)&&(this.hasTrailing=!0,this.segments.pop());this._canonicalize()}return this.segments},isAbsolute:function(){return this.hasLeading},getParentPath:function(){if(!this._parentPath){var a=
dojo.clone(this.segments);a.pop();this._parentPath=new d(a,this.hasLeading)}return dojo.clone(this._parentPath)},_clone:function(){return new d(dojo.clone(this.segments),this.hasLeading,this.hasTrailing)},append:function(a){a=a||"";"string"==typeof a&&(a=new d(a));if(a.isAbsolute())return a;var b=this.segments,c=a.getSegments(),b=b.concat(c);a=new d(b,this.hasLeading,a.hasTrailing);(".."==c[0]||"."==c[0])&&a._canonicalize();return a},toString:function(){var a=[];this.hasLeading&&a.push("/");for(var b=
0;b<this.segments.length;b++)0<b&&a.push("/"),a.push(this.segments[b]);this.hasTrailing&&a.push("/");return a.join("")},removeRelative:function(){var a=this.getSegments();return 0<a.length&&"."==a[1]?this.removeFirstSegments(1):this},relativeTo:function(a,b){"string"==typeof a&&(a=new d(a));var c=this.segments;if(this.isAbsolute())return this;var e=a.getSegments(),f=this.matchingFirstSegments(a),e=e.length;b&&(e-=1);e-=f;if(0==e+c.length-f)return davinci.model.Path.EMPTY;for(var h=[],g=0;g<e;g++)h.push("..");
for(g=f;g<c.length;g++)h.push(c[g]);return new d(h,!1,this.hasTrailing)},startsWith:function(a){var b=this.matchingFirstSegments(a);return a._length()==b},_length:function(a){return this.segments.length},matchingFirstSegments:function(a){var b=this.segments;a=a.getSegments();for(var c=Math.min(b.length,a.length),d=0,f=0;f<c&&b[f]==a[f];f++)d++;return d},removeFirstSegments:function(a){return new d(this.segments.slice(a,this.segments.length),this.hasLeading,this.hasTrailing)},removeMatchingLastSegments:function(a){a=
this.matchingFirstSegments(a);return this.removeLastSegments(a)},removeMatchingFirstSegments:function(a){a=this.matchingFirstSegments(a);return this._clone().removeFirstSegments(a)},removeLastSegments:function(a){a||(a=1);return new d(this.segments.slice(0,this.segments.length-a),this.hasLeading,this.hasTrailing)},lastSegment:function(){return this.segments[this.segments.length-1]},firstSegment:function(a){return this.segments[a||0]},equals:function(a){if(this.segments.length!=a.segments.length)return!1;
for(var b=0;b<this.segments.length;b++)if(a.segments[b]!=this.segments[b])return!1;return!0},_canonicalize:function(){for(var a,b=this.segments,c=0;c<b.length;c++)if("."==b[c]||".."==b[c]){a=!0;break}if(a){a=[];for(c=0;c<b.length;c++)".."==b[c]?0==a.length?this.hasLeading||a.push(b[c]):".."==a[a.length-1]?a.push(".."):a.pop():("."!=b[c]||1==this.segments.length)&&a.push(b[c]);a.length!=b.length&&(this.segments=a)}}});davinci.model.Path.EMPTY=new d("");return d});
//# sourceMappingURL=Path.js.map