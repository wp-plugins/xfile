//>>built
define("davinci/ve/commands/ResizeCommand",["dojo/_base/declare","dojo/dom-geometry","davinci/ve/widget","davinci/ve/States","davinci/ve/utils/StyleArray"],function(l,h,k,g,f){return l("davinci.ve.commands.ResizeCommand",null,{name:"resize",constructor:function(a,b,d,c){this._id=a?a.id:void 0;a=/^\s*[-+]?[0-9]*\.?[0-9]+\s*$/;a.test(b)&&(b=parseFloat(b));a.test(d)&&(d=parseFloat(d));this._newBox={w:b,h:d};this._applyToStateIndex=!c||"Normal"==c||"undefined"==c?"undefined":c},execute:function(){if(this._id&&
this._newBox){var a=k.byId(this._id);if(a&&a.domNode){var b=a.domNode,d=b.ownerDocument.defaultView.getComputedStyle(b),c=h.getContentBox(b,d);this._oldBox={w:c.w,h:c.h};var c=this._newBox.w,e=this._newBox.h;this._usesBorderBox(b)&&(b=h.getPadBorderExtents(b,d),"number"==typeof c&&0<=c&&(c+=b.w),"number"==typeof e&&0<=e&&(e+=b.h));b=[{}];"number"==typeof c?b[0].width=c+"px":"string"==typeof c&&(b[0].width=c);"number"==typeof e?b[0].height=e+"px":"string"==typeof e&&(b[0].height=e);c=a.getStyleValuesAllStates();
this._oldStyleValuesAllStates=dojo.clone(c);this._oldBox&&(this._oldStyleValuesAllStates[this._applyToStateIndex]=f.mergeStyleArrays(this._oldStyleValuesAllStates[this._applyToStateIndex],[{width:this._oldBox.w+"px"},{height:this._oldBox.h+"px"}]));c[this._applyToStateIndex]=c[this._applyToStateIndex]?f.mergeStyleArrays(c[this._applyToStateIndex],b):b;a.setStyleValuesAllStates(c);e=g.getStatesListCurrent(a.domNode);b=f.mergeStyleArrays([],c.undefined);for(d=0;d<e.length;d++)c[e[d]]&&(b=f.mergeStyleArrays(b,
c[e[d]]));a.setStyleValuesCanvas(b);a.setStyleValuesModel(c.undefined);this._resize(a);g.resetState(a.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[a]])}}},setContext:function(a){this._context=a},undo:function(){if(this._id){var a=k.byId(this._id);if(a){var b=this._oldStyleValuesAllStates,d=this._applyToStateIndex;a.setStyleValuesAllStates(b);b=f.mergeStyleArrays(b.undefined,b[d]);a.setStyleValuesCanvas(b);a.setStyleValuesModel(this._oldStyleValuesAllStates.undefined);this._resize(a);
g.resetState(a.domNode);dojo.publish("/davinci/ui/widgetPropertiesChanged",[[a]])}}},_usesBorderBox:function(a){var b=a.tagName.toLowerCase();(a=a.getAttribute("type"))&&(a=a.toLowerCase(a));return"table"==b||"button"==b||"input"==b&&"button"==a},_resize:function(a){var b=a.getParent();b&&b.dijitWidget&&b.dijitWidget.isLayoutContainer?b.resize():a.resize&&a.resize();a.renderWidget();a._updateSrcStyle()}})});
//# sourceMappingURL=ResizeCommand.js.map